/*
    @license
    Sirv v3.3.2 (c75606de)
    Copyright 2022 Sirv Limited
    https://sirv.com
*/

if (!window.Sirv) { (function() {!function(){var t={},e=function(n,i){Array.isArray(n)||(n=[n]);var r=[];return n.forEach((function(n){t[n]?(t[n].result||(t[n].result=e(t[n].deps,t[n].cb)),r.push(t[n].result)):r.push(null)})),"function"==typeof i?i.apply(this,r):i};window.Sirv={require:e,define:function(e,n,i){i||(i=n,n=null),t[e]={deps:n,cb:i,result:null}}}}(),Sirv.define("bHelpers",(function(){var t={};function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return t.createClass=function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t},t.inheritsLoose=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e},t.assertThisInitialized=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t})),Sirv.define("polyfill",(function(){!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=45)}([function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(30)("wks"),r=n(31),o=n(0).Symbol,s="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=i},function(t,e,n){var i=n(0),r=n(1),o=n(7),s=n(6),a=n(12),c=function(t,e,n){var h,u,l,d=t&c.F,f=t&c.G,p=t&c.S,g=t&c.P,m=t&c.B,v=t&c.W,y=f?r:r[e]||(r[e]={}),S=y.prototype,w=f?i:p?i[e]:(i[e]||{}).prototype;for(h in f&&(n=e),n)(u=!d&&w&&void 0!==w[h])&&a(y,h)||(l=u?w[h]:n[h],y[h]=f&&"function"!=typeof w[h]?n[h]:m&&u?o(l,i):v&&w[h]==l?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):g&&"function"==typeof l?o(Function.call,l):l,g&&((y.virtual||(y.virtual={}))[h]=l,t&c.R&&S&&!S[h]&&s(S,h,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var i=n(9);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(18)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){var i=n(8),r=n(20);t.exports=n(5)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(11);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var i=n(4),r=n(50),o=n(51),s=Object.defineProperty;e.f=n(5)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports={}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(29),r=n(16);t.exports=function(t){return i(r(t))}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=!0},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(9),r=n(0).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(56),r=n(32);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){var i=n(15),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){var i=n(30)("keys"),r=n(31);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(8).f,r=n(12),o=n(2)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){var i=n(16);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";var i=n(11);function r(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=i(e),this.reject=i(n)}t.exports.f=function(t){return new r(t)}},function(t,e,n){"use strict";var i=n(49)(!0);n(28)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e,n){"use strict";var i=n(17),r=n(3),o=n(52),s=n(6),a=n(10),c=n(53),h=n(24),u=n(59),l=n(2)("iterator"),d=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,n,p,g,m,v){c(n,e,p);var y,S,w,b=function(t){if(!d&&t in x)return x[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},E=e+" Iterator",_="values"==g,I=!1,x=t.prototype,O=x[l]||x["@@iterator"]||g&&x[g],N=O||b(g),C=g?_?b("entries"):N:void 0,A="Array"==e&&x.entries||O;if(A&&(w=u(A.call(new t)))!==Object.prototype&&w.next&&(h(w,E,!0),i||"function"==typeof w[l]||s(w,l,f)),_&&O&&"values"!==O.name&&(I=!0,N=function(){return O.call(this)}),i&&!v||!d&&!I&&x[l]||s(x,l,N),a[e]=N,a[E]=f,g)if(y={values:_?N:b("values"),keys:m?N:b("keys"),entries:C},v)for(S in y)S in x||o(x,S,y[S]);else r(r.P+r.F*(d||I),e,y);return y}},function(t,e,n){var i=n(14);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var i=n(1),r=n(0),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(17)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(0).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(14),r=n(2)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?n:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var i=n(4);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){var i=n(10),r=n(2)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,n){var i=n(34),r=n(2)("iterator"),o=n(10);t.exports=n(1).getIteratorMethod=function(t){if(null!=t)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e,n){var i=n(4),r=n(11),o=n(2)("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||null==(n=i(s)[o])?e:r(n)}},function(t,e,n){var i,r,o,s=n(7),a=n(67),c=n(33),h=n(19),u=n(0),l=u.process,d=u.setImmediate,f=u.clearImmediate,p=u.MessageChannel,g=u.Dispatch,m=0,v={},y=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},S=function(t){y.call(t.data)};d&&f||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return v[++m]=function(){a("function"==typeof t?t:Function(t),e)},i(m),m},f=function(t){delete v[t]},"process"==n(14)(l)?i=function(t){l.nextTick(s(y,t,1))}:g&&g.now?i=function(t){g.now(s(y,t,1))}:p?(o=(r=new p).port2,r.port1.onmessage=S,i=s(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(t){u.postMessage(t+"","*")},u.addEventListener("message",S,!1)):i="onreadystatechange"in h("script")?function(t){c.appendChild(h("script")).onreadystatechange=function(){c.removeChild(this),y.call(t)}}:function(t){setTimeout(s(y,t,1),0)}),t.exports={set:d,clear:f}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(4),r=n(9),o=n(26);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var i=n(2)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},t(o)}catch(t){}return n}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(5),r=n(21),o=n(13),s=n(43).f;t.exports=function(t){return function(e){for(var n,a=o(e),c=r(a),h=c.length,u=0,l=[];h>u;)n=c[u++],i&&!s.call(a,n)||l.push(t?[n,a[n]]:a[n]);return l}}},function(t,e,n){var i=n(46).default,r=n(74).default,o=n(78).default,s=n(83).default,a=n(86).default;window.Promise||(window.Promise=i),window.Array.from||(Array.from=r),window.Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r,o,s=0|e,a=Math.max(s>=0?s:i-Math.abs(s),0);a<i;){if((r=n[a])===(o=t)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;a++}return!1}}),window.Object.assign||(window.Object.assign=o),window.Object.entries||(window.Object.entries=s),window.Object.values||(window.Object.values=a),window.Object.fromEntries||(window.Object.fromEntries=function(t){return[].concat(t).reduce((function(t,e){var n=e[0],i=e[1];return t[n]=i,t}),{})}),window.Array.prototype.find||Object.defineProperty(Array.prototype,"find",{enumerable:!1,value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=e[r];if(t.call(i,o,r,e))return o;r++}}})},function(t,e,n){t.exports={default:n(47),__esModule:!0}},function(t,e,n){n(48),n(27),n(60),n(64),n(72),n(73),t.exports=n(1).Promise},function(t,e){},function(t,e,n){var i=n(15),r=n(16);t.exports=function(t){return function(e,n){var o,s,a=String(r(e)),c=i(n),h=a.length;return c<0||c>=h?t?"":void 0:(o=a.charCodeAt(c))<55296||o>56319||c+1===h||(s=a.charCodeAt(c+1))<56320||s>57343?t?a.charAt(c):o:t?a.slice(c,c+2):s-56320+(o-55296<<10)+65536}}},function(t,e,n){t.exports=!n(5)&&!n(18)((function(){return 7!=Object.defineProperty(n(19)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var i=n(9);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){t.exports=n(6)},function(t,e,n){"use strict";var i=n(54),r=n(20),o=n(24),s={};n(6)(s,n(2)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(4),r=n(55),o=n(32),s=n(23)("IE_PROTO"),a=function(){},c=function(){var t,e=n(19)("iframe"),i=o.length;for(e.style.display="none",n(33).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;i--;)delete c.prototype[o[i]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=i(t),n=new a,a.prototype=null,n[s]=t):n=c(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(8),r=n(4),o=n(21);t.exports=n(5)?Object.defineProperties:function(t,e){r(t);for(var n,s=o(e),a=s.length,c=0;a>c;)i.f(t,n=s[c++],e[n]);return t}},function(t,e,n){var i=n(12),r=n(13),o=n(57)(!1),s=n(23)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),c=0,h=[];for(n in a)n!=s&&i(a,n)&&h.push(n);for(;e.length>c;)i(a,n=e[c++])&&(~o(h,n)||h.push(n));return h}},function(t,e,n){var i=n(13),r=n(22),o=n(58);t.exports=function(t){return function(e,n,s){var a,c=i(e),h=r(c.length),u=o(s,h);if(t&&n!=n){for(;h>u;)if((a=c[u++])!=a)return!0}else for(;h>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}}},function(t,e,n){var i=n(15),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):o(t,e)}},function(t,e,n){var i=n(12),r=n(25),o=n(23)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){n(61);for(var i=n(0),r=n(6),o=n(10),s=n(2)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var h=a[c],u=i[h],l=u&&u.prototype;l&&!l[s]&&r(l,s,h),o[h]=o.Array}},function(t,e,n){"use strict";var i=n(62),r=n(63),o=n(10),s=n(13);t.exports=n(28)(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var i,r,o,s,a=n(17),c=n(0),h=n(7),u=n(34),l=n(3),d=n(9),f=n(11),p=n(65),g=n(66),m=n(38),v=n(39).set,y=n(68)(),S=n(26),w=n(40),b=n(69),E=n(41),_=c.TypeError,I=c.process,x=I&&I.versions,O=x&&x.v8||"",N=c.Promise,C="process"==u(I),A=function(){},P=r=S.f,k=!!function(){try{var t=N.resolve(1),e=(t.constructor={})[n(2)("species")]=function(t){t(A,A)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(A)instanceof e&&0!==O.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(t){}}(),T=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},L=function(t,e){if(!t._n){t._n=!0;var n=t._c;y((function(){for(var i=t._v,r=1==t._s,o=0,s=function(e){var n,o,s,a=r?e.ok:e.fail,c=e.resolve,h=e.reject,u=e.domain;try{a?(r||(2==t._h&&R(t),t._h=1),!0===a?n=i:(u&&u.enter(),n=a(i),u&&(u.exit(),s=!0)),n===e.promise?h(_("Promise-chain cycle")):(o=T(n))?o.call(n,c,h):c(n)):h(i)}catch(t){u&&!s&&u.exit(),h(t)}};n.length>o;)s(n[o++]);t._c=[],t._n=!1,e&&!t._h&&D(t)}))}},D=function(t){v.call(c,(function(){var e,n,i,r=t._v,o=M(t);if(o&&(e=w((function(){C?I.emit("unhandledRejection",r,t):(n=c.onunhandledrejection)?n({promise:t,reason:r}):(i=c.console)&&i.error&&i.error("Unhandled promise rejection",r)})),t._h=C||M(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},M=function(t){return 1!==t._h&&0===(t._a||t._c).length},R=function(t){v.call(c,(function(){var e;C?I.emit("rejectionHandled",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})}))},F=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),L(e,!0))},U=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw _("Promise can't be resolved itself");(e=T(t))?y((function(){var i={_w:n,_d:!1};try{e.call(t,h(U,i,1),h(F,i,1))}catch(t){F.call(i,t)}})):(n._v=t,n._s=1,L(n,!1))}catch(t){F.call({_w:n,_d:!1},t)}}};k||(N=function(t){p(this,N,"Promise","_h"),f(t),i.call(this);try{t(h(U,this,1),h(F,this,1))}catch(t){F.call(this,t)}},(i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(70)(N.prototype,{then:function(t,e){var n=P(m(this,N));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=C?I.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&L(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=h(U,t,1),this.reject=h(F,t,1)},S.f=P=function(t){return t===N||t===s?new o(t):r(t)}),l(l.G+l.W+l.F*!k,{Promise:N}),n(24)(N,"Promise"),n(71)("Promise"),s=n(1).Promise,l(l.S+l.F*!k,"Promise",{reject:function(t){var e=P(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(a||!k),"Promise",{resolve:function(t){return E(a&&this===s?N:this,t)}}),l(l.S+l.F*!(k&&n(42)((function(t){N.all(t).catch(A)}))),"Promise",{all:function(t){var e=this,n=P(e),i=n.resolve,r=n.reject,o=w((function(){var n=[],o=0,s=1;g(t,!1,(function(t){var a=o++,c=!1;n.push(void 0),s++,e.resolve(t).then((function(t){c||(c=!0,n[a]=t,--s||i(n))}),r)})),--s||i(n)}));return o.e&&r(o.v),n.promise},race:function(t){var e=this,n=P(e),i=n.reject,r=w((function(){g(t,!1,(function(t){e.resolve(t).then(n.resolve,i)}))}));return r.e&&i(r.v),n.promise}})},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(7),r=n(35),o=n(36),s=n(4),a=n(22),c=n(37),h={},u={};(e=t.exports=function(t,e,n,l,d){var f,p,g,m,v=d?function(){return t}:c(t),y=i(n,l,e?2:1),S=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(o(v)){for(f=a(t.length);f>S;S++)if((m=e?y(s(p=t[S])[0],p[1]):y(t[S]))===h||m===u)return m}else for(g=v.call(t);!(p=g.next()).done;)if((m=r(g,y,p.value,e))===h||m===u)return m}).BREAK=h,e.RETURN=u},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(0),r=n(39).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,c="process"==n(14)(s);t.exports=function(){var t,e,n,h=function(){var i,r;for(c&&(i=s.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(c)n=function(){s.nextTick(h)};else if(!o||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var u=a.resolve(void 0);n=function(){u.then(h)}}else n=function(){r.call(i,h)};else{var l=!0,d=document.createTextNode("");new o(h).observe(d,{characterData:!0}),n=function(){d.data=l=!l}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){var i=n(0).navigator;t.exports=i&&i.userAgent||""},function(t,e,n){var i=n(6);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},function(t,e,n){"use strict";var i=n(0),r=n(1),o=n(8),s=n(5),a=n(2)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];s&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var i=n(3),r=n(1),o=n(0),s=n(38),a=n(41);i(i.P+i.R,"Promise",{finally:function(t){var e=s(this,r.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then((function(){return n}))}:t,n?function(n){return a(e,t()).then((function(){throw n}))}:t)}})},function(t,e,n){"use strict";var i=n(3),r=n(26),o=n(40);i(i.S,"Promise",{try:function(t){var e=r.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){t.exports={default:n(75),__esModule:!0}},function(t,e,n){n(27),n(76),t.exports=n(1).Array.from},function(t,e,n){"use strict";var i=n(7),r=n(3),o=n(25),s=n(35),a=n(36),c=n(22),h=n(77),u=n(37);r(r.S+r.F*!n(42)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,r,l,d=o(t),f="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,v=0,y=u(d);if(m&&(g=i(g,p>2?arguments[2]:void 0,2)),null==y||f==Array&&a(y))for(n=new f(e=c(d.length));e>v;v++)h(n,v,m?g(d[v],v):d[v]);else for(l=y.call(d),n=new f;!(r=l.next()).done;v++)h(n,v,m?s(l,g,[r.value,v],!0):r.value);return n.length=v,n}})},function(t,e,n){"use strict";var i=n(8),r=n(20);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){t.exports={default:n(79),__esModule:!0}},function(t,e,n){n(80),t.exports=n(1).Object.assign},function(t,e,n){var i=n(3);i(i.S+i.F,"Object",{assign:n(81)})},function(t,e,n){"use strict";var i=n(5),r=n(21),o=n(82),s=n(43),a=n(25),c=n(29),h=Object.assign;t.exports=!h||n(18)((function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=h({},t)[n]||Object.keys(h({},e)).join("")!=i}))?function(t,e){for(var n=a(t),h=arguments.length,u=1,l=o.f,d=s.f;h>u;)for(var f,p=c(arguments[u++]),g=l?r(p).concat(l(p)):r(p),m=g.length,v=0;m>v;)f=g[v++],i&&!d.call(p,f)||(n[f]=p[f]);return n}:h},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){t.exports={default:n(84),__esModule:!0}},function(t,e,n){n(85),t.exports=n(1).Object.entries},function(t,e,n){var i=n(3),r=n(44)(!0);i(i.S,"Object",{entries:function(t){return r(t)}})},function(t,e,n){t.exports={default:n(87),__esModule:!0}},function(t,e,n){n(88),t.exports=n(1).Object.values},function(t,e,n){var i=n(3),r=n(44)(!1);i(i.S,"Object",{values:function(t){return r(t)}})}])})),Sirv.require("polyfill",(function(){})),Sirv.define("magicJS",["bHelpers"],(function(t){var e;return e=function(){var e,n,i,r=window,o=r.undefined,s=document,a=new WeakMap,c={UUID:0,storage:{},$uuid:function(t){return t.$J_UUID||(t.$J_UUID=++h.UUID)},getStorage:function(t){return h.storage[t]||(h.storage[t]={})},$false:function(){return!1},$true:function(){return!0},stylesId:"mjs-"+Math.floor(Math.random()*(new Date).getTime()),defined:function(t){return t!=o},typeOf:function(t){if(!h.defined(t))return!1;if(t.$J_TYPE)return t.$J_TYPE;if(t.nodeType){if(1===t.nodeType)return"element";if(3===t.nodeType)return"textnode"}if(t===r)return"window";if(t===s)return"document";if(t instanceof r.Array)return"array";if(t instanceof r.Function)return"function";if(t instanceof r.String)return"string";if(h.browser.trident){if(h.defined(t.cancelBubble))return"event"}else if(t===r.event||t.constructor==r.Event||t.constructor==r.MouseEvent||t.constructor==r.UIEvent||t.constructor==r.KeyboardEvent||t.constructor==r.KeyEvent)return"event";return t instanceof r.Date?"date":t instanceof r.RegExp?"regexp":t.length&&t.item?"collection":t.length&&t.callee?"arguments":typeof t},detach:function(t){var e;switch(h.typeOf(t)){case"object":for(var n in e={},t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=h.detach(t[n]));break;case"array":e=[];for(var i=0,r=t.length;i<r;i++)e[i]=h.detach(t[i]);break;default:return t}return h.$(e)},$:function(t){var e=t;switch(h.typeOf(t)){case"string":var n=s.getElementById(t);e=h.defined(n)?h.$(n):null;break;case"window":case"document":e=a.has(t)?a.get(t):new _(t);break;case"element":e=a.has(t)?a.get(t):new E(t);break;case"event":e=new h.Events.MagicEvent(t)}return e},$new:function(t,e,n){return h.$(s.createElement(t)).setProps(e||{}).setCss(n||{})},addCSS:function(t,e,n,i){var r=s.head||s.body;i&&(r=u(i).node||i),n||(n=h.stylesId);var o=u(r.querySelector("#"+n));o||(o=h.$new("style").attr("id",n).attr("type","text/css"),r.insertBefore(o.node,r.firstChild));var a=o.node.sheet;a||(a=o.node.styleSheet),"string"!==h.typeOf(e)&&(e=Object.entries(e).map((function(t){return t[0]+":"+t[1]})).join(";"));return a.insertRule?a.insertRule(t+" {"+e+"}",a.cssRules.length):a.addRule(t,e)},removeCSS:function(t,e){if("element"===h.typeOf(n)){var n=h.$(t),i=n.sheet||n.styleSheet;i.deleteRule?i.deleteRule(e):i.removeRule&&i.removeRule(e)}},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})).toUpperCase()},getAbsoluteURL:function(t){return e||(e=s.createElement("a")),e.setAttribute("href",t),("!!"+e.href).replace("!!","")},getHashCode:function(t){for(var e=0,n=t.length,i=0;i<n;++i)e=31*e+t.charCodeAt(i),e%=4294967296;return e},camelize:function(t){return t.replace(/-\D/g,(function(t){return t.charAt(1).toUpperCase()}))},dashize:function(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t.charAt(0).toLowerCase()}))},stringHas:function(t,e,n){return((n=n||"")+t+n).indexOf(n+e+n)>-1}},h=c,u=h.$,l={},d=navigator.userAgent.toLowerCase(),f=d.match(/(webkit|gecko|trident)\/(\d+\.?\d*)/i),p=d.match(/(edge|opr)\/(\d+\.?\d*)/i)||d.match(/(crios|chrome|safari|firefox|opera|opr)\/(\d+\.?\d*)/i),g=d.match(/version\/(\d+\.?\d*)/i),m=function(){"use strict";function e(){var t;this._magicClasses=[],this._features={fullScreen:!!(s.fullscreenEnabled||s.msFullscreenEnabled||s.webkitFullScreenEnabled||s.webkitFullscreenEnabled),cssFilters:!1},this._touchScreen="ontouchstart"in r||r.DocumentTouch&&s instanceof DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,this._mobile=!!d.match(/(android|bb\d+|meego).+|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/),this._engine=(t="unknown",f&&f[1]?t=f[1].toLowerCase():r.ActiveXObject?t="trident":s.getBoxObjectFor!==o||null!==r.mozInnerScreenY?t="gecko":null===r.WebKitPoint&&navigator.taintEnabled||(t="webkit"),t),this._chrome=!1,this._webkit="webkit"===this._engine,this._gecko="gecko"===this._engine,this._trident="trident"===this._engine,this._androidBrowser=!1,this._version=f&&f[2]?parseFloat(f[2]):0,this._uaName=p&&p[1]?p[1].toLowerCase():"",this._uaVersion=p&&p[2]?parseFloat(p[2]):0,this._cssPrefix="",this._cssDomPrefix="",this._domPrefix="",this._ieMode=0,this._platform=function(){var t;return d.match(/ip(?:ad|od|hone)/)?t="ios":((t=d.match(/(?:webos|android)/))||(t=navigator.platform.match(/mac|win|linux/i))||(t=["other"]),t=t[0].toLowerCase()),t}(),this._backCompat=s.compatMode&&"backcompat"===s.compatMode.toLowerCase(),this._scrollbarsWidth=0,this._ready=!1,this.calculate()}var n=e.prototype;return n.calculate=function(){var t=this;switch(this._engine){case"trident":this._version||(this._version=r.XMLHttpRequest?3:2);break;case"gecko":this._version=p&&p[2]?parseFloat(p[2]):0}p&&"crios"===p[1]&&(this._uaName="chrome"),r.chrome&&(this._chrome=!0),"safari"===this._uaName&&g&&g[1]&&(this._uaVersion=parseFloat(g[1])),"android"===this._platform&&this._webkit&&g&&g[1]&&(this._androidBrowser=!0);var e={gecko:["-moz-","Moz","moz"],webkit:["-webkit-","Webkit","webkit"],trident:["-ms-","ms","ms"]}[this._engine]||["","",""];this._cssPrefix=e[0],this._cssDomPrefix=e[1],this._domPrefix=e[2],this._ieMode=t._trident&&s.documentMode?s.documentMode:o,!this._mobile&&"mac"===this._platform&&this._touchScreen&&(this._mobile=!0,this._platform="ios"),this._magicClasses.push(this._platform+"-magic"),this._mobile&&this._magicClasses.push("mobile-magic"),this._androidBrowser&&this._magicClasses.push("android-browser-magic"),this._ieMode&&(this._uaName="ie",this._uaVersion=this._ieMode,this._magicClasses.push("ie"+this._ieMode+"-magic")),this._magicClasses.push("svg-magic");var n=(s.documentElement.className||"").match(/\S+/g)||[];s.documentElement.className=n.concat(this._magicClasses).join(" ");try{s.documentElement.setAttribute("data-magic-ua",h.browser.uaName),s.documentElement.setAttribute("data-magic-ua-ver",h.browser.uaVersion),s.documentElement.setAttribute("data-magic-engine",h.browser.engine),s.documentElement.setAttribute("data-magic-engine-ver",h.browser.version)}catch(t){}r.navigator.pointerEnabled||["Down","Up","Move","Over","Out"].forEach((function(e){var n="pointer"+e.toLowerCase();"edge"===t._uaName?l[n]=n:r.navigator.msPointerEnabled?l[n]="MSPointer"+e:l[n]=-1}))},n.onready=function(){if(!this._ready){this._ready=!0;try{var t=h.$new("div").setCss({width:100,height:100,overflow:"scroll",position:"absolute",top:-9999}).appendTo(s.body);this._scrollbarsWidth=t.node.offsetWidth-t.node.clientWidth,t.remove()}catch(t){}try{var e=h.$new("div");e.node.style.cssText=h.dashize("filter")+":blur(2px);",this._features.cssFilters=!!e.node.style.length}catch(t){}this._features.cssFilters||h.$(s.documentElement).addClass("no-cssfilters-magic"),h.$(s).callEvent("domready")}},t.createClass(e,[{key:"features",get:function(){return this._features}},{key:"touchScreen",get:function(){return this._touchScreen}},{key:"mobile",get:function(){return this._mobile}},{key:"engine",get:function(){return this._engine}},{key:"version",get:function(){return this._version}},{key:"uaName",get:function(){return this._uaName}},{key:"uaVersion",get:function(){return this._uaVersion}},{key:"cssPrefix",get:function(){return this._cssPrefix}},{key:"cssDomPrefix",get:function(){return this._cssDomPrefix}},{key:"domPrefix",get:function(){return this._domPrefix}},{key:"ieMode",get:function(){return this._ieMode}},{key:"platform",get:function(){return this._platform}},{key:"backCompat",get:function(){return this._backCompat}},{key:"scrollbarsWidth",get:function(){return this._scrollbarsWidth}},{key:"doc",get:function(){return s.compatMode&&"backcompat"===s.compatMode.toLowerCase()?s.body:s.documentElement}},{key:"ready",get:function(){return this._ready}},{key:"chrome",get:function(){return this._chrome}},{key:"webkit",get:function(){return this._webkit}},{key:"gecko",get:function(){return this._gecko}},{key:"trident",get:function(){return this._trident}},{key:"androidBrowser",get:function(){return this._androidBrowser}}]),e}();h.browser=new m,i={capable:h.browser.features.fullScreen,enabled:function(){return!!(s.fullscreenElement||s[h.browser.domPrefix+"FullscreenElement"]||s.fullScreen||s.webkitIsFullScreen||s[h.browser.domPrefix+"FullScreen"])},request:function(t,e){e||(e={}),i.capable&&!e.windowFullscreen?(i.onchange=function(t){i.enabled()?e.onEnter&&e.onEnter():(h.$(s).removeEvent(i.changeEventName,i.onchange),e.onExit&&e.onExit())},h.$(s).addEvent(i.changeEventName,i.onchange),i.onerror=function(t){e.fallback&&e.fallback(),h.$(s).removeEvent(i.errorEventName,i.onerror)},h.$(s).addEvent(i.errorEventName,i.onerror),function(t){var e=t.requestFullscreen||t[h.browser.domPrefix+"RequestFullscreen"]||t[h.browser.domPrefix+"RequestFullScreen"];e||(e=function(){}),e.call(t)}(u(t).node)):e.fallback&&e.fallback()},cancel:(n=s.exitFullscreen||s.cancelFullScreen||s[h.browser.domPrefix+"ExitFullscreen"]||s[h.browser.domPrefix+"CancelFullScreen"],n||(n=function(){}),n),changeEventName:function(){var t;return s.msExitFullscreen?t="MSFullscreenChange":(t=s.exitFullscreen?"":h.browser.domPrefix,t+="fullscreenchange"),t}(),errorEventName:function(){var t;return s.msExitFullscreen?t="MSFullscreenError":(t=s.exitFullscreen?"":h.browser.domPrefix,t+="fullscreenerror"),t}(),prefix:h.browser.domPrefix,activeElement:null},h.browser.fullScreen=i;var v=/^(border(Top|Bottom|Left|Right)Width)|((padding|margin)(Top|Bottom|Left|Right))$/,y={},S={fontWeight:!0,lineHeight:!0,opacity:!0,zIndex:!0,zoom:!0},w=function(t){if(!(t in s.documentElement.style)){var e=h.browser.cssDomPrefix+t.charAt(0).toUpperCase()+t.slice(1);if(e in s.documentElement.style)return e}return t};h.normalizeCSS=w;var b=function(){"use strict";function t(t){this.node=t,this.$J_UUID=++h.UUID,this.$J_TYPE=null,this.$J_EXT=function(){},a.set(this.node,this)}var e=t.prototype;return e.fetch=function(t,e){var n=h.getStorage(this.$J_UUID),i=n[t],r=null;return e!==o&&i===o&&(n[t]=e,i=n[t]),h.defined(i)&&(r=i),r},e.store=function(t,e){return h.getStorage(this.$J_UUID)[t]=e,this},e.del=function(t){return delete h.getStorage(this.$J_UUID)[t],this},e.addEvent=function(t,e,n,i){var o=this;if("array"===h.typeOf(t))return t.forEach((function(t){o.addEvent(t,e,n,i)})),this;if(!(t=l[t]||t)||!e||"string"!==h.typeOf(t)||"function"!==h.typeOf(e))return this;if("domready"===t&&h.browser.ready)return e(),this;n=parseInt(n||50,10),e.$J_EUID||(e.$J_EUID=Math.floor(Math.random()*+new Date));var s=this.fetch("_EVENTS_",{}),a=s[t];a||(a=[],s[t]=a,h.Events.handlers[t]?h.Events.handlers[t].add.call(this,i):(a.handle=function(e){e=Object.assign(e||r.e,{$J_TYPE:"event"}),o.callEvent(t,h.$(e))},this.node[h._event_add_](h._event_prefix_+t,a.handle,!1)));var c={type:t,fn:e,priority:n,euid:e.$J_EUID};return a.push(c),a.sort((function(t,e){return t.priority-e.priority})),this},e.removeEvent=function(){var t=this,e=this.fetch("_EVENTS_",{}),n=arguments.length<=0?void 0:arguments[0],i=arguments.length>1?arguments.length<=1?void 0:arguments[1]:-100;if("array"===h.typeOf(n))return n.forEach((function(e){t.removeEvent(e,i)})),this;if(!(n=l[n]||n)||"string"!==h.typeOf(n)||!e||!e[n])return this;for(var r=e[n]||[],o=0;o<r.length;o++){var s=r[o];(-100===i||i&&i.$J_EUID===s.euid)&&r.splice(o--,1)}return 0===r.length&&(h.Events.handlers[n]?h.Events.handlers[n].remove.call(this):this.node[h._event_del_](h._event_prefix_+n,r.handle,!1),delete e[n]),this},e.callEvent=function(t,e){var n=this.fetch("_EVENTS_",{});if((t=l[t]||t)&&"string"===h.typeOf(t)&&n&&n[t]){try{e&&e.type||(e=Object.assign(e||{},{type:t}))}catch(t){}e.timeStamp===o&&(e.timeStamp=+new Date);for(var i=n[t]||[],r=0;r<i.length&&(!e.isQueueStopped||!e.isQueueStopped());r++)i[r].fn.call(this,e)}else;},e.raiseEvent=function(t,e){var n,i="domready"!==t,r=this;return t=l[t]||t,i?(r===s&&s.createEvent&&!r.dispatchEvent&&(r=s.documentElement),s.createEvent?(n=s.createEvent(t)).initEvent(e,!0,!0):(n=s.createEventObject()).eventType=t,s.createEvent?r.dispatchEvent(n):r.fireEvent("on"+e,n),n):(this.callEvent(t),this)},e.clearEvents=function(){var t=this,e=this.fetch("_EVENTS_");return e?(Object.keys(e).forEach((function(e){t.removeEvent(e)})),this.del("_EVENTS_"),this):this},t}(),E=function(e){"use strict";function n(t){var n;return(n=e.call(this,t)||this).$J_TYPE="magicjs-element",n}t.inheritsLoose(n,e);var i=n.prototype;return i.requestFullScreen=function(){h.browser.fullScreen.capable&&!s.requestFullScreen?h.browser.fullScreen.request(this.node):this.node.requestFullScreen(this.node)},i.addClass=function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach((function(e){t.node.classList.add(e)})),this},i.removeClass=function(t){return this.node.classList.remove(t),this},i.getCss=function(t){var e=h.camelize(t);y[e]||(y[e]=w(e)),t=y[e];var n,i,o,s=(n=this.node,i=t,(o=r.getComputedStyle(n,null))?o.getPropertyValue(i)||o[i]:null);if("auto"===s&&(s=null),null!==s){if("opacity"===t)return h.defined(s)?parseFloat(s):1;v.test(t)&&(s=parseInt(s,10)?s:"0px")}return s},i.setCssProp=function(t,e){var n=h.camelize(t);try{y[n]||(y[n]=w(n)),t=y[n],this.node.style[t]=e+("number"!==h.typeOf(e)||S[n]?"":"px")}catch(t){}return this},i.setCss=function(t){var e=this;return Object.entries(t).forEach((function(t){e.setCssProp.apply(e,t)})),this},i.getStyles=function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Object.fromEntries(n.map((function(e){return[e,t.getCss(e)]})))},i.setProps=function(t){var e=this;return Object.entries(t).forEach((function(t){var n;(t[1]=""+t[1],"class"===t[0])?e.addClass(t[1]):(n=e.node).setAttribute.apply(n,t)})),this},i.render=function(){return this.size},i.getInnerSize=function(t){var e=this.size;return e.width-=parseFloat(this.getCss("border-left-width")||0)+parseFloat(this.getCss("border-right-width")||0),e.height-=parseFloat(this.getCss("border-top-width")||0)+parseFloat(this.getCss("border-bottom-width")||0),t||(e.width-=parseFloat(this.getCss("padding-left")||0)+parseFloat(this.getCss("padding-right")||0),e.height-=parseFloat(this.getCss("padding-top")||0)+parseFloat(this.getCss("padding-bottom")||0)),e},i.changeContent=function(t){try{this.node.innerHTML=t}catch(e){this.node.innerText=t}return this},i.remove=function(){var t=this;return this.node.parentNode&&(t=h.$(this.node.parentNode.removeChild(this.node))),t},i.kill=function(){return Array.from(this.node.childNodes).forEach((function(t){3!==t.nodeType&&8!==t.nodeType&&h.$(t).kill()})),this.remove(),this.clearEvents(),this.$J_UUID&&(h.storage[this.$J_UUID]=null,delete h.storage[this.$J_UUID]),null},i.append=function(t,e){void 0===e&&(e="bottom");var n=this.node.firstChild;return t=h.$(t),"top"===e&&n?this.node.insertBefore(t.node,n):this.node.appendChild(t.node||t),this},i.appendTo=function(t,e){return h.$(t).append(this,e),this},i.attr=function(t,e){var n=this;return h.defined(e)?this.node.setAttribute(t,e):(n=this.node.getAttribute(t))&&"string"===h.typeOf(n)&&""!==n.trim()||(n=null),n},i.removeAttr=function(t){return this.node.removeAttribute(t),this},i.hasClass=function(t){if(this.node.classList)return this.node.classList.contains(t);var e=this.node.className;return this.node.className instanceof SVGAnimatedString&&(e=this.node.className.baseVal),!h.stringHas(t||""," ")&&h.stringHas(e||""," ")},i.hasAttribute=function(t){return this.node.hasAttribute(t)},t.createClass(n,[{key:"size",get:function(){return{width:this.node.offsetWidth,height:this.node.offsetHeight}}},{key:"scroll",get:function(){return{top:this.node.scrollTop,left:this.node.scrollLeft}}},{key:"fullScroll",get:function(){var t=this.node,e={top:0,left:0};do{e.left+=t.scrollLeft||0,e.top+=t.scrollTop||0,t=t.parentNode}while(t);return e}},{key:"position",get:function(){var t=this.node.getBoundingClientRect(),e=h.$(s).scroll,n=h.browser.doc;return{top:t.top+e.y-n.clientTop,left:t.left+e.x-n.clientLeft}}},{key:"rect",get:function(){var t=this.position,e=this.size;return{top:t.top,bottom:t.top+e.height,left:t.left,right:t.left+e.width}}},{key:"tagName",get:function(){return this.node.tagName.toLowerCase()}}]),n}(b),_=function(e){"use strict";function n(t){var n;n=e.call(this,t)||this;var i="magicjs-document";return t===r&&(i="magicjs-window"),n.$J_TYPE=i,n}return t.inheritsLoose(n,e),t.createClass(n,[{key:"size",get:function(){return h.browser.touchScreen?{width:r.innerWidth,height:r.innerHeight}:{width:h.browser.doc.clientWidth,height:h.browser.doc.clientHeight}}},{key:"scroll",get:function(){return{x:r.pageXOffset||h.browser.doc.scrollLeft,y:r.pageYOffset||h.browser.doc.scrollTop}}},{key:"fullSize",get:function(){var t=this.size;return{width:Math.max(h.browser.doc.scrollWidth,t.width),height:Math.max(h.browser.doc.scrollHeight,t.height)}}}]),n}(b);h.Events={};var I=function(){"use strict";function e(t){this.oe=t,this.$J_TYPE="event",this.isQueueStopped=h.$false,this.type=this.oe.type,this.timeStamp=this.oe.timeStamp,this.propertyName=this.oe.propertyName,this.pointerType=this.oe.pointerType}var n=e.prototype;return n.stop=function(){return this.stopDistribution().stopDefaults()},n.stopDistribution=function(){return this.oe.stopPropagation?this.oe.stopPropagation():this.oe.cancelBubble=!0,this},n.stopDefaults=function(){return this.oe.preventDefault?this.oe.preventDefault():this.oe.returnValue=!1,this},n.stopQueue=function(){return this.isQueueStopped=h.$true,this},n.isTouchEvent=function(){return this.oe.pointerType&&("touch"===this.oe.pointerType||this.oe.pointerType===this.oe.MSPOINTER_TYPE_TOUCH)||/touch/i.test(this.type)},n.isPrimaryTouch=function(){return this.oe.pointerType?("touch"===this.oe.pointerType||this.oe.MSPOINTER_TYPE_TOUCH===this.oe.pointerType)&&this.oe.isPrimary:this.oe instanceof r.TouchEvent&&(1===this.oe.changedTouches.length&&(!this.oe.targetTouches.length||this.oe.targetTouches[0].identifier===this.oe.changedTouches[0].identifier))},t.createClass(e,[{key:"originEvent",get:function(){return this.oe}},{key:"clientXY",get:function(){var t,e={x:0,y:0};return t=/touch/i.test(this.type)?this.oe.changedTouches[0]:this.oe,h.defined(t)&&(e={x:t.clientX,y:t.clientY}),e}},{key:"pageXY",get:function(){var t=this.oe;return/touch/i.test(this.type)&&(t=this.oe.changedTouches[0]),h.defined(t)?{x:t.pageX||t.clientX+h.browser.doc.scrollLeft,y:t.pageY||t.clientY+h.browser.doc.scrollTop}:{x:0,y:0}}},{key:"target",get:function(){var t=this.oe.target;for(t||(t=this.oe.srcElement);t&&3===t.nodeType;)t=t.parentNode;return t}},{key:"related",get:function(){var t=null;switch(this.type){case"mouseover":case"pointerover":case"MSPointerOver":(t=this.oe.relatedTarget)||(t=this.oe.fromElement);break;case"mouseout":case"pointerout":case"MSPointerOut":(t=this.oe.relatedTarget)||(t=this.oe.toElement);break;default:return t}try{for(;t&&3===t.nodeType;)t=t.parentNode}catch(e){t=null}return t}},{key:"button",get:function(){var t=this.oe.which;return this.oe.which||this.oe.button===o||(t=1&this.oe.button?1:2&this.oe.button?3:4&this.oe.button?2:0),t}},{key:"primaryTouch",get:function(){var t=null;return this.oe.pointerType?!this.oe.isPrimary||"touch"!==this.oe.pointerType&&this.oe.MSPOINTER_TYPE_TOUCH!==this.oe.pointerType||(t=this.oe):this.oe instanceof r.TouchEvent&&(t=this.oe.changedTouches[0]),t}},{key:"primaryTouchId",get:function(){var t=null;return this.oe.pointerType?!this.oe.isPrimary||"touch"!==this.oe.pointerType&&this.oe.MSPOINTER_TYPE_TOUCH!==this.oe.pointerType||(t=this.oe.pointerId):this.oe instanceof r.TouchEvent&&(t=this.oe.changedTouches[0].identifier),t}}]),e}();h.Events.MagicEvent=I,h._event_add_="addEventListener",h._event_del_="removeEventListener",h._event_prefix_="",s.addEventListener||(h._event_add_="attachEvent",h._event_del_="detachEvent",h._event_prefix_="on");var x=function(){"use strict";function e(t){this.$J_TYPE="event.custom",this.magicEvent="event"===t.$J_TYPE?t:t.magicEvent,this.type=this.magicEvent.type,this._target=null,this.x=this.magicEvent.oe.x,this.y=this.magicEvent.oe.y,this.timeStamp=this.magicEvent.oe.timeStamp,this.relatedTarget=this.magicEvent.related,this.isQueueStopped=this.magicEvent.isQueueStopped,this.events=[]}var n=e.prototype;return n.pushToEvents=function(t){var e=t;this.events.push(e)},n.stop=function(){return this.stopDistribution().stopDefaults()},n.stopDistribution=function(){return this.events.forEach((function(t){try{t.stopDistribution()}catch(t){}})),this},n.stopDefaults=function(){return this.events.forEach((function(t){try{t.stopDefaults()}catch(t){}})),this},n.stopQueue=function(){return this.isQueueStopped=h.$true,this.magicEvent.stopQueue(),this},n.isTouchEvent=function(){return this.magicEvent.isTouchEvent()},n.isPrimaryTouch=function(){return this.magicEvent.isPrimaryTouch()},t.createClass(e,[{key:"originEvent",get:function(){return this.magicEvent.originEvent}},{key:"clientXY",get:function(){return{x:this.clientX||this.magicEvent.oe.clientX,y:this.clientY||this.magicEvent.oe.clientY}}},{key:"pageXY",get:function(){return{x:this.x,y:this.y}}},{key:"target",get:function(){return this._target||this.magicEvent.oe.target}},{key:"related",get:function(){return this.relatedTarget}},{key:"button",get:function(){return this.magicEvent.button}},{key:"originalTarget",get:function(){return this.events.length>0?this.events[0].target:o}},{key:"primaryTouch",get:function(){return this.magicEvent.primaryTouch}},{key:"primaryTouchId",get:function(){return this.magicEvent.primaryTouchId}}]),e}();return h.Events.Custom=x,h.Events.handlers={},function(t){"interactive"===s.readyState||"complete"===s.readyState?setTimeout((function(){return t.browser.onready()}),0):(t.$(s).addEvent("readystatechange",(function(e){"interactive"!==e.target.readyState&&"complete"!==e.target.readyState||t.browser.onready()})),t.$(s).addEvent("DOMContentLoaded",(function(){t.browser.onready()})),t.$(r).addEvent("load",(function(){t.browser.onready()})))}(c),function(e){var n=function(e){"use strict";function n(t,n){var i;i=e.call(this,t)||this;var r=t.pageXY;return i.type="btnclick",i.x=r.x,i.y=r.y,i.clientX=t.oe.clientX,i.clientY=t.oe.clientY,i._target=n.node,i.pushToEvents(t),i}return t.inheritsLoose(n,e),n}(e.Events.Custom),i={threshold:300,button:1},r=function(t){t.stopDefaults()},o=function(t){var e,i=this.fetch("event:btnclick:options");if("dblclick"===t.type||t.button===i.button)if(this.fetch("event:btnclick:ignore"))this.del("event:btnclick:ignore");else if("mousedown"===t.type)e=new n(t,this),this.store("event:btnclick:btnclickEvent",e);else if("mouseup"===t.type){if(!(e=this.fetch("event:btnclick:btnclickEvent")))return;var r=t.pageXY;this.del("event:btnclick:btnclickEvent"),e.pushToEvents(t),t.timeStamp-e.timeStamp<=i.threshold&&Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))<=5&&this.callEvent("btnclick",e),u(s).callEvent("mouseup",t)}else"dblclick"===t.type&&(e=new n(t,this),this.callEvent("btnclick",e))},a={add:function(t){this.store("event:btnclick:options",Object.assign(e.detach(i),t||{})),this.addEvent(["mousedown","mouseup"],o,1).addEvent("click",r,1)},remove:function(){this.removeEvent(["mousedown","mouseup"],o).removeEvent("click",r)}};e.Events.handlers.btnclick=a}(c),function(e){var n=function(e){"use strict";function n(t,n,i){var r;r=e.call(this,t)||this;var o=t.pageXY;return r.x=o.x,r.y=o.y,r.type="mousedrag",r.clientX=t.clientX,r.clientY=t.clientY,r._target=n.node,r.state=i,r.dragged=!1,r.pushToEvents(t),r}return t.inheritsLoose(n,e),n}(e.Events.Custom),i=function(t){if(1===t.button){var e=new n(t,this,"dragstart");this.store("event:mousedrag:dragstart",e)}},r=function(t){var e=this.fetch("event:mousedrag:dragstart");e&&(t.stopDefaults(),e=new n(t,this,"dragend"),this.del("event:mousedrag:dragstart"),this.callEvent("mousedrag",e))},o=function(t){var e=this.fetch("event:mousedrag:dragstart");e&&(t.stopDefaults(),e.dragged||(e.dragged=!0,this.callEvent("mousedrag",e)),e=new n(t,this,"dragmove"),this.callEvent("mousedrag",e))},a={add:function(){var t=o.bind(this),e=r.bind(this);this.addEvent("mousedown",i,1).addEvent("mouseup",r,1),u(s).addEvent("mousemove",t,1).addEvent("mouseup",e,1),this.store("event:mousedrag:listeners:document:move",t),this.store("event:mousedrag:listeners:document:end",e)},remove:function(){var t=function(){};this.removeEvent("mousedown",i).removeEvent("mouseup",r),u(s).removeEvent("mousemove",this.fetch("event:mousedrag:listeners:document:move")||t).removeEvent("mouseup",this.fetch("event:mousedrag:listeners:document:end")||t),this.del("event:mousedrag:listeners:document:move").del("event:mousedrag:listeners:document:end")}};e.Events.handlers.mousedrag=a}(c),function(e){var n=function(e){"use strict";function n(t,n){var i;i=e.call(this,t)||this;var r=t.pageXY;return i.x=r.x,i.y=r.y,i.type="dblbtnclick",i.clientX=t.clientX,i.clientY=t.clientY,i._target=n.node,i.timedout=!1,i.tm=null,i.pushToEvents(t),i}return t.inheritsLoose(n,e),n}(e.Events.Custom),i={threshold:200},r=function(t){var i=this,r=this.fetch("event:dblbtnclick:event");if(r)clearTimeout(r.tm),this.del("event:dblbtnclick:event"),r.timedout||(r.pushToEvents(t),t.stopQueue().stop(),this.callEvent("dblbtnclick",r));else{var o=this.fetch("event:dblbtnclick:options");(r=new n(t,this)).tm=setTimeout((function(){r.timedout=!0,t.isQueueStopped=e.$false,i.callEvent("btnclick",t),i.del("event:dblbtnclick:event")}),o.threshold+10),this.store("event:dblbtnclick:event",r),t.stopQueue()}},o={add:function(t){this.store("event:dblbtnclick:options",Object.assign(e.detach(i),t||{})),this.addEvent("btnclick",r,1)},remove:function(){this.removeEvent("btnclick",r)}};e.Events.handlers.dblbtnclick=o}(c),function(e){var n=function(e){"use strict";function n(t,n){var i;i=e.call(this,t)||this;var r=t.primaryTouch;return i.type="tap",i.id=r.pointerId||r.identifier,i.x=r.pageX,i.y=r.pageY,i.pageX=r.pageX,i.pageY=r.pageY,i.clientX=r.clientX,i.clientY=r.clientY,i._target=n.node,i.pushToEvents(t),i}return t.inheritsLoose(n,e),t.createClass(n,[{key:"button",get:function(){return 0}}]),n}(e.Events.Custom),i=function(t){t.stopDefaults()},r=function(t){t.isPrimaryTouch()?(this.store("event:tap:event",new n(t,this)),this.store("event:btnclick:ignore",!0)):this.del("event:tap:event")},o=function(t){var e=this.fetch("event:tap:event");e&&t.isPrimaryTouch()&&(this.del("event:tap:event"),e.id===t.primaryTouchId&&t.timeStamp-e.timeStamp<=200&&Math.sqrt(Math.pow(t.primaryTouch.pageX-e.x,2)+Math.pow(t.primaryTouch.pageY-e.y,2))<=10&&(this.del("event:btnclick:btnclickEvent"),t.stop(),e.pushToEvents(t),this.callEvent("tap",e)))},s={add:function(t){this.addEvent(["touchstart","pointerdown"],r,1).addEvent(["touchend","pointerup"],o,1).addEvent("click",i,1)},remove:function(){this.removeEvent(["touchstart","pointerdown"],r).removeEvent(["touchend","pointerup"],o).removeEvent("click",i)}};e.Events.handlers.tap=s}(c),function(e){var n=function(e){"use strict";function n(t,n){var i;return(i=e.call(this,t)||this).type="dbltap",i.x=t.x,i.y=t.y,i.clientX=t.clientX,i.clientY=t.clientY,i._target=n.node,i.timedout=!1,i.tm=null,i.pushToEvents(t),i}return t.inheritsLoose(n,e),n}(e.Events.Custom),i={threshold:300},r=function(t){var i=this,r=this.fetch("event:dbltap:event");if(r)clearTimeout(r.tm),this.del("event:dbltap:event"),r.timedout||(r.pushToEvents(t),t.stopQueue().stop(),this.callEvent("dbltap",r));else{var o=this.fetch("event:dbltap:options");(r=new n(t,this)).tm=setTimeout((function(){r.timedout=!0,t.isQueueStopped=e.$false,i.callEvent("tap",t)}),o.threshold+10),this.store("event:dbltap:event",r),t.stopQueue()}},o={add:function(t){this.store("event:dbltap:options",Object.assign(e.detach(i),t||{})),this.addEvent("tap",r,1)},remove:function(){this.removeEvent("tap",r)}};e.Events.handlers.dbltap=o}(c),function(e){var n=function(e){"use strict";function n(t,n,i){var r;r=e.call(this,t)||this;var o=t.primaryTouch;return r.type="touchdrag",r.id=o.pointerId||o.identifier,r.clientX=o.clientX,r.clientY=o.clientY,r.pageX=o.pageX,r.pageY=o.pageY,r.x=o.pageX,r.y=o.pageY,r._target=n.node,r.state=i,r.dragged=!1,r.pushToEvents(t),r}return t.inheritsLoose(n,e),t.createClass(n,[{key:"button",get:function(){return 0}}]),n}(e.Events.Custom),i=function(t){if(t.isPrimaryTouch()){var e=new n(t,this,"dragstart");this.store("event:touchdrag:dragstart",e)}},r=function(t){var e=this.fetch("event:touchdrag:dragstart");e&&e.dragged&&e.id===t.primaryTouchId&&(e=new n(t,this,"dragend"),this.del("event:touchdrag:dragstart"),this.callEvent("touchdrag",e))},o=function(t){var e=this.fetch("event:touchdrag:dragstart");e&&t.isPrimaryTouch()&&(e.id===t.primaryTouchId?(!e.dragged&&Math.sqrt(Math.pow(t.primaryTouch.pageX-e.x,2)+Math.pow(t.primaryTouch.pageY-e.y,2))>10&&(e.dragged=!0,this.callEvent("touchdrag",e)),e.dragged&&(e=new n(t,this,"dragmove"),this.callEvent("touchdrag",e))):this.del("event:touchdrag:dragstart"))},a={add:function(){var t=o.bind(this),e=r.bind(this);this.addEvent(["touchstart","pointerdown"],i,1).addEvent(["touchend","pointerup"],r,1).addEvent(["touchmove","pointermove"],o,1),this.store("event:touchdrag:listeners:document:move",t),this.store("event:touchdrag:listeners:document:end",e),u(s).addEvent("pointermove",t,1).addEvent("pointerup",e,1)},remove:function(){var t=function(){};this.removeEvent(["touchstart","pointerdown"],i).removeEvent(["touchend","pointerup"],r).removeEvent(["touchmove","pointermove"],o),u(s).removeEvent("pointermove",this.fetch("event:touchdrag:listeners:document:move")||t,1).removeEvent("pointerup",this.fetch("event:touchdrag:listeners:document:end")||t,1),this.del("event:touchdrag:listeners:document:move").del("event:touchdrag:listeners:document:end")}};e.Events.handlers.touchdrag=a}(c),function(e){var n=null,i=e.$,r=function(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)},o=function(t,e){var n,i=t.originEvent;return i.targetTouches&&i.changedTouches?(n=i.targetTouches?i.targetTouches:i.changedTouches,n=Array.prototype.slice.call(n)):(n=[],e&&e.forEach((function(t){n.push(t)}))),n},a=function(t,e,n){return!(!t.pointerId||"touch"!==t.pointerType||n&&!e.has(t.pointerId))&&(e.set(t.pointerId,t),!0)},c=function(t){return t.pointerId&&"touch"===t.pointerType?t.pointerId:t.identifier},h=function(t,e){for(var n=!1,i=0;i<t.length&&2!==e.length;i++){var r=c(t[i]);e.includes(r)||(e.push(r),n=!0)}return n},u=function(t,e){var n=!1;if(e)for(var i=function(t){return t.map((function(t){return c(t)}))}(t),r=0;r<e.length;r++)if(!i.includes(e[r])){e.splice(r,1),n=!0;break}return n},l=function(t,e){for(var n=[],i=0;i<t.length&&(!e.includes(c(t[i]))||(n.push(t[i]),2!==n.length));i++);return n},d=function(t){var e=t.fetch("event:pinch:target");e&&e.removeEvent(["touchend"],t.fetch("event:pinch:listeners:document:end")),t.del("event:pinch:target")},f=function(t){var e=t.fetch("event:pinch:cache");e&&e.clear(),t.del("event:pinch:cache")},p=function(e){"use strict";function n(t,n,i,r){var o;return(o=e.call(this,t)||this).type="pinch",o._target=n.node,o.state=i,o.x=r.x,o.y=r.y,o.scale=r.scale,o.space=r.space,o.zoom=r.zoom,o.state=i,o.centerPoint=r.centerPoint,o.points=r.points,o.pushToEvents(t),o}return t.inheritsLoose(n,e),n}(e.Events.Custom),g={x:0,y:0,space:0,scale:1,zoom:0,startSpace:0,startScale:1,started:!1,dragged:!1,points:[],centerPoint:{x:0,y:0}},m=function(t,e){var i=e.space;t.length>1?(e.space=function(t,e){var n,i=Array.prototype.slice.call(t),o=Math.abs(i[1].pageX-i[0].pageX),s=Math.abs(i[1].pageY-i[0].pageY),a=Math.min(i[1].pageX,i[0].pageX)+o/2,c=Math.min(i[1].pageY,i[0].pageY)+s/2;return e.points=[i[0],i[1]],n=Math.pow(r({x:i[0].pageX,y:i[0].pageY},{x:i[1].pageX,y:i[1].pageY}),2),e.centerPoint={x:a,y:c},e.x=e.centerPoint.x,e.y=e.centerPoint.y,n}(t,e),e.startSpace||(e.startSpace=e.space),i>e.space?e.zoom=-1:i<e.space?e.zoom=1:e.zoom=0,e.scale=e.space/n):e.points=[]},v=function(t){var n,i=this.fetch("event:pinch:variables"),r=this.fetch("event:pinch:cache"),s=this.fetch("event:pinch:activepoints");if(i||(i=Object.assign({},e.detach(g))),i.started){if(t.pointerId&&!a(t,r,!0))return;t.stop(),m(l(o(t,r),s),i),n=new p(t,this,"pinchmove",i),this.callEvent("pinch",n)}},y=function(t){var r,s,c=this.fetch("event:pinch:cache"),u=this.fetch("event:pinch:activepoints");if("mouse"!==t.pointerType){u||(u=[],this.store("event:pinch:activepoints",u)),c||(c=new Map,this.store("event:pinch:cache",c)),this.fetch("event:pinch:target")||(this.store("event:pinch:target",i(t.target)),i(t.target).addEvent(["touchend"],this.fetch("event:pinch:listeners:document:end"),1)),a(t,c);var d=o(t,c);h(d,u),2===d.length&&(r=this.fetch("event:pinch:pinchstart"),(s=this.fetch("event:pinch:variables"))||(s=Object.assign({},e.detach(g))),m(l(d,u),s),r||(r=new p(t,this,"pinchstart",s),this.store("event:pinch:pinchstart",r),this.store("event:pinch:variables",s),n=s.space,this.callEvent("pinch",r),s.started=!0))}},S=function(t){var e=this.fetch("event:pinch:cache");if("mouse"!==t.pointerType&&(!t.pointerId||e&&e.has(t.pointerId))){var n=this.fetch("event:pinch:pinchstart"),i=this.fetch("event:pinch:variables"),r=this.fetch("event:pinch:activepoints"),s=o(t,e);!function(t,e){t.pointerId&&"touch"===t.pointerType&&e&&e.has(t.pointerId)&&e.delete(t.pointerId)}(t,e);var a=u(s,r);if(n&&i&&i.started&&a&&r){a&&h(s,r);var c="pinchend";s.length>1?c="pinchresize":(this.del("event:pinch:pinchstart").del("event:pinch:variables").del("event:pinch:activepoints"),f(this),d(this)),m(l(s,r),i),n=new p(t,this,c,i),this.callEvent("pinch",n)}}},w={add:function(t){var o;n||((o=e.W.size).width=Math.min(o.width,o.height),o.height=o.width,n=Math.pow(r({x:0,y:0},{x:o.width,y:o.height}),2));var a=v.bind(this),c=S.bind(this);this.addEvent(["touchstart","pointerdown"],y,1).addEvent(["pointerup"],S,1).addEvent(["touchmove","pointermove"],v,1),this.store("event:pinch:listeners:document:move",a),this.store("event:pinch:listeners:document:end",c),i(s).addEvent("pointermove",a,1).addEvent("pointerup",c,1)},remove:function(){this.removeEvent(["touchstart","pointerdown"],y).removeEvent(["pointerup"],S).removeEvent(["touchmove","pointermove"],v);var t=function(){};i(s).removeEvent("pointermove",this.fetch("event:pinch:listeners:document:move")||t,1).removeEvent("pointerup",this.fetch("event:pinch:listeners:document:end")||t,1),this.del("event:pinch:listeners:document:move").del("event:pinch:listeners:document:end"),d(this),f(this),this.del("event:pinch:variables").del("event:pinch:activepoints").del("event:pinch:pinchstart")}};e.Events.handlers.pinch=w}(c),function(e){var n="wheel";"onwheel"in s||e.browser.ieMode>8||(n="mousewheel");var i,r,a=function(e){"use strict";function n(t,n,i,r,o,s,a){var c;c=e.call(this,t)||this;var h=t.pageXY;return c.x=h.x,c.y=h.y,c.type="mousescroll",c._target=n.node,c.delta=i||0,c.deltaX=r||0,c.deltaY=o||0,c.deltaZ=s||0,c.deltaFactor=a||0,c.deltaMode=t.deltaMode||0,c.isMouse=!1,c.pushToEvents(t),c}return t.inheritsLoose(n,e),n}(e.Events.Custom),c=function(){i=null},h=function(t){var n=0,s=0,h=t.originEvent;if(h.detail&&(s=-1*t.detail),h.wheelDelta!==o&&(s=h.wheelDelta),h.wheelDeltaY!==o&&(s=h.wheelDeltaY),h.wheelDeltaX!==o&&(n=-1*h.wheelDeltaX),h.deltaY&&(s=-1*h.deltaY),h.deltaX&&(n=h.deltaX),0!==s||0!==n){var u=0===s?n:s,l=Math.max(Math.abs(s),Math.abs(n));(!i||l<i)&&(i=l);var d=u>0?"floor":"ceil";u=Math[d](u/i),n=Math[d](n/i),s=Math[d](s/i),r&&clearTimeout(r),r=setTimeout(c,200);var f,p,g=new a(t,this,u,n,s,0,i);g.isMouse=(f=i,p=h.deltaMode||0,f>50||1===p&&!("win"===e.browser.platform&&f<1)||f%12==0||f%4.000244140625==0),this.callEvent("mousescroll",g)}},u={add:function(){this.addEvent(n,h,1)},remove:function(){this.removeEvent(n,h,1)}};e.Events.handlers.mousescroll=u}(c),h.W=h.$(r),h.D=h.$(s),h.U=o,h.DPPX=window.devicePixelRatio>=2?2:1,c}(),function(t){var e=t.$,n={linear:"linear",sineIn:"easeInSine",sineOut:"easeOutSine",expoIn:"easeInExpo",expoOut:"easeOutExpo",quadIn:"easeInQuad",quadOut:"easeOutQuad",cubicIn:"easeInCubic",cubicOut:"easeOutCubic",backIn:"easeInBack",backOut:"easeOutBack",elasticIn:function(t,e){return e=e||[],Math.pow(2,10*--t)*Math.cos(20*t*Math.PI*(e[0]||1)/3)},elasticOut:function(t,e){return 1-n.elasticIn(1-t,e)},bounceIn:function(t){for(var e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11)return n*n-Math.pow((11-6*e-11*t)/4,2)},bounceOut:function(t){return 1-n.bounceIn(1-t)},none:function(t){return 0}},i={INIT:0,STARTED:1,PLAYING:2,ENDED:3},r=function(){"use strict";function r(n,r){var o=this;this.styles=null,this.cubicBezier=null,this.easeFn=null,this.state=i.INIT,this.pStyles=[],this.alternate=!1,this.continuous=!1,this.startTime=null,this.finishTime=null,this.options={fps:60,duration:600,transition:"ease",cycles:1,direction:"normal",onStart:function(){},onComplete:function(){},onBeforeRender:function(){},onAfterRender:function(){},forceAnimation:!1,roundCss:!1},this.els=[],Array.isArray(n)||(n=[n]),n.forEach((function(t){t&&o.els.push(e(t))})),this.options=Object.assign(this.options,r),this.timer=!1,this.setTransition(this.options.transition),"string"===t.typeOf(this.options.cycles)&&(this.options.cycles="infinite"===this.options.cycles?1/0:parseInt(this.options.cycles,10)||1)}r.getTransition=function(){return n};var o=r.prototype;return o.setTransition=function(e){this.options.transition=e,this.easeFn=r.cubicBezierAtTime;var i=n[this.options.transition]||this.options.transition;"function"===t.typeOf(i)?this.easeFn=i:this.cubicBezier=this.parseCubicBezier(i)||this.parseCubicBezier("ease")},o.start=function(e){var n=this,r=/\%$/;if(this.state===i.PLAYING)return this;this.state=i.STARTED,this.cycle=0,this.alternate=["alternate","alternate-reverse"].includes(this.options.direction),this.continuous=["continuous","continuous-reverse"].includes(this.options.direction),e||(e={}),Array.isArray(e)||(e=[e]),this.styles=e;var o=this.styles.length;this.pStyles=new Array(o);for(var s=0;s<o;s++)for(var a in this.pStyles[s]={},this.styles[s])r.test(this.styles[s][a][0])&&(this.pStyles[a]=!0),["reverse","alternate-reverse","continuous-reverse"].includes(this.options.direction)&&this.styles[s][a].reverse();return this.startTime=+new Date,this.finishTime=this.startTime+this.options.duration,this.options.onStart(),0===this.options.duration?(this.render(1),this.options.onComplete(this.els.length<2?this.els[0]:this.els)):(this.state=i.PLAYING,this.options.forceAnimation?this.timer=setInterval((function(){n.loop()}),Math.round(1e3/this.options.fps)):this.timer=t.W.node.requestAnimationFrame.call(t.W.node,this.loop.bind(this))),this},o.stopAnimation=function(){this.timer&&(this.options.forceAnimation?clearInterval(this.timer):t.W.node.cancelAnimationFrame.call(t.W.node,this.timer),this.timer=!1)},o.stop=function(e){return[i.INIT,i.ENDED].includes(this.state)||(t.defined(e)||(e=!1),this.stopAnimation(),this.state=i.ENDED,e&&(this.render(1),this.options.onComplete(this.els.length<2?this.els[0]:this.els))),this},o.loop=function(){var e=+new Date,n=(e-this.startTime)/this.options.duration,i=Math.floor(n);if(e>=this.finishTime&&i>=this.options.cycles)return this.stopAnimation(),this.render(1),this.options.onComplete(this.els.length<2?this.els[0]:this.els),this;if(this.alternate&&this.cycle<i)for(var r=0;r<this.styles.length;r++)for(var o in this.styles[r])this.styles[r][o].reverse();this.cycle=i,this.options.forceAnimation||(this.timer=t.W.node.requestAnimationFrame.call(t.W.node,this.loop.bind(this))),this.render((this.continuous?i:0)+this.easeFn(n%1,this.options.duration,this.cubicBezier))},o.render=function(t){for(var e=[],n=this.els.length,i=0;i<n;i++)e.push(this.renderOverLoad(t,this.els[i],this.styles[i],this.pStyles[i]));var r=this.els,o=e;n<2&&(r=this.els[0],o=e[0]),this.options.onBeforeRender(o,r),this.set(e),this.options.onAfterRender(o,r)},o.renderOverLoad=function(t,e,n,i){var r=this,o={};return Object.entries(n).forEach((function(e){var n=e[0],s=e[1];"opacity"===n?o[n]=Math.round(100*r.calc(s[0],s[1],t))/100:(o[n]=r.calc(s[0],s[1],t),i[n]&&(o[n]+="%"))})),o},o.calc=function(t,e,n){return t=parseFloat(t),((e=parseFloat(e))-t)*n+t},o.set=function(t){for(var e=0,n=this.els.length;e<n;e++)this.els[e].setCss(t[e]);return this},o.parseCubicBezier=function(n){var i=null;if("string"!==t.typeOf(n))return null;switch(n){case"linear":i=[0,0,1,1];break;case"ease":i=[.25,.1,.25,1];break;case"ease-in":i=[.42,0,1,1];break;case"ease-out":i=[0,0,.58,1];break;case"ease-in-out":i=[.42,0,.58,1];break;default:if((n=n.replace(/\s/g,"")).match(/^cubic-bezier\((?:-?[0-9\.]{0,}[0-9]{1,},){3}(?:-?[0-9\.]{0,}[0-9]{1,})\)$/))for(var r=(i=n.replace(/^cubic-bezier\s*\(|\)$/g,"").split(",")).length-1;r>=0;r--)i[r]=parseFloat(i[r])}return e(i)},r.cubicBezierAtTime=function(t,e,n){var i,r,o=0,s=0,a=0,c=0,h=0,u=0,l=function(t){return((o*t+s)*t+a)*t},d=function(t){return(3*o*t+2*s)*t+a};return a=3*n[0],s=3*(n[2]-n[0])-a,o=1-a-s,u=3*n[1],h=3*(n[3]-n[1])-u,c=1-u-h,i=t,r=function(t){return 1/(200*t)}(e),function(t){return((c*t+h)*t+u)*t}(function(t,e){var n,i,r,o,s,a,c=function(t){return t>=0?t:0-t};for(r=t,a=0;a<8;a++){if(c(o=l(r)-t)<e)return r;if(c(s=d(r))<1e-6)break;r-=o/s}if((r=t)<(n=0))return n;if(r>(i=1))return i;for(;n<i;){if(c((o=l(r))-t)<e)return r;t>o?n=r:i=r,r=.5*(i-n)+n}return r}(i,r))},r}();t.FX=r}(e),function(t){var e=null,n={boolean:1,array:2,number:3,function:4,url:5,string:100},r={boolean:function(n,i,r){if("boolean"!==t.typeOf(i)){if(r||"string"!==t.typeOf(i))return!1;if(!/^(true|false)$/.test(i))return!1;i=!i.replace(/true/i,"").trim()}return!(n.hasOwnProperty("enum")&&!n.enum.includes(i))&&(e=i,!0)},url:function(e,n,i){var r=!1;return"string"===t.typeOf(n)&&function(t){return/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/i.test(t)}(n)&&(e.hasOwnProperty("enum")?e.enum.includes(n)&&(r=!0):r=!0),r},string:function(n,i,r){return"string"===t.typeOf(i)&&(!(n.hasOwnProperty("enum")&&!n.enum.includes(i))&&(e=""+i,!0))},number:function(n,i,r){var o="string"===t.typeOf(i)&&/%$/.test(i);return(!r||!1!==typeof i)&&(i=parseFloat(i),!isNaN(i)&&(isNaN(n.minimum)&&(n.minimum=Number.NEGATIVE_INFINITY),isNaN(n.maximum)&&(n.maximum=Number.POSITIVE_INFINITY),!(n.hasOwnProperty("enum")&&!n.enum.includes(i))&&(!(n.minimum>i||i>n.maximum)&&(e=o?i+"%":i,!0))))},array:function(n,i,r){if("string"===t.typeOf(i))try{i=i.replace(/'/g,'"'),i=t.W.node.JSON.parse(i)}catch(t){return!1}return"array"===t.typeOf(i)&&(e=i,!0)},function:function(n,i,r){return"function"===t.typeOf(i)&&(e=i,!0)}},o=function(e,n,i){var o=e.hasOwnProperty("oneOf")?e.oneOf:[e];if("array"!==t.typeOf(o))return!1;for(var s=0,a=o.length-1;s<=a;s++)if(r[o[s].type](o[s],n,i))return!0;return!1},s=function(e){var n={},i=function(e,r){Object.entries(e).forEach((function(e){var o=e[0],s=e[1],a=r.slice(0);"object"!==t.typeOf(s)||function(t){return Object.keys(t).some((function(t){return"defaults"===t}))}(s)?(a.push(o),n[a.join(".")]=s):(a.push(o),i(s,a))}))};return i(e,[]),n},a=function(t){var e={};return Object.entries(t).forEach((function(t){var n,i,r,o;n=t[0].split("."),i=t[1],r=e,o=n.length,""===n[o-1].trim()&&n.splice(o-1,1),n.forEach((function(t,e){e===o-1?r[t]=i:(r[t]||(r[t]={}),r=r[t])}))})),e},c=function(e){return t.camelize((e+"").trim())},h=function(){"use strict";function h(t){this.schema={},this.options={},this.parseSchema(t)}var u=h.prototype;return u.parseSchema=function(e,a){var h=this;e=s(e),Object.entries(e).forEach((function(s){var u=s[0],l=s[1],d=c(u);if(!h.schema.hasOwnProperty(d)||a){if(h.schema[d]=function(t){if(t.hasOwnProperty("oneOf"))for(var e=t.oneOf.length,i=0;i<e;i++)for(var r=i+1;r<e;r++)if(n[t.oneOf[i].type]>n[t.oneOf[r].type]){var o=t.oneOf[i];t.oneOf[i]=t.oneOf[r],t.oneOf[r]=o}return t}(l),!function(e){var i=e.hasOwnProperty("oneOf")?e.oneOf:[e];if("array"!==t.typeOf(i))return!1;for(var s=i.length-1;s>=0;s--){if(!i[s].type||!n.hasOwnProperty(i[s].type))return!1;if(t.defined(i[s].enum)){if("array"!==t.typeOf(i[s].enum))return!1;for(var a=i[s].enum.length-1;a>=0;a--)if(!r[i[s].type]({type:i[s].type},i[s].enum[a],!0))return!1}}return!(e.hasOwnProperty("defaults")&&!o(e,e.defaults,!0))}(h.schema[d]))throw"Incorrect definition of the '"+i+"' parameter in "+e;t.defined(h.options[d])&&h.checkValue(d,h.options[d])||(h.options[d]=t.U)}}))},u.set=function(n,i){n=c(n),"string"===t.typeOf(i)&&(i=i.trim()),this.schema.hasOwnProperty(n)&&(e=i,o(this.schema[n],i)&&(this.options[n]=e),e=null)},u.get=function(e){if(e=c(e),this.schema.hasOwnProperty(e))return t.defined(this.options[e])?this.options[e]:this.schema[e].defaults},u.fromJSON=function(t){for(var e in t=s(t))this.set(e,t[e])},u.getJSON=function(){var e=this,n=Object.assign({},this.options);return Object.keys(n).forEach((function(i){n[i]===t.U&&e.schema[i].defaults!==t.U&&(n[i]=e.schema[i].defaults)})),a(n)},u.fromString=function(t,e){var n=this,i={};e||(e={});return t.split(";").forEach((function(t){var r;r=(r=t).trim(),Object.entries(e).find((function(t){var e=t[0],n=t[1];return!(!n.test||!n.test(r)||(i[e]||(i[e]=""),i[e]+=r+";",0))}))||(t=t.split(":"),n.set(t.shift().trim(),t.join(":")))})),i},u.checkValue=function(n,i){var r=!1;return n=c(n),"string"===t.typeOf(i)&&(i=i.trim()),this.schema.hasOwnProperty(n)&&(e=i,o(this.schema[n],i)&&(r=!0),e=null),r},u.exists=function(t){return t=c(t),this.schema.hasOwnProperty(t)},u.isset=function(e){return e=c(e),this.exists(e)&&t.defined(this.options[e])},u.remove=function(t){t=c(t),this.exists(t)&&(delete this.options[t],delete this.schema[t])},h}();t.Options=h}(e),e})),Sirv.define("globalVariables",["bHelpers","magicJS"],(function(t,e){e.$;for(var n,i="smv",r="https:",o="",s="",a=function(t){return n||(n=document.createElement("a")),n.setAttribute("href",t),("!!"+n.href).replace("!!","")},c=document.getElementsByTagName("script"),h=0,u=c.length;h<u;h++){var l=c[h].getAttribute("src")||"";if(null!==c[h].getAttribute("data-sirvjs-test"))o=a(l).replace(/([^#?]+)\/.*$/,"$1/");else if(/sirv\.(com|localhost(:\d+)?)\/(([^#?]+)\/)?sirv(_.+)?\.js([?#].*)?$/i.test(l)){s=a(l).replace(/(^https?:\/\/[^/]*).*/,"$1/"),o=a(l).replace(/([^#?]+)\/.*$/,"$1/"),/sirv\.localhost(:\d+)?\/(([^#?]+)\/)?sirv(_.+)?\.js([?#].*)?$/i.test(l)&&(r="http:");break}}return{SIRV_PREFIX:i,CSS_RULES_ID:"sirv-core-css-reset",SIRV_BASE_URL:s,CSS_CURSOR_ZOOM_IN:"smv-cursor-zoom-in",CSS_CURSOR_FULSCREEN_ALWAYS:"smv-cursor-fullscreen-always",REG_URL_QUERY_STRING:/([^\?]+)\??([^\?]+)?/,FULLSCREEN_VIEWERS_IDs_ARRAY:[],CUSTOM_DEPENDENCIES:null,MIN_RATIO:1.2,SIRV_HTTP_PROTOCOL:r,SIRV_ASSETS_URL:o,SLIDE_SHOWN_BY:{NONE:0,AUTOPLAY:1,USER:2,INIT:3,ENABLE:4},VIDEO:{NONE:0,PLAY:1,PAUSE:2,PLAYING:3},FULLSCREEN:{CLOSED:0,OPENING:1,OPENED:2,CLOSING:3},APPEARANCE:{HIDDEN:0,SHOWING:1,SHOWN:2,HIDING:3},SLIDE:{TYPES:{NONE:0,HTML:1,IMAGE:2,PANZOOM:3,ZOOM:4,SPIN:5,VIDEO:6},NAMES:["none","html","image","panzoom","zoom","spin","video"]}}})),Sirv.define("globalFunctions",["bHelpers","magicJS","globalVariables","helper"],(function(t,e,n,i){var r=e,o=r.$,s={},a=function(t){var e=t.replace(/^(https?:)?/,"https:");return/^(http(s)?:)?\/\/[^/]+?sirv\.localhost(:\d+)?\/.*$/i.test(t)&&(e=t.replace(/^(https?:)?/,"http:")),e},c=function(t){return t.replace(/^((?:https?:)?\/\/)([^/].*)/,(function(t,e,n){return e+n.split("/").map((function(t,e){return 0===e?t:function(t){try{t=decodeURIComponent(t)}catch(t){}return encodeURIComponent(t)}(t)})).join("/")}))},h=new(function(){"use strict";function t(){this.CSSMap={},this.sirvNodesMap=new WeakMap,this.rootNodesMap=new Map,this.rootNodes=[],this.sirvCSSSrc="viewer.css",this.mainCSSID="sirv-stylesheet-sirv"}t.getShadowDOM=function(e){var n=!1,i=(e=o(e).node).parentNode;return i&&window.ShadowRoot&&(n=i instanceof window.ShadowRoot?i:t.getShadowDOM(i)),n};var e=t.prototype;return e.rootContains=function(t){return this.rootNodes.some((function(e){return e===r.D.node&&(e=r.D.node.body),!!e&&e.contains(t)}))},e.addModuleCSSByName=function(t,e,n,i){this.CSSMap[t]||(this.CSSMap[t]={functionOfCssString:e,id:n,position:i})},e.getRootNode=function(e){e=o(e).node;var n=t.getShadowDOM(e),i=n||r.D.node;return this.rootNodesMap.has(i)||(this.rootNodesMap.set(i,{isResetCSSAdded:!1,isVideoCSSAdded:!1,isSirvAdAdded:!1,styles:{},modulesCss:{},isShadowDOM:!!n}),this.rootNodes.push(i)),i},e.attachNode=function(t){if(t=o(t).node,!this.sirvNodesMap.has(t)){var e=this.getRootNode(t);this.sirvNodesMap.set(t,e)}},e.detachNode=function(t){return t=o(t).node,this.sirvNodesMap.delete(t)},e.addCSSStringToHtml=function(){this.addCSSString(r.D.node.head||r.D.node.body)},e.addCSSString=function(t){var e=this;t||(t=r.D.node.head||r.D.node.body),t=o(t).node;var n=this.sirvNodesMap.get(t),s=this.rootNodesMap.get(n),a=null;s.isShadowDOM&&(a=n),Object.entries(this.CSSMap).forEach((function(t){var n=t[0],r=t[1];s.modulesCss[n]||(s.modulesCss[n]=1,i.addCss(r.functionOfCssString(),r.id,r.position,a,"#"+e.mainCSSID))}))},e.addMainStyleToHtml=function(){this.resetGlobalCSS(r.D.node.head||r.D.node.body),this.addStyle(r.D.node.head||r.D.node.body,n.SIRV_ASSETS_URL+this.sirvCSSSrc,this.mainCSSID,"#"+n.CSS_RULES_ID)},e.addMainStyle=function(t){return this.addMainStyleToHtml(),this.resetGlobalCSS(t),this.addStyle(t,n.SIRV_ASSETS_URL+this.sirvCSSSrc,this.mainCSSID,"#"+n.CSS_RULES_ID)},e.addStyle=function(t,e,n,r){t=o(t).node;var s=this.sirvNodesMap.get(t),a=this.rootNodesMap.get(s);return a.styles[n]||(a.styles[n]=new Promise((function(t,o){var c=null;a.isShadowDOM&&(c=s),i.loadStylesheet(e,n,c,r).then(t).catch(o)}))),a.styles[n]},e.resetGlobalCSS=function(t){t||(t=r.D.node.head||r.D.node.body),t=o(t).node;var e=this.sirvNodesMap.get(t),i=this.rootNodesMap.get(e);if(!i.isResetCSSAdded){i.isResetCSSAdded=!0;var s=null;i.isShadowDOM&&(s=e),r.addCSS(".smv",{display:"flex !important"},n.CSS_RULES_ID,s),r.addCSS(".smv.smv-selectors-top",{"flex-direction":"column-reverse"},n.CSS_RULES_ID,s),r.addCSS(".smv.smv-selectors-left",{"flex-direction":"row-reverse"},n.CSS_RULES_ID,s),r.addCSS(".smv.smv-selectors-right",{"flex-direction":"row"},n.CSS_RULES_ID,s),r.addCSS(".smv.smv-selectors-bottom",{"flex-direction":"column"},n.CSS_RULES_ID,s),r.addCSS(".smv-slides-box",{"flex-grow":1,"flex-shrink":1},n.CSS_RULES_ID,s),r.addCSS("figure > .Sirv",{"vertical-align":"top"},n.CSS_RULES_ID,s),r.addCSS(".Sirv > iframe, .Sirv > video",{display:"none"},n.CSS_RULES_ID,s),r.addCSS(":not(.smv) smv-thumbnail",{display:"none"},n.CSS_RULES_ID,s),r.addCSS(".Sirv, .Sirv .smv-component",{"-webkit-box-sizing":"border-box !important","-moz-box-sizing":"border-box !important","box-sizing":"border-box !important"},n.CSS_RULES_ID,s),r.addCSS("div.Sirv, div.Sirv div.smv-component, figure.Sirv, div.smv-component",{width:"100%",height:"100%",margin:0,"text-align":"center"},n.CSS_RULES_ID,s),r.addCSS("div.Sirv",{"max-height":"100%","block-size":"inherit"},n.CSS_RULES_ID,s),r.addCSS(".Sirv img",{width:"100%",height:"100%"},n.CSS_RULES_ID,s),r.addCSS("img.Sirv, .Sirv img",{"max-width":"100%"},n.CSS_RULES_ID,s),r.addCSS("img.Sirv:not([width]):not([height])",{width:"100%"},n.CSS_RULES_ID,s),r.addCSS("img.Sirv",{display:"inline-block","font-size":0,"line-height":0},n.CSS_RULES_ID,s),r.addCSS(".Sirv.smv-bg-image.smv-bg-contain, .Sirv.smv-bg-image.smv-bg-cover",{"background-repeat":"no-repeat","background-position":"center"},n.CSS_RULES_ID,s),r.addCSS(".Sirv.smv-bg-image.smv-bg-contain",{"background-size":"contain"},n.CSS_RULES_ID,s),r.addCSS(".Sirv.smv-bg-image.smv-bg-cover",{"background-size":"cover"},n.CSS_RULES_ID,s),r.addCSS("img.Sirv:not([src]), img.Sirv.sirv-image-loading:not([src])",{opacity:"0"},n.CSS_RULES_ID,s),r.addCSS("img.Sirv.sirv-image-loaded",{opacity:"1",transition:"opacity 0.5s linear"},n.CSS_RULES_ID,s)}},e.showSirvAd=function(t,e,i,s){if(!/^my.sirv.(com|localhost)$/i.test(r.D.node.location.hostname)){t||(t=r.D.node.head||r.D.node.body),t=o(t).node;var a=this.sirvNodesMap.get(t),c=null;this.rootNodesMap.get(a).isShadowDOM&&(c=a);var h="sirvCR"+Math.floor(Math.random()*+new Date);r.addCSS("#"+h,{display:"inline-block !important;",visibility:"visible !important;","z-index":"2147483647 !important;",width:"auto !important;",height:"auto !important;","max-width":"none !important;","max-height":"none !important;",transform:"none !important;",left:"auto !important;",top:"auto !important;",bottom:"8 !important;",right:"8 !important;",margin:"auto !important",padding:"0 !important",opacity:"1 !important;"},n.CSS_RULES_ID,c),r.addCSS("#crSirv"+h+" > img",{display:"inline-block !important;",visibility:"visible !important;",position:"static !important;",width:"90px !important;",height:"18px !important;","max-width":"none !important;","max-height":"none !important;",transform:"none !important;",margin:"0 !important",padding:"0 !important"},n.CSS_RULES_ID,c);var u=r.$new("a",{id:h,href:i,target:"_blank"});u.attr("style","position: absolute !important; opacity: 1 !important"),u.setCss({display:"inline-block",overflow:"hidden",visibility:"visible","font-size":0,"font-weight":"normal","font-family":"sans-serif",bottom:8,right:8,margin:"auto",width:"auto",height:"auto",transform:"none","z-index":2147483647}).appendTo(e).addEvent(["tap","btnclick"],(function(t){t.stopDistribution(),r.W.node.open(u.attr("href"))})).append(r.$new("img",{width:90,height:18,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAAkCAYAAAAgqxBxAAAMJ0lEQVR4nO1ce5AUxRnv4yH4wCfREogIqFHOI94uVoSNMnFvZ6e/30+TGB/BRFPRUomWRiMKd2tUTKEWKlGSCBKCxtJSSKkxKLhnKqaiJvgOYjSAAhdQ8EDkIYgm8fLH9hzNZGZn9+68o8r5VU3V7fbXX389+5vu79FzSiVIkCBBggQJegiu6w4DMIlkkeRKklsBbCG5EsAzJKeJyCnldDiOs5/neaO6y+YECUJBciaAz0i2xV0AFmut+wV1iMhoAK1GZqnjOAN7Yi4JvsDQWu9PckkIaTcBWAbgHZI7Am1vKqV6BXUBWBzQ87MemFKCLzJIvhIg671a63Gu6+7ryziOMxBAA4DpADYDuDRC14qArl9130wSfOEhIpcFCPjduD75fP5gx3H2C2sDcJal62MAx3W91QkShKMGwDqL0DO7QimAsQAubGhoOKIr9CVIUBHy+XxtYHUe3tM2JUjQYWitT7PI/EFP25MgQadA8kxrhd7mOE6fnrYpk8kMEJHRnud9padtSRADkm0NDQ0HRLU3NDQcAWBzd9njed7XbZdDa31SZ3WKSB2AR80133GcA+1213W/bLXf5H+fzWYPATAHwAdmx1jjt+Xz+YMBPALgIZIPxxV2gkhNLp6TamqeV18oPlxfKM7p7BwTGOxphM5kMgNI/tdyO57urE7bjTHXYLsdwHFW2/umz5BAcNoGYIvfx3GcPradJP9cjU2pQnFdqtDclio0t9UXis93do4JDPY0QiulFIB7AkS6Kb5XNLTWp1r6Pslms4fZ7SQHW+RcaL5bGXgI/gNgmVKqxu8nIj+xZTKZzIBK7Plq45PH+GROFZrbUpOL6c7ML4GFPZHQjuMcCODfAUI9lsvlBnVEXxyhXdc9lOQnfgGHZKP1MP0GwNhcLjcon88frqxKZD6fPzzgHp1TiT31heYpu1bn5tWVTqKfiAw1N6EmTh7AQQCGl/txuwqmwjU87NxBEFrrfp7nHWl+hOA8anK53CARGVpB8FRDcrCIDLXHrZbQ/n0123bsfe0oAJwccl5jB8lpWush1eiKI3Q2mz3EKqOvB7DTkPkHFdj5nKV7QSX2pJqKS9tX56ZiIcrokQCeBnAQybnGsKUAVgFYJyITwvp5npcl+aI5vLKE5EZzyCVjGV0AMCOsP8lbSD4c0fZrABf6n0UkZ8ZoIfmqGWt2Op3ex+4H4HXHcfqIyDUkN5JcYUq7x1kyFwNYTfKfJJcAaAXQpEJIJiJXkHwXwCqSb5B8n+TMdDq9D4CdlRDacZz9ANxN8n1zX1cDeE9ErvLHBPAQgO9H6TIrWktwvlEwxZDWEGJ/AuC+Sit+cYQ2nNkecHNmVaKb5EVWn521tbV7lZOvb1w40nY3aictCC/0iEgdyQ0A/iIil6TT6b5W2wkkV4jINYE+3zE/rqhdROhtSqUbtNauUu2Rd0vIsDWGVOtDyq41ANb5qR6t9bcArNFaj/MFMpnMAADzADxlja9ItgC4EsDvABwUHBTATwG8TPJo/zsTxLwAYGpAdgrJN0Skzv/OcZz+ACaSXEByaxyhzcOwSEQm2DuByR68TvIW8/lsAM9E6SJ5LYD7otrDYDINs0JI7V932b91GCohNICPLJntjuP0r9S+atyOVFOx0O5uNBWfixQ0hG4jeWNYu+d5o0hu9yeTTqf3IblRa31qmDzJMwGsMU9cbwCbXdc91pbRWmdIPgtgnoicbbcBON5/CMzq1gpgbHAcQ67V/sNjxm4B8HrY0661HklyY/BHMfdgKMkdxtdTnucdSXK71npE2ByNvxjrcvjEidAxnOQO13WH1dbW7kVyg+u6wyJk3wRwctRY5SAiJwCYjdI56OAJvGX5fL42qm+1hAYwrxrbAPze6ju/nGyqqfiWRegLyk24zvw4kbV6AM8DuMDIjwfwUoyhy0WE5u/5InJFYMw7jVtwUdDtMCvsHCN3HoDIpxHA7SR/6X82hL48Yp53AvhFGV3NvptjVuHHomSNu1URoT3PO7HMmE8AmGj+niEiNwRltNYnAViuOul3mxXxRpJbg25I1IPbAUJfXY1NZqdvLwZFxUappkWjdvnOzZ8edfnC6BjKbH8flRsYwAwA083f0wH8PEZ+Ns3ZWQAXAHjCau4FYC3Jo3O53CAAmwPB1gKYU2IA7gFwa9Q4JC8ybof/uSWqoADghXLbGoC7ReRm8/dDACZFyWaz2cMqJXS5ABbAFN+V0FrXk1ypAsQFMEtEJkfpqBau6x4K4NHASr1GKdU7KNsBQp9RjS2O4/Qnuc3vLyLfDJOzsxuppubyu4Ah9JoYmetI3q+UUiQfjLvBAG4CMFsppXK53CD76UMpCn/Fkn1Oa32aUkql0+m+JpAaaNoeB/ABgHfCLuPHP+vrItli+7wBm9YanzZK14cA7jZ6/ogykbopDlSS5fi43H0yxz3bI3yWAl7H/zxmzJi9WQpuB4cq6AQAzAmQ+sqgTLWE1lrrDtjxgEXo34bJpArFt31CnzB5kVNWoSF0a8yg15Oc6xuAUlagnPxUWIfBAfwdwDfM3zNINlrjX+Xr1lpnALxs9XtcRK4xNy70spPyMYReo7V2y+nyswgA/kTy/Kj5pdPpvhUSeme5+0Tyx7ZrA+ByAPda92Z8YHfrUgBYbhH67WB7tYT23cxqICJeIKjcLY1a11g81vKdy/LUV1gH4NNy+VgAs/3tWERu9lffKARXcZZSdD9TpZzuu7SyDCYgW6+U6iUik20XA6Uo/ZbYSewapxyhXwBwViV6AMwjeW1Uu18YqMTlKJdqA3Cbvyso1e7nbrQerCeq3carQcgLAbsdOe0OQiulFMkPfR2e52XttlSheJuVe55WyaTqSLbl8/lUmQFXWEFeA4BVKuQdNKXat+P1dj5aRE4h+azWuh7AayH6X/Q870SSf7AnJCLjSb4aO4ldeiIJTXKaH2zGwQSskUEhAFThQ4+LkgHwkoicF/huvoic6zjOQJLvxuVnOwOTlrVTZ67d3l2ENjFXqNtR3/TUivYVunHhyEomVYfS28FzI9rPBbDayln2YqkgEfoeGoBJxm1oD27MFr3e+OKNwT4s5VmvN25BexA1ZsyYvY3v+73YiajyhNZajzC+fH2cHq31EJJbtdahNxDAkwA+q4TQiEhHkRSSG4N5eK21NoHxpSTviLO1MzDpSTvjIQFbuoXQIvI1a5wdjqPavYX6QnGOIXRlC5sh9FIAj5C8S0SOUUrVmGN+l7JUKBkX7GMIeoPrusPS6XTffD5/FIBbAaxFSCUKpWLHWtvd8GH6rgWwKNhm/OpWAFO01iMcx+njOE5/z/NGAZgoIqN92XKENnb/EECriEwwgVZNJpMZYFJjU13XPdSSnQBgDYAzDOl6marqAyYF+I8KfOjnSc4FMMcUino1NDQcgFLmp9UPhgPobYLUJQCOj9LfFRCR0Tahg7t0dxHa6HrP13O6m835348qPHNSqtDclmpsjnQBg5OqA7DKlIyvMpH2BgDvoVT4iFrxhgCYhVIpd5MJMO7yixNBkPw2ylS7ANwXtRKb1W4mgOVmrLUk/yoi12mtv2SN8WBUccIaJ43SWdwWAJtYKqcXReSyYIoNQN6sxuvMQ7UYpkRtHoB9w0cppcdMhbWGpfTiYuu+PgIg8qQYgNsBLC43j64AgIJF2K3BymE3E/rWMLfjsInFfeubiu+OaipW9nCb1TasPJ2ghwDgSRG55PMcw8Q6G6yA8N6gTHcS2vbnAWyy21JNi0aps+b/X548SlFC6D0IxlXZorXev5p+psQ93XabomCyKX8LuBtHBeW6k9BG37JdAaoberQiFgmh9yyQvCMuLRoGa8veZty38wEcr7XeX2vdz8REYwFMZalYY6frQkvW3U1olkrzJZt4etX3QCmVEHpPgO+7m8LP5rDAOQ4mHgg7VbeVpYrq9rB2BE4ZBuw61ZL7NO74aGcJ7bruMGu8dR1SkhC654HSwagtJP8F4PSO6NBanwbg6QhSh12vRGRZdtMZ6LNbCd7kytssQo/viO02ALy5y+1gWfui0Ls73jZJEIvKgp4YaK1HAPgRyftReivkDZJvAXgNwFMicnOlb1obf34igKsBXBmsejqO019ErjAyE9EF/9wGwMVmV9nGzzkPnyBBggQJugP/A94x91x//ZrKAAAAAElFTkSuQmCC"}).setProps({alt:s}))}},t}()),u={rootDOM:h,loadJsFile:function(t,e){return s[t]||(s[t]=function(t,e){return new Promise((function(n,i){var o=r.$new("script");o.attr("type","text/javascript"),o.node.onload=n,o.node.onerror=i,o.attr("src",t),o.appendTo(e||r.D.node.head)}))}(t,e)),s[t]},loadCssFile:function(t,e,n,i){return s[e]||(s[e]=h.addStyle(t,e,n,i)),s[e]},viewerFilters:[],getNodeWithSirvClassName:function(t){var e=null;return t&&(e=(t=o(t)).hasClass("Sirv")?t.node:u.getNodeWithSirvClassName(t.node.parentNode)),e},iconsHash:{nodes:[],elements:[[{classes:["smv-arrow-control"]},{classes:["smv-arrow"]},{classes:["smv-icon"]}],[{classes:["smv-button-fullscreen-open"]},{classes:["smv-icon"]}],[{classes:["smv-button-fullscreen-close"]},{classes:["smv-icon"]}],[{classes:["smv-thumbnails"]},{classes:["smv-selector"],attrs:[{name:"data-type",value:"spin"}]}]],waitBody:function(){return new Promise((function(t,e){var n=document.body;n?t(n):setTimeout((function(){u.iconsHash.waitBody().then(t)}),16)}))},make:function(){u.iconsHash.elements.forEach((function(t){var e=[];t.reverse().forEach((function(t){var n=r.$new("div");t.classes&&t.classes.forEach((function(t){n.addClass(t)})),t.attrs&&t.attrs.forEach((function(t){n.attr(t.name,t.value)})),e.push(n)}));for(var n=1,i=e.length;n<i;n++)e[n].append(e[n-1]);u.iconsHash.nodes.push(e[e.length-1])})),u.iconsHash.nodes.forEach((function(t){t.setCss({top:"-10000px",left:"-10000px",width:"10px",height:"10px",position:"absolute",visibility:"hodden",opacity:0}),u.iconsHash.waitBody().finally((function(){r.$(r.D.node.body).append(t)}))}))},remove:function(){u.iconsHash.nodes.length&&(u.iconsHash.nodes.forEach((function(t){t.remove()})),u.iconsHash.nodes=[])}},adjustURL:function(t){return/^(http(s)?:)?\/\//.test(t)||(t=n.SIRV_BASE_URL+t),a(t).replace(/([^:])\/+/g,"$1/")},normalizeURL:function(t){return c(a(t))}};return u.rootDOM.attachNode(r.D.node.head||r.D.node.body),u}));var _this=this;Sirv.define("helper",["bHelpers","magicJS","globalVariables"],(function(t,e,n){var i=e,r=i.$,o={},s=function(){"use strict";function t(){this.started=!1,this.callbacks=[]}var e=t.prototype;return e.wait=function(t){this.started?t():this.callbacks.push(t)},e.start=function(){this.started||(this.started=!0,this.callbacks.forEach((function(t){return t()})))},e.destroy=function(){this.callbacks=[]},t}();o.WaitToStart=s,o.addCss=function(t,e,n,o,s){var a,c=document.head||document.body,h=i.$new("style",{type:"text/css"});h.attr("id",e||"sirv-module-"+h.$J_UUID),n||(n="top"),o&&(c=r(o).node||o),"top"===n&&(a=c.firstChild);var u=c.querySelector(s);return u&&u.nextSibling&&(a=u.nextSibling),c.insertBefore(h.node,a),h.node.innerHTML=t,h},o.cleanQueryString=function(t){return t=(t=(t=(t=(t=(t=t.replace(/&+/g,"&")).replace(/&$/,"")).replace(/\?&/,"?")).replace(/profile=&|profile=$/g,"")).replace(/image=&/g,"image&")).replace(/image=$/g,"image")},o.createReadOnlyProp=function(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1})};var a,c,h,u,l,d,f,p,g,m,v,y,S,w,b,E,_,I,x,O,N,C;return o.debounce=function(t,e,n){var r,o,s,a,c,h,u,l=0,d=!1,f=!1,p=!0,g=!e&&0!==e&&i.browser.features.requestAnimationFrame;if("function"!=typeof t)throw new TypeError("Expected a function");e=+e||0,(u=n)&&"object"==typeof u&&u.constructor===Object&&(d=!!n.leading,s=(f="maxWait"in n)?Math.max(+n.maxWait||0,e):s,p="trailing"in n?!!n.trailing:p);var m=function(e){var n=r,s=o;return r=i.U,o=r,l=e,a=t.apply(s,n)},v=function(t,e){return g?(i.browser.cancelAnimationFrame(c),i.browser.requestAnimationFrame(t)):setTimeout(t,e)},y=function(t){var n=t-h,r=t-l;return h===i.U||n>=e||n<0||f&&r>=s},S=function(t){return c=i.U,p&&r?m(t):(r=i.U,o=r,a)},w=function(){var t=Date.now();return y(t)?S(t):(c=v(w,function(t){var n=t-l,i=e-(t-h);return f?Math.min(i,s-n):i}(t)),i.U)},b=function(t){return l=t,c=v(w,e),d?m(t):a},E=function(){for(var t=Date.now(),n=y(t),s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];if(r=u,o=_this,h=t,n){if(c===i.U)return b(h);if(f)return c=v(w,e),m(h)}return c===i.U&&(c=v(w,e)),a};return E.cancel=function(){var t;c!==i.U&&(t=c,g?i.browser.cancelAnimationFrame(t):clearTimeout(t)),l=0,r=i.U,h=r,o=r,c=r},E.flush=function(){return c===i.U?a:S(Date.now())},E.pending=function(){return c!==i.U},E},o.deepExtend=(a=function(t,e){var n=i.typeOf(e);return i.defined(t)||(t="array"===n?[]:{}),"array"===n?e.forEach((function(e,n){var r=i.typeOf(e);"array"===r&&"array"===i.typeOf(t[n])||"object"===r&&"object"===i.typeOf(t[n])?t[n]=a(t[n],e):t.push(e)})):Object.entries(e).forEach((function(e){var n=e[0],r=e[1],o=i.typeOf(r);t[n]="array"===o||"object"===o?a(t[n],r):r})),t},function(){for(var t=null,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n&&n.length&&(t=n.shift(),n.forEach((function(e){var n=i.typeOf(e);"array"!==n&&"object"!==n||(t=a(t,e))}))),t}),o.fixSize=function(t,e){t=r(t);return["width","height"].forEach((function(n){var r;i.browser.ieMode&&!t.attr("src")&&function(t,e){return"auto"===t.attr(e)}(t,n)&&(e[n]=0),0===e[n]&&(e[n]=o.imageLib.getPartSize(t,n)),e[n]=((r=e[n])<=4&&(r=0),r)})),e},o.generateUUID=function(){return parseInt(1e7*Math.random(),10)},o.getArrayIndex=function(t,e){return(t%=e)<0&&(t+=e),t},o.getDPPX=function(t,e,n){var r=e/t;return r>=i.DPPX||n?r=i.DPPX:(r*=100,r=Math.ceil(r)/100),r},o.getMatrix=function(t){var e=null,n=r(t).getCss("transform")+"",i=function(t,e){var n={},i=["x","y","z"];return t.forEach((function(t,r){var o;n[i[r]]=(o=e[t],parseFloat(o.trim()))})),n};if("none"!==n){e={};var o=(n=(n=(n=n.split("(")[1]).split(")")[0]).split(",")).length>6;e.transform=i(o?[12,13,14]:[4,5],n),e.scale=i(o?[0,5,10]:[0,3],n)}return e},o.getRemoteData=(c=window.fetch?function(t,e){return fetch(t,{referrerPolicy:e||"no-referrer-when-downgrade"}).then((function(t){if(200===t.status)return t.json();throw{status:t.status,data:t}}))}:function(t){return new Promise((function(e,n){var i=new XMLHttpRequest;i?(i.onerror=function(t){n(t||!0)},i.onload=function(t){try{if(200!==i.status)throw{status:i.status,data:t};var r=JSON.parse(i.responseText);e(r)}catch(t){n(t)}},i.open("GET",t),void 0!==i.responseType&&(i.responseType="text"),i.send(null)):n(!0)}))},function(t,e,n){return new Promise((function(i,r){c(t,n).then(i).catch((function(n){n&&n.status&&[404,200].includes(n.status)?r(n):(console.log("XHR error. Switching to JSONP."),e||(e="sirv_data_"+o.generateUUID()),function(t,e){return new Promise((function(n,i){var r=!1,o=document.createElement("script");window[e]||(window[e]=function(){r=!0,delete window[e],document.body.removeChild(o),n(arguments.length<=0?void 0:arguments[0])});var s=function(){r||(delete window[e],document.body.removeChild(o),i(t))};o.onreadystatechange=function(){"complete"!==_this.readyState&&"loaded"!==_this.readyState||(_this.onreadystatechange=null,setTimeout(s,0))},o.onerror=s,o.onload=s,o.src=t+"&callback="+e,document.body.appendChild(o)}))}(t,e).then(i).catch(r))}))}))}),o.getSirvType=(h=function(t){var e=!1;return t&&(e=""!==(t+="").trim()),e},function(t){var e,i,s=(t=r(t)).attr("data-type")||t.attr("data-effect"),a=t.fetch("view-content"),c=null;if(h(s)&&"static"!==s){var u=n.SLIDE.NAMES.indexOf(s);e=u>=0?u:n.SLIDE.TYPES.ZOOM,s=t.attr("data-src"),h(s)?i=s:(s=r(t.node.getElementsByTagName("img")[0])).attr&&(i=s.attr("src")||s.attr("data-src"))}else s=t.attr("data-src"),h(s)?(o.isSpin(s)&&"img"!==t.tagName||a===n.SLIDE.TYPES.SPIN?e=n.SLIDE.TYPES.SPIN:o.isVideo(s)?e=n.SLIDE.TYPES.VIDEO:(e=n.SLIDE.TYPES.IMAGE,a&&(e=a)),i=s):(s=t.attr("src"),h(s)&&"img"===t.tagName&&(i=s,e=n.SLIDE.TYPES.IMAGE));return e&&(c={type:e,imgSrc:i}),c}),o.imageLib={isNumber:function(t){return/(px|%)$/.test(t)},getSize:function(t,e){return new Promise((function(n,i){var s=r(t).getInnerSize();e||(e=100),e-=1,!s.width&&!s.height&&e>0?setTimeout((function(){o.imageLib.getSize(t,e).then(n)}),16):n(s)}))},getBackgroundValue:function(t){return t&&/px$/.test(t)?parseInt(t,10):null},getBackgroundSize:function(t){var e=null,n=r(t).getCss("background-size");if(n){n=n.split(",")[0].split(" ");var i=o.imageLib.getBackgroundValue((n[0]||"").trim()),s=o.imageLib.getBackgroundValue((n[1]||"").trim());null!==i&&(e={width:i}),null!==s&&(e||(e={}),e.height=s)}return e},calcProportionalBackgroundSize:function(t,e){var n={width:e.width,height:e.height};return t.width&&e.width>t.width&&(n.width=t.width,n.height=t.width*e.height/e.width),t.height&&e.height>t.height&&(n.height=t.height,n.width=t.height*e.width/e.height),n},getBackgroundPositionValue:function(t){var e;switch(t){case"top":case"left":e=0;break;case"center":e=50;break;case"right":case"bottom":e=100;break;default:e=o.imageLib.isNumber(t)?parseInt(t,10):0}return e},getBackgroundPosition:function(t){var e={side:"left",position:0,sign:"%"},n={side:"top",position:0,sign:"%"},i=0,s=1,a=r(t).getCss("background-position");return a&&((a=(a=(a=(a=(a=a.replace(/important/,"")).replace(/!/g,"")).trim()).replace(/\s+/g," ")).split(" ")).length>2&&(i=1,s=3,["left","right"].includes(a[0])&&(e.side=a[0]),["top","bottom"].includes(a[2])&&(n.side=a[2])),e.position=o.imageLib.getBackgroundPositionValue(a[i]),n.position=o.imageLib.getBackgroundPositionValue(a[s]),/px$/.test(a[i])&&(e.sign="px"),/px$/.test(a[s])&&(n.sign="px")),{x:e,y:n}},getPartSize:function(t,e){var n,r=0;return n=i.browser.ieMode?(t.currentStyle[e]||"0").replace(/px$/,""):(t.getCss(e)||"0").replace(/px$/,""),isFinite(n)&&(r=Math.round(parseFloat(n))-parseFloat(t.getCss("border-top-width")||0)-parseFloat(t.getCss("border-bottom-width")||0)-parseFloat(t.getCss("padding-top")||0)-parseFloat(t.getCss("padding-bottom")||0)),r},checkMaxSize:function(t,e,n){var i,r;return(t.width>e.width*n||t.height>e.height*n)&&(t.width>e.width?(i="width",r="height"):(i="height",r="width"),t[i]=e[i],t[r]&&(t[r]=e[r]),t.round=!1),t},calcImageProportion:function(t,e,n,i){var r=n[e]/n[t],o={};return o[t]=i,o[e]=parseInt(r*o[t],10),o},contain:function(t,e){var n={width:t.width,height:t.height};return e.width&&n.width>e.width&&(n=o.imageLib.calcImageProportion("width","height",n,e.width)),e.height&&n.height>e.height&&(n=o.imageLib.calcImageProportion("height","width",n,e.height)),n},cover:function(t,e){var n={width:t.width,height:t.height};return e.width&&n.width<e.width&&(n=o.imageLib.calcImageProportion("width","height",n,e.width)),e.height&&n.height<e.height&&(n=o.imageLib.calcImageProportion("height","width",n,e.height)),n},calcProportionSize:function(t,e,n){var i={},r=e.width,s=e.height,a=r/s,c=s/r,h=function(){i.height=t.height,i.width=parseInt(a*t.height,10)},u=function(){i.width=t.width,i.height=parseInt(c*t.width,10)};return(t.width>r||t.height>s)&&(t.width>r?(t.width=r,t.height&&(t.height>s?t.height=s:h())):(t.height=s,t.width&&(t.width>r?t.width=r:u()))),(t.width||t.height)&&(t.width&&t.height?t.width/t.height-a<=t.height/t.width-c?u():h():t.width?u():h()),n&&(o.imageLib.isNumber(n.width)&&o.imageLib.isNumber(n.height)?(r=parseInt(n.width,10),/%$/.test(n.width)&&(r=r/100*t.width),s=parseInt(n.height,10),/%$/.test(n.height)&&(s=s/100*t.height),i=r<e.width/e.height*s?o.imageLib.calcImageProportion("width","height",e,r):o.imageLib.calcImageProportion("height","width",e,s)):(o.imageLib.isNumber(n.width)&&(r=parseInt(n.width,10),/%$/.test(n.width)&&(r=r/100*t.width),i=o.imageLib.calcImageProportion("width","height",e,r)),o.imageLib.isNumber(n.height)&&(s=parseInt(n.height,10),/%$/.test(n.height)&&(s=s/100*t.height),i=o.imageLib.calcImageProportion("height","width",e,s)),[n.width,n.height].includes("initial")?(i.width=e.width,i.height=e.height):[n.width,n.height].includes("cover")?i=o.imageLib.cover(i,t):[n.width,n.height].includes("contain")&&(i=o.imageLib.contain(i,t)))),i}},o.InViewModule=(u=function(t){var e=!0;return"body"!==t.tagName&&(e="none"!==t.getCss("display")&&u(r(t.node.parentNode))),e},l=new(function(){"use strict";function t(){this.timer=null,this.started=!1,this.list=[]}var e=t.prototype;return e._startTimer=function(){var t=this;this.list.length&&(clearTimeout(this.timer),this.timer=setTimeout((function(){t._check(),t.started&&t._startTimer()}),500))},e._check=function(){this.list.forEach((function(t){var e=u(t.obj.node),n=e!==t.obj.isShown;t.obj.isShown=e,n&&t.callback(t.obj)}))},e.push=function(t,e){var n={obj:t,callback:e};this.list.push(n),this.started||(this.started=!0,this._startTimer())},e.remove=function(t){for(var e=0,n=this.list.length;e<n;e++)if(this.list[e].obj.node.node===t){this.list.splice(e,1);break}this.list.length||(this.started=!1)},t}()),d=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var n=function(t){var e=null;return null!==t&&(t=parseFloat(t),isNaN(t)||(t<0&&(t=0),t>1&&(t=1),e=t)),e}(t);null===n||e.includes(n)||e.push(n)})):e=[0],e},f=function(){"use strict";function t(t,e){this.callback=t,this.options=Object.assign({rootMargin:"0px",threshold:[0],root:null},e||{}),this.options.rootMargin=function(t){var e=[],n=function(){return 0};if(t&&!Array.isArray(t)&&(t="number"===i.typeOf(t)?[t]:"string"===i.typeOf(t)?(t=t.split(" ")).map((function(t){return t.trim()})):null),Array.isArray(t)){var r=t.length;switch(r>4&&(r=4),t.forEach((function(t){if(["string","number"].includes(i.typeOf(t))){var r=parseInt(t,10);/%$/.test(t)?e.push((function(t){return t/100*r})):e.push((function(t){return r}))}else e.push(n)})),r){case 1:e.push(e[0]),e.push(e[0]),e.push(e[0]);break;case 2:e.push(e[0]),e.push(e[1]);break;case 3:e.push(e[1])}}else e=[n,n,n,n];return e}(this.options.rootMargin),this.options.threshold=d(this.options.threshold),this.nodeList=[],this.last=[],this.viewPortSize={top:0,left:0,width:0,height:0},this.correctPosition={top:0,left:0},this.eventWasAdded=!1,this.bindedRender=this._render.bind(this),this.bindedResize=this._resize.bind(this),this._resize()}var e=t.prototype;return e._addEvents=function(t){this.eventWasAdded||(this.eventWasAdded=!0,r(window).addEvent("resize",this.bindedResize),r(this.options.root||window).addEvent("scroll",this.bindedRender))},e._removeEvents=function(t){this.eventWasAdded&&(this.eventWasAdded=!1,r(window).removeEvent("resize",this.bindedResize),r(this.options.root||window).removeEvent("scroll",this.bindedRender))},e._resize=function(t){var e,n=this.options.rootMargin,i=((e=this.options.root)||(e=window),{width:e.offsetWidth||e.innerWidth||document.documentElement.clientWidth,height:e.offsetHeight||e.innerHeight||document.documentElement.clientHeight});this.correctPosition={top:0-n[0](i.width),left:0-n[1](i.width)},this.viewPortSize={width:i.width+n[1](i.width)+n[3](i.width),height:i.height+n[0](i.width)+n[2](i.width)}},e._renderElement=function(t){var e=null;if(t.isShown){var n=function(t,e,n){var i=Object.assign({},e);try{var o=r(t).getBoundingClientRect();i.top+=o.top,i.left+=o.left}catch(t){}return Object.assign(i,n)}(this.options.root,this.correctPosition,this.viewPortSize),i=function(t,e){var n,i,r,o=t.width||1,s=t.height||1,a=Math.min(t.left+o,e.left+e.width)-Math.max(t.left,e.left),c=Math.min(t.top+s,e.top+e.height)-Math.max(t.top,e.top);return a<0&&(a=0),c<0&&(c=0),i=a*c,r=0,(n=o*s)>0&&(r=i/n),r}(t.node.node.getBoundingClientRect(),n);(function(t,e,n){var i=!1;if(e!==n)if(e<n){for(var r=0,o=t.length;r<o;r++)if(0===t[r]&&0===e||e<t[r]&&t[r]<=n){i=!0;break}}else for(var s=0,a=t.length;s<a;s++)if(1===t[s]&&1===e||e>t[s]&&t[s]>=n){i=!0;break}return i})(this.options.threshold,t.intersectionRatio,i)&&(t.intersectionRatio=i,e={target:t.node.node,intersectionRatio:t.intersectionRatio,isIntersecting:t.intersectionRatio>0})}return e},e._render=function(){var t=this,e=[];this.nodeList.forEach((function(n){var i=t._renderElement(n);i&&e.push(i)})),e.length&&(this.last=e,this.callback(e))},e.takeRecords=function(){return this._render(),this.last},e.observe=function(t){var e=this;t={node:t=r(t),isShown:u(t),intersectionRatio:0,isIntersecting:!1},l.push(t,(function(t){var n=e._renderElement(t);n&&(e.last=[n],e.callback([n]))})),this.nodeList.push(t),this._addEvents();var n=this._renderElement(t);n||(n={target:t.node.node,intersectionRatio:0,isIntersecting:!1}),this.callback([n])},e.unobserve=function(t){t=r(t);var e=this.nodeList.map((function(t){return t.node.node})).indexOf(t.node);l.remove(t.node),e>-1&&this.nodeList.splice(e,1),this.nodeList.length||this._removeEvents()},e.disconnect=function(){this.nodeList.forEach((function(t){l.remove(t.node)})),this.nodeList=[],this._removeEvents()},t}(),function(){"use strict";function t(t,e){var n=window.IntersectionObserver||f;this.observer=new n(t,e||{})}t.isInView=function(t){var e=r(t).getBoundingClientRect();return(e.top>=0||e.top-e.bottom<e.top)&&e.left>=0&&e.top<=(window.innerHeight||document.documentElement.clientHeight)};var e=t.prototype;return e.takeRecords=function(){return this.observer.takeRecords()},e.observe=function(t){t.node&&(t=t.node),this.observer.observe(t)},e.unobserve=function(t){this.observer.unobserve(t)},e.disconnect=function(){this.observer.disconnect()},t}()),o.isPercentage=function(t){return/^([-]?[0-9]*\.?[0-9]+)%$/.test(""+t)},o.isSVG=function(t){return!!t&&(t=(t=(t=t.split("?")[0]).split("."))[t.length-1],/svg/i.test(t))},o.isSpin=function(t){return t=(t||"").split("?")[0],/([^#?]+)\/?([^#?]+\.spin)(\?([^#]*))?(#(.*))?$/.test(t)},o.isVideo=function(t){return t=(t||"").split("?")[0],/([^#?]+)\/?([^#?]+\.(mp4|mov|avi|m4v|mkv|webm|wmv|ogv|ogg))(\?([^#]*))?(#(.*))?$/i.test(t)},o.loadImage=function(t){return new Promise((function(e,n){var o,s,a=!1;if(["array","string"].includes(i.typeOf(t))?("string"===i.typeOf(t)&&(t=[t]),(o=i.$new("img").setCss({maxWidth:"none",maxHeight:"none"})).attr("referrerpolicy","no-referrer-when-downgrade"),a=!0):(o=r(t)).node.parentNode||(a=!0),a&&((s=i.$new("div").setCss({top:"-10000px",left:"-10000px",width:"10px",height:"10px",position:"absolute",overflow:"hidden"})).append(o),r(i.D.node.body).append(s)),o.node.complete&&o.node.src)s&&s.remove(),e({image:null,size:o.size});else{var c=function(t){o.removeEvent(["load","error"],c),"error"===t.type?n({error:t}):e({image:t,size:{width:o.node.naturalWidth||o.node.width,height:o.node.naturalHeight||o.node.height}}),s&&s.remove()};o.addEvent(["load","error"],c),s&&"array"===i.typeOf(t)&&(o.attr("src",t[0]),t[1]&&o.attr("srcset",t[1]+" 2x"))}}))},o.loadStylesheet=function(t,e,n,o){return new Promise((function(s,a){var c=!1,h=n||i.D.node;if(Array.from(h.querySelectorAll("link")).forEach((function(e){var n=r(e).attr("href")||"";i.getAbsoluteURL(n)===i.getAbsoluteURL(t)&&(c=!0)})),c)s();else{var u=i.$new("link");e!==i.U&&(u.node.id=e),u.node.rel="stylesheet",u.node.type="text/css",u.node.onload=function(){s()},u.node.onerror=function(t){a(t)},u.node.href=t;var l=i.D.node.head||i.D.node.getElementsByTagName("head")[0]||i.D.node.body||i.D.node.documentElement;n&&(l=n);var d=l.firstChild,f=l.querySelector(o);f&&f.nextSibling&&(d=f.nextSibling),l.insertBefore(u.node,d)}}))},o.makeQueryblePromise=function(t){if(t.isResolved)return t;var e=!0,n=!1,i=!1,r=t.then((function(t){return e=!1,i=!0,t}),(function(t){return e=!1,n=!0,t}));return r.isFulfilled=function(){return i},r.isPending=function(){return e},r.isRejected=function(){return n},r},o.paramsFromQueryString=(p={w:"scale.width",h:"scale.height",cw:"crop.width",ch:"crop.height",cx:"crop.x",cy:"crop.y",q:"quality",s:"size",text:"text.text",watermark:"watermark.image","watermark.w":"watermark.scale.width","watermark.h":"watermark.scale.height","watermark.cw":"watermark.crop.width","watermark.ch":"watermark.crop.height","watermark.cx":"watermark.crop.x","watermark.cy":"watermark.crop.y"},function(t){var e={};return t&&(r(t.split("&")).forEach((function(t){var n=t.split("=");n[0]=p[n[0]]||n[0],n[0].trim().split(".").reduce((function(t,e,i,r){return/^\d$/.test(e)&&(t.__toArray=!0),void 0===t[e]&&(i<r.length-1?t[e]={}:t[e]=function(t){for(var e="",n=t.split(/(%(?:D0|D1)%.{2})/),i=0,r=n.length;i<r;i++){var o=void 0;try{o=decodeURIComponent(n[i])}catch(t){o=n[i]}e+=o}return e}(n[1]||"")),t[e]}),e)})),Object.keys(e).forEach((function(t){if("object"==typeof e[t]&&e[t].__toArray){delete e[t].__toArray;var n=Object.keys(e[t]);e[t]=n.map((function(n){return e[t][n]}))}}))),e}),o.paramsToQueryString=(g={"scale.width":"w","scale.height":"h","crop.width":"cw","crop.height":"ch","crop.x":"cx","crop.y":"cy",quality:"q",size:"s","text.text":"text","watermark.image":"watermark","watermark.scale.width":"watermark.w","watermark.scale.height":"watermark.h","watermark.crop.width":"watermark.cw","watermark.crop.height":"watermark.ch","watermark.crop.x":"watermark.cx","watermark.crop.y":"watermark.cy"},m=function(t,e){var n=[],r=function(r){if(!Object.prototype.hasOwnProperty.call(t,r))return"continue";if("$J"===(r+"").substring(0,2))return"continue";var o=t[r];if("object"===i.typeOf(o))o=m(o,(e||"")+r+"."),n.push(o);else if("array"===i.typeOf(o))o.forEach((function(t,i){o=m(t,(e||"")+r+"."+i+"."),n.push(o)}));else{var s=(e||"")+r;s=g[s]||s,n.push(s+"="+encodeURIComponent(o))}};for(var o in t)r(o);return n.join("&")}),o.round=function(t,e,n){e||(e=0);var i=Math.pow(10,e);return i=n?parseInt(t*i,10)/i:Math.round(t*i)/i},o.roundSize=function(t,e){return t&&(e||(e=100),t=Math.ceil(t/e)*e),t},o.sendRawStats=function(t,e){try{var n="https://stats.sirv.com/"+ +new Date;if(!0===e&&navigator.sendBeacon)return void navigator.sendBeacon(n,o.paramsToQueryString(t));var i=new XMLHttpRequest;i.open("POST",n),void 0!==i.responseType&&(i.responseType="text"),i.send(o.paramsToQueryString(t))}catch(t){}},o.sliderLib={findIndex:function(t,e,n,r){var s=null;if("string"===i.typeOf(t))switch(t){case"next":t=e+1;break;case"prev":t=e-1}return"number"===i.typeOf(t)&&((s=t)<0?s=r?o.getArrayIndex(s,n):0:t>=n&&(s=r?o.getArrayIndex(s,n):n-1)),s},getSrc:function(t){return i.defined(t)&&""!==(t+"").trim()?t+"":null}},o.sortSlidesByOrder=function(t,e){var i=e.slice(),r=[];if(t&&t.length)for(var o=0,s=Math.min(t.length,i.length);o<s;o++)for(var a=0,c=i.length;a<c;a++)if(n.SLIDE.NAMES.indexOf(t[o])===i[a].type&&i[a].enabled){r.push(i[a]),i.splice(a,1);break}return i.forEach((function(t){r.push(t)})),r},o.spinLib=v={calcProportionSize:function(t,e,n,i){var r=e.width,o=e.height;if(r>t.width){var s=o/r;r=t.width,o=parseInt(r*s,10)}if(o>t.height){var a=r/o;o=t.height,r=parseInt(o*a,10)}return i||e.width<r&&(r=e.width,o=e.height),{width:r,height:o}},reverse:function(t,e,n){if(t)for(var i=0,r=n.length;i<r;i++)n[i].reverse();return e&&n.reverse(),n},getNextIndex:function(t,e,n,i,r){var s;return n?"next"===n?(s=t+e,r?s=o.getArrayIndex(s,i):s>=i&&(s=i-1)):(s=t-e,r?s=o.getArrayIndex(s,i):s<0&&(s=0)):(s=e,r?s=o.getArrayIndex(s,i):(s>=i&&(s=i-1),s<0&&(s=0))),s},getUrl:function(t){var e=t;return(e=e.split("/")).splice(e.length-1,1),e=(e=e.join("/")).replace(/https?:/,"")},swapLayers:function(t,e){var n=t;return e&&(n={},Object.entries(t).forEach((function(t){var e=t[0],i=t[1];Object.entries(i).forEach((function(t){var i=t[0],r=t[1];n[i]||(n[i]={}),n[i][e]=r}))}))),n},getMaxCount:function(t){return Math.max.apply(Math,[0].concat(Object.values(t).map((function(t){return Object.keys(t).length}))))},correctArray:function(t,e){var n=[],i=e-t.length;if(i>0){for(var r=t.length,o=0;o<r-1;o++){var s=parseInt(t[o],10),a=parseInt(t[o+1],10)-s-1;if(n.push(t[o]),a>0&&i>0)for(a>i&&(a=i);a>0;)a-=1,i-=1,n.push(t[o])}if(n.push(t[r-1]),i>0){var c=parseInt(t[0],10)-1;if(c>0)for(;c>0;)c-=1,i-=1,n.unshift(t[0]);if(i>0)for(;i>0;)i-=1,n.push(t[t.length-1])}}else n=JSON.parse(JSON.stringify(t));return n},getFrames:function(t,e){var n={},i=v.correctArray(Object.keys(t),e);return r(i).forEach((function(e,i){n[i+1+""]=t[e]})),n},checkLayers:function(t){var e={},n=v.getMaxCount(t);return Object.values(t).forEach((function(t,i){e[i+1+""]=v.getFrames(t,n)})),e}},o.videoModule=(y=null,S=null,w={},b="0.jpg",E="default.jpg",_=function(t){return new Promise((function(e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status)try{var t=JSON.parse(i.responseText)[0];e(t)}catch(t){n(null)}},i.send(!0)}))},I=function(t){return(t=r(t))&&"video"===t.tagName},x=function(t){var e=null;return void 0!==(t=t.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]&&(t=t[2].split(/[^0-9a-z_\-]/i)).length&&t[0]&&(e=t[0]),e},O=function(t){var e=null;return(t=t.match(/(?:https?:\/\/)?(?:www.)?(?:player.)?vimeo.com\/(?:[a-z]*\/)*([0-9]{6,11})[?]?.*/)[1])&&(e=t),e},C={aspectratio:9/16,getAspectRatio:function(t){return new Promise((function(e,n){var i;(t=N(t))&&w[t]&&e(w[t].aspectratio),"vimeo"===C.getType(t)&&(i=O(t))?_("https://vimeo.com/api/v2/video/"+i+".json").then((function(t){e(t?t.height/t.width:C.aspectratio)})).catch((function(t){n(t)})):e(C.aspectratio)}))},getId:function(t){var e=null;if(C.isVideo(t))switch(t=N(t),C.getType(t)){case"youtube":e=x(t);break;case"vimeo":e=O(t)}return e},isVideo:function(t){var e=!1;return I(t)?e=!0:(t=N(t))&&(e=["youtube","vimeo"].includes(C.getType(t))),e},getType:function(t){var e=null;return I(t)?e="video":(t=N(t))&&(/^(https?:)?\/\/((www\.)?youtube\.com|youtu\.be)\//.test(t)?e="youtube":/^(https?:)?\/\/((www|player)\.)?vimeo\.com\//.test(t)&&(e="vimeo")),e},getImageSrc:function(t,e){return new Promise((function(n,o){var s;t&&r(t)&&"element"===i.typeOf(r(t).node)&&(s=t),t=N(t);var a,c=null;if(t){if(w[t])if(e){if(w[t].all)return void n(w[t].all)}else{if(w[t].url)return void n(w[t].url);if(w[t].all)return void n(w[t].all.thumbnail.url)}var h;switch(C.getType(s||t)){case"youtube":(h=x(t))&&(c=e?{thumbnail:{url:"https://img.youtube.com/vi/"+h+"/"+E,width:120,height:90},medium:{url:"https://img.youtube.com/vi/"+h+"/"+b,width:480,height:360}}:"https://img.youtube.com/vi/"+h+"/"+E,w[t]||(w[t]={}),w[t].aspectratio=C.aspectratio,e?w[t].all=c:w[t].url=c),n(c);break;case"vimeo":(h=O(t))?_(c="https://vimeo.com/api/v2/video/"+h+".json").then((function(i){var r=null;i&&(r=e?{thumbnail:{url:i.thumbnail_small,width:100,height:75},medium:{url:i.thumbnail_medium,width:200,height:150}}:i.thumbnail_small),r&&(w[t]||(w[t]={}),e?w[t].all=r:w[t].url=r,w[t].aspectratio=i.height/i.width),n(r)})).catch(o):n(c);break;case"video":if(s)if((s=r(s.node.cloneNode(!0))).attr&&(c=s.attr("poster")),c&&""!==c.trim())w[t]||(w[t]={}),w[t].aspectratio=C.aspectratio,e?(w[t].all={thumbnail:{url:c,width:200,height:150},medium:{url:c,width:200,height:150}},n(w[t].all)):(w[t].url=c,n(c));else{var u=i.$new("canvas"),l=u.node.getContext("2d"),d=function(){s.removeEvent(["loadedmetadata","loadeddata","abort","error","stalled"]),s.remove()};(a=s.attr("data-src"))&&s.attr("src",a),Array.from(s.node.children).forEach((function(t){(t=r(t))&&"source"===t.tagName&&(a=t.attr("data-src"))&&t.attr("src",a)})),s.setCss({top:-1e5,left:-1e5,width:200,height:150,position:"absolute"}),s.muted=!0,s.addEvent("loadedmetadata",(function(t){var e=s.size;e.width&&e.height||(e.width=200,e.height=150),s.setCss({width:e.width,height:e.height}),u.node.width=e.width,u.node.height=e.height,0<s.node.duration&&(s.node.currentTime=0)})),s.addEvent("loadeddata",(function(t){s.currentTime=0})),s.addEvent(["abort","error","stalled"],(function(t){d(),o(null)})),s.addEvent("seeked",(function(i){l.drawImage(s.node,0,0,u.node.width,u.node.height),d();try{c=u.node.toDataURL()}catch(t){}c?(w[t]||(w[t]={}),w[t].aspectratio=C.aspectratio,e?(w[t].all={thumbnail:{url:c,width:200,height:150},medium:{url:c,width:200,height:150}},n(w[t].all)):(w[t].url=c,n(c))):n(c)})),s.appendTo(i.D.node.body),s.node.load()}else n(c);break;default:n(c)}}else n(c)}))},getSrc:N=function(t){var e=null;if("string"===i.typeOf(t))e=t;else if((t=r(t))&&"element"===i.typeOf(t.node))if(["iframe","div"].includes(t.tagName))e=t.attr("src")||t.attr("data-src");else if(I(t)&&!(e=t.attr("src")||t.attr("data-src"))){e=null;var n,o=Array.from(t.node.children);do{(n=r(o.shift()))&&"element"===i.typeOf(n.node)&&"source"===n.tagName&&(e=n.attr("src")||n.attr("data-src"))}while(!e&&n)}return e},getAPI:function(t){var e=null;if(C.isVideo(t))switch(C.getType(t)){case"video":e=Promise.resolve();break;case"vimeo":y||(y=new Promise((function(t,e){if(i.W.node.Vimeo)t(i.W.node.Vimeo);else if("function"==typeof i.W.node.define&&i.W.node.define.amd&&"function"==typeof i.W.node.require)i.W.node.require(["https://player.vimeo.com/api/player.js"],(function(e){t({Player:e})}),e);else{var n=i.$new("script");n.attr("src","https://player.vimeo.com/api/player.js"),r(n).addEvent("load",(function(){t(i.W.node.Vimeo)})),r(n).addEvent("error",e),n.appendTo(document.body)}}))),e=y;break;case"youtube":S||(S=i.W.node.YT?Promise.resolve(i.W.node.YT):new Promise((function(t,e){var n=i.W.node.onYouTubeIframeAPIReady||function(){};i.W.node.onYouTubeIframeAPIReady=function(){n(),t(i.W.node.YT)},document.querySelector('script[src$="youtube.com/iframe_api"]')||i.$new("script",{src:"https://www.youtube.com/iframe_api"}).appendTo(i.D.node.body)}))),e=S}else e=Promise.reject(!0);return e}}),o})),Sirv.define("EventEmitter",["bHelpers","magicJS","helper"],(function(t,e,n){var i=e,r=i.$,o=function(){"use strict";function e(t,e,n){this.type=t,this._direction=e,this.propagation=!0,this.nextCalls=!0,this.emptyEvent=!0,this.data=Object.assign(n,{eventType:this.type,eventDirection:this._direction,stopEmptyEvent:this.stopEmptyEvent.bind(this),stopPropagation:this.stopPropagation.bind(this),stopNextCalls:this.stopNextCalls.bind(this),stop:this.stop.bind(this),stopAll:this.stopAll.bind(this)})}var n=e.prototype;return n.copyData=function(){var t=Object.assign({},this.data);return delete t.eventDirection,delete t.stopEmptyEvent,delete t.stopPropagation,delete t.stopNextCalls,delete t.stop,delete t.stopAll,t},n.stopEmptyEvent=function(){this.emptyEvent=!1},n.stopPropagation=function(){this.propagation=!1},n.stopNextCalls=function(){this.nextCalls=!1},n.stop=function(){this.stopPropagation(),this.stopEmptyEvent()},n.stopAll=function(){this.stop(),this.stopNextCalls()},t.createClass(e,[{key:"customData",get:function(){return this.data}},{key:"direction",get:function(){return this._direction}},{key:"emptyEventStopped",get:function(){return!this.emptyEvent}},{key:"propagationStopped",get:function(){return!this.propagation}},{key:"nextCallsStopped",get:function(){return!this.nextCalls}}]),e}(),s=function(t,e){return"string"===i.typeOf(t)?""===(t=t.trim())&&(t=e):t=e,t};return function(){"use strict";function e(){this.__parent=null,this.__childs=r([]),this.__subscribers={},this.__NAME_OF_EMPTY_EVENT="__empty__"}var n=e.prototype;return n.__setChild=function(t){this.__childs.push(t)},n.__removeChild=function(t){var e=this.__childs.indexOf(t);-1!==e&&this.__childs.splice(e,1)},n.__removeParent=function(){this.__parent&&(this.__parent.__removeChild(this),this.__parent=null)},n.__callNext=function(t){t.propagationStopped||("up"===t.direction?this.__parent&&this.__parent.__next(t):this.__childs.forEach((function(e){e.__next(t)})))},n.__next=function(t){var e=this.__subscribers[t.type];if(t=new o(t.type,t.direction,t.copyData()),e)for(var n=0;n<e.length&&(e[n](t.customData,t,this),!t.nextCallsStopped);n++);if(Object.prototype.hasOwnProperty.call(this.__subscribers,this.__NAME_OF_EMPTY_EVENT)&&!t.emptyEventStopped)for(var i=0;i<this.__subscribers[this.__NAME_OF_EMPTY_EVENT].length;i++)this.__subscribers[this.__NAME_OF_EMPTY_EVENT][i](t.customData);this.__callNext(t)},n.emit=function(t,e){e&&"object"===i.typeOf(e)||("object"===i.typeOf(t)?(e=t,t=null):e={}),t=s(t,this.__NAME_OF_EMPTY_EVENT),this.__callNext(new o(t,"up",e))},n.broadcast=function(t,e){e&&"object"===i.typeOf(e)||("object"===i.typeOf(t)?(e=t,t=null):e={}),t=s(t,this.__NAME_OF_EMPTY_EVENT),this.__callNext(new o(t,"down",e))},n.on=function(t,e){var n=this;return"function"===i.typeOf(t)&&(e=t,t=null),e?(t=s(t,this.__NAME_OF_EMPTY_EVENT),this.__subscribers[t]||(this.__subscribers[t]=[]),this.__subscribers[t].push(e),function(){return n.off(t,e)}):null},n.off=function(t,e){var n;"function"===i.typeOf(t)&&(e=t,t=null),t=s(t,this.__NAME_OF_EMPTY_EVENT),e?Object.prototype.hasOwnProperty.call(this.__subscribers,t)&&-1!==(n=this.__subscribers[t].indexOf(e))&&this.__subscribers[t].splice(n,1):delete this.__subscribers[t]},n.destroy=function(){this.__removeParent(),this.__childs=r([]),this.__subscribers={}},t.createClass(e,[{key:"parentClass",set:function(t){this.__parent=t,this.__parent.__setChild(this)}}]),e}()})),Sirv.define("EventManager",["bHelpers","magicJS","globalVariables","globalFunctions","EventEmitter","helper"],(function(t,e,n,i,r,o){var s=e;s.$;return function(e){"use strict";function n(t){var n;return(n=e.call(this)||this).items=t,n.events={lazyimage:{},viewer:{},spin:{},zoom:{},image:{},video:{}},n.reversedEvents=[],n.addEvents(),n}t.inheritsLoose(n,e),n.eventsNameParser=function(t){var e=null;return t&&"string"===s.typeOf(t)&&(e=t.split(":").map((function(t){return t.trim()})).filter((function(t){return""!==t})),/sirv/i.test(e[0])&&e.shift(),e.length<2&&(e=null)),e},n.triggerCustomEvent=function(t,e,n,i,r){var o;i===s.U&&(i=!0),r===s.U&&(r=!0);try{o=new CustomEvent(t,{bubbles:i,cancelable:r,detail:n})}catch(e){try{(o=s.D.createEvent("Event")).initEvent(t,i,r),o.detail=n}catch(t){}}o&&e.node.dispatchEvent(o)};var r=n.prototype;return r.addReverseEvent=function(t,e,n){this.reversedEvents.push({eventName:t,componentName:n,callback:e})},r.callReverseCallback=function(t,e,n){for(var i=!1,r=0,o=this.reversedEvents.length;r<o;r++)if(this.reversedEvents[r].componentName===t&&this.reversedEvents[r].eventName===e){this.reversedEvents[r].callback(n),this.reversedEvents.splice(r,1),i=!0;break}return i},r.addEvents=function(){var t=this;this.on("destroy",(function(t){t.stopAll(),i.stop(t.data.node,"viewer")})),this.on("imagePublicEvent",(function(e){if(e.stopAll(),!t.callReverseCallback("lazyimage",e.data.type,e.data.image)){n.triggerCustomEvent("sirv:lazyimage:"+e.data.type,e.data.node,Object.assign({},e.data.image));var i=t.events.lazyimage[e.data.type];i&&i.forEach((function(t){t(e.data.image)}))}})),this.on("viewerPublicEvent",(function(e){var r,o,s;e.stopAll();var a="viewer";if("componentEvent"===e.data.slider.type?(o=e.data.type,s=Object.assign({},e.data.slide[e.data.slide.component]),a=e.data.slide.component,e.data.node&&(r=e.data.componentEventData.node),Object.entries(e.data.componentEventData).forEach((function(t){var n=t[0],i=t[1];"node"===n?e.data.node&&(s[n]=i.node):"type"!==n&&(s[n]=i)}))):("ready"===(o=e.data.slider.type)&&i.iconsHash.remove(),e.data.node&&(r=e.data.node),e.data.slider&&(s=e.data.slider,"sendStats"===o&&(s.statsData=e.data.event)),["beforeSlideIn","beforeSlideOut","afterSlideIn","afterSlideOut","enableItem","disableItem","thumbnailClick"].includes(o)&&(s=e.data.slide)),!t.callReverseCallback(a,o,s)){r&&n.triggerCustomEvent("sirv:"+a+":"+o,r,Object.assign({},s));var c=t.events[a][o];c&&c.forEach((function(t){t(s)}))}})),this.on((function(t){t.stopAll()}))},r.addEvent=function(t,e){var i=this,r=function(){return!1},o=n.eventsNameParser(t);if(o&&this.events[o[0]]&&e){if(this.events[o[0]][o[1]]||(this.events[o[0]][o[1]]=[]),this.events[o[0]][o[1]].push(e),["ready","init","onLoad"].includes(o[1])){var s="lazyimage"===o[0]?"image":"viewer";("viewer"===s&&"onLoad"!==o[1]||"onLoad"===o[1]&&"image"===s)&&setTimeout((function(){i.items[s].forEach((function(t){t.checkReadiness(o[1],o[0])&&(i.addReverseEvent(o[1],e,o[0]),t.sendEvent(o[1],o[0]))}))}),0)}r=function(){return i.removeEvent(t,e)}}return r},r.removeEvent=function(t,e){var i=n.eventsNameParser(t);if(i&&this.events[i[0]]&&this.events[i[0]][i[1]]){if(!e)return delete this.events[i[0]][i[1]],!0;var r=this.events[i[0]][i[1]].indexOf(e);if(r>=0)return this.events[i[0]][i[1]].splice(r,1),!0}return!1},n}(r)})),Sirv.define("ContextMenu",["bHelpers","magicJS","globalVariables","globalFunctions"],(function(t,e,n,i){var r=e,o=r.$;return function(){"use strict";function e(t,e,n){void 0===n&&(n="magic"),this.CSS_CLASS=n+"-contextmenu",this.target=t,this.conext=null,this.overlay=null,this.items={},this.active=!1,this.showBind=null,this.hideBind=null,this.hideOnScrollBind=null,this.context=null,this._canShow=!0,this._position={top:null,left:null},this._fullScreenBox=null,this.setup(e||[])}var n=e.prototype;return n.isExist=function(t){return!!this.items[t]},n.setup=function(t){var e=this;this.context=r.$new("ul").addClass(this.CSS_CLASS).addEvent(["contextmenu","dragstart","selectstart"],(function(t){t.stop()})),t.forEach((function(t){e.addItem(t)})),this.hideFX=new r.FX(this.context,{duration:200,onComplete:function(){e.context.remove()}}),this.target.addEvent("contextmenu",this.showBind=this.show.bind(this)),this.overlay=r.$new("div").addClass(this.CSS_CLASS+"-overlay").addEvent("click contextmenu",this.hide.bind(this)).addEvent("mousescroll",(function(t){t.stop(),o(t).events[0].stop().stopQueue()})),this.hideBind=o((function(t){e.active&&(t.stop(),27===t.originEvent.keyCode&&e.hide())})).bind(this),r.W.addEvent("keydown",this.hideBind,1),this.hideOnScrollBind=o((function(t){e.active&&e.hide()})).bind(this),r.W.addEvent("scroll",this.hideOnScrollBind)},n.addItem=function(t){var e=this,n=r.$new("li").appendTo(this.context);r.defined(t.separator)?n.addClass("menu-separator"):r.defined(t.label)&&(n.append(r.D.node.createTextNode(t.label)),r.defined(t.disabled)&&!0===t.disabled&&n.attr("disabled",!0),"function"===r.typeOf(t.action)&&n.addEvent("btnclick",(function(i){i.stop(),n.attr("disabled")||(e.hide(),t.action.call(t.action,e.position))}))),r.defined(t.hidden)&&!0===t.hidden&&n.setCss({display:"none"});var i=t.id||"item-"+Math.floor(Math.random()*+new Date);return this.items[i]=n,i},n.hideItem=function(t){this.items[t]&&o(this.items[t]).setCss({display:"none"})},n.showItem=function(t){this.items[t]&&o(this.items[t]).setCss({display:""})},n.disableItem=function(t){this.items[t]&&o(this.items[t]).attr("disabled",!0)},n.enableItem=function(t){this.items[t]&&o(this.items[t]).removeAttr("disabled")},n.show=function(t){var e=r.D.node.body;if(this._canShow){this.hideFX.stop(),r.browser.fullScreen.enabled()&&(this._fullScreenBox||r.D.msFullscreenElement)&&(e=this._fullScreenBox||r.D.msFullscreenElement),this.overlay.appendTo(e),this.context.setCss({top:-1e4}).appendTo(e);var n=t.clientXY,i=n.x,o=n.y,s=t.pageXY;this._position.top=s.y,this._position.left=s.x;var a=function(t){var e=r.W.size,n=r.W.scroll;return{left:t=t||0,right:e.width-t,top:t,bottom:e.height-t,x:n.x,y:n.y}}(5),c=this.context.size;a.right<i+c.width&&(i-=c.width),a.bottom<o+c.height&&(o=a.bottom-c.height),this.context.setCss({top:o,left:i,display:"block",opacity:1}),this.active=!0}},n.hide=function(t){if(this.active&&(this.overlay.remove(),this.hideFX.start({opacity:[1,0]}),this.active=!1,t&&(t.stopDefaults(),"contextmenu"===t.type))){var e=t.pageXY,n=this.target.rect;n.left<=e.x&&n.right>=e.x&&n.top<=e.y&&n.bottom>=e.y&&this.show(t)}},n.destroy=function(){this.target.removeEvent("contextmenu",this.showBind),r.W.removeEvent("keydown",this.hideBind).removeEvent("scroll",this.hideOnScrollBind);try{this.context.kill()}catch(t){}try{this.overlay.kill()}catch(t){}},t.createClass(e,[{key:"position",get:function(){return{top:this._position.top,left:this._position.left}}},{key:"canShow",set:function(t){this._canShow=t}},{key:"fullScreenBox",set:function(t){this._fullScreenBox=t}}]),e}()})),Sirv.define("BaseInstance",["bHelpers","magicJS","EventEmitter","helper"],(function(t,e,n,i){var r=e,o=r.$,s=function(e){"use strict";function n(n,i,r){var s;(s=e.call(this)||this).defaultSchema=r,s._options=i,s.instanceNode=o(n),s.instanceUrl=s.instanceNode.attr("data-src")||s.instanceNode.attr("src")||s.instanceNode.attr("data-bg-src"),s.option=null,s.ready=!1,s.id=null,s.isCustomId=!1,s.isStartedFullInit=!1,s.isStarted=!1,s.destroyed=!1,s.referrerPolicy=s.instanceNode.attr("data-referrerpolicy")||s.instanceNode.attr("referrerpolicy")||"no-referrer-when-downgrade",s.instanceOptions=s.makeOptions(),s.createOptionFunction();var a=t.assertThisInitialized(s);return s.api={isReady:function(){return a.ready},resize:a.resize,getOptions:a.options},s}t.inheritsLoose(n,e);var s=n.prototype;return s.setOptions=function(t,e,n,i){return t.fromJSON(e),t.fromString(n),t.fromString(i),t},s.makeGlobalOptions=function(t){var e=this._options.options;return this.setOptions(t,e.common.common,e.local.common,this.instanceNode.attr("data-options")||"")},s.makeMobileOptions=function(t){var e=this._options.options;return this.setOptions(t,e.common.mobile,e.local.mobile,this.instanceNode.attr("data-mobile-options")||"")},s.makeOptions=function(){var t=new r.Options(this.defaultSchema);return t=this.makeGlobalOptions(t),r.browser.touchScreen&&r.browser.mobile&&(t=this.makeMobileOptions(t)),t},s.getOptionsForStartFullInit=function(t){t&&(this._options.options=t,this.instanceOptions=this.makeOptions(),this.createOptionFunction())},s.resize=function(){return!!this.ready&&this.onResize()},s.onResize=function(){return!0},s.checkImage=function(t,e){var n=this.imageClassContainer;return e?n.isExist(t):n.isLoaded(t)},s.getId=function(t,e){this.id=this.instanceNode.attr("id"),this.id||(this.isCustomId=!0,t||(t="component-"),e||(e="smv-"),this.id=e+t+i.generateUUID(),this.id=this.id.trim(),this.instanceNode.attr("id",this.id))},s.createOptionFunction=function(){var t=this;this.option=function(){return arguments.length>1?t.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):t.instanceOptions.get(arguments.length<=0?void 0:arguments[0])}},s.startFullInit=function(t){this.destroyed||this.isStartedFullInit||(this.isStartedFullInit=!0,this.getOptionsForStartFullInit(t))},s.run=function(){return!this.isStarted&&(this.isStarted=!0,!0)},s.done=function(){this.ready=!0},s.destroy=function(){this.destroyed=!0,this.isStarted=!1,this.ready=!1,this.isStartedFullInit=!1,this.isCustomId&&(this.instanceNode.removeAttr("id"),this.isCustomId=!1),this.instanceNode=null,e.prototype.destroy.call(this)},t.createClass(n,[{key:"options",get:function(){return this.instanceOptions.getJSON()}},{key:"imageClassContainer",get:function(){return{}}},{key:"originImageUrl",get:function(){return null}}]),n}(n);return s})),Sirv.define("Instance",["bHelpers","magicJS","globalVariables","BaseInstance","helper"],(function(t,e,n,i,r){var o=e,s=(o.$,function(t){return new Error("This method '"+t+"' is not implemented.")});return function(e){"use strict";function i(t,i,o){var s;return(s=e.call(this,t,i,o)||this).type=n.SLIDE.TYPES.NONE,s.always=i.always,s.quality=i.quality,s.hdQuality=i.hdQuality,s.isHDQualitySet=i.isHDQualitySet,s.isFullscreenEnabled=i.isFullscreen,s.dataAlt=null,s.isSlideShown=!1,s.isInView=!1,s.preload=!1,s.firstSlideAhead=!1,s.infoSize=null,s.pinchCloud=null,s.onLoad=!1,s.waitToStart=new r.WaitToStart,s.waitGettingInfo=new r.WaitToStart,s.gettingInfoPromise=null,s.fullscreenState=n.FULLSCREEN.CLOSED,s.on("stats",(function(t){t.data.component=n.SLIDE.NAMES[s.type]})),s}t.inheritsLoose(i,e);var a=i.prototype;return a.sendEvent=function(t,e){e||(e={}),e.event||(e.event={}),e.id=this.id,e.url=this.instanceUrl,e.event.timestamp=+new Date,e.event.type=n.SLIDE.NAMES[this.type]+":"+t,this.emit("componentEvent",{data:{type:t,data:e}})},a.onStartActions=function(){},a.onStopActions=function(){},a.onInView=function(t){},a.onBeforeFullscreenIn=function(t){},a.onAfterFullscreenIn=function(t){},a.onBeforeFullscreenOut=function(t){},a.onAfterFullscreenOut=function(t){},a.onMouseAction=function(t){},a.onSecondSelectorClick=function(){},a.onStopContext=function(){},a.loadContent=function(){return!0},a.loadThumbnail=function(){return!this.destroyed&&(this.waitToStart.start(),!0)},a.startGettingInfo=function(){return!this.destroyed&&(this.waitGettingInfo.start(),!0)},a.startFullInit=function(t){var n=this;this.isStartedFullInit||(e.prototype.startFullInit.call(this,t),t&&(this.always=t.always),this.dataAlt=this.instanceNode.attr("data-alt"),this.on("startActions",(function(t){t.stop(),n.isSlideShown=!0,n.onStartActions(t.who)})),this.on("stopActions",(function(t){t.stop(),n.isSlideShown=!1,n.onStopActions()})),this.on("inView",(function(t){t.stop();var e=t.data;n.onInView(e),n.isInView=e})),this.setEvents())},a.isFullscreenActionEnded=function(){return[n.FULLSCREEN.CLOSED,n.FULLSCREEN.OPENED].includes(this.fullscreenState)},a.setEvents=function(){var t=this;this.on("beforeFullscreenIn",(function(e){e.stop(),t.fullscreenState===n.FULLSCREEN.OPENED||t.destroyed||(t.fullscreenState=n.FULLSCREEN.OPENING,t.onBeforeFullscreenIn(e.data))})),this.on("afterFullscreenIn",(function(e){e.stop(),t.destroyed||(t.fullscreenState=n.FULLSCREEN.OPENED,t.onAfterFullscreenIn(e.data))})),this.on("beforeFullscreenOut",(function(e){e.stop(),t.fullscreenState===n.FULLSCREEN.CLOSED||t.destroyed||(t.fullscreenState=n.FULLSCREEN.CLOSING,t.onBeforeFullscreenOut(e.data))})),this.on("afterFullscreenOut",(function(e){e.stop(),t.destroyed||(t.fullscreenState=n.FULLSCREEN.CLOSED,t.onAfterFullscreenOut(e.data))}))},a.getSelectorImgUrl=function(t){return Promise.reject(s("getSelectorImgUrl"))},a.getInfoSize=function(){return Promise.reject(s("getInfoSize"))},a.run=function(t,n,i){var r=e.prototype.run.call(this);return r&&(this.isSlideShown=t,this.preload=n,this.firstSlideAhead=i,this.firstSlideAhead||this.waitToStart.start()),r},a.getThumbnailData=function(){return{src:null}},a.getSocialButtonData=function(t){var e=t;return(this.infoSize.width<t.width||this.infoSize.height<t.height)&&(e.width=this.infoSize.width,e.height=this.infoSize.height),this.getThumbnailData(e).src},a.createPinchEvent=function(t){var e=this,n={isAdded:!1,pinch:!1,scale:0,block:!1,onPinchStart:function(t){},onPinchResize:function(t){},onPinchMove:function(t){},onPinchEnd:function(t){n.pinch&&(n.pinch=!1,e.sendEvent("pinchEnd")),n.block=!1},handler:function(t){switch(t.state){case"pinchstart":n.onPinchStart(t);break;case"pinchresize":n.onPinchResize(t);break;case"pinchmove":n.onPinchMove(t);break;case"pinchend":n.onPinchEnd(t)}n.pinch&&t.stop()},addEvent:function(){!n.isAdded&&o.browser.touchScreen&&(t.addEvent("pinch",n.handler),n.isAdded=!0)},removeEvent:function(){n.isAdded&&(t.removeEvent("pinch",n.handler),n.isAdded=!1,n.block=!1,n.pinch=!1)}};n.addEvent(),this.pinchCloud=n},a.done=function(){var t=this;e.prototype.done.call(this),this.createPinchEvent(),this.on("resize",(function(e){e.stop(),t.onResize()})),this.on("stopContext",(function(e){e.stop(),t.onStopContext()})),this.on("secondSelectorClick",(function(e){e.stopAll(),t.onSecondSelectorClick()})),this.on("mouseAction",(function(e){e.stop(),t.onMouseAction(e.data.type)})),this.on("dragEvent",(function(e){e.stop(),t.pinchCloud&&("dragstart"===e.data.type?t.pinchCloud.removeEvent():"dragend"===e.data.type&&t.pinchCloud.addEvent())})),this.sendEvent("ready")},a.sendContentLoadedEvent=function(){this.onLoad||(this.onLoad=!0,this.sendEvent("contentLoaded"))},a.destroy=function(){this.off("stats"),this.off("startActions"),this.off("stopActions"),this.off("inView"),this.off("resize"),this.off("stopContext"),this.off("secondSelectorClick"),this.off("mouseAction"),this.off("dragEvent"),this.off("beforeFullscreenIn"),this.off("afterFullscreenIn"),this.off("beforeFullscreenOut"),this.off("afterFullscreenOut"),this.pinchCloud=null,this.isSlideShown=!1,e.prototype.destroy.call(this),this.waitGettingInfo.destroy(),this.waitGettingInfo=null,this.waitToStart.destroy(),this.waitToStart=null,this.gettingInfoPromise=null},i}(i)})),Sirv.define("HotspotInstance",["bHelpers","magicJS","Instance"],(function(t,e,n){var i=e.$,r=function(t,e){console.warn("sirv.js: The "+t+" method is deprecated and will be removed. \r\n           Use "+e+" instead.")};return function(e){"use strict";function n(n,i,o){var s;(s=e.call(this,n,i,o)||this).hotspots=null;var a=t.assertThisInitialized(s);return s.api=Object.assign(s.api,{addHotspot:function(t){r(".addHotspot()",".hotspots.add()"),a.hotspots.api.add(t),a.isInView&&a.isSlideShown&&a.hotspots.showNeededElements()},removeHotspot:function(t){r(".removeHotspot()",".hotspots.remove()"),a.hotspots.api.remove(t)},removeAllHotspots:function(){r(".removeAllHotspots()",".hotspots.removeAll()"),a.hotspots.api.removeAll()},getHotspots:function(){return r(".getHotspots()",".hotspots.list()"),a.hotspots.api.list()}}),s}t.inheritsLoose(n,e);var o=n.prototype;return o.createHotspotsClass=function(t,e){var n=this;this.hotspots=new t(e),this.hotspots.parentClass=this,this.on("hotspotActivate",(function(t){t.stopAll(),n.onHotspotActivate(t.data),n.sendEvent("hotspotOpened")})),this.on("hotspotDeactivate",(function(t){t.stopAll(),n.onHotspotDeactivate(t.data),n.sendEvent("hotspotClosed")})),this.api=Object.assign(this.api,{hotspots:this.hotspots.api});var i=this;this.api.hotspots.add=function(t){if(t){var e=null;if(!i.hotspots.api.list().length){var r=n.getParentContainer();e=i.hotspots.getRightBoundengClientRect(n.getContainerForBoundengClientRect()),i.hotspots.appendTo(r)}i.hotspots.addHotspot(t),i.hotspots.containerSize=e,i.hotspots.showAll(),i.isInView&&i.isSlideShown&&i.hotspots.showNeededElements()}}},o.getContainerForBoundengClientRect=function(){return this.getParentContainer()},o.done=function(){if(!this.ready&&!this.destroyed&&this.hotspots){var t=this.instanceNode;"img"===t.tagName&&(t=i(t.node.parentNode)),this.hotspots.appendTo(t),this.hotspots.createHotspots(this.hotspotsData),this.nativeFullscreen&&this.hotspots.changeBoxContainerParent(!0),this.hotspots.showAll()}e.prototype.done.call(this)},o.getParentContainer=function(){var t=this.instanceNode;return"img"===t.tagName&&(t=i(t.node.parentNode)),t},o.onHotspotActivate=function(t){},o.onHotspotDeactivate=function(t){},o.onStartActions=function(){this.hotspots&&this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements(),e.prototype.onStartActions.call(this)},o.onStopActions=function(){this.hotspots&&this.hotspots.hideActiveHotspotBox(!0),e.prototype.onStopActions.call(this)},o.onBeforeFullscreenIn=function(t){this.hotspots&&(this.hotspots.hideActiveHotspotBox(),this.nativeFullscreen&&this.hotspots.changeBoxContainerParent(!0))},o.onBeforeFullscreenOut=function(t){this.hotspots&&(this.hotspots.hideActiveHotspotBox(),this.nativeFullscreen&&this.hotspots.changeBoxContainerParent())},o.onAfterFullscreenOut=function(t){this.hotspots&&this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements()},o.destroy=function(){this.hotspots&&this.hotspots.destroy(),this.hotspots=null,this.off("hotspotActivate"),this.off("hotspotDeactivate"),e.prototype.destroy.call(this)},n}(n)})),Sirv.define("Loader",["bHelpers","magicJS","globalVariables","globalFunctions","helper","EventEmitter"],(function(t,e,n,i,r,o){var s=e,a=s.$;return function(e){"use strict";function n(t,n){var i;return(i=e.call(this)||this).parentNode=a(t),i.options=Object.assign({width:null,height:null,class:null},n||{}),i.node=s.$new("div").addClass("smv-loader"),i.type="simple",i.inDoc=!1,i.options.class&&i.node.addClass(i.options.class),i.options.width&&i.node.setCssProp("width",i.options.width),i.options.height&&i.node.setCssProp("height",i.options.height),i}t.inheritsLoose(n,e);var i=n.prototype;return i.append=function(){this.inDoc||(this.inDoc=!0,this.parentNode.append(this.node))},i.show=function(){this.append(),this.node.setCss({display:"",visibility:"visible"})},i.hide=function(){this.node.setCss({display:"none",visibility:"hidden"})},i.destroy=function(){this.hide(),this.node.remove(),this.node=null,this.inDoc=!1,e.prototype.destroy.call(this)},n}(o)})),Sirv.define("RoundLoader",["bHelpers","magicJS","globalVariables","globalFunctions","helper","Loader"],(function(t,e,n,i,r,o){var s=e,a=(s.$,"smv-show");return function(e){"use strict";function i(t,i){var r;return(r=e.call(this,t,i)||this).type="round",r.state=n.APPEARANCE.HIDDEN,r.timer=null,r.loaderElement=s.$new("div"),r.addClass(),r.node.append(r.loaderElement),r}t.inheritsLoose(i,e);var r=i.prototype;return r.addClass=function(){this.node.addClass("smv-round-loader")},r.isHiding=function(){return this.state===n.APPEARANCE.HIDING},r.show=function(){var t=this;[n.APPEARANCE.SHOWING,n.APPEARANCE.SHOWN].includes(this.state)||(this.state=n.APPEARANCE.SHOWING,this.timer=setTimeout((function(){t.timer=null,t.append(),t.node.removeEvent("transitionend"),t.node.addEvent("transitionend",(function(e){e.stop(),t.state=n.APPEARANCE.SHOWN})),t.node.render(),t.node.addClass(a)}),250))},r.hide=function(t){var e=this;(this.state!==n.APPEARANCE.HIDDEN||t)&&(clearTimeout(this.timer),this.node.removeEvent("transitionend"),this.state!==n.APPEARANCE.SHOWN&&(t=!0),this.state=n.APPEARANCE.HIDING,t?(this.node.remove(),this.inDoc=!1,this.state=n.APPEARANCE.HIDDEN):this.node.addEvent("transitionend",(function(t){t.stop(),e.node.remove(),e.inDoc=!1,e.state=n.APPEARANCE.HIDDEN})),this.node.removeClass(a))},r.destroy=function(){this.hide(!0),this.state=n.APPEARANCE.HIDDEN,this.node.innerHTML="",e.prototype.destroy.call(this)},i}(o)})),Sirv.define("ComponentLoader",["bHelpers","magicJS","globalVariables","globalFunctions","helper","RoundLoader"],(function(t,e,n,i,r,o){var s=e;s.$;return function(e){"use strict";function n(t,n){var i;return n=function(t){return t||(t={}),t.width||(t.width="100%"),t.height||(t.height="100%"),t}(n),(i=e.call(this,t,n)||this).type="component",i.loaderElement.addClass("smv-bounce-wrapper").append(s.$new("div").addClass("smv-bounce1")).append(s.$new("div").addClass("smv-bounce2")),i}t.inheritsLoose(n,e);var i=n.prototype;return i.addClass=function(){this.node.addClass("smv-component-loader")},i.destroy=function(){this.loaderElement.removeClass("smv-bounce-wrapper"),this.loaderElement.node.innerHTML="",e.prototype.destroy.call(this)},n}(o)})),Sirv.define("ResponsiveImage",["bHelpers","magicJS","globalVariables","globalFunctions","helper","EventEmitter"],(function(t,e,n,i,r,o){var s=e,a=s.$,c=function(t,e){var n=t+"?"+r.paramsToQueryString(e);return n=r.cleanQueryString(n)},h=function(){"use strict";function e(t,e,n,i,r,o){this._name=t,this._state=0,this.imageNode=null,this._size={width:0,height:0},this.loader=null,this.callbacks=[],this.srcSettings=n,this.srcsetSettings=i,this.dontLoad=r,this.dppx=this.srcsetSettings?this.srcsetSettings.dppx:1,this.referrerPolicy=o,""===n.profile&&delete n.profile,i&&""===i.profile&&delete i.profile,this._src=c(e,n),this._srcset=null,i&&(this._srcset=c(e,i.settings))}var n=e.prototype;return n.load=function(){var t=this;return new Promise((function(e,n){t.dontLoad||t._state?e(t):(t._state=1,t.imageNode=a(new Image),t.imageNode.attr("referrerpolicy",t.referrerPolicy||"no-referrer-when-downgrade"),t.imageNode.addEvent("load",(function(n){if(n.stop(),t._state=2,t._size={width:t.imageNode.node.naturalWidth||t.imageNode.node.width,height:t.imageNode.node.naturalHeight||t.imageNode.node.height},"safari"===s.browser.uaName){var i=!1;t.srcSettings.scale.width?t._size.width>t.srcSettings.scale.width+5&&(i=!0):t._size.height>t.srcSettings.scale.height+5&&(i=!0),i&&(t._size.width/=t.dppx,t._size.height/=t.dppx)}e(t)})),t.imageNode.addEvent("error",(function(e){e.stop(),t._state=3,t.imageNode=null,n(t)})),t.addSrc(),t.addSrcset(),t.imageNode.node.src=t._src)}))},n.addSrc=function(){this.imageNode.node.src=this._src},n.addSrcset=function(){this._srcset&&(this.imageNode.node.srcset=this._srcset+" "+this.dppx+"x")},n.destroy=function(){1===this._state&&this.imageNode&&this.imageNode.attr("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),this._state=0},t.createClass(e,[{key:"name",get:function(){return this._name}},{key:"node",get:function(){return this.imageNode}},{key:"size",get:function(){return this._size}},{key:"src",get:function(){return this._src}},{key:"srcset",get:function(){return this._srcset}},{key:"state",get:function(){return this._state}},{key:"DPPX",get:function(){return this.dppx}},{key:"loading",get:function(){return 1===this._state}}]),e}(),u=function(e){"use strict";function n(t,n,i,r,o,s,a){var c;return(c=e.call(this,t,n,i,r,o,s)||this)._tileName=a,c}return t.inheritsLoose(n,e),n.prototype.addSrc=function(){1===this.dppx&&e.prototype.addSrc.call(this)},t.createClass(n,[{key:"tileName",get:function(){return this._tileName}}]),n}(h),l=function(t,e){var n,i=Object.assign({},t);return delete i.src,delete i.srcset,i.imageSettings=Object.assign({},(null==t?void 0:t.imageSettings)||{}),e>1&&((n=JSON.parse(JSON.stringify(i))).width&&(n.width=parseInt(n.width*e,10)),n.height&&(n.height=parseInt(n.height*e,10)),n.imageSettings.crop&&(n.imageSettings.crop.width&&(n.imageSettings.crop.width=parseInt(n.imageSettings.crop.width*e,10)),n.imageSettings.crop.height&&(n.imageSettings.crop.height=parseInt(n.imageSettings.crop.height*e,10))),n.dppx=e),i.imageSettings=Object.assign(i.imageSettings,t.src),n&&t.srcset&&(n.imageSettings=Object.assign(n.imageSettings,t.srcset)),{src:i,srcset:n}},d=function(t){return(100*t).toFixed(4)+"%"},f=function(t,e){return t&&t.crop&&t.crop[e]?t.crop[e]:null},p={};return function(e){"use strict";function n(t,n){var i;return i=e.call(this)||this,"string"!==s.typeOf(t)&&(t=a(t).attr("src")),i.o=Object.assign({type:"main",infoId:"sirv-image-"+r.generateUUID(),imageSettings:{},round:!0,dontLoad:!1,convertSmallerSideToZero:!0,referrerPolicy:"no-referrer-when-downgrade",loadNewImage:!1},n),i.imageInfoPromise=null,i.images={},i._originUrl=function(t){return t.split("?")[0]}(s.getAbsoluteURL(t)),i.infoUrl=i._originUrl+"?nometa&info",i.imageSettings=Object.assign({},i.o.imageSettings),i}t.inheritsLoose(n,e),n.roundImageSize=function(t,e){var n;return e||(e={width:Number.MAX_VALUE,height:Number.MAX_VALUE}),t.width&&t.height?t.width>=t.height?(n=r.roundSize(t.width))<=e.width&&(t.height=Math.floor(t.height/t.width*n),t.width=n):(n=r.roundSize(t.height))<=e.height&&(t.width=Math.floor(t.width/t.height*n),t.height=n):t.width?(n=r.roundSize(t.width))<=e.width&&(t.width=n):t.height&&(n=r.roundSize(t.height))<=e.height&&(t.height=n),t};var i=n.prototype;return i._convertImageSettings=function(t){var e=function(t,e){e.width&&(t.width=e.width),e.height&&(t.height=e.height)};t||(t={}),t=Object.assign({},t);var i=this.getClearSizeWithoutProcessingSettings({width:t.width,height:t.height});e(t,i);var r=l(t,t.dppx);if(t.round||!t.hasOwnProperty("round")&&this.o.round){var o=this.originSize;e(r,i=n.roundImageSize(r.src,o)),r.srcset&&e(r,i=n.roundImageSize(r.srcset,o))}return r},i._mixSettings=function(t){return e=p[this.o.infoId],n=this.imageSettings,i=t,o=r.deepExtend({},n),e&&e.imageSettings.processingSettings&&(o.crop||(o.crop={}),o.crop=r.deepExtend(o.crop,e.cropSettings),o.canvas||(o.canvas={}),o.canvas=r.deepExtend(o.canvas,e.canvasSettings),o.frame||(o.frame={}),o.frame=r.deepExtend(o.frame,e.frameSettings),o.scale||(o.scale={}),o.scale.option||(o.scale.option="fill")),i.width&&"auto"!==i.width&&(o.scale.width=i.width),i.height&&"auto"!==i.height&&(o.scale.height=i.height),i.imageSettings&&(o=r.deepExtend(o,i.imageSettings)),o;var e,n,i,o},i._calcProcessingSettings=function(){var t=p[this.o.infoId],e={},n={},i={};t.imageSettings.viewer||(t.imageSettings.viewer={});var r=t.imageSettings.viewer,o={width:t.imageSettings.original.width,height:t.imageSettings.original.height,widthScale:1,heightScale:1};r.scale&&(r.scale.width&&(o.width*=r.scale.width),r.scale.height&&(o.height*=r.scale.height)),o.widthScale=o.width/t.imageSettings.width,o.heightScale=o.height/t.imageSettings.height,r.crop&&(r.crop.width&&(e.width=d(r.crop.width)),r.crop.height&&(e.height=d(r.crop.height)),r.crop.x&&(e.x=d(r.crop.x)),r.crop.y&&(e.y=d(r.crop.y))),r.canvas&&(r.canvas.width&&(n.width=d(r.canvas.width)),r.canvas.height&&(n.height=d(r.canvas.height)),r.canvas.border&&(n.border={},r.canvas.border.width&&(n.border.width=d(r.canvas.border.width)),r.canvas.border.height&&(n.border.height=d(r.canvas.border.height)))),r.frame&&r.frame.width&&(i.width=d(r.frame.width)),t=Object.assign(t,{cropSettings:e,canvasSettings:n,frameSettings:i,originSize:o})},i._addImage=function(t,e){var n=this,i=s.defined(e.src.dontLoad)?e.src.dontLoad:this.o.dontLoad,r=function(t){var e=n._mixSettings(t);return e.scale&&e.scale.width&&e.scale.height&&"ignore"!==e.scale.option&&(e.scale.width>=e.scale.height?n.o.convertSmallerSideToZero&&(e.scale.height=0):n.o.convertSmallerSideToZero&&(e.scale.width=0)),e},o=r(e.src),a=null,c=null;e.src.imageSettings&&e.src.imageSettings.tile&&(c=e.src.imageSettings.tile.number+"");e.srcset&&(a={dppx:e.srcset.dppx,settings:r(e.srcset)});var l=null;return l=null===c?new h(t,this._originUrl,o,a,i,this.o.referrerPolicy):new u(t,this._originUrl,o,a,i,this.o.referrerPolicy,c),this.images[t]={serverWidth:e.src.width,serverHeight:e.src.height,image:l},this.images[t]},i._load=function(t,e){var n,i,r=this;this._addImage(t,e).image.load().then((function(t){n="imageOnload",(i=t)instanceof h&&(r.someImageIsLoaded=!0)})).catch((function(t){i=t,n="imageOnerror"})).finally((function(){i instanceof h&&(r.someImageIsComplete=!0);var t=r.images[i.name];t&&r.emit(n,{data:r._createImageData(t,e.src.callbackData)})}))},i._createImageData=function(t,e){var n=t.image;return{callbackData:e,name:n.name,tileName:n.tileName,tile:n instanceof u,node:n.node,serverWidth:t.serverWidth,serverHeight:t.serverHeight,width:n.size.width,height:n.size.height,src:n.src,srcset:n.srcset,state:n.state,dppx:n.DPPX||1}},i.getCropPosition=function(){var t=p[this.o.infoId],e=f(this.imageSettings,"x");e&&!/%$/.test(e)&&(e=d(e/t.originSize.width));var n=f(this.imageSettings,"y");return n&&!/%$/.test(n)&&(n=d(n/t.originSize.height)),{x:e||t.cropSettings.x,y:n||t.cropSettings.y,type:f(this.imageSettings,"type")||f(t.imageSettings.processingSettings,"type")}},i.isExist=function(t){t=this._convertImageSettings(t);var e=this.generateImageName(t.src),n=Object.prototype.hasOwnProperty.call(this.images,e);if(!n&&(!t.src.imageSettings||!t.src.imageSettings.tile)&&t.src.width){var i=Object.entries(this.images).filter((function(t){return t[1].image instanceof u==!1})).map((function(t){return t[1]}));n=this._getBiggerImage(t.src.width,i)}return!!n},i.isLoaded=function(t){t=this._convertImageSettings(t);var e=this.images[this.generateImageName(t.src)];return e&&(e=2===e.image.state),!!e},i.loadInfo=function(){var t=this;return this.imageInfoPromise||(this.imageInfoPromise=new Promise((function(e,n){var i=t._originUrl,o=s.getHashCode(t.infoUrl.replace(/^http(s)?:\/\//,"")),a=r.paramsToQueryString(t.imageSettings);""!==a?(i+="?"+a,i+="&"):i+="?",i+="nometa&info=sirv_image_info_"+o+"_"+t.o.type,i=r.cleanQueryString(i),r.getRemoteData(i,"image_info_"+r.generateUUID(),t.o.referrerPolicy).then((function(i){!i.width||i._isplaceholder?n(i):(p[t.o.infoId]={imageSettings:i},t._calcProcessingSettings(),e(p[t.o.infoId]))})).catch(n)}))),this.imageInfoPromise},i._getBiggerImage=function(t,e,n){return t||(t=0),e||(e=this.images),n===s.U&&(n=this.o.dontLoad),Object.entries(e).map((function(t){return t[1]})).sort((function(t,e){return t.serverWidth-e.serverWidth})).find((function(e){return t<e.serverWidth&&(2===e.image.state||n)}))||null},i.sendLoad=function(t){t=this._convertImageSettings(t);var e=this.images[this.generateImageName(t.src)];e||(e=this._getBiggerImage(t.src.width)),this.emit("imageOnload",{data:this._createImageData(e,t.src.callbackData)})},i.cancelLoadingImage=function(t){t=this._convertImageSettings(t);var e=this.generateImageName(t.src),n=this.images[e];n&&n.image.loading&&(n.image.destroy(),delete this.images[e])},i.generateImageName=function(t){var e,n;return e=r.cleanQueryString(this._originUrl+"?"+r.paramsToQueryString(this._mixSettings(t))),n=(e=e.replace("?+","?").replace("&+","&").split("?"))[1],e=e[0],n=n.split("&").sort(),""+s.getHashCode(e+"?"+n.join("&"))},i.getClearSizeWithoutProcessingSettings=function(t){var e={},n=p[this.o.infoId];return t.width&&(e.width=Math.round(t.width*n.originSize.widthScale)),t.height&&(e.height=Math.round(t.height*n.originSize.heightScale)),e},i.getImage=function(t){var e=this._convertImageSettings(t),n=s.defined(e.src.dontLoad)?e.src.dontLoad:this.o.dontLoad,i=this.generateImageName(e.src),r=this.images[i];return r||this._load(i,Object.assign({},e)),r&&r.image.state<2&&!n&&(r=null),r||!e.src.maxSize&&this.o.loadNewImage||(e.src.exactSize?n&&(r=this.images[i]):r=this._getBiggerImage(null,null,n)),r&&(r=this._createImageData(r,e.src.callbackData)),r},i.getProcessingSettings=function(){var t=p[this.o.infoId];return{crop:t.cropSettings,cropClear:t.cropSettingsClear,canvas:t.canvasSettings,canvasClear:t.canvasSettingsClear}},i.getThumbnail=function(t){var e=this,n={imageSettings:null,size:null,src:null,srcset:null};if(p[this.o.infoId]){var i=l(t,s.DPPX),o=null,a=this.o.convertSmallerSideToZero,c=t.originUrl||this._originUrl,h=function(n,i){var o={scale:{option:"fill"}};if(n.width||n.height)if(n.width&&n.height)o.scale.width=n.width,o.scale.height=n.height;else{var s=n.width||n.height;o.scale.width=s,o.scale.height=s}n.width===n.height&&(t.crop?o.crop={x:"center",y:"center",width:n.width,height:n.height}:(o.scale.option="fit",o.canvas||(o.canvas={}),o.canvas.width=n.width,o.canvas.height=n.height)),o.scale&&(t.width&&t.height?p[e.o.infoId].imageSettings.original.width>=p[e.o.infoId].imageSettings.original.height?a&&(o.scale.height=0):a&&(o.scale.width=0):t.width?a&&(o.scale.height=0):t.height&&a&&(o.scale.width=0)),i&&(o=Object.assign(o,i));var c=o;return(o={}).imageSettings=c,(o=e._mixSettings(o)).text&&delete o.text,!t.watermark&&o.watermark&&delete o.watermark,r.paramsToQueryString(o)},u=function(t){var e={};return t.width&&(e.width=t.width),t.height&&(e.height=t.height),e};(i.src.crop||i.src.width&&i.src.height)&&(a=!1),n={callbackData:t.callbackData,size:u(i.src.imageSettings),src:r.cleanQueryString(c+"?"+h(u(i.src),i.src.imageSettings))},s.DPPX>1&&(o=h(u(i.srcset),i.srcset.imageSettings))&&(n.srcset=r.cleanQueryString(c+"?"+o))}return n},i.destroy=function(){Object.values(this.images).forEach((function(t){return t.image.destroy()})),this.images={},this.someImageIsLoaded=!1,this.someImageIsComplete=!1,p[this.infoId]&&(delete p[this.infoId],this.infoId=null),e.prototype.destroy.call(this)},t.createClass(n,[{key:"ready",get:function(){return this.someImageIsLoaded}},{key:"complete",get:function(){return this.someImageIsComplete}},{key:"originSize",get:function(){var t,e,n=null,i=null;(p[this.o.infoId]&&(i=p[this.o.infoId].imageSettings),i)&&(i.processingSettings?(t=i.width,e=i.height):(t=i.original.width,e=i.original.height),n={width:t,height:e});return n}},{key:"originUrl",get:function(){var t=null;return this._originUrl&&(t=this._originUrl),t}},{key:"description",get:function(){var t=null,e=p[this.o.infoId];return e&&(t=e.imageSettings.original.description||null),t}},{key:"accountInfo",get:function(){var t={},e=p[this.o.infoId];return e&&(t.account=e.imageSettings.account,t.branded=e.imageSettings.branded),t}}]),n}(o)})),Sirv.define("SliderBuilder",["bHelpers","magicJS","EventEmitter","helper","globalVariables","globalFunctions"],(function(t,e,n,i,r,o){var s=e,a=s.$;return function(){"use strict";function t(t,e){this.mainNode=a(e),this.sirvOptions=i.deepExtend({},t||{}),this.nodes=[],this.configURL=null,this.dataJSON=null,this.configHash=null,this.attrbMainNode=null,this.cfCallbackName=null,this.urlParams=null,this.componentsList=[],this.referrerPolicy=this.mainNode.attr("data-referrerpolicy")||this.mainNode.attr("referrerpolicy")||"no-referrer-when-downgrade"}var e=t.prototype;return e.getOptions=function(){var t=this;return new Promise((function(e,n){var o,a;t.checkNode()?(t.buildCallBackName(),i.getRemoteData((o=t.configURL,a=t.cfCallbackName,o+(s.stringHas(o,"?")?"&":"?")+"nometa&info="+a),t.cfCallbackName,t.referrerPolicy).then((function(n){if(n&&n.assets)t.dataJSON=n,t.buildOptions(),e({dataOptions:t.sirvOptions});else{var i=r.SLIDE.TYPES.IMAGE;n.layers&&(i=r.SLIDE.TYPES.SPIN),e({content:i,dataOptions:t.sirvOptions})}})).catch((function(e){t.configURL,n({error:t.configURL,dataOptions:t.sirvOptions})}))):e({dataOptions:t.sirvOptions})}))},e.buildViewer=function(){var t=this;return new Promise((function(e,n){if(t.dataJSON){var i=/(^https?:\/\/[^/]*)([^#?]*)\/.*$/.exec(t.configURL),r=t.dataJSON.dirname||i[2];t.prepareListComponents(t.dataJSON.assets,i[1],r),t.generateComponents(),t.addAllComponents()}e({mainNode:t.mainNode})}))},e.prepareListComponents=function(t,e,n){var i=this;t.forEach((function(t){var s,a=/^(https?:)?\/\/[^/]/.test(t.name);s=a?t.name:/^\//.test(t.name)?e+t.name:e+n+"/"+t.name,i.componentsList.push({path:a?s:o.normalizeURL(s),type:r.SLIDE.NAMES.indexOf(t.type),is3rd:a})}))},e.checkNode=function(){var t=!1;return this.mainNode&&(this.attrbMainNode=this.mainNode.attr("data-src"),this.attrbMainNode&&/([^#?]+)\/?([^#?]+\.view)(\?([^#]*))?(#(.*))?$/.test(this.attrbMainNode)&&(t=!0)),t},e.buildOptions=function(){this.sirvOptions.common=i.deepExtend(this.sirvOptions.common,this.dataJSON.settings||{}),this.sirvOptions.mobile=i.deepExtend(this.sirvOptions.mobile,this.dataJSON.settings||{})},e.buildCallBackName=function(){this.configURL=o.normalizeURL(this.attrbMainNode.replace(r.REG_URL_QUERY_STRING,"$1")),this.urlParams=this.attrbMainNode.replace(r.REG_URL_QUERY_STRING,"$2"),this.urlParams&&(this.configURL+="?"+this.urlParams),this.configHash=s.getHashCode(this.configURL.replace(/^http(s)?:\/\//,"")),this.cfCallbackName="view-1_"+this.configHash},e.generateComponents=function(){var t=this;this.componentsList.forEach((function(e){var n=s.$new("div");e.type===r.SLIDE.TYPES.IMAGE&&(e.is3rd?(n=s.$new("img")).attr("data-type","static"):n.attr("data-type","zoom"));var i=e.path;t.urlParams&&(i+="?"+t.urlParams),n.attr("data-src",i),t.nodes.push(n)}))},e.addAllComponents=function(){var t=this;this.mainNode.node.innerHTML="",this.nodes.forEach((function(e){t.mainNode.node.appendChild(e.node)}))},e.destroy=function(){this.mainNode=null,this.sirvOptions=null,this.nodes=[],this.configURL=null,this.dataJSON=null,this.configHash=null,this.cfCallbackName=null,this.componentsList=[]},t}()})),Sirv.define("getDPPX",["bHelpers","magicJS","helper","ResponsiveImage"],(function(t,e,n,i){var r=e;r.$;return function(t,e,o,s,a,c){var h=1;if(r.DPPX>1)if(e>t){var u=a?i.roundImageSize({height:e}).height:e;h=n.getDPPX(u,s,c)}else{var l=a?i.roundImageSize({width:t}).width:t;h=n.getDPPX(l,o,c)}return h}})),Sirv.define("ViewerImage",["bHelpers","magicJS","globalVariables","globalFunctions","helper","ResponsiveImage","HotspotInstance","Hotspots","getDPPX"],(function(t,e,n,i,r,o,s,a,c){var h=e,u=h.$;return function(e){"use strict";function s(t,o){var s;return(s=e.call(this,t,o,{})||this).type=n.SLIDE.TYPES.IMAGE,s.instanceNode.attr("referrerpolicy",s.referrerPolicy),s.image=null,s.isInfoLoaded=!1,s.getImageInfoPromise=null,s.loadStaticImagePromise=null,s.imageShowPromise=null,s.srcWasSetted=!1,s.lastImageSize={width:0,height:0},s.imageIndex=o.imageIndex,s.dppx=1,s.upscale=!1,s.size={width:0,height:0},s.dontLoad=!0,s.accountInfo={},s.countOfTries=1,s.isFullscreen=o.isFullscreen,s.nativeFullscreen=o.nativeFullscreen,s.infoAlt=null,s.originAlt=s.instanceNode.attr("alt"),s.originTitle=s.instanceNode.attr("title"),s.src=s.instanceNode.attr("src"),s.srcset=s.instanceNode.attr("srcset"),s.startedSrc=s.src,s.dataSrc=s.instanceNode.attr("data-src"),s.isStaticImage=s.src&&!s.dataSrc,s.imageUrl=s.dataSrc||s.src,s.getImageTimer=r.debounce((function(){s.getImage()}),32),s.firstSlideAhead=!1,s.src=i.normalizeURL(s.imageUrl.replace(n.REG_URL_QUERY_STRING,"$1")),s.queryParamsQuality=null,s.queryParams=r.paramsFromQueryString(s.imageUrl.replace(n.REG_URL_QUERY_STRING,"$2")),s.getQueryParams(),s.isNotSirv=!1,r.isSVG(s.imageUrl)&&(s.isNotSirv=!0),s.createHotspotsClass(a),s.createSirvImage(),s}t.inheritsLoose(s,e);var l=s.prototype;return l.sendEvent=function(t,n){n||(n={}),n.imageIndex=this.imageIndex,e.prototype.sendEvent.call(this,t,n)},l.getInfo=function(){var t=this;return this.gettingInfoPromise||(this.gettingInfoPromise=new Promise((function(e,n){t.waitGettingInfo.wait((function(){t.image.loadInfo().then((function(n){t.destroyed||(t.isInfoLoaded=!0,t.infoAlt=t.image.description,t.infoSize=t.image.originSize,t.accountInfo=t.image.accountInfo,t.hotspotsData=n.hotspots,t.hotspots&&(t.hotspots.originImageSize=t.infoSize),e())})).catch((function(e){t.destroyed||(t.isInfoLoaded=!0,e.status&&404===e.status||(t.isNotSirv=!0),n(e))}))}))}))),this.gettingInfoPromise},l.getQueryParams=function(){if(this.imageUrl){if(this.queryParams){var t=parseInt(this.queryParams.quality,10);isNaN(t)?delete this.queryParams.quality:this.queryParams.quality=t}this.queryParamsQuality=this.queryParams.quality||null}},l.getImageCreateSettings=function(){var t={src:{},srcset:{}};null!==this.quality&&null===this.queryParamsQuality&&(t.src.quality=this.quality);var e=this.hdQuality;return(null===this.queryParamsQuality||this.isHDQualitySet&&e<this.queryParamsQuality)&&(t.srcset={quality:e}),t.width=this.size.width,this.size.height&&(t.height=this.size.height),t=r.imageLib.checkMaxSize(t,this.infoSize),this.infoSize.width!==t.width&&this.infoSize.height!==t.height||(t.round=!1),h.DPPX>1&&(t.dppx=this.dppx),t},l.setHDQuality=function(t){return t.dppx>1&&t.dppx<1.5&&(null===this.queryParamsQuality&&null!==this.quality?t.srcset.quality=this.quality:t.srcset&&delete t.srcset.quality),t},l.replaceSrc=function(){var t;if(this.isNotSirv){if(this.srcWasSetted)return;this.srcWasSetted=!0,t={src:this.imageUrl}}else{var e=this.getImageCreateSettings();e.dppx>1&&e.dppx<1.5&&delete e.srcset.quality,e=this.setHDQuality(e),t=this.image.getImage(e),this.lastImageSize.width=t.width||t.serverWidth,this.lastImageSize.height=t.height||t.serverHeight}this.instanceNode.attr("src",t.src),t.srcset?!this.isNotSirv&&this.dppx>1&&this.instanceNode.attr("srcset",t.srcset+" "+this.dppx+"x"):this.instanceNode.removeAttr("srcset")},l.showImage=function(){var t=this;return this.imageShowPromise||(this.imageShowPromise=new Promise((function(e,n){t.isStaticImage?(t.instanceNode.setCssProp("opacity",""),e()):t.isInView&&t.isSlideShown?(t.instanceNode.addEvent("transitionend",(function(n){"opacity"===n.propertyName&&(n.stop(),t.instanceNode.removeEvent("transitionend"),t.instanceNode.setCss({opacity:"",transition:""}),e())})),t.instanceNode.render(),t.instanceNode.setCss({opacity:1,transition:"opacity 0.3s linear"})):(t.instanceNode.setCssProp("opacity",""),e())}))),this.imageShowPromise},l.createSirvImage=function(){var t=this;this.imageUrl&&!this.isNotSirv&&(this.on("imageOnload",(function(e){e.stopAll(),t.replaceSrc(),t.ready||(e.data.node?t.showImage().finally((function(){t.done()})):r.loadImage(t.instanceNode).finally((function(){t.showImage().finally((function(){t.done(),t.sendContentLoadedEvent()}))})))})),this.on("imageOnerror",(function(t){t.stopAll(),console.log("image error")})),this.image=new o(this.imageUrl,{imageSettings:this.queryParams,round:!0,dontLoad:this.dontLoad,referrerPolicy:this.referrerPolicy}),this.image.parentClass=this,this.getInfo())},l.getInfoSize=function(){var t=this;return this.getImageInfoPromise||(this.getImageInfoPromise=new Promise((function(e,n){t.image?t.getInfo().then((function(){e({size:t.infoSize,imageIndex:t.imageIndex})})).catch((function(e){n({error:e,isPlaceholder:e._isplaceholder,imageIndex:t.imageIndex})})):n({error:"nonsirv",isPlaceholder:!1,imageIndex:t.imageIndex})}))),this.getImageInfoPromise},l.startFullInit=function(t){this.isStartedFullInit||(e.prototype.startFullInit.call(this,t),this.getId("responsive-image-"),this.isStaticImage||this.instanceNode.setCssProp("opacity",0))},l.run=function(t,n,i,o){var s=this;this.firstSlideAhead=i;var a=e.prototype.run.call(this,t,n,i);if(a)if(this.destroyed)a=!1;else{this.instanceNode.removeAttr("alt"),this.instanceNode.removeAttr("title"),this.instanceNode.setCss({display:"inline-flex"}).render(),this.instanceNode.setCss({display:""}).render();var c=null;r.imageLib.getSize(this.instanceNode.node.parentNode).then((function(t){c=t})).finally((function(){s.destroyed||(c.width&&c.height<=20&&(c.height=0),s.size=r.imageLib.calcProportionSize(c,s.infoSize),(s.originAlt||s.infoAlt)&&u(s.instanceNode).attr("alt",s.originAlt||s.infoAlt),s.originTitle&&u(s.instanceNode).attr("title",s.originTitle),s.isStaticImage?s.loadStaticImage().finally((function(){s.isInfoLoaded&&s.done()})):(s.originAlt&&u(s.instanceNode).attr("alt",s.originAlt),s.isInView&&(s.isSlideShown||s.preload||o)&&s.getImage()),s.dataAlt&&u(s.instanceNode).attr("alt",s.dataAlt))})),this.startGettingInfo()}return a},l.loadContent=function(){this.getImage(!0)},l.loadStaticImage=function(){var t=this;return this.loadStaticImagePromise||(this.loadStaticImagePromise=new Promise((function(e,n){t.isStaticImage?t.instanceNode.node.complete?e():(t.instanceNode.addEvent("load",(function(n){t.sendContentLoadedEvent(),e()})),t.instanceNode.addEvent("error",(function(t){n()}))):e()}))),this.loadStaticImagePromise},l.getImage=function(t){var e=this;this.isStaticImage||(this.isNotSirv||this.ready||this.size.width||this.size.height?(this.waitToStart.start(),this.isNotSirv?this.replaceSrc():this.getSirvImg()):this.countOfTries<100&&setTimeout((function(){e.countOfTries+=1,e.isStarted=!1,e.run(e.isSlideShown,e.preload,e.firstSlideAhead,t)}),16*this.countOfTries))},l.getSirvImg=function(){var t=this.getImageCreateSettings();if(h.DPPX>1){var e=this.image.originSize;this.dppx=c(t.width,t.height,e.width,e.height,!h.defined(t.round)||t.round,this.upscale),t.dppx=this.dppx}t=this.setHDQuality(t),this.checkImage(t,this.dontLoad)?this.replaceSrc():this.image.getImage(t)},l.done=function(){if(!this.ready){if(this.accountInfo.branded){var t=this.instanceNode;"img"===t.tagName&&(t=t.node.parentNode);var n=i.getNodeWithSirvClassName(this.instanceNode)||h.D.node.head||h.D.node.body;i.rootDOM.showSirvAd(n,t,"https://sirv.com/about-image/?utm_source=client&utm_medium=sirvembed&utm_content=typeofembed(image)&utm_campaign=branding","Image viewer by Sirv")}e.prototype.done.call(this),this.hotspots&&(this.hotspots.containerSize=this.instanceNode.node.getBoundingClientRect()),this.isFullscreenEnabled||(this.pinchCloud.removeEvent(),this.pinchCloud=null)}},l.getSelectorImgUrl=function(t){var e=this;return new Promise((function(n,i){var r=e.getImageCreateSettings();r.src&&(t.src=r.src),t.srcset=r.srcset,e.isInfoLoaded?e.waitToStart.wait((function(){n(Object.assign(e.image.getThumbnail(t),{imageIndex:e.imageIndex,alt:e.dataAlt||e.originAlt||e.infoAlt,referrerpolicy:e.instanceNode.attr("referrerpolicy")}))})):e.getInfo().then((function(){e.waitToStart.wait((function(){n(Object.assign(e.image.getThumbnail(t),{imageIndex:e.imageIndex,alt:e.dataAlt||e.originAlt||e.infoAlt,referrerpolicy:e.instanceNode.attr("referrerpolicy")}))}))})).catch(i)}))},l.getThumbnailData=function(t){return this.image.getThumbnail(t)},l.createPinchEvent=function(){var t=this;e.prototype.createPinchEvent.call(this,this.instanceNode),this.pinchCloud.onPinchStart=function(e){[n.FULLSCREEN.OPENING,n.FULLSCREEN.CLOSING].includes(t.fullscreenState)||(t.pinchCloud.pinch=!0,t.pinchCloud.scale=e.scale,t.sendEvent("pinchStart"))},this.pinchCloud.onPinchMove=function(e){t.pinchCloud.pinch&&!t.pinchCloud.block&&(t.fullscreenState===n.FULLSCREEN.OPENED?e.scale<.2&&(t.pinchCloud.block=!0,t.sendEvent("fullscreenOut")):e.scale>=2&&(t.pinchCloud.block=!0,t.sendEvent("fullscreenIn")))}},l.onStartActions=function(){this.ready||this.isInView&&this.isStarted&&(this.fullscreenState===n.FULLSCREEN.OPENED&&this.onResize(),this.always?this.getImageTimer():this.getImage()),e.prototype.onStartActions.call(this)},l.onStopActions=function(){e.prototype.onStopActions.call(this)},l.onInView=function(t){t&&!this.isStaticImage&&(this.ready||this.isInView||this.isStarted&&(this.isInView=!0,this.isInfoLoaded&&(this.preload||this.isSlideShown)&&this.getImage()))},l.onBeforeFullscreenIn=function(t){this.getImageTimer.cancel(),this.ready&&!this.isStaticImage&&this.instanceNode.setCssProp("visibility","hidden"),e.prototype.onBeforeFullscreenIn.call(this,t),this.hotspots&&this.hotspots.disableAll()},l.onAfterFullscreenIn=function(t){var e=this;this.always&&!this.ready&&this.isInView&&this.isStarted&&(this.onResize(),this.getImage()),this.hotspots&&setTimeout((function(){e.fullscreenState===n.FULLSCREEN.OPENED&&(e.hotspots.enableAll(),e.isInView&&e.isSlideShown&&e.hotspots.showNeededElements())}),100)},l.onBeforeFullscreenOut=function(t){this.instanceNode.setCss({width:"",height:"",visibility:""}),e.prototype.onBeforeFullscreenOut.call(this,t)},l.onAfterFullscreenOut=function(t){e.prototype.onAfterFullscreenOut.call(this,t)},l.onResize=function(){if(!this.isStarted||this.isStaticImage||this.isNotSirv)return!1;if(this.isFullscreenActionEnded()){var t=u(this.instanceNode.node.parentNode).size;if(t=r.imageLib.calcProportionSize(t,this.infoSize),this.fullscreenState===n.FULLSCREEN.OPENED&&(this.instanceNode.setCss({width:t.width+"px",height:t.height+"px"}),this.instanceNode.setCssProp("visibility","")),this.size.width=t.width,this.size.height&&(this.size.height=t.height),this.ready){(this.size.width-this.lastImageSize.width>50||this.size.height-this.lastImageSize.height>50)&&this.getImage(),this.hotspots&&(this.hotspots.containerSize=this.instanceNode.node.getBoundingClientRect(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements())}return!0}return!1},l.destroy=function(){if(this.image&&(this.off("imageOnload"),this.off("imageOnerror"),this.image.destroy(),this.image=null),this.getImageTimer.cancel(),this.getImageTimer=null,this.instanceNode.setCssProp("opacity",""),this.hotspot&&u(this.instanceNode.node.parentNode).removeEvent("tap"),this.instanceNode.node.hasAttribute("src"))try{this.instanceNode.removeAttr("src"),this.isStaticImage&&this.instanceNode.attr("src",this.imageUrl)}catch(t){}if(this.isStaticImage?this.instanceNode.attr("src",this.src):this.instanceNode.removeAttr("src"),this.srcset)this.instanceNode.attr("srcset",this.srcset);else try{this.instanceNode.removeAttr("srcset")}catch(t){}return this.srcset=null,this.originAlt||!this.infoAlt&&!this.dataAlt||this.instanceNode.removeAttr("alt"),this.instanceNode.removeEvent("load"),this.hotspotsData=null,e.prototype.destroy.call(this),!0},t.createClass(s,[{key:"imageClassContainer",get:function(){return this.image}},{key:"originImageUrl",get:function(){return this.src}}]),s}(s)})),Sirv.define("defaultsVideoOptions",{autoplay:{type:"boolean",defaults:!1},loop:{type:"boolean",defaults:!1},volume:{type:"number",minimum:0,maximum:100,defaults:100},preload:{type:"boolean",defaults:!0},thumbnail:{oneOf:[{type:"url"},{type:"boolean",enum:[!1]},{type:"number",minimum:0}],defaults:!1},motionFactor:{type:"number",minimum:1,maximum:4,defaults:3},dynamicAdaptiveStreaming:{type:"boolean",defaults:!0},quality:{min:{type:"number",enum:[360,480,720,1080],defaults:360},max:{type:"number",enum:[360,480,720,1080],defaults:1080}},controls:{enable:{type:"boolean",defaults:!0},volume:{type:"boolean",defaults:!0},speed:{type:"boolean",defaults:!1},quality:{type:"boolean",defaults:!1},fullscreen:{type:"boolean",defaults:!0}}});
Sirv.define("Hotspot",["bHelpers","globalFunctions","magicJS","EventEmitter","helper"],(function(t,o,i,s,e){var n=i,h=n.$;o.rootDOM.addModuleCSSByName("Hotspot",(function(){return"@charset \"UTF-8\";.sirv-hotspot-pointer{display:inline-block;position:absolute;width:20px;height:20px;transform:translate(-50%,-50%);background-repeat:no-repeat;cursor:pointer;z-index:11;pointer-events:auto}.sirv-hotspot-pointer.pulsating-point{background-image:none}.sirv-hotspot-pointer.pulsating-point::after,.sirv-hotspot-pointer.pulsating-point::before{display:inline-block;position:absolute;top:0;left:0;width:100%;height:100%;transform-origin:50% 50%;border-radius:100%;content:''}.sirv-hotspot-pointer.pulsating-point::before{transition:opacity .2s ease-in,transform .1s ease-out;background-color:#ff0;opacity:.6;overflow:hidden}.sirv-hotspot-pointer.pulsating-point::after{border:1px solid #ff0;opacity:0;box-sizing:border-box;animation:pulsating-point-pulsate 3s ease-out infinite;pointer-events:none}.sirv-hotspot-pointer.pulsating-point:hover::before{cursor:pointer;opacity:.8}.sirv-hotspot-pointer.pulsating-point:active::before{transform:scale(.875)}.sirv-hotspot-pointer.pulsating-point:hover::after{animation:none}.sirv-hotspot-pointer.pulsating-point:active::after{animation:pulsating-point-stop-pulsate .3s}.smv .smv-slides-box .smv-slides .smv-slide .smv-content .sirv-hotspot-container{position:absolute!important;pointer-events:none}.smv .smv-slides-box .smv-slides .smv-slide .smv-content .sirv-hotspot-container.sirv-hotspot-overwrite-pointer-event{pointer-events:auto!important}@keyframes pulsating-point-pulsate{0%{transform:scale(1);opacity:.8}45%{transform:scale(1.75);opacity:0}}@keyframes pulsating-point-stop-pulsate{from{opacity:.4}to{transform:scale(2);opacity:0}}.sirv-hotspot-tooltip{display:block;position:absolute;padding:8px 24px;transition:opacity .15s linear 0s;border:1px solid #efefef;border-radius:4px;background-color:#fff;font:normal 12px/1.42857 'Lucida Grande','Lucida Sans Unicode',Verdana,'Helvetica Neue',Arial,Helvetica,sans-serif;border-collapse:separate;box-shadow:0 5px 10px 2px rgba(0,0,0,.1);opacity:0;z-index:9999999999;pointer-events:none;-webkit-font-smoothing:antialiased}.sirv-hotspot-tooltip--default{margin-top:-8px;padding:6px 9px;transform:translate(-50%,-100%);border:0;background-color:rgba(49,51,61,.76);color:#eee}.sirv-hotspot-tooltip--default::after{position:absolute;top:100%;left:50%;width:0;height:0;transform:translateX(-50%);border-width:8px 8px 0;border-style:solid;border-color:rgba(49,51,61,.76) transparent transparent;content:''}.sirv-hotspot-tooltip--balloon{margin-top:-40px;transform:translate(-40px,-100%)}.sirv-hotspot-tooltip--balloon::after{position:absolute;top:100%;left:24px;width:0;height:0;border-width:0 15px 40px 0;border-style:solid;border-color:transparent #fff transparent transparent;content:''}.sirv-hotspot-tooltip.sirv-hotspot-tooltip-visible{transition-delay:.1s;opacity:1}.sirv-hotspot-box{display:flex;position:fixed;max-width:100vw;max-height:100vh;padding:10px;transition:opacity .15s linear 0s;z-index:9999999999;box-sizing:border-box}.sirv-hotspot-box.sirv-hotspot-box-out-of-width{right:0!important;left:0!important}.sirv-hotspot-box.sirv-hotspot-box-out-of-height{top:0!important;bottom:0!important}.sirv-hotspot-box .sirv-hotspot-box-wrapper{display:flex;position:relative;max-width:inherit;max-height:inherit;padding:22px;border:1px solid #efefef;border-radius:4px;background:#fff;font-size:16px!important;line-height:100%;text-align:left;border-collapse:separate;box-shadow:0 5px 10px 2px rgba(0,0,0,.1);overflow:hidden;box-sizing:border-box}.sirv-hotspot-box .sirv-hotspot-box-content{top:0;left:0;width:100%;max-width:inherit;height:calc(100% + 2px);max-height:inherit;overflow:auto}.sirv-hotspot-box .sirv-hotspot-close-button{position:absolute;top:2px;right:2px;width:24px;height:24px;color:#888;font:normal 22px/1 Arial,monospace;text-align:center;cursor:pointer;speak:none;-webkit-font-smoothing:antialiased}.sirv-hotspot-box .sirv-hotspot-close-button::before{display:inline;position:static;color:inherit!important;font:inherit!important;content:'Ã';vertical-align:middle;-webkit-font-smoothing:inherit!important}"}));var r="sirv-hotspot-tooltip",a="sirv-hotspot-box-out-of-width",p="sirv-hotspot-box-out-of-height",l="sirv-hotspot-overwrite-pointer-event",c={AUTO:0,VISIBLE:1};return function(o){"use strict";function i(t,i,s){var e;return(e=o.call(this)||this).container=t,e.hotspotData=i,e._id=s,e.box=null,e.boxContainer=n.D.node.body,e.baseBoxSize=null,e.tooltip=null,e.version=1,e.pointer=null,e.hotspotSettings={},e.dX=1,e.dY=1,e.isActive=!1,e.isDisabled=!1,e.isPointerInDoc=!1,e.isHovered=!1,e.isShown=!1,e.isBoxContent=!1,e.tooltipState=c.AUTO,e.boxState=c.AUTO,e.init(),e}t.inheritsLoose(i,o);var s=i.prototype;return s.isTooltipHovered=function(){return this.isHovered},s.isBoxActivated=function(){return this.isActive},s.isBoxAlwaysVisible=function(){return this.boxState===c.VISIBLE},s.isTooltipAlwaysVisible=function(){return this.tooltipState===c.VISIBLE},s.init=function(){this.setVersion(),this.parseHotspotData(),this.createBlocks(),this.addEvents(),this.createBox()},s.setVersion=function(){(this.hotspotData.style||this.hotspotData.tooltip||this.hotspotData.box&&this.hotspotData.box.content)&&(this.version=2)},s.parseHotspotData=function(){var t=this;Object.keys(this.hotspotData).forEach((function(o){return t.hotspotSettings[o]=t.hotspotData[o]})),this.hotspotSettings.pointerPositionPercentage={top:e.isPercentage(""+this.hotspotSettings.pointer.y),left:e.isPercentage(""+this.hotspotSettings.pointer.x)}},s.createBlocks=function(){this.pointer=n.$new("div").addClass("sirv-hotspot-pointer").attr("data-spot-id",this._id),this.pointer.addClass("hotspot-pointer"),this.version>1&&this.hotspotSettings.tooltip&&this.hotspotSettings.tooltip.content&&(this.tooltip=n.$new("div").addClass(r).changeContent(this.hotspotSettings.tooltip.content),this.hotspotSettings.tooltip.style&&this.tooltip.addClass("sirv-hotspot-tooltip--"+this.hotspotSettings.tooltip.style))},s.setTooltipPosition=function(){if(this.tooltip){var t=this.pointer.rect,o={top:0,left:0};o.top=this.hotspotSettings.tooltip.style?t.top:t.bottom,o.left=this.hotspotSettings.tooltip.style?(t.left+t.right)/2:t.right,"body"!==n.$(this.boxContainer).tagName&&(t=this.pointer.node.getBoundingClientRect(),o.top=this.hotspotSettings.tooltip.style?t.top-this.container.node.getBoundingClientRect().top:t.bottom-this.container.node.getBoundingClientRect().top,o.left=this.hotspotSettings.tooltip.style?t.left-this.container.node.getBoundingClientRect().left+t.width/2:t.left-this.container.node.getBoundingClientRect().left+t.width),this.tooltip.setCss(o)}},s.showTooltip=function(){this.isHovered||this.isDisabled||this.tooltip&&(this.setTooltipPosition(),this.tooltip.appendTo(this.boxContainer).addClass("sirv-hotspot-tooltip-visible"),this.isHovered=!0,this.emit("hotspotHovered",{data:{hotspot:this}}))},s.addEvents=function(){var t,o=this;this.pointer.addEvent(["click","mousedown"],(function(t){t.stop()})),this.pointer.addEvent(["btnclick","tap"],(function(t){return 3===t.button||(o.hotspotSettings.link?(n.W.node.open(o.hotspotSettings.link),t.stop()):o.isBoxContent&&(t.stop(),o.showBox()),!1)})),("edge"===n.browser.uaName||n.browser.ieMode)&&this.pointer.addEvent("mousedown",(function(t){t.stopDistribution()})),this.hotspotSettings.tooltip&&this.hotspotSettings.tooltip.content&&(this.pointer.addEvent("mouseenter",(function(t){o.showTooltip()})),this.pointer.addEvent("mouseleave",(function(){o.tooltipState!==c.VISIBLE&&(o.hideTooltip(),o.isHovered=!1,o.emit("hotspotLeft",{data:{hotspot:o}}))}))),h(n.W).addEvent("resize",(function(i){clearTimeout(t),t=setTimeout((function(){if(o.isActive){var t=o.hotspotSettings;t&&o.box.setCss(o.correctBoxPosition(o.getBoxPosition(t)))}}),42)}))},s.createBox=function(){var t=this,o=null;if(this.version>1&&this.hotspotSettings.box&&this.hotspotSettings.box.content?o=this.hotspotSettings.box.content:this.hotspotSettings.data&&(o=this.hotspotSettings.data),this.box=n.$new("div").addClass("sirv-hotspot-box"),o){this.isBoxContent=!0;var i=n.$new("div").addClass("sirv-hotspot-box-wrapper").append(n.$new("div").addEvent(["btnclick","tap"],(function(o){t.boxState!==c.VISIBLE&&(o.stop(),t.hideBox(!0))})).addClass("sirv-hotspot-close-button")),s=n.$new("div").addClass("sirv-hotspot-box-content").changeContent(o+"").addEvent("click",(function(t){t.stopDistribution()}));i.append(s),this.box.append(i)}this.box.setCss({top:"-10000px",left:"-10000px",position:"absolute",opacity:0})},s.getBoxPosition=function(t){var o={top:0,left:0,transform:""};if(t&&t.box){var i=t.box.x,s=t.box.y;if(this.hotspotSettings.box.fixed){var e=this.container.rect;if(o.position="absolute","body"!==n.$(this.boxContainer).tagName){switch(s){case"top":o.top=0;break;case"bottom":o.top=e.bottom-e.top,o.transform+=" translateY(-100%)";break;case"center":o.top=(e.bottom-e.top+0)/2,o.transform+=" translateY(-50%)";break;default:o.top=0+(parseFloat(s)||0)}switch(i){case"left":o.left=0;break;case"right":o.left=e.right-e.left,o.transform+=" translateX(-100%)";break;case"center":o.left=(e.right-e.left)/2,o.transform+=" translateX(-50%)";break;default:o.left=e.left+(parseFloat(i)||0)}}else{switch(s){case"top":o.top=e.top;break;case"bottom":o.top=e.bottom,o.transform+=" translateY(-100%)";break;case"center":o.top=(e.top+e.bottom)/2,o.transform+=" translateY(-50%)";break;default:o.top=e.top+(parseFloat(s)||0)}switch(i){case"left":o.left=e.left;break;case"right":o.left=e.right,o.transform+=" translateX(-100%)";break;case"center":o.left=(e.left+e.right)/2,o.transform+=" translateX(-50%)";break;default:o.left=e.left+(parseFloat(i)||0)}}}else{var h=this.pointer.position,r=n.W.scroll;o.left=h.left-r.x+(parseFloat(i)||0),o.top=h.top-r.y+(parseFloat(s)||0)}}return o},s.correctBoxPosition=function(t){if(this.hotspotSettings.box&&!this.hotspotSettings.box.fixed){this.box.removeClass(a),this.box.removeClass(p);var o=n.W.size;this.baseBoxSize.width>o.width?this.box.addClass(a):t.left+this.baseBoxSize.width>o.width&&(t.left=o.width-this.baseBoxSize.width),this.baseBoxSize.height>o.height?this.box.addClass(p):t.top+this.baseBoxSize.height>o.height&&(t.top=o.height-this.baseBoxSize.height)}return t},s.setBoxPosition=function(){var t;t=this.correctBoxPosition(this.getBoxPosition(this.hotspotSettings)),this.box.setCssProp("position",""),this.box.setCss(t),this.box.render()},s.showBox=function(){this.isActive||this.isDisabled||(this.tooltip&&this.tooltipState===c.AUTO&&this.tooltip.removeClass("sirv-hotspot-tooltip-visible"),this.box.setCss({opacity:0}),this.box.appendTo(this.boxContainer),this.setBaseBoxSize(this.box.size),this.setBoxPosition(),this.box.setCss({opacity:1}),this.isActive=!0,this.emit("hotspotActivate",{data:{hotspot:this}}))},s.hideBox=function(t){var o=this;if(this.isActive){if(t)return this.box&&this.box.setCssProp("opacity",0),setTimeout((function(){o.hideBox()}),300),this._id;this.box&&this.box.remove(),this.isActive=!1,this.emit("hotspotDeactivate",{data:{hotspot:this}})}},s.changeBoxContainer=function(t){this.boxContainer=null!=t?t:n.D.node.body},s.setBaseBoxSize=function(t,o){(t&&o||!this.baseBoxSize)&&(this.baseBoxSize={width:t.width,height:t.height})},s.setHotspotSettings=function(t){for(var o in t)({}).hasOwnProperty.call(t,o)&&(this.hotspotSettings[o]=t[o])},s.getHotspotSettings=function(t){return this.hotspotSettings},s.setAspectRatio=function(t,o){this.dX=t,this.dY=o},s.setPointerPosition=function(){var t=this.hotspotSettings;t&&this.pointer.setCss({top:t.pointerPositionPercentage.top?t.pointer.y:Math.ceil(t.pointer.y*this.dY),left:t.pointerPositionPercentage.left?t.pointer.x:Math.ceil(t.pointer.x*this.dX)})},s.showPointer=function(){if(this.hotspotSettings&&!this.isDisabled){if(this.pointer.addClass("pulsating-point"),this.setPointerPosition(),this.hotspotSettings.style||this.hotspotSettings.pointer.style){var t=this.hotspotSettings.style;t||(t=this.hotspotSettings.pointer.style),this.pointer.addClass(t)}this.isPointerInDoc||(this.isPointerInDoc=!0,this.pointer.appendTo(this.container))}else this.hidePointer()},s.hidePointer=function(){this.isPointerInDoc&&(this.isPointerInDoc=!1,this.pointer.remove())},s.isHotspotShown=function(){return this.isShown},s.show=function(){this.isDisabled||this.isShown||(this.isShown=!0,this.showPointer(),this.boxState===c.SHOW&&this.showBox(),this.tooltipState===c.SHOW&&this.showTooltip())},s.hide=function(){this.isShown&&(this.isShown=!1,this.hideBox(),this.hideTooltip(),this.hidePointer())},s.isEnabled=function(){return!this.isDisabled},s.enable=function(){this.isDisabled&&(this.isDisabled=!1)},s.disable=function(){this.isDisabled||(this.isDisabled=!0,this.hide())},s.hideTooltip=function(){this.isHovered&&(this.isHovered=!1,this.tooltip&&this.tooltip.removeClass("sirv-hotspot-tooltip-visible"))},s.overridePointerEvent=function(){this.isBoxAlwaysVisible()||this.isTooltipAlwaysVisible()||this.container.addClass(l)},s.removeOverridePointerEvent=function(){this.container.removeClass(l)},s.setState=function(t,o){this.boxState!==t.popup&&(this.boxState=t.popup,t.popup===c.VISIBLE?o||this.showBox():this.hideBox()),this.tooltipState!==t.tooltip&&(this.tooltipState=t.tooltip,t.tooltip===c.VISIBLE?o||this.showTooltip():this.hideTooltip())},s.rewriteAttrPointer=function(t){this.pointer.attr("data-spot-id",t||this._id)},s.getHotspotPointer=function(){return this.pointer},s.destroy=function(){this.hideBox(),this.hideTooltip(),this.hotspotData=null,this.container=null,this._id=null,this.pointer.clearEvents(),this.tooltip&&this.tooltip.clearEvents(),this.pointer.remove(),this.box=null,this.boxContainer=null,this.baseBoxSize=null,this.tooltip=null,this.version=null,this.pointer=null,this.hotspotSettings=null,this.isActive=!1,this.isDisabled=!1,this.isPointerInDoc=!1,this.isHovered=!1,o.prototype.destroy.call(this)},t.createClass(i,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"boxSize",get:function(){var t,o;return null!=(t=null==(o=this.box)?void 0:o.size)?t:{width:0,height:0}}}]),i}(s)})),Sirv.define("Hotspots",["bHelpers","magicJS","globalFunctions","EventEmitter","Hotspot","helper"],(function(t,o,i,s,e,n){var h=o,r=h.$;return function(o){"use strict";function i(){var i;return(i=o.call(this)||this).container=h.$new("div").addClass("sirv-hotspot-container"),i.hotspots=[],i.activeHotspots=[],i.hoveredHotspots=[],i._originImageSize={width:0,height:0},i._instanceComponentNode=null,i.api={add:i.addHotspot.bind(t.assertThisInitialized(i)),remove:i.removeHotspot.bind(t.assertThisInitialized(i)),removeAll:i.removeAllHotspots.bind(t.assertThisInitialized(i)),list:function(){return i.hotspots.map((function(t){return t.getHotspotPointer()}))},setVisibility:i.setStateById.bind(t.assertThisInitialized(i)),enable:i.enable.bind(t.assertThisInitialized(i)),disable:i.disable.bind(t.assertThisInitialized(i))},i.addEvents(),i}t.inheritsLoose(i,o);var s=i.prototype;return s.appendTo=function(t){this.container.appendTo(t)},s.getActiveHotspot=function(t){return this.activeHotspots.filter((function(o){return o.id===t}))[0]||null},s.getHoveredHotspots=function(t){return this.hoveredHotspots.filter((function(o){return o.id===t}))[0]||null},s.addEvents=function(){var t=this;this.on("hotspotActivate",(function(o){t.getActiveHotspot(o.data.hotspot.id)||(o.stopEmptyEvent(),t.activeHotspots.forEach((function(t){t.isBoxAlwaysVisible()||t.hideBox(!0)})),t.activeHotspots.push(o.data.hotspot),t.activeHotspots[t.activeHotspots.length-1].overridePointerEvent(),o.data.id=o.data.hotspot.id,delete o.data.hotspot)})),this.on("hotspotDeactivate",(function(o){o.stopEmptyEvent();var i=t.getActiveHotspot(o.data.hotspot.id);i&&(i.removeOverridePointerEvent(),t.activeHotspots=t.activeHotspots.filter((function(t){return t.id!==i.id}))),o.data.id=o.data.hotspot.id,delete o.data.hotspot})),this.on("hotspotHovered",(function(o){t.getHoveredHotspots(o.data.hotspot.id)||(o.stopAll(),t.hoveredHotspots.push(o.data.hotspot))})),this.on("hotspotLeft",(function(o){o.stopAll();var i=t.getHoveredHotspots(o.data.hotspot.id);i&&(t.hoveredHotspots=t.hoveredHotspots.filter((function(t){return t.id!==i.id})))})),this.clickFn=function(o){t.activeHotspots.forEach((function(t){t.isBoxAlwaysVisible()||t.hideBox(!0)})),t.hoveredHotspots.forEach((function(t){t.isTooltipAlwaysVisible()||t.hideTooltip(!0)}))},r(h.D).addEvent("click",this.clickFn)},s.isHotspotActivated=function(){return this.activeHotspots.length>0},s.createHotspots=function(t){var o=this;t&&t.length&&t.forEach((function(t){o.createHotspot(t,o.hotspots.length)}))},s.createHotspot=function(t,o){var i=new e(this.container,t,o);i.parentClass=this,this.hotspots.push(i)},s.addHotspot=function(t){Array.isArray(t)||(t=[t]),this.createHotspots(t,this.hotspots.length)},s.getRightBoundengClientRect=function(t){return this.hotspots.length?this.container.node.parentNode.getBoundingClientRect():this._instanceComponentNode?this._instanceComponentNode.node.getBoundingClientRect():t.node.getBoundingClientRect()},s.changeBoxContainerParent=function(t){var o=t?this.container:null;this.hotspots.forEach((function(t){t.changeBoxContainer(o)}))},s.hideActiveHotspotBox=function(t){var o=this.activeHotspots.length||this.hoveredHotspots.length;return this.activeHotspots.forEach((function(o){o.hideBox(t)})),this.hoveredHotspots.forEach((function(t){t.hideTooltip()})),o},s.show=function(t){var o=this.hotspots[t];o&&o.show()},s.showAll=function(){this.hotspots.forEach((function(t){t.show()}))},s.hide=function(t){var o=this.hotspots[t];o&&o.hide()},s.hideAll=function(){this.hotspots.forEach((function(t){t.hide()}))},s.enable=function(t){var o=this.hotspots[t];o&&(o.enable(),o.show())},s.disable=function(t){this.hotspots[t]&&this.hotspots[t].disable()},s.enableAll=function(){this.hotspots.forEach((function(t){t.enable(),t.show()}))},s.disableAll=function(){this.hotspots.forEach((function(t){t.disable()}))},s.showNeededElements=function(){this.hotspots.forEach((function(t){t.isEnabled()&&t.isHotspotShown()&&(t.isBoxAlwaysVisible()&&(t.isBoxActivated()&&t.setBoxPosition(),t.showBox()),t.isTooltipAlwaysVisible()&&(t.isTooltipHovered()&&t.setTooltipPosition(),t.showTooltip()))}))},s.removeHotspot=function(t){var o=this.hotspots[t];o&&(o.disable(),o.destroy(),this.removeByIndex(t),this.hotspots.length||this.container.remove())},s.removeAllHotspots=function(){for(var t=this.hotspots.length-1;t>=0;t--)this.removeHotspot(t)},s.removeByIndex=function(t){this.hotspots.splice(t,1),(this.hotspots.length>0&&0===t||t>0&&t<=this.hotspots.length-1)&&this.rewriteHotspotIndex(t)},s.rewriteHotspotIndex=function(t){for(var o=t,i=this.hotspots.length;o<i;o++)this.hotspots[o].id=o,this.hotspots[o].rewriteAttrPointer()},s.setStateById=function(t,o){this.hotspots[t]&&this.hotspots[t].setState(o)},s.destroy=function(){r(h.D).removeEvent("click",this.clickFn),this.hotspots.forEach((function(t){t.destroy()})),this.container=null,this.activeHotspots=[],this.hoveredHotspots=[],this._instanceComponentNode=null,this.off("hotspotActivate"),this.off("hotspotDeactivate"),this.off("hotspotHovered"),this.off("hotspotLeft"),this.hotspots=[],o.prototype.destroy.call(this)},t.createClass(i,[{key:"originImageSize",set:function(t){this._originImageSize={width:t.width,height:t.height}}},{key:"instanceComponentNode",set:function(t){this.hotspots.length||(this._instanceComponentNode=t)}},{key:"containerSize",set:function(t){if(this.hotspots.length&&t){var o=this.getRightBoundengClientRect();this.container.setCss({top:t.top-o.top,left:t.left-o.left,width:100*t.width/o.width+"%",height:100*t.height/o.height+"%"});var i=this.container.size,s=i.width/this._originImageSize.width,e=i.height/this._originImageSize.height;this.hotspots.forEach((function(t){return t.setAspectRatio(s,e)}))}}}]),i}(s)})),Sirv.define("SpinHotspots",["bHelpers","magicJS","globalFunctions","EventEmitter","Hotspots","helper"],(function(t,o,i,s,e,n){var h=o;h.$;return function(o){"use strict";function i(){var t;return(t=o.call(this)||this).options={rows:1,columns:36,rowsRevers:!1,columnsRevers:!1,originImageSize:{}},t.row=null,t.col=null,t.hotspotsSettings=[],t}t.inheritsLoose(i,o);var s=i.prototype;return s.createHotspotsSettings=function(t){for(var o=this,i=!0,s=function(s,e){var h=new Map;Object.entries(t[s].frames).forEach((function(o){var e=o[0],r=o[1],a=r;a.pointerPositionPercentage={top:n.isPercentage(""+r.pointer.y),left:n.isPercentage(""+r.pointer.x)},Object.entries(t[s]).forEach((function(t){var o=t[0],s=t[1];"frames"!==o&&("data"!==o||i)&&(a[o]=s,i=!1)})),h.set(parseInt(e,10),a)})),o.hotspotsSettings.push(h),i=!0},e=0,h=t.length;e<h;e++)s(e)},s.createHotspots=function(t){Array.isArray(t)||(t=[t]),this.createHotspotsSettings(t);var i=this.startHotspotSettings;o.prototype.createHotspots.call(this,i)},s.addHotspot=function(t){Array.isArray(t)||(t=[t]),this.createHotspotsSettings(t);var i=this.startHotspotSettings;o.prototype.createHotspots.call(this,i.slice(i.length-t.length)),this.updateAndShow()},s.setFramePosition=function(t,o){this.row=t,this.col=o},s.updateAndShow=function(){var t=this,o=this.frameIndex;this.hotspotsSettings.forEach((function(i,s){var e=i.get(o),n=t.hotspots[s];e&&n.isEnabled()?(n.setHotspotSettings(e),n.isHotspotShown()?(n.setPointerPosition(),t.showNeededElements(),n.isBoxAlwaysVisible()&&(n.setBaseBoxSize(n.boxSize),n.setBoxPosition()),n.isTooltipAlwaysVisible()&&n.setTooltipPosition()):t.show(s)):t.hide(s)}))},s.hideNeededElements=function(t){this.activeHotspots.forEach((function(o){o.isBoxAlwaysVisible()||o.hideBox(t)})),this.hoveredHotspots.forEach((function(o){o.isTooltipAlwaysVisible()&&o.hideTooltip(t)}))},s.changeHotspotsPosition=function(t,o){this.row===t&&this.col===o||(this.setFramePosition(t,o),this.updateAndShow())},s.showAll=function(){var t=this,o=this.frameIndex;this.hotspotsSettings.forEach((function(i,s){i.get(o)&&t.show(s)}))},s.enable=function(t){if(this.hotspotsSettings[t]){var o=this.hotspots[t];o.enable(),this.hotspotsSettings[t].get(this.frameIndex)&&o.show()}},s.setStateById=function(t,o){this.hotspots[t]&&this.hotspots[t].setState(o,!this.hotspotsSettings[t].get(this.frameIndex))},s.removeHotspot=function(t){this.hotspots[t]&&(this.hotspotsSettings.splice(t,1),o.prototype.removeHotspot.call(this,t))},s.destroy=function(){o.prototype.destroy.call(this),this.options=null,this.row=null,this.col=null,this.hotspotsSettings=null},t.createClass(i,[{key:"Options",set:function(t){this.options=Object.assign(this.options,t||{})}},{key:"frameIndex",get:function(){return this.options.rowsRevers&&this.options.columnsRevers?(this.options.rows-this.row-1)*this.options.columns+(this.options.columns-this.col):this.options.rowsRevers?(this.options.rows-this.row-1)*this.options.columns+this.col+1:this.options.columnsRevers?this.row*this.options.columns+(this.options.columns-this.col):this.row*this.options.columns+this.col+1}},{key:"startHotspotSettings",get:function(){var t=[];return this.hotspotsSettings.forEach((function(o){var i=null;"ie"===h.browser.uaName?o.forEach((function(t){i||(i=t)})):o.entries().next().value&&(i=o.entries().next().value[1]),i&&t.push(i)})),t}}]),i}(e)}));
Sirv.define("Zoominstance",["bHelpers","magicJS","HotspotInstance","ImageZoom"],(function(o,t,n,i){t.$;return function(t){"use strict";function n(n,i,e){var a;return(a=t.call(this,n,i,e)||this).zoom=null,a.upscale=!1,a.defaultZoomOptions={},a.zoomContainer=a.instanceNode,a.zoomClassName="smv-zoomed-in",a.api=Object.assign(a.api,{zoomIn:a.zoomIn.bind(o.assertThisInitialized(a)),zoomOut:a.zoomOut.bind(o.assertThisInitialized(a)),isZoomed:a.isZoomed.bind(o.assertThisInitialized(a))}),a}o.inheritsLoose(n,t);var e=n.prototype;return e.setDefaultZoomOptions=function(){this.defaultZoomOptions={test:!1,upscale:this.upscale,smoothing:!0}},e.createZoom=function(o,t){if(!this.destroyed){var n=Object.assign({},this.defaultZoomOptions);return t&&(n=Object.assign(n,t)),this.zoom=new i(this.instanceNode,n),this.zoom.parentClass=this,n}return null},e.onZoomGetImage=function(o){o.data.exactSize=!0,o.data.maxSize=!1,o.data.round=!1,o.data.callbackData={lens:!0,indexX:o.data.indexX,indexY:o.data.indexY,level:o.data.level,number:o.data.number,map:o.data.map}},e.onZoomCancelLoadingOfTiles=function(o){o.data.callbackData||(o.data.callbackData={}),o.data.callbackData.lens=!0},e.onZoomBeforeShow=function(o){},e.onZoomShown=function(o){},e.onZoomHidden=function(o){},e.setZoomEvents=function(){var o=this;this.zoom&&(this.on("zoomGetImage",(function(t){t.stopAll(),o.onZoomGetImage(t)})),this.on("zoomCancelLoadingOfTiles",(function(t){t.stopAll(),o.onZoomCancelLoadingOfTiles(t)})),this.on("zoomBeforeShow",(function(t){t.stopAll(),o.onZoomBeforeShow(t)})),this.on("zoomShown",(function(t){t.stopAll(),o.onZoomShown(t)})),this.on("zoomHidden",(function(t){t.stopAll(),o.onZoomHidden(t)})))},e.zoomIn=function(){return this.ready},e.zoomOut=function(){return this.ready},e.getZoomData=function(){return this.ready&&this.zoom?this.zoom.getZoomData():0},e.isZoomed=function(){return!(!this.ready||!this.zoom)&&(this.zoom.shown||this.zoom.showing)},e.isZoomSizeExist=function(){return!1},e.clearZoom=function(){this.zoom&&(this.off("zoomGetImage"),this.off("zoomCancelLoadingOfTiles"),this.off("zoomBeforeShow"),this.off("zoomShown"),this.off("zoomHidden"),this.zoom.destroy(),this.zoom=null)},e.destroy=function(){this.clearZoom(),t.prototype.destroy.call(this)},n}(n)}));
Sirv.define("ImageZoom",["bHelpers","magicJS","globalVariables","globalFunctions","helper","EventEmitter"],(function(i,t,e,s,o,h){var n=t,a=n.$;s.rootDOM.addModuleCSSByName("ImageZoom",(function(){return".sirv-zoom{position:absolute;backface-visibility:hidden!important;-webkit-touch-callout:none!important;-ms-user-select:none!important;user-select:none!important;outline:0!important;z-index:999999999;touch-action:none;-webkit-tap-highlight-color:transparent!important}.sirv-zoom .sirv-outside-zoom{background:#fff;box-shadow:0 0 3px rgba(153,153,153,.5)}.sirv-zoom .sirv-circle-zoom{border:0;border-radius:100%;background:rgba(255,255,255,.3)}.sirv-zoom .sirv-circle-zoom::before{position:absolute;display:block;top:0;right:0;bottom:0;left:0;border:1px solid rgba(153,153,153,.7);border-radius:100%;background:0 0;box-shadow:inset 0 0 20px 1px rgba(0,0,0,.3);content:'';z-index:126}.sirv-zoom .sirv-zoom-wrapper{position:absolute;display:inline-block;overflow:hidden;z-index:9}.sirv-zoom .sirv-zoom-wrapper .sirv-zoom-image-wrapper{position:absolute;overflow:hidden}.sirv-zoom .sirv-zoom-wrapper .sirv-zoom-image-wrapper>img{position:absolute;top:0;left:0;margin:0;padding:0;-webkit-user-drag:none;-ms-user-select:none;user-select:none;user-drag:none}.sirv-zoom .sirv-zoom-wrapper .sirv-deepzoom{position:relative;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:42}.sirv-zoom .sirv-zoom-wrapper .sirv-deepzoom>div{position:absolute;top:0;left:0;width:100%;height:100%}.sirv-zoom .sirv-zoom-wrapper .sirv-deepzoom>div canvas{top:0;left:0}.zoom-helper{position:fixed;border-radius:4px;display:inline-block;top:10px;right:10px;padding:10px;border:1px solid #ccc9c9;background-color:#eaeaea;box-shadow:1px 1px 9px 1px rgba(0,0,0,.5);overflow:hidden;z-index:999;overflow-y:auto}.zoom-helper .z-loaded-color{background-color:#87bd89!important}.zoom-helper .z-loading-color{background-color:#a99cef!important}.zoom-helper .z-canceled-color{background-color:#f19c9c!important}.zoom-helper .z-helper-head{margin-bottom:9px}.zoom-helper .z-body,.zoom-helper .z-head,.zoom-helper .z-level{position:relative}.zoom-helper .z-level{border-radius:4px;margin-bottom:9px;padding:10px;background-color:#d4d3d3;box-sizing:border-box}.zoom-helper .z-head{margin-bottom:9px}.zoom-helper .z-body{border-top:1px solid;border-left:1px solid}.zoom-helper .z-tile{position:absolute;display:inline-block;border-right:1px solid;border-bottom:1px solid;box-sizing:border-box}.zoom-helper .z-status{border-radius:50%;display:inline-block;width:10px;height:10px;margin-left:10px;background-color:#e87979;box-sizing:border-box}.zoom-helper .z-status.shown{background-color:#66ca66!important}.sirv-zoom-map{position:absolute;box-sizing:border-box;bottom:16px;left:16px;width:200px;height:150px;border:1px solid #bdbdbd;overflow:hidden;z-index:126;cursor:pointer}.sirv-zoom-map .sirv-zoom-map-lens{position:absolute;box-sizing:border-box;top:50px;left:50px;width:50px;height:50px;border:1px solid #fff;z-index:42}.sirv-zoom-map .sirv-zoom-map-lens::after,.sirv-zoom-map .sirv-zoom-map-lens::before{position:absolute;display:block;width:100%;height:100%;content:''}.sirv-zoom-map .sirv-zoom-map-lens::before{box-sizing:content-box;border-width:1em;border-style:solid;border-color:rgba(0,0,0,.6);border-image:initial;top:-1em;left:-1em}.sirv-zoom-map .sirv-zoom-map-lens::after{box-sizing:border-box;border-width:1px;border-style:solid;border-color:#fff;border-image:initial}.sirv-zoom-map>img{position:relative;top:0;left:0;width:100%;height:100%}.sirv-zoom-lens,.sirv-zoom-lens-wrapper{position:absolute;top:0;left:0}.sirv-zoom-lens-wrapper{background-color:rgba(153,153,153,.4);overflow:hidden;z-index:9999999999}.sirv-zoom-lens{box-shadow:0 0 3px rgba(153,153,153,.5);overflow:hidden}.sirv-zoom-lens img{max-width:none!important;max-height:none!important;transition:none!important}.sirv-filter-bw{filter:grayscale(.5) opacity(.5);filter:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='saturate' values='0'/><feComponentTransfer><feFuncA type='linear' slope='0.6'/></feComponentTransfer></filter></svg>#grayscale\")}"}));var r,l,c,d,u,p,m,g,v,w,f,S,z,y={canZoom:"smv-cursor-zoom",zoomIn:"smv-cursor-zoom-in",zoomOut:"smv-cursor-zoom-out",drag:"smv-cursor-dragging"},x=["mousedrag","touchdrag"],P=["edge","ie"].includes(n.browser.uaName)?"pointerup":"touchend",b=["edge","ie"].includes(n.browser.uaName)?"pointermove":"mousemove",E=function(i,t){return i/100*t},C=function(i,t){return(i-t)/2},T=function(i,t,e,s){return i>t&&(i=t),i+e<s&&(i=s-e),i},I=function(i,t){return i/t*100},D=function(i,t,e){return i<t&&(i=t),i>e&&(i=e),i},A=function(i,t){return t/i},M=function(t){"use strict";function e(i){var e;return(e=t.call(this)||this).o=Object.assign({maxTileSize:15,minTileSize:5},i||{}),e.inDoc=!1,e.container=n.$new("div").addClass("zoom-helper"),e.header=n.$new("div").addClass("z-helper-head"),e.zoom=n.$new("span").addClass("z-zoom"),e.tileSize={width:0,height:0},e.levels={},e}i.inheritsLoose(e,t);var s=e.prototype;return s._createHead=function(){var i=n.$new("div");i.innerHTML="Zoom: ",i.append(this.zoom),this.setZoom(0),this.header.append(i),(i=n.$new("div")).innerHTML='<div class="z-status z-canceled-color"></div> - canceled',this.header.append(i),(i=n.$new("div")).innerHTML='<div class="z-status z-loading-color"></div> - loading',this.header.append(i),(i=n.$new("div")).innerHTML='<div class="z-status z-loaded-color"></div> - loaded',this.header.append(i)},s._calcSizeOfTile=function(i){var t,e,s=this,o=function(i,t){var e=parseInt(i*t,10);return e<s.o.minTileSize&&(e=s.o.minTileSize),e};return i.width>i.height?e=o(t=this.o.maxTileSize,i.height/i.width):t=o(e=this.o.maxTileSize,i.width/i.height),{width:t,height:e}},s._createTile=function(i,t,e){var s=function(i,t){return i?((e=parseInt(t/2,10))<3&&(e=3),e):t;var e},o=function(i,t){return i%t<t/2},h=s(e.cols-1===i&&o(e.levelSize.width,e.tileSize.width),this.tileSize.width),a=s(e.rows-1===t&&o(e.levelSize.height,e.tileSize.height),this.tileSize.height),r=n.$new("div").addClass("z-tile");return r.setCss({top:t*this.tileSize.height+"px",left:i*this.tileSize.width+"px",width:h+"px",height:a+"px"}),{currentClass:null,width:h,height:a,col:i,row:t,node:r}},s._show=function(i){i&&(this.inDoc||(this.inDoc=!0,this._createHead(),this.container.append(this.header),a(n.D.node.body).append(this.container)),i.inDoc||(i.inDoc=!0,this.container.append(i.node),this.container.setCssProp("max-height",n.W.innerHeight-55+"px")))},s._setItemClass=function(i,t,e,s){var o=i.tiles[e][t];o.currentClass!==s&&(o.currentClass&&o.node.removeClass(o.currentClass),o.currentClass=s,o.node.addClass(s))},s.setZoom=function(i){(i+="").length<2&&(i+=".0"),this.zoom.innerHTML=i},s.createLevel=function(i){var t=this,e=n.$new("div").addClass("z-level"),s=n.$new("div").addClass("z-body"),o=n.$new("div").addClass("z-head"),h=n.$new("div").addClass("z-status"),a=n.$new("div");a.innerHTML="Level: "+i.level,o.append(a),(a=n.$new("div")).innerHTML="Shown:",a.append(h),o.append(a),(a=n.$new("div")).innerHTML=i.levelSize.width+"x"+i.levelSize.height,o.append(a),e.append(o),e.append(s),this.tileSize.width||(this.tileSize=this._calcSizeOfTile(i.levelSize));var r=function(e,o){var h,n,a=[];for(n=0;n<o;n++){var r=[];for(h=0;h<e;h++){var l=t._createTile(h,n,i);s.append(l.node),r.push(l)}a.push(r)}return a}(i.cols,i.rows),l=r[i.rows-1][i.cols-1];s.setCss({width:(i.cols-1)*this.tileSize.width+l.width+"px",height:(i.rows-1)*this.tileSize.height+l.height+"px"}),this.levels[i.level]={inDoc:!1,number:i.level,status:h,node:e,head:o,body:s,tiles:r}},s.tileAction=function(i){var t,e=this.levels[i.level+""];switch(i.type){case 0:t="z-canceled-color";break;case 1:t="z-loading-color";break;case 2:t="z-loaded-color"}this._setItemClass(e,i.col,i.row,t)},s.setLevelState=function(i,t){var e=this.levels[i+""],s="shown";t?e.inDoc&&e.status.addClass(s):e.status.removeClass(s)},s.setData=function(i){var t;n.defined(i.level)&&(t=this.levels[i.level+""]),t&&this._show(t),i.zoom&&this.setZoom(i.zoom),t&&"col"in i&&this._setItemClass(t,i.col,i.row,"z-loaded-color"),t&&n.defined(i.levelStatus)&&this.setLevelState(i.level,i.levelStatus)},s.destroy=function(){this.inDoc&&(this.inDoc=!1,this.zoom.remove(),this.zoom.inneHTML="",this.header.remove(),this.header.inneHTML="",this.container.remove(),this.container.inneHTML="",this.levels={},this.tileSize={width:0,height:0}),t.prototype.destroy.call(this)},e}(h),k=(r=function(){"use strict";function t(i){this.isInner=i.inner,this.rows=i.lengthOfRow,this.cols=i.lengthOfColumn,this.size={width:i.cameraWidth,height:i.cameraHeight},this.bMapS={width:i.mapWidth,height:i.mapHeight},this.bTileS={width:i.tileWidth,height:i.tileHeight},this.bScale={x:i.scaleX,y:i.scaleY},this.mapS={width:this.bMapS.width,height:this.bMapS.height},this.tileS={width:this.bTileS.width,height:this.bTileS.height},this.baseLastTileSize={width:this.bMapS.width-(this.cols-1)*this.bTileS.width,height:this.bMapS.height-(this.rows-1)*this.bTileS.height},this.lastTileSize={width:this.baseLastTileSize.width,height:this.baseLastTileSize.height},this.position={x:0,y:0},this.lastCorrectionPosition={x:0,y:0},this.scale={x:0,y:0},this.lastScale=0,this.lastGlobaslScale=0,this.count={x:0,y:0},this.calcCount(),this.shownTiles={startX:0,countX:this.count.x,startY:0,countY:this.count.y}}t.getTileIndex=function(i,t){return Math.floor(i/t)},t.getTileSize=function(i,t){return i*t};var e=t.prototype;return e.checkTile=function(i,t){var e=this.shownTiles;return e.startX<=i&&e.startY<=t&&e.startX+e.countX>i&&e.startY+e.countY>t},e.calcCount=function(){this.count={x:Math.ceil(this.size.width/this.tileS.width)+1,y:Math.ceil(this.size.height/this.tileS.height)+1}},e.findShownTiles=function(){var i=this.position,e=this.tileS,s=0,o=0,h=this.count.x,n=this.count.y;i.x<0&&(s=t.getTileIndex(Math.abs(i.x),e.width)),i.y<0&&(o=t.getTileIndex(Math.abs(i.y),e.height)),s+h>this.cols&&(h=this.cols-s),o+n>this.rows&&(n=this.rows-o),this.shownTiles={startX:s,countX:h,startY:o,countY:n}},e.calcTileSize=function(){this.tileS.width=t.getTileSize(this.bTileS.width,this.scale.x),this.tileS.height=t.getTileSize(this.bTileS.height,this.scale.y),this.lastTileSize.width=t.getTileSize(this.baseLastTileSize.width,this.scale.x),this.lastTileSize.height=t.getTileSize(this.baseLastTileSize.height,this.scale.y)},e.calcData=function(i){this.lastScale!==this.scale.x&&(this.calcTileSize(),this.calcCount(),this.mapS.width=this.tileS.width*(this.cols-1)+this.lastTileSize.width,this.mapS.height=this.tileS.height*(this.rows-1)+this.lastTileSize.height,this.lastCorrectionPosition.x=(this.bMapS.width*this.bScale.x-this.mapS.width)/2,this.lastCorrectionPosition.y=(this.bMapS.height*this.bScale.y-this.mapS.height)/2,this.lastScale=this.scale.x),this.position.x=i.x+this.lastCorrectionPosition.x,this.position.y=i.y+this.lastCorrectionPosition.y},e.action=function(i,t){this.lastGlobaslScale!==t.x&&(this.lastScale=this.scale.x,this.scale.x=t.x*this.bScale.x,this.scale.y=t.y*this.bScale.y,this.lastGlobaslScale=t.x),this.calcData(i),this.findShownTiles()},e.resize=function(i){this.size.width=i.width,this.size.height=i.height,this.calcCount(),this.findShownTiles()},e.destroy=function(){this.shownTiles=[]},i.createClass(t,[{key:"x",get:function(){return this.position.x}},{key:"y",get:function(){return this.position.y}},{key:"width",get:function(){return this.size.width}},{key:"height",get:function(){return this.size.height}},{key:"mapWidth",get:function(){return this.mapS.width},set:function(i){null!=i&&(this.mapS.width=i)}},{key:"mapHeight",get:function(){return this.mapS.height},set:function(i){null!=i&&(this.mapS.height=i)}},{key:"shownTilesX",get:function(){return this.shownTiles.startX}},{key:"shownTilesY",get:function(){return this.shownTiles.startY}},{key:"shownTilesWidth",get:function(){return this.shownTiles.countX}},{key:"shownTilesHeight",get:function(){return this.shownTiles.countY}},{key:"scaleX",get:function(){return this.scale.x}},{key:"scaleY",get:function(){return this.scale.y}}]),t}(),l=0,c=1,d=2,u=function(t){"use strict";function e(i){var e;return(e=t.call(this)||this).id=i.id,e.index={x:i.indexX,y:i.indexY},e.position={x:i.x,y:i.y},e.size={width:i.width,height:i.height},e.storage=i.storage,e.state=l,e.node=null,e.storage.has(e.id)&&(e.node=e.storage.get(e.id),e.state=d),e}i.inheritsLoose(e,t);var s=e.prototype;return s.addImageToStorage=function(){this.storage.has(this.id)||this.storage.set(this.id,this.node)},s.load=function(){this.state===l&&(this.state=c,this.emit("getTile",{data:{indexX:this.index.x,indexY:this.index.y,number:this.id}}))},s.cancelLoading=function(){this.state===c&&(this.state=l,this.emit("zoomCancelLoadingOfTiles",{data:{indexX:this.index.x,indexY:this.index.y,number:this.id}}))},s.destroy=function(){this.cancelLoading(),this.storage=null,t.prototype.destroy.call(this)},i.createClass(e,[{key:"loaded",get:function(){return this.state===d}},{key:"image",set:function(i){this.state!==d&&(this.state=d,this.node=a(i),this.addImageToStorage())}}]),e}(h),p=function(){"use strict";function t(i,t){this.p=a(i),this.dppx=t,this.w=n.$new("div"),this.cvs=n.$new("canvas"),this.ctx=this.cvs.node.getContext("2d"),this.w.append(this.cvs)}var e=t.prototype;return e.append=function(){this.p.append(this.w)},e.show=function(){this.w.setCssProp("display","")},e.hide=function(){this.w.setCssProp("display","none")},e.clear=function(){this.ctx.clearRect(0,0,this.cvs.node.width,this.cvs.node.height)},e.draw=function(i,t,e,s){this.ctx.setTransform(1,0,0,1,0,0),this.clear(),this.ctx.setTransform(i,0,0,t,e,s)},e.drawTile=function(i,t,e){"edge"===n.browser.uaName||"ie"===n.browser.uaName?this.dppx>1?this.ctx.drawImage(i.node,0,0,t.width,t.height,e.x,e.y,t.width,t.height):this.ctx.drawImage(i.node,e.x,e.y,t.width,t.height):this.ctx.drawImage(i.node,0,0,t.width,t.height,e.x,e.y,t.width,t.height)},e.destroy=function(){this.cvs.remove(),this.w.remove()},i.createClass(t,[{key:"index",set:function(i){this.w.addClass("deepzoom-level-"+i),this.w.attr("z-index"+(i+1))}},{key:"canvasSize",set:function(i){this.cvs.setCss(i),this.cvs.attr("width",i.width*this.dppx),this.cvs.attr("height",i.height*this.dppx)}}]),t}(),m=new Map,g=function(i,t){return i/t},v=function(t){"use strict";function e(i,e){var s;return(s=t.call(this)||this).view=i,s.id=e.id,s.dppx=e.dppx,s.size={width:e.width,height:e.height},s.mSize={width:e.maxWidth,height:e.maxHeight},s.tSize={width:e.tileWidth,height:e.tileHeight},s.tileImageSize={width:e.tileImageWidth,height:e.tileImageHeight},s.layerSize={width:e.layerWidth,height:e.layerHeight},s.hash=e.hash+"-"+s.size.width+"x"+s.size.height,m.has(s.hash)||m.set(s.hash,new Map),s.scaleFactor={x:(s.mSize.width-s.size.width)/s.size.width+1,y:(s.mSize.height-s.size.height)/s.size.height+1},s.maxDisplayedSize={width:e.maxDisplayedWidth,height:e.maxDisplayedHeight},s.minDisplayedSize={width:e.minDisplayedWidth,height:e.minDisplayedHeight},s.globalScale={x:1,y:1},s.globalPosition={x:0,y:0},s.view.index=s.id,s.lensSize={width:e.viewPortWidth,height:e.viewPortHeight},s.isAdded=!1,s.isShown=!1,s.tiles=s.calcTiles(),s.countOfTiles=s.tiles.length*s.tiles[0].length,s.loadedTiles=0,s.camera=new r({inner:e.inner,scaleX:s.scaleFactor.x,scaleY:s.scaleFactor.y,cameraWidth:e.viewPortWidth,cameraHeight:e.viewPortHeight,mapWidth:s.size.width,mapHeight:s.size.height,tileWidth:g(s.tileImageSize.width,s.dppx),tileHeight:g(s.tileImageSize.height,s.dppx),lengthOfRow:s.tiles.length,lengthOfColumn:s.tiles[0].length}),R&&R.createLevel({level:s.id,cols:s.tiles[0].length,rows:s.tiles.length,levelSize:{width:s.size.width,height:s.size.height},tileSize:{width:s.tileImageSize.width,height:s.tileImageSize.height}}),s}i.inheritsLoose(e,t);var s=e.prototype;return s.addEvents=function(){var i=this,t=this.tileImageSize;this.on("getTile",(function(e){e.data.width=i.size.width,e.data.height=i.size.height,e.data.level=i.id,e.data.imageSettings={tile:{width:t.width,height:t.height,number:e.data.number}},i.dppx>1&&(e.data.dppx=i.dppx),R&&R.tileAction({level:i.id,col:e.data.indexX,row:e.data.indexY,type:1})})),this.on("zoomCancelLoadingOfTiles",(function(e){e.data.width=i.size.width,e.data.height=i.size.height,e.data.imageSettings={tile:{width:t.width,height:t.height,number:e.data.number}},R&&R.tileAction({level:i.id,col:e.data.indexX,row:e.data.indexY,type:0})}))},s.cancelLoadingOfTiles=function(){this.tiles.forEach((function(i){i.forEach((function(i){i.cancelLoading()}))}))},s.append=function(){!this.isAdded&&this.isShown&&(this.isAdded=!0,this.addEvents(),this.view.append())},s.calcTiles=function(){for(var i=[],t=this.tileImageSize,e=Math.ceil(this.layerSize.width/t.width),s=Math.ceil(this.layerSize.height/t.height),o=0;o<s;o++){for(var h=a([]),n=0;n<e;n++){var r=new u({y:o*t.height,x:n*t.width,indexX:n,indexY:o,id:o*e+n,width:n!==e-1?t.width:this.layerSize.width-n*t.width,height:o!==s-1?t.height:this.layerSize.height-o*t.height,storage:m.get(this.hash)});r.parentClass=this,h.push(r)}i.push(h)}return i},s.correctDPPXPosition=function(i,t,e){var s=i;if(this.dppx>1){var o=t/2;s=Math.abs(i-o)/(e/100),s=o*this.dppx-e*this.dppx/100*s}return s},s.draw=function(){var i=this,t=this.camera;this.isShown&&(this.view.draw(t.scaleX,t.scaleY,this.correctDPPXPosition(t.x,t.width,t.mapWidth),this.correctDPPXPosition(t.y,t.height,t.mapHeight)),this.eachTile((function(t){i.drawTile(t)})))},s.drawTile=function(i){i&&i.loaded&&this.view.drawTile(i.node,i.size,i.position)},s.eachTile=function(i){for(var t=this.camera,e=0,s=t.shownTilesHeight;e<s;e++)for(var o=0,h=t.shownTilesWidth;o<h;o++)i(this.tiles[t.shownTilesY+e][t.shownTilesX+o])},s.checkSize=function(){var i=this.isShown,t=this.camera,e=t.mapWidth<=this.maxDisplayedSize.width,s=t.mapHeight<=this.maxDisplayedSize.height,o=t.mapWidth>this.minDisplayedSize.width,h=t.mapHeight>this.minDisplayedSize.height;this.isShown=e&&s&&o&&h,i!==this.isShown&&(this.isShown?this.view.show():this.view.hide(),this.isShown||this.cancelLoadingOfTiles())},s.action=function(i,t){this.globalPosition.x=i.x,this.globalPosition.y=i.y,this.globalScale.x=t.x,this.globalScale.y=t.y,this.camera.action(this.globalPosition,this.globalScale),(this.camera.mapWidth>this.mSize.width||this.camera.mapHeight>this.mSize.height)&&(this.camera.mapWidth=this.mSize.width,this.camera.mapHeight=this.mSize.height),this.checkSize(),this.append(),this.draw(),R&&R.setData({level:this.id,levelStatus:this.isShown})},s.loadImages=function(){this.isShown&&this.loadedTiles!==this.countOfTiles&&this.eachTile((function(i){i.load()}))},s.resize=function(i){this.lensSize=i,this.camera.resize(i),this.action(this.globalPosition,this.globalScale)},s.destroy=function(){this.off("getTile"),this.off("zoomCancelLoadingOfTiles"),this.isShown=!1,this.camera.destroy(),this.tiles.forEach((function(i){i.forEach((function(i){i.destroy()}))})),t.prototype.destroy.call(this)},i.createClass(e,[{key:"image",set:function(i){var t=this.tiles[i.indexY][i.indexX];t.loaded||(this.loadedTiles+=1),t.image=i.node,this.isShown&&this.camera.checkTile(i.indexX,i.indexY)&&this.drawTile(t),R&&R.setData({level:this.id,col:i.indexX,row:i.indexY})}},{key:"lensSize",set:function(i){this.view.canvasSize=i}}]),e}(h),w=function(){"use strict";function t(i,t){this.p=a(i),this.c=n.$new("div"),this.c.addClass(t+"-deepzoom")}var e=t.prototype;return e.show=function(){this.p.append(this.c)},e.hide=function(){this.c.remove()},e.destroy=function(){this.c.remove(),this.c=null},i.createClass(t,[{key:"container",get:function(){return this.c}}]),t}(),f=function(t){"use strict";function e(i,e){var s;return(s=t.call(this)||this).view=i,s.options=Object.assign({tiles:!0,inner:!0,tileSize:{width:256,height:256},minZoomFactor:100,upscale:!1},e),s._hash=null,s.setDefaultVars(),s}i.inheritsLoose(e,t),e.convertScaleToSize=function(i,t){return{width:o.round(i.width*t.x,2),height:o.round(i.height*t.y,2)}};var s=e.prototype;return s.setDefaultVars=function(){var i=this;this.isShown=!1,this.originSize={width:0,height:0},this._maxSize={width:0,height:0},this._minSize={width:0,height:0},this._lensSize={width:0,height:0},this.currentSize={width:0,height:0},this.levels=a([]),this.on("getTile",(function(t){i.options.tiles||(delete t.data.imageSettings.tile,delete t.data.number)}))},s.createLevels=function(){var i=function(i,t){return t<1.5?i:i*n.DPPX},t=this._maxSize,e=this._minSize;if(!this.levels.length&&t.width-e.width>this.options.minZoomFactor){var s=[];this.options.inner?s=function(i,t){for(var e=Math.max(1,Math.round(Math.log(Math.max(t.width/i.width,t.height/i.height))/Math.LN2)),s=t.width,o=t.height,h=[];e>0;)e-=1,h.push({width:s,height:o}),s=parseInt(s/2,10),o=parseInt(o/2,10);return h}(e,t,this.options.inner):s.push({width:t.width,height:t.height});for(var h=this.options.tileSize,a=0,r=s.length;a<r;a++){this.options.tiles||(h=s[a]);var l=a+1<r-1?s[a+1]:e,c=a-1>=0?s[a-1]:t,d=o.getDPPX(s[a].width,this.originSize.width,this.options.upscale),u=new p(this.view.container,d),m=new v(u,{id:r-a,hash:this._hash,dppx:d,inner:this.options.inner,width:s[a].width,height:s[a].height,maxWidth:this._maxSize.width,maxHeight:this._maxSize.height,layerWidth:Math.round(s[a].width*d),layerHeight:Math.round(s[a].height*d),maxDisplayedWidth:s[a].width+E(c.width-s[a].width,50),maxDisplayedHeight:s[a].height+E(c.height-s[a].height,50),minDisplayedWidth:l.width+E(s[a].width-l.width,50),minDisplayedHeight:l.height+E(s[a].height-l.height,50),tileWidth:h.width,tileHeight:h.height,tileImageWidth:i(h.width,d),tileImageHeight:i(h.height,d),viewPortWidth:this._lensSize.width,viewPortHeight:this._lensSize.height});m.parentClass=this,this.levels.push({view:u,controller:m})}this.levels.reverse()}},s.getCurrentShownLevel=function(){var i=null,t=this.levels.length;if(this.isShown)for(var e=t-1;e>=0;e--)if(this.levels[e].controller.isShown){i=this.levels[e].controller;break}return i},s.getScale=function(i){var t,e=this.getCurrentShownLevel(),s=this.levels.length;switch(i){case"zoomin":t=e?this.currentSize.width<e.size.width?A(this._maxSize.width,e.size.width):e.id!==s?A(this._maxSize.width,this.levels[e.id].controller.size.width):A(this._maxSize.width,this.levels[s-1].controller.size.width):A(this._maxSize.width,this.levels[0].controller.size.width);break;case"zoomout":t=e?this.currentSize.width>e.size.width?A(this._maxSize.width,e.size.width):e.id>1?A(this._maxSize.width,this.levels[e.id-2].controller.size.width):A(this._maxSize.width,this._minSize.width):A(this._maxSize.width,this._minSize.width)}return t},s.show=function(){return this.isShown||(this.isShown=!0,this.view.show()),this},s.hide=function(){return this.isShown&&(this.isShown=!1,this.view.hide(),this.levels.forEach((function(i){i.view.destroy(),i.controller.destroy()})),this.setDefaultVars()),this},s.action=function(i,t){return this.isShown&&(this.currentSize=e.convertScaleToSize(this._maxSize,t),this.levels.forEach((function(e){e.controller.action(i,t)})),R&&R.setData({zoom:o.round(this.currentSize.width/this._minSize.width,1,this.currentSize.width===this._maxSize.width)})),this},s.loadImages=function(){this.isShown&&this.levels.forEach((function(i){i.controller.loadImages()}))},s.resize=function(){var i=this;this.isShown&&this.levels.forEach((function(t){t.controller.resize(i._lensSize)}))},s.destroy=function(){this.hide(),this.off("getTile"),this.off("zoomCancelLoadingOfTiles"),t.prototype.destroy.call(this)},i.createClass(e,[{key:"hash",set:function(i){this._hash=""+n.getHashCode(i)}},{key:"lensSize",set:function(i){this._lensSize.width=i.width,this._lensSize.height=i.height}},{key:"minSize",set:function(i){this._minSize.width=i.width,this._minSize.height=i.height}},{key:"maxSize",set:function(i){this._maxSize.width=i.width,this._maxSize.height=i.height,this.originSize.width=i.originWidth,this.originSize.height=i.originHeight,this.createLevels()}},{key:"image",set:function(i){this.isShown&&(this.levels[i.level-1].controller.image=i)}}]),e}(h),function(t){"use strict";function e(e,s){var o;return(o=t.call(this)||this).view=new w(e,"sirv"),o.controller=new f(o.view,s),o.controller.parentClass=i.assertThisInitialized(o),o}i.inheritsLoose(e,t);var s=e.prototype;return s.loadImages=function(){this.controller.loadImages()},s.getScale=function(i){return this.controller.getScale(i)},s.show=function(){this.controller.show()},s.hide=function(){this.controller.hide()},s.action=function(i,t){this.controller.action(i,t)},s.resize=function(){this.controller.resize()},s.destroy=function(){this.controller.destroy(),this.controller=null,this.view.destroy(),this.view=null,t.prototype.destroy.call(this)},i.createClass(e,[{key:"lensSize",set:function(i){this.controller.lensSize=i}},{key:"image",set:function(i){this.controller.image=i}},{key:"hash",set:function(i){this.controller.hash=i}},{key:"minSize",set:function(i){this.controller.minSize=i}},{key:"maxSize",set:function(i){this.controller.maxSize=i}}]),e}(h)),N=function(){var t=function(){"use strict";function t(i,t){this.pn=a(i);var e="sirv-zoom-lens";this.c=n.$new("div"),this.c.addClass(e+"-wrapper"),this.ic=n.$new("div"),this.ic.addClass(e),this.ic.appendTo(this.c),this.img=null,this.bwImg=null,t&&this.c.addEvent("mousedown",(function(i){i.stop()}))}var e=t.prototype;return e.calcContainerPosition=function(){if(["img","canvas"].includes(this.pn.tagName)){var i=this.pn.position,t=a(this.pn.node.parentNode).position;this.c.setCss({top:i.top-t.top,left:i.left-t.left})}},e.setTransform=function(i,t){this.ic.setCssProp("transform","translate3d("+i+"px,"+t+"px, 0px)"),this.img&&this.img.setCssProp("transform","translate3d("+-1*i+"px, "+-1*t+"px, 0px)")},e.show=function(i,t){i&&(this.img=a(i)),this.calcContainerPosition(),this.imageSize=t,this.img&&this.ic.append(this.img);var e=this.pn;["img","canvas"].includes(e.tagName)&&(e=a(e.node.parentNode)),e.append(this.c)},e.hide=function(){this.c.remove(),this.img&&(this.img.remove(),this.img=null,this.bwImg&&(this.bwImg.remove(),this.bwImg=null))},e.destroy=function(){this.c.removeEvent("mousedown"),this.c.remove()},i.createClass(t,[{key:"container",get:function(){return this.c}},{key:"imageSize",set:function(i){this.img&&[this.img,this.bwImg].forEach((function(t){t&&t.setCss({top:0,left:0,width:i.width,height:i.height,position:"absolute"})}))}},{key:"size",get:function(){return this.pn.size}},{key:"containerSize",set:function(i){this.c.setCss({width:i.width,height:i.height})}},{key:"insideContainerSize",set:function(i){this.ic.setCss({width:i.width,height:i.height})}},{key:"insideContainerFontSize",set:function(i){this.ic.setCssProp("font-size",Math.max(i.width,i.height)+"px")}}]),t}(),e=function(i,t){return Math.abs(i-t)},s=function(i,t,e){return(i-t)*e},o=function(){"use strict";function t(i){this.view=i,this.pSize={width:0,height:0},this.inDoc=!1,this.timer=null,this.isPlaying=!1,this.pos={x:null,y:null},this.dPos={x:null,y:null},this._size={width:0,height:0},this.dSize={width:0,height:0}}var o=t.prototype;return o.doAnimation=function(){var i=!1,t=.001;return(e(this.pos.x,this.dPos.x)>t||e(this.pos.y,this.dPos.y)>t||e(this._size.width,this.dSize.width)>t||e(this._size.height,this.dSize.height)>t)&&(i=!0),i},o.animate=function(){var i=this;this.isPlaying=!0;var t=.4,e=s(this.pos.x,this.dPos.x,t),o=s(this.pos.y,this.dPos.y,t),h=s(this._size.width,this.dSize.width,t),n=s(this._size.height,this.dSize.height,t);this.dPos.x+=e,this.dPos.y+=o,this.dSize.width+=h,this.dSize.height+=n,this.setCss(),this.doAnimation()?this.timer=setTimeout((function(){i.animate()}),16):this.stopAnimation()},o.setCss=function(){var i=this._size,t=this.dSize;(e(i.width,t.width)>0||e(i.height,t.height)>0)&&(this.view.insideContainerSize=t,this.view.insideContainerFontSize=this.pSize),this.view.setTransform(Math.round(this.dPos.x),Math.round(this.dPos.y))},o.stopAnimation=function(){this.isPlaying&&(this.isPlaying=!1,clearTimeout(this.timer),this.dPos.x=this.pos.x,this.dPos.y=this.pos.y,this.dSize.width=this._size.width,this.dSize.height=this._size.height,this.setCss())},o.setSizes=function(){var i=this.view.size;this.pSize=i,this.view.containerSize=i,this.view.insideContainerFontSize=i},o.show=function(i){this.inDoc||(this.inDoc=!0,this.setSizes(),this.view.show(i,this.pSize))},o.hide=function(){this.inDoc&&(this.inDoc=!1,this.view.hide(),this.pos={x:null,y:null},this.dPos={x:null,y:null},this._size={width:0,height:0},this.dSize={width:0,height:0})},o.resize=function(){this.inDoc&&(this.setSizes(),this.view.calcContainerPosition())},o.destroy=function(){this.stopAnimation(),this.inDoc=!1},i.createClass(t,[{key:"size",set:function(i){this._size.width=i.width,this._size.height=i.height,this.inDoc&&null!==this.dPos.x&&(this.isPlaying||this.animate())}},{key:"position",set:function(i){var t=this._size,e=this.pSize,s=i.x-t.width/2,o=i.y-t.height/2;s<0&&(s=0),o<0&&(o=0),s>e.width-t.width&&(s=e.width-t.width),o>e.height-t.height&&(o=e.height-t.height),this.pos.x=s,this.pos.y=o,null===this.dPos.x&&(this.dPos.x=s,this.dPos.y=o),this.inDoc&&(this.isPlaying||this.animate())}}]),t}();return function(){"use strict";function e(i,e){this.view=new t(i,e),this.controller=new o(this.view)}var s=e.prototype;return s.addEventToMainContainer=function(i,t){this.view.container.addEvent(i,t)},s.removeEventToMainContainer=function(i,t){t?this.view.container.removeEvent(i,t):this.view.container.removeEvent(i)},s.clearEvents=function(){this.view.container.clearEvents()},s.show=function(i){this.controller.show(i)},s.hide=function(){this.controller.hide()},s.destroy=function(){this.controller.destroy(),this.view.destroy()},i.createClass(e,[{key:"boundaries",get:function(){return this.view.container.node.getBoundingClientRect()}},{key:"size",set:function(i){this.controller.size=i}},{key:"position",set:function(i){this.controller.position=i}}]),e}()}(),H=function(){var t=function(){"use strict";function t(i){this.p=a(i);var t="sirv-zoom-map";this.c=n.$new("div"),this.c.addClass(t),this.lens=n.$new("div"),this.lens.addClass(t+"-lens"),this._img=null,this.b=a(n.D.node.body),this.c.append(this.lens)}var e=t.prototype;return e.calcRightPosition=function(i,t){var e=this.c.rect;return{x:i-e.left,y:t-e.top}},e.addDomEventToDocBody=function(i,t){this.b.addEvent(i,t)},e.removeDomEventToDocBody=function(i,t){this.b.removeEvent(i,t)},e.addDomEventToLens=function(i,t){this.lens.addEvent(i,t)},e.addDomEvent=function(i,t){this.c.addEvent(i,t)},e.removeEvents=function(){this.c.removeEvent(["btnclick","tap"]),this.c.removeEvent(["mousedown","touchstart"]),this.lens.removeEvent(["mousedown","touchstart"]),this.c.removeEvent(["mousemove","touchmove"])},e.addLensCss=function(i,t,e){this.lens.setCss({top:i.top-1+"px",left:i.left-1+"px",width:t.width+"px",height:t.height+"px","font-size":e+"px"})},e.removeEventTransitionEvent=function(){this.c.removeEvent("transitionend")},e.show=function(i){var t=this;this.c.setCss({opacity:0,transition:"opacity .3s linear"}),this.p.append(this.c),this.c.render(),this.removeEventTransitionEvent(),this.c.addEvent("transitionend",(function(e){e.stop(),t.removeEventTransitionEvent(),t.c.setCssProp("transition",""),t.addDomEvent(["mousedown","touchstart"],(function(i){i.stop()})),i()})),this.c.setCssProp("opacity",1)},e.hide=function(i,t){var e=this;this.removeEventTransitionEvent(),i?(this.c.remove(),this.removeEvents(),t()):this.c.addEvent("transitionend",(function(i){i.stop(),e._removeEventTransitionEvent(),e.c.setCssProp("transition",""),e.c.remove(),e.removeEvents(),t()})),this.c.setCssProp("opacity",0)},e.destroy=function(){this.c=null,this.lens=null},i.createClass(t,[{key:"cursor",set:function(i){this.c.setCssProp("cursor",i)}},{key:"size",set:function(i){this.c.setCss({width:i.width+"px",height:i.height+"px"})}},{key:"img",set:function(i){this._img=n.$new("img",{src:i.src}),i.srcset&&this._img.attr("srcset",i.srcset+" 2x"),this.c.append(this._img)}}]),t}(),s=function(i,t,e){return n.defined(t)||(t=0),n.defined(e)||(e=100),Math.min(Math.max(i,t),e)},r=function(t){"use strict";function h(i,s){var o;return(o=t.call(this)||this).view=i,o.o=s,o.state=e.APPEARANCE.HIDDEN,o.scale={x:1,y:1},o.viewPortSize={width:0,height:0},o.bISize={width:0,height:0},o.cBISize={width:0,height:0},o.cBIPosition={top:0,left:0},o.mapSize={width:0,height:0},o.ls={width:0,height:0},o.lp={top:0,left:0},o.clp={x:0,y:0},o.isDragMoved=!1,o}i.inheritsLoose(h,t),h.setInTheCenter=function(i){return i<50?i=Math.max(i-(50-i),0):i>50&&(i=Math.min(i+(i-50),100)),i};var r=h.prototype;return r.getPercentPosition=function(i,t){var e=this.mapSize,h=this.view.calcRightPosition(i,t);return{x:i=s(o.round(I(h.x,e.width),1)),y:t=s(o.round(I(h.y,e.height),1))}},r.isInside=function(i,t){var e=!1,s=this.lp,o=this.ls,h=this.view.calcRightPosition(i,t);return s.left<h.x&&s.left+o.width>h.x&&s.top<h.y&&s.top+o.height>h.y&&(e=!0),e},r.addEvents=function(){var i=this,t=1,e=!1;this.dragEndHandler=function(t){e&&(t.stop(),e=!1,i.clp={x:0,y:0},i.view.cursor="",i.view.removeDomEventToDocBody(t.type,i.dragEndHandler),i.view.removeDomEventToDocBody("mouseout",i.mouseOutHandler))},this.mouseOutHandler=function(t){t.stop(),t.oe.relatedTarget&&"HTML"!==t.oe.relatedTarget.tagName||!e||(i.dragEndHandler(t),i.view.removeDomEventToDocBody(["mouseup","touchend"],i.dragEndHandler))},this.view.addDomEvent(["btnclick","tap"],(function(t){t.stop(),i.emit("zoomMapNewPosition",{data:i.getPercentPosition(t.x,t.y)})})),this.view.addDomEventToLens(["mousedown","touchstart"],(function(s){var o=s.pageXY;if(i.isInside(o.x,o.y)){s.stop(),t=1;var h=function(i){var t,e={x:0,y:0},s=i.originEvent;return n.defined(s.offsetX)?(e.x=s.offsetX,e.y=s.offsetY):(t=a(i.target).position,e.x=s.targetTouches[0].pageX-t.left,e.y=s.targetTouches[0].pageY-t.top),e}(s);i.clp.y=h.y,i.clp.x=h.x,e=!0,i.view.addDomEventToDocBody(["mouseup","touchend"],i.dragEndHandler),i.view.addDomEventToDocBody("mouseout",i.mouseOutHandler)}})),this.view.addDomEvent(["mousemove","touchmove"],(function(s){if(e){if(t<=0){s.stop();var o=s.pageXY;i.view.cursor="move",i.emit("zoomMapNewPosition",{data:i.getPercentPosition(o.x,o.y)})}t--}}))},r.calcMap=function(i,t,e,s){var o=this.o.maxwidth,h=this.o.maxheight;e<=o&&(h=(o=e/2)*(t/i)),s<=h&&(o=(h=s/2)*(i/t)),o/h>i/t?o=h*(i/t):h=o*(t/i),o=parseInt(o,10),h=parseInt(h,10),this.mapSize.width=o,this.mapSize.height=h,this.viewPortSize.width=e,this.viewPortSize.height=s,this.bISize.width=i,this.bISize.height=t},r.prepare=function(i,t,e,s){this.calcMap(i,t,e,s),this.view.size=this.mapSize,this.emit("zoomGetImage",{data:{width:this.mapSize.width,height:this.mapSize.height}})},r.move=function(i,t){var e=this.bISize,s=e.width*t.x,o=e.height*t.y,h=Math.abs(i.y+(e.height-o)/2),n=Math.abs(i.x+(e.width-s)/2);this.scale.x=t.x,this.scale.y=t.y,this.lensSize={width:s,height:o},this.lensPosition={top:h,left:n},this.view.addLensCss(this.lp,this.ls,Math.max(this.mapSize.width,this.mapSize.height))},r.show=function(){var i=this;[e.APPEARANCE.SHOWING,e.APPEARANCE.SHOWN].includes(this.state)||(this.state=e.APPEARANCE.SHOWING,this.view.show((function(){i.addEvents(),i.state=e.APPEARANCE.SHOWN})))},r.hide=function(i){var t=this;[e.APPEARANCE.HIDDEN,e.APPEARANCE.HIDING].includes(this.state)&&!i||(this.state=e.APPEARANCE.HIDING,this.view.hide(i,(function(){t.view.removeDomEventToDocBody(["mouseup","touchend"],t.dragEndHandler),t.state=e.APPEARANCE.HIDDEN})))},r.resize=function(i,t,e,s,o,h){this.o.maxwidth=i,this.o.maxheight=t,this.calcMap(e,s,o,h),this.view.size=this.mapSize},r.destroy=function(){this.hide(!0),t.prototype.destroy.call(this)},i.createClass(h,[{key:"lensPosition",set:function(i){var t=this.cBISize,e=this.mapSize,s=e.height/t.height*i.top,o=e.width/t.width*i.left;this.cBIPosition.top=i.top,this.cBIPosition.left=i.left,s<0&&(s=0),o<0&&(o=0);var h=this.ls;s+h.height>e.height&&(s=e.height-h.height),o+h.width>e.width&&(o=e.width-h.width),this.lp.top=s,this.lp.left=o}},{key:"lensSize",set:function(i){this.cBISize.width=i.width,this.cBISize.height=i.height;var t=this.mapSize,e=this.viewPortSize;this.ls.width=e.width>=i.width?t.width:e.width/i.width*t.width,this.ls.height=e.height>=i.height?t.height:e.height/i.height*t.height}}]),h}(h);return function(e){"use strict";function s(s,o){var h;return(h=e.call(this)||this).options=Object.assign({maxwidth:200,maxheight:200},o||{}),h.view=new t(s),h.controller=new r(h.view,h.options),h.controller.parentClass=i.assertThisInitialized(h),h}i.inheritsLoose(s,e);var o=s.prototype;return o.prepare=function(i,t,e,s){this.controller.prepare(i,t,e,s)},o.move=function(i,t){this.controller.move(i,t)},o.show=function(){this.controller.show()},o.hide=function(i){this.controller.hide(i)},o.resize=function(i,t,e,s,o,h){this.controller.resize(i,t,e,s,o,h)},o.destroy=function(){this.controller.destroy(),this.view.destroy(),e.prototype.destroy.call(this)},i.createClass(s,[{key:"img",set:function(i){this.view.img=i}}]),s}(h)}(),O=function(){"use strict";function t(i){this.pn=a(i);var t,e="sirv-zoom";this.cnv=n.$new("div"),this.cnv.addClass(e),this.node=n.$new("div").setCss({opacity:0}),this.node.addClass("sirv-zoom-wrapper"),this.zoomWrapper=n.$new("div").addClass("sirv-zoom-image-wrapper"),this.zoom=(t=this.pn,a(a(t).node.getElementsByTagName("img")[0]||a(t).node.getElementsByTagName("canvas")[0]||t)),this.lens=n.D.node.body,this.isBody=!0,this.image=null,this.perspective="",n.browser.mobile&&"ios"===n.browser.platform&&(this.perspective="perspective(1000px) ")}var e=t.prototype;return e.addScrollEvent=function(i){n.W.addEvent("scroll",i)},e.removeScrollEvent=function(i){i?n.W.removeEvent("scroll",i):n.W.removeEvent("scroll")},e.addClassToWrapper=function(i){this.node.addClass("sirv-"+i+"-zoom")},e.addEventToMainContainer=function(i,t){this.cnv.addEvent(i,t)},e.removeEventFromMainContainer=function(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];this.cnv.removeEvent(t)},e.addEventToWrapper=function(i,t){this.node.addEvent(i,t)},e.removeEventFromWrapper=function(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];this.node.removeEvent(t)},e.addMouseoutEvent=function(i){var t=this;this.addEventToWrapper("mouseout",(function(e){var s=e.related;if(s){for(;s&&s!==t.node.node&&s!==t.lens.node;)s=s.parentNode;t.node.node!==s&&i(e)}}))},e.toggleCursorClass=function(i,t){this.cnv.removeClass(i).addClass(t)},e.setImagePosition=function(i,t){this.image&&this.zoomWrapper.setCssProp("transform",this.perspective+"translate3d("+i.x+"px, "+i.y+"px, 0) scale("+t.x+", "+t.y+")")},e.addStartCss=function(){this.lensStyle={opacity:0,transform:"scale(0)"}},e.appendNodes=function(i,t){this.cnv.addEvent("contextmenu",(function(i){i.stopDefaults()})),this.image=a(i),this.image.setCss({width:t.width+"px",height:t.height+"px"}),n.browser.mobile||this.image.addEvent("mousedown",(function(i){i.stopDefaults()})),this.zoomWrapper.append(this.image),this.node.append(this.zoomWrapper),this.node.appendTo(this.cnv),this.cnv.appendTo(this.lens,!1)},e.setLensCss=function(i,t,e){this.lensPosition=i,this.lensSize=t,this.lensStyle={opacity:1,transform:"scale(1)",transition:e||"none"}},e.setImageSize=function(i,t,e){this.zoomWrapper.setCss({top:0,left:0,width:t.width+"px",height:t.height+"px","transform-origin":"50% 50%",transform:this.perspective+"translate3d("+i.x+"px, "+i.y+"px, 0) scale("+e.x+", "+e.y+")"}),this.zoomWrapper.render(),this.image.setCss({width:"100%",height:"100%"}),this.image.render()},e.clearCss=function(){this.node.setCss({transition:"",opacity:"",transform:""}),this.node.removeAttr("style"),this.image&&this.image.setCss({width:"",height:""}),this.zoomWrapper.setCss({top:"",left:"",width:"",height:"",transition:"",transform:""})},e.clearDOM=function(){this.image&&(this.image.remove(),this.image=null),this.zoomWrapper.remove(),this.node.remove(),this.cnv.remove()},e.removeEvents=function(){this.cnv.clearEvents(),this.image&&this.image.clearEvents(),this.node.clearEvents()},e.destroy=function(){this.image&&(this.image.remove(),this.image=null),this.zoomWrapper.remove(),this.node.remove(),this.cnv.remove()},i.createClass(t,[{key:"hash",get:function(){return this.image?this.image.$J_UUID+""||this.image.attr("src"):null}},{key:"parentSize",get:function(){return this.pn.size}},{key:"parentPostion",get:function(){return this.pn.position}},{key:"zoomSize",get:function(){return this.zoom.size}},{key:"parentBoundaries",get:function(){return this.cnv.node.parentNode?this.cnv.node.getBoundingClientRect():null}},{key:"lensContainer",set:function(i){i||(i=a(n.D.node.body)),this.isBody=a(i)===a(n.D.node.body),this.lens=a(i)}},{key:"eventNodePositionSize",set:function(i){var t=i.position.top,e=i.position.left;if(!this.isBody){var s=this.lens.position;t-=s.top,e-=s.left}this.cnv.setCss({top:t,left:e,width:i.size.width,height:i.size.height})}},{key:"lensStyle",set:function(i){this.node.setCss(i)}},{key:"lensPosition",set:function(i){this.lensStyle={top:i.top,left:i.left}}},{key:"lensSize",set:function(i){this.lensStyle={width:i.width,height:i.height}}},{key:"boundaries",get:function(){return this.cnv.node.getBoundingClientRect()}}]),t}(),L=function(t){"use strict";function e(i){var e;return(e=t.call(this,i)||this).mouseMoveHandler=null,e}i.inheritsLoose(e,t);var s=e.prototype;return s.getContainerForMap=function(){return this.node},s.addStartCss=function(){t.prototype.addStartCss.call(this),this.node.addEvent("mousescroll",(function(i){i.stop()})),this.lensStyle={opacity:0,transform:"scale(1)"}},s.removeDragstart=function(){this.node.del("event:mousedrag:dragstart")},s.addEventsCanvasClass=function(i){this.cnv.addClass(i)},s.removeEventsCanvasClass=function(i){this.cnv.removeClass(i)},s.getContainerSize=function(){return this.node.size},s.getContainerPosition=function(){return this.node.position},s.addGlobalEvent=function(i){this.mouseMoveHandler||(this.mouseMoveHandler=i,n.D.addEvent("mousemove",i))},s.removeGlobalEvent=function(){this.mouseMoveHandler&&(n.D.removeEvent("mousemove",this.mouseMoveHandler),this.mouseMoveHandler=null)},s.removeEvents=function(){t.prototype.removeEvents.call(this),this.removeGlobalEvent()},e}(O),Z=function(t){"use strict";function e(){return t.apply(this,arguments)||this}return i.inheritsLoose(e,t),i.createClass(e,[{key:"parentSize",get:function(){return this.zoom.size}},{key:"parentPostion",get:function(){return this.zoom.position}}]),e}(O),_=function(t){"use strict";function e(){return t.apply(this,arguments)||this}i.inheritsLoose(e,t);var s=e.prototype;return s.getImageForEye=function(){return this.image.node.cloneNode()},s.getNodeForEye=function(){return this.zoom},s.setCanvasNodeSize=function(i){this.cnv.setCss({width:i.width,height:i.height})},s.addStartCss=function(i){this.lensStyle={opacity:0,transform:"translate3d("+i.start.x+"%, "+i.start.y+"%, 0px)"}},s.setLensCss=function(i,e,s){this.cnv.setCss({top:i.top,left:i.left}),t.prototype.setLensCss.call(this,i,e,s)},s.addMouseMoveEvent=function(i){n.W.addEvent("mousemove",i)},s.removeMouseMoveEvent=function(i){n.W.removeEvent("mousemove",i)},s.clearCss=function(){this.cnv.removeAttr("style")},i.createClass(e,[{key:"lensPosition",set:function(i){this.cnv.setCss({top:i.top,left:i.left})}},{key:"parentSize",get:function(){return this.zoom.size}},{key:"parentPostion",get:function(){return this.zoom.position}}]),e}(O),W=(S=0,z=1,function(){"use strict";function i(i,t){this.state=S,this.id=null,this.cb=i||function(){},this.stopCb=t||function(){}}var t=i.prototype;return t.start=function(){var i=this;if(this.state!==z){this.state=z;var t=function(e){i.cb(e),i.state!==S&&(i.id=requestAnimationFrame(t))};this.id=requestAnimationFrame(t)}},t.stop=function(){this.state!==S&&(this.state=S,cancelAnimationFrame(this.id),this.stopCb())},i}()),R=null,B=function(t){"use strict";function s(i,s){var o;return(o=t.call(this)||this).o=Object.assign({test:!1,pan:!1,smoothing:!0,tiles:!0,customZooming:!0,clickBehavior:"both",upscale:!1,trigger:"hover"},s),o.view=i,o.state=e.APPEARANCE.HIDDEN,o._x=0,o._y=0,o.baseScale={x:1,y:1},o.scale={x:1,y:1},o.dScale={x:1,y:1},o.iSize={width:0,height:0},o.iPos={x:0,y:0},o.iDPos={x:0,y:0},o.pPos={top:0,left:0},o.pSize={width:0,height:0},o.anim=null,o.animCb=null,o.animStep=0,o.lastAnimTimer=0,o.deepZoom=null,o.deepZoomTimer=null,o.lensSize={width:0,height:0},o.lensHalfSize={width:0,height:0},o.lensPosition={top:0,left:0},o.currentLensSize={width:100,height:100},o.dppx=1,o.zoomNodeSize={width:0,height:0},o.boundaries=null,o.ANIM_STEP=.1,o.nonDeepZoomImageLevels=[],o.scrollHandler=function(){[e.APPEARANCE.SHOWING,e.APPEARANCE.SHOWN].includes(o.state)&&o.hide(o.state===e.APPEARANCE.SHOWING)},o}i.inheritsLoose(s,t);var h=s.prototype;return h.init=function(){this.getAllSizes(),this.view.setLensCss(this.lensPosition,this.lensSize),this.createDeepZoom(),this.createAnimation(this.ANIM_STEP),this.view.addScrollEvent(this.scrollHandler)},h.createDeepZoom=function(){var i=this;this.deepZoom=new k(this.view.node,{tiles:this.o.tiles,inner:["inner","outside"].includes(this.o.type),upscale:this.o.upscale}),this.deepZoom.parentClass=this,this.on("getTile",(function(t){t.stopAll(),i.emit("zoomGetImage",{data:t.data})})),this.on("zoomCancelLoadingOfTiles",(function(i){i.stopEmptyEvent()}))},h.getBoundaries=function(){this.boundaries=this.view.parentBoundaries},h.getAllSizes=function(){this.pSize=this.view.parentSize,this.pPos=this.view.parentPostion,this.zoomNodeSize=this.view.zoomSize,this.getBoundaries()},h.deepZoomAction=function(i,t){var e=this;clearTimeout(this.deepZoomTimer),this.deepZoomTimer=setTimeout((function(){e.deepZoom.loadImages(),t&&(e.deepZoom.lensSize=t,e.deepZoom.resize()),e.deepZoom.action(e.iDPos,e.dScale),i||e.deepZoomAction(e.dScale.x===e.scale.x)}),this.lastAnimTimer+10),t&&(this.deepZoom.lensSize=t,this.deepZoom.resize()),this.deepZoom.action(this.iDPos,this.dScale)},h.stopMovingAndZooming=function(){this.scale.x=this.dScale.x,this.scale.y=this.dScale.y,this.iPos.x=this.iDPos.x,this.iPos.y=this.iDPos.y},h.createAnimation=function(i){var t=this;this.animStep=i;var e=0;this.anim=new W((function(s){if(e){var h,n,a,r,l=!1;t.lastAnimTimer=s-e,e=s;var c,d,u=!1,p=!1;t.scale.x!==t.dScale.x&&(l=!0,t.sendZoomingAction(),h=(a=t.scale.x-t.dScale.x)*t.animStep,t.dScale.x+=h,t.dScale.y+=h,c="x",d=!1,t.dScale[c]<t.baseScale[c]&&(d=!0,t.dScale[c]=t.baseScale[c]),t.dScale[c]>1&&(d=!0,t.dScale[c]=1),p=u=d,Math.abs(a)<1e-4&&(t.dScale.x=t.scale.x,t.dScale.y=t.scale.x)),t.iPos.x===t.iDPos.x&&t.iPos.y===t.iDPos.y||(l=!0,a=t.iPos.x-t.iDPos.x,r=t.iPos.y-t.iDPos.y,h=a*t.animStep,n=r*t.animStep,t.iDPos.x+=h,t.iDPos.y+=n,t.iDPos.x=o.round(t.iDPos.x,4),t.iDPos.y=o.round(t.iDPos.y,4),(Math.max(Math.abs(a),Math.abs(r))<1||u||p)&&(t.iDPos.x=t.iPos.x,t.iDPos.y=t.iPos.y)),l?t.render(t.iDPos,t.dScale):t.animCb&&(t.animCb(),t.animStep=i,t.animCb=null)}else e=s}),(function(){e=0}))},h.render=function(i,t){this.deepZoomAction(),this.view.setImagePosition(i||this.iDPos,t||this.dScale)},h.correctX=function(i){return i-this.pPos.left},h.correctY=function(i){return i-this.pPos.top},h.getZoomData=function(i){var t=0;return i||(i=this.scale.x),(this.shown||this.showing)&&(t=o.round((i-this.baseScale.x)/(1-this.baseScale.x),2)),t},h.zoom=function(i,t,e){var s=this.scale.x,o=this.iSize,h=o.width*this.scale.x,n=o.height*this.scale.y,a=C(o.width,h),r=C(o.height,n);t=t||this.pPos.left+this.lensHalfSize.width,e=e||this.pPos.top+this.lensHalfSize.height,this.basePercentOfScale={x:I(Math.abs(this.iPos.x)+this.correctX(t)-a,h),y:I(Math.abs(this.iPos.y)+this.correctY(e)-r,n)};var l=this.deepZoom.getScale(i);this.scale.x=l,this.scale.y=l,this.x=t,this.y=e,this.afterZoom(s)},h.afterZoom=function(i){i!==this.scale.x&&(this.sendZoomingAction(),this.setCursorState(),this.o.smoothing?this.animStep=.25:(this.dScale.x=this.scale.x,this.dScale.y=this.scale.y,this.iDPos.x=this.iPos.x,this.iDPos.y=this.iPos.y,this.render(this.iPos,this.scale)))},h.zoomUp=function(i,t){return!(!this.shown&&!this.showing||1===this.scale.x)&&(this.zoom("zoomin",i,t),!0)},h.zoomDown=function(i,t){return!(!this.shown&&!this.showing||this.scale.x===this.baseScale.x)&&(this.zoom("zoomout",i,t),!0)},h.sendZoomingAction=function(){var i=this;clearTimeout(this.zoomingTimer),this.zoomingTimer=setTimeout(a((function(t){i.emit("zooming",{data:{zoom:i.getZoomData(),from:t,to:i.scale.x}})})).bind(this,this.dScale.x),24)},h.setCursorState=function(i){if(!n.defined(i)){var t=this.getZoomData();0===t?i="zoomIn":1===t?i="zoomOut":t>0&&t<1&&(i="up"===this.o.clickBehavior?"zoomIn":"zoomOut")}this.currentCursorState!==i&&(this.view.toggleCursorClass(y[this.currentCursorState],y[i]),this.currentCursorState=i)},h.setImage=function(i){var t=i.node;if(this.shown||this.showing){var e=Object.assign({},i.callbackData);e.node=t,this.deepZoom.image=e}},h.setLensSize=function(i,t){this.lensSize={width:i,height:t},this.lensHalfSize={width:this.lensSize.width/2,height:this.lensSize.height/2}},h.calcLensSize=function(){var i=this.pSize,t=this.currentLensSize;this.setLensSize(E(i.width,t.width),E(i.height,t.height))},h.getBaseScale=function(){this.baseScale={x:this.zoomNodeSize.width/this.iSize.width,y:this.zoomNodeSize.height/this.iSize.height}},h.calcLensPosition=function(){},h.getImagePosition=function(){},h.showDeepZoom=function(i,t){if(this.deepZoom){this.o.test&&!R&&((R=new M).parentClass=this);var e=this.view.hash;e&&(this.deepZoom.hash=e),this.deepZoom.lensSize=this.lensSize,this.deepZoom.minSize=this.zoomNodeSize,this.deepZoom.maxSize=Object.assign({originWidth:i,originHeight:t},this.iSize),this.deepZoom.show()}},h.endOfShowing=function(i){var t=!1;return this.state===e.APPEARANCE.SHOWING&&(t=!0,this.state=e.APPEARANCE.SHOWN,i||this.setEvents(),this.setCursorState(),this.o.smoothing||this.deepZoomAction()),t},h.sendZoomShownEvent=function(){this.emit("zoomShown",{data:{clientPosition:{x:this._x,y:this._y},pagePosition:{x:this.pPos.left,y:this.pPos.top}}})},h.showCenter=function(i,t,e){this.getAllSizes();var s=this.pPos.left+this.pSize.width/2,o=this.pPos.top+this.pSize.height/2;return this.show(i,t,s,o,!1,e)},h.show=function(){return this.state===e.APPEARANCE.HIDDEN&&(this.state=e.APPEARANCE.SHOWING,!0)},h.endOfHiding=function(){this.stopMovingAndZooming(),clearTimeout(this.hideTimer),this.anim.stop(),this.setCursorState("zoomIn"),this.view.clearCss(),this.baseScale={x:1,y:1},this.scale={x:1,y:1},this.dScale={x:1,y:1},this.setUpEvent=!1,this.basePercentOfScale={x:0,y:0},clearTimeout(this.deepZoomTimer),this.deepZoom.hide(),this.view.clearDOM(),this.state=e.APPEARANCE.HIDDEN,R&&(R.destroy(),R=null),this.emit("zoomHidden",{data:{clientPosition:{x:this._x,y:this._y},pagePosition:{x:this.pPos.left,y:this.pPos.top}}})},h.hide=function(i){return!![e.APPEARANCE.SHOWN,e.APPEARANCE.SHOWING].includes(this.state)&&(this.state=e.APPEARANCE.HIDING,this.view.removeEvents(),i?(clearTimeout(this.deepZoomTimer),this.deepZoom.hide(),this.endOfHiding()):this.stopMovingAndZooming(),!0)},h.addClickEvent=function(){var i=this,t=["btnclick","tap"];"dblclick"===this.o.trigger&&(t=["dblbtnclick","dbltap"]),this.view.addEventToWrapper(t,(function(t){t.stop(),i.x=t.x,i.y=t.y,"up"===i.o.clickBehavior?i.zoomUp(t.x,t.y)||i.hide():i.o.smoothing&&i.scale.x!==i.baseScale.x?i.hide():i.hide(!0)}))},h.customMove=function(i,t){[e.APPEARANCE.HIDDEN,e.APPEARANCE.HIDING].includes(this.state)||this.move(i,t)},h.move=function(i,t){this.x=i,this.y=t,this.afterMove()},h.afterMove=function(){this.o.smoothing||this.render(this.iPos,this.scale)},h.setEvents=function(){},h.setLensStyleOnResize=function(){this.view.lensStyle={top:this.lensPosition.top,left:this.lensPosition.left,width:this.lensSize.width,height:this.lensSize.height}},h.onResize=function(){if(this.state!==e.APPEARANCE.HIDDEN)if(this.state===e.APPEARANCE.HIDING)this.hide(!0);else{if(this.state===e.APPEARANCE.SHOWING&&this.o.smoothing&&(this.state=e.APPEARANCE.SHOWN,this.setEvents(),this.view.removeEventFromWrapper("transitionend"),this.view.lensStyle={transition:""},this.stopMovingAndZooming(),this.view.setImagePosition(this.iPos,this.scale)),this.getAllSizes(),this.zoomNodeSize.width>this.iSize.width||this.zoomNodeSize.height>this.iSize.height)return void this.hide(!0);this.getBaseScale(),this.scale.x=D(this.scale.x,this.baseScale.x,1),this.scale.y=D(this.scale.y,this.baseScale.y,1),this.calcLensSize(),this.calcLensPosition(),this.setLensStyleOnResize(),this.deepZoom.lensSize=this.pSize,this.deepZoom.minSize=this.zoomNodeSize,this.deepZoom.resize(),this.view.eventNodePositionSize={position:this.pPos,size:this.pSize},this.o.smoothing||(this.sendZoomingAction(),this.setCursorState(),this.deepZoomAction(),this.view.setImagePosition(this.iPos,this.scale))}},h.destroy=function(){this.hide(!0),clearTimeout(this.zoomingTimer),this.view.removeScrollEvent(this.scrollHandler),this.setCursorState("canZoom"),clearTimeout(this.deepZoomTimer),this.deepZoom.destroy(),this.deepZoom=null,this.off("getTile"),this.off("zoomCancelLoadingOfTiles"),R&&(R.destroy(),R=null),this.zoomingTimer=null,t.prototype.destroy.call(this)},i.createClass(s,[{key:"lensContainer",set:function(i){this.view.lensContainer=i}},{key:"shown",get:function(){return this.state===e.APPEARANCE.SHOWN}},{key:"showing",get:function(){return this.state===e.APPEARANCE.SHOWING}},{key:"x",set:function(i){this._x=this.correctX(i)}},{key:"y",set:function(i){this._y=this.correctY(i)}},{key:"nextMinZoom",get:function(){var i=this.deepZoom.getScale("zoomout");return i<this.baseScale.x&&(i=this.baseScale.x),this.getZoomData(i)}},{key:"nextMaxZoom",get:function(){var i=this.deepZoom.getScale("zoomin");return i>1&&(i=1),this.getZoomData(i)}}]),s}(h),X=function(t){"use strict";function s(i,e){var s;return(s=t.call(this,i,Object.assign({map:!1,mapSize:50},e))||this).basePercentOfScale={x:0,y:0},s.clonedImage=null,s.hideTimer=null,s.showTimer=null,s.map=null,s.zoomingTimer=null,s.currentCursorState=0,s.innerImagePosition={x:0,y:0},s.setUpEvent=!1,n.browser.mobile&&(s.o.pan=!0,"hover"===s.o.trigger&&(s.o.trigger="click")),s.view.setLensCss(s.lensPosition,s.lensSize),s.ANIM_STEP=.3,s}i.inheritsLoose(s,t);var o=s.prototype;return o.init=function(){t.prototype.init.call(this),this.createZoomMap()},o.createZoomMap=function(){var i=this;if(this.o.map){var t=parseInt(E(this.pSize.width/2,this.o.mapSize),10),e=parseInt(E(this.pSize.height/2,this.o.mapSize),10);this.map=new H(this.view.getContainerForMap(),{maxwidth:t,maxheight:e}),this.map.parentClass=this,this.on("zoomGetImage",(function(i){i.stopEmptyEvent(),i.data.map=!0,i.data.exactSize=!0})),this.on("zoomMapNewPosition",(function(t){t.stopAll(),i.x=i.pPos.left+E(i.lensSize.width,t.data.x),i.y=i.pPos.top+E(i.lensSize.height,t.data.y),i.calcPositionOfImageInCenter(i.scale),i.o.smoothing||(i.deepZoomAction(),i.view.setImagePosition(i.iPos,i.scale),i.map&&i.map.move(i.iPos,i.scale))}))}},o.move=function(i,t){this.x=i,this.y=t,this.calcPositionOfImage(this.scale),this.afterMove()},o.render=function(i,e){t.prototype.render.call(this,i,e),this.map&&this.map.move(i||this.iDPos,e||this.dScale)},o.calcPositionOfImageForPinch=function(i){i||(i=this.dScale);var t,e,s=this.iSize.width*i.x,o=this.iSize.height*i.y,h=C(this.iSize.width,s),n=C(this.iSize.height,o);s>this.lensSize.width?(t=this._x-(E(s,this.basePercentOfScale.x)+h),t=T(t,0-h,h+s,this.lensSize.width)):t=this.lensSize.width/2-(s/2+h),o>this.lensSize.height?(e=this._y-(E(o,this.basePercentOfScale.y)+n),e=T(e,0-n,n+o,this.lensSize.height)):e=this.lensSize.height/2-(o/2+n),this.iPos={x:t,y:e}},o.setScale=function(i,t,s){this.state===e.APPEARANCE.SHOWN&&(n.defined(t)&&(this.x=t,this.y=s),this.scale.x=i,this.scale.y=i,this.scale.x=D(this.scale.x,this.baseScale.x,1),this.scale.y=D(this.scale.y,this.baseScale.y,1),this.calcPositionOfImageForPinch(this.scale),this.sendZoomingAction(),this.setCursorState(),this.o.smoothing||(this.dScale.x=this.scale.x,this.dScale.y=this.scale.y,this.imageDPosition.x=this.imagePosition.x,this.imageDPosition.y=this.imagePosition.y,this.deepZoomAction(),this.view.setImagePosition(this.imagePosition,this.scale),this.map&&this.map.move(this.imagePosition,this.scale)))},o.afterZoom=function(i){this.calcPositionOfImageForPinch(this.scale),t.prototype.afterZoom.call(this,i)},o.calcPositionOfImage=function(i,t,e,s){var o=e||this._x,h=s||this._y;i||(i=this.dScale);var n,a,r=this.iSize.width*i.x,l=this.iSize.height*i.y,c=C(this.iSize.width,r),d=C(this.iSize.height,l);r>this.lensSize.width?(n=o-E(r,I(o,this.pSize.width))-c,n=T(n,0-c,c+r,this.lensSize.width)):n=this.lensSize.width/2-(r/2+c),l>this.lensSize.height?(a=h-E(l,I(h,this.pSize.height))-d,a=T(a,0-d,d+l,this.lensSize.height)):a=this.lensSize.height/2-(l/2+d),this.iPos={x:n,y:a}},o.calcPositionOfImageInCenter=function(i){i||(i=this.dScale);var t=this.iSize.width*i.x,e=this.iSize.height*i.y,s=C(this.iSize.width,t),o=C(this.iSize.height,e),h=this._x/(this.lensSize.width/t),n=this._y/(this.lensSize.height/e);h=this.lensSize.width/2-h-s,n=this.lensSize.height/2-n-o,h=T(h,0-s,s+t,this.lensSize.width),n=T(n,0-o,o+e,this.lensSize.height),this.iPos={x:h,y:n}},o.setImage=function(i){(this.shown||this.showing)&&(i.callbackData.map?this.map&&(this.map.img={src:i.src,srcset:i.srcset}):t.prototype.setImage.call(this,i))},o.endOfShowing=function(i){t.prototype.endOfShowing.call(this,i)&&this.map&&this.map.show()},o.getImagePosition=function(){this.innerImagePosition={x:C(this.lensSize.width,this.zoomNodeSize.width),y:C(this.lensSize.height,this.zoomNodeSize.height)}},o.show=function(i,e,s,o,h,n){var a=this;return!!t.prototype.show.call(this)&&(this.setUpEvent=h,this.iSize={width:e.width,height:e.height},this.view.addStartCss(),this.view.appendNodes(i,this.iSize),this.getAllSizes(),this.x=s,this.y=o,this.calcLensSize(),this.getImagePosition(),this.getBaseScale(),this.showDeepZoom(e.originWidth,e.originHeight),this.showTimer=setTimeout((function(){var i;a.showTimer=null,a.emit("zoomBeforeShow",{data:{}}),n&&"max"!==n&&("zero"===n?(a.scale.x=a.baseScale.x,a.scale.y=a.baseScale.y):(i=a.deepZoom.getScale("zoomin"),a.scale.x=i,a.scale.y=i)),a.calcPositionOfImage(a.scale,!0),a.view.eventNodePositionSize={position:a.pPos,size:a.pSize},a.dScale.x=a.baseScale.x,a.dScale.y=a.baseScale.y,a.iDPos={x:-1*C(a.iSize.width,a.iSize.width*a.dScale.x)+a.innerImagePosition.x,y:-1*C(a.iSize.height,a.iSize.height*a.dScale.y)+a.innerImagePosition.y},a.view.setLensCss(a.lensPosition,a.lensSize),a.view.setImageSize(a.iDPos,a.iSize,a.dScale),a.boundaries=a.view.boundaries,a.map&&a.map.prepare(a.iSize.width,a.iSize.height,a.pSize.width,a.pSize.height),a.o.smoothing&&"zero"!==n?(a.setEvents(),a.animStep=.3,a.animCb=function(){a.deepZoomAction(),a.endOfShowing(!0)}):a.endOfShowing(),a.o.smoothing&&a.anim.start(),a.sendZoomShownEvent()}),0),!0)},o.hide=function(i){var e=this,s=t.prototype.hide.call(this,i);return s&&(clearTimeout(this.showTimer),i||(this.scale.x!==this.baseScale.x||this.scale.y!==this.baseScale.y?(this.animStep=.4,this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y,this.iPos={x:-1*C(this.iSize.width,this.iSize.width*this.scale.x)+this.innerImagePosition.x,y:-1*C(this.iSize.height,this.iSize.height*this.scale.y)+this.innerImagePosition.y},this.animCb=function(){e.endOfHiding()}):this.endOfHiding())),s},o.addMouseScrollEvent=function(){var i=this;this.view.addEventToWrapper("mousescroll",(function(t){if(t.stop(),i.o.pan){var e=i.iSize,s=e.width*i.scale.x,o=e.height*i.scale.y,h=C(e.width,s),n=C(e.height,o);i.basePercentOfScale={x:I(Math.abs(i.iPos.x)+i.correctX(t.x)-h,s),y:I(Math.abs(i.iPos.y)+i.correctY(t.y)-n,o)}}var a,r=i.scale.x;if(t.isMouse){var l=t.delta/E(t.deltaFactor,37);i.scale.x+=l,i.scale.y+=l}else a=t.delta,Math.abs(a)>15&&(a=15,t.delta<0&&(a*=-1)),a/=350,i.scale.x+=a,i.scale.y+=a;i.scale.x=D(i.scale.x,i.baseScale.x,1),i.scale.y=D(i.scale.y,i.baseScale.y,1),i.o.pan?(i.x=t.x,i.y=t.y,i.calcPositionOfImageForPinch(i.scale)):i.calcPositionOfImage(i.scale),r!==i.scale.x&&(i.sendZoomingAction(),i.setCursorState(),i.o.smoothing||(i.dScale.x=i.scale.x,i.dScale.y=i.scale.y,i.iDPos.x=i.iPos.x,i.iDPos.y=i.iPos.y,i.deepZoomAction(),i.view.setImagePosition(i.iPos,i.scale),i.map&&i.map.move(i.iPos,i.scale))),i.hideByTimer()}))},o.hideByTimer=function(){var i=this;clearTimeout(this.hideTimer),this.scale.x<=this.baseScale.x+1e-8&&"outside"!==this.o.type&&(this.hideTimer=setTimeout((function(){i.hide(!0)}),1e3))},o.addInnerTouchDrag=function(){var i,t,e,s,o,h,n=this,a=!1;this.view.addEventToWrapper(x,(function(r){r.stop(),"dragstart"===r.state?(a=!0,n.view.addEventsCanvasClass(y.drag),n.stopMovingAndZooming(),n.x=r.x,n.y=r.y,e=n.iSize.width*n.scale.x,s=n.iSize.height*n.scale.y,o=C(n.iSize.width,e),h=C(n.iSize.height,s),i=r.x,t=r.y):"dragend"===r.state?(a=!1,n.view.removeEventsCanvasClass(y.drag)):a&&(n.x=r.x,n.y=r.y,e>n.lensSize.width?(n.iPos.x+=r.x-i,n.iPos.x=T(n.iPos.x,0-o,o+e,n.lensSize.width)):n.iPos.x=n.lensSize.width/2-(e/2+o),s>n.lensSize.height?(n.iPos.y+=r.y-t,n.iPos.y=T(n.iPos.y,0-h,h+s,n.lensSize.height)):n.iPos.y=n.lensSize.height/2-(s/2+h),n.o.smoothing&&n.o.pan?n.animStep=.3:(n.iDPos.x=n.iPos.x,n.iDPos.y=n.iPos.y,n.deepZoomAction(),n.view.setImagePosition(n.iPos,n.scale),n.map&&n.map.move(n.iPos,n.scale)),i=r.x,t=r.y)}))},o.addInnerPinch=function(){var i,t,s,o,h,n,a,r=this,l=1-this.baseScale.x;this.o.customZooming&&this.view.addEventToWrapper("pinch",(function(c){c.stop(),"pinchstart"===c.state?(clearTimeout(i),r.stopMovingAndZooming(),r.view.node.removeEvent(x),r.scale.x=r.dScale.x,r.scale.y=r.dScale.y,t=r.scale.x,o=1,h=1,n=1,a=r.baseScale.x,r.basePercent=c.centerPoint):"pinchresize"===c.state?r.basePercent=c.centerPoint:"pinchmove"===c.state?(r.x=c.centerPoint.x,r.y=c.centerPoint.y,s=c.scale,n<(s*=t)&&(n=s,a=r.baseScale.x,h=1,o=l/(n-r.baseScale.x)),a>s&&(a=s,n=1,o=1,h=r.baseScale.x/a),s=(r.baseScale.x+(s-r.baseScale.x)*o)*h,r.scale.x=s,r.scale.y=s,r.scale.x=D(r.scale.x,r.baseScale.x,1),r.scale.y=D(r.scale.y,r.baseScale.y,1),r.calcPositionOfImageForPinch(r.scale),r.sendZoomingAction(),r.setCursorState(),r.o.smoothing||(r.dScale.x=r.scale.x,r.dScale.y=r.scale.y,r.iDPos.x=r.iPos.x,r.iDPos.y=r.iPos.y,r.deepZoomAction(),r.view.setImagePosition(r.iPos,r.scale),r.map&&r.map.move(r.iPos,r.scale))):"pinchend"===c.state&&(clearTimeout(i),i=setTimeout((function(){r.addInnerTouchDrag()}),42),r.scale.x<=r.baseScale.x+1e-8&&"outside"!==r.o.type&&r.state!==e.APPEARANCE.HIDING&&(clearTimeout(i),r.hide(!0)))}))},o.hideZoomByMouseOut=function(){var i=this;this.view.addGlobalEvent((function(t){var e,s,o,h,a,r,l;e=t.clientXY,s=i.view.getContainerPosition(),o=i.view.getContainerSize(),h=n.D.scroll,a=!1,r=s.left-h.x,l=s.top-h.y,(e.x<=r||e.y<=l||e.x>=r+o.width||e.y>=l+o.height)&&(a=!0),a&&(i.view.removeGlobalEvent(),i.hide())}))},o.setEvents=function(){var i=this;this.setUpEvent&&n.browser.mobile&&this.view.addEventToWrapper(P,(function(t){t.stop(),i.hide(!0)})),this.o.customZooming&&this.addMouseScrollEvent(),this.addInnerTouchDrag(),this.view.removeDragstart(),this.setUpEvent||this.addInnerPinch(),"hover"!==this.o.trigger?this.addClickEvent():this.hideZoomByMouseOut(),this.o.pan||n.browser.mobile||this.view.addEventToMainContainer(b,(function(t){if(!t.pointerType||"touch"!==t.pointerType){t.stop();var e=t.pageXY;i.move(e.x,e.y)}}))},o.keepOldPosition=function(i){var t=this.iPos.x,e=this.iPos.y,s=this.iSize.width*this.scale.x,o=this.iSize.height*this.scale.y,h=C(this.iSize.width,s),n=C(this.iSize.height,o);t-=(i.width-this.lensSize.width)/2,e-=(i.height-this.lensSize.height)/2,t=s>this.lensSize.width?T(t,0-h,h+s,this.lensSize.width):this.lensSize.width/2-(s/2+h),e=o>this.lensSize.height?T(e,0-n,n+o,this.lensSize.height):this.lensSize.height/2-(o/2+n),this.iPos={x:t,y:e}},o.onResize=function(){var i=this.lensSize;if(t.prototype.onResize.call(this),this.state!==e.APPEARANCE.HIDDEN&&this.state!==e.APPEARANCE.HIDING&&(this.keepOldPosition(i),this.getImagePosition(),this.map)){var s=parseInt(E(this.pSize.width/2,this.o.mapSize),10),o=parseInt(E(this.pSize.height/2,this.o.mapSize),10);this.map.resize(s,o,this.iSize.width,this.iSize.height,this.pSize.width,this.pSize.height),this.o.smoothing||this.map.move(this.iPos,this.scale)}},o.destroy=function(){clearTimeout(this.showTimer),this.map&&(this.map.destroy(),this.map=null,this.off("zoomGetImage"),this.off("zoomMapNewPosition")),t.prototype.destroy.call(this)},i.createClass(s,[{key:"basePercent",set:function(i){if([e.APPEARANCE.SHOWN,e.APPEARANCE.SHOWING].includes(this.state)){var t=this.iSize,s=t.width*this.scale.x,o=t.height*this.scale.y,h=C(t.width,s),n=C(t.height,o);this.basePercentOfScale={x:I(Math.abs(this.iPos.x)+this.correctX(i.x)-h,s),y:I(Math.abs(this.iPos.y)+this.correctY(i.y)-n,o)}}}}]),s}(B),Y=function(t){"use strict";function e(i,e){var s;return n.browser.mobile&&9===e.margin&&delete e.margin,(s=t.call(this,i,Object.assign({width:70,height:70,margin:65},e))||this).setUpEvent=!1,s.isSquare=!0,s.ANIM_STEP=.4,s}i.inheritsLoose(e,t);var s=e.prototype;return s.init=function(){t.prototype.init.call(this),this.setOutsideLensSize()},s.setOutsideLensSize=function(){var i,t,e,s={width:this.o.width,height:this.o.height};s.width===s.height&&(this.isSquare=!0),[s.width,s.height].includes("auto")?(this.isSquare=!0,"auto"===s.width?"auto"!==s.height?(s.height=this.getPercentSize(s.height,"height"),s.width=s.height):(s.height=70,s.width=s.height):"auto"!==s.width?(s.width=this.getPercentSize(s.width,"width"),s.height=s.width):(s.height=70,s.width=s.height)):(s.width=this.getPercentSize(s.width,"width"),s.height=this.getPercentSize(s.height,"height")),this.currentLensSize=(i={width:s.width,height:s.height},t=10,e=90,(i.width>=i.height?i.width/i.height:i.height/i.width)>9?{width:50,height:50}:(i.width<t&&(i.height=t*(i.height/i.width),i.width=t),i.height<t&&(i.width=t*(i.width/i.height),i.height=t),i.width>e&&(i.height=e*(i.height/i.width),i.width=e),i.height>e&&(i.width=e*(i.width/i.height),i.height=e),i)),this.ANIM_STEP=.6},s.calcLensSize=function(){if(this.isSquare){var i=this.pSize,e=this.currentLensSize,s=E(Math.min(i.width,i.height),e.width);this.setLensSize(s,s)}else t.prototype.calcLensSize.call(this)},s.calcLensPosition=function(){var i,t,e,s,o=this.pSize,h=this.o.margin;h<0&&(h=0),this._x<0&&(this._x=0),this._y<0&&(this._y=0),this._x>o.width&&(this._x=o.width),this._y>o.height&&(this._y=o.height),i=this._y-this.lensHalfSize.height,t=this._x-this.lensHalfSize.width;var r=this.pPos;n.browser.mobile&&(i-=h,e=a(n.W).scroll,s=a(n.W).size,r.top+i<e.y&&(r.left+this._x-this.lensSize.width-h>e.x?(i=this._y-this.lensHalfSize.height,t=this._x-this.lensSize.width-h):r.left+this._x+this.lensSize.width+h<e.x+s.width?(i=this._y-this.lensHalfSize.height,t=this._x+h):e.y+s.height>r.top+this._y+h+this.lensSize.height&&(i=this._y+h))),this.lensPosition={top:i,left:t}},s.calcPositionOfImage=function(i,t,e,s){var o=e||this._x,h=s||this._y,n=this.lensHalfSize.width-E(this.iSize.width,I(o,this.pSize.width)),a=this.lensHalfSize.height-E(this.iSize.height,I(h,this.pSize.height));this.iPos={x:n,y:a}},s.getPercentSize=function(i,t){return/%$/.test(i)?i=parseInt(i,10):(i=parseInt(i,10),i/=this.pSize[t]/100),i},s.setEvents=function(){var i=this;this.setUpEvent&&!this.o.pan&&this.view.addEventToMainContainer(P,(function(t){t.stop(),i.hide(!0)})),this.o.customZooming&&this.addMouseScroollEvent(),this.addMouseOverEvent(),"hover"===this.o.trigger&&this.addMouseOutEvent(),this.o.pan&&this.addDragEvent(),n.browser.mobile&&this.addTapEvent(),"hover"!==this.o.trigger&&this.addClickEvent(),this.o.pan||n.browser.mobile||this.view.addEventToMainContainer(b,(function(t){if(!t.pointerType||"touch"!==t.pointerType){t.stop();var e=t.pageXY;i.move(e.x,e.y),(i._x<=0||i._y<=0||i._x>=i.pSize.width||i._y>=i.pSize.height)&&i.hide()}}))},s.afterMove=function(){this.calcLensPosition(),this.calcPositionOfImage(this.scale),this.view.lensPosition=this.lensPosition,t.prototype.afterMove.call(this)},s.changeLensSize=function(i){i.width=D(i.width,10,90),i.height=D(i.height,10,90),i.width!==this.currentLensSize.width&&(this.currentLensSize.width=i.width,this.currentLensSize.height=i.height,this.calcLensSize(),this.calcLensPosition(),this.calcPositionOfImage(),this.iDPos.x=this.iPos.x,this.iDPos.y=this.iPos.y,this.deepZoomAction(!1,this.lensSize),this.view.setImagePosition(this.iPos,this.scale),this.view.lensPosition=this.lensPosition,this.view.lensSize=this.lensSize)},s.addMouseScroollEvent=function(){var i=this;this.view.addEventToWrapper("mousescroll",(function(t){var e;t.stop();var s=t.delta,o={width:0,height:0};if(i.isSquare)for(e in o)({}).hasOwnProperty.call(o,e)&&(o[e]=i.currentLensSize[e]+s);else e=i.currentLensSize.height/i.currentLensSize.width,o.width=i.currentLensSize.width+s,o.height=i.currentLensSize.height+s*e;i.changeLensSize(o)}))},s.addMouseOverEvent=function(){var i=this;this.view.addEventToMainContainer("mouseover",(function(t){t.stop();var e=t.pageXY;i.x=e.x,i.y=e.y,i.calcLensPosition(),i.calcPositionOfImage(),i.view.lensPosition={top:i.lensPosition.top,left:i.lensPosition.left},i.view.setImagePosition(i.iPos,i.scale)}))},s.addMouseOutEvent=function(){var i=this;this.view.addEventToWrapper("mouseout",(function(t){for(var e=t.related;e&&e!==i.node&&e!==i.lensContainer&&e!==i.eventsCanvasNode;)e=e.parentNode;if(i.node!==e&&i.eventsCanvasNode!==e){var s=t.clientXY;(s.x<i.boundaries.left||s.x>i.boundaries.right||s.y<i.boundaries.top||s.y>i.boundaries.bottom)&&(t.stop(),i.o.smoothing?i.hide():i.hide(!0))}}))},s.addDragEvent=function(){var i=this,t=!1;this.view.addEventToMainContainer(x,(function(e){e.stop(),"dragstart"===e.state?t=!0:"dragend"===e.state?t=!1:t&&i.move(e.x,e.y)}))},s.addTapEvent=function(){var i=this;this.view.addEventToMainContainer("dblclick"===this.o.trigger?"dbltap":"tap",(function(t){t.stop(),i.o.smoothing?i.hide():i.hide(!0)}))},s.hide=function(i){var e=this,s=t.prototype.hide.call(this,i);return s&&(i||(this.view.addEventToWrapper("transitionend",(function(i){i.stop(),e.view.removeEventFromWrapper("transitionend"),e.endOfHiding()})),this.view.lensStyle={transition:"opacity .2s linear, transform .2s linear",opacity:0,transform:"scale(0)"})),s},s.show=function(i,e,s,o,h,n){var a=this;return!!t.prototype.show.call(this)&&(this.emit("zoomBeforeShow",{data:{}}),this.setUpEvent=h,this.iSize={width:e.width,height:e.height},this.view.addStartCss(),this.view.appendNodes(i,this.iSize),this.getAllSizes(),this.x=s,this.y=o,this.calcLensSize(),this.calcLensPosition(),this.getBaseScale(),this.showDeepZoom(e.originWidth,e.originHeight),this.calcPositionOfImage(this.scale,!0),this.view.eventNodePositionSize={position:this.pPos,size:this.pSize},this.dScale.x=this.baseScale.x,this.dScale.y=this.baseScale.y,this.iDPos={x:-1*C(this.iSize.width,this.iSize.width*this.dScale.x)-this.lensPosition.left,y:-1*C(this.iSize.height,this.iSize.height*this.dScale.y)-this.lensPosition.top},this.view.setLensCss(this.lensPosition,this.lensSize,"opacity .15s linear, transform .15s linear"),this.view.setImageSize(this.iDPos,this.iSize,this.dScale),this.boundaries=this.view.boundaries,this.o.smoothing?(this.view.addEventToWrapper("transitionend",(function(i){i.stop(),a.view.removeEventFromWrapper("transitionend"),a.view.lensStyle={transition:""},a.sendZoomShownEvent()})),this.endOfShowing(),this.anim.start()):(this.endOfShowing(),this.sendZoomShownEvent()),!0)},e}(B),F=function(t){"use strict";function s(e,s){var o;return(o=t.call(this,e,Object.assign({margin:9,outsidePosition:"right",width:100,height:100},s))||this).showingParams=null,o.eye=new N(o.view.getNodeForEye(),"hover"===o.o.trigger),o.ANIM_STEP=.18,o.mouseOutHandler=o.mouseOut.bind(i.assertThisInitialized(o)),o}i.inheritsLoose(s,t);var o=s.prototype;return o.getBoundaries=function(){this.boundaries=this.eye.boundaries},o.init=function(){t.prototype.init.call(this),this.setOutsideLensSize()},o.setEyesParams=function(){var i=this.currentLensSize.width/(this.iSize.width*this.scale.x),t=this.currentLensSize.height/(this.iSize.height*this.scale.y);this.eye.size={width:i*this.zoomNodeSize.width,height:t*this.zoomNodeSize.height},this.eye.position={x:this._x,y:this._y}},o.calcLensPosition=function(){var i=this.o.margin,t=this.pSize,e=this.pPos;i<0&&(i=0);var s=e.top,o=e.left;switch(this.o.outsidePosition){case"top":s+=-1*(this.lensSize.height+i);break;case"left":o+=-1*(this.lensSize.width+i);break;case"right":o+=t.width+i;break;case"bottom":s+=t.height+i}this.lensPosition={top:s,left:o}},o.calcPositionOfImage=function(i){i||(i=this.dScale);var t=this.iSize.width*i.x,e=this.iSize.height*i.y,s=C(this.iSize.width,t),o=C(this.iSize.height,e),h=this._x/(this.zoomNodeSize.width/t),n=this._y/(this.zoomNodeSize.height/e);h=this.lensSize.width/2-h-s,n=this.lensSize.height/2-n-o,h=T(h,0-s,s+t,this.lensSize.width),n=T(n,0-o,o+e,this.lensSize.height),this.iPos={x:h,y:n}},o.afterMove=function(){this.calcLensPosition(),this.calcPositionOfImage(this.scale),this.setEyesParams(),this.view.lensPosition=this.lensPosition,t.prototype.afterMove.call(this)},o.hide=function(i){var e=t.prototype.hide.call(this,i);return e&&(n.browser.mobile||this.view.removeMouseMoveEvent(this.mouseOutHandler),this.eye.clearEvents(),this.eye.hide(),i||(this.view.removeEvents(),this.endOfHiding())),e},o.getShowingPropertiesToOutsideMode=function(){var i={start:{x:0,y:0},end:{x:0,y:0}};switch(this.o.outsidePosition){case"top":i.start.y=10,i.end.y=0;break;case"left":i.start.x=10,i.end.x=0;break;case"right":i.start.x=-10,i.end.x=0;break;case"bottom":i.start.y=-10,i.end.y=0}return i},o.endOfShowing=function(){t.prototype.endOfShowing.call(this),this.getBoundaries()},o.show=function(i,e,s,o,h,n){return!!t.prototype.show.call(this)&&(this.emit("zoomBeforeShow",{data:{}}),this.iSize={width:e.width,height:e.height},this.showingParams=this.getShowingPropertiesToOutsideMode(),this.view.addStartCss(this.showingParams),this.view.appendNodes(i,this.iSize),this.getAllSizes(),this.x=s,this.y=o,this.calcLensSize(),this.calcLensPosition(),this.getBaseScale(),this.showDeepZoom(e.originWidth,e.originHeight),this.calcPositionOfImage(this.scale,!0),this.view.eventNodePositionSize={position:this.pPos,size:this.pSize},this.dScale.x=this.baseScale.x,this.dScale.y=this.baseScale.y,this.iDPos={x:-1*C(this.iSize.width,this.iSize.width*this.dScale.x),y:-1*C(this.iSize.height,this.iSize.height*this.dScale.y)},this.view.setLensCss(this.lensPosition,this.lensSize,this.o.smoothing?"opacity .4s linear, transform .15s ease-in":"none"),this.view.setImageSize(this.iDPos,this.iSize,this.dScale),(this.o.smoothing||"zero"===n)&&this.endOfShowing(),this.eye.show(this.view.getImageForEye()),this.getBoundaries(),this.setEyesParams(),this.animStep=.3,this.o.smoothing?this.anim.start():this.endOfShowing(),this.sendZoomShownEvent(),!0)},o.setOutsideLensSize=function(){var i={width:this.o.width,height:this.o.height};"auto"===i.width?i.width=this.pSize.width:/%$/.test(this.o.width)?i.width=this.pSize.width/100*parseInt(this.o.width,10):i.width=parseInt(i.width,10),"auto"===i.height?i.height=this.pSize.height:/%$/.test(this.o.height)?i.height=this.pSize.height/100*parseInt(this.o.height,10):i.height=parseInt(i.height,10),this.currentLensSize={width:i.width,height:i.height}},o.calcLensSize=function(){var i=this.currentLensSize;this.lensSize={width:i.width,height:i.height},this.lensHalfSize={width:this.lensSize.width/2,height:this.lensSize.height/2}},o.setEvents=function(){var i=this;if(n.browser.mobile&&this.o.pan&&this.addOutsideTouchDrag(),!n.browser.mobile&&n.browser.touchScreen&&["edge","ie"].includes(n.browser.uaName)&&(this.o.pan||this.eye.addEventToMainContainer("pointerup",(function(t){i.hide()}))),this.eye.addEventToMainContainer("mousemove",(function(t){t.stop();var e=t.pageXY;i.move(e.x,e.y)})),"hover"===this.o.trigger)n.browser.mobile||this.view.addMouseMoveEvent(this.mouseOutHandler),this.eye.addEventToMainContainer("mouseout",this.mouseOutHandler);else{var t=["btnclick","tap"];"dblclick"===this.o.trigger&&(t=["dblbtnclick","dbltap"]),this.eye.addEventToMainContainer(t,(function(t){i.hide()}))}this.o.customZooming&&this.setMouseScrollEvent()},o.mouseOut=function(i){var t=i.clientXY;(t.x<this.boundaries.left||t.x>this.boundaries.right||t.y<this.boundaries.top||t.y>this.boundaries.bottom)&&this.hide(!this.getZoomData())},o.addOutsideTouchDrag=function(){var i=this,t=!1;this.eye.addEventToMainContainer(x,(function(e){e.stop(),"dragstart"===e.state?t=!0:"dragend"===e.state?t=!1:t&&i.move(e.x,e.y)}))},o.setMouseScrollEvent=function(){var i=this;this.eye.addEventToMainContainer("mousescroll",(function(t){var e=i.scale.x;if(t.stop(),t.isMouse){var s=t.delta/E(t.deltaFactor,37);i.scale.x+=s,i.scale.y+=s}else{var o=t.delta;Math.abs(o)>15&&(o=15,t.delta<0&&(o*=-1)),o/=350,i.scale.x+=o,i.scale.y+=o}i.scale.x=D(i.scale.x,i.baseScale.x,1),i.scale.y=D(i.scale.y,i.baseScale.y,1),i.calcPositionOfImage(i.scale),e!==i.scale.x&&(i.sendZoomingAction(),i.setCursorState(),i.o.smoothing||(i.dScale.x=i.scale.x,i.dScale.y=i.scale.y,i.iDPos.x=i.iPos.x,i.iDPos.y=i.iPos.y,i.deepZoomAction(),i.setImagePosition(i.iPos,i.scale)),i.setEyesParams())}))},o.setLensStyleOnResize=function(){this.view.lensPosition=this.lensPosition,this.view.setCanvasNodeSize(this.lensSize)},o.onResize=function(){t.prototype.onResize.call(this),this.state!==e.APPEARANCE.HIDDEN&&this.state!==e.APPEARANCE.HIDING&&this.eye.resize()},o.destroy=function(){this.eye.destroy(),this.view.removeMouseMoveEvent(this.mouseOutHandler),t.prototype.destroy.call(this)},s}(B);return function(t){"use strict";function e(e,s){var o;return(o=t.call(this)||this).zoomType=s.type,"inner"===s.type?(o.view=new L(e),o.view.addClassToWrapper("inner"),o.controller=new X(o.view,s)):["circle","square"].includes(s.type)?(o.view=new Z(e),o.view.addClassToWrapper(s.type),o.controller=new Y(o.view,s)):(o.view=new _(e),o.view.addClassToWrapper("outside"),o.controller=new F(o.view,s)),o.controller.parentClass=i.assertThisInitialized(o),o.controller.init(),o}i.inheritsLoose(e,t);var s=e.prototype;return s.getZoomData=function(i){return this.controller.getZoomData(i)},s.zoomUp=function(i,t){return this.controller.zoomUp(i,t)},s.zoomDown=function(i,t){return this.controller.zoomDown(i,t)},s.showCenter=function(i,t,e){return this.controller.showCenter(i,t,e)},s.addLoadedImage=function(i){this.controller.setImage(i)},s.show=function(i,t,e,s,o,h){return this.controller.show(i,t,e,s,o,h)},s.hide=function(i){return this.controller.hide(i)},s.customMove=function(i,t){this.controller.customMove(i,t)},s.setScale=function(i,t,e){"inner"===this.zoomType&&this.controller.setScale(i,t,e)},s.onResize=function(){this.controller.onResize()},s.destroy=function(){this.view.destroy(),this.controller.destroy()},i.createClass(e,[{key:"lensContainer",set:function(i){this.controller.lensContainer=i}},{key:"shown",get:function(){return this.controller.shown}},{key:"showing",get:function(){return this.controller.showing}},{key:"nextMinZoom",get:function(){return this.controller.nextMinZoom}},{key:"nextMaxZoom",get:function(){return this.controller.nextMaxZoom}},{key:"baseScale",get:function(){return this.controller.baseScale}},{key:"basePercent",set:function(i){"inner"===this.zoomType&&(this.controller.basePercent=i)}}]),e}(h)}));
Sirv.define("Hint",["bHelpers","magicJS","globalVariables","globalFunctions","helper"],(function(t,i,n,e,s){var o=i,a=o.$;return e.rootDOM.addModuleCSSByName("Hint",(function(){return".sirv-hint{position:absolute;display:inline-block;top:50%;left:0;width:100%;transform:translate3d(0,-50%,1px);transition:opacity .3s linear;text-align:center;opacity:0;z-index:42;pointer-events:none;-webkit-font-smoothing:antialiased}.sirv-hint.show{opacity:1}.sirv-hint-message{position:relative;display:inline-block;padding:.35em 1.5em;border-radius:2px;background:rgba(55,58,60,.8);color:#fff;font:normal 16px/1.5 'Lucida Grande','Lucida Sans Unicode',Verdana,'Helvetica Neue',Arial,Helvetica,sans-serif;text-decoration:none}"})),function(){"use strict";function i(t,i){var n;this.parent=a(t),this.options=Object.assign({html:"hint",showClass:"show",additionalClass:[],autohide:3500},i||{}),this.instanceNode=o.$new("div").addClass("sirv-hint"),this.hintContainer=o.$new("span").addClass("sirv-hint-message"),this.inDoc=!1,this.isShown=!1,this.timer=null,(n=this.instanceNode).addClass.apply(n,this.options.additionalClass),this.hintContainer.node.innerHTML=this.options.html,this.instanceNode.append(this.hintContainer)}var n=i.prototype;return n.append=function(){this.inDoc||(this.inDoc=!0,this.parent.append(this.instanceNode))},n.removeEvent=function(){this.instanceNode.removeEvent("transitionend")},n.show=function(){var t=this;this.append(),clearTimeout(this.timer),this.timer=null,this.instanceNode.render(),this.removeEvent(),this.instanceNode.addClass(this.options.showClass),this.isShown=!0,this.options.autohide&&(this.timer=setTimeout((function(){t.hide()}),this.options.autohide))},n.hide=function(){var t=this;this.inDoc&&(this.removeEvent(),clearTimeout(this.timer),this.timer=null,this.instanceNode.addEvent("transitionend",(function(i){i.stop(),t.removeEvent(),t.inDoc=!1,t.instanceNode.remove()})),this.instanceNode.removeClass(this.options.showClass),this.isShown=!1)},n.destroy=function(){this.instanceNode.setCssProp("transitionend","none"),this.hide(),this.removeEvent(),this.hintContainer.remove(),this.hintContainer.node.innerHTML="",this.instanceNode.remove(),this.inDoc=!1},t.createClass(i,[{key:"autoHideTime",get:function(){return this.options.autohide}},{key:"actionTime",get:function(){var t=0,i=this.instanceNode.getCss("transition");try{i=i.split(" ")[1]}catch(t){i=0}return i&&(i=i.trim(),/m?s$/.test(i)&&(/s$/.test(i)?(t=parseFloat(i),t*=1e3):t=parseInt(i,10))),t}},{key:"movingTime",get:function(){return this.autoHideTime+this.actionTime}}]),i}()}));
Sirv.define("ProgressLoader",["bHelpers","magicJS","globalVariables","globalFunctions","helper","RoundLoader"],(function(e,t,s,r,i,n){var a=t,o=a.$;r.rootDOM.addModuleCSSByName("ProgressLoader",(function(){return".smv-progress-loader{pointer-events:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.smv-progress-loader .smv-pl-circle-wrapper,.smv-progress-loader .smv-pl-indicator,.smv-progress-loader .smv-pl-indicator .smv-pl-pie,.smv-progress-loader .smv-pl-indicator .smv-pl-slice,.smv-progress-loader .smv-pl-text-wrapper,.smv-progress-loader .smv-pl-wrapper{top:0;left:0;width:100%;height:100%}.smv-progress-loader .smv-pl-text-wrapper,.smv-progress-loader .smv-pl-wrapper{display:inline-block;position:relative}.smv-progress-loader .smv-pl-wrapper{transform:scale(0);transition:transform .15s cubic-bezier(.17,.67,.57,1.47),opacity .2s linear;border-radius:50%;background-color:rgba(0,0,0,.55);opacity:0}.smv-progress-loader .smv-pl-circle-wrapper,.smv-progress-loader .smv-pl-indicator,.smv-progress-loader .smv-pl-indicator .smv-pl-pie,.smv-progress-loader .smv-pl-indicator .smv-pl-slice{position:absolute}.smv-progress-loader .smv-pl-circle-wrapper,.smv-progress-loader .smv-pl-indicator{z-index:1}.smv-progress-loader .smv-pl-circle-wrapper{animation:sirv-pl-loader-rotate 2s infinite linear}.smv-progress-loader .smv-pl-indicator .smv-pl-pie,.smv-progress-loader .smv-pl-indicator .smv-pl-slice{stroke-width:2;fill:transparent}.smv-progress-loader .smv-pl-indicator .smv-pl-pie{z-index:1;stroke:rgba(255,255,255,.3)}.smv-progress-loader .smv-pl-indicator .smv-pl-slice{z-index:2;stroke:#fff;stroke-linecap:round}.smv-progress-loader .smv-pl-text-wrapper{display:inline-flex;position:relative;align-items:center;justify-content:center;font-size:12px;text-align:center;z-index:2}.smv-progress-loader .smv-pl-text-wrapper::after{display:inline-block;height:100%;content:'';vertical-align:middle}.smv-progress-loader .smv-pl-text-wrapper .smv-pl-text{display:inline;position:relative;color:#fff;font-weight:700}.smv-progress-loader .smv-pl-text-wrapper .smv-pl-text .smv-pl-text-percent{font-size:.7em}@keyframes sirv-pl-loader-rotate{from{transform:rotateZ(0)}to{transform:rotateZ(360deg)}}"}));var l=function(e,t){var s=o(a.D.node.createElementNS("http://www.w3.org/2000/svg",e));return t||(t={}),Object.entries(t).forEach((function(e){return s.attr.apply(s,e)})),s},p=0,c=1,d=2;return function(t){"use strict";function r(e,r){var i;return r=function(e){return e||(e={}),e.width||(e.width=44),e.height||(e.height=44),e.max||(e.max=0),e}(r),(i=t.call(this,e,r)||this).type="progress",i.lineSize=125,i.currentLineSize=125,i.currentPersent=0,i.currentValue=0,i.progressState=p,i.maxOpacityFlag=!1,i.maxOpacity=1,i.circles=[],i.size={width:i.options.width,height:i.options.height},i.state=s.APPEARANCE.HIDDEN,i._createCircles(),i}e.inheritsLoose(r,t);var i=r.prototype;return i.addClass=function(){this.node.addClass("smv-progress-loader")},i._createCircles=function(){this.p='<span class="smv-pl-text-percent">%</span>',this.loaderElement.addClass("smv-pl-wrapper"),this.circleWrapper=a.$new("div").addClass("smv-pl-circle-wrapper");var e=this.size.width,t=e/2;this.circles.push(l("circle",{class:"smv-pl-pie",r:t-2,cx:t,cy:t})),this.circles.push(l("circle",{class:"smv-pl-slice",r:t-2,cx:t,cy:t})),this.svg=l("svg",{class:"smv-pl-indicator",viewBox:"0 0 "+e+" "+e}),this.circles[1].node.style.strokeDasharray=this.lineSize,this.circles[1].node.style.strokeDashoffset=this.lineSize,o(this.circles[1]).addEvent("transitionend",(function(e){e.stop()})).setCssProp("transition","stroke-dashoffset .1s linear"),o(this.svg).append(this.circles[0]),o(this.svg).append(this.circles[1]),this.textWrapper=a.$new("div").addClass("smv-pl-text-wrapper"),this.text=a.$new("span").addClass("smv-pl-text"),this.text.changeContent(this.currentPersent+this.p),this.textWrapper.append(this.text),this.circleWrapper.append(this.svg),this.loaderElement.append(this.circleWrapper),this.loaderElement.append(this.textWrapper)},i.append=function(){this.progressState!==d&&t.prototype.append.call(this)},i.progress=function(){var e,t;this.progressState!==d&&(this.progressState=c,this.currentValue+=1,this.currentPersent=(e=this.options.max,t=this.currentValue,Math.round(100/(e/t))),this.currentLineSize=function(e,t){return e-e/100*t}(this.lineSize,this.currentPersent),this.circles[1].node.style.strokeDashoffset=this.currentLineSize,this.text.node.innerHTML=this.currentPersent+this.p,this.currentValue===this.options.max&&(this.progressState=d,this.hide()))},i.setMaxOpacity=function(e){!this.maxOpacityFlag&&this.loaderElement&&(this.maxOpacity=e,this.maxOpacityFlag=!0,this.loaderElement.setCssProp("opacity",e))},i.isEnded=function(){return this.currentValue===this.options.max},i.isStarted=function(){return this.currentValue>0},i.finishOff=function(){this.currentValue=this.options.max},i.isShow=function(){return this.state===s.APPEARANCE.SHOWN},i.show=function(){this.state!==s.APPEARANCE.SHOWN&&(this.state=s.APPEARANCE.SHOWN,this.append(),this.loaderElement.render(),this.loaderElement.removeEvent("transitionend"),this.loaderElement.addEvent("transitionend",(function(e){e.stop()})),this.loaderElement.setCss({display:"block",opacity:this.maxOpacity,transform:"scale(1)"}))},i.hide=function(e){var t=this;if((this.state!==s.APPEARANCE.HIDDEN||e)&&this.inDoc){var r=0;this.state=s.APPEARANCE.HIDDEN,clearTimeout(this.timer),this.timer=setTimeout((function(){t.loaderElement.removeEvent("transitionend"),t.loaderElement.addEvent("transitionend",(function(e){e.stop(),(r+=1)<2||(t.loaderElement.removeEvent("transitionend"),t.loaderElement.setCssProp("display","none"))})),t.loaderElement.setCss({opacity:0,transform:"scale(0)"})}),e?0:400)}},i.getProgressState=function(){return this.progressState},i.destroy=function(){this.hide(!0),clearTimeout(this.timer),this.currentPersent=0,this.currentValue=0,this.progressState=p,this.state=s.APPEARANCE.HIDDEN,this.loaderElement.removeEvent("transitionend"),this.loaderElement.node.innerHTML="",this.loaderElement=null,this.circleWrapper=null,this.textWrapper=null,this.circles=[],this.svg=null,this.text=null,this.inDoc=!1,t.prototype.destroy.call(this)},r}(n)}));
Sirv.define("Spin",["bHelpers","magicJS","globalVariables","globalFunctions","helper","EventEmitter","Zoominstance","ResponsiveImage","Hint","ProgressLoader","SpinHotspots"],(function(t,e,i,n,s,o,a,r,h,c,u){var l=e,m=l.$;n.rootDOM.addModuleCSSByName("Spin",(function(){return".sirv-spin{-ms-user-select:none!important;user-select:none!important;display:inline-block;position:relative;width:100%;max-width:100%;height:100%;padding:0!important;transform:translate3d(0,0,0);outline:0;outline:0!important;color:#000;font-size:0!important;line-height:100%!important;text-decoration:none;overflow:hidden;vertical-align:middle;visibility:visible;backface-visibility:hidden;user-select:none;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none!important}.sirv-spin::before{display:inline-block;height:0;content:'';vertical-align:top}.sirv-spin .spin-canvas-container{position:absolute}.sirv-spin .spin-canvas-container,.sirv-spin canvas{top:0;right:0;bottom:0;left:0;margin:auto}.sirv-spin canvas{transition:opacity 1s linear,filter 2s linear;opacity:0;z-index:1}.sirv-spin canvas.smv-shown{opacity:1!important}.sirv-spin canvas.smv-zoomed-in{visibility:hidden!important}.sirv-spin-message{display:block;position:absolute;top:50%;left:33%;width:33%;padding:6px;border:1px solid #aaa;border-radius:15px;background-color:#fff;background-image:none;color:#000;font-size:10px;text-align:center;border-collapse:separate;box-shadow:0 0 10px #000;overflow:hidden;z-index:100}.sirv-hint .spin-hint-animation{display:none;position:relative;width:40px;height:40px;margin-right:10px;transform-style:preserve-3d;vertical-align:middle;perspective:200px}.sirv-hint .sirv-hint-message .spin-hint-animation::before{display:inline-block;position:absolute;top:0;right:0;bottom:0;left:0;width:40%;height:30%;margin:auto;transform-origin:50% 50% -15px;border:1px solid #fff;box-shadow:inset 0 0 1px 1px rgba(255,255,255,.5);content:'';box-sizing:border-box}.sirv-hint.spin-hint-horizontal-animation .sirv-hint-message .spin-hint-animation::before{transform:translateZ(0) rotateY(0);animation:sirv-spin-hint-horizontal-rotate 3s infinite linear}@keyframes sirv-spin-hint-horizontal-rotate{0%{transform:translateZ(0) rotateY(0)}5%{transform:translateZ(100px) rotateY(0)}7%{transform:translateZ(75px) rotateY(0)}20%{transform:translateZ(75px) rotateY(0)}30%{transform:translateZ(75px) rotateY(45deg)}40%{transform:translateZ(75px) rotateY(0)}50%{transform:translateZ(75px) rotateY(-45deg)}60%{transform:translateZ(75px) rotateY(0)}63%{transform:translateZ(75px) rotateY(0)}68%{transform:translateZ(-25px) rotateY(0)}70%{transform:translateZ(0) rotateY(0)}80%{transform:translateZ(0) rotateY(0)}100%{transform:translateZ(0) rotateY(0)}}.sirv-hint.spin-hint-vertical-animation .spin-hint-message .spin-hint-animation::before{transform:translateZ(0) rotateX(0);animation:sirv-spin-hint-vertical-rotate 3s infinite linear}@keyframes sirv-spin-hint-vertical-rotate{0%{transform:translateZ(0) rotateX(0)}5%{transform:translateZ(100px) rotateX(0)}7%{transform:translateZ(75px) rotateX(0)}20%{transform:translateZ(75px) rotateX(0)}30%{transform:translateZ(75px) rotateX(45deg)}40%{transform:translateZ(75px) rotateX(0)}50%{transform:translateZ(75px) rotateX(-45deg)}60%{transform:translateZ(75px) rotateX(0)}63%{transform:translateZ(75px) rotateX(0)}68%{transform:translateZ(-25px) rotateX(0)}70%{transform:translateZ(0) rotateX(0)}80%{transform:translateZ(0) rotateX(0)}100%{transform:translateZ(0) rotateX(0)}}.sirv-hint.spin-hint-horizontal-animation.spin-hint-vertical-animation .sirv-hint-message .spin-hint-animation::before{transform:translateZ(0) rotateX(0) rotateY(0);animation:sirv-spin-hint-double-rotate 5s infinite linear}@keyframes sirv-spin-hint-double-rotate{0%{transform:translateZ(0) rotateX(0) rotateY(0)}4%{transform:translateZ(100px) rotateX(0) rotateY(0)}5%{transform:translateZ(75px) rotateX(0) rotateY(0)}10%{transform:translateZ(75px) rotateX(0) rotateY(0)}19%{transform:translateZ(75px) rotateX(0) rotateY(45deg)}28%{transform:translateZ(75px) rotateX(0) rotateY(0)}37%{transform:translateZ(75px) rotateX(0) rotateY(-45deg)}45%{transform:translateZ(75px) rotateX(0) rotateY(0)}54%{transform:translateZ(75px) rotateX(45deg) rotateY(0)}63%{transform:translateZ(75px) rotateX(0) rotateY(0)}72%{transform:translateZ(75px) rotateX(-45deg) rotateY(0)}81%{transform:translateZ(75px) rotateX(0) rotateY(0)}85%{transform:translateZ(-25px) rotateX(0) rotateY(0)}86%{transform:translateZ(0) rotateX(0) rotateY(0)}90%{transform:translateZ(0) rotateX(0) rotateY(0)}100%{transform:translateZ(0) rotateX(0) rotateY(0)}}.smv-progress-loader{bottom:0;left:0;margin-bottom:5px;margin-left:5px}"}));var d,p,g,f,v,w,S,I,y,C,b,x,z={swapSides:{type:"boolean",defaults:!1},wheel:{type:"boolean",defaults:!0},initialize:{type:"string",enum:["load","hover","click","tap"],defaults:"load"},freeDrag:{type:"boolean",defaults:!1},tappingFirst:{type:"boolean",defaults:!1},thumbnail:{type:{type:"string",enum:["image","gif"],defaults:"image"},gifParams:{type:"string",defaults:""}},zoom:{enable:{type:"boolean",defaults:!0},ratio:{oneOf:[{type:"number",minimum:0},{type:"string",enum:["max"]}],defaults:2.5},tiles:{type:"boolean",defaults:!0},pan:{type:"boolean",defaults:!0}},inactivity:{type:"number",minimum:1e3,defaults:3e3},autospin:{enable:{type:"boolean",defaults:!1},type:{type:"string",enum:["row","sphere","full","helix"],defaults:"sphere"},resume:{type:"number",minimum:0,defaults:3e3},duration:{type:"number",minimum:0,defaults:3600}},hint:{message:{enable:{type:"boolean",defaults:!0},text:{type:"string",defaults:"Drag to spin"}},onStart:{enable:{type:"boolean",defaults:!0},effect:{oneOf:[{type:"string",enum:["intro","twitch","spin","momentum","sphere","none"]},{type:"boolean",enum:[!1]}],defaults:"intro"}},onVisible:{enable:{type:"boolean",defaults:!0},effect:{oneOf:[{type:"string",enum:["intro","twitch","spin","momentum","sphere","none"]},{type:"boolean",enum:[!1]}],defaults:"twitch"}},onInactive:{enable:{type:"boolean",defaults:!0},effect:{oneOf:[{type:"string",enum:["intro","twitch","spin","momentum","sphere","none"]},{type:"boolean",enum:[!1]}],defaults:"twitch"}}},row:{start:{type:"number",minimum:1,defaults:1},loop:{type:"boolean",defaults:!1},increment:{type:"number",minimum:1,defaults:1},reverse:{type:"boolean",defaults:!1},sensitivity:{type:"number",minimum:1,maximum:100,defaults:50}},column:{start:{type:"number",minimum:1,defaults:1},loop:{type:"boolean",defaults:!0},increment:{type:"number",minimum:1,defaults:1},reverse:{type:"boolean",defaults:!1},sensitivity:{type:"number",minimum:1,maximum:100,defaults:50}}},E=function(e){"use strict";function i(t,i,n,s){var o;return(o=e.call(this,t,i)||this).col=n,o.row=s,o}t.inheritsLoose(i,e);var n=i.prototype;return n._createImageData=function(t,i){var n=e.prototype._createImageData.call(this,t,i);return n.col=this.col,n.row=this.row,n},n.getThumbnail=function(t){var i=e.prototype.getThumbnail.call(this,t);return i.col=this.col,i.row=this.row,i},i}(r),R=(d=m([.45,.19,.56,.86]),p=function(t,e,i,n,o){for(var a=[],r=!1,h=t;h!==e||!r&&o;)r=!0,i?h+=1:h-=1,h=s.getArrayIndex(h,n),a.push(h);return a},g=function(t,e){var i="col";null===e.row&&(i="row");var n=[];return t.forEach((function(t){var s={col:e.column,row:e.row};s[i]=t,n.push(s)})),n},f=function(t,e,i,n){var o,a=[t],r=!0;return[t+e,t-e,t].forEach((function(t){o=function(t){var e;return n?e=s.getArrayIndex(t,i):((e=t)<0&&(e=0),e>i-1&&(e=i-1)),e}(t),a=a.concat(p(a[a.length-1],o,r,i,n)),r=!r})),a},v=function(t,e,i){return i?p(t,s.getArrayIndex(t+e,e),!0,e,i):f(t,e,e,!1)},w=function(t){var e=t.length,i=[];return t.forEach((function(t,n){for(var s,o=(s=n,Math.round(5*l.FX.cubicBezierAtTime(s/e,600,d))+1);o>0;)o-=1,i.push(t)})),i},S=function(t){var e=s.deepExtend({degree:30,swapSides:!1,axelerate:!1,isBackward:!1,justFirstLine:!1,row:{length:1,loop:!1,current:1,jumpCount:0},column:{length:36,loop:!0,current:1,jumpCount:0},firstSide:"column",secondSide:"row"},t||{});return["row","column"].forEach((function(t){e[t].current>e[t].length-1&&(e[t].current=0)})),e.swapSides&&(e.secondSide=e.firstSide,e.firstSide="row"),e},I={lib:{getRightIndex:function(t,e,i){var n;return i?n=s.getArrayIndex(t,e):(t>=e?t=e-1:t<0&&(t=0),n=t),n}},twitch:function(t){var e,i=S(t),n={column:0,row:0},s=[];return[i.firstSide,i.secondSide].forEach((function(t){var o=t===i.firstSide?i.secondSide:i.firstSide;i[t].length>1&&(n[t]=Math.floor(i[t].length/360*i.degree)||1),n[t]&&((e={})[t]=null,e[o]=i[o].current,s=s.concat(g(f(i[t].current,n[t],i[t].length,i[t].loop),e)))})),s},sphere:function(t){var e=S(t),i=[];return(e.justFirstLine?[e.firstSide]:[e.firstSide,e.secondSide]).forEach((function(t){var n=t===e.firstSide?e.secondSide:e.firstSide,s={};if(1!==e[t].length){s[t]=null,s[n]=e[n].current;var o=g(v(e[t].current,e[t].length,e[t].loop),s);e.isBackward&&o.reverse(),i=i.concat(o)}})),e.axelerate&&(i=w(i)),i},intro:function(t){var e=S(t),i={swapSides:e.swapSides,justFirstLine:!0,isBackward:e.isBackward,row:s.deepExtend({},e.row),column:s.deepExtend({},e.column)};return I.sphere(i).concat(I.twitch(i))},full:function(t){var e,i=S(t),n=i[i.secondSide].length;e=n>1?v(i[i.secondSide].current,n,i[i.secondSide].loop):[i[i.secondSide].current];var o=s.deepExtend({},i[i.firstSide]),a=s.deepExtend({},i[i.secondSide]),r=[];return e.forEach((function(t){var e={swapSides:i.swapSides,justFirstLine:!0};a.current=t,e[i.firstSide]=o,e[i.secondSide]=a,r=r.concat(I.sphere(e))})),i.isBackward&&r.reverse(),r},custom:function(t){var e=S(t),i={x:e.column.current,y:e.row.current},n={x:e.column.current+e.column.jumpCount,y:e.row.current+e.row.jumpCount},s=[];return s=function(t,e){var i={x:[],y:[]},n=function(t,e,n,s){var o,a,r=n-t,h=s-e,c=1,u=e;for(h<0&&(c=-1,h=-h),a=2*h-r,o=t;o<=n;o++)i.x.push(o),i.y.push(u),a>0&&(u+=c,a-=2*r),a+=2*h},s=function(t,e,n,s){var o,a,r=n-t,h=s-e,c=1,u=t;for(r<0&&(c=-1,r=-r),a=2*r-h,u=t,o=e;o<=s;o++)i.x.push(u),i.y.push(o),a>0&&(u+=c,a-=2*h),a+=2*r};return Math.abs(e.y-t.y)<Math.abs(e.x-t.x)?t.x>e.x?n(e.x,e.y,t.x,t.y):n(t.x,t.y,e.x,e.y):t.y>e.y?s(e.x,e.y,t.x,t.y):s(t.x,t.y,e.x,e.y),i}(i,n),s=function(t){var e=[];t.x[0]!==i.x&&t.x.reverse(),t.y[0]!==i.y&&t.y.reverse();for(var n=0,s=t.x.length;n<s;n++)e.push({col:t.x[n],row:t.y[n]});return e}(s),s=m(s).map((function(t){return{col:I.lib.getRightIndex(t.col,e.column.length,e.column.loop),row:I.lib.getRightIndex(t.row,e.row.length,e.row.loop)}}))}}),O={_:y={getStep:function(t){var e=1;return t>24&&(e=Math.floor(t/24))>3&&(e=3),e},getIndexes:function(t){var e=[],i=[],n=!0,s=y.getStep(t);do{for(var o=[],a=0;a<t;a+=s)i[a]||(o.push(a),i[a]=1);1===s&&(n=!1),e.push(o),s=Math.ceil(s/2)}while(s>=1&&n);return e},getRightIdexes:function(t,e,i,n){t.forEach((function(t){var o=t+e,a=s.getArrayIndex(o,i);(o<i||a<e)&&n(a)}))},getOptions:function(t){var e=s.deepExtend({},t);return e.schemaOfImages=e.images.map((function(t){return t.map((function(t){return 0}))})),e.rowLength=e.images.length,e.colLength=e.images[e.startRow].length,e},all:function(t,e,i){for(var n=[],s=0,o=t.length;s<o;s++)for(var a=0,r=t[s].length;a<r;a++)e[s][a]||(n.push([s,a]),e[s][a]=i+1);return n},getSideOpt:function(t){var e={length:t.colLength,start:t.startCol,otherLength:t.rowLength,otherStart:t.startRow};if(t.swapSides){var i=e.length;e.length=e.otherLength,e.otherLength=i,i=e.start,e.start=e.otherStart,e.otherStart=i}return e}},all:function(t){var e=[],i=y.getOptions(t),n=y.getIndexes(i.colLength),o=[];return i.images.forEach((function(t,e){var a=t.length;y.getRightIdexes(n[0],i.startCol,a,(function(t){var n=s.getArrayIndex(e+i.startRow,i.rowLength);o.push([n,t]),i.schemaOfImages[n][t]=1}))})),e.push(o),e.push([].concat(y.all(i.images,i.schemaOfImages,1))),e},fastLine:function(t){for(var e=[],i=y.getOptions(t),n=y.getSideOpt(i),o=[],a=0,r=n.length;a<r;a++){var h=s.getArrayIndex(a+n.start,n.length);i.swapSides?(o.push([h,i.startCol]),i.schemaOfImages[h][i.startCol]=1):(o.push([i.startRow,h]),i.schemaOfImages[i.startRow][h]=1)}return e.push(o),e.push([].concat(y.all(i.images,i.schemaOfImages,1))),e},line:function(t){var e=[],i=y.getOptions(t),n=y.getSideOpt(i),s=y.getIndexes(n.length),o=[],a=1;for(y.getRightIdexes(s[0],n.start,n.length,(function(t){i.swapSides?(o.push([t,i.startCol]),i.schemaOfImages[t][i.startCol]=1):(o.push([i.startRow,t]),i.schemaOfImages[i.startRow][t]=1)})),e.push(o),o=[];a<s.length;)s[a]&&y.getRightIdexes(s[a],n.start,n.length,(function(t){i.swapSides?(o.push([t,i.startCol]),i.schemaOfImages[t][i.startCol]=a+1):(o.push([i.startRow,t]),i.schemaOfImages[i.startRow][t]=a+1)})),a+=1;return e.push(o.concat(y.all(i.images,i.schemaOfImages,a))),e},sphere:function(t){var e=[],i=y.getOptions(t),n=y.getSideOpt(i),s=y.getIndexes(n.length),o=y.getIndexes(n.otherLength),a=Math.max(s.length,o.length),r=[],h=1;for(y.getRightIdexes(s[0],n.start,n.length,(function(t){i.swapSides?(r.push([t,i.startCol]),i.schemaOfImages[t][i.startCol]=1):(r.push([i.startRow,t]),i.schemaOfImages[i.startRow][t]=1)})),y.getRightIdexes(o[0],n.otherStart,n.otherLength,(function(t){i.swapSides?i.schemaOfImages[i.startRow][t]||(r.push([i.startRow,t]),i.schemaOfImages[i.startRow][t]=1):i.schemaOfImages[t][i.startCol]||(r.push([t,i.startCol]),i.schemaOfImages[t][i.startCol]=1)})),e.push(r),r=[];h<a;)s[h]&&y.getRightIdexes(s[h],n.start,n.length,(function(t){i.swapSides?(r.push([t,i.startCol]),i.schemaOfImages[t][i.startCol]=h+1):(r.push([i.startRow,t]),i.schemaOfImages[i.startRow][t]=h+1)})),o[h]&&y.getRightIdexes(o[h],n.otherStart,n.otherLength,(function(t){i.swapSides?(r.push([i.startRow,t]),i.schemaOfImages[i.startRow][t]=h+1):(r.push([t,i.startCol]),i.schemaOfImages[t][i.startCol]=h+1)})),h+=1;return e.push(r.concat(y.all(i.images,i.schemaOfImages,h))),e}},M=(C=function(t,e){return t+"."+e},b=function(t,e){return t%e==0},x=function(t,e,i){return/^\//.test(i)?t+i:e+"/"+i},function(e){"use strict";function i(t){var i,n,o;return(i=e.call(this)||this).o=t,i._startColumn=0,i._startRow=0,i._currentColumn=0,i._currentRow=0,i.nextColumn=0,i.nextRow=0,i.futureColumn=0,i.futureRow=0,i.imgMap=[],i.isAvailableOfLoading=!0,i.images=[],i.isStartedFullInit=!1,i.imageInfoPromise=null,i.loadingMap={queue:[]},i.url=s.spinLib.getUrl(i.o.url),i.absoluteURL=(n=i.url,o=[],o=m(n.split("//")),n=o[1],(o=[o=o[0],n=n.split("/")[0]]).join("//")),i.infoImg=null,i.imageInfoId="img-"+s.generateUUID(),i.addEvents(),i}t.inheritsLoose(i,e);var o=i.prototype;return o.createImageInfo=function(){var t,e,i=this;return this.infoImg||(this.infoImg=new E(n.normalizeURL(x(this.absoluteURL,this.url,(t=Object.keys(i.o.layers)[0],e=Object.keys(i.o.layers[t])[0],i.o.layers[t][e]))),{imageSettings:this.o.imageSettings,infoId:this.imageInfoId,round:!0,referrerPolicy:this.o.referrerPolicy},null,null),this.infoImg.parentClass=this),this.infoImg},o.loadImageInfo=function(){var t=this;return this.imageInfoPromise||(this.imageInfoPromise=new Promise((function(e,i){t.createImageInfo(),t.infoImg.loadInfo().then((function(i){t.isStartedFullInit&&t.createQueue(),e({size:t.infoImg.originSize})})).catch((function(t){i({error:t})}))}))),this.imageInfoPromise},o.startFullInit=function(t){var e=this;this.isStartedFullInit||(this.isStartedFullInit=!0,this.o=Object.assign(this.o,t),this.o.layers=s.spinLib.checkLayers(this.o.layers),this.o.layers=s.spinLib.swapLayers(this.o.layers,this.o.swapSides),this.imgMap=Object.values(this.o.layers).filter((function(t,i){return b(i,e.o.rowIncrement)})).map((function(t){return Object.values(t).filter((function(t,i){return b(i,e.o.columnIncrement)})).map((function(t){return n.normalizeURL(x(e.absoluteURL,e.url,t))}))})),s.spinLib.reverse(this.o.reverseColumn,this.o.reverseRow,this.imgMap),this.createImages(this.imgMap),this.setFirstImage(),this.imageInfoPromise&&this.infoImg.loadInfo().then((function(t){e.loadingMap.queue.length||e.createQueue()})).catch((function(t){})))},o.setImageSettings=function(t){return t||(t={}),t.imageSettings||(t.imageSettings={}),t.imageSettings.scale||(t.imageSettings.scale={}),t.callbackData||(t.callbackData={}),t.imageSettings.scale.option="fill",t.srcset||(t.srcset={}),null!==this.o.quality&&(t.src||(t.src={}),t.src=this.o.quality),t.dppx>=1.5?t.srcset.quality=this.o.hdQuality:null!==this.o.quality&&(t.srcset.quality=this.o.quality),t},o.getImage=function(t,e){var i=t,n=e;return l.defined(t)||(i=this._currentRow,n=this._currentColumn),this.images[i][n]},o.getThumbnail=function(t){return this.getImage(this._startRow,this._startColumn).getThumbnail(t)},o.addEvents=function(){var t=this,e=!1,i=!1,n=!1,s=function(s){e&&i&&n||s.lens||(e||s.col!==t._currentColumn||s.row!==t._currentRow||(e=!0,t.emit("mapFirstImageLoaded",{data:s})),!i&&t.loadingMap.checkOfFirstPartImagesLoading(s.row,s.col)&&(i=!0,t.emit("mapImagesReady")),!n&&t.loadingMap.checkOtherImagesLoading(s.row,s.col)&&(n=!0),e&&i&&n&&t.emit("mapAllImagesLoaded"))};this.on("imageOnload",(function(e){e.stopAll();var i=Object.assign({isCurrent:t.isCurrent(e.data)},e.data);t.emit("mapImageLoaded",{data:i}),s(i)})),this.on("imageOnerror",(function(e){e.stopAll(),e.data.error=!0,t.emit("mapImageLoaded",{data:e.data}),s(e.data),console.log("image error")}))},o.getHintType=function(){var t=this.countOfRows,e=this.countOfFrames;return t>1&&e>1?"multi-row":t>1?"col":"row"},o.isLoaded=function(t){var e=this.getImage();return t=this.setImageSettings(t),e.isLoaded(t)},o.isExist=function(t){var e=this.getImage();return t=this.setImageSettings(t),e.isExist(t)},o.isCurrent=function(t){return t.row===this._currentRow&&t.col===this._currentColumn},o.pixelPerFrame=function(t){var e=t,i=this.countOfFrames;return i>1?(this.o.loopColumn||(e/=2),e/=i):e/=this.countOfRows,e/=Math.pow(this.o.columnSpeed/50,2)},o.pixelPerRow=function(t){var e=t,i=this.countOfRows;return i>1?(this.o.loopRow||(e/=2),e/=i):e/=this.countOfFrames,e/=Math.pow(this.o.rowSpeed/50,2)},o.createImages=function(t){for(var e=0,i=t.length;e<i;e++){for(var s=[],o=0,a=t[e].length;o<a;o++){var r=new E(n.adjustURL(t[e][o]),{imageSettings:this.o.imageSettings,infoId:this.imageInfoId,round:!0,referrerPolicy:this.o.referrerPolicy},o,e);r.parentClass=this,s.push(r)}this.images.push(s)}},o.setFirstImage=function(){var t=this.o.startRow,e=this.o.startColumn;this.o.reverseRow&&(t=this.images.length+1-t),this.o.reverseColumn&&(e=this.images[0].length+1-e),this._currentRow=t-1,this._currentColumn=e-1,this._currentRow>this.images.length-1&&(this._currentRow=0),this._currentColumn>this.images[0].length-1&&(this._currentColumn=0),this._startColumn=this.futureColumn=this.nextColumn=this._currentColumn,this._startRow=this.futureRow=this.nextRow=this._currentRow},o.loadImage=function(t,e,i){var n=this.getImage(e,i);t=this.setImageSettings(t),n.getImage(t)},o.loadFirstImage=function(t){if(this.loadingMap.queue.length){var e=this.loadingMap.queue[0].shift();this.loadImage(t,e[0],e[1])}},o.loadFirstPartOfImages=function(t){var e=this;this.loadingMap.queue.length&&this.loadingMap.queue[0].forEach((function(i){e.loadImage(t,i[0],i[1])}))},o.loadOtherImages=function(t){var e=this;this.isAvailableOfLoading&&this.loadingMap.queue.length&&(t=this.setImageSettings(t),this.loadingMap.queue[1].forEach((function(i){e.loadImage(t,i[0],i[1])})))},o.loadImages=function(t){var e=this._currentColumn;this.isAvailableOfLoading&&(t=this.setImageSettings(t),this.o.swapSides?this.images.forEach((function(i){var n=i[e];n.isExist(t)?n.sendLoad(t):n.getImage(t)})):this.images.forEach((function(e){e.forEach((function(e){e.isExist(t)?e.sendLoad(t):e.getImage(t)}))})))},o.isImagesExist=function(t){return t=this.setImageSettings(t),!this.images.some((function(e){return e.some((function(e){return!e.isExist(t)}))}))},o.createQueue=function(){var t,e=this;switch(this.o.loadingSchema){case"momentum":t="fastLine";break;case"full":t="all";break;case"row":case"spin":t="line";break;case"sphere":case"intro":case"twitch":t="sphere";break;default:t="all"}this.loadingMap.queue=O[t]({swapSides:this.o.swapSides,images:this.images,startRow:this._currentRow,startCol:this._currentColumn}),this.loadingMap.checkOfFirstPartImagesLoading=function(){var t=[];e.loadingMap.queue[0].forEach((function(e){t.push(C(e[0],e[1]))})),t.shift();var i=t.length,n=!1;return i||(n=!0),function(e,s){return n||t.indexOf(C(e,s))>=0&&0==(i-=1)&&(t=[],n=!0),n}}(),this.loadingMap.checkOtherImagesLoading=function(){var t,i=[];e.loadingMap.queue[1].forEach((function(t){i.push(C(t[0],t[1]))}));var n=!1;return(t=i.length)||(n=!0),function(e,s){return n||i.indexOf(C(e,s))>=0&&0==(t-=1)&&(i=[],n=!0),n}}()},o.prepareFutureImage=function(t,e){var i,n,s;e||(e=1),["next","prev"].includes(t)?(s=this.o.loopColumn,i=this.futureColumn,n=this.countOfFrames,"next"===t?i+=e:i-=e,this.futureColumn=R.lib.getRightIndex(i,n,s)):(s=this.o.loopRow,i=this.futureRow,n=this.countOfRows,"down"===t?i+=e:i-=e,this.futureRow=R.lib.getRightIndex(i,n,s))},o.setPreparedNextImage=function(){this.futureColumn=this._currentColumn=this.nextColumn,this.futureRow=this._currentRow=this.nextRow,this.emit("frameChange",{data:{column:this._currentColumn,row:this._currentRow}})},o.setPreparedFutureImage=function(){var t=this.getImage(this.futureRow,this.futureColumn);t&&t.ready&&(this._currentColumn=this.futureColumn,this._currentRow=this.futureRow,this.emit("frameChange",{data:{column:this._currentColumn,row:this._currentRow}}))},o.resetPreparedImage=function(){this.futureColumn=this.nextColumn=this._currentColumn,this.futureRow=this.nextRow=this._currentRow},o.getCurrentImage=function(t){t=this.setImageSettings(t);var e=this._currentColumn,i=this._currentRow,n=this.getImage(i,e);return n=n.getImage(t)},o.jump=function(t,e,i){var n,o=this,a=!1,r=function(t,e){var i=!1;return o.getImage(t,e).ready&&(o.nextRow=t,o.nextColumn=n,o.setPreparedNextImage(),i=!0),i};switch(t){case"row":a=r(s.spinLib.getNextIndex(this._currentRow,e,i,this.countOfRows,this.o.loopRow),n=this._currentColumn);break;case"col":n=s.spinLib.getNextIndex(this._currentColumn,e,i,this.countOfFrames,this.o.loopColumn),a=r(this._currentRow,n)}return a},o.setNextAnimationFrame=function(t){var e=this._imagesBuffer[t],i=this.getImage(e.row,e.col);i&&i.ready&&(this.nextColumn=e.col,this.nextRow=e.row)},o.getNextBufferIndex=function(t){var e,i=this,n=0,s=this._imagesBuffer.length,o=function(t){var e=i.getImage(t.row,t.col),n=!1;return e&&e.ready&&(n=!0),n};do{n+=1,(t+=1)>=s?n=0:e=this._imagesBuffer[t]}while(n>0&&(!e||!o(e)));return n},o.createAnimation=function(t,e){var i=!1,n=!1,s=0,o=0;switch(t){case"as-row":t="sphere",i=!0;break;case"as-sphere":t="sphere";break;case"as-full":t="full";break;case"as-helix":t="sphere";break;case"intro":t="intro",i=!0;break;case"twitch":t="twitch";break;case"spin":t="sphere",i=!0;break;case"momentum":t="sphere",i=!0,n=!0;break;case"sphere":t="sphere";break;default:s=t.cols,o=t.rows,t="custom"}return this._imagesBuffer=R[t]({justFirstLine:i,swapSides:this.o.swapSides,axelerate:n,isBackward:e,count:t,row:{length:this.countOfRows,loop:this.o.loopRow,current:this._currentRow,jumpCount:o},column:{length:this.countOfFrames,loop:this.o.loopColumn,current:this._currentColumn,jumpCount:s}}),this._imagesBuffer.length},o.clearFramesQueue=function(){this._imagesBuffer=[]},o.cancelLoadingImage=function(t){var e=this.getImage();e&&(t=this.setImageSettings(t),e.cancelLoadingImage(t))},o.destroy=function(t){this.isAvailableOfLoading=!1,this.resetPreparedImage(),this.clearFramesQueue(),this.images.forEach((function(t){t.forEach((function(t){t.destroy()}))})),this.off("imageOnload"),this.off("imageOnerror"),this.loadingMap={queue:[]},this.imgMap=[],this.images=m([]),this._currentColumn=0,this._currentRow=0,e.prototype.destroy.call(this)},t.createClass(i,[{key:"map",get:function(){return this.imgMap.map((function(t){return t.map((function(t){return!1}))}))}},{key:"countOfImages",get:function(){return this.countOfFrames*this.countOfRows}},{key:"countOfFrames",get:function(){return this.images[0].length||0}},{key:"countOfRows",get:function(){return this.images.length}},{key:"originImageUrl",get:function(){var t=this._currentColumn,e=this._currentRow,i=this.getImage(e,t);return i=i.originUrl}},{key:"startRow",get:function(){return this._startRow}},{key:"startColumn",get:function(){return this._startColumn}},{key:"currentRow",get:function(){return this._currentRow}},{key:"currentColumn",get:function(){return this._currentColumn}},{key:"imagesBuffer",get:function(){return this._imagesBuffer}}]),i}(o)),P="smv",F=function(){"use strict";function t(t,e){this.parentNode=t,this.activeNode=e,this.activatedCurtain=l.$new("div").addClass("spin-activated-curtain").setCss({top:0,left:0,width:"100%",height:"100%",position:"absolute","z-index":999999999}),this.state=0}var e=t.prototype;return e.show=function(){this.state&&(this.activatedCurtain.setCssProp("display","block"),this.activeNode.addClass(P+"-activated"))},e.hide=function(){this.state&&(this.activatedCurtain.setCssProp("display","none"),this.activeNode.removeClass(P+"-activated"))},e.activateCurtain=function(){this.state||(this.state=1,this.activeNode.addClass(P+"-sleeping"),this.parentNode.append(this.activatedCurtain))},e.deactivateCurtain=function(){this.state&&(this.state=0,this.activeNode.removeClass(P+"-sleeping"),this.activatedCurtain.remove())},e.addTapEvents=function(t){var e=this;this.activatedCurtain.addEvent("tap",(function(i){e.state&&(i.action="activate",t(i))})),this.activeNode.addEvent("tap",(function(i){e.state&&(i.action="deactivate",t(i))}))},e.addPinchEvent=function(t){this.activeNode.addEvent("pinch",t)},e.removePinchEvent=function(t){this.activeNode.removeEvent("pinch",t)},e.destroy=function(){this.state=1,this.hide(),this.deactivateCurtain(),this.removePinchEvent(),this.activeNode.removeEvent("tap"),this.activatedCurtain.remove(),this.activatedCurtain.removeEvent("tap"),this.activatedCurtain=null},t}(),L=function(t){t.stopDefaults()};return function(e){"use strict";function o(o,a){var r;return(r=e.call(this,o,a,z)||this).type=i.SLIDE.TYPES.SPIN,r.canvas=null,r.canvasContainer=l.$new("div").addClass("spin-canvas-container"),r.coreNode=l.$new("div").addClass("sirv-spin"),r.instanceNode.append(r.coreNode),r.ctx=null,r.isSmoothing=!1,r.smooseTimeout=null,r.minSizeOfFrame=0,r.minSizeOfRow=0,r.size={width:0,height:0},r.isDragMove=!1,r.longTapTimer=!1,r.imagesMap=null,r.isInited=!1,r.loader=null,r.hint=null,r.openedImg=null,r.scale=1,r.cssId=-1,r.boxBoundaries=null,r.hotspots=null,r.animationFX=null,r.loadedImages=[],r.currentSize={width:0,height:0},r.currentImageSize={width:0,height:0},r.standardSize={width:0,height:0},r.lastImg=null,r.startLoadingTime=null,r.isOver=!1,r.isSpinActivated=!l.browser.mobile,r.canvasPromise=null,r.firstImageLoaded=!1,r.firstPartOfImagesLoaded=!1,r.isInfoLoaded=!1,r.customActionWas=!1,r.isAutoplayPaused=!1,r.reflectDirection=!1,r.configURL=r.instanceNode.attr("data-src")||r.instanceNode.attr("data-config")||"",r.imageBaseURL=n.normalizeURL(r.configURL.replace(/([^#?]+)\/.*$/,"$1/")),r.absoluteURL=r.imageBaseURL.replace(/(^https?:\/\/[^/]*).*/,"$1/"),r.configHash=l.getHashCode(r.configURL.replace(/^http(s)?:\/\//,"")),r.configPath="/"+r.configURL.replace(r.absoluteURL,""),r.imageInfoCallbackName="sirv_spin_image_info_",r.sessionId=l.getHashCode(r.configURL.replace(/^http(s)?:\/\//,"")+l.D.node.location.href.replace(/^http(s)?:\/\//,"")+ +new Date),r.layers={},r.imageSettings={},r.hotspotsData=[],r.fullscreenStartTime=0,r.meta={},r.isFullscreen=a.isFullscreen,r.nativeFullscreen=a.nativeFullscreen,r.infoSettings={},r.autospinResumeTimer=null,r.isHidden=!1,r.sessionStartTime=0,r.animationCloud=null,r.touchDragCloud=null,r.slideDragEventStart=!1,r.dppx=null,r.startTimeForZommEvent=null,r.resizeAnimationTimer=s.debounce((function(){r.animate("inactive")}),1e3),r.keyPressHandlerForShiftButton=null,r.firstUserInteraction=!1,r.userColumn=0,r.userRow=0,r.placeholder=r.instanceNode.node.querySelector("img"),r.placeholder&&(r.placeholder=m(r.placeholder)),r.replaceTextParamURLFromMetadata(),r.trackUnload=function(){r.sendStats("Page Unload",+new Date-r.sessionStartTime,{message:"Stopped"},!0)},r.disableScrollOnMobile=function(){var t=l.D.fullSize,e=r.instanceNode.size;Math.abs(e.height-t.height)<=50?r.instanceNode.addEvent("touchmove",L):r.instanceNode.removeEvent("touchmove",L)},r.resizeWindowTimer=null,r.windowResizeCallback=function(){clearTimeout(r.resizeWindowTimer),r.resizeWindowTimer=setTimeout((function(){r.disableScrollOnMobile()}),10)},r.api=Object.assign(r.api,{isInitialized:r.isInitialized.bind(t.assertThisInitialized(r)),play:r.play.bind(t.assertThisInitialized(r)),pause:r.pause.bind(t.assertThisInitialized(r)),rotate:r.rotateXY.bind(t.assertThisInitialized(r)),rotateX:r.rotateX.bind(t.assertThisInitialized(r)),rotateY:r.rotateY.bind(t.assertThisInitialized(r)),jump:r.jump.bind(t.assertThisInitialized(r)),jumpRows:r.jumpRows.bind(t.assertThisInitialized(r)),jumpCols:r.jumpCols.bind(t.assertThisInitialized(r)),currentFrame:r.currentFrame.bind(t.assertThisInitialized(r))}),r.createHotspotsClass(u),r.getInfo().then((function(){l.browser.mobile&&r.option("tappingFirst")?r.activatedCurtain=new F(r.instanceNode,r.coreNode):r.isSpinActivated=!0,r.createMap(r.quality,r.hdQuality,r.isHDQualitySet)})).catch((function(t){})),r}t.inheritsLoose(o,e);var a=o.prototype;return a.isInitialized=function(){return this.isInited},a.rotateXY=function(t,e){return!(!this.ready||this.isZoomed())&&this.rotate(t,e)},a.rotateX=function(t){return!(!this.ready||this.isZoomed())&&this.rotate(t,null)},a.rotateY=function(t){return!(!this.ready||this.isZoomed())&&this.rotate(null,t)},a.jump=function(t){return this.jumpRows(t)},a.jumpRows=function(t){return!(!this.ready||this.isZoomed())&&this.jumpTo(t,"row")},a.jumpCols=function(t){return!(!this.ready||this.isZoomed())&&this.jumpTo(t,"col")},a.currentFrame=function(){return this.ready?this.getCurrentFrame():null},a.isActive=function(){return this.isSpinActivated},a.makeGlobalOptions=function(t){var e=this._options.options;return t.fromJSON(e.common.common),this.infoSettings&&Object.entries(this.infoSettings).forEach((function(e){["images","hotspots"].includes(e[0])||t.set.apply(t,e)})),t.fromString(e.local.common),t.fromString(this.instanceNode.attr("data-options")||""),t},a.makeOptions=function(){var t;return this._options.options=((t=this._options.options).common||(t.common={}),t.common.common||(t.common.common={}),t.common.mobile||(t.common.mobile={}),t.local||(t.local={}),t.local.common||(t.local.common=""),t.local.mobile||(t.local.mobile=""),t),e.prototype.makeOptions.call(this)},a.sendStats=function(t,e,i,n){var s={account:this.config.account,useBeacon:!!n,event:t,eventTime:e,sessionId:this.sessionId,origin:this.configPath};i&&(s.data=i),this.emit("stats",{data:s})},a.getInfo=function(){var t=this;return this.gettingInfoPromise||(this.gettingInfoPromise=new Promise((function(e,i){t.waitGettingInfo.wait((function(){var n="sirv_spin_info_v1_"+t.configHash,o=t.configURL+(l.stringHas(t.configURL,"?")?"&":"?")+"info="+n;s.getRemoteData(o,n,t.referrerPolicy).then((function(n){t.destroyed||(n.layers?(t.config=n,t.layers=t.config.layers,t.meta=t.config._file.meta||null,t.infoSettings=t.config.settings,t.hotspotsData=t.config.settings.hotspots||[],t.imageSettings=t.config.settings.images.main,t.accountInfo={account:t.config.account,branded:t.config.branded},t.sessionStartTime=+new Date,t.sendStats("sessionStart",t.sessionStartTime),l.W.addEvent("beforeunload",t.trackUnload),e()):n.contentType&&/image/.test(n.contentType)||n._isplaceholder?i({error:"changeSpinToImage",isPlaceholder:n._isplaceholder,account:n.account}):i({error:{status:404}}))})).catch((function(e){t.destroyed||i({error:e})}))}))}))),this.gettingInfoPromise},a.replaceTextParamURLFromMetadata=function(){var t=this;this.imageSettings.text&&this.imageSettings.text.text&&(this.imageSettings.text.text=this.imageSettings.text.text.replace(/\$\{spin\.(title|description)\}/g,(function(e,i){var n=t.meta[i]||"";return"string"==typeof n?n:i})),""===this.imageSettings.text.text&&delete this.imageSettings.text)},a.getDPPX=function(t){var e=t.height>t.width?"height":"width",i={};i[e]=t[e],this.dppx=s.getDPPX(r.roundImageSize(i)[e],this.infoSize[e],this.upscale)},a.showHint=function(){var t=!1;return this.hint&&(this.always&&![i.FULLSCREEN.OPENING,i.FULLSCREEN.OPENED].includes(this.fullscreenState)||this.option("autospin.enable")&&this.firstUserInteraction||(t=!0,this.hint.show())),t},a.onStartActions=function(){this.ready?this.animate("slideIn"):this.isStarted&&(this.isInited&&!this.initNameEvent?this.loadFirstPartOfImages():this.isInView&&this.loadFirstImage())},a.onStopActions=function(){this.zoomOut(),this.stopSmoothing(),this.stopAnimation(),this.deactivateSpin(),this.setUserFrame(),this.customActionWas=!1,this.hint&&this.hint.hide(),e.prototype.onStopActions.call(this)},a.onInView=function(t){t?this.isInView||(this.ready?(this.isInView=!0,this.animate("inView")):(this.preload||this.isSlideShown)&&(this.isInView=!0,this.isInited?this.isSlideShown&&!this.initNameEvent&&this.loadFirstPartOfImages():this.loadFirstImage())):this.isInView&&this.ready&&(this.option("autospin.enable")?this.animationCloud.pause():(this.stopAnimation(),this.setUserFrame()),this.deactivateSpin())},a.startFullInit=function(t){var i=this;this.isStartedFullInit||(e.prototype.startFullInit.call(this,t),this.getInfo().then((function(){i.normalizeOptions(),i.getId("spin-");var t=i.option;i.imagesMap.startFullInit({swapSides:t("swapSides"),startColumn:t("column.start"),startRow:t("row.start"),reverseColumn:t("column.reverse"),reverseRow:t("row.reverse"),loopColumn:t("column.loop"),loopRow:t("row.loop"),rowSpeed:t("row.sensitivity"),columnSpeed:t("column.sensitivity"),columnIncrement:t("column.increment"),rowIncrement:t("row.increment")}),i.loadedImages=i.imagesMap.map,i.loader=new c(i.coreNode,{max:i.imagesMap.countOfImages,class:"spin-loader"}),i.loader.parentClass=i,i.coreNode.addEvent(["btnclick","tap"],(function(t){t.stop()})),i.on("isSingleSlide",(function(t){t.stop(),i.activatedCurtain&&(t.data.isSingle?i.activatedCurtain.deactivateCurtain():i.activatedCurtain.activateCurtain())})),i.hotspots&&(i.hotspots.Options={columnsRevers:i.option("column.reverse"),rowsRevers:i.option("row.reverse"),rows:i.imagesMap.countOfRows,columns:i.imagesMap.countOfFrames}),i.initAnimation()})).catch((function(){})),l.browser.touchScreen&&this.on("dragEvent",(function(t){"dragstart"===t.data.type?(i.slideDragEventStart=!0,i.touchDragCloud&&i.touchDragCloud.removeEvent()):"dragend"===t.data.type&&(i.slideDragEventStart=!1,i.touchDragCloud&&i.touchDragCloud.addEvent())})))},a.getThumbnailData=function(t){return this.imagesMap.getThumbnail(t)},a.setUserFrame=function(){this.jumpTo(this.userRow,"row"),this.jumpTo(this.userColumn,"col")},a.getSocialButtonData=function(t,i){return i?this.instanceNode.attr("data-src"):e.prototype.getSocialButtonData.call(this,t)},a.turnOnOff=function(){var t=this;l.browser.mobile&&this.activatedCurtain&&this.activatedCurtain.addTapEvents((function(e){"activate"===e.action?(t.isSpinActivated||(e.stop(),t.activateSpin()),t.hotspots&&t.hotspots.hideActiveHotspotBox(!0)):t.isSpinActivated&&(e.stop(),t.stopSmoothing(),t.stopAnimation(),t.hotspots&&t.hotspots.isHotspotActivated()?t.hotspots.hideActiveHotspotBox(!0):t.deactivateSpin())}))},a.activateSpin=function(){this.isSpinActivated||(this.isSpinActivated=!0,l.browser.mobile&&(this.stopAnimation(),this.customActionWas=!0,this.hint&&this.hint.hide(),this.activatedCurtain&&this.activatedCurtain.hide()))},a.deactivateSpin=function(){this.isSpinActivated&&(this.isSpinActivated=!1,l.browser.mobile&&(this.customActionWas||this.showHint(),this.activatedCurtain&&this.activatedCurtain.show()))},a.createPinchEvent=function(){var t,n,s,o,a,r,h,c,u,m=this,d=function(){a=1,r=1,s=m.zoom.baseScale.x,h=1,c=s,t=1-s};e.prototype.createPinchEvent.call(this,this.coreNode),this.pinchCloud.onPinchStart=function(t){[i.FULLSCREEN.OPENING,i.FULLSCREEN.CLOSING].includes(m.fullscreenState)||(m.pinchCloud.pinch=!0,clearTimeout(m.longTapTimer),m.stopSmoothing(),m.stopAnimation(),m.touchDragCloud&&m.touchDragCloud.removeEvent(),m.hotspots&&m.hotspots.hideActiveHotspotBox(!0),m.customActionWas=!0,u=!1,m.pinchCloud.scale=t.scale,o=1,m.openedImg&&(o=m.zoom.scale.x,s===l.U&&d(),o/=s),m.sendEvent("pinchStart"))},this.pinchCloud.onPinchResize=function(t){m.pinchCloud.pinch&&!m.pinchCloud.block&&m.zoom&&m.fullscreenState===i.FULLSCREEN.OPENED&&m.openedImg&&(m.pinchCloud.scale=t.scale,m.zoom.basePercent=t.centerPoint)},this.pinchCloud.onPinchMove=function(e){m.pinchCloud.pinch&&!m.pinchCloud.block&&(m.fullscreenState!==i.FULLSCREEN.OPENED&&m.isFullscreenEnabled?e.scale>=2&&(m.pinchCloud.block=!0,m.sendEvent("fullscreenIn")):m.openedImg?m.zoom&&(u?(n=e.scale,h<(n*=s)&&(c=s,r=1,a=t/((h=n)-s)),c>n&&(h=1,a=1,r=s/(c=n)),n=(s+((n*=o)-s)*a)*r,m.zoom.setScale(n,e.centerPoint.x,e.centerPoint.y)):(u=!0,m.zoom.basePercent=e.centerPoint),m.pinchCloud.scale=e.scale):e.scale>1.1?(m.firstUserInteraction=!0,m.openLens(e.centerPoint.x,e.centerPoint.y,!1,"zero"),d(),o=1):e.scale<.2&&(m.pinchCloud.block=!0,m.sendEvent("fullscreenOut")))},this.pinchCloud.onPinchEnd=function(t){m.pinchCloud.pinch&&(m.pinchCloud.pinch=!1,m.openedImg&&m.activateSpin(),setTimeout((function(){m.touchDragCloud&&m.touchDragCloud.addEvent()}),16),m.sendEvent("pinchEnd")),m.openedImg&&m.pinchCloud.removeEvent(),m.pinchCloud.block=!1,m.pinchCloud.scale=0}},a.onStopContext=function(){this.stopSmoothing(),this.stopAnimation(),this.hint&&this.hint.hide()},a.onSecondSelectorClick=function(){this.zoomOut()},a.setGlobalEvents=function(){var t=this;this.on("zoomUp",(function(e){var i=e.data;e.stop(),t.ready&&t.zoom&&!t.isDragMove&&t.isFullscreenActionEnded()&&(t.firstUserInteraction=!0,t.openLens(i.x,i.y))})),this.on("zoomDown",(function(e){e.stop(),t.ready&&t.zoom&&t.isZoomed()&&t.zoom.hide()}))},a.normalizeOptions=function(){var t=this;this.option("autospin.enable")||this.option("autospin.duration",0),this.option("swapSides")&&["start","loop","increment","reverse","sensitivity"].forEach((function(e){var i=t.option("row."+e);t.option("row."+e,t.option("column."+e)),t.option("column."+e,i)})),["onStart","onVisible","onInactive"].forEach((function(e){var i="hint."+e+".effect";"none"===t.option(i)&&t.option(i,!1)})),l.browser.mobile&&"load"!==this.option("initialize")&&this.option("initialize","tap"),this.setDefaultZoomOptions(),this.option("zoom.enable")&&"max"!==this.option("zoom.ratio")&&this.option("zoom.ratio")<i.MIN_RATIO&&this.option("zoom.enable",!1)},a.setDefaultZoomOptions=function(){e.prototype.setDefaultZoomOptions.call(this),this.defaultZoomOptions=Object.assign(this.defaultZoomOptions,{tiles:this.option("zoom.tiles"),pan:this.option("zoom.pan"),trigger:l.browser.mobile?"dblclick":"click",type:"inner",height:"auto"})},a.loadFirstPartOfImages=function(){this.firstPartOfImagesLoaded||(this.firstPartOfImagesLoaded=!0,this.startLoadingTime=+new Date,this.imagesMap.loadFirstPartOfImages({width:this.currentImageSize.width,height:this.currentImageSize.height,dppx:this.dppx}),this.loader&&this.loader.show())},a.isThumbnailGif=function(){return"gif"===this.option("thumbnail.type")},a.init=function(){var t=this;if(this.infoSize&&!this.isInited){switch(this.isInited=!0,this.initNameEvent=null,this.initFnEvent=function(e){e.stop(),t.coreNode.removeEvent(e.type,t.initFnEvent),t.activatedCurtain&&t.activatedCurtain.activatedCurtain.removeEvent(t.initNameEvent,t.initFnEvent),t.loadFirstPartOfImages()},this.option("initialize")){case"hover":this.initNameEvent="mouseover";break;case"click":this.initNameEvent="btnclick";break;case"tap":this.initNameEvent="tap"}this.initNameEvent?(this.coreNode.addEvent(this.initNameEvent,this.initFnEvent),this.activatedCurtain&&this.activatedCurtain.activatedCurtain.addEvent(this.initNameEvent,this.initFnEvent),this.loadFirstImage()):this.isInView&&this.isSlideShown&&this.loadFirstPartOfImages(),this.sendEvent("init")}},a.run=function(t,i,n){var s=e.prototype.run.call(this,t,i,n);return s&&(l.W.addEvent("resize",this.windowResizeCallback),this.initCanvas(),this.startGettingInfo()),s},a.initCanvas=function(){this.canvas=l.$new("canvas"),this.canvas.node.getContext&&(this.ctx=this.canvas.node.getContext("2d"));var t=this.rightAlt;t&&(this.canvas.attr("role","img"),this.canvas.attr("aria-label",t),this.canvas.attr("alt",t));var e=this.infoSize.width,i=this.infoSize.height,n=this.coreNode.size;e<n.width&&(e=n.width),i<n.height&&(i=n.height),0===n.height&&(this.cssId=l.addCSS("#"+this.id+" .smv-spin:before",{"padding-top":this.infoSize.height/this.infoSize.width*100+"%"},this.id+"-css"),n.height=n.width*(this.infoSize.height/this.infoSize.width)),this.currentSize=s.spinLib.calcProportionSize(n,this.infoSize),this.getDPPX(this.currentSize),this.standardSize.width=this.currentSize.width,this.standardSize.height=this.currentSize.height,this.setImageSize(),this.canvas.setCss({top:"0",left:"0",zIndex:10,position:"absolute"}),this.setCanvasSize(),this.canvasContainer.append(this.canvas),this.coreNode.append(this.canvasContainer),this.isInView&&(this.preload||this.isSlideShown)&&this.loadFirstImage()},a.loadContent=function(){this.loadFirstImage()},a.loadFirstImage=function(){if(!this.firstImageLoaded&&this.isInfoLoaded){if(this.currentImageSize.width&&this.currentImageSize.height||(this.currentSize=s.spinLib.calcProportionSize(this.coreNode.size,this.infoSize),this.getDPPX(this.currentSize),this.currentSize.width&&this.currentSize.height&&(this.setImageSize(),this.isStarted&&this.currentImageSize.width&&this.currentImageSize.height&&(this.setCanvasSize(),this.draw()))),!this.currentImageSize.width||!this.currentImageSize.height)return;this.waitToStart.start(),this.firstImageLoaded=!0,this.imagesMap.loadFirstImage({width:this.currentImageSize.width,height:this.currentImageSize.height,dppx:this.dppx})}},a.createMap=function(t,e,i){var n=this,s=this.option,o=null;s("autospin.enable")?o=s("autospin.type"):s("hint.onStart.enable")&&s("hint.onStart.effect")&&(o=s("hint.onStart.effect")),this.imagesMap=new M({url:this.configURL,imageSettings:this.imageSettings,layers:this.layers,swapSides:s("swapSides"),startColumn:s("column.start"),startRow:s("row.start"),reverseColumn:s("column.reverse"),reverseRow:s("row.reverse"),loopColumn:s("column.loop"),loopRow:s("row.loop"),rowSpeed:s("row.sensitivity"),columnSpeed:s("column.sensitivity"),columnIncrement:s("column.increment"),rowIncrement:s("row.increment"),loadingSchema:o,quality:t,hdQuality:e,isHDQualitySet:i,referrerPolicy:this.referrerPolicy}),this.imagesMap.parentClass=this,this.userColumn=this.imagesMap.startColumn,this.userRow=this.imagesMap.startRow,this.on("mapFirstImageLoaded",(function(t){if(t.stopAll(),n.placeholder&&n.placeholder.setCssProp("display","none"),n.isInited||(n.firstImageLoaded&&(n.draw(),n.canvas.setCssProp("transition","none"),n.canvas.render(),n.canvas.setCssProp("transition","")),n.loader&&n.loader.progress(),n.setCanvas().finally((function(){n.init()}))),n.hotspots){var e=n.imagesMap.getCurrentImage({width:n.currentSize.width,height:n.currentSize.height});n.hotspots.setFramePosition(e.row,e.col),n.hotspots.updateAndShow(),n.isInView&&n.isSlideShown&&n.hotspots.showNeededElements()}})),this.on("mapImagesReady",(function(t){t.stopAll(),n.imagesMap.loadOtherImages({width:n.currentImageSize.width,height:n.currentImageSize.height,dppx:n.dppx}),n.calcMinSizeForDrag();var e=+new Date;n.sendStats("framesPreloaded",e-n.sessionStartTime,{duration:e-n.startLoadingTime}),n.done(),n.sendContentLoadedEvent()})),this.on("mapImageLoaded",(function(t){t.stopAll(),n.loader&&(n.loadedImages[t.data.row][t.data.col]||(n.loadedImages[t.data.row][t.data.col]=!0,n.loader.progress())),t.data.error||t.data.isCurrent&&(t.data.callbackData.lens?n.zoom&&(n.zoom.shown||n.zoom.showing)&&n.openedImg&&n.openedImg.col===t.data.col&&n.openedImg.row===t.data.row&&n.zoom.addLoadedImage(t.data):n.lastImg&&(n.lastImg.width!==t.data.width||n.lastImg.height!==t.data.height)&&n.firstImageLoaded&&n.draw())})),this.on("mapAllImagesLoaded",(function(t){t.stopAll();var e=+new Date;n.sendStats("framesLoaded",e-n.sessionStartTime,{duration:e-n.startLoadingTime}),n.loader&&2!==n.loader.getProgressState()&&n.loader.hide()})),this.on("frameChange",(function(t){t.stop(),n.ready&&n.sendEvent("frameChange",{row:t.data.row,column:t.data.column})})),this.imagesMap.loadImageInfo().then((function(t){n.isInfoLoaded=!0;var e=Object.assign({},t.size);n.infoSize=e,n.hotspots&&(n.hotspots.originImageSize=n.infoSize)})).catch((function(t){n.isInfoLoaded=!0}))},a.getSelectorImgUrl=function(t){var e=this;return new Promise((function(i,n){e.getInfo().then((function(){e.imagesMap.loadImageInfo().then((function(n){e.waitToStart.wait((function(){var n=e.imagesMap.setImageSettings({dppx:e.dppx});n.src&&(t.src=n.src),t.srcset=n.srcset,"gif"===e.option("thumbnail.type")&&(t.originUrl=e.configURL.split("?")[0],t.imageSettings={image:24},e.option("thumbnail.gifParams")&&(t.imageSettings=s.paramsFromQueryString(e.option("thumbnail.gifParams")))),i(Object.assign(e.imagesMap.getThumbnail(t),{alt:e.rightAlt}))}))})).catch(n)})).catch(n)}))},a.getInfoSize=function(){var t=this;return new Promise((function(e,i){t.getInfo().then((function(){t.imagesMap.loadImageInfo().then(e).catch(i)})).catch(i)}))},a.onHotspotActivate=function(t){this.customActionWas=!0,this.stopAnimation(),e.prototype.onHotspotActivate.call(this,t)},a.onHotspotDeactivate=function(t){e.prototype.onHotspotDeactivate.call(this,t),this.animateWithDelay()},a.createHint=function(){if(this.option("hint.message.enable")){var t='<div class="spin-hint-animation"></div>',e=["spin-hint-horizontal-animation"],i=["spin-hint-vertical-animation"],n=[];switch(t+="<span>",t+=this.option("hint.message.text"),t+="</span>",this.imagesMap.getHintType()){case"multi-row":n=e.concat(i);break;case"row":n=e;break;case"col":n=i}var s={html:t,additionalClass:n};(l.browser.mobile||this.option("autospin.enable"))&&(s.autohide=0),this.hint=new h(this.coreNode,s),this.isSlideShown&&this.isInView&&"infinite"===this.option("autospin.type")&&this.showHint()}},a.createZoom=function(){var t=this,i=null;return!this.destroyed&&this.option("zoom.enable")&&(i=e.prototype.createZoom.call(this,this.coreNode,{}),this.zoomContainer&&(this.zoom.lensContainer=this.zoomContainer),this.coreNode.addEvent(["btnclick","dbltap"],(function(e){t.isFullscreenActionEnded()&&(t.firstUserInteraction=!0,t.openLens(e.x,e.y))})),l.browser.mobile),i},a.onZoomGetImage=function(t){e.prototype.onZoomGetImage.call(this,t),this.checkImage(t.data,t.data.dontLoad)?this.zoom.addLoadedImage(this.imagesMap.getCurrentImage(t.data)):this.imagesMap.loadImage(t.data)},a.onZoomCancelLoadingOfTiles=function(t){e.prototype.onZoomGetImage.call(this,t),t.data.round=!1,this.imagesMap.cancelLoadingImage(t.data)},a.onZoomBeforeShow=function(t){this.canvas.addClass(this.zoomClassName),this.hotspots&&this.hotspots.hideAll()},a.onZoomShown=function(t){this.isSlideShown?(this.startTimeForZommEvent=+new Date,this.openedImg&&this.sendStats("zoomIn",+new Date-this.sessionStartTime,{frame:{row:this.openedImg.row,column:this.openedImg.col},clientX:t.data.clientPosition.x,clientY:t.data.clientPosition.y,pageX:t.data.pagePosition.x,pageY:t.data.pagePosition.y}),this.sendEvent("zoomIn")):this.zoom.hide(!0)},a.onZoomHidden=function(t){if(this.openedImg){this.canvas.removeClass(this.zoomClassName);var e=+new Date;this.sendStats("zoomOut",e-this.sessionStartTime,{duration:e-this.startTimeForZommEvent,frame:{row:this.openedImg.row,column:this.openedImg.col},clientX:t.data.clientPosition.x,clientY:t.data.clientPosition.y,pageX:t.data.pagePosition.x,pageY:t.data.pagePosition.y}),this.hotspots&&(this.hotspots.showAll(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements())}this.sendEvent("zoomOut"),this.isSlideShown&&this.animateWithDelay(),this.startTimeForZommEvent=null,this.openedImg=null,this.pinchCloud&&this.pinchCloud.addEvent()},a.setLongTapEvents=function(){var t=this,e=l.W.node.navigator.pointerEnabled,i=!1,n=!1,s=["touchstart"];e?s.push("pointerdown"):s.push("MSPointerDown"),this.coreNode.addEvent(s,(function(e){t.isDragMove||t.pinchCloud.pinch||!t.isFullscreenActionEnded()||(clearTimeout(t.longTapTimer),t.longTapTimer=setTimeout((function(){e.stop(),i=!0,t.customActionWas=!0;var n=e.pageXY;t.touchDragCloud&&t.touchDragCloud.removeEvent(),t.firstUserInteraction=!0,t.openLens(n.x,n.y,!0)}),500),n=!0)})),s=["touchmove"],e?s.push("pointermove"):s.push("MSPointerMove"),this.coreNode.addEvent(s,(function(e){if(i&&t.isFullscreenActionEnded()){e.stop();var n=e.pageXY;t.zoom.customMove(n.x,n.y)}}),1),s=["touchend"],e?s.push("pointerup"):s.push("MSPointerUp"),this.coreNode.addEvent(s,(function(e){n&&(e.stop(),n=!1,clearTimeout(t.longTapTimer)),i&&t.isFullscreenActionEnded()&&(e.stop(),i=!1,t.zoom.hide(!0),t.touchDragCloud&&t.touchDragCloud.addEvent())}))},a.openLens=function(t,e,i,n){var s=!1;if(this.isZoomSizeExist()){var o=this.zoomSize;s=!0,this.stopSmoothing(),this.stopAnimation(),this.hint&&this.hint.hide(),this.hotspots&&this.hotspots.hideActiveHotspotBox(!0);var a,r,h=!1;this.isFullscreenActionEnded()&&this.imagesMap.isLoaded({width:this.currentImageSize.width,height:this.currentImageSize.height})?(a=this.currentImageSize.width,r=this.currentImageSize.height,h=!0):(a=this.lastImg.serverWidth,r=this.lastImg.serverHeight);var c=this.imagesMap.getCurrentImage({width:a,height:r,round:h});this.openedImg=c,s=void 0===t?this.zoom.showCenter(c.node,o):this.zoom.show(c.node,o,t,e,i,n)}return s},a.done=function(){var t=this.imagesMap.countOfRows,s=this.imagesMap.countOfFrames;if(this.loader&&this.loader.setMaxOpacity(.5),this.setBrowserEvents(),this.createHint(),this.createZoom(),this.setZoomEvents(),t>1&&s>1?this.coreNode.setCssProp("touch-action","none"):t>1?this.coreNode.setCssProp("touch-action","pan-x"):this.coreNode.setCssProp("touch-action","pan-y"),this.boxBoundaries=this.coreNode.rect,this.animate("start"),this.accountInfo.branded){var o=n.getNodeWithSirvClassName(this.instanceNode)||l.D.node.head||l.D.node.body;n.rootDOM.showSirvAd(o,this.instanceNode,"https://sirv.com/about-spin/?utm_source=client&utm_medium=sirvembed&utm_content=typeofembed(spin)&utm_campaign=branding","360-degree viewer by Sirv")}this.sendStats("viewerReady",+new Date-this.sessionStartTime,{rows:this.imagesMap.countOfRows,columns:this.imagesMap.countOfFrames,viewerSize:{width:this.currentSize.width,height:this.currentSize.height}}),this.isZoomSizeExist()&&this.coreNode.addClass(i.CSS_CURSOR_ZOOM_IN),this.setGlobalEvents(),this.turnOnOff(),e.prototype.done.call(this),this.hotspots&&(this.hotspots.instanceComponentNode=this.canvasContainer,this.hotspots.containerSize=this.canvasContainer.node.getBoundingClientRect())},a.setBrowserEvents=function(){this.setDrag(this.coreNode),this.setMouseWheel(this.coreNode)},a.setCanvas=function(){var t=this;if(!this.canvasPromise){var e,i,n=null;this.canvasPromise=s.makeQueryblePromise(new Promise((function(s,o){e=s,t.firstImageLoaded&&t.draw(),t.isInView&&t.isSlideShown?(n=setTimeout((function(){t.canvas&&t.canvas.removeEvent("transitionend",i),s()}),1100),i=function(e){"opacity"===e.propertyName&&(e.stop(),clearTimeout(n),t.canvas.removeEvent(e.type,i),s())},t.canvas.addEvent("transitionend",i),t.canvas.render(),t.canvas.addClass(P+"-shown")):(t.canvas.addClass(P+"-shown"),s())}))),this.canvasPromise.resolve=function(){t.canvas.removeEvent("transitionend",i),e()}}return this.canvasPromise},a.clearCanvas=function(){this.ctx&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},a.draw=function(t){if(this.ctx){var e=t||this.currentImageSize,i={width:e.width,height:e.height,maxSize:!0,dppx:this.dppx},n=this.imagesMap.getCurrentImage(i);if(this.lastImg=n,!n)return;this.ctx.imageSmoothingQuality="high",this.hotspots&&this.hotspots.changeHotspotsPosition(n.row,n.col),this.clearCanvas(),this.canvas.node.width=n.node.node.width,this.canvas.node.height=n.node.node.height,this.ctx.drawImage(n.node.node,0,0,this.canvas.node.width,this.canvas.node.height)}},a.setCanvasSize=function(){var t=this.currentSize;this.canvas.setCss({width:t.width,height:t.height}),this.canvasContainer.setCss({width:t.width,height:t.height}),this.canvas.width=t.width,this.canvas.height=t.height},a.calcMinSizeForDrag=function(){var t=this.currentSize;this.minSizeOfFrame=this.imagesMap.pixelPerFrame(t.width),this.minSizeOfRow=this.imagesMap.pixelPerRow(t.height)},a.smoothing=function(t,e,i){var n=this;if(e){var s=t/e,o=function(){s*=.97,n.smooseTimeout=setTimeout((function(){n.imagesMap.prepareFutureImage(i),n.imagesMap.setPreparedFutureImage(),n.draw(),s>.3&&o()}),n.minSizeOfFrame/s)};this.isSmoothing||(this.isSmoothing=!0,o())}},a.stopSmoothing=function(){this.isSmoothing&&(this.isSmoothing=!1,clearTimeout(this.smooseTimeout),this.smooseTimeout=null,this.imagesMap.resetPreparedImage())},a.animateWithDelay=function(t){var e=this,i="inactive";t&&(i=t),this.option("autospin.enable")?(clearTimeout(this.autospinResumeTimer),this.autospinResumeTimer=setTimeout((function(){e.animate(i)}),this.option("autospin.resume"))):this.animate(i)},a.setDrag=function(t){var e=this,n=this.imagesMap.countOfRows,o=this.imagesMap.countOfFrames,a=n>1&&o>1,r={x:{minSize:this.minSizeOfFrame,count:o},y:{minSize:this.minSizeOfRow,count:n}},h=this.option("freeDrag"),c={x:0,y:0},u={x:0,y:0},l=null;a||(l=o>1?"x":"y");var m,d,p,g=null,f={},v={x:{next:0,prev:0},y:{up:0,down:0}},w=!1,S=s.debounce((function(){w=!1}),50),I=65e-5,y={x:I*o*9.8,y:I*n*9.8},C={x:["prev","next"],y:["down","up"]};!a&&h&&(o>1?C.y=C.x:C.x=C.y);var b=function(t){clearTimeout(e.longTapTimer),f[t.state](t)},x=function(t,e,i,n){v[t][n]+=i},z=function(t){var e=v[t],i="x"===t?["next","prev"]:["up","down"];return e[i[0]]>e[i[1]]?{distance:e[i[0]],direction:i[0]}:{distance:e[i[1]],direction:i[1]}},E=function(t,e,i,n,s){var o;return o=e*Math.pow(i/n,2)/(2*t),o=Math.floor(o/s)},R=function(t,e,i,n){return e*(i/n)/t},O=function(t,e){return C[e][t>=0?0:1]};f.dragstart=function(t){e.firstUserInteraction=!0,e.isDragMove=!0,e.stopSmoothing(),e.stopAnimation(),e.hint&&e.hint.hide(),e.hotspots&&e.hotspots.hideNeededElements(!0),e.userColumn=e.imagesMap.startColumn,e.userRow=e.imagesMap.startRow,e.fullscreenState===i.FULLSCREEN.OPENED&&t.stop(),c.x=t.x,c.y=t.y,g=t.timeStamp,p=+new Date;var n=+new Date-e.sessionStartTime;e.sendStats("dragStart",n,{clientX:t.x-e.boxBoundaries.left,clientY:t.y-e.boxBoundaries.top,pageX:t.x,pageY:t.y}),e.sendEvent("spinStart"),e.sendEvent("rotate"),e.sendStats("rotate",n,{}),e.pinchCloud.removeEvent()},f.dragend=function(t){var i,n,s,f,I,C=[];if(e.isDragMove){t.stop(),e.isDragMove=!1,S.cancel(),w&&l===m||w&&(a||h)?(i=+new Date-p,n=z(m),s=E(y[m],o,n.distance,i,r[m].minSize),f=R(y[m],o,n.distance,i),C.push({items:s,direction:n.direction}),a&&(n=z(d),s=E(y[d],o,n.distance,i,r[d].minSize),(I=R(y[d],o,n.distance,i))>f&&(f=I),C.push({items:s,direction:n.direction})),e.animateTo(f,C),e.pinchCloud.addEvent()):(e.hotspots&&e.isInView&&e.isSlideShown&&e.hotspots.showNeededElements(),e.animateWithDelay()),e.sendEvent("spinEnd");var b=+new Date;e.sendStats("dragEnd",b-e.sessionStartTime,{duration:b-p,clientX:t.x-e.boxBoundaries.left,clientY:t.y-e.boxBoundaries.top,pageX:t.x,pageY:t.y}),c={x:0,y:0},g=null,u={x:0,y:0},v={x:{next:0,prev:0},y:{up:0,down:0}},w=!1}};var M=function(t,i){var n=!1;if(u[t]>r[t].minSize){n=!0;var s=Math.floor(u[t]/r[t].minSize);u[t]=u[t]%r[t].minSize,e.imagesMap.prepareFutureImage(i,s),e.imagesMap.setPreparedFutureImage()}return n};f.dragmove=function(t){var s={},r={x:0,y:0},p={x:0,y:0};e.isDragMove&&(w=!0,e.customActionWas=!0,r.x=t.x-c.x,r.y=t.y-c.y,p.x=Math.abs(r.x),p.y=Math.abs(r.y),t.timeStamp-g,g=t.timeStamp,m=p.x>=p.y?"x":"y",d="x"===m?"y":"x",(e.fullscreenState===i.FULLSCREEN.OPENED||a||h||"x"===m&&o>1||"y"===m&&n>1)&&t.stop(),s[m]=O(r[m],m),s[d]=O(r[d],d),x(m,0,p[m],s[m]),x(d,0,p[d],s[d]),a||h?(u.x+=p.x,u.y+=p.y):l&&(l===m&&"x"===l?u.x+=p.x:l===m&&"y"===l&&(u.y+=p.y)),M(m,s[m])&&h&&(u[d]=0),a&&M(d,s[d]),e.userColumn=e.imagesMap.currentColumn,e.userRow=e.imagesMap.currentRow,c.x=t.x,c.y=t.y,e.draw(),S())};var P={eventAdded:!1,addEvent:function(){P.eventAdded||(P.eventAdded=!0,t.addEvent(["mousedrag","touchdrag"],b))},removeEvent:function(){P.eventAdded&&(P.eventAdded=!1,t.removeEvent(["mousedrag","touchdrag"],b))}};this.touchDragCloud=P,this.slideDragEventStart||this.touchDragCloud.addEvent()},a.animateTo=function(t,e){var i=this,n=[],s=[],o={};clearTimeout(this.autospinResumeTimer),this.animationFX&&this.animationFX.stop();for(var a=0,r=e.length;a<r;a++)s.push(e[a].direction),n.push(0),o[e[a].direction]=[0,e[a].items];this.animationFX=new l.FX(l.$new("div"),{duration:Math.abs(t),transition:l.FX.getTransition().inCubic,onBeforeRender:m((function(t,e){var s,o;for(s=0;s<t.length;s++)o=Math.round(e[t[s]]),n[s]!==o&&(i.imagesMap.prepareFutureImage(t[s],o-n[s]),i.imagesMap.setPreparedFutureImage(),i.userColumn=i.imagesMap.currentColumn,i.userRow=i.imagesMap.currentRow,n[s]=o);i.draw()})).bind(this,s),onComplete:function(){i.stopAnimation(),i.animateWithDelay(),i.hotspots&&i.isInView&&i.isSlideShown&&i.hotspots.showNeededElements()}}).start(o)},a.setMouseWheel=function(t){var e,i,n=this,o=0,a=!1,r=s.debounce((function(t){a=!1,n.sendEvent("spinEnd"),t?o=0:n.animateWithDelay()}),200),h=this.imagesMap.countOfRows,c=this.imagesMap.countOfFrames,u=h>1&&c>1,m=this.option("freeDrag");if(this.option("wheel")){var d=!1;this.keyPressHandlerForShiftButton=function(t){16===t.oe.keyCode&&(d="keydown"===t.type)},l.W.addEvent(["keydown","keyup"],this.keyPressHandlerForShiftButton),t.addEvent("mousescroll",(function(t){n.firstUserInteraction=!0;var s=!!t.isMouse&&d,c=Math.abs(t.deltaY)<Math.abs(t.deltaX);(c||u||m)&&(n.customActionWas=!0,t.stop(),n.animationFX&&(n.animationFX.stop(),n.animationFX=null),n.stopSmoothing(),n.stopAnimation(),n.hotspots&&n.hotspots.hideActiveHotspotBox(),a||(a=!0,n.sendEvent("spinStart"),n.sendEvent("rotate"),n.sendStats("rotate",+new Date-n.sessionStartTime,{})),c?(e=t.deltaX,i=e>=0?"next":"prev"):(e=t.deltaY,i=h>1&&!s?e>=0?"down":"up":e>=0?"next":"prev"),t.isMouse?(e=e/Math.abs(e)*3,o+=Math.abs(e),n.animateTo(200,[{direction:i,items:o}])):(o+=e*=.14814814814814814,Math.abs(o)>1&&(e=parseInt(o,10),o-=e,n.imagesMap.prepareFutureImage(i,Math.abs(e)),n.imagesMap.setPreparedFutureImage(),n.draw())),r(t.isMouse))}))}},a.animate=function(t,e,i,n){var s=this,o="autoplay"===t||this.option("autospin.enable");if(this.isInView&&this.isSlideShown&&!this.animationCloud.isMoving()&&!this.isDragMove&&(!this.customActionWas||o||n)&&!this.openedImg)if(this.animationCloud.isPaused())this.animationCloud.resume();else{clearTimeout(this.animationCloud.hintTimer),clearTimeout(this.autospinResumeTimer);var a=!1,r=null;if(o){if(this.isAutoplayPaused)return;r="as-"+(i||this.option("autospin.type")),"start"!==t&&(a=!0)}else{var h;switch(t){case"start":h="onStart";break;case"inView":case"slideIn":h="onVisible";break;case"inactive":a=!0,h="onInactive";break;default:r=t}if(h&&this.option("hint."+h+".enable")){var c=this.option("hint."+h+".effect");c&&(r=c)}}this.animationCloud.start({speed:e||this.option("autospin.duration"),type:r,infinite:o,delay:a,isBackward:this.reflectDirection,userInteraction:n},(function(){var t=s.showHint();s.hotspots&&s.isInView&&s.isSlideShown&&s.hotspots.showNeededElements(),s.option("hint.onInactive.enable")&&(t?s.animationCloud.hintTimer=setTimeout((function(){s.animationCloud.hintTimer=null,s.animate("inactive")}),s.hint.movingTime):s.animate("inactive"))}))}},a.initAnimation=function(){var t,e,i=this,n=!1,s=!1,o=!1,a=null,r=null,h=0,c=null,u=this.imagesMap.countOfFrames;this.option("swapSides")&&(u=this.imagesMap.countOfRows);var l=function(){n=!1,h=0,c&&c()},m=function(){var n=i.imagesMap.getNextBufferIndex(h);n||e.infinite?(!n&&e.infinite&&(n=1,h=e.infinite?-1:0),h+=n,i.imagesMap.setNextAnimationFrame(h),a=setTimeout((function(){i.imagesMap.setPreparedNextImage(),i.draw(),m()}),n*t)):l()},d={hintTimer:null,isMoving:function(){return n},isPaused:function(){return s},start:function(s,a){if(!n){n=!0,o=!1;var h=function(){if(r=null,e.type){if(!i.imagesMap)return;if(i.imagesMap.createAnimation(e.type,e.isBackward),e.userInteraction&&i.imagesMap.imagesBuffer&&i.imagesMap.imagesBuffer.length){var n=i.imagesMap.imagesBuffer[i.imagesMap.imagesBuffer.length-1];i.userColumn=n.col,i.userRow=n.row}t=e.speed/u,e.infinite&&i.showHint(),m()}else l()};c=a,(e=Object.assign({speed:3600,type:"row",delay:!1,infinite:!1,isBackward:!1,userInteraction:!1},s)).speed=function(t,e){var i=t;if(!i)switch(e){case"intro":i=3600;break;case"twitch":i=2200;break;case"spin":i=3600;break;case"momentum":i=10;break;default:i=3600}return i}(e.speed,e.type),e.delay&&!e.infinite?r=setTimeout(h,i.option("inactivity")):h()}},resume:function(){s&&(n=!0,s=!1,m())},pause:function(){s||o||(n=!1,s=!0,clearTimeout(d.hintTimer),clearTimeout(r),clearTimeout(a))},stop:function(){d.pause(),o=!0,s=!1,h=0,c=null,i.imagesMap.clearFramesQueue(),i.imagesMap.resetPreparedImage()}};this.animationCloud=d},a.stopAnimation=function(){this.animationFX&&(this.animationFX.stop(),this.animationFX=null),clearTimeout(this.autospinResumeTimer),this.animationCloud&&this.animationCloud.stop()},a.onBeforeFullscreenIn=function(t){this.stopSmoothing(),this.stopAnimation(),this.zoom&&this.zoom.hide(!0),this.deactivateSpin(),this.boxBoundaries=this.coreNode.rect,e.prototype.onBeforeFullscreenIn.call(this,t),this.hotspots&&this.hotspots.hideAll(),this.isInited&&this.isInView&&this.isSlideShown&&(this.isHidden=!0,this.canvas.setCss({opacity:0,visibility:"hidden"}))},a.onAfterFullscreenIn=function(t){var e=this;if(this.infoSize){this.canvasPromise&&this.canvasPromise.isPending()&&this.canvasPromise.resolve();var n=this.coreNode.size;this.currentSize=s.spinLib.calcProportionSize(n,this.infoSize,!0,this.standardSize),this.getDPPX(this.currentSize),this.setImageSize(),this.setCanvasSize(),this.ready&&(this.imagesMap.isImagesExist({width:this.currentImageSize.width,height:this.currentImageSize.height})||this.imagesMap.loadImages({width:this.currentImageSize.width,height:this.currentImageSize.height,dppx:this.dppx})),this.firstImageLoaded&&this.draw(),this.isHidden&&(this.isHidden=!1,setTimeout((function(){e.canvas.setCss({opacity:"",visibility:""})}),0)),this.hotspots&&this.fullscreenState===i.FULLSCREEN.OPENED&&(this.hotspots.showAll(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements()),this.ready&&(this.animate("inactive"),l.browser.mobile||this.showHint(),this.fullscreenStartTime=+new Date,this.sendStats("fullscreenOpen",+new Date-this.sessionStartTime))}},a.onBeforeFullscreenOut=function(t){this.stopSmoothing(),this.stopAnimation(),this.zoom&&this.zoom.hide(!0),this.deactivateSpin(),this.hint&&this.always&&this.hint.hide(),e.prototype.onBeforeFullscreenOut.call(this,t),this.isInited&&this.isInView&&this.isSlideShown&&(this.isHidden=!0,this.canvas.setCss({opacity:0,visibility:"hidden"}))},a.onAfterFullscreenOut=function(t){var i=this;if(this.infoSize&&(this.canvasPromise&&this.canvasPromise.isPending()&&this.canvasPromise.resolve(),this.currentSize=s.spinLib.calcProportionSize(this.coreNode.size,this.infoSize),this.getDPPX(this.currentSize),this.standardSize.width=this.currentSize.width,this.standardSize.height=this.currentSize.height,this.currentImageSize.width=this.currentSize.width,this.currentImageSize.height=this.currentSize.height,this.setCanvasSize(),this.ready&&(this.imagesMap.isImagesExist({width:this.currentSize.width,height:this.currentSize.height})||this.imagesMap.loadImages({width:this.currentSize.width,height:this.currentSize.height,dppx:this.dppx})),this.firstImageLoaded&&this.draw(),this.isHidden&&(this.isHidden=!1,setTimeout((function(){i.destroyed||i.canvas.setCss({opacity:"",visibility:""})}),0)),e.prototype.onAfterFullscreenOut.call(this,t),this.ready)){this.animate("inactive"),l.browser.mobile||this.showHint();var n=+new Date;this.sendStats("fullscreenClose",n-this.sessionStartTime,{duration:n-this.fullscreenStartTime})}},a.play=function(t,e){var i=!1;return this.ready&&!this.isZoomed()&&(this.isAutoplayPaused=!1,this.stopSmoothing(),this.stopAnimation(),this.instanceOptions.checkValue("autospin.duration",t)||(t=null),this.instanceOptions.checkValue("autospin.type",e)||(e=null),this.animate("autoplay",t,e),i=!0),i},a.pause=function(){var t=!1;return this.ready&&!this.isZoomed()&&(this.isAutoplayPaused=!0,this.stopSmoothing(),this.stopAnimation(),this.animateWithDelay(),t=!0),t},a.rotate=function(t,e){var i=!1,n=function(t){return t?"string"===l.typeOf(t)&&(t=parseInt(t,10),isNaN(t)&&(t=0)):t=0,t};return this.ready&&(t=n(t),e=n(e),0===t&&0===e||(this.stopAnimation(),this.stopSmoothing(),this.isDragMove||(this.sendEvent("rotate"),this.sendStats("rotate",+new Date-this.sessionStartTime,{}),this.animate({cols:t,rows:e},l.U,l.U,!0),i=!0))),i},a.jumpTo=function(t,e){var i=!1,n=null;return this.ready&&("string"===l.typeOf(t)&&(t=t.trim(),n=/^-/.test(t)?"prev":"next"),t=parseInt(t,10),isNaN(t)||(i=this.imagesMap.jump(e,t,n))&&this.firstImageLoaded&&(this.sendEvent("rotate"),this.sendStats("rotate",+new Date-this.sessionStartTime,{}),this.draw())),i},a.zoomIn=function(){return!(!this.ready||!this.zoom||this.isDragMove||!this.isFullscreenActionEnded())&&this.openLens()},a.zoomOut=function(){return!(!this.ready||!this.zoom)&&this.zoom.hide()},a.getCurrentFrame=function(){if(this.ready){var t=this.imagesMap.getCurrentImage({width:this.currentSize.width,height:this.currentSize.height});return{row:t.row+1,column:t.col+1}}return!1},a.setCallback=function(t,e){return!!this.ready&&(this.option(t,e),!0)},a.setImageSize=function(){this.currentImageSize.width=this.currentSize.width,this.currentImageSize.height=this.currentSize.height},a.isZoomSizeExist=function(){var t=!1;if(this.option("zoom.enable")){var e=this.currentImageSize;this.zoomSize.originWidth-e.width>=100&&(t=!0)}return t},a.onResize=function(){if(this.fullscreenState===i.FULLSCREEN.OPENING||!this.isStarted)return!1;var t=this.fullscreenState===i.FULLSCREEN.OPENED;return this.stopSmoothing(),this.option("autospin.enable")?this.animationCloud.pause():this.stopAnimation(),this.boxBoundaries=this.coreNode.rect,this.currentSize=s.spinLib.calcProportionSize(m(this.coreNode.node.parentNode).size,this.infoSize,t,this.standardSize),this.getDPPX(this.currentSize),this.standardSize.width=this.currentSize.width,this.standardSize.height=this.currentSize.height,this.setImageSize(),this.setCanvasSize(),this.calcMinSizeForDrag(),this.isZoomSizeExist()?this.coreNode.addClass(i.CSS_CURSOR_ZOOM_IN):this.coreNode.removeClass(i.CSS_CURSOR_ZOOM_IN),this.zoom&&this.zoom.onResize(),this.imagesMap.isImagesExist({width:this.currentSize.width,height:this.currentSize.height})||this.imagesMap.loadImages({width:this.currentSize.width,height:this.currentSize.height,dppx:this.dppx}),this.firstImageLoaded&&this.draw(),this.ready&&this.hotspots&&(this.hotspots.containerSize=this.canvasContainer.node.getBoundingClientRect(),this.hotspots.updateAndShow()),this.resizeAnimationTimer(),!0},a.getContainerForBoundengClientRect=function(){return this.canvasContainer},a.destroy=function(){return this.instanceNode.removeEvent("touchmove",L),l.W.removeEvent("resize",this.windowResizeCallback),clearTimeout(this.resizeWindowTimer),this.isInited&&this.sendStats("sessionEnd",+new Date-this.sessionStartTime,{message:"Stopped"}),this.coreNode.removeEvent(["btnclick","tap"]),this.coreNode.del("instance"),this.resizeAnimationTimer.cancel(),this.resizeAnimationTimer=null,this.touchDragCloud&&(this.touchDragCloud.removeEvent(),this.touchDragCloud=null),this.placeholder&&this.placeholder.setCssProp("display",""),this.keyPressHandlerForShiftButton&&(l.W.removeEvent(["keydown","keyup"],this.keyPressHandlerForShiftButton),this.keyPressHandlerForShiftButton=null),this.cssId>-1&&(l.removeCSS(this.id+"-css",this.cssId),l.$(this.id+"-css").remove()),this.cssId=-1,this.initNameEvent&&this.coreNode.removeEvent(this.initNameEvent,this.initFnEvent),this.activatedCurtain&&this.activatedCurtain.destroy(),this.stopSmoothing(),this.stopAnimation(),this.hint&&(this.hint.destroy(),this.hint=null),this.coreNode.removeEvent(["mousedrag","touchdrag","pinch"]),this.loader&&(this.loader.destroy(),this.loader=null),this.imagesMap&&(this.imagesMap.destroy(),this.imagesMap=null,this.off("mapFirstImageLoaded"),this.off("mapImagesReady"),this.off("mapImageLoaded"),this.off("mapAllImagesLoaded")),this.clearCanvas(),this.canvas&&(this.canvas.removeEvent("transform"),this.canvas.removeClass(this.zoomClassName),this.canvas.remove()),this.canvasContainer.removeEvent("transform"),this.canvasContainer.removeEvent("mouseover"),this.canvasContainer.removeEvent("mouseout"),this.canvasContainer.remove(),this.canvasContainer=null,this.ctx=null,this.canvas=null,this.loadedImages=[],this.off("isSingleSlide"),this.off("zoomUp"),this.off("zoomDown"),this.off("frameChange"),this.coreNode.remove(),this.infoSize=null,this.startLoadingTime=null,this.isInited=!1,this.openedImg=null,this.coreNode=null,this.firstUserInteraction=!1,this.animationCloud&&(clearTimeout(this.animationCloud.hintTimer),this.animationCloud=null),this.lastImg=null,this.hotspotsData=null,e.prototype.destroy.call(this),!0},t.createClass(o,[{key:"rightAlt",get:function(){return!this.dataAlt&&this.meta&&this.meta.description?this.meta.description:this.dataAlt}},{key:"imageClassContainer",get:function(){return this.imagesMap}},{key:"zoomSize",get:function(){var t=this.option("zoom.ratio"),e=this.infoSize.width,i=this.infoSize.height,n={width:e,height:i};return"max"!==t&&(n.width=this.currentImageSize.width*t,n.height=this.currentImageSize.height*t,n=r.roundImageSize(n)),n.width=Math.min(e,n.width),n.height=Math.min(i,n.height),{width:n.width,height:n.height,originWidth:e,originHeight:i}}},{key:"originImageUrl",get:function(){return this.ready?this.imagesMap.originImageUrl:null}},{key:"orientation",get:function(){return this.imagesMap.getHintType()}}]),o}(a)}));
Sirv.define("Zoom",["bHelpers","magicJS","globalVariables","globalFunctions","helper","EventEmitter","Zoominstance","Hint","ResponsiveImage","RoundLoader","Hotspots"],(function(t,i,e,o,s,n,a,h,r,d,l){var c=i,m=c.$;o.rootDOM.addModuleCSSByName("Zoom",(function(){return".smv-zoom-view{display:inline-block;position:relative;top:0;left:0;width:100%;height:100%;outline:0!important;backface-visibility:hidden!important;-ms-user-select:none!important;user-select:none!important;-webkit-tap-highlight-color:transparent!important;-webkit-touch-callout:none!important;touch-action:pan-y}.smv-zoom-view::after{display:inline-block;height:100%;content:'';vertical-align:middle}.smv-zoom-view .zoom-loader{bottom:0;left:0;margin:5px}.smv-zoom-view>img.smv-zoomed-in{visibility:hidden!important}.smv-zoom-view .sirv-zoom{z-index:126}.smv .smv-slides-box .smv-zoom-view>img{display:inline-block!important;position:relative!important;width:auto;max-width:100%;height:auto;max-height:100%;margin:0;padding:0;vertical-align:middle}.zoom-controls{display:flex;position:absolute;right:16px;bottom:16px;flex-flow:row-reverse;height:28px;z-index:168}.zoom-controls>button{background-color:rgba(245,245,245,.9);color:#777}.zoom-controls>button::after,.zoom-controls>button::before{transition:opacity .2s linear;opacity:.65}.zoom-controls>button:hover::after,.zoom-controls>button:hover::before{opacity:1}.zoom-controls>button.disable::after,.zoom-controls>button.disable::before{opacity:.2}.zoom-controls>button+button{margin-right:4px}.zoom-controls .zoom-close,.zoom-controls .zoom-in,.zoom-controls .zoom-out{display:inline-block;position:relative;width:28px;height:28px;padding:0;border:1px solid #d7d7d7;border-radius:2px;outline:0;cursor:pointer}.zoom-controls .zoom-close::after,.zoom-controls .zoom-close::before,.zoom-controls .zoom-in::after,.zoom-controls .zoom-in::before,.zoom-controls .zoom-out::before{transform:translate3d(-50%,-50%,0);position:absolute;top:50%;left:50%;width:65%;border-top:2px solid currentcolor;font-size:0;line-height:100%;content:''}.zoom-controls .zoom-close::after,.zoom-controls .zoom-in::after{transform-origin:center;border-left:1px solid}.zoom-controls .zoom-in::after{transform:translate3d(-50%,-50%,0) rotateZ(-90deg)}.zoom-controls .zoom-close{display:none!important}.zoom-controls .zoom-close::before{transform:translate3d(-50%,-50%,0) rotateZ(-45deg)}.zoom-controls .zoom-close::after{transform:translate3d(-50%,-50%,0) rotateZ(-135deg)}"}));var u={mode:{type:"string",enum:["top","left","right","bottom","inner","magnifier","deep"],defaults:"inner"},margin:{type:"number",defaults:9},width:{oneOf:[{type:"number"},{type:"string",enum:["auto"]}],defaults:"auto"},height:{oneOf:[{type:"number"},{type:"string",enum:["auto"]}],defaults:"auto"},pan:{type:"boolean",defaults:!1},ratio:{oneOf:[{type:"number",minimum:0},{type:"string",enum:["max"]}],defaults:2.5},wheel:{type:"boolean",defaults:!0},tiles:{type:"boolean",defaults:!0},trigger:{oneOf:[{type:"string",enum:["hover","click","dblclick"]},{type:"boolean",enum:[!1]}],defaults:"click"},hint:{enable:{type:"boolean",defaults:!0},text:{hover:{type:"string",defaults:"Hover to zoom"},click:{type:"string",defaults:"Click to zoom"},dblclick:{type:"string",defaults:"Double click to zoom"}}},map:{enable:{type:"boolean",defaults:!1},size:{type:"number",minimum:0,maximum:50,defaults:25}}};c.browser.touchScreen&&(u=s.deepExtend(u,{hint:{text:{hover:{defaults:"Tap and hold to zoom"}}}}));var p,g,f,z,S={hint:{text:{hover:{type:"string",defaults:"Tap and hold to zoom"},click:{type:"string",defaults:"Tap to zoom"},dblclick:{type:"string",defaults:"Double tap to zoom"}}}},v={trigger:{oneOf:[{type:"string",enum:["hover","click","dblclick"]},{type:"boolean",enum:[!1]}],defaults:"hover"}},b={trigger:{oneOf:[{type:"string",enum:["hover","click","dblclick"]},{type:"boolean",enum:[!1]}],defaults:"dblclick"}},y={ratio:{oneOf:[{type:"number",minimum:0},{type:"string",enum:["max"]}],defaults:"max"}},w=function(i){"use strict";function e(t,e,o){var s;return(s=i.call(this)||this).parentNode=m(t),s.options=Object.assign({class:null,disabledClass:"disable"},e),s.events=o||{},s.disabled=!1,s.isDisabledClassAdded=!1,s.instanceNode=c.$new("button"),s.options.class&&s.instanceNode.addClass(s.options.class),Object.entries(s.events).forEach((function(t){var i;(i=s.instanceNode).addEvent.apply(i,t)})),s}t.inheritsLoose(e,i);var o=e.prototype;return o.append=function(){this.parentNode.append(this.instanceNode)},o.changeState=function(t){t?(this.disable(!0),this.isDisabledClassAdded||(this.isDisabledClassAdded=!0,this.instanceNode.addClass(this.options.disabledClass))):(this.isDisabledClassAdded&&(this.isDisabledClassAdded=!1,this.instanceNode.removeClass(this.options.disabledClass)),this.disable())},o.disable=function(t){t?this.disabled||(this.disabled=!0,this.instanceNode.attr("disabled","disabled")):this.disabled&&(this.disabled=!1,this.instanceNode.removeAttr("disabled"))},o.destroy=function(){var t=this;Object.entries(this.events).forEach((function(i){var e;(e=t.instanceNode).removeEvent.apply(e,i)})),this.events={},this.changeState(),this.instanceNode.remove(),this.instanceNode=null,i.prototype.destroy.call(this)},e}(n),N=function(i){"use strict";function e(e){var o;return(o=i.call(this)||this).parentNode=m(e),o.instanceNode=c.$new("div").addClass("zoom-controls"),o.zoomInButton=new w(o.instanceNode,{class:"zoom-in"},{btnclick:function(t){t.stop(),o.emit("zoomControlsAction",{data:{type:"zoomin"}})},tap:function(t){t.stop(),o.emit("zoomControlsAction",{data:{type:"zoomin"}})}}),o.zoomInButton.parentClass=t.assertThisInitialized(o),o.zoomOutButton=new w(o.instanceNode,{class:"zoom-out"},{btnclick:function(t){t.stop(),o.emit("zoomControlsAction",{data:{type:"zoomout"}})},tap:function(t){t.stop(),o.emit("zoomControlsAction",{data:{type:"zoomout"}})}}),o.zoomOutButton.parentClass=t.assertThisInitialized(o),o.zoomCloseButton=new w(o.instanceNode,{class:"zoom-close"},{btnclick:function(t){t.stop(),o.emit("zoomControlsAction",{data:{type:"zoomclose"}})},tap:function(t){t.stop(),o.emit("zoomControlsAction",{data:{type:"zoomclose"}})}}),o.zoomCloseButton.parentClass=t.assertThisInitialized(o),o.zoomInButton.append(),o.zoomOutButton.append(),o.zoomCloseButton.append(),o}t.inheritsLoose(e,i);var o=e.prototype;return o.show=function(){this.parentNode.append(this.instanceNode)},o.hide=function(){this.instanceNode.remove()},o.invisibleDisable=function(t){this.zoomInButton.disable(t),this.zoomOutButton.disable(t),this.zoomCloseButton.disable(t)},o.disable=function(t){t?"in"===t?(this.zoomInButton.changeState(!0),this.zoomOutButton.changeState(),this.zoomCloseButton.changeState()):(this.zoomOutButton.changeState(!0),this.zoomCloseButton.changeState(!0),this.zoomInButton.changeState()):(this.zoomInButton.changeState(),this.zoomOutButton.changeState(),this.zoomCloseButton.changeState())},o.destroy=function(){this.zoomInButton.destroy(),this.zoomOutButton.destroy(),this.zoomCloseButton.destroy(),this.hide(),i.prototype.destroy.call(this)},e}(n);return p="smv",g=function(t){t.stop()},f=function(t){for(var i=null;t.node!==c.D.node.body&&!i;)(t=m(t.node.parentNode)).hasClass(p+"-slides-box")&&(i=t);return i},z=function(t,i){return new Promise((function(e,o){var s=m(t).size;i||(i=100),i-=1,s.width||s.height?e(s):i>0?setTimeout((function(){z(t,i).then(e).catch(o)}),16):o(null)}))},function(i){"use strict";function n(n,a){var h;if((h=i.call(this,n,a,u)||this).type=e.SLIDE.TYPES.ZOOM,h.insideOptions={type:"outside",position:"right",hideZoomForClickTrigger:!0,zooming:!0,map:!1,mapSize:50,controls:!1,trigger:"click",outsideModeWasChanged:!1},h.imageUrl=h.instanceNode.attr("data-src"),h.src=o.normalizeURL(h.imageUrl.replace(e.REG_URL_QUERY_STRING,"$1")),h.queryParams=s.paramsFromQueryString(h.imageUrl.replace(e.REG_URL_QUERY_STRING,"$2")),h.queryParams){var r=parseInt(h.queryParams.quality,10);isNaN(r)?delete h.queryParams.quality:h.queryParams.quality=r}return h.isFullscreen=a.isFullscreen,h.nativeFullscreen=a.nativeFullscreen,h.queryParamsQuality=h.queryParams.quality||null,h.imageNode=null,h.loader=null,h.image=null,h.controls=null,h.differenceBetweenSizes=100,h.currentSize={width:0,height:0},h.currentImageSize={width:0,height:0},h.isInfoLoaded=!1,h.zoomIsOpened=!1,h.imageShowPromise=null,h.hint=null,h.longTapTimer=null,h.setImageCss=!1,h.lastTriggerAction=null,h.isNotMouse=!1,h.accountInfo={},h.postInitState=0,h.clonedImage=null,h.isHidden=!1,h.destroyed=!1,h.waitingCallbacks=[],h.lastImageSize={width:0,height:0},h.hotspotsTurnedOn=!0,h.scrollDebounce=s.debounce((function(){h.replaceZoom()}),16),h.zoomDebounce=s.debounce((function(){h.controls&&(h.controls.invisibleDisable(),h.changeControlsState(h.zoom.getZoomData()))}),42),h.onScrollHandler=h.onScroll.bind(t.assertThisInitialized(h)),h.instanceNode.addEvent("selectstart",(function(t){t.stop()})),h.createHotspotsClass(),h.createSirvImage(),h}t.inheritsLoose(n,i);var a=n.prototype;return a.makeOptions=function(){var t=new c.Options(this.defaultSchema);return t=this.makeGlobalOptions(t),["top","left","right","bottom","inner","magnifier"].includes(t.get("mode"))&&t.parseSchema(v,!0),c.browser.touchScreen&&c.browser.mobile&&(t.parseSchema(S,!0),t=this.makeMobileOptions(t),["inner","deep"].includes(t.get("mode"))&&t.parseSchema(b,!0)),"deep"===t.get("mode")&&t.parseSchema(y,!0),t},a.getInfo=function(){var t=this;return this.gettingInfoPromise||(this.gettingInfoPromise=new Promise((function(i,e){t.waitGettingInfo.wait((function(){t.image.loadInfo().then((function(e){t.destroyed||(t.isInfoLoaded=!0,t.accountInfo=t.image.accountInfo,t.dataAlt||(t.dataAlt=t.image.description),t.hotspotsData=e.hotspots,t.infoSize=t.image.originSize,t.hotspots&&(t.hotspots.originImageSize=t.infoSize),i())})).catch((function(i){t.destroyed||e(i)}))}))}))),this.gettingInfoPromise},a.showHint=function(){this.hint&&(this.always&&![e.FULLSCREEN.OPENING,e.FULLSCREEN.OPENED].includes(this.fullscreenState)||this.hint.show())},a.onStartActions=function(){this.ready?this.isInView&&this.isZoomSizeExist()&&this.showHint():this.isStarted&&this.isInView&&this.isSlideShown&&!this.preload&&this.postInit(),i.prototype.onStartActions.call(this)},a.onStopActions=function(){this.zoomOut(!0),this.hint&&this.hint.hide(),i.prototype.onStopActions.call(this)},a.onInView=function(t){t&&(this.ready?this.isSlideShown&&this.isZoomSizeExist()&&this.showHint():this.isStarted&&(this.isInView||!this.preload&&!this.isSlideShown||(this.isInView=!0,this.postInit())))},a.startFullInit=function(t){this.isStartedFullInit||(i.prototype.startFullInit.call(this,t),this.normalizeOptions(),this.getId("zoom-"),this.instanceNode.addClass(p+"-zoom-view"),this.instanceNode.addEvent("mousedown",g),this.createLoader())},a.imageSettings=function(t){t||(t={}),t.imageSettings||(t.imageSettings={}),t.imageSettings.scale||(t.imageSettings.scale={}),t.callbackData||(t.callbackData={}),t.imageSettings.scale.option="fill",null!==this.quality&&null===this.queryParamsQuality&&(t.src||(t.src={}),t.src.quality=this.quality);var i=this.hdQuality;return(null===this.queryParamsQuality||this.isHDQualitySet&&i<this.queryParamsQuality)&&(t.srcset={quality:i}),t},a.setHDQuality=function(t){return t.dppx>1&&t.dppx<1.5&&(null===this.queryParamsQuality&&null!==this.quality?t.srcset.quality=this.quality:t.srcset&&delete t.srcset.quality),t},a.isOutsideZoom=function(){return["top","left","right","bottom"].includes(this.option("mode"))},a.createHint=function(t){this.option("hint.enable")&&(this.hint=new h(this.instanceNode,{html:"<span>"+t+"<span>"}),this.hint.append())},a.clearZoom=function(){this.zoom&&(this.off("zooming"),this.off("zoomUp"),this.off("zoomDown"),this.imageNode&&this.imageNode.removeClass(this.zoomClassName)),i.prototype.clearZoom.call(this)},a.replaceZoom=function(){var t=!1,i=this.option("trigger"),o={clickBehavior:"both"};if(this.ready){"hover"===i&&"magnifier"!==this.option("mode")&&([e.FULLSCREEN.OPENING,e.FULLSCREEN.OPENED].includes(this.fullscreenState)?(t="click",o.trigger=t):t=i);var s,n=t&&this.insideOptions.trigger!==t;if(t&&this.insideOptions.trigger!==t&&(n=!0),"outside"===this.insideOptions.type){((s=this.canIUseOutsideZoom())&&this.insideOptions.outsideModeWasChanged||!s&&!this.insideOptions.outsideModeWasChanged)&&(this.insideOptions.outsideModeWasChanged=!this.insideOptions.outsideModeWasChanged,n=!0);var a=this.imageNode.size;!n&&s&&this.lastImageSize.width!==a.width&&(this.lastImageSize=a,n=!0)}n&&(this.clearZoom(),"outside"===this.insideOptions.type&&(s?o.type="outside":(o.type="inner",c.browser.mobile&&(o.pan=!0,"hover"===i&&(t="dblclick",o.trigger=t)))),t&&(this.insideOptions.trigger=t),this.setTriggerAction(t),this.createZoom(o),this.setZoomEvents())}},a.canIUseOutsideZoom=function(){var t=!1;if("outside"===this.insideOptions.type){if([e.FULLSCREEN.OPENING,e.FULLSCREEN.OPENED].includes(this.fullscreenState))return t;var i,o=this.option("margin"),s=this.imageNode.size,n=c.W.scroll,a=this.imageNode.position,h=this.option("width"),r=this.option("height"),d={width:s.width,height:s.height};switch("auto"!==h&&(/%$/.test(h)?s.width=s.width/100*parseInt(h,10):s.width=parseInt(h,10)),"auto"!==r&&(/%$/.test(r)?s.height=s.height/100*parseInt(r,10):s.height=parseInt(r,10)),this.insideOptions.position){case"top":(i=a.top-n.y-o)>s.height&&(t=!0);break;case"left":(i=a.left-n.x-o)>=s.width&&(t=!0);break;case"right":i=a.left-n.x,i+=d.width+o,c.W.node.innerWidth-i>=s.width&&(t=!0);break;case"bottom":i=a.top-n.y,i+=d.height+o,c.W.node.innerHeight-i>=s.height&&(t=!0)}}return t},a.createHotspotsClass=function(){"magnifier"!==this.option("mode")&&(c.browser.mobile||"hover"!==this.option("trigger")||(this.hotspotsTurnedOn=!1),i.prototype.createHotspotsClass.call(this,l))},a.run=function(t,e,o){var s=this,n=i.prototype.run.call(this,t,e,o);return n&&(this.getInfo().finally((function(){s.calcContainerSize(),s.isInView&&(s.preload||s.isSlideShown)&&s.postInit()})),this.startGettingInfo()),n},a.done=function(){if(!this.ready&&!this.destroyed){i.prototype.done.call(this),this.hotspots&&(this.hotspots.instanceComponentNode=this.imageNode,this.hotspots.containerSize=this.imageNode.node.getBoundingClientRect()),this.createZoom(),this.replaceZoom(),this.createControls();var t=this.isZoomSizeExist();if(this.controls&&(this.controls.disable("out"),t&&this.controls.show()),this.imageNode&&t&&this.imageNode.addClass(e.CSS_CURSOR_ZOOM_IN),this.setZoomEvents(),this.isSlideShown&&this.isInView&&t&&this.showHint(),this.accountInfo.branded){var s=o.getNodeWithSirvClassName(this.instanceNode)||c.D.node.head||c.D.node.body;o.rootDOM.showSirvAd(s,this.instanceNode,"https://sirv.com/about-zoom/?utm_source=client&utm_medium=sirvembed&utm_content=typeofembed(zoom)&utm_campaign=branding","Deep zoom image viewer by Sirv")}}},a.normalizeOptions=function(){switch("deep"!==this.option("mode")&&this.option("map.enable",!1),("deep"===this.option("mode")||c.browser.mobile)&&this.option("pan",!0),"magnifier"!==this.option("mode")||c.browser.mobile||this.option("pan",!1),this.isOutsideZoom()||"auto"===this.option("width")&&"auto"===this.option("height")&&this.option("width","70%"),this.option("trigger")){case"hover":"deep"===this.option("mode")&&this.option("trigger","click");break;case"click":case"dblclick":break;default:this.option("trigger",!1)}switch(this.option("mode")){case"top":case"left":case"right":case"bottom":this.insideOptions.type="outside",this.insideOptions.position=this.option("mode");break;case"magnifier":this.insideOptions.type="circle";break;case"inner":this.insideOptions.type="inner";break;case"deep":this.insideOptions.type="deep",this.insideOptions.controls=!0}"deep"===this.insideOptions.type&&this.option("map.enable")&&(this.insideOptions.map=0!==this.option("map.size"),this.insideOptions.map&&(this.insideOptions.mapSize=2*this.option("map.size"))),this.insideOptions.trigger=this.option("trigger"),c.browser.mobile&&(this.insideOptions.hideZoomForClickTrigger=!1),"max"!==this.option("ratio")&&this.option("ratio")<e.MIN_RATIO&&this.option("ratio",0),this.setDefaultZoomOptions()},a.setDefaultZoomOptions=function(){var t="deep"===this.insideOptions.type;i.prototype.setDefaultZoomOptions.call(this),this.defaultZoomOptions=Object.assign(this.defaultZoomOptions,{trigger:this.option("trigger"),tiles:this.option("tiles"),width:this.option("width"),height:this.option("height"),map:this.insideOptions.map,clickBehavior:t?"up":"both",outsidePosition:this.insideOptions.position,margin:this.option("margin"),type:t?"inner":this.insideOptions.type,pan:this.option("pan"),customZooming:this.option("wheel"),mapSize:this.insideOptions.mapSize})},a.onZoomGetImage=function(t){i.prototype.onZoomGetImage.call(this,t),t.data=this.imageSettings(t.data),t.data=this.setHDQuality(t.data);var e=this.image.getImage(t.data);this.checkImage(t.data,t.data.dontLoad)&&this.zoom.addLoadedImage(e)},a.onZoomCancelLoadingOfTiles=function(t){i.prototype.onZoomCancelLoadingOfTiles.call(this,t),t.data=this.imageSettings(t.data),this.image.cancelLoadingImage(t.data)},a.onZoomBeforeShow=function(t){"magnifier"!==this.option("mode")&&("outside"!==this.insideOptions.type||this.insideOptions.outsideModeWasChanged?this.imageNode.addClass(this.zoomClassName):this.imageNode.addClass("sirv-filter-bw"),this.hotspots&&this.hotspots.disableAll())},a.onZoomShown=function(t){this.isSlideShown&&this.sendEvent("zoomIn",{trigger:this.option("trigger"),isOutsideZoom:this.isOutsideZoom()})},a.onZoomHidden=function(t){this.imageNode.removeClass(this.zoomClassName),this.imageNode.removeClass("sirv-filter-bw"),this.sendEvent("zoomOut"),this.isNotMouse=!1,this.zoomIsOpened=!1,this.pinchCloud&&this.pinchCloud.addEvent(),this.hotspots&&(this.hotspotsTurnedOn&&[e.FULLSCREEN.CLOSED,e.FULLSCREEN.OPENING].includes(this.fullscreenState)||"hover"!==this.insideOptions.trigger&&[e.FULLSCREEN.OPENED,e.FULLSCREEN.CLOSING].includes(this.fullscreenState))&&(this.hotspots.enableAll(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements())},a.setZoomEvents=function(){var t=this;i.prototype.setZoomEvents.call(this),this.on("zooming",(function(i){var e=i.data.zoom;i.stopAll(),t.controls&&(t.controls.invisibleDisable(!0),t.changeControlsState(e),t.zoomDebounce())})),this.on("zoomUp",(function(i){i.stop(),t.makeZoom("zoomin",i.data.x,i.data.y)})),this.on("zoomDown",(function(i){i.stop(),t.makeZoom("zoomout",i.data.x,i.data.y)}))},a.onBeforeFullscreenIn=function(t){this.zoomIsOpened&&(this.zoom.hide(!0),this.controls&&this.controls.disable("out")),this.ready&&this.isSlideShown&&this.isInView&&this.imageNode&&(this.isHidden=!0,this.imageNode.setCss({opacity:0,visibility:"hidden"})),i.prototype.onBeforeFullscreenIn.call(this,t),this.hotspots&&this.hotspots.disableAll()},a.onAfterFullscreenIn=function(t){var i=this;this.calcContainerSize(),this.replaceZoom(),this.isHidden&&(this.isHidden=!1,setTimeout((function(){i.setImageWidthHeight(),i.imageNode.setCss({opacity:"",visibility:""})}),0)),this.hotspots&&setTimeout((function(){i.hotspotsTurnedOn&&i.fullscreenState===e.FULLSCREEN.OPENED&&(i.hotspots.enableAll(),i.isInView&&i.isSlideShown&&i.hotspots.showNeededElements())}),100)},a.onBeforeFullscreenOut=function(t){this.zoomIsOpened&&(this.zoom.hide(!0),this.controls&&this.controls.disable("out")),i.prototype.onBeforeFullscreenOut.call(this,t),this.hotspots&&(this.hotspotsTurnedOn||this.hotspots.disableAll()),this.replaceZoom(),this.ready&&this.isSlideShown&&this.isInView&&this.imageNode&&(this.isHidden=!0,this.imageNode.setCss({opacity:0,visibility:"hidden"}))},a.onAfterFullscreenOut=function(t){var e=this;this.isHidden&&(this.isHidden=!1,setTimeout((function(){e.destroyed||(e.setImageWidthHeight(),e.imageNode.setCss({opacity:"",visibility:""}))}),0)),i.prototype.onAfterFullscreenOut.call(this,t)},a.onSecondSelectorClick=function(){this.zoomOut(!0)},a.onMouseAction=function(t){"mouseout"===t&&(["deep","magnifier"].includes(this.option("mode"))||!("outside"===this.insideOptions.type&&this.insideOptions.outsideModeWasChanged||"inner"===this.insideOptions.type)||"hover"!==this.insideOptions.trigger&&!this.insideOptions.hideZoomForClickTrigger||this.isNotMouse||this.zoomOut(!0))},a.makeZoom=function(t,i,e){var o=!1;if(this.ready&&this.zoom)switch(t){case"zoomin":this.zoomIsOpened?(1===this.zoom.nextMinZoom&&this.controls.disable("in"),o=this.zoom.zoomUp(i,e)):o=this.openZoom(i,e,"deep"===this.insideOptions.type&&"first");break;case"zoomout":this.zoomIsOpened&&(0===this.zoom.getZoomData()||0===this.zoom.nextMinZoom?(o=this.zoom.hide(),this.controls&&this.controls.disable("out")):o=this.zoom.zoomDown(i,e));break;default:this.zoomIsOpened&&(o=this.zoom.hide(),this.controls&&this.controls.disable("out"))}return o},a.calcContainerSize=function(){var t=this.instanceNode.size;if(t.height&&t.width)this.currentSize=t;else{var i=this.image.originSize;t.height?(this.currentSize.height=t.height,this.currentSize.width=i.width/i.height*t.height):(this.currentSize.width=t.width,this.currentSize.height=i.height/i.width*t.width)}},a.getImageSize=function(){var t,i,e=this.currentSize,o=this.image.originSize;return e.width>=e.height?(i=Math.min(e.height,o.height),(t=o.width/o.height*i)>e.width&&(t=Math.min(e.width,o.width),i=o.height/o.width*t)):(t=Math.min(e.width,o.width),(i=o.height/o.width*t)>e.height&&(i=Math.min(e.height,o.height),t=o.width/o.height*i)),Object.assign({realWidth:t,realHeight:i},this.image.getClearSizeWithoutProcessingSettings({width:t,height:i}))},a.setTriggerAction=function(t){var i=this,o=this.option("trigger");if(this.isNotMouse=!1,!("max"!==this.option("ratio")&&this.option("ratio")<e.MIN_RATIO)&&o){var s,n,a=!1;switch(this.lastTriggerAction&&(this.lastTriggerAction(),this.lastTriggerAction=null,this.hint&&(this.hint.destroy(),this.hint=null,a=!0)),t&&(o=t),o){case"click":s=["btnclick","tap"],n=this.option("hint.text.click");break;case"dblclick":s=["dblbtnclick","dbltap"],n=this.option("hint.text.dblclick");break;case"hover":s="mouseover",n=this.option("hint.text.hover"),c.browser.mobile&&this.outsideModeWasChanged&&(n=this.option("hint.text.dblclick"),o=s="dbltap")}this.createHint(n),a&&this.isSlideShown&&this.isInView&&this.isZoomSizeExist()&&this.showHint();var h=[];if("hover"===o)c.browser.touchScreen&&h.push(this.setLongTapEvents()),c.browser.mobile||h.push(this.setHoverEvents());else{var r=function(t){if((i.fullscreenState===e.FULLSCREEN.OPENED||!i.always)&&(t.stop(),i.isFullscreenActionEnded())){var o=t.pageXY;i.openZoom(o.x,o.y,!1)}};if(c.browser.touchScreen){var d=function(t){i.isNotMouse=t.isTouchEvent()};this.imageNode.addEvent("pointerup",d),h.push(m((function(t){i.isNotMouse=!1,i.imageNode.removeEvent("pointerup",t)})).bind(this,d))}this.imageNode.addEvent(s,r),h.push(m((function(t,e){i.imageNode.removeEvent(t,e)})).bind(this,s,r))}this.lastTriggerAction=m((function(t){m(t).forEach((function(t){t()}))})).bind(this,h)}},a.setImageSrc=function(t,i,e){this.imageNode&&(this.imageNode.attr("src",t),i?this.imageNode.attr("srcset",i+" "+e+"x"):this.imageNode.removeAttr("srcset"),this.clonedImage=m(this.imageNode.node.cloneNode(!0)),this.clonedImage.node.className="")},a.setImageWidthHeight=function(){this.destroyed||(this.currentImageSize.realWidth/this.currentImageSize.realHeight>=this.currentSize.width/this.currentSize.height?this.imageNode.setCss({width:"100%",height:""}):this.imageNode.setCss({width:"",height:"100%"}))},a.createImage=function(t,i,e,o){var s=this;if(!this.imageNode){this.imageNode=t?m(t):c.$new("img"),this.imageNode.attr("referrerpolicy",this.referrerPolicy);var n=this.image.originSize;this.imageNode.setCss({maxWidth:n.width,maxHeight:n.height}),this.setImageWidthHeight(),this.setTriggerAction(),this.option("wheel")&&"deep"===this.option("mode")&&this.imageNode.addEvent("mousescroll",(function(t){!s.zoomIsOpened&&t.delta>0&&(t.stop(),s.openZoom(t.x,t.y,"first"))})),c.W.addEvent("scroll",this.onScrollHandler),this.dataAlt&&this.imageNode.attr("alt",this.dataAlt),this.setImageSrc(i,e,o)}},a.setLongTapEvents=function(){var t=this,i=!1,o=!1,s=function(e){clearTimeout(t.longTapTimer),t.zoomIsOpened||e.isTouchEvent()&&!e.isPrimaryTouch()||t.isFullscreenActionEnded()&&(t.longTapTimer=setTimeout((function(){if(!e.isTouchEvent()||e.isPrimaryTouch()){e.stop(),i=!0;var o=e.pageXY;t.openZoom(o.x,o.y,!1,!0)}}),201),o=!0)},n=function(e){if(!e.isTouchEvent()||e.isPrimaryTouch(e))if(i){e.stop();var o=e.pageXY;t.zoom.customMove(o.x,o.y)}else clearTimeout(t.longTapTimer)},a=function(e){e.isTouchEvent()&&!e.isPrimaryTouch(e)||(o&&(o=!1,clearTimeout(t.longTapTimer)),i&&(e.stop(),i=!1,t.zoom.hide(!0)))};return this.fullscreenState!==e.FULLSCREEN.OPENED&&this.always||(this.instanceNode.addEvent(["touchstart","pointerdown"],s),this.instanceNode.addEvent(["touchmove","pointermove"],n),this.instanceNode.addEvent(["touchend","pointerup"],a)),function(){t.instanceNode.removeEvent(["touchstart","pointerdown"],s),t.instanceNode.removeEvent(["touchmove","pointermove"],n),t.instanceNode.removeEvent(["touchend","pointerup"],a)}},a.setHoverEvents=function(){var t,i,o,s=this,n=!1,a=function(){return c.browser.touchScreen&&!c.browser.mobile},h=function(h){var r=h.pageXY;t=r.x,i=r.y,a()&&h.isTouchEvent()||n||!s.isSlideShown||s.fullscreenState!==e.FULLSCREEN.OPENED&&s.always||(n=!0,o=setTimeout((function(){s.openZoom(t,i,!1)}),84))},r=function(h){var r=m(h.related);if((!a()||!h.isTouchEvent())&&n&&(s.fullscreenState===e.FULLSCREEN.OPENED||!s.always)&&(n=!1,s.isFullscreenActionEnded())){for(;r&&r!==s.imageNode.node&&r!==c.D.node.body;)r=m(r.parentNode);r!==s.imageNode.node&&(t=null,i=null,clearTimeout(o))}},d=function(){},l="mousemove",u="mouseout";return a()&&["edge","ie"].includes(c.browser.uaName)&&(d=this.on("zoomHidden",(function(t){t.stop(),n=!1})),l="pointermove",u="pointerup"),this.imageNode.addEvent(l,h),this.imageNode.addEvent(u,r),function(){d(),s.imageNode.removeEvent(l,h),s.imageNode.removeEvent(u,r)}},a.getZoomImageSize=function(){var t=this.image.originSize,i=t.width,e=t.height,o=this.option("ratio"),s={width:i,height:e};return"max"!==o&&(s.width=this.currentImageSize.realWidth*o,s.height=this.currentImageSize.realHeight*o,s=r.roundImageSize(s)),s.width=Math.min(i,s.width),s.height=Math.min(e,s.height),{width:s.width,height:s.height,originWidth:i,originHeight:e}},a.openZoom=function(t,i,e,o){"deep"===this.insideOptions.type&&"zero"!==e&&(e="first");var s=!1;if(!this.zoom||!this.isZoomSizeExist())return s;this.zoomIsOpened=!0,this.hint&&this.hint.hide(),this.hotspots&&this.hotspots.hideActiveHotspotBox(!0);var n=this.clonedImage,a=this.getZoomImageSize();return s=void 0===t?this.zoom.showCenter(n,a,e):this.zoom.show(n,a,t,i,o,e)},a.createPinchEvent=function(){var t,o,s,n,a,h,r,d,l,m=this,u=function(){a=1,h=1,o=m.zoom.baseScale.x,r=1,d=o,s=1-o};i.prototype.createPinchEvent.call(this,this.instanceNode),this.pinchCloud.onPinchStart=function(t){[e.FULLSCREEN.OPENING,e.FULLSCREEN.CLOSING].includes(m.fullscreenState)||"outside"===m.insideOptions.type&&!m.insideOptions.outsideModeWasChanged||(m.pinchCloud.pinch=!0,clearTimeout(m.longTapTimer),l=!1,m.pinchCloud.scale=t.scale,n=1,m.hotspots&&m.hotspots.hideActiveHotspotBox(!0),m.zoomIsOpened&&(n=m.zoom.scale.x,o===c.U&&u(),n/=o),m.sendEvent("pinchStart"))},this.pinchCloud.onPinchResize=function(t){m.pinchCloud.pinch&&!m.pinchCloud.block&&m.zoom&&m.fullscreenState===e.FULLSCREEN.OPENED&&m.zoomIsOpened&&(m.pinchCloud.scale=t.scale,m.zoom.basePercent=t.centerPoint)},this.pinchCloud.onPinchMove=function(i){m.pinchCloud.pinch&&!m.pinchCloud.block&&(m.fullscreenState!==e.FULLSCREEN.OPENED&&m.isFullscreenEnabled?i.scale>=2&&(m.pinchCloud.block=!0,m.sendEvent("fullscreenIn")):m.zoomIsOpened?m.zoom&&(l?(t=i.scale,r<(t*=o)&&(d=o,h=1,a=s/((r=t)-o)),d>t&&(r=1,a=1,h=o/(d=t)),t=(o+((t*=n)-o)*a)*h,m.zoom.setScale(t,i.centerPoint.x,i.centerPoint.y)):(l=!0,m.zoom.basePercent=i.centerPoint),m.pinchCloud.scale=i.scale):i.scale>1.1?"magnifier"!==m.option("mode")&&m.option("wheel")&&(m.openZoom(i.centerPoint.x,i.centerPoint.y,"zero"),u(),n=1):i.scale<.2&&m.isFullscreenEnabled&&(m.pinchCloud.block=!0,m.sendEvent("fullscreenOut")))},this.pinchCloud.onPinchEnd=function(t){m.pinchCloud.pinch&&(m.pinchCloud.pinch=!1,m.sendEvent("pinchEnd")),m.zoomIsOpened&&m.pinchCloud.removeEvent(),m.pinchCloud.block=!1}},a.loadContent=function(){this.postInit()},a.postInit=function(){var t=this;this.postInitState||(this.postInitState=1,this.waitToStart.start(),z(this.instanceNode.node).then((function(i){t.currentSize=i})).catch((function(i){t.destroyed||t.calcContainerSize()})).finally((function(){t.destroyed||(t.postInitState=2,t.getImage())})))},a.getImage=function(){var t,i,o,n,a=this,h=this.getImageSize(),d=(t=r.roundImageSize({width:this.currentImageSize.width}).width,i=r.roundImageSize({width:h.width}).width,Math.abs(t-i));if(this.setImageCss=!1,!this.ready||d>=this.differenceBetweenSizes||this.fullscreenState===e.FULLSCREEN.OPENED){if(!this.ready&&!h.width&&!h.height)return void setTimeout((function(){a.calcContainerSize(),a.getImage()}),16);(d>=this.differenceBetweenSizes||this.fullscreenState===e.FULLSCREEN.OPENED||!this.currentImageSize.width)&&(this.currentImageSize=h);var l=this.imageSettings({width:this.currentImageSize.realWidth,height:this.currentImageSize.realHeight,round:!0,dontLoad:!0});if(c.DPPX>1&&(o=this.image.originSize,n=l.height>l.width?s.getDPPX(l.round?r.roundImageSize({height:l.height}).height:l.height,o.height,this.upscale):s.getDPPX(l.round?r.roundImageSize({width:l.width}).width:l.width,o.width,this.upscale),l.dppx=n),l=this.setHDQuality(l),this.checkImage(l,!0)&&this.ready){var m=this.image.getImage(l);this.setImageSrc(m.src,m.srcset,n)}else this.image.getImage(l)}else d<this.differenceBetweenSizes&&(this.setImageCss=!0)},a.imageRequest=function(){this.image.getImage(this.imageSettings({width:this.currentImageSize.width,height:this.currentImageSize.height}))},a.showImage=function(){var t=this;return this.imageShowPromise||(this.imageShowPromise=new Promise((function(i,e){var o=null,n=null;t.isInView&&t.isSlideShown?(t.imageNode.setCss({opacity:0,transition:"opacity .3s linear"}),t.instanceNode.append(t.imageNode),s.loadImage(t.imageNode.node).then((function(t){o=t})).catch((function(t){n=t})).finally((function(){t.destroyed||(t.imageNode.addEvent("transitionend",(function(s){s.stop(),t.imageNode.removeEvent("transitionend"),t.imageNode.setCss({opacity:"",transition:""}),o?(t.sendContentLoadedEvent(),i(o)):e(n)})),t.imageNode.render(),t.imageNode.setCssProp("opacity",1))}))):(t.instanceNode.append(t.imageNode),s.loadImage(t.imageNode.node).then((function(t){o=t})).catch((function(t){n=t})).finally((function(){o?(t.sendContentLoadedEvent(),i(o)):e(n)})))}))),this.imageShowPromise},a.createLoader=function(){this.loader=new d(this.instanceNode,{class:"zoom-loader"})},a.createSirvImage=function(){var t=this;this.imageUrl&&(this.on("imageOnload",(function(i){i.stopAll(),i.data.callbackData.lens?(t.zoom.shown||t.zoom.showing)&&t.zoomIsOpened&&t.zoom.addLoadedImage(i.data):t.ready?t.imageShowPromise&&t.setImageSrc(i.data.src,i.data.srcset,i.data.dppx):(t.createImage(i.data.node,i.data.src,i.data.srcset,i.data.dppx),t.showImage().finally((function(){t.loader&&t.loader.hide(),t.done(),t.sendContentLoadedEvent()})))})),this.on("imageOnerror",(function(i){i.stopAll(),t.loader&&t.loader.hide(),console.log("image error")})),this.image=new r(this.imageUrl,{imageSettings:this.queryParams,referrerPolicy:this.referrerPolicy}),this.image.parentClass=this,this.getInfo())},a.getInfoSize=function(){var t=this;return new Promise((function(i,e){t.getInfo().then((function(){i({size:t.infoSize})})).catch((function(t){e({error:t,isPlaceholder:t._isplaceholder})}))}))},a.getSelectorImgUrl=function(t){var i=this;return new Promise((function(e,o){var s=i.imageSettings();s.src&&(t.src=s.src),t.srcset=s.srcset,i.isInfoLoaded?i.waitToStart.wait((function(){e(Object.assign(i.image.getThumbnail(t),{alt:i.dataAlt}))})):i.getInfo().then((function(){i.waitToStart.wait((function(){e(Object.assign(i.image.getThumbnail(t),{alt:i.dataAlt}))}))})).catch(o)}))},a.getThumbnailData=function(t){return this.image.getThumbnail(t)},a.createControls=function(){var t=this;this.insideOptions.controls&&(this.controls=new N(this.instanceNode),this.controls.parentClass=this,this.on("zoomControlsAction",(function(i){i.stopAll(),t.zoom&&t.makeZoom(i.data.type)})))},a.changeControlsState=function(t){this.controls&&(1===t||0===t?1===t?this.controls.disable("in"):this.controls.disable("out"):this.controls.disable())},a.createZoom=function(t){var o=null;if(!this.destroyed){var s=this.zoomContainer;o=i.prototype.createZoom.call(this,this.instanceNode,t),"magnifier"===this.option("mode")?s=f(this.instanceNode):[e.FULLSCREEN.OPENING,e.FULLSCREEN.OPENED].includes(this.fullscreenState)||"outside"===o.type&&(s=f(this.instanceNode),s=c.D.node.body),s&&(this.zoom.lensContainer=s)}return o},a.zoomIn=function(){var t=!1;return this.ready&&this.zoom&&(this.option("fullscreenOnly")&&this.fullscreenState===e.FULLSCREEN.CLOSED?this.sendEvent("fullscreenIn"):t=this.makeZoom("zoomin")),t},a.zoomOut=function(t){var i=!1;return this.ready&&this.zoom&&(t?this.zoomIsOpened&&(i=this.zoom.hide(!this.zoom.getZoomData())):i=this.makeZoom("zoomout")),i},a.isZoomSizeExist=function(){var t=!1;if(this.ready){var i=this.currentImageSize;this.getZoomImageSize().originWidth-i.realWidth>=100&&("max"===this.option("ratio")||this.option("ratio")>=e.MIN_RATIO)&&(t=!0)}return t},a.onResize=function(){var t=!1;if(!this.destroyed)return this.isStarted&&2===this.postInitState&&(this.calcContainerSize(),this.getImage(),this.hotspots&&(this.hotspotsTurnedOn&&[e.FULLSCREEN.CLOSED,e.FULLSCREEN.OPENING].includes(this.fullscreenState)||"hover"!==this.insideOptions.trigger&&[e.FULLSCREEN.OPENED,e.FULLSCREEN.CLOSING].includes(this.fullscreenState))&&(this.hotspots.containerSize=this.imageNode.node.getBoundingClientRect(),this.isInView&&this.isSlideShown&&this.hotspots.showNeededElements()),this.imageNode&&(this.setImageWidthHeight(),this.isZoomSizeExist()?this.imageNode.addClass(e.CSS_CURSOR_ZOOM_IN):(this.hint&&this.hint.hide(),this.imageNode.removeClass(e.CSS_CURSOR_ZOOM_IN))),t=!0),this.controls&&(this.isZoomSizeExist()?this.controls.show():this.controls.hide()),this.replaceZoom(),this.zoom&&this.zoom.onResize(),t},a.onScroll=function(t){this.zoomIsOpened&&t.stop(),clearTimeout(this.longTapTimer),this.scrollDebounce()},a.destroy=function(){return this.destroyed=!0,this.loader&&(this.loader.destroy(),this.loader=null),m(c.W).removeEvent("scroll",this.onScrollHandler),this.onScrollHandler=null,this.lastTriggerAction&&(this.lastTriggerAction(),this.lastTriggerAction=null),this.hint&&(this.hint.destroy(),this.hint=null),this.image&&(this.off("imageOnload"),this.off("imageOnerror"),this.image.destroy(),this.image=null),this.controls&&(this.controls.destroy(),this.controls=null,this.off("zoomControlsAction")),this.hotspots&&(this.hotspotsTurnedOn=!1,this.instanceNode.removeEvent("tap")),this.zoom&&(this.off("zooming"),this.off("zoomUp"),this.off("zoomDown")),this.instanceNode.clearEvents(),this.instanceNode.removeClass(p+"-zoom-view"),this.imageNode&&(this.imageNode.remove(),this.imageNode=null),this.clonedImage&&(this.clonedImage=null),this.zoomDebounce.cancel(),this.zoomDebounce=null,this.scrollDebounce.cancel(),this.scrollDebounce=null,clearTimeout(this.longTapTimer),this.longTapTimer=null,this.hotspotsData=null,i.prototype.destroy.call(this),!0},t.createClass(n,[{key:"imageClassContainer",get:function(){return this.image}},{key:"originImageUrl",get:function(){return this.ready?this.image.originUrl:null}}]),n}(a)}));
Sirv.define("Video",["bHelpers","magicJS","globalVariables","globalFunctions","helper","EventEmitter","Instance","defaultsVideoOptions"],(function(e,i,t,s,o,n,a,r){var l,h,d,c,v,u,p,m,y,f,g,S,b,j,E,w=i;w.$;return s.rootDOM.addModuleCSSByName("Video",(function(){return".smv-sirv-video .js-focus-visible .vjs-menu li.vjs-menu-item:hover,.smv-sirv-video .js-focus-visible .vjs-menu li.vjs-selected:hover,.smv-sirv-video .vjs-menu li.vjs-menu-item:focus,.smv-sirv-video .vjs-menu li.vjs-menu-item:hover,.smv-sirv-video .vjs-menu li.vjs-selected,.smv-sirv-video .vjs-menu li.vjs-selected:focus,.smv-sirv-video .vjs-menu li.vjs-selected:hover{background-color:transparent;color:inherit}.smv-sirv-video .vjs-playback-rate .vjs-playback-rate-value,.smv-sirv-video .vjs-quality-selector .vjs-icon-placeholder{font-size:1.2em;line-height:2.5em;pointer-events:none}.smv-sirv-video.video-js .vjs-big-play-button,.smv-sirv-video.video-js .vjs-control-bar,.smv-sirv-video.video-js .vjs-menu-button .vjs-menu-content,.smv-sirv-video.video-js .vjs-volume-vertical{background-color:rgba(55,58,60,.8)}.smv-sirv-video{position:relative;top:0;left:0;width:100%!important;height:100%!important}.smv-sirv-video :focus{outline:0}.smv-sirv-video .vjs-poster{background-color:transparent}.smv-sirv-video .vjs-button{display:inline-block;transition:none;border:0!important;background:0 0;color:inherit;font-size:inherit;line-height:inherit;text-decoration:none;text-transform:none;appearance:none}.smv-sirv-video .vjs-big-play-button{top:50%;left:50%;width:1.2em;height:1.2em;margin-top:-.6em;margin-left:-.6em;border:.04em solid transparent;border-radius:1em;color:inherit!important;font-size:5em;letter-spacing:0!important;line-height:1.2em;box-shadow:none}.smv-sirv-video:hover .vjs-big-play-button{border-color:transparent}.smv-sirv-video.vjs-controls-disabled .vjs-big-play-button,.smv-sirv-video.vjs-has-started .vjs-big-play-button{display:block;transition:opacity .25s}.smv-sirv-video.vjs-has-started.vjs-playing .vjs-big-play-button{opacity:0;pointer-events:none}.smv-sirv-video.vjs-has-started.vjs-paused .vjs-big-play-button{opacity:1}.smv-sirv-video .vjs-quality-selector .vjs-icon-placeholder{line-height:1}.smv-sirv-video.video-js{background-color:transparent;color:#fff;font-size:10px}.smv-sirv-video.video-js:not(.vjs-has-started) .vjs-tech{opacity:.001}.smv-sirv-video.video-js .vjs-control-bar :last-child .vjs-menu{left:100%;transform:translateX(-100%)}.smv-sirv-video.video-js .vjs-control-bar .vjs-control{color:inherit!important;box-shadow:none}.smv-sirv-video.video-js .vjs-control-bar .vjs-control .vjs-icon-placeholder{font-family:VideoJS;font-style:normal;font-weight:400;line-height:1}.smv-sirv-video.video-js .vjs-control-bar .vjs-control.vjs-quality-selector,.smv-sirv-video.video-js .vjs-control-bar .vjs-control.vjs-resolution{margin-right:.4em}.smv-sirv-video.video-js.vjs-has-started .vjs-control-bar{transition:visibility .2s,opacity .2s}.smv-sirv-video.video-js .vjs-menu-button{padding:0}.smv-sirv-video.video-js .vjs-slider{background-color:rgba(255,255,255,.2)}.smv-sirv-video.video-js .vjs-progress-control .vjs-progress-holder{transform:scaleY(.6);transition:transform .1s cubic-bezier(.4,0,1,1);font-size:1.6666666667em}.smv-sirv-video.video-js .vjs-progress-control .vjs-play-progress::before{transform:scale(0);transition:transform .1s cubic-bezier(.4,0,1,1)}.smv-sirv-video.video-js .vjs-progress-control:hover .vjs-play-progress::before,.smv-sirv-video.video-js .vjs-progress-control:hover .vjs-progress-holder{transform:none}.smv-sirv-video.video-js .vjs-load-progress{background-color:transparent}.smv-sirv-video.video-js .vjs-load-progress div{background:rgba(255,255,255,.4)}.smv-sirv-video.video-js .vjs-menu{left:50%;width:8em;transform:translateX(-50%)}.smv-sirv-video.video-js .vjs-menu .vjs-menu-item{padding:.6em .6em .3em;font-size:1.2em;text-align:left;text-transform:none}.smv-sirv-video.video-js .vjs-menu .vjs-menu-item~.vjs-menu-item{padding-top:.3em}.smv-sirv-video.video-js .vjs-menu .vjs-menu-item::before{padding:0 1em;font-family:VideoJS;font-size:.66em;content:'\\f111';opacity:0}.smv-sirv-video.video-js .vjs-menu .vjs-menu-item.vjs-selected::before{opacity:1}.smv-sirv-video.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}:root:not(.mobile-magic) .smv-sirv-video.video-js.vjs-has-started:not(:hover) .vjs-control-bar{opacity:0}.smv-disabled-action .vjs-tech{pointer-events:none!important}.smv-disabled-action .vjs-poster{pointer-events:none!important}.smv .vjs-quality-selector .vjs-menu-content .vjs-menu-title{display:none}.smv .smv-q-last .vjs-quality-selector .vjs-menu,.smv .smv-s-last .vjs-playback-rate .vjs-menu{right:0;left:auto!important;transform:none!important}"})),h=[.5,1,1.5,2],d=(l="smv")+"-disabled-action",c="https://video.sirv.com",v=l+"-q-last",u=l+"-s-last",p=50*w.DPPX,m=0,y=1,f=2,g=4,S=5,b=6,j=function(e){return s.loadCssFile(e,t.SIRV_ASSETS_URL+"vjs/sirv.videojs.css","sirv-stylesheet-vjs")},E=function(){return s.loadJsFile(t.SIRV_ASSETS_URL+"vjs/qualityselector.js")},function(i){"use strict";function n(e,o){var n;(n=i.call(this,e,o,r)||this).type=t.SLIDE.TYPES.VIDEO,n.url=n.instanceNode.attr("data-src"),n.info=null,n.HLS=[],n.currentSize={width:0,height:0},n.videoNode=null,n.areSourcesAdded=!1,n.indexOfCurrentHls=0,n.player=null,n.thumbnail=n.option("thumbnail"),n.currentTime=0,n.isVideoPaused=!1,n.fps=30,n.pluginResizeDebounce=null,n.playPromise=null,n.posterSize=null,n.lastAction=m,n.isPlayed=!1,n.isEnded=!1,n.playingState=t.VIDEO.NONE,n.nativeFullscreen=o.nativeFullscreen;var a=s.normalizeURL(n.url.replace(t.REG_URL_QUERY_STRING,"$1")),l=n.url.replace(t.REG_URL_QUERY_STRING,"$2");return n.url=a,l&&(n.url+="?"+l),n.disableAction(),n.isLoadeddata=!1,n.controlsFullscreen=n.option("controls.fullscreen"),n.getInfo(),n}e.inheritsLoose(n,i);var a=n.prototype;return a.normalizeOptions=function(){var e=this.option("quality.min");e>this.option("quality.max")&&this.option("quality.max",e)},a.getSelectorImgUrl=function(e){var i=this;return new Promise((function(t,s){var o=e.width||e.height,n=i.url.split("?")[0]+"?thumbnail="+o;w.DPPX>1&&(n=i.url.split("?")[0]+"?thumbnail="+o*w.DPPX+"&quality=60"),isNaN(parseFloat(i.thumbnail))||(n=i.getThumbnailPoster(n));var a={src:n,callbackData:e.callbackData};w.DPPX>1&&(a.srcset=n),i.getInfo().then((function(){t(a)})).catch(s)}))},a.disableAction=function(){this.always&&[t.FULLSCREEN.CLOSED,t.FULLSCREEN.CLOSING].includes(this.fullscreenState)&&this.instanceNode.addClass(d)},a.enableAction=function(){this.always&&this.instanceNode.removeClass(d)},a.getInfo=function(){var e=this;return this.gettingInfoPromise||(this.gettingInfoPromise=new Promise((function(i,t){e.waitGettingInfo.wait((function(){var s=e.url,n=w.getHashCode(e.url.split("?")[0].replace(/^http(s)?:\/\//,""));/\?/.test(s)?s+="&":s+="?",s+="info=sirv_video_info_"+n+"_main",o.getRemoteData(s,"video_info_"+o.generateUUID(),e.referrerPolicy).then((function(t){e.destroyed||(e.info=t,e.info.QuickTime&&e.info.QuickTime.VideoFrameRate&&(e.fps=e.info.QuickTime.VideoFrameRate),e.HLS=e.info.original.HLS||[],e.HLS.length>1&&e.HLS.sort((function(e,i){var t=0;return e.width<i.width?t=-1:e.width>i.width?t=1:e.height<i.height?t=-1:e.height>i.height&&(t=1),t})),e.infoSize={width:e.info.original.width,height:e.info.original.height},i(e.infoSize))})).catch((function(i){e.destroyed||t(i)}))}))}))),this.gettingInfoPromise},a.getInfoSize=function(){var e=this;return new Promise((function(i,t){e.getInfo().then((function(){i({size:e.infoSize})})).catch((function(e){t({error:e})}))}))},a.addSources=function(){var e,i=this,o=s.getNodeWithSirvClassName(this.instanceNode)||w.D.node.head||w.D.node.body;Promise.all([j(w.D.node.head||w.D.node.body),j(o),(e=o,s.loadCssFile(e,t.SIRV_ASSETS_URL+"vjs/qualityselector.css","sirv-stylesheet-vjs-quality-selector","#"+s.rootDOM.mainCSSID)),s.loadJsFile(t.SIRV_ASSETS_URL+"vjs/sirv.videojs.js").then(E)]).finally((function(){window.Sirv.require("qualitySelector",(function(){i.areSourcesAdded=!0,i.isStarted&&i.isInView&&(i.preload||i.isSlideShown)&&i.createVideoNode()}))}))},a.onStartActions=function(e){this.ready?this.player&&this.isInView&&(this.fullscreenState===t.FULLSCREEN.OPENED&&this.always&&this.option("controls.enable")&&(this.player.controlBar.show(),this.player.bigPlayButton.show()),!this.option("autoplay")||!this.player.paused()||this.fullscreenState!==t.FULLSCREEN.OPENED&&this.always||(this.player.muted(!0),this.isPlayed?this.lastAction=g:e===t.SLIDE_SHOWN_BY.USER&&(this.lastAction=y),this.play())):this.isStarted&&this.isInView&&this.isSlideShown&&!this.preload&&this.areSourcesAdded&&this.createVideoNode()},a.onStopActions=function(){this.player&&(this.player.paused()||this.playingState!==t.VIDEO.PLAYING||(this.lastAction=b,this.pause()))},a.onInView=function(e){e?this.ready?this.player&&this.isSlideShown&&e&&(this.option("autoplay")||this.playingState!==t.VIDEO.NONE&&!this.isVideoPaused)&&(this.lastAction=f,this.play()):this.isStarted&&!this.isInView&&(this.preload||this.isSlideShown)&&this.areSourcesAdded&&(this.isInView=!0,this.createVideoNode()):this.player&&(this.isVideoPaused=this.playingState===t.VIDEO.PAUSE,this.player.paused()||this.playingState!==t.VIDEO.PLAYING||(this.lastAction=S,this.pause()))},a.startFullInit=function(e){this.isStartedFullInit||(i.prototype.startFullInit.call(this,e),this.normalizeOptions(),this.thumbnail=this.option("thumbnail"),this.getId("video-"),this.instanceNode.addClass("sirv-video"),this.instanceNode.addEvent("mousedown",(function(e){e.stop()})))},a.onBeforeFullscreenIn=function(e){this.controlsFullscreen=!1,this.player&&(this.isVideoPaused=this.playingState===t.VIDEO.PAUSE,this.toggleFullscreenButton())},a.onAfterFullscreenIn=function(e){this.enableAction(),this.isSlideShown&&this.isInView&&this.player&&this.player.paused()&&(this.always&&this.option("controls.enable")&&(this.player.controlBar.show(),this.player.bigPlayButton.show()),this.option("autoplay")&&!this.isVideoPaused&&(this.player.currentTime(this.currentTime),this.playingState=t.VIDEO.PLAY,this.player.play_()))},a.onBeforeFullscreenOut=function(e){this.disableAction(),this.option("controls.fullscreen")&&(this.controlsFullscreen=!0),this.player&&(this.isVideoPaused=this.playingState===t.VIDEO.PAUSE,this.toggleFullscreenButton())},a.onAfterFullscreenOut=function(e){this.isSlideShown&&this.isInView&&this.player&&(this.always&&this.option("controls.enable")&&(this.player.controlBar.hide(),this.player.bigPlayButton.hide()),this.option("autoplay")&&!this.isVideoPaused&&(this.lastAction=y,this.play()))},a.onSecondSelectorClick=function(){this.player&&this.isSlideShown&&this.isInView&&(this.fullscreenState!==t.FULLSCREEN.OPENED&&this.always||(this.player.paused()?(this.lastAction=y,this.play()):this.playingState===t.VIDEO.PLAYING&&this.isLoadeddata&&this.pause()))},a.createVideoNode=function(){this.videoNode||(this.videoNode=w.$new("video",{class:l+"-sirv-video",preload:"none"}),this.videoNode.addClass("video-js"),this.instanceNode.append(this.videoNode),this.waitToStart.start(),this.done())},a.play=function(){this.player&&!this.playPromise&&(this.playingState=t.VIDEO.PLAY,this.playPromise=this.player.play())},a.pause=function(){var e=this;this.player&&(this.playPromise||new Promise((function(e){return e(null)}))).then((function(){e.player.pause(),e.playPromise=null})).catch((function(){e.player.pause(),e.playPromise=null}))},a.loadContent=function(){this.createVideoNode()},a.run=function(e,t,s){var o=i.prototype.run.call(this,e,t,s);return o&&(this.calcContainerSize(),this.isInView&&(this.preload||this.isSlideShown)&&this.areSourcesAdded&&this.createVideoNode(),this.startGettingInfo()),o},a.createMasterManifest=function(){var e=this,i=["#EXTM3U"],t=this.option("motionFactor"),s=this.option("dynamicAdaptiveStreaming");return this.HLS.forEach((function(o){var n,a,r,l="#EXT-X-STREAM-INF:PROGRAM-ID=1,";s&&(l+="BANDWIDTH="+(n=o,a=e.fps,r=t,parseInt(n.width*n.height*a*r*.07,10)+",")),l+="RESOLUTION="+o.width+"x"+o.height,i.push(l),i.push(c+o.index)})),i.join("\n")},a.toggleFullscreenButton=function(){var e=this.player.controlBar.getChild("FullscreenToggle"),i=this.player.options_.userActions;this.controlsFullscreen?(i.doubleClick=!0,e.show()):(i.doubleClick=!1,e.hide())},a.isHLS=function(){return this.HLS.length>0&&"ie"!==w.browser.uaName},a.getThumbnailSize=function(){var e=this.isHLS()?this.HLS[this.HLS.length-1].height:this.info.height||this.info.original.height||140,i=e;return this.currentSize.height<i&&(i=this.currentSize.height),(i*=w.DPPX)>e&&(i=e),i},a.done=function(){var e=this;if(!this.ready){this.posterSize=this.getThumbnailSize();var s=this.posterUrl,n={inline:!1};!1===this.option("controls.volume")&&(n=!1);var a={nativeTextTracks:!1,nativeAudioTracks:!1,nativeVideoTracks:!1},r=this.isHLS(),l={overrideNative:r&&"safari"!==w.browser.uaName};a.smoothQualityChange=!0,a.vhs=l;var d={controls:this.option("controls.enable"),fluid:!1,muted:0===this.option("volume")||this.option("autoplay"),loop:this.option("loop"),autoplay:this.option("autoplay")&&this.isSlideShown,preload:this.option("autoplay")||this.option("preload")?"auto":"none",textTrackSettings:!1,controlBar:{fullscreenToggle:!0,volumePanel:n,muteToggle:!1,children:["playToggle","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","volumePanel","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},poster:s,playsinline:!0,html5:a,userActions:{doubleClick:!0},qualityLevels:{}};if(this.option("controls.quality")?this.instanceNode.addClass(v):this.option("controls.speed")&&this.instanceNode.addClass(u),this.option("controls.speed")&&(d.playbackRates=h),r)this.player=w.W.node.videojs(this.videoNode.node,d),"safari"!==w.browser.uaName&&this.player.src({src:"data:application/x-mpegURL;base64,"+window.btoa(this.createMasterManifest()),type:"application/x-mpegURL"}),this.player.hlsQualitySelectorAutoMode({visibility:this.option("controls.quality"),hls:this.HLS,host:c,max:this.option("quality.max"),min:this.option("quality.min")}),this.pluginResizeDebounce=o.debounce((function(){e.player.hlsQualitySelectorAutoMode.recalc()}),600);else{d.src=this.url;var p=function(e){switch(e=(e=(e=(e=(e=e||"").split("?")[0]).split("."))[e.length-1]).toLowerCase()){case"3gp":e="video/3gpp";break;case"flv":e="video/flv";break;case"mp4":e="video/mp4";break;case"ogv":e="video/ogg";break;case"webm":e="video/webm";break;default:e=""}return e}(this.url);this.videoNode.append(w.$new("source",{src:this.url,type:p})),this.player=videojs(this.videoNode.node,d)}this.player.volume(parseInt(this.option("volume"),10)/100),this.toggleFullscreenButton(),this.player.on("loadeddata",(function(){e.isLoadeddata=!0})),this.player.on("play",(function(){if(e.isVideoPaused=!1,e.playingState=t.VIDEO.PLAYING,e.isSlideShown&&e.isInView){var i="user";e.lastAction===f?i="viewport":e.lastAction===y?i="autoplay":e.lastAction===g&&(i="itemchange"),e.lastAction=m,e.isPlayed?e.sendEvent("resume",{event:{reason:i,playbackTime:e.player.currentTime()}}):(e.isPlayed=!0,e.sendEvent("play",{event:{reason:i}}))}else e.lastAction=S,e.pause()})),this.player.on("pause",(function(){if(e.player.currentTime()!==e.player.duration()){e.playingState=t.VIDEO.PAUSE;var i="user";e.lastAction===S?i="viewport":e.lastAction===b&&(i="itemchange"),e.lastAction=m,e.sendEvent("pause",{event:{reason:i,playbackTime:e.player.currentTime()}})}})),this.player.on("ended",(function(){e.isPlayed=!1,e.isEnded=!0,e.playingState=t.VIDEO.PAUSE,e.sendEvent("end")})),this.player.on("fullscreenchange",(function(){var i="fullscreenOut";e.player.isFullscreen()&&(i="fullscreenIn"),e.sendEvent(i,{event:{playbackTime:e.player.currentTime()}})}));var j=null,E=0,N=0;this.player.on("timeupdate",(function(){E=N,N=e.player.currentTime()})),this.player.on("seeking",(function(){null===j&&(j=E)})),this.player.on("seeked",(function(){e.isEnded?e.isEnded=!1:e.sendEvent("seek",{event:{seekStart:j,seekEnd:e.player.currentTime()}}),j=null})),this.player.on("error",(function(e){console.log("error",e)})),w.browser.touchScreen&&w.browser.mobile&&this.player.on("touchstart",(function(i){"video"===w.$(i.target).tagName&&e.player.hasClass("vjs-user-active")&&(e.player.paused()?(e.lastAction=y,e.play()):e.pause())})),this.player.on("ready",(function(){e.option("controls.fullscreen")||e.player.off(e.player.tech_,"dblclick",e.player.handleTechDoubleClick_),e.option("controls.enable")&&e.fullscreenState!==t.FULLSCREEN.OPENED&&e.always&&(e.player.controlBar.hide(),e.player.bigPlayButton.hide()),e.isSlideShown&&e.isInView&&e.option("autoplay")&&(e.fullscreenState!==t.FULLSCREEN.OPENED&&e.always||(e.player.muted(!0),e.lastAction=y,e.play(),e.player.muted(!0))),i.prototype.done.call(e),e.sendContentLoadedEvent()}))}},a.getThumbnailPoster=function(e){var i=e;if(i||(i=""),this.thumbnail||0===this.thumbnail){var t=parseFloat(this.thumbnail);!isNaN(t)&&t<this.info.original.duration?i+="&video.thumbPos="+this.thumbnail:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/i.test(this.thumbnail)&&(i=this.thumbnail)}return i},a.calcContainerSize=function(){var e=this.instanceNode.size;if(e.height&&e.width)this.currentSize=e;else{var i={width:0,height:0};i.width=this.info.original.width,i.height=this.info.original.height,e.height?(this.currentSize.height=e.height,this.currentSize.width=i.width/i.height*e.height):(this.currentSize.width=e.width,this.currentSize.height=i.height/i.width*e.width)}},a.createPinchEvent=function(){var e=this;i.prototype.createPinchEvent.call(this,this.instanceNode),this.pinchCloud.onPinchStart=function(i){[t.FULLSCREEN.OPENING,t.FULLSCREEN.CLOSING].includes(e.fullscreenState)||(e.pinchCloud.pinch=!0,e.pinchCloud.scale=i.scale,e.sendEvent("pinchStart"))},this.pinchCloud.onPinchMove=function(i){if(e.pinchCloud.pinch&&!e.pinchCloud.block){var s=i.scale-e.pinchCloud.scale;e.fullscreenState===t.FULLSCREEN.OPENED?s<-.08&&(e.pinchCloud.block=!0,e.sendEvent("fullscreenOut")):i.scale>=.11&&(e.pinchCloud.block=!0,e.sendEvent("fullscreenIn"))}}},a.onResize=function(){if(this.player){if(this.isSlideShown&&this.isInView||this.player.paused()||this.playingState!==t.VIDEO.PLAYING||this.pause(),this.pluginResizeDebounce&&this.pluginResizeDebounce(),this.playingState===t.VIDEO.NONE){this.calcContainerSize();var e=this.getThumbnailSize();e>this.posterSize&&e-this.posterSize>=p&&(this.posterSize=e,this.player.poster(this.posterUrl))}return!0}return!1},a.destroy=function(){return this.player&&(this.player.off(),this.player.dispose(),this.player=null),this.videoNode&&(this.videoNode.remove(),this.videoNode=null),this.pluginResizeDebounce&&(this.pluginResizeDebounce.cancel(),this.pluginResizeDebounce=null),this.instanceNode.clearEvents(),this.instanceNode.removeClass("sirv-video"),this.instanceNode.removeClass(d),this.instanceNode.removeClass(v),this.instanceNode.removeClass(u),this.playPromise=null,this.HLS=[],i.prototype.destroy.call(this),!0},e.createClass(n,[{key:"posterUrl",get:function(){return this.getThumbnailPoster(this.url.split("?")[0]+"?thumbnail="+this.posterSize)}}]),n}(a)}));
Sirv.define("LazyImage",["bHelpers","magicJS","globalVariables","globalFunctions","helper","ResponsiveImage","BaseInstance","getDPPX"],(function(t,i,e,s,a,n,o,r){var h=i,c=h.$,d={resize:{type:"boolean",defaults:!0},threshold:{type:"number",minimum:0,defaults:0},fit:{type:"string",enum:["contain","cover","crop","none"],defaults:"contain"},quality:{type:"number",minimum:0,maximum:100,defaults:80},hdQuality:{type:"number",minimum:0,maximum:100,defaults:60},autostart:{oneOf:[{type:"string",enum:["created","visible","off"]},{type:"boolean",enum:[!1]}],defaults:"visible"},onReady:{type:"function",defaults:function(){}}},l=function(){"use strict";function t(t){this.node=c(t),this.state=0,this.states=c(["sirv-image-loading","sirv-image-loaded"])}var i=t.prototype;return i.setState=function(t){this.state!==t&&(this.state-1>=0&&this.node.removeClass(this.states[this.state-1]),this.state=t,this.node.addClass(this.states[t-1]))},i.destroy=function(){var t=this;this.state=0,this.states.forEach((function(i){t.node.removeClass(i)})),this.node=null},t}(),g="smv",u=function(t){var i=t.getBoundingClientRect();return!(0===i.top&&0===i.right&&0===i.bottom&&0===i.left&&0===i.width&&0===i.height)};return function(i){"use strict";function o(t,s,n){var o;s.options={common:{common:s.options.common,mobile:{}},local:{common:"",mobile:""}},(o=i.call(this,t,s,d)||this).node=o.instanceNode,o.type=e.SLIDE.TYPES.IMAGE,o.isLazy="visible"===o.option("autostart"),o.image=null,o.isInfoLoaded=!1,o.infoSize={width:0,height:0},o.isNotSirv=!1,o.isInView=!1,o.isStaticImage=!1,o.dppx=1,o.getImageInfoPromise=null,o.loadStaticImagePromise=null,o.upscale=!1,o.size={width:0,height:0},o.maxSize={},o.lastImageSize={width:0,height:0},o.srcWasSetted=!1,o.originAlt=null,o.infoAlt=null,o.originTitle=null,o.src=null,o.srcset=null,o.startedSrc=null,o.dataSrc=null,o.imageUrl=null,o.dontLoad=!0,o.appearanceState=null,o.dataBgSrc=null,o.inViewModule=null,o.rootMargin=0,o.fitSize=null,o.backgroundNodeSize=null,o.isMaxWidthSet=!1,o.cropPosition={x:null,y:null},o.cssBackgroundSize=null,o.isPlaceholder=!1,o.isRun=!1,o.inited=!1,o.resizeDebounce=a.debounce((function(){o._setRootMargin(),o.onResize()}),50),o.resizeHandler=function(t){o.resizeDebounce()};var r=o.instanceOptions.get("autostart");return(r&&"off"!==r||n)&&o.preInit(),o}t.inheritsLoose(o,i);var m=o.prototype;return m.preInit=function(){var t=this;this.isRun=!0,this.inViewModule=new a.InViewModule((function(i){i.forEach((function(i){var e=i.isIntersecting||i.intersectionRatio>0;t.isInView!==e&&(t.inited?t.inViewCallback(e):(t.isInView=e,(e||u(t.instanceNode.node))&&t.init()))}))}),{rootMargin:this.rootMargin+"px 0px"}),this.inViewModule.observe(this.instanceNode),u(this.instanceNode.node)&&this.init()},m.init=function(){this.inited=!0;try{this.maxWidth=this.instanceNode.node.style.maxWidth}catch(t){}this._getBaseData(),this.imageUrl&&(h.browser.ready||"loading"!==h.D.node.readyState)&&this.startFullInit(),this.createSirvImage()},m.stop=function(){return this.destroy(),!0},m.getOptionsForStartFullInit=function(t){t&&(t={common:{common:t.common.lazyImage||{},mobile:t.mobile.lazyImage||{}},local:{common:"",mobile:""}}),i.prototype.getOptionsForStartFullInit.call(this,t)},m.checkReadiness=function(t,i){return"onLoad"===t&&this.ready},m._setRootMargin=function(){var t=parseInt(this.option("threshold"),10);"string"===h.typeOf(this.option("threshold"))&&(t=(h.W.node.innerHeight||h.D.node.documentElement.clientHeight)/100*t),this.rootMargin=t},m._getQueryParams=function(){if(this.imageUrl){if(this.queryParams=a.paramsFromQueryString(this.imageUrl.replace(e.REG_URL_QUERY_STRING,"$2")),this.queryParams){var t=parseInt(this.queryParams.quality,10);isNaN(t)?delete this.queryParams.quality:this.queryParams.quality=t}this.queryParamsQuality=this.queryParams.quality||null}},m._getBaseData=function(){this.originAlt=this.instanceNode.attr("alt"),this.originTitle=this.instanceNode.attr("title"),this.src=this.instanceNode.attr("src"),this.srcset=this.instanceNode.attr("srcset"),this.startedSrc=this.src,this.dataSrc=this.instanceNode.attr("data-src"),this.isStaticImage=this.src&&!this.dataSrc,this.imageUrl=this.dataSrc||this.src,(a.isSVG(this.imageUrl)||"static"===this.instanceNode.attr("data-type"))&&(this.isNotSirv=!0),this.dataBgSrc=this.instanceNode.attr("data-bg-src"),this.isStaticImage=this.isStaticImage&&!this.dataBgSrc,this.imageUrl=this.dataBgSrc||this.imageUrl,"img"===this.instanceNode.tagName&&(this.instanceNode.attr("referrerpolicy",this.referrerPolicy),this.dataBgSrc&&(this.dataSrc||(this.dataSrc=this.dataBgSrc),this.dataBgSrc=null)),this.dataBgSrc&&(this.dontLoad=!1),this.imageUrl&&(this.src=s.normalizeURL(this.imageUrl.replace(e.REG_URL_QUERY_STRING,"$1"))),this._getQueryParams(),this.startedSrc&&this.dataSrc&&this.startedSrc!==this.dataSrc&&(this.isPlaceholder=this.instanceNode.attr("src"))},m.createSirvImage=function(){var t=this;this.imageUrl&&!this.isNotSirv&&(this.on("imageOnload",(function(i){if(i.stopAll(),t.replaceSrc(),!t.ready)if(t.isStaticImage)t.done();else{var e=function(){t.appearanceState&&(t.appearanceState.setState(2),t.done())};i.data.node?e():a.loadImage(t.instanceNode).finally((function(){e()}))}})),this.on("imageOnerror",(function(t){t.stopAll(),console.log("image error")})),this.image=new n(this.imageUrl,{imageSettings:this.queryParams,round:!0,dontLoad:this.dontLoad,convertSmallerSideToZero:"crop"!==this.option("fit"),referrerPolicy:this.referrerPolicy}),this.image.parentClass=this,this.getInfoSize().catch((function(i){i._isplaceholder&&(t.infoSize=i,t.isNotSirv=!0)})).finally((function(){"loading"!==h.D.node.readyState&&t.isStartedFullInit&&t.run()})))},m.getInfoSize=function(){var t=this;return this.getImageInfoPromise||(this.getImageInfoPromise=new Promise((function(i,e){t.image?t.image.loadInfo().then((function(e){t.isInfoLoaded=!0,t.infoAlt=t.image.description,t.infoSize=t.image.originSize,t.cropPosition=t.image.getCropPosition(),i(e)})).catch((function(i){t.isInfoLoaded=!0,i.status&&404===i.status||(t.isNotSirv=!0),e(i)})):e()}))),this.getImageInfoPromise},m.getId=function(t,e){this.id=this.instanceNode.attr("id"),this.id||this.isStaticImage||i.prototype.getId.call(this,t,e)},m.startFullInit=function(t,e){if(!this.isStartedFullInit&&this.inited){this.getOptionsForStartFullInit(t);var s=this.option("autostart");if(this.inited||s&&"off"!==s||e){i.prototype.startFullInit.call(this,t),t&&(this.isLazy="visible"===this.option("autostart")),this.getId("responsive-image-"," "),this.dataBgSrc&&(this.cssBackgroundSize=a.imageLib.getBackgroundSize(this.instanceNode),this.cssBackgroundSize&&this.option("fit","none"),this.instanceNode.addClass(g+"-bg-image"),"none"!==this.option("fit")&&("contain"===this.option("fit")?this.instanceNode.addClass(g+"-bg-contain"):this.instanceNode.addClass(g+"-bg-cover"))),this._setRootMargin(),this.isStaticImage?this.isLazy=!1:(this.appearanceState=new l(this.instanceNode),this.isPlaceholder||this.appearanceState.setState(1));var n="img"===this.instanceNode.tagName;this.isLazy&&n&&this.instanceNode.attr("loading","lazy"),(!this.isLazy||n&&"ie"!==h.browser.uaName)&&(this.isInView=!0,this.inViewModule.disconnect(),this.inViewModule=null),(this.isInfoLoaded||this.isNotSirv)&&"loading"!==h.D.node.readyState&&this.run(),h.W.addEvent("resize",this.resizeHandler)}}},m.fixHeight=function(t){0!==t&&((t===parseInt(this.instanceNode.getCss("block-size"),10)||t<=16)&&(t=0));return t},m.run=function(){var t=this,e=i.prototype.run.call(this);if(e){this.instanceNode.removeAttr("alt"),this.instanceNode.removeAttr("title"),this.instanceNode.setCss({display:"inline-flex"}).render(),this.instanceNode.setCss({display:""}).render();var s=null;a.imageLib.getSize(this.instanceNode).then((function(t){s=t})).finally((function(){if(!t.destroyed){if(0===(s=a.fixSize(t.instanceNode,s)).width&&0===s.height&&(t.instanceNode.setCss({width:"100%"}),s.width=t.instanceNode.size.width),0===s.width&&0===s.height&&(s.width=h.W.node.innerWidth),"contain"===t.option("fit")?t.fitSize={width:"contain",height:"contain"}:t.fitSize={width:"cover",height:"cover"},"none"===t.option("fit")?t.cssBackgroundSize?t.size=a.imageLib.calcProportionalBackgroundSize(t.cssBackgroundSize,t.infoSize):t.size=t.infoSize:t.size=a.imageLib.calcProportionSize(s,t.infoSize,t.fitSize),!t.dataBgSrc){var i=t.instanceNode.getCss("objectFit");t.maxWidth||!(t.infoSize.width>0)||i&&"fill"!==i||t.instanceNode.attr("width")||(t.isMaxWidthSet=!0,t.instanceNode.setCss({maxWidth:t.infoSize.width}))}(t.originAlt||t.infoAlt)&&t.instanceNode.attr("alt",t.originAlt||t.infoAlt),t.originTitle&&t.instanceNode.attr("title",t.originTitle),t.isStaticImage?t.loadStaticImage().finally((function(){t.isInfoLoaded&&t.done()})):t.isLazy&&!t.isInView||t.getImage()}}))}return e},m._setSrc=function(t,i){this.dataBgSrc?this.instanceNode.setCss({backgroundImage:'url("'+(i||t)+'")'}):(this.instanceNode.attr("src",t),i?!this.isNotSirv&&this.dppx>1&&this.instanceNode.attr("srcset",i+" "+this.dppx+"x"):this.instanceNode.removeAttr("srcset"))},m._setHDQuality=function(t){if(t.dppx>1&&t.dppx<1.5){var i=this.instanceOptions.isset("quality")?this.option("quality"):null;null===this.queryParamsQuality&&null!==i?t.srcset.quality=i:t.srcset&&delete t.srcset.quality}return t},m.replaceSrc=function(){var t;if(this.isNotSirv){if(this.srcWasSetted)return;this.srcWasSetted=!0,t={src:this.imageUrl}}else{var i=this._getImageCreateSettings();i.dppx>1&&i.dppx<1.5&&delete i.srcset.quality,i=this._setHDQuality(i),t=this.image.getImage(i),this.lastImageSize.width=t.width||t.serverWidth,this.lastImageSize.height=t.height||t.serverHeight}this._setSrc(t.src,t.srcset)},m.loadStaticImage=function(){var t=this;return this.loadStaticImagePromise||(this.loadStaticImagePromise=new Promise((function(i,e){t.isStaticImage?t.instanceNode.node.complete?i():(t.instanceNode.addEvent("load",(function(t){i()})),t.instanceNode.addEvent("error",(function(t){e()}))):i()}))),this.loadStaticImagePromise},m._getImageCreateSettings=function(){var t={src:{},srcset:{}},i=this.instanceOptions.isset("quality")?this.option("quality"):null;null!==i&&null===this.queryParamsQuality&&(t.src.quality=i);var e=this.option("hdQuality");return(null===this.queryParamsQuality||this.instanceOptions.isset("hdQuality")&&e<this.queryParamsQuality)&&(t.srcset={quality:e}),t.width=this.size.width,this.size.height&&(t.height=this.size.height),t=a.imageLib.checkMaxSize(t,this.infoSize),this.infoSize.width!==t.width&&this.infoSize.height!==t.height||(t.round=!1),h.DPPX>1&&(t.dppx=this.dppx),"crop"===this.option("fit")&&(t.round=!1),t=this.setCrop(t)},m.setCrop=function(t){if("crop"===this.option("fit")){var i=c(this.instanceNode.node).getInnerSize(!!this.dataBgSrc);t.imageSettings||(t.imageSettings={}),t.imageSettings.crop||(t.imageSettings.crop={}),t.imageSettings.crop={x:this.cropPosition.x||"center",y:this.cropPosition.y||"center",width:i.width,height:i.height}}return t},m.getImage=function(){this.isStaticImage||(this.isNotSirv?this.getNonSirvImg():this.getSirvImg())},m.getNonSirvImg=function(){var t=this;this.isPlaceholder?a.loadImage(this.dataSrc).finally((function(){t.replaceSrc(),t.appearanceState.setState(2),t.done()})):(this.replaceSrc(),this.appearanceState.setState(2),this.done())},m.getSirvImg=function(){var t=this._getImageCreateSettings();if(t.width&&(this.maxSize.width=t.width),t.height&&(this.maxSize.height=t.height),h.DPPX>1){var i=this.image.originSize;this.dppx=r(t.width,t.height,i.width,i.height,!h.defined(t.round)||t.round,this.upscale),t.dppx=this.dppx}t=this._setHDQuality(t),this.checkImage(t)?this.replaceSrc():this.image.getImage(t)},m.checkSize=function(t){var i=this.infoSize.width,e=this.infoSize.height;return(t.width>i||t.height>e)&&(t.width=i,t.height&&(t.height=e),t.round=!1),t},m.done=function(){i.prototype.done.call(this),this.option("onReady")(this.id),this.sendEvent("ready")},m.inViewCallback=function(t){t&&!this.isStaticImage&&(this.ready||this.isInView||this.isStarted&&(this.isInView=!0,this.isNotSirv?this.srcWasSetted||this.getImage():this.isInfoLoaded&&this.getImage())),this.isInView=t},m.sendEvent=function(t,i){i||(i={}),i.image||(i.image={}),i.image.event||(i.image.event={}),"ready"===t&&(t="onLoad"),i.type=t,i.image.id=this.id,i.image.url=this.instanceUrl,i.image=Object.assign(i.image,this.api),i.node=this.instanceNode,i.image.node=this.instanceNode.node,i.image.event.timestamp=+new Date,i.image.event.type="lazyimage:"+t,this.emit("imagePublicEvent",{data:i})},m.onResize=function(){if(!this.isStarted||this.isStaticImage||!this.option("resize")||this.isNotSirv)return!1;var t;if(["crop","cover"].includes(this.option("fit"))?t=c(this.instanceNode.node.parentNode).size:(t=this.instanceNode.size).height=this.fixHeight(t.height),t=a.imageLib.calcProportionSize(t,this.infoSize,this.fitSize),this.size.width=t.width,this.size.height&&(this.size.height=t.height),this.ready&&!this.isNotSirv){"crop"===this.option("fit")?(Math.abs(this.size.width-this.lastImageSize.width)>50||Math.abs(this.size.height-this.lastImageSize.height)>50)&&this.getImage():(this.size.width-this.lastImageSize.width>50||this.size.height-this.lastImageSize.height>50)&&this.getImage()}return!0},m.destroy=function(){if(this.dataBgSrc&&(this.instanceNode.removeClass(g+"-bg-image"),this.instanceNode.setCssProp("background-image","")),this.isMaxWidthSet&&(this.isMaxWidthSet=!1,this.instanceNode.setCss({maxWidth:""})),this.appearanceState&&this.appearanceState.destroy(),this.inViewModule&&(this.inViewModule.disconnect(),this.inViewModule=null),h.W.removeEvent("resize",this.resizeHandler),this.resizeDebounce.cancel(),this.resizeDebounce=null,this.image&&(this.off("imageOnload"),this.off("imageOnerror"),this.image.destroy(),this.image=null),this.instanceNode.node.hasAttribute("src"))try{this.instanceNode.removeAttr("src"),this.isStaticImage&&this.instanceNode.attr("src",this.imageUrl)}catch(t){}if(this.isStaticImage?this.instanceNode.attr("src",this.src):this.instanceNode.removeAttr("src"),this.srcset)this.instanceNode.attr("srcset",this.srcset);else try{this.instanceNode.removeAttr("srcset")}catch(t){}this.srcset=null,!this.originAlt&&this.infoAlt&&this.instanceNode.removeAttr("alt"),this.instanceNode.removeEvent("load"),this.isPlaceholder&&(this.instanceNode.attr("src",this.isPlaceholder),this.isPlaceholder=!1),i.prototype.destroy.call(this)},t.createClass(o,[{key:"imageClassContainer",get:function(){return this.image}},{key:"originImageUrl",get:function(){return this.src}}]),o}(o)}));
Sirv.define("Slider",["bHelpers","magicJS","globalVariables","globalFunctions","ResponsiveImage","helper","EventEmitter","ContextMenu","ComponentLoader","defaultsVideoOptions","ViewerImage","SliderBuilder","ProductDetail","Description","Spin","Zoom","Video"],(function(e,t,i,s,n,o,r,a,l,d,c,h,u,p,f,v,m){var S,y=t,g=y.$,b="smv",C="smv-thumbnail",E=(y.W.node.devicePixelRatio,{orientation:{type:"string",enum:["horizontal","vertical"],defaults:"horizontal"},arrows:{type:"boolean",defaults:!0},loop:{type:"boolean",defaults:!0},quality:{type:"number",minimum:0,maximum:100,defaults:80},hdQuality:{type:"number",minimum:0,maximum:100,defaults:60},itemsOrder:{type:"array",defaults:[]},autostart:{oneOf:[{type:"string",enum:["created","visible","off"]},{type:"boolean",enum:[!1]}],defaults:"visible"},threshold:{type:"number",minimum:0,defaults:0},slide:{first:{type:"number",minimum:0,defaults:0},delay:{type:"number",minimum:9,defaults:3e3},preload:{type:"boolean",defaults:!0},autoplay:{type:"boolean",defaults:!1},animation:{type:{oneOf:[{type:"string",enum:["off","slide","fade"]},{type:"boolean",enum:[!1]}],defaults:"fade"},duration:{type:"number",minimum:9,defaults:200}},socialbuttons:{enable:{type:"boolean",defaults:!1},types:{facebook:{type:"boolean",defaults:!0},twitter:{type:"boolean",defaults:!0},linkedin:{type:"boolean",defaults:!0},reddit:{type:"boolean",defaults:!0},tumblr:{type:"boolean",defaults:!0},pinterest:{type:"boolean",defaults:!0},telegram:{type:"boolean",defaults:!0}}}},thumbnails:{enable:{type:"boolean",defaults:!0},size:{type:"number",minimum:5,defaults:70},position:{type:"string",enum:["top","left","right","bottom"],defaults:"bottom"},type:{type:"string",enum:["square","auto","bullets","grid","crop"],defaults:"square"},always:{type:"boolean",defaults:!1},target:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:!1},watermark:{type:"boolean",defaults:!0}},fullscreen:{enable:{type:"boolean",defaults:!0},always:{type:"boolean",defaults:!1},native:{type:"boolean",defaults:!1},thumbnails:{enable:{type:"boolean",defaults:!0},size:{oneOf:[{type:"string",enum:["auto"]},{type:"number",minimum:5}],defaults:"auto"},position:{type:"string",enum:["top","left","right","bottom"],defaults:"bottom"},type:{type:"string",enum:["square","auto","bullets","grid","crop"],defaults:"square"},always:{type:"boolean",defaults:!1},autohide:{type:"boolean",defaults:!1},watermark:{type:"boolean",defaults:!0}}},contextmenu:{enable:{type:"boolean",defaults:!1},text:{zoom:{in:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Zoom In"},out:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Zoom Out"}},fullscreen:{enter:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Enter Full Screen"},exit:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Exit Full Screen"}},download:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Download Image"}}},productdetail:{enable:{type:"boolean",defaults:!1},position:{type:"string",enum:["top","right","bottom","left"],defaults:"top"}}}),I=function(t){"use strict";function s(e,s,n){var o;return(o=t.call(this)||this).node=g(e),o.options=s,o._type=i.SLIDE.TYPES.NONE,o.imgSrc=null,o.effect=null,o.additionalEffects=[],o.isStarted=!1,o.isPrepared=!1,o.toolOptions={},o.api={},o.isActive=!1,o.additionalOptions=n,o.parse(),o.setEvents(),o}e.inheritsLoose(s,t),s.isExist=function(e){var t=!1,s=o.getSirvType(e);return s&&{Image:c,Spin:f,Zoom:v,Video:m}[y.camelize("-"+i.SLIDE.NAMES[s.type])]&&(t=!0),t};var n=s.prototype;return n.createAPI=function(){var e=this;if(this.effect){this.api=this.effect.api;var t=[],s=i.SLIDE.TYPES;switch(this._type){case s.SPIN:t=["play","rotate","rotateX","rotateY","zoomIn","zoomOut"];break;case s.ZOOM:this.api.zoomIn&&(t=["zoomIn","zoomOut"])}t.forEach((function(t){var i=e.api[t];e.api[t]=function(){var t=!1,s=i;if(e.isActive){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];t=s.apply(e,o)}return t}}))}},n.setEvents=function(){var e=this;this.on("stats",(function(t){t.stopEmptyEvent(),t.data.component=i.SLIDE.NAMES[e._type]})),this.on("componentEvent",(function(t){t.stopEmptyEvent(),t.data.component=i.SLIDE.NAMES[e._type],"ready"===t.data.type&&(e._type===i.SLIDE.TYPES.IMAGE&&null!==t.data.data.imageIndex&&t.stopAll(),e.toolOptions=e.effect.options)}))},n.parse=function(){var e=o.getSirvType(this.node.node);e&&(this._type=e.type,this.imgSrc=e.imgSrc)},n.push=function(e){if(c){var t=new c(e,{options:this.options.image,isFullscreen:this.additionalOptions.isFullscreen,imageIndex:this.additionalEffects.length});t.parentClass=this,this.additionalEffects.push({node:e,src:g(e).attr("src"),datasrc:g(e).attr("data-src"),effect:t})}},n.sendEvent=function(e){this.effect&&this.effect.sendEvent&&this.effect.sendEvent(e)},n.resize=function(){this.broadcast("resize")},n.startFullInit=function(e){var t=this;this.effect&&(this.effect.startFullInit(e?e[this._type]:null),this.additionalEffects.length&&this.additionalEffects.forEach((function(i){i.effect&&i.effect.startFullInit(e?e[t._type]:null)})))},n.getSelectorImgUrl=function(e){return this.effect.getSelectorImgUrl(e)},n.getInfoSize=function(){var e=this;return this._type===i.SLIDE.TYPES.IMAGE?new Promise((function(t,i){Promise.all([e.effect.getInfoSize()].concat(e.additionalEffects.map((function(e){return e.effect.getInfoSize()})))).then((function(e){t(e[0])})).catch(i)})):this.effect.getInfoSize()},n.start=function(){if(!this.isPrepared){this.isPrepared=!0;var e={isFullscreen:this.additionalOptions.isFullscreen,quality:this.additionalOptions.quality,hdQuality:this.additionalOptions.hdQuality,isHDQualitySet:this.additionalOptions.isHDQualitySet,always:this.additionalOptions.always,nativeFullscreen:this.additionalOptions.nativeFullscreen},t=i.SLIDE.TYPES;switch(this._type){case t.IMAGE:c&&(this.effect=new c(this.node.node,Object.assign(e,{options:this.options.image,imageIndex:null})),this.effect.parentClass=this);break;case t.PANZOOM:case t.ZOOM:v&&(this.effect=new v(this.node.node,Object.assign(e,{options:this.options.zoom})),this.effect.parentClass=this);break;case t.SPIN:f&&(this.node.setCss({width:"100%",height:"100%"}),this.effect=new f(this.node.node,Object.assign(e,{options:this.options.spin})),this.effect.parentClass=this);break;case t.VIDEO:m&&(this.effect=new m(this.node.node,Object.assign(e,{options:this.options.video,nativeFullscreen:this.additionalOptions.nativeFullscreen})),this.effect.parentClass=this)}this.createAPI()}},n.isThumbnailGif=function(){return!(!this.effect||this._type!==i.SLIDE.TYPES.SPIN)&&this.effect.isThumbnailGif()},n.isZoomSizeExist=function(){var e=i.SLIDE.TYPES;return!(!this.effect||![e.SPIN,e.PANZOOM,e.ZOOM].includes(this._type))&&this.effect.isZoomSizeExist()},n.startGettingInfo=function(){this.effect&&this.effect.startGettingInfo()},n.startTool=function(e,t,i){!this.isStarted&&this.effect&&(this.isStarted=!0,this.effect.run(e,t,i),this.additionalEffects.length&&this.additionalEffects.forEach((function(s){s.effect&&s.effect.run(e,t,i)})))},n.loadContent=function(){this.isStarted&&this.effect.loadContent()},n.loadThumbnail=function(){this.isStarted&&this.effect.loadThumbnail()},n.getData=function(){var e={};return this.effect&&(delete(e=Object.assign(e,this.api)).start,delete e.stop,delete e.refresh),e},n.getZoomData=function(){return[i.SLIDE.TYPES.SPIN,i.SLIDE.TYPES.ZOOM].includes(this._type)?{isZoomed:this.effect.isZoomed(),zoom:this.effect.getZoomData()}:null},n.getSpinOrientation=function(){return this._type===i.SLIDE.TYPES.SPIN?this.effect.orientation:null},n.getSocialButtonData=function(e,t){var s=null;return this.isStarted&&(s=this._type===i.SLIDE.TYPES.SPIN?this.effect.getSocialButtonData(e,t):this.effect.getSocialButtonData(e)),s},n.loadVideoSources=function(){this.effect&&this.effect.addSources()},n.isEffectActive=function(){return!(!this.effect||"spin"!==this._type)&&this.effect.isActive()},n.activate=function(){this.isActive||(this.isActive=!0)},n.deactivate=function(){this.isActive=!1},n.getToolOptions=function(){return this.toolOptions},n.destroy=function(){this.effect&&(this.effect.destroy(),this.additionalEffects.length&&this.additionalEffects.forEach((function(e){e.effect?e.effect.destroy():!e.src&&e.datasrc&&e.node.removeAttribute("src")}))),this.toolOptions={},this.api={},this.isActive=!1,this.isStarted=!1,this.isPrepared=!1,this.off("stats"),this.off("componentEvent"),t.prototype.destroy.call(this)},e.createClass(s,[{key:"type",get:function(){return this._type}},{key:"originImageUrl",get:function(){return this.effect?this.effect.originImageUrl:null}}]),s}(r),w={},x=function(t){"use strict";function i(e){var i;return(i=t.call(this)||this).options=Object.assign({effect:"blank",orientation:"horizontal",time:600,easing:"ease-in-out"},e),i.isMove=!1,i.callbackData=null,i.effectName="blank",i.effect=null,i.addEvents(),i}e.inheritsLoose(i,t);var s=i.prototype;return s.addEvents=function(){var e=this;this.on("effectStart",(function(t){t.data={callbackData:e.callbackData},e.isMove=!0})),this.on("effectEnd",(function(t){t.data={callbackData:e.callbackData},e.isMove=!1,e.effect.destroy(),e.effect=null}))},s.make=function(e,t,i,s){var n=Object.assign(this.options,i||{});this.stop();var o,r,a,l=(o=n.effect,y.camelize("-"+o));Object.prototype.hasOwnProperty.call(w,l)||(l="Blank"),this.effect=new w[l](e,t,{time:n.time,easing:n.easing,direction:(r=n.direction,a=n.orientation,"horizontal"===a?"next"===r?"right":"left":"next"===r?"bottom":"top")}),this.effect.parentClass=this,this.callbackData=s,this.effect.make()},s.stop=function(){this.effect&&(this.effect.destroy(),this.effect=null),this.callbackData=null},s.destroy=function(){this.stop(),this.off("effectStart"),this.off("effectEnd"),this.isMove=!1,t.prototype.destroy.call(this)},i}(r),O=function(t){"use strict";function i(e,i,s){var n;return(n=t.call(this)||this).name="blank",n.elements=[e,i],n.elements[0].node=g(n.elements[0].node),n.elements[1].node=g(n.elements[1].node),n.options=Object.assign({},s||{}),n.states={NOT_STARTED:0,MOVING:1,ENDED:2},n.state=n.states.NOT_STARTED,n.isDestroyed=!1,n}e.inheritsLoose(i,t);var s=i.prototype;return s._show=function(e){this.elements[e].node.setCss({opacity:1,visibility:"visible"})},s._hide=function(e){this.elements[e].node.setCss({opacity:0,visibility:"hidden"})},s._start=function(){this.emit("effectStart",{name:this.name,indexes:[this.elements[0].index,this.elements[1].index]}),this._show(0),this.elements[0].node.setCssProp("z-index",9),this._show(1),this.elements[1].node.setCssProp("z-index",7)},s._move=function(e){e()},s._end=function(){this.state!==this.states.ENDED&&(this.state=this.states.ENDED,this._hide(0),this.emit("effectEnd",{name:this.name,indexes:[this.elements[0].index,this.elements[1].index]}))},s._clear=function(){this.elements.forEach((function(e){e.node.setCss({zIndex:"",opacity:"",visibility:""})}))},s.make=function(){var e=this;this.state===this.states.NOT_STARTED&&(this.state=this.states.MOVING,this._start(),this._move((function(){e._end(),e._clear()})))},s.destroy=function(){this.isDestroyed||(this.isDestroyed=!0,this._end(),this._clear(),this.state=this.states.ENDED,t.prototype.destroy.call(this,this))},i}(r);w.Blank=O,w.Slide=(S=function(e){return e.map((function(e){return function(e){return e+"%"}(e)}))},function(t){"use strict";function i(e,i,s){var n;return(n=t.call(this,e,i,s)||this).options=Object.assign(n.options,Object.assign({direction:"left",time:600,easing:"ease-in-out"},s||{})),n.name="slide",n.from=g([0,-100]),n.to=g([100,0]),["right","bottom"].includes(n.options.direction)&&(n.from[1]*=-1,n.to[0]*=-1),n.from=S(n.from),n.to=S(n.to),n}e.inheritsLoose(i,t);var s=i.prototype;return s._show=function(e){var i=this.elements[e].node;["left","right"].includes(this.options.direction)?(this.from[e]=this.from[e]+", 0%",this.to[e]=this.to[e]+", 0%"):(this.from[e]="0%, "+this.from[e],this.to[e]="0%, "+this.to[e]),i.setCssProp("transform","translate3d("+this.from[e]+", 0px)"),t.prototype._show.call(this,e)},s._move=function(e){var i=this,s=this.options;this.elements[1].node.addEvent("transitionend",(function(s){i.elements[1].node.node===s.target&&(s.stop(),t.prototype._move.call(i,e))})),this.elements.forEach((function(e,t){e.node.render(),e.node.setCssProp("transition","transform "+s.time+"ms "+s.easing),e.node.setCssProp("transform","translate3d("+i.to[t]+", 0px)")}))},s._clear=function(){this.elements.forEach((function(e){e.node.removeEvent("transitionend"),e.node.setCss({transform:"",transition:""})})),t.prototype._clear.call(this,this)},i}(O));var P=function(t){"use strict";function i(e,i,s){var n;return(n=t.call(this,e,i,s)||this).options=Object.assign(n.options,Object.assign({time:600,easing:"linear"},s||{})),n.name="fade",n.from=g([1,0]),n.to=g([0,1]),n}e.inheritsLoose(i,t);var s=i.prototype;return s._show=function(e){t.prototype._show.call(this,e),this.elements[e].node.setCssProp("opacity",this.from[e])},s._move=function(e){var i=this,s=this.options;this.elements[1].node.addEvent("transitionend",(function(s){i.elements[1].node.node===s.target&&(s.stop(),t.prototype._move.call(i,e))})),this.elements.forEach((function(e,t){e.node.render(),e.node.setCssProp("transition","opacity "+s.time+"ms "+s.easing),e.node.setCssProp("opacity",i.to[t])}))},s._clear=function(){this.elements.forEach((function(e){e.node.removeEvent("transitionend"),e.node.setCss({opacity:"",transition:""})})),t.prototype._clear.call(this)},i}(O);w.Fade=P;var z,D,N,A,F,_,L,k,T,R,U,B,V,M,W,H,G,$,Y,j=function(t){"use strict";function i(i){var s,n;return(s=t.call(this)||this).options=Object.assign({orientation:"horizontal",customClass:""},i||{}),s.arrows=(s.options.orientation,n=s.options.customClass,g(["prev","next"]).map((function(e){var t=y.$new("div").addClass("smv-arrow-control","smv-arrow-control-"+e),i=y.$new("div").addClass("smv-button").addClass("smv-arrow").addClass("smv-arrow-"+e);return n&&""!==n&&i.addClass("smv-arrow-"+n),t.append(i),t}))),s.arrows.forEach((function(t,i){var n=i?"next":"prev",o=g(t.node.firstChild);t.store("arrowType",n),o.append(y.$new("div").addClass("smv-icon")),o.addEvent(["btnclick","tap"],g((function(e,i){i.stop(),t.fetch("disabled")||s.emit("arrowAction",{data:{type:e}})})).bind(e.assertThisInitialized(s),n))})),s.isShow=!0,s}e.inheritsLoose(i,t);var s=i.prototype;return s.show=function(){this.isShow||(this.arrows.forEach((function(e){e.removeClass("smv-hidden")})),this.isShow=!0)},s.hide=function(){this.isShow&&(this.isShow=!1,this.arrows.forEach((function(e){e.addClass("smv-hidden")})))},s.disable=function(e){if(e&&this.isShow){var t="forward"===e?1:0;this.arrows[t].store("disabled",!0),g(this.arrows[t].node.firstChild).attr("disabled","")}else this.arrows.forEach((function(e){g(e.node.firstChild).removeAttr("disabled"),e.store("disabled",!1)}))},s.destroy=function(){this.arrows.forEach((function(e){g(e.node.firstChild).removeEvent(["btnclick","tap"]),e.del("arrowType"),e.del("disabled"),e.remove()})),this.arrows=g([]),this.isShow=!1,t.prototype.destroy.call(this)},e.createClass(i,[{key:"nodes",get:function(){return g([this.arrows[0],this.arrows[1]])}}]),i}(r),q=(z=function(e){var t="horizontal";return["left","right"].includes(e)&&(t="vertical"),t},D={width:560,height:315},N=0,A=1,F=2,L=function(t){"use strict";function i(e,i,s,n,o){var r;return(r=t.call(this,e,i,s,n)||this).imageOrientation="horizontal",r.isSirv=!1,r.watermark=o,r.src=null,r.srcset=null,r._imageSize={width:0,height:0},r.getProportionPromise=null,r.getUrlPromise=null,r.loadImagePromise=null,r}e.inheritsLoose(i,t);var s=i.prototype;return s.setCssSize=function(){["square","crop"].includes(this.type)?this.customSquare():this.removeCustomSquare(),t.prototype.setCssSize.call(this)},s.setImageUrl=function(e,t,i,s){this.src=e,this.srcset=t,this.node&&((this.src||this.srcset)&&(s&&this.node.attr("referrerpolicy",s),this.srcset&&this.node.attr("srcset",this.srcset+" 2x"),this.node.attr("src",this.src),y.browser.mobile||this.node.addEvent("mousedown",(function(e){e.stopDefaults()}))),i&&this.node.attr("alt",i))},s.loadImage=function(){var e=this;return this.loadImagePromise||(this.loadImagePromise=new Promise((function(t,i){e.node?o.loadImage(e.isSirv?e.node.node:e.node.node.src).then((function(i){e.loaded=!0,e.imageSize=i.size,e.setCssSize(),t(e)})).catch((function(s){e.destroyed?t(e):i(e)})):t(e)}))),this.loadImagePromise},s.customSquare=function(){if(Math.abs(this._imageSize.width-this._imageSize.height)>2&&"div"!==this.node.tagName){var e=y.$new("div").setCss({overflow:"hidden",position:"relative"});this.node.attr("data-image-orientation",this.imageOrientation),e.append(this.node),this.node.setCss({width:"",height:"","max-width":"none"}),"crop"===this.type?"horizontal"===this.imageOrientation?this.node.setCssProp("height",this.size):this.node.setCssProp("width",this.size):"vertical"===this.imageOrientation?this.node.setCssProp("height",this.size):this.node.setCssProp("width",this.size),this.node=e}},s.removeCustomSquare=function(){this.node&&"div"===this.node.tagName&&(this.node.removeEvent(["touchstart","selectstart","contextmenu"]),this.node.remove(),this.node=g(this.node.node.firstChild),this.node.setCss({width:"",height:"",maxWidth:""}),this.node.removeAttr("data-image-orientation"))},s.complete=function(){var e=this;return this.url.then((function(){return e.loadImage()}))},s.destroy=function(){this.node&&this.node.removeEvent("mousedown"),this.getProportionPromise=null,this.getUrlPromise=null,this.loadImagePromise=null,t.prototype.destroy.call(this)},e.createClass(i,[{key:"proportion",get:function(){var e=this;return this.getProportionPromise||(this.getProportionPromise=new Promise((function(t,i){e.destroyed?t({width:0,height:0}):e.emit("getSelectorProportion",{data:{resultingCallback:function(i){var s=i.size;e.isSirv=i.isSirv,s?(s.width||(s=D),t(s)):t(D)}}})}))),this.getProportionPromise}},{key:"url",get:function(){var e=this;return this.getUrlPromise||(this.getUrlPromise=new Promise((function(t,i){e.destroyed?t(e):e.emit("getSelectorImgUrl",{data:{crop:"crop"===e.type,type:e.type,watermark:e.watermark,size:e.selectorSize,resultingCallback:function(s){s?(e.setImageUrl(s.src,s.srcset,s.alt,s.referrerpolicy),t(e)):i(e)}}})}))),this.getUrlPromise}},{key:"imageSize",set:function(e){this._imageSize=e,this.imageOrientation=this._imageSize.width>=this._imageSize.height?"horizontal":"vertical"}}]),i}(_=function(t){"use strict";function i(e,i,s,n){var o;return(o=t.call(this)||this).node=g(e),o.type=i,o.size=s,o.orientation=n,o.getPlaceholderSizePromise=null,o.destroyed=!1,o.loaded=!1,o.content=null,o.node.tagName===C&&(o.content=Array.from(o.node.node.childNodes)),o}e.inheritsLoose(i,t);var s=i.prototype;return s.isLoaded=function(){return this.loaded},s.setCssSize=function(){this.node.setCss(this.selectorSize)},s.complete=function(){return this.node.setCss({width:"",height:""}),this.setCssSize(),Promise.resolve()},s.appendTo=function(e){this.content?this.content.forEach((function(t){e.append(t)})):e.append(this.node)},s.destroy=function(){this.destroyed=!0,this.node=null,this.getPlaceholderSizePromise=null,t.prototype.destroy.call(this)},e.createClass(i,[{key:"selectorSize",get:function(){var e={};return["square","crop"].includes(this.type)?(e.width=this.size,e.height=this.size):"horizontal"===this.orientation?e.height=this.size:e.width=this.size,e}},{key:"placeholderSize",get:function(){var e=this;return this.getPlaceholderSizePromise||(this.getPlaceholderSizePromise=new Promise((function(t){var i,s=e.selectorSize;s.width&&s.height?t(s):e.destroyed?t({width:0,height:0}):e.proportion.then((function(e){i=e})).finally((function(){s.width?s.height=i.height/i.width*s.width:s.width=i.width/i.height*s.height,t(s)}))}))),this.getPlaceholderSizePromise}},{key:"proportion",get:function(){return Promise.resolve(D)}}]),i}(r)),k=function(t){"use strict";function i(e,i,s,n,r,a){var l;return(l=t.call(this)||this).UUID=n,l.options=o.deepExtend({standard:{type:"square",size:70,orientation:"horizontal",watermark:!0},fullscreen:{type:"square",size:70,orientation:"horizontal",watermark:!0},activeClass:"smv-active",placeholderClass:"smv-thumbnail-placeholder",selectorContent:null,disabled:!1},r||{}),l.parentContainer=g(e),l._index=i,l.selector=g(s)||y.$new("div"),l._container=y.$new("div").addClass("smv-item").setCss({display:"inline-block"}),l.placeholder=y.$new("div").addClass(l.options.placeholderClass),l._size={width:0,height:0},l.currentObject=null,l.actived=!1,l._disabled=!1,l._destroyed=!1,l._container.append(l.selector),l.parentContainer.append(l._container),l.options.disabled&&l.disable(),l.infoPromise=a||Promise.resolve(!1),l.state=N,l.initPromise=null,l.init(),l}e.inheritsLoose(i,t);var s=i.prototype;return s.init=function(){var e=this;return this.initPromise||(this.initPromise=new Promise((function(t){e.infoPromise.then((function(){var i,s;e.standard=e.createContent(e.options.standard),e.standard&&e.standard instanceof L&&(i=e.options.standard,s=e.options.fullscreen,!Object.entries(i).some((function(e){var t=e[0];return e[1]!==s[t]})))?e.fullscreen=e.standard:e.fullscreen=e.createContent(e.options.fullscreen,!0),e.selector.append(e.placeholder),e.selector.attr("data-type")||e.selector.setCssProp("font-size",0),e.addEvents(),e.addCustomClick(),t()}))}))),this.initPromise},s.createContent=function(e,t){var i;if("bullets"!==e.type){if(this.options.selectorContent)i=new _(this.options.selectorContent,e.type,e.size,e.orientation);else{var s=g(new Image);i=new L(s,e.type,e.size,e.orientation,e.watermark)}i.parentClass=this}return i},s.addEvents=function(){var e=this;this.on("getSelectorProportion",(function(t){t.data.UUID=e.UUID})),this.on("getSelectorImgUrl",(function(t){t.data.UUID=e.UUID}))},s.addPlaceholder=function(e,t){this._container.attr("data-selector-type",e),this.selector.append(this.placeholder),this.placeholder.setCss(t)},s.toggle=function(e){var t=this;return new Promise((function(i,s){t.init().then((function(){var n,o=Promise.resolve();if(t.state!==e)if(t.state=e,t._disabled)n=o;else{var r=t.standard,a=t.options.standard.type;2===e&&(r=t.fullscreen,a=t.options.fullscreen.type),"bullets"===a?(t.selector.node.innerHTML="",t.currentObject=a,t._container.attr("data-selector-type",a),t.emit("resize"),n=o):(r instanceof L||t._container.attr("data-selector-type",a),n=new Promise((function(i,s){r?r.placeholderSize.then((function(s){if(t.state!==e||t._destroyed)i();else{if(!r.isLoaded()&&!t.options.selectorContent){for(;t.selector.node.firstChild;)t.selector.node.removeChild(t.selector.node.firstChild);t.addPlaceholder(a,s)}i(),r.complete().then((function(){if(t.state===e&&!t._destroyed){for(t._container.attr("data-selector-type",a),t.placeholder.remove();t.selector.node.firstChild;)t.selector.node.removeChild(t.selector.node.firstChild);r.appendTo(t.selector),t.currentObject=r,t.emit("resize")}})).catch((function(){}))}})):i()})))}else n=o;n.then(i).catch(s)}))}))},s.addClick=function(){var e=this;this._container.addEvent(["btnclick","tap"],(function(t){t.stop(),e.emit("selectorAction",{data:e.UUID})}))},s.addCustomClick=function(){if(this.options.selectorContent&&y.$(this.options.selectorContent).tagName===C){var e=g(this.options.selectorContent).node.querySelectorAll("a");Array.from(e).forEach((function(e){y.$(e).addEvent(["btnclick","tap"],(function(t){t.stop(),"#"===y.$(e).attr("href")[0]?(y.W.node.location.hash="",y.W.node.location.hash=y.$(e).attr("href")):y.W.node.open(y.$(e).attr("href"))}))}))}},s.activate=function(){this.actived||(this.actived=!0,this._container.addClass(this.options.activeClass))},s.deactivate=function(){this.actived&&(this.actived=!1,this._container.removeClass(this.options.activeClass))},s.disable=function(){this._disabled||(this._disabled=!0,this._container.attr("disabled","true"),this._container.setCssProp("display","none"),this.deactivate(),this.emit("resize"))},s._toggleForEnable=function(){var e,t;if(this.state!==N&&(e=this.state===A?this.standard||"bullets":this.fullscreen||"bullets"),e!==this.currentObject){var i=this.state;this.state=N,t=this.toggle(i)}else t=Promise.resolve();return t},s.enable=function(){var e=this;this._disabled&&(this._disabled=!1,this._toggleForEnable().then((function(){e._disabled||(e._container.removeAttr("disabled"),e._container.setCssProp("display",""),e.emit("resize"))})))},s.destroy=function(){this._destroyed=!0,this.placeholder.remove(),this.off("getSelectorProportion"),this.off("getSelectorImgUrl"),this.standard&&(this.standard.destroy(),this.standard=null),this.fullscreen&&(this.fullscreen.destroy(),this.fullscreen=null),this._container.removeEvent(["btnclick","tap"]),this._container.remove(),this._container=null,this.parentContainer=null,this.selector=null,t.prototype.destroy.call(this)},e.createClass(i,[{key:"proportion",get:function(){var e=this,t=Promise.resolve();return this._disabled||(this.state===F&&this.fullscreen?t=this.fullscreen.proportion:this.standard&&(t=this.standard.proportion)),new Promise((function(i,s){e.init().then((function(){t.then(i).catch(s)}))}))}},{key:"canActivate",get:function(){return this.options.activated}},{key:"activated",get:function(){return this.actived}},{key:"size",get:function(){return this._size=this._container.size,this._size}},{key:"index",set:function(e){this._index=e},get:function(){return this._index}},{key:"container",get:function(){return this._container}},{key:"pinnedPosition",get:function(){return this.options.pinned}},{key:"destroyed",get:function(){return this._destroyed}},{key:"disabled",get:function(){return this._disabled}}]),i}(r),T=function(e,t){return t?e+="px, 0":e="0, "+e+"px",e},function(t){"use strict";function i(e,i){var s;return(s=t.call(this)||this).options=Object.assign({isStandardGrid:!1,standardStyle:"square",standardSize:70,standardPosition:"bottom",standardWatermark:!0,isFullscreenGrid:!1,fullscreenStyle:"square",fullscreenSize:70,fullscreenPosition:"bottom",fullscreenAutohide:!1,fullscreenWatermark:!0,arrows:!0,activeClass:"smv-active"},i||{}),s.instanceNode=y.$new("div").addClass("smv-selectors").setCss({opacity:0,visibility:"hidden",transition:""}),s.selectorsContainer=y.$new("div").addClass("smv-ss"),s.selectorsScroll=y.$new("div").addClass("smv-scroll").setCss({transform:"translate3d(0, 0, 0)"}),s.controlButton=y.$new("div").addClass("smv-selectors-toggle-switch"),s.selectorsScrollContainer=y.$new("div").addClass("smv-selectors-scroll-container"),s.startPinnedNode=null,s.endPinnedNode=null,s.baseSelectorsList=[],s.pinnedStartList=[],s.pinnedEndList=[],s.isMove=!1,s.currentPosition=0,s.containerSize={width:0,height:0},s.halfContainerSize=0,s.scrollSize={width:0,height:0},s.halfScrollSize=0,s.currentActiveItem=null,s.isShown=!1,s.isControlShown=!0,s.isControlInDoc=!1,s.controlDebounce=null,s.isReady=!1,s.resizeTimeout=null,s.isActionsEnabled=!0,s.isDone=!1,s.isInView=!1,s.state=A,s.arrows=null,s._currentStylePosition=s.options.standardPosition,s.longSide=null,s._shortSide=null,s.currentAxis="x",s.isStarted=!1,s.isDestroyed=!1,e.some((function(e){return!!e.pinned}))&&s.initPinnedBlocks(),s.selectors=e.map((function(e,t){return s.createSelector(e,t)})),s.sortPinnedSelectors(),s.identifyVariables(),s.setContainerCss(),s}e.inheritsLoose(i,t);var n=i.prototype;return n.findSelector=function(e){var t;return null!=(t=this.selectors.find((function(t){return t.UUID===e})))?t:null},n.insertBefore=function(e,t){var i=this.selectors,s=this.selectorsScroll;if(this.hasPinnedSelector){var n,o;if("start"===t.pinnedPosition)i=this.pinnedStartList,s=y.$(null!=(n=null==(o=this.startPinnedNode)?void 0:o.node.firstChild.firstChild)?n:null);else if("end"===t.pinnedPosition){var r,a;i=this.pinnedEndList,s=y.$(null!=(r=null==(a=this.endPinnedNode)?void 0:a.node.firstChild.firstChild)?r:null)}else i=this.baseSelectorsList;e=i.indexOf(t)}var l=null;e+1<i.length&&(l=i[e+1].container),this.hide(),s.node.insertBefore(t.container.node,l?l.node:l)},n.insert=function(e,t){t.pinned&&(this.initPinnedBlocks(),this.appendPinnedBlocks());var i=this.createSelector(t,e);this.isDone&&i.addClick(),this.hide(),this.selectors.splice(e,0,i),this.selectors.forEach((function(e,t){e.index=t})),this.sortPinnedSelectors(),this.insertBefore(e,i),i.toggle(this.state)},n.disable=function(e){var t=this.findSelector(e);t&&(this.currentActiveItem&&this.currentActiveItem===t&&(this.currentActiveItem=null),this.hide(),t.disable())},n.enable=function(e){var t=this.findSelector(e);t&&(this.hide(),t.enable())},n.pickOut=function(e){var t=this.findSelector(e);t&&(t.destroy(),this.selectors.splice(t.index,1),this.selectors.forEach((function(e,t){e.index=t})),this.sortPinnedSelectors())},n.createSelector=function(e,t){var i,s,n=this.selectorsScroll;if("start"===e.pinned)n=null!=(i=null==(s=this.startPinnedNode)?void 0:s.node.firstChild.firstChild)?i:null;else if("end"===e.pinned){var o,r;n=null!=(o=null==(r=this.endPinnedNode)?void 0:r.node.firstChild.firstChild)?o:null}var a=new k(n,t,e.node,e.UUID,{standard:{type:this.options.standardStyle,size:this.options.standardSize,orientation:z(this.options.standardPosition),watermark:this.options.standardWatermark},fullscreen:{type:this.options.fullscreenStyle,size:this.options.fullscreenSize,orientation:z(this.options.fullscreenPosition),watermark:this.options.fullscreenWatermark},activeClass:this.options.activeClass,selectorContent:e.selectorContent,disabled:e.disabled,pinned:e.pinned,activated:e.activated},e.infoPromise);return a.parentClass=this,a},n.addEventsFromSelectors=function(){var e,t=this;this.on("selectorAction",(function(e){e.stopAll(),t.emit("changeSlide",{data:{UUID:e.data}});var i=t.selectors.find((function(t){return t.UUID===e.data}));i!==y.U&&t.activateItem(i)})),this.on("resize",(function(i){i.stopAll(),clearTimeout(e),e=setTimeout((function(){t.onResize()}),16)}))},n.initPinnedBlocks=function(){if(!this.pinnedBlocksInited){var e=function(e){return y.$new("div").addClass(b+e).append(y.$new("div").addClass("smv-ss").append(y.$new("div").addClass("smv-scroll").setCss({transform:"translate3d(0, 0, 0)"})))};this.startPinnedNode=e("-selectors-pinned-start"),this.endPinnedNode=e("-selectors-pinned-end")}},n.appendPinnedBlocks=function(){this.pinnedBlocksInited&&(this.instanceNode.append(this.startPinnedNode),this.instanceNode.append(this.endPinnedNode))},n.sortPinnedSelectors=function(){this.pinnedStartList=this.selectors.filter((function(e){return"start"===e.pinnedPosition})),this.pinnedEndList=this.selectors.filter((function(e){return"end"===e.pinnedPosition})),this.baseSelectorsList=this.selectors.filter((function(e){return!e.pinnedPosition}))},n.init=function(){var e=this;if(this.createArrows(),this.selectorsScrollContainer.append(this.selectorsContainer).appendTo(this.instanceNode),this.appendPinnedBlocks(),this.arrows){this.arrows.hide();var t=this.arrows.nodes;this.selectorsScrollContainer.append(t[0]),this.selectorsScrollContainer.append(t[1])}this.selectorsContainer.append(this.selectorsScroll),this.isShown=!0,this.hide(),this.identifyVariables(),this.addEventsFromSelectors(),this._currentStylePosition||this.instanceNode.setCssProp("display","none"),Promise.all(this.selectors.map((function(e){return e.proportion}))).finally((function(){e.isReady=!0,e.emit("selectorsReady")}))},n.identifyVariables=function(){if(this._currentStylePosition){var e="horizontal"===z(this._currentStylePosition);this.longSide=e?"width":"height",this._shortSide="width"===this.longSide?"height":"width",this.currentAxis=e?"x":"y"}else this.longSide=null,this._shortSide=null},n.changeSelectors=function(e){return Promise.all(this.selectors.map((function(t){return t.toggle(e)})))},n.getSelectorsSize=function(){return this.selectors.filter((function(e){return!e.destroyed})).map((function(e){return e.size}))},n.enableActions=function(){this.isActionsEnabled||(this.isActionsEnabled=!0,this.show(),this.options.fullscreenAutohide&&(this.selectorsState=!0))},n.disableActions=function(){this.isActionsEnabled&&(this.isActionsEnabled=!1,this.hide(),this.controlDebounce&&this.controlDebounce.cancel())},n.show=function(e){if(!this.isShown&&this.isActionsEnabled&&!this.isDestroyed){var t=e?"":"opacity 400ms linear";this.isShown=!0,this.selectorsScroll.setCss({display:"inline-flex"}),this.getSizes(),this.jump(this.activatedItem,!0),this.instanceNode.setCss({opacity:1,visibility:"visible",transition:t})}},n.activateCurrentItemByUUID=function(e){var t=this.findSelector(e);t&&!this.currentActiveItem&&(this.currentActiveItem=t)},n.hide=function(){this.isShown&&(this.isShown=!1,this.instanceNode.setCss({opacity:0,visibility:"hidden",transition:""}))},n.start=function(e){var t=this;!this.isStarted&&this.isInView&&(this.isStarted=!0,this._currentStylePosition?this.changeSelectors(1).then((function(){return s.rootDOM.addMainStyle(e)})).then((function(){t.isDestroyed||(t.getSelectorsSize(),t.done(),t.show())})):this.done())},n.addControl=function(){var e=this;this.isControlInDoc||(this.instanceNode.addEvent(["mouseover","mouseout"],(function(t){var i=t.related;for(i&&(i=g(i));i&&i.node!==e.instanceNode.node&&i.node!==y.D.node.body;)(i=i.node.parentNode)&&(i=g(i));i&&i.node===e.instanceNode.node||e.setControlTimeout("mouseover"===t.type)})),this.controlButton.addEvent(["btnclick","tap"],(function(t){e.setControlTimeout(!0),e.selectorsState=!e.isControlShown})),g(this.instanceNode.node.parentNode).append(this.controlButton),this.controlDebounce=o.debounce((function(){e.selectorsState=!1}),3e3),this.isControlInDoc=!0)},n.removeControl=function(){this.isControlInDoc&&(this.instanceNode.removeEvent(["mouseover","mouseout"]),this.controlDebounce.cancel(),this.isControlShown=!0,this.controlButton.removeEvent(["btnclick","tap"]),this.controlButton.remove(),this.isControlInDoc=!1)},n.setControlTimeout=function(e){this.isControlInDoc&&(this.controlDebounce.cancel(),this.isControlShown&&!e&&this.controlDebounce())},n.inView=function(e,t){this.isInView=e,this.start(t)},n.done=function(){this.isDone||this.isDestroyed||(this.isDone=!0,this.getSizes(),this.selectors.forEach((function(e){e.addClick()})),this.onResize(),this.setDrag(),this.emit("selectorsDone"))},n.activateItem=function(e){var t=this.selectors[e];t&&(this.currentActiveItem&&this.currentActiveItem.deactivate(),!t.disabled&&t.canActivate&&(t.activate(),this.currentActiveItem=t),!t.activated&&this.currentActiveItem&&this.currentActiveItem.activate())},n.createArrows=function(){var e=this;!this.options.arrows||"grid"===this.options.standardStyle&&"grid"===this.options.standardStyle||(this.arrows=new j({orientation:z(this.currentPosition||this.options.fullscreenPosition),customClass:"thumbnails"}),this.arrows.parentClass=this,this.on("arrowAction",(function(t){t.stopAll(),e.jump(t.data.type)})))},n.isGrid=function(){return this.state===F?this.options.isFullscreenGrid:this.options.isStandardGrid},n.calculateContainerScroll=function(){if(this.hasPinnedSelector||this.pinnedBlocksInited){var e=this.instanceNode.size;this.arrows&&this.arrows.hide();var t=e[this.longSide]-(this.startPinnedNode.size[this.longSide]+this.endPinnedNode.size[this.longSide]);t<0&&(t=0),this.scrollSize[this.longSide]<t&&(t=this.scrollSize[this.longSide]),this.selectorsScrollContainer.setCssProp("max-"+this.longSide,t),this.getSizes()}},n.normalizePositionValue=function(e){var t=this.containerSize[this.longSide]-this.scrollSize[this.longSide];return this.arrows&&(this.arrows.disable(),t>=0||this.isGrid()?(this.arrows.hide(),this.getSizes()):this.arrows.isShow||(this.arrows.show(),this.getSizes())),0===t?0:(this.halfScrollSize<=this.halfContainerSize?e=this.halfContainerSize-this.halfScrollSize:(e>=0&&(e=0,this.arrows&&this.arrows.disable("backward")),e<=t&&(e=t,this.arrows&&this.arrows.disable("forward"))),e)},n.findItemPosition=function(t){if(!this.selectors[t]||this.selectors[t].pinnedPosition)return null;if(t=function(e,t){return e<0?e=0:e>t-1&&(e=t-1),e}(t,this.selectors.length),this.hasPinnedSelector){var i=this.baseSelectorsList.indexOf(this.selectors[t]);i<0&&(e.readOnlyError("i"),i=t),t=i}for(var s=this.selectors[t].size[this.longSide]/2,n=0,o=0;o<t;)this.selectors[o]&&(n+=this.selectors[o].size[this.longSide]),o+=1;var r=this.halfContainerSize-(n+s);return this.normalizePositionValue(r)},n.stopMoving=function(){if(this.isMove){var e=o.getMatrix(this.selectorsScroll);e&&(e=e.transform[this.currentAxis],this.currentPosition=e),this.clearAnimation(),this.selectorsScroll.setCssProp("transform","translate3d("+T(this.currentPosition,this.horizontal)+", 0)")}},n.clearAnimation=function(){this.selectorsScroll&&(this.selectorsScroll.removeEvent("transitionend"),this.selectorsScroll.setCssProp("transition","")),this.isMove=!1},n.jump=function(e,t){var i=this.currentPosition;this.stopMoving(),"string"!==y.typeOf(e)&&"number"!==y.typeOf(e)||("string"===y.typeOf(e)?("next"===e?i-=this.containerSize[this.longSide]:i+=this.containerSize[this.longSide],i=this.normalizePositionValue(i)):i=this.findItemPosition(e),null!==i&&this.move(i,null,t))},n.move=function(e,t,i){var s=this;if(t||(t=400),this.currentPosition!==e){this.selectorsScroll.removeEvent("transitionend");var n,o,r,a,l,d={};i||(this.isMove=!0,this.selectorsScroll.addEvent("transitionend",(function(e){e.stop(),s.clearAnimation()})),d.transition="transform "+(n=t,o=this.containerSize[this.longSide],r=Math.abs(e)-Math.abs(this.currentPosition),a=n,l=parseInt(n/3,10),(a=parseInt(Math.abs(r)/o*n,10))<l?a=l:a>n&&(a=n),a+"ms ease")),d.transform="translate3d("+T(e,this.horizontal)+", 0)",this.selectorsScroll.setCss(d),this.currentPosition=e}},n.getSizes=function(){this.containerSize=this.selectorsContainer.size,this.halfContainerSize=this.containerSize[this.longSide]/2,this.scrollSize=this.selectorsScroll.size,this.halfScrollSize=this.scrollSize[this.longSide]/2},n.setDrag=function(){var e,t,i,s,n,o,r,a,l=this,d={},c={x:null,y:null},h=!1,u=0,p=function(t,i){return{x:t-e.left,y:i-e.top}};d.dragstart=function(a){n=l.currentAxis,o="x"===n?"y":"x",r=l.longSide,c={x:a.x,y:a.y},l.containerSize[r]<l.scrollSize[r]&&(h=!0),e=l.selectorsContainer.position,l.stopMoving(),t=p(a.x,a.y)[n],i=l.containerSize[r]-l.scrollSize[r],s=0,a.timeStamp},d.dragend=function(e){var t,n;h&&(h=!1,e.stop(),e.timeStamp,((t=l.currentPosition-((n=s)+n/2))>0||t<i)&&(t=t>0?0:i),t=l.normalizePositionValue(t),l.move(t),a=null),u=0},d.dragmove=function(e){var i,r,d,f,v;u||(u=Math.abs(c[n]-e[n])>Math.abs(c[o]-e[o])?1:2),h&&1===u&&((i=p(e.x,e.y))[n]>i[o]&&(e.stop(),r=t-i[n],l.currentPosition-=r,f=t,v=i[n],d=f>v?"next":"prev",a&&d===a||(s=0),s+=r,t=i[n],a=d),l.selectorsScroll.setCssProp("transform","translate3d("+T(l.currentPosition,l.horizontal)+", 0)")),c={x:e.x,y:e.y}},this.selectorsContainer.addEvent(["mousedrag","touchdrag"],(function(e){d[e.state](e)}))},n.setContainerCss=function(){var e={},t=this.options.standardSize;this.state===F&&(t=this.options.fullscreenSize),e["min-"+this._shortSide]=t+"px",e[this._shortSide]="100%",this.instanceNode.setCss(e)},n.beforeEnterFullscreen=function(){this.hide(),this.state=F,this._currentStylePosition=this.options.fullscreenPosition,this._currentStylePosition||(this.instanceNode.setCssProp("display","none"),g(this.instanceNode.node.parentNode).setCssProp("display","none")),this.identifyVariables()},n.afterEnterFullscreen=function(){var e=this;this._currentStylePosition&&(this.instanceNode.setCssProp("display",""),g(this.instanceNode.node.parentNode).setCssProp("display",""),this.setContainerCss(),this.options.fullscreenAutohide&&(this.addControl(),this.isActionsEnabled&&(this.selectorsState=!0)),this.removeStyleForIE(),this.changeSelectors(2).then((function(){e.getSelectorsSize(),setTimeout((function(){e.show()}),150),e._currentStylePosition&&e.isActionsEnabled&&setTimeout((function(){e.selectorsState=!0}),1e3)})))},n.beforeExitFullscreen=function(){this.hide(),this.state=A,this._currentStylePosition=this.options.standardPosition,this.options.fullscreenAutohide&&this.removeControl(),this._currentStylePosition||(this.instanceNode.setCssProp("display","none"),g(this.instanceNode.node.parentNode).setCssProp("display","none")),this.identifyVariables()},n.afterExitFullscreen=function(){var e=this;this._currentStylePosition&&(this.instanceNode.setCssProp("display",""),g(this.instanceNode.node.parentNode).setCssProp("display",""),this.setContainerCss(),this.removeStyleForIE(),this.changeSelectors(1).then((function(){e.getSelectorsSize(),e.show()})))},n.removeStyleForIE=function(){"ie"===y.browser.uaName&&this.selectorsScroll.setCssProp(this.shortSide,"")},n.removeStyleForIE=function(){"ie"===y.browser.uaName&&this.selectorsScroll.setCssProp(this.shortSide,"")},n.isSelectorsActionEnabled=function(){return this.isActionsEnabled},n.sortSelectors=function(e,t){var i=this;this.selectors=e.map((function(e){return i.selectors.find((function(t){return t.UUID===e}))})),this.selectors.forEach((function(e,t){e.index=t}));for(var s=t-1;s>=0;s--)this.selectorsScroll.node.insertBefore(this.selectors[s].container.node,this.selectorsScroll.node.firstChild)},n.onResize=function(){var e=this;this.isDone&&this._currentStylePosition&&!this.isDestroyed&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((function(){var t=e.activatedItem;if(e.clearAnimation(),"ie"===y.browser.uaName){var i=e.isGrid()?"":e.selectors.reduce((function(t,i){return i.destroyed||(t+=i.size[e.longSide]),t}),0);e.selectorsScroll.setCssProp(e.longSide,i)}e.getSizes(),e.calculateContainerScroll(),e.activateItem(t),e.normalizePositionValue(),e.jump(t,!0),e.show()}),100))},n.destroy=function(){this.isDestroyed=!0,clearTimeout(this.resizeTimeout),this.instanceNode.removeEvent("transitionend"),this.removeControl(),this.controlButton=null,this.off("selectorAction"),this.off("resize"),this.clearAnimation(),this.arrows&&(this.arrows.destroy(),this.arrows=null,this.off("arrowAction")),this.selectors.forEach((function(e){e.destroy()})),this.selectorsScroll.remove(),this.selectorsScroll=null,this.selectorsContainer.remove(),this.selectorsContainer=null,this.instanceNode.remove(),this.instanceNode=null,this.currentActiveItem=null,this.pinnedBlocksInited&&(this.baseSelectorsList=[],this.pinnedStartList=[],this.pinnedEndList=[],this.endPinnedNode=null,this.startPinnedNode=null,this.selectorsScrollContainer=null,this.pinnedStartList=null,this.pinnedEndList=null),t.prototype.destroy.call(this)},e.createClass(i,[{key:"hasPinnedSelector",get:function(){return!(!this.pinnedStartList.length&&!this.pinnedEndList.length)}},{key:"pinnedBlocksInited",get:function(){return!!this.startPinnedNode&&!!this.endPinnedNode}},{key:"activatedItem",get:function(){return this.currentActiveItem?this.currentActiveItem.index:0}},{key:"selectorsState",set:function(e){this.isControlShown=e,this.setControlTimeout(),this.emit("visibility",{action:this.isControlShown?"show":"hide"})}},{key:"node",get:function(){return this.instanceNode}},{key:"horizontal",get:function(){return"horizontal"===z(this._currentStylePosition)}},{key:"currentStylePosition",get:function(){return this.state===F?this.options.fullscreenPosition:this.options.standardPosition}},{key:"shortSide",get:function(){return this._shortSide}}]),i}(r)),Z=(R=function(e){var t=(e=g(e)).attr("data-src");return t?(e.attr("data-src",t.split("?")[0]),e.removeAttr("src")):e.node.src=e.node.src.split("?")[0],e},U=function(t){"use strict";function s(e,s){var n;return(n=t.call(this)||this)._node=g(e),n.instanceOptions=function(e,t){var i=new y.Options(d);return i.fromJSON(t.common.common),i.fromString(t.local.common),i.fromString(e.attr("data-options")||""),y.browser.touchScreen&&y.browser.mobile&&(i.fromJSON(t.common.mobile),i.fromString(t.local.mobile),i.fromString(e.attr("data-mobile-options")||"")),i}(n._node,s),n.option=function(){return arguments.length>1?n.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):n.instanceOptions.get(arguments.length<=0?void 0:arguments[0])},n.type="video",n.player=null,n.state=i.VIDEO.NONE,n.isReady=!1,n.isShown=!1,n.id=null,n.playDebounce=null,n.currentTime=0,n.videoNode=y.$new("div"),n.videoWrapper=y.$new("div").addClass("smv-video").setCss({transition:"opacity .3 linear"}),n.videoWrapper.attr("data-video-type",n.type),n.fullscreen=n.option("controls.fullscreen"),n.hide(),n}e.inheritsLoose(s,t);var n=s.prototype;return n.onBeforeFullscreenIn=function(){this.getCurrentTime(),this.fullscreen=!1},n.onAfterFullscreenIn=function(){},n.onBeforeFullscreenOut=function(){this.getCurrentTime(),this.fullscreen=this.option("controls.fullscreen")},n.onAfterFullscreenOut=function(){},n.getSize=function(){var e=this;return new Promise((function(t){var i=e.videoWrapper.size;i.width&&i.height?t(i):o.videoModule.getAspectRatio(e._node).then((function(e){i.width?i.height=i.width*e:i.width=i.height/e,t(i)})).catch((function(){t(null)}))}))},n.createPlayer=function(e){var t=this;return this.player={ready:!0,play:function(){t.playDebounce()},pause:function(){t.player.player.node.pause()},player:this._node},this.playDebounce=o.debounce((function(){t.player.player.node.play()}),100),this.option("loop")?this.player.player.attr("loop","loop"):this.player.player.removeAttr("loop"),this.player.player.attr("playsinline","playsinline"),this.option("controls.enable")?this.player.player.attr("controls","controls"):this.player.player.removeAttr("controls"),this.autoplay?(this.player.player.volume=0,this.player.player.attr("muted","muted")):this.player.player.volume=this.option("volume")/100,this.player.player.attr("preload",this.option("preload")?"auto":"none"),this.addEvents(),this.emit("slideVideoReady",{data:{type:this.type,error:null}}),Promise.resolve()},n.init=function(){var e=this;if("video"===this.type){var t=this._node.attr("data-src");t&&this._node.attr("src",t),Array.from(this._node.node.children).forEach((function(e){(e=g(e))&&"source"===e.tagName&&(t=e.attr("data-src"))&&(e.attr("src",t),"gecko"===y.browser.engine&&e.node.parentNode.load())})),this.videoNode=this._node}this.id=this.type+"-"+o.generateUUID(),this.videoNode.attr("id",this.id),this.videoWrapper.append(this.videoNode);var i={type:this.type,error:null};o.videoModule.getAPI(this._node).then((function(t){e.createPlayer(t).then((function(){i.error=!1})).catch((function(e){i.error=!!e})).finally((function(){e.isReady=!0}))})).catch((function(t){i.error=!0,e.emit("slideVideoReady",{data:i})}))},n.addEvents=function(){var e=this;this.player.player.addEvent("play",(function(t){t.stop(),e.state=i.VIDEO.PLAY,e.emit("slideVideoPlay",{data:{type:e.type}})})),this.player.player.addEvent("pause",(function(t){t.stop(),e.state=i.VIDEO.PAUSE,e.emit("slideVideoPause",{data:{type:e.type}})})),this.player.player.addEvent("ended",(function(t){t.stop(),e.state=i.VIDEO.PAUSE,e.emit("slideVideoEnd",{data:{type:e.type}})}))},n.play=function(){this.player&&this.player.ready&&(this.setCurrentTime(),this.player.play())},n.pause=function(){this.player&&this.player.ready&&this.player.pause()},n.getCurrentTime=function(){this.player&&this.player.player&&(this.currentTime=this.player.player.currentTime)},n.setCurrentTime=function(){this.player&&this.player.ready&&(this.player.player.currentTime=this.currentTime)},n.show=function(){this.isShown=!0,this.videoWrapper.setCssProp("opacity",1)},n.hide=function(){this.isShown=!1,this.videoWrapper.setCssProp("opacity",0)},n.destroy=function(){this.playDebounce&&(this.playDebounce.cancel(),this.playDebounce=null),this.pause(),this.videoWrapper.remove(),this._node=R(this._node),"video"===this.type&&Array.from(this._node.node.children).forEach((function(e){"source"===g(e).tagName&&R(e)})),t.prototype.destroy.call(this)},e.createClass(s,[{key:"autoplay",get:function(){return this.option("autoplay")}},{key:"node",get:function(){return this.videoWrapper}},{key:"preStart",get:function(){return this.state===i.VIDEO.NONE}},{key:"paused",get:function(){return this.state===i.VIDEO.PAUSE}}]),s}(r),{HTMLVideo:U,YouTubeVideo:function(t){"use strict";function s(e,i){var s;return(s=t.call(this,e,i)||this).type="youtube",s.playerState=-1,s.videoWrapper.attr("data-video-type",s.type),s.apiPlayer=null,s}e.inheritsLoose(s,t);var n=s.prototype;return n.setCurrentTime=function(){this.player&&this.player.ready&&this.player.player.seekTo(this.currentTime)},n.getCurrentTime=function(){this.player&&this.player.player&&(this.player.player.getCurrentTime?this.currentTime=this.player.player.getCurrentTime():this.currentTime=0)},n.destroyVideoPlayer=function(){this.getCurrentTime(),this.player&&this.player.player&&(this.player.ready=!1,this.player.player.destroy()),this.playerState=-1},n.onBeforeFullscreenIn=function(){this.fullscreen=!1,this.destroyVideoPlayer()},n.onAfterFullscreenIn=function(){this.createPlayer(this.apiPlayer)},n.onBeforeFullscreenOut=function(){this.fullscreen=this.option("controls.fullscreen"),this.destroyVideoPlayer()},n.onAfterFullscreenOut=function(){this.createPlayer(this.apiPlayer)},n.createPlayer=function(e){var t=this;return this.apiPlayer=e,new Promise((function(i,s){var n=o.videoModule.getId(t._node);t.player={ready:!1,play:function(){t.player.player.playVideo()},pause:function(){t.player.player.pauseVideo()},player:new e.Player(t.id,{videoId:n,playerVars:{playlist:n,fs:t.fullscreen?1:0,rel:0,loop:t.option("loop")?1:0,autoplay:0,playsinline:1,controls:t.option("controls.enable")?1:0},events:{onReady:function(){t.playerState=-1,t.player.ready=!0,t.player.player.setVolume(t.option("volume")),t.emit("slideVideoReady",{data:{type:t.type,error:null}}),i()},onError:function(e){100===e.data&&(t.player=null),t.emit("slideVideoReady",{data:{type:t.type,error:!0}}),s(!0)},onStateChange:t.addEvents.bind(t)}})}}))},n.addEvents=function(e){var t=(e.target||e.target).getPlayerState();switch(this.playerState=t,this.state===i.VIDEO.PLAY&&(this.state=i.VIDEO.PAUSE),t){case-1:break;case 0:this.option("loop")||this.player.pause(),this.emit("slideVideoEnd",{data:{type:this.type}});break;case 1:this.state=i.VIDEO.PLAY,this.emit("slideVideoPlay",{data:{type:this.type}});break;case 2:this.state=i.VIDEO.PAUSE,this.emit("slideVideoPause",{data:{type:this.type}})}},n.destroy=function(){t.prototype.destroy.call(this),this.player&&this.player.player&&(this.player.player.destroy(),this.player.player=null)},s}(U),VimeoVideo:function(t){"use strict";function s(e,i){var s;return(s=t.call(this,e,i)||this).type="vimeo",s.apiPlayer=null,s.videoWrapper.attr("data-video-type",s.type),s}e.inheritsLoose(s,t);var n=s.prototype;return n.createPlayer=function(e){var t=this;return this.apiPlayer=e,new Promise((function(i,s){if(t.videoNode.attr("data-vimeo-id",o.videoModule.getId(t._node)),e.Player){var n=t.videoNode.attr("data-src");n&&t.videoNode.attr("src",n);var r={id:o.videoModule.getId(t._node),loop:t.option("loop"),controls:t.option("controls.enable"),speed:t.option("controls.speed")};t.player={ready:!1,play:function(){t.player.player.setVolume(0),t.player.player.play()},pause:function(){t.player.player.pause()},player:new e.Player(t.videoNode.node,r)},t.addEvents(i)}else s(!0)}))},n.destroyVideoPlayer=function(){this.player&&this.player.player&&(this.player.ready=!1,this.player.player.destroy())},n.play=function(){this.player&&this.player.ready&&(this.setCurrentTime(),this.player.play())},n.onBeforeFullscreenIn=function(){this.destroyVideoPlayer()},n.onAfterFullscreenIn=function(){this.createPlayer(this.apiPlayer)},n.onBeforeFullscreenOut=function(){this.destroyVideoPlayer()},n.onAfterFullscreenOut=function(){this.createPlayer(this.apiPlayer)},n.getCurrentTime=function(){},n.setCurrentTime=function(){this.player&&this.player.ready&&this.player.player.setCurrentTime(this.currentTime)},n.addEvents=function(e){var t=this;this.player.player.on("play",(function(){t.state=i.VIDEO.PLAY,t.emit("slideVideoPlay",{data:{type:t.type}})})),this.player.player.on("pause",(function(){t.state=i.VIDEO.PAUSE,t.emit("slideVideoPause",{data:{type:t.type}})})),this.player.player.on("ended",(function(){t.state=i.VIDEO.PAUSE,t.emit("slideVideoEnd",{data:{type:t.type}})})),this.player.player.on("loaded",(function(){})),this.player.player.on("timeupdate",(function(e){t.currentTime=e.seconds})),this.player.player?this.player.player.ready().then((function(){t.player.ready=!0,t.state===i.VIDEO.PLAY&&(t.state=i.VIDEO.PAUSE),t.player.player.setVolume(0),t.emit("slideVideoReady",{data:{type:t.type,error:null}}),e()})):this.emit("slideVideoReady",{data:{type:this.type,error:new Error("Player does not exist.")}})},n.destroy=function(){t.prototype.destroy.call(this),this.videoNode.remove(),this.videoNode=null,this.videoWrapper.remove(),this.videoWrapper=null,this.player&&this.player.player&&(this.player.player.destroy(),this.player.player=null),this._node=null},s}(U)}),J=(B="smv-can-zoom",V={top:0,left:0,width:"100%",height:"100%"},M=function(e,t){return new Promise((function(i){if(e=g(e),void 0===t&&(t=10),t>0){var s=e.size;s.width&&s.height?i(s):setTimeout((function(){M(e,t-=1).then(i)}),32)}else i(null)}))},W=function(e){var t={type:"node",data:null};if(o.videoModule.isVideo(e))t.type=o.videoModule.getType(e),t.type||(t.data=y.$new("div"));else{var i,s;if("img"===g(e).tagName)i=e;else try{i=e.getElementsByTagName("img")[0]}catch(e){}i&&(s=o.sliderLib.getSrc(g(i).attr("src"))||o.sliderLib.getSrc(g(i).attr("data-src"))),s?(t.type="img",t.data=s):(i=e.cloneNode?e.cloneNode(!0):y.$new("div"),t.data=i)}return t},H=function(e){var t=g(e.node.querySelector(C));return t||(t=e.tagName===C?e:null),t},function(t){"use strict";function s(n,o,r,a){var l;(l=t.call(this)||this).$J_UUID=y.$uuid(e.assertThisInitialized(l)),l.groups=(g(n).attr("data-group")||"").split(/\s*(?:,|$)\s*/);var d=J.parse(n);l.id=d.id,l._enabled=d.enabled,l.type=d.type,l.url=d.url,l.slideContent=g(n),l._index=o,l.isCustomAdded=a||!1,l._options={},l.options=r,l.instanceNode=y.$new("div").addClass("smv-slide").setCss({position:"absolute"}),l.instanceNode.setCss(V),l.contentWrapper=y.$new("div").addClass("smv-content"),l.contentWrapper.setCss(V),l.fullscreenOnlyNode=null,l.selector={UUID:l.$J_UUID,isCustom:!1,node:H(l.slideContent),isSirv:!1,isVideo:!1,selectorContent:null,size:{width:0,height:0},src:null,srcset:null,pinned:null,activated:!0,infoPromise:null,isStatic:!1},l.selector.isStatic=s.checkNonSirv(l.selector.node),l.selector.pinned=s.findPinnedSelectorSide(l.slideContent.node.querySelector(C)||l.slideContent.node),l.selector.isCustom=!!l.selector.node,l.thumbnailReferrerPolicy=l.getSelectorReferrerPolicy(),l.availableSlide=!0,l.isStartedFullInit=!1,l.fullscreenState=i.FULLSCREEN.CLOSED,l.isStarted=!1,l.sirvService=null,l.componentSize=null,l.inView=!1,l.isActive=!1,l.isReady=!1,l.video=null,l.isVideoPaused=!1,l.isVideoReady=!1,l.slideShownBy=i.SLIDE_SHOWN_BY.NONE,l.componentLoader=null,l.infoSize=null,l.sizePromise=null,l.isInDom=0,l.multiImages=[],l.lastOriginNode=null,l.dataThumbnailImage=l.getThumbnailImage(),l.dataThumbnailHtml=l.slideContent.attr("data-thumbnail-html"),l.dataHiddenSelector=l.slideContent.hasAttribute("data-hidden-selector"),l.swipeDisabled=l.slideContent.hasAttribute("data-swipe-disabled"),l.spinWasInited=!1,l.socialbuttons=null,l.getVideoThumbnailPromise=null,l.isPlaceholder=!1,l.customThumbnailImageClassPromise=null;var c=e.assertThisInitialized(l);return l._api={get index(){return c.index},get component(){return c.sirvService?i.SLIDE.NAMES[c.sirvService.type]:"unknown"},get groups(){return c.groups},get thumbnail(){var e,t;return null!=(e=null==(t=c.selector.node)?void 0:t.node)?e:null},isDisabled:function(){return!c.enabled},isActive:function(){return c.isActive},getSelector:function(){return this.thumbnail}},l.sendEventCloseFullscreenByClick=function(e){e.stop(),l.emit("goToFullscreenOut")},l.beforeParseSlide(),l.parseSlide(),l}e.inheritsLoose(s,t),s.findPinnedSelectorSide=function(e){if(e.hasAttribute("data-pinned")){var t=y.$(e).attr("data-pinned");return"start"!==t?"end":t}return null},s.parse=function(e){e=g(e);var t={};t.node=e.node,t.id=e.attr("data-id");var s=null,n=i.SLIDE.TYPES.HTML,r=!0;if(J.isSirvComponent(e)){var a=o.getSirvType(e);n=a.type,s=a.imgSrc}else o.videoModule.isVideo(e)?(n=i.SLIDE.TYPES.VIDEO,s=o.videoModule.getSrc(e)):("img"===e.tagName||"div"===e.tagName&&e.attr("data-src"))&&(n=i.SLIDE.TYPES.IMAGE,s=e.attr("data-src")||e.attr("src"));t.type=n,t.url=s;var l=e.node.getAttribute("data-disabled");return(l&&"false"!==l||""===l)&&(r=!1),t.enabled=r,t},s.checkNonSirv=function(e){return!(!e||"static"!==g(e).attr("data-type"))},s.isSirvComponent=function(e){var t=(e=g(e)).attr("data-src"),i=e.attr("src"),s=J.checkNonSirv(e),n=e.tagName,r=e.fetch("view-content");return!(s||!(r||"div"===n&&!["youtube","vimeo"].includes(o.videoModule.getType(t))&&t||"img"===n&&(t||i)))},s.hasComponent=function(e){return I.isExist(e)};var r=s.prototype;return r.isSwipeDisabled=function(){return this.swipeDisabled},r.getThumbnailImage=function(){var e=this.slideContent.attr("data-thumbnail-image");if(!e&&this.selector.isCustom&&!(e=this.selector.node.attr("data-src"))){var t=this.selector.node.node.children;1===t.length&&"img"===g(t[0]).tagName&&(e=g(t[0]).attr("data-src")||g(t[0]).attr("src"))}return e},r.startGettingInfo=function(){this.sirv&&this.sirvService.startGettingInfo()},r.loadContent=function(){var e=this;this.sirv&&this.getSlideSize().then((function(t){e.isInDom&&e.sirvService.loadContent()})).catch((function(e){}))},r.loadThumbnail=function(){var e=this;this.sirv&&this.getSlideSize().then((function(t){e.isInDom&&e.sirvService.loadThumbnail()})).catch((function(e){}))},r.belongsTo=function(e){var t=this,i=!1;return e&&("string"===y.typeOf(e)&&(e=[e]),i=e.some((function(e){return t.groups.includes(e)}))),i},r.addGroup=function(e){var t=!1;return e&&"string"===y.typeOf(e)&&!this.groups.includes(e)&&(t=!0,this.groups.push(e)),t},r.removeGroup=function(e){var t=!1;if(e&&"string"===y.typeOf(e)){var i=this.groups.indexOf(e);i>-1&&(t=!0,this.groups.splice(i,1))}return t},r.single=function(e){this.sirv&&this.broadcast("isSingleSlide",{data:{isSingle:e}})},r.checkReadiness=function(e,t){var s=!1;return this.sirv&&i.SLIDE.NAMES[this.sirvService.type]===t&&(s="init"===e?this.spinWasInited:this.isReady),s},r.sendReadyEvent=function(e,t){this.sirv&&i.SLIDE.NAMES[this.sirvService.type]===t&&this.sirvService.sendEvent(e)},r.createFullscreenOnlyScreen=function(){var e=this;this._options.fullscreenOnly&&(this.fullscreenOnlyNode=y.$new("div").addClass("smv-fullscreen-always"),this.fullscreenOnlyNode.addEvent(["btnclick","tap"],(function(t){t.stop(),e.emit("goToFullscreen")})),this.createPinchEvent(this.fullscreenOnlyNode),this.instanceNode.append(this.fullscreenOnlyNode,"top"))},r.createPinchEvent=function(e){var t=this;y.browser.touchScreen&&e.addEvent("pinch",(function(e){e.stop(),"pinchend"===e.state&&0===t.fullscreenState&&e.scale>=2&&t.emit("goToFullscreen")}))},r.disable=function(){this._enabled=!1,this.video&&this.video.pause(),this.componentLoader&&this.componentLoader.hide(!0)},r.enable=function(){this._enabled=!0},r.dragEvent=function(e){this.sirvService&&this.broadcast("dragEvent",{data:{type:e}})},r.startFullInit=function(e){this.isStartedFullInit||(this.isStartedFullInit=!0,e&&(this.options=e),this.sirvService&&this.sirvService.startFullInit(e?this._options:null),this.hide(),this.instanceNode.append(this.contentWrapper),this.sirv||this.appendToDOM())},r.createComponentLoader=function(){this.componentLoader||(this.componentLoader=new l(this.instanceNode),this.componentLoader.show())},r.setFullscreenEvents=function(){var e=this;this.on("beforeFullscreenIn",(function(t){e.fullscreenState===i.FULLSCREEN.OPENING?t.stopPropagation():(e.fullscreenState=i.FULLSCREEN.OPENING,e.video&&(e.isVideoPaused=e.video.paused,e.video.onBeforeFullscreenIn())),e.fullscreenOnlyNode&&e.fullscreenOnlyNode.setCssProp("display","none"),e.addEventCloseFullscreenByClick()})),this.on("afterFullscreenIn",(function(t){e.socialbuttons&&e.socialbuttons.closeButtons(),e.fullscreenState===i.FULLSCREEN.OPENED?t.stopPropagation():(e.fullscreenState=i.FULLSCREEN.OPENED,e.sirv&&e.componentLoader.isHiding()&&e.componentLoader.hide(!0),e.video&&(e.video.onAfterFullscreenIn(),!e.video.autoplay&&e.video.preStart||e.playVideo()))})),this.on("beforeFullscreenOut",(function(t){e.socialbuttons&&e.socialbuttons.closeButtons(),e.fullscreenState===i.FULLSCREEN.CLOSING?t.stopPropagation():(e.fullscreenState=i.FULLSCREEN.CLOSING,e.video&&(e.isVideoPaused=e.video.paused,e.video.onBeforeFullscreenOut())),e.fullscreenOnlyNode&&e.fullscreenOnlyNode.setCssProp("display","")})),this.on("afterFullscreenOut",(function(t){e.fullscreenState===i.FULLSCREEN.CLOSED?t.stopPropagation():(e.fullscreenState=i.FULLSCREEN.CLOSED,e.video&&(e.video.onAfterFullscreenOut(),!e.video.autoplay&&e.video.preStart||e.playVideo())),e.removeEventCloseFullscreeByClick()})),this.on("inView",(function(t){e.inView=t.data,e.video&&(e.inView?(!e.isVideoPaused&&!e.video.preStart||e.video.autoplay)&&e.playVideo():(e.isVideoPaused=e.video.paused,e.video.getCurrentTime(),e.video.pause()))}))},r.addEventCloseFullscreenByClick=function(){this._options.fullscreenOnly&&this.type===i.SLIDE.TYPES.IMAGE&&(this.contentWrapper.addEvent(["btnclick","tap"],this.sendEventCloseFullscreenByClick),this.slideContent.addEvent(["btnclick","tap"],this.sendEventCloseFullscreenByClick))},r.removeEventCloseFullscreeByClick=function(){this._options.fullscreenOnly&&this.type===i.SLIDE.TYPES.IMAGE&&(this.contentWrapper.removeEvent(["btnclick","tap"],this.sendEventCloseFullscreenByClick),this.slideContent.removeEvent(["btnclick","tap"],this.sendEventCloseFullscreenByClick))},r.zoomIn=function(e,t){this.broadcast("zoomUp",{data:{x:e,y:t}})},r.zoomOut=function(e,t){this.broadcast("zoomDown",{data:{x:e,y:t}})},r.mouseAction=function(e,t){this.sirv&&this.broadcast("mouseAction",{data:{type:e,originEvent:t}})},r.createSlideApi=function(){this.sirv&&!this.isStarted&&(this.isStarted=!0,this.api[i.SLIDE.NAMES[this.sirvService.type]]=this.sirvService.getData())},r.beforeShow=function(){this.isActive=!0,this.show(),this.sirv&&this.sirvService.activate(),this.createSlideApi()},r.afterShow=function(e){this.slideShownBy=e||i.SLIDE_SHOWN_BY.NONE,this.broadcast("startActions",{who:this.slideShownBy}),this.video&&this.video.autoplay&&this.playVideo()},r.beforeHide=function(){this.video?this.video.pause():this.broadcast("stopActions")},r.afterHide=function(){this.slideShownBy=i.SLIDE_SHOWN_BY.NONE,this.isActive=!1,this.hide(),this.sirv&&this.sirvService.deactivate(),this.socialbuttons&&this.socialbuttons.closeButtons()},r.show=function(){this.instanceNode.removeClass("smv-hidden"),this.instanceNode.addClass("smv-shown")},r.hide=function(){this.instanceNode.removeClass("smv-shown"),this.instanceNode.addClass("smv-hidden")},r.startTool=function(e,t,i){var s=this;this.sirv?this.getSlideSize().then((function(n){s.isInDom&&s.sirvService?(s.sirvService.startTool(e||s.isActive,t,i),s.addSocialButtons()):s.emit("contentLoaded",{data:{slide:{index:s._index}}})})).catch((function(e){})):this.getSlideSize().then((function(){s.emit("contentLoaded",{data:{slide:{index:s._index}}})}))},r.getSlideSize=function(){var e=this;return this.sizePromise||(this.sizePromise=new Promise((function(t,s){if(e.sirv){var n={UUID:e.$J_UUID};e.sirvService.getInfoSize().then((function(i){!e.infoSize&&i.size&&(e.infoSize=i.size),n.size=e.infoSize,t(n)})).catch((function(o){if(n.error=!0,e.sirvService){var r=e.sirvService.type;if(e.removeSirvService(),o&&o.error&&o.error.status&&404===o.error.status)n.error=o.error,s(n);else if(o&&("changeSpinToImage"===o.error||r===i.SLIDE.TYPES.IMAGE||o.isPlaceholder)){if(e.isPlaceholder=o.isPlaceholder,r===i.SLIDE.TYPES.IMAGE){e.isInDom=0,e.appendToDOM();var a=W(e.slideContent.node);e.selector.isCustom||(e.selector.src=a?a.data:null,e.selector.isSirv=!1)}else e.changeSpinToImage();var l=e.sizePromise;e.sizePromise=null;var d=e.getSlideSize();e.sizePromise=l,d.then(t).catch(s)}else n.error={status:404},s(n)}else n.error={status:404},s(n)})).finally((function(){e.isCustomAdded&&e.emit("infoReady",{data:{index:e._index}})}))}else{var r,a;if("img"===e.slideContent.tagName)r=e.slideContent.node;else try{r=e.slideContent.node.getElementsByTagName("img")[0]}catch(e){}r&&((a=o.sliderLib.getSrc(g(r).attr("src")))||(a=o.sliderLib.getSrc(g(r).attr("data-src")))),a?o.loadImage(a).then((function(i){e.infoSize=i.size,t({size:e.infoSize,UUID:e.$J_UUID})})).catch((function(i){t({size:e.infoSize,UUID:e.$J_UUID,error:{status:404}})})):e.video?e.video.getSize().then((function(i){e.infoSize=i||{width:0,height:0},t({size:e.infoSize,UUID:e.$J_UUID})})).catch((function(t){s({size:e.infoSize,UUID:e.$J_UUID,error:t})})):M(e.slideContent.node).then((function(i){e.infoSize=i||{width:0,height:0},t({size:e.infoSize,UUID:e.$J_UUID})})).catch((function(t){s({size:e.infoSize,UUID:e.$J_UUID,error:t})}))}}))),this.sizePromise},r.removeSirvService=function(){this.infoSize=null,this.slideContent&&this.slideContent.remove(),this.selector.node&&this.selector.node.removeAttr("data-type"),this.sirvService&&(this.sirvService.destroy(),this.sirvService=null),this.selector.isSirv=!1,this.off("stats"),this.off("componentEvent"),this.off("beforeFullscreenIn"),this.off("afterFullscreenIn"),this.off("beforeFullscreenOut"),this.off("afterFullscreenOut"),this.componentLoader&&(this.componentLoader.hide(!0),this.componentLoader.destroy(),this.componentLoader=null),this.fullscreenOnlyNode&&(this.fullscreenOnlyNode.kill(),this.fullscreenOnlyNode=null)},r.changeSpinToImage=function(){if(this.slideContent.removeClass("smv-component"),this.contentWrapper.removeClass("smv-content-"+i.SLIDE.NAMES[this.typeOfSlide]),this.lastOriginNode=this.slideContent,this.slideContent=y.$new("img",{"data-src":this.slideContent.attr("data-src")}),this.slideContent.addClass("smv-component"),this.parseSlide(),this.isInDom=0,this.appendToDOM(),this.isPlaceholder){var e=W(this.slideContent);this.selector.isCustom||(this.selector.src=e?e.data:null)}this.selector.node&&!this.selector.isCustom&&this.selector.node.attr("data-type",i.SLIDE.NAMES[this.typeOfSlide]),this.isStartedFullInit&&(this.isStartedFullInit=!1,this.startFullInit())},r.setSirvEvents=function(){var e=this;this.on("stats",(function(t){t.stopEmptyEvent(),t.data.index=e._index})),this.on("componentEvent",(function(t){t.stopEmptyEvent();var s=t.data.data;s.type=t.data.type,s.node=e.slideContent,"ready"===t.data.type&&(e.isReady=!0),t.data.slide=e.api,t.data.componentEventData=s,t.data.component===i.SLIDE.NAMES[i.SLIDE.TYPES.SPIN]?"init"===t.data.type&&(e.componentLoader.hide(),e.spinWasInited=!0,e.selector.node&&e.selector.node.addClass({row:"spin-x",col:"spin-y","multi-row":"spin-xy"}[e.sirvService.getSpinOrientation()]||"")):"ready"===t.data.type&&e.componentLoader.hide(),"ready"===t.data.type&&["spin","zoom"].includes(t.data.component)&&e.sirvService.isZoomSizeExist()&&e.contentWrapper.addClass(B)}))},r.addSocialButtons=function(){var e=this;if(this.validateComponentSocialButton()){var t=["facebook","twitter","linkedin","reddit","tumblr","pinterest","telegram"],i={};t.forEach((function(t){i[t]=e._options["sb"+y.camelize("-"+t)]}));var s=SocialButtons.getDataImage(),n={};t.forEach((function(t){n[t]=e.getLinkSocialButton(s[t],i[t])})),this.socialbuttons=new SocialButtons({text:this.slideContent.attr("alt"),link:n,title:this.slideContent.attr("title")},i,this.instanceNode)}},r.validateComponentSocialButton=function(){return!(!this._options.sbEnable||!SocialButtons||this.socialbuttons||!(this.sirv&&this.sirvService.type!==i.SLIDE.TYPES.VIDEO||this.video&&"video"!==this.video.type||"img"===this.slideContent.tagName))},r.getLinkSocialButton=function(e,t,s){var n=null;return s&&(n=this.sirv?this.sirvService.getSocialButtonData(e,this.api.component===i.SLIDE.NAMES[i.SLIDE.TYPES.SPIN]):"iframe"===this.slideContent.tagName?this.video.node.attr("data-src"):this.slideContent.attr("data-src")),n},r.searchImagesInHtmlContent=function(){var e=this,t=!1,i=Array.from(this.slideContent.node.querySelectorAll("img"));return i.length&&(t=!0,this.multiImages=i,i.forEach((function(t,i){var s=!J.checkNonSirv(t);s&&(e.sirvService?e.sirvService.push(t):(e.setSirvEvents(),e.selector.isSirv=!0,e.sirvService=new I(t,e._options,{quality:e._options.quality,hdQuality:e._options.hdQuality,isHDQualitySet:e._options.isHDQualitySet,always:e._options.fullscreenOnly,isFullscreen:e._options.isFullscreen,nativeFullscreen:e._options.nativeFullscreen}),e.sirvService.parentClass=e,e.sirvService.start(),e.createSlideApi())),e.multiImages.push({isSirv:s,node:t,src:g(t).attr("src"),datasrc:g(t).attr("data-src")})}))),t},r.isCustomSlideEmpty=function(){if(this.customSelector){var e=this.slideContent.node.querySelector(C);if(e){y.$(e).remove();var t=Array.from(this.slideContent.node.children).length;if(this.slideContent.append(e),J.isSirvComponent(this.slideContent)&&J.hasComponent(this.slideContent)&&!this.isPlaceholder||t||o.videoModule.isVideo(this.slideContent))return!1}}return!0},r.beforeParseSlide=function(){this.customSelector&&(this.isCustomSlideEmpty()&&(this.availableSlide=!1,this.selector.activated=!1),this.selector.node.remove())},r.createImgFromDiv=function(){if("div"===this.slideContent.tagName&&this.type===i.SLIDE.TYPES.IMAGE){var e=this.slideContent;this.slideContent=y.$new("img"),this.slideContent.attr("data-src",this.url);var t=e.attr("alt");t&&this.slideContent.attr("alt",t),(t=e.attr("title"))&&this.slideContent.attr("title",t),(t=e.attr("data-alt"))&&this.slideContent.attr("data-alt",t),(t=e.attr("data-referrerpolicy"))&&this.slideContent.attr("data-referrerpolicy",t)}},r.parseSlide=function(){J.isSirvComponent(this.slideContent)&&J.hasComponent(this.slideContent)&&!this.isPlaceholder?(this.setSirvEvents(),this.createImgFromDiv(),this.sirvService=new I(this.slideContent.node,this._options,{quality:this._options.quality,hdQuality:this._options.hdQuality,isHDQualitySet:this._options.isHDQualitySet,always:this._options.fullscreenOnly,isFullscreen:this._options.isFullscreen,nativeFullscreen:this._options.nativeFullscreen}),this.sirvService.parentClass=this,this.selector.isSirv=!0,this.sirvService.start(),this.createSlideApi(),this.selector.isVideo=this.sirvService.type===i.SLIDE.TYPES.VIDEO,this.contentWrapper.addClass("smv-content-"+i.SLIDE.NAMES[this.typeOfSlide])):(this.createImgFromDiv(),this.searchImagesInHtmlContent(),o.videoModule.isVideo(this.slideContent)&&(this.selector.isVideo=!0,this.initVideo(),this.contentWrapper.addClass("smv-content-video"))),(this.dataThumbnailImage||this.dataThumbnailHtml)&&(this.selector.isSirv=!1)},r.appendToDOM=function(){this.isInDom||(this.isInDom=1,this.createFullscreenOnlyScreen(),this.sirv||this.video?(this.createComponentLoader(),this.video?this.contentWrapper.append(this.video.node):this.contentWrapper.append(this.slideContent)):("img"===this.slideContent.tagName&&(this.contentWrapper.addClass("smv-slide-img"),o.sliderLib.getSrc(this.slideContent.attr("src"))||this.slideContent.attr("src",this.slideContent.attr("data-src"))),this.multiImages.length&&this.multiImages.forEach((function(e){!e.src&&e.datasrc&&g(e.node).attr("src",e.datasrc)})),this.contentWrapper.append(this.slideContent)),this.setFullscreenEvents())},r.initVideoPlayer=function(){this.video?this.video.init():this.sirv&&this.sirvService.type===i.SLIDE.TYPES.VIDEO&&this.sirvService.loadVideoSources()},r.secondSelectorClick=function(){this.sirv?this.broadcast("secondSelectorClick",{data:{slideIndex:this._index}}):this.video&&this.video.pause()},r.isSirvSelector=function(){return!this.selector.isCustom&&this.sirv&&this.sirvService.type!==i.SLIDE.TYPES.VIDEO},r.getSelectorProportion=function(){var e=this;return this.dataThumbnailImage?new Promise((function(t,i){e.getResponsiveImage().then((function(){return t(Object.assign({},e.selector))})).catch((function(s){o.loadImage(e.dataThumbnailImage).then((function(i){e.selector.size=i.size,t(Object.assign({},e.selector))})).catch((function(e){i(e)}))}))})):this.video?this.getNonSirvVideoThumbnail():this.getSlideSize()},r.getSelectorReferrerPolicy=function(){var e="no-referrer-when-downgrade";if(this.selector.isCustom){if(this.selector.node.hasAttribute("data-referrerpolicy"))return this.selector.node.attr("data-referrerpolicy");var t=Array.from(this.selector.node.node.children).filter((function(e){return"img"===g(e).tagName}));if(1===t.length)return g(t[0]).attr("referrerpolicy")||e}return this.slideContent.attr("data-referrerpolicy")||this.slideContent.attr("referrerpolicy")||e},r.getResponsiveImage=function(){var e=this;return this.customThumbnailImageClassPromise||(this.customThumbnailImageClassPromise=new Promise((function(t,i){var s=new n(e.dataThumbnailImage);s.loadInfo().then((function(i){e.selector.isSirv=!0,e.selector.size=s.originSize,t(s)})).catch(i)}))),this.customThumbnailImageClassPromise},r.getSirvThumbnailForCustomSelector=function(e){var t=this;return new Promise((function(i,s){t.getResponsiveImage().then((function(s){var n=s.getThumbnail(e);n.referrerpolicy=t.thumbnailReferrerPolicy,i(n)})).catch(s)}))},r.getSelectorImgUrl=function(e,t,i,s){var n=this,o={crop:i,watermark:s};t.width&&(o.width=t.width),t.height&&(o.height=t.height);var r=function(e){e.src&&(n.selector.src=e.src),e.srcset&&(n.selector.srcset=e.srcset);var t=Object.assign({},e);return t=Object.assign(t,n.selector)};return new Promise((function(e,t){var i=function(){n.selector.isCustom&&n.dataThumbnailImage?n.selector.isStatic?e(Object.assign({},n.selector)):n.getSirvThumbnailForCustomSelector(o).then((function(t){return e(r(t))})).catch((function(){return e(Object.assign({},n.selector))})):"img"===n.slideContent.tagName||n.multiImages.length?e(Object.assign({},n.selector)):n.video&&n.getNonSirvVideoThumbnail().then(e).catch(t)};n.sirv?n.sirvService.getInfoSize().then((function(i){n.selector.isCustom?n.selector.isStatic?e(Object.assign({},n.selector)):n.getSirvThumbnailForCustomSelector(o).then((function(t){return e(r(t))})).catch((function(){return e(Object.assign({},n.selector))})):n.sirvService.getSelectorImgUrl(o).then((function(t){t.referrerpolicy=n.thumbnailReferrerPolicy,e(r(t))})).catch(t)})).catch((function(){n.selector.isCustom?i():t()})):i()}))},r.getNonSirvVideoThumbnail=function(){var e=this;return this.getVideoThumbnailPromise||(this.getVideoThumbnailPromise=new Promise((function(t,i){o.videoModule.getImageSrc(e.slideContent,!0).then((function(i){e.selector.isCustom||(e.selector.src=i.thumbnail.url,e.selector.size={width:i.thumbnail.width,height:i.thumbnail.height}),t(Object.assign({},e.selector))})).catch((function(t){t&&!0!==t?t.UUID=e.$J_UUID:t={UUID:e.$J_UUID},i(t)}))}))),this.getVideoThumbnailPromise},r.playVideo=function(){this.isActive&&this.inView&&this.video&&(this.fullscreenState===i.FULLSCREEN.OPENED||[i.SLIDE_SHOWN_BY.AUTOPLAY,i.SLIDE_SHOWN_BY.USER,i.SLIDE_SHOWN_BY.INIT].includes(this.slideShownBy))&&this.video.play()},r.initVideo=function(){var e=this;this.on("slideVideoReady",(function(t){t.stop(),e.isVideoReady||(e.isVideoReady=!0,e.isReady=!0,e.video.show(),e.componentLoader.hide()),!e.video.autoplay&&e.video.preStart||e.playVideo()})),this.on("slideVideoPlay",(function(t){t.data.slide=e.api,e.isVideoPaused&&!e.video.autoplay&&e.video.pause(),e.isVideoPaused=!1})),this.on("slideVideoPause",(function(t){t.data.slide=e.api})),this.on("slideVideoEnd",(function(t){t.data.slide=e.api}));var t=this._options.video;switch(o.videoModule.getType(this.slideContent)){case"youtube":this.video=new Z.YouTubeVideo(this.slideContent,t);break;case"vimeo":this.video=new Z.VimeoVideo(this.slideContent,t);break;case"video":this.video=new Z.HTMLVideo(this.slideContent,t)}this.video.parentClass=this},r.resize=function(){if(this._enabled&&this.sirvService){this.sirvService.resize();var e=i.SLIDE.TYPES;this.isReady&&[e.SPIN,e.ZOOM].includes(this.typeOfSlide)&&(this.sirvService.isZoomSizeExist()?this.contentWrapper.addClass(B):this.contentWrapper.removeClass(B))}},r.destroy=function(){this.sirvService?(this.sirvService.destroy(),this.sirvService=null,this.off("stats"),this.off("componentEvent")):this.multiImages.length&&this.multiImages.forEach((function(e){!e.src&&e.datasrc&&e.node.removeAttribute("src")})),this.slideContent.del("view-content"),this.removeEventCloseFullscreeByClick(),this.sendEventCloseFullscreenByClick=null,this.lastOriginNode&&(this.slideContent.remove(),this.slideContent=this.lastOriginNode,this.lastOriginNode=null),this.fullscreenOnlyNode&&(this.fullscreenOnlyNode.kill(),this.fullscreenOnlyNode=null),this.off("beforeFullscreenIn"),this.off("afterFullscreenIn"),this.off("beforeFullscreenOut"),this.off("afterFullscreenOut"),this.off("inView"),this.video&&(this.off("slideVideoReady"),this.off("slideVideoPlay"),this.off("slideVideoPause"),this.off("slideVideoEnd"),this.video.destroy()),this.video=null,this.componentLoader&&(this.componentLoader.destroy(),this.componentLoader=null),this.socialbuttons&&this.socialbuttons.destroy(),this.sizePromise=null,this.componentSize=null,this.contentWrapper.remove(),this.contentWrapper=null,this.instanceNode.remove(),this.instanceNode=null,this.slideContent=null,this.isReady=!1,this.availableSlide=null,t.prototype.destroy.call(this)},e.createClass(s,[{key:"videoSlide",get:function(){var e=!1;return this.sirv?e=this.sirvService.type===i.SLIDE.TYPES.VIDEO:this.video&&(e=!0),e}},{key:"customSelector",get:function(){return this.selector.isCustom}},{key:"newIndex",set:function(e){this._index=e}},{key:"index",get:function(){return this._index}},{key:"enabled",get:function(){return this._enabled}},{key:"blokedTouchdrag",get:function(){var e=!1;return this.sirv&&(e=this.sirvService.type===i.SLIDE.TYPES.SPIN||this.sirvService.isEffectActive()),e}},{key:"options",set:function(e){this._options=Object.assign({spin:{},zoom:{},image:{},video:{},fullscreenOnly:!1},e||{})},get:function(){return this.sirv?this.sirvService.getToolOptions():{}}},{key:"slideAvailable",get:function(){return this.availableSlide}},{key:"selectorPinned",get:function(){return["start","end"].includes(this.selector.pinned)}},{key:"pinnedSelectorSide",get:function(){return this.selector.pinned}},{key:"sirv",get:function(){return!!this.sirvService}},{key:"node",get:function(){return this.instanceNode}},{key:"originNode",get:function(){return this.lastOriginNode||this.slideContent}},{key:"originImageUrl",get:function(){return this.sirv?this.sirvService.originImageUrl:null}},{key:"zoomData",get:function(){return this.sirv?this.sirvService.getZoomData():null}},{key:"typeOfSlide",get:function(){var e=null;return this.sirv&&(e=this.sirvService.type),e}},{key:"zoomSizeExist",get:function(){return!!this.sirv&&this.sirvService.isZoomSizeExist()}},{key:"api",get:function(){return this._api}},{key:"spinInited",get:function(){return this.spinWasInited}},{key:"slideReady",get:function(){return this.isReady}},{key:"selectorData",get:function(){var e=this;if(this.dataHiddenSelector)return null;if(this.selector.node||(this.selector.node=y.$new(C),this.selector.node.addClass("smv-selector")),this.dataThumbnailImage){var t=this.typeOfSlide;null!==t&&this.selector.node.attr("data-type",i.SLIDE.NAMES[t]),this.selector.src=this.dataThumbnailImage,this.selector.isStatic||(this.selector.infoPromise=new Promise((function(t){e.getResponsiveImage().catch((function(e){})).finally((function(){t(e.selector.isSirv,e.selector.size)}))})))}else if(this.dataThumbnailHtml){var s=y.$new("div");s.node.innerHTML=this.dataThumbnailHtml,this.selector.selectorContent=s.node.firstChild,this.selector.node.attr("data-type","html")}else if(this.selector.isCustom)this.selector.node.attr("data-type","html"),this.selector.selectorContent=this.selector.node;else if(this.sirv){var n=this.typeOfSlide;this.selector.node.attr("data-type",i.SLIDE.NAMES[n]),n===i.SLIDE.TYPES.SPIN&&this.sirvService.isThumbnailGif()&&this.selector.node.addClass("spin-thumbnail-gif")}else{var o=W(this.slideContent.node);["youtube","vimeo","video"].includes(o.type)?this.selector.node.attr("data-type",o.type):"img"===o.type?this.selector.src=o.data:(this.selector.selectorContent=o.data,this.selector.node.attr("data-type","html"))}return this.selector.isCustom&&this.selector.node.addClass("smv-custom-thumbnail"),this.selector.disabled=!this._enabled,this.selector}},{key:"UUID",get:function(){return this.$J_UUID}},{key:"slideActive",get:function(){return this.isActive}}]),s}(r)),Q=null,X=null,K=function(){var t=y.camelize("-fullscreen"),n="smv-button-fullscreen-open",l="smv-button-fullscreen-close",d="smv-button-hidden",c="smv-pseudo-fullscreen",h={width:"100%",height:"100%"},p=function(r){"use strict";function p(t,n){var a;(a=r.call(this)||this).instanceNode=g(t),a.instanceOptions=n.options,a.viewerFileContent=n.viewerFileContent,a.option=function(){return arguments.length>1?a.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):a.instanceOptions.get(arguments.length<=0?void 0:arguments[0])},a.slideOptions=Object.assign(n.slideOptions,{quality:a.instanceOptions.isset("quality")?a.option("quality"):null,hdQuality:a.option("hdQuality"),isHDQualitySet:a.instanceOptions.isset("hdQuality"),fullscreenOnly:a.option("fullscreen.always"),isFullscreen:a.option("fullscreen.enable"),nativeFullscreen:a.option("fullscreen.native"),sbEnable:a.option("slide.socialbuttons.enable"),sbFacebook:a.option("slide.socialbuttons.types.facebook"),sbTwitter:a.option("slide.socialbuttons.types.twitter"),sbLinkedin:a.option("slide.socialbuttons.types.linkedin"),sbReddit:a.option("slide.socialbuttons.types.reddit"),sbTumblr:a.option("slide.socialbuttons.types.tumblr"),sbPinterest:a.option("slide.socialbuttons.types.pinterest"),sbTelegram:a.option("slide.socialbuttons.types.telegram")}),a.id=a.instanceNode.attr("id"),a.id||(a.id="smv-"+o.generateUUID(),a.instanceNode.attr("id",a.id)),a.lazyInit=n.lazyInit,a.movingContainer=y.$new("div").addClass(b),a.slideWrapper=y.$new("div").addClass("smv-slides-box"),a.slidesContainer=y.$new("div").addClass("smv-slides"),a.selectorsWrapper=y.$new("div").addClass("smv-selectors-box"),a.fullScreenBox=y.$new("div").addClass("smv-fullscreen-box"),a.controlsWrapper=y.$new("div").addClass("smv-controls"),a.producDetailsText=a.instanceNode.attr("data-product-detail"),a.productDetail=null,a.fullScreenBox.addEvent(["mousescroll","touchstart"],(function(e){e.stopDistribution()})),a.isReady=!1,a.isMoving=!1,a.isSelectorsReady=!1,a.isToolStarted=!1,a.isInitialized=!1,a.isStartedFullInit=!1,a.inViewModule=null,a.isInView=!1,a.firstSlideAhead=!1,a.rootMargin=0,a.fullscreenButton=null,a.doSetSize=!1,a.heightProportion=null,a.slides=[],a.enabledIndexesOfSlides=[],a.selectors=null,a.arrows=null,a.contextMenu=null,a.countOfSizes=g([]),a.isFullscreen=i.FULLSCREEN.CLOSED,a.fullscreenStartTime=null,a.index=0,a.movingContainerId="smv-"+o.generateUUID(),a.cssRulesId="sirv_css_rules-"+o.generateUUID(),a.isComponentPinching=!1,a.isZoomIn=!1,a.hasSize=!1,a.isPseudo=!1,a.doHistory=!0,a.isAutoplay=a.option("slide.autoplay"),a.autoplayDelay=a.option("slide.delay"),a.residualAutoplayTime=a.autoplayDelay,a.sliderNodes=[],a.destroyed=!1,a.autoplayTimer=null,a.timerRemove=null,a.onResizeDebounce=o.debounce((function(){a.onResizeWithoutSelectors()}),16),a.selectorsDebounce=null,a.doHistory&&(a.fullscreenViewId=Math.floor(Math.random()*+new Date),i.FULLSCREEN_VIEWERS_IDs_ARRAY.push(a.fullscreenViewId)),a.controlsWrapperWasAppended=!1,a.isStandardGrid=!1,a.isFullscreenGrid=!1,a.clearingTouchdragFunction=null,a.classes={standard:{movingContainerClasses:g([]),selectorsWrapperClasses:g([])},fullscreen:{movingContainerClasses:g([]),selectorsWrapperClasses:g([])}},a.externalContainer=null,y.browser.mobile&&a.movingContainer.addClass("smv-mobile"),a.onResizeHandler=a.onResize.bind(e.assertThisInitialized(a)),a.pseudoFSEvent=function(e){27===e.oe.keyCode&&(g(y.D).removeEvent("keydown",a.pseudoFSEvent),a.exitFullScreen())},a.keyBoardArrowsCallback=function(e){var t,i=e.oe.keyCode;a.isReady&&[37,39].includes(i)&&(e.stop(),t=37===i?"prev":"next",a.jump(t,2))},a.onHistoryStateChange=function(e){try{e.oe.state&&"Sirv.viewer"===e.oe.state.name?(i.FULLSCREEN_VIEWERS_IDs_ARRAY.indexOf(e.oe.state.hash)<0&&(i.FULLSCREEN_VIEWERS_IDs_ARRAY.splice(i.FULLSCREEN_VIEWERS_IDs_ARRAY.indexOf(a.fullscreenViewId),1),a.fullscreenViewId=e.oe.state.hash,i.FULLSCREEN_VIEWERS_IDs_ARRAY.push(a.fullscreenViewId)),e.oe.state.hash===a.fullscreenViewId&&a.enterFullScreen()):a.isFullscreenState()&&a.exitFullScreen()}catch(e){}};var l=a.getSlides();return a.addComponentsCSS=o.debounce((function(){s.rootDOM.addCSSStringToHtml()}),100),s.rootDOM.addCSSStringToHtml(),s.rootDOM.addCSSString(a.instanceNode.node),a.setComponentsEvents(),a.createSlides(l),(y.browser.ready||"loading"!==y.D.node.readyState)&&a.startFullInit(),u&&a.option("productdetail.enable")&&a.producDetailsText&&a.createProductDetails(),a}e.inheritsLoose(p,r);var f=p.prototype;return f.isFullscreenState=function(){return[i.FULLSCREEN.OPENING,i.FULLSCREEN.OPENED].includes(this.isFullscreen)},f.createProductDetails=function(){this.productDetail=new u({text:this.producDetailsText,position:this.option("productdetail.position")},this.movingContainer,this.fullScreenBox)},f.setRootMargin=function(){var e=parseInt(this.option("threshold"),10);"string"===y.typeOf(this.option("threshold"))&&(e=(y.W.node.innerHeight||y.D.node.documentElement.clientHeight)/100*e);this.rootMargin=e},f.startFullInit=function(e){var t=this;if(!this.isStartedFullInit&&this.slides.length&&(this.isStartedFullInit=!0,!this.isHiddenSlides())){e&&(this.instanceOptions=e.options,this.option=function(){return arguments.length>1?t.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):t.instanceOptions.get(arguments.length<=0?void 0:arguments[0])},this.slideOptions=Object.assign(e.slideOptions,{fullscreenOnly:this.option("fullscreen.always"),autoplay:this.option("video.autoplay")}),this.lazyInit=e.lazyInit,this.isAutoplay=this.option("slide.autoplay"),this.autoplayDelay=this.option("slide.delay"),this.residualAutoplayTime=this.autoplayDelay),this.option("fullscreen.always")&&this.movingContainer.addClass("smv-fullsreen-always"),null===Q&&(Q=y.browser.mobile&&window.matchMedia&&window.matchMedia("(max-device-width: 767px), (max-device-height: 767px)").matches),Q&&"ios"===y.browser.platform&&(X=y.$new("div").setCss({position:"fixed",top:0,width:0,height:"100vh"})),this.normalizeOptions(),this.setRootMargin(),this.slideWrapper.addClass("smv-"+("horizontal"===this.option("orientation")?"h":"v")),this.index=this.option("slide.first");var i=this.slides.length;if(this.index>i-1&&(this.index=0),i>0&&(!this.slides[this.index].enabled||!this.slides[this.index].slideAvailable)){for(var s=null,n=0;n<i;n++){var r=o.sliderLib.findIndex("next",this.index+n,i,!0);if(this.slides[r].enabled&&this.slides[r].slideAvailable){s=r;break}}if(null===s)return console.warn("Sirv Media Viewer: All items are disabled.",this.instanceNode.node),void this.emit("destroy",{data:{id:this.id,node:this.instanceNode.node}});this.index=s}this.createContextMenu(),this.setInViewAction(),this.option("thumbnails.enable")&&this.option("thumbnails.target")&&(this.externalContainer=g(y.D.node.querySelector(this.option("thumbnails.target"))),this.externalContainer||(this.externalContainer=null));var a=y.D.node.createDocumentFragment();a.appendChild(this.movingContainer.node),this.movingContainer.setCss(h),this.movingContainer.setCssProp("font-size",0),this.movingContainer.append(this.slideWrapper),this.slides.forEach((function(i){i.startFullInit(e?t.slideOptions:null)})),this.appendSelectors(!0),this.createClasses(),this.setClasses(),this.instanceNode.append(a),this.instanceNode.setCssProp("font-size",0),this.slideWrapper.append(this.slidesContainer),this.slidesContainer.setCss(h),this.instanceNode.render(),this.movingContainer.render(),this.selectorsWrapper.render(),this.slideWrapper.render();var l=this.instanceNode.size.height>0;this.createSelectors(),this.selectors&&this.isStandardGrid&&this.selectorsWrapper.setCss({flexBasis:this.option("thumbnails.size")+"px"});var d=10,c=function(){if(!t.destroyed){var e=t.slidesContainer.node.getBoundingClientRect();e.height||(e=t.slideWrapper.node.getBoundingClientRect()),(d-=1)>0&&(!e.width&&!e.height||l&&!e.height)?setTimeout(c,16):(t.instanceNode.setCssProp("font-size",""),e.width&&e.height||(t.doSetSize=!0),t.slides.forEach((function(e){e.slideAvailable&&t.slidesContainer.append(e.node),e.appendToDOM(),e.initVideoPlayer()})),t.setClasses(),t.searchingOfProportions(),t.selectors&&t.selectors.init(),t.postInitialization())}};this.firstSlideAhead&&this.broadcast("inView",{data:this.isInView}),setTimeout(c,16)}},f.visibleSlides=function(){return this.slides.filter((function(e){return e.slideAvailable&&e.enabled})).length},f.searchingOfProportions=function(){var e=this,t=this.slides.length,s=function(){var t=e.index,s=!e.firstSlideAhead&&e.option("slide.preload");e.hasSize=e.setContainerSize(),e.inViewModule&&["edge","ie"].includes(y.browser.uaName)&&e.inViewModule.takeRecords(),e.slides.forEach((function(i,n){i.startTool(t===n,s,e.firstSlideAhead)})),e.createEffect(),e.isToolStarted=!0,e.checkSingleSlide(),e.slides[e.index].beforeShow(),e.slides[e.index].afterShow(i.SLIDE_SHOWN_BY.INIT),e.postInitialization()},n=function(i,s){return new Promise((function(r,a){var l=e.slides[i],d=e.slides.length;if(s.push(i),l){var c=function(){var a=o.getArrayIndex(i+1,t);if(d!==e.slides.length&&a>i&&(a=i),s.includes(a)){var l=e.slidesContainer.size;l.width||(l.width=500),l.height||(l.height=.5625*l.width),e.heightProportion=l,r()}else n(a,s).then(r)};l.getSlideSize().then((function(t){var i=t.size;i&&i.width&&i.height?(e.heightProportion=i,r()):c()})).catch((function(t){var i=e.slides.length;t&&t.error&&404===t.error.status&&(i-=1,e.pickOut(t.UUID)),i>0?c():a()}))}}))};this.doSetSize?n(this.index,[]).then((function(){s()})).catch((function(){})):s()},f.initTouchDrag=function(){var e,t,s,n,o=this,r=["x","left","width"],a="y",l=!1,d=null,c=null,h=null,u=this.option("loop"),p=null,f=null,v=!0,m=!0,S=null,g=null,b=0,C={x:null,y:null},E=!1,I=function(e){return e/n*100},w=function(e,t){e&&e.node.setCssProp("transform",function(e){var t={x:0,y:0};return t[r[0]]=e,"translate3d("+t.x+"%, "+t.y+"%, 0px)"}(t))},x=function(){if(l){var e={transform:"",transition:""};c.node.removeEvent("transitionend"),S&&(m?(o.checkLoop(o.index),S.afterShow(i.SLIDE_SHOWN_BY.USER),c.afterHide(),o.sendEvent("afterSlideIn",{slide:S.api}),o.sendEvent("afterSlideOut",{slide:c.api})):S&&S.afterHide(),S&&S.node.setCss(e)),c.node.setCss(e),v=!0,m=!0,S=null,g=null,o.enableFullscreenButton(),o.autoplay(),l=!1,o.isMoving=!1,p=null,f=null,d=null,c=null,h=null,E=!1}},O=function(e,t){var i=null,s=t;s===y.U&&(s=o.index);var n=o.getNextIndex(e,s,o.slides.length,u);if(null!==n){var r=o.slides[n];r.index!==o.index&&(i=r.enabled?r:O(e,r.index))}return i},P=function(i){var n,o,a;l&&!E&&(l=!0,i.stop(),(o=i[r[0]]-e)<f?n="prev":o>f?n="next":n||(n=s>0?"next":"prev"),p=n,s=I(f=o)-t,!h&&s<-10&&(s=-10),!d&&s>10&&(s=10),w(d,(a=s)-100),w(c,a),w(h,a+100))},z=function(e){var t;l&&!E&&(1===b&&e.stop(),c.dragEvent(e.state),E=!0,(t=p,new Promise((function(e,i){var n,r=100,a=0,l=Math.abs(s);(l<25||2===b||"next"===t&&s<0||"prev"===t&&s>0)&&(m=!1),m||(t=s<0?"prev":"next"),S="next"===t?d:h,"next"!==t&&(r*=-1),(g="next"===t?h:d)&&(g.node.setCssProp("transform",""),g.afterHide()),m?(c.beforeHide(),o.sendEvent("beforeSlideIn",{slide:S.api}),o.sendEvent("beforeSlideOut",{slide:c.api}),o.index=S.index):(n=r,r=a,a=n,a*=-1,l<2&&(v=!1)),v&&(c.node.addEvent("transitionend",(function(t){t.stop(),e()})),S&&S.node.setCssProp("transition","transform, .3s"),c.node.setCssProp("transition","transform, .3s"),S&&S.node.size,c.node.size,o.selectors&&(o.selectors.activateItem(o.index),o.selectors.jump(o.index))),S&&w(S,a),w(c,r),v||e()}))).finally((function(){E=!1,x()})))};"vertical"===this.option("orientation")&&(r=["y","top","height"],a="x"),this.clearingTouchdragFunction=x,this.slidesContainer.addEvent("touchdrag",(function(u){o.isComponentPinching||o.isZoomIn||o.slides[o.index].blokedTouchdrag||o.option("fullscreen.always")&&o.isFullscreen!==i.FULLSCREEN.OPENED||("dragstart"===u.state?(C={x:u.x,y:u.y},function(i){E||(x(),o.effect.stop(),null!==o.index&&((c=o.slides[o.index]).isSwipeDisabled()||(l=!0,o.isMoving=!0,e=o.slidesContainer.position[r[1]],n=o.slidesContainer.size[r[2]],f=i[r[0]]-e,t=I(f),s=t,d=O("prev"),h=O("next"),d&&h&&(d.index===h.index?d.index<c.index?h=null:d=null:d.index!==c.index&&c.index!==h.index||(d.index===c.index?d=null:h=null)),d&&(w(d,-100),d.beforeShow()),h&&(w(h,100),h.beforeShow()),o.disableFullscreenButton())))}(u),c.dragEvent(u.state)):"dragmove"===u.state?(b||(b=Math.abs(C[r[0]]-u[r[0]])>Math.abs(C[a]-u[a])?1:2),1===b&&P(u),C={x:u.x,y:u.y}):"dragend"===u.state&&(z(u),b=0,C={x:null,y:null}))}))},f.appendSelectors=function(e){var t=this.movingContainer;this.externalContainer&&(this.isFullscreenState()?this.selectorsWrapper.removeClass("smv-external"):(t=this.externalContainer,this.selectorsWrapper.addClass("smv-external"))),(e||this.externalContainer)&&t.append(this.selectorsWrapper)},f.createClasses=function(){var e=this,t=this.option;["standard","fullscreen"].forEach((function(i){var s,n,o="standard"===i,r=t(o?"thumbnails.enable":"fullscreen.thumbnails.enable"),a=t(o?"thumbnails.position":"fullscreen.thumbnails.position"),l=(s=t(o?"thumbnails.type":"fullscreen.thumbnails.type"),n="thumbnails","bullets"===s&&(n=s),n),d=o?e.isStandardGrid:e.isFullscreenGrid;r&&(o&&e.externalContainer||e.classes[i].movingContainerClasses.push("smv-selectors-"+a),e.classes[i].selectorsWrapperClasses.push("smv-"+l),e.classes[i].selectorsWrapperClasses.push("smv-"+(["left","right"].includes(a)?"v":"h")),d&&e.classes[i].selectorsWrapperClasses.push("smv-grid"),t("fullscreen.thumbnails.autohide")&&!o&&(e.classes[i].movingContainerClasses.push("smv-autohide"),e.classes[i].movingContainerClasses.push("smv-selectors-closed")))}))},f.changeClasses=function(e,t){var i=this,s=t?"removeClass":"addClass";e.movingContainerClasses.forEach((function(e){i.movingContainer[s](e)})),e.selectorsWrapperClasses.forEach((function(e){i.selectorsWrapper[s](e)}))},f.setClasses=function(){this.isFullscreenState()?(this.changeClasses(this.classes.standard,!0),this.changeClasses(this.classes.fullscreen)):(this.changeClasses(this.classes.fullscreen,!0),this.changeClasses(this.classes.standard))},f.setInViewAction=function(){var e=this;"visible"===this.option("autostart")?(this.inViewModule=new o.InViewModule((function(t){t.forEach((function(t){var i=e.isInView,s=t.isIntersecting||t.intersectionRatio>0;e.isFullscreenState()&&!s&&(s=!0),i!==s&&(e.isInView=s,e.postInitialization(),e.broadcast("inView",{data:s}),e.isInView?e.autoplay():e.pauseAutoplay())}))}),{rootMargin:this.rootMargin+"px 0px"}),this.inViewModule.observe(this.instanceNode.node)):this.isInView=!0},f.sendEvent=function(e,t){t||(t={}),t.node=this.instanceNode,t.slider||(t.slider={type:e}),this.emit("viewerPublicEvent",{data:t})},f.checkReadiness=function(e,t){var i=!1;if(["init","ready"].includes(e))if("viewer"===t)"ready"===e&&(i=this.isReady);else for(var s=0,n=this.slides.length;s<n;s++)if(this.slides[s].checkReadiness(e,t)){i=!0;break}return i},f.sendReadyEvent=function(e,t){"viewer"===t?this.sendEvent("ready"):this.slides.forEach((function(i){i.sendReadyEvent(e,t)}))},f.sendStats=function(e,t){var i,s;if(t||(t={}),t.slider=this.id,e&&(t.data={},t.data.event=e),"spin"===t.component)(i={account:t.account,event:{type:t.component,name:t.event,data:t.data||{},sessionId:t.sessionId,origin:t.origin}}).event["sessionStart"===t.event?"ts":"time"]=t.eventTime,(s=JSON.parse(JSON.stringify(i))).event=JSON.stringify(s.event);i&&(!0===t.useBeacon?o.sendRawStats(s,!0):setTimeout((function(){o.sendRawStats(s)}),1),this.sendEvent("sendStats",y.detach(i)))},f.setComponentsEvents=function(){var e=this,s=function(t){if(e.firstSlideAhead&&t===e.index){var i=e.option("slide.preload");e.enabledIndexesOfSlides.forEach((function(t){e.slides[t].startGettingInfo(),i?e.slides[t].loadContent():e.slides[t].loadThumbnail()}))}},n=function(t){e.index===t&&e.autoplay()},o=function(t){e.index===t&&e.pauseAutoplay()};this.on("stats",(function(t){t.stopAll();var i=y.D.node,s=y.W.node,n=s.screen;"sessionStart"===t.data.event&&(t.data.data||(t.data.data={}),t.data.data.screen={width:n.width,height:n.height,availWidth:n.availWidth,availHeight:n.availHeight,colorDepth:n.colorDepth,pixelDepth:n.pixelDepth},t.data.data.browser={width:s.innerWidth||i.documentElement.clientWidth||i.body.clientWidth||0,height:s.innerHeight||i.documentElement.clientWidth||i.body.clientWidth||0}),e.sendStats(null,t.data)})),this.on("slideVideoPlay",(function(e){e.stopAll(),o(e.data.slide.index)})),this.on("slideVideoPause",(function(e){e.stopAll()})),this.on("slideVideoEnd",(function(e){e.stopAll(),n(e.data.slide.index)})),this.on("contentLoaded",(function(e){e.stopAll(),s(e.data.slide.index)})),this.on("componentEvent",(function(t){var r=t.data.type;switch(t.stopAll(),r){case"init":(e.index===t.data.slide.index||e.slides[e.index]&&e.slides[e.index].spinInited)&&(e.addControllWrapper(),e.enableFullscreenButton(),e.visibleFullscreenButton()),e.sendEvent("componentEvent",t.data);break;case"ready":e.index!==t.data.slide.index||"spin"===t.data.component||e.slides[t.data.slide.index].videoSlide&&!e.isFullscreenState()||(e.addControllWrapper(),e.enableFullscreenButton(),e.visibleFullscreenButton()),e.sendEvent("componentEvent",t.data);break;case"rotate":e.sendEvent("componentEvent",t.data);break;case"fullscreenIn":"video"===t.data.component?e.sendEvent("componentEvent",t.data):e.option("fullscreen.enable")&&e.isFullscreen===i.FULLSCREEN.CLOSED&&e.enterFullScreen();break;case"fullscreenOut":"video"===t.data.component?e.sendEvent("componentEvent",t.data):e.exitFullScreen();break;case"pinchStart":e.isComponentPinching=!0;break;case"pinchEnd":e.isComponentPinching=!1;break;case"zoomIn":e.isZoomIn=!0,o(t.data.slide.index),e.sendEvent("componentEvent",t.data);break;case"zoomOut":e.isZoomIn=!1,n(t.data.slide.index),e.sendEvent("componentEvent",t.data);break;case"hotspotOpened":o(t.data.slide.index);break;case"hotspotClosed":n(t.data.slide.index);break;case"spinStart":o(t.data.slide.index);break;case"spinEnd":n(t.data.slide.index);break;case"play":case"resume":"video"===t.data.component&&(o(t.data.slide.index),e.sendEvent("componentEvent",t.data));break;case"pause":"video"===t.data.component&&e.sendEvent("componentEvent",t.data);break;case"end":"video"===t.data.component&&(n(t.data.slide.index),e.sendEvent("componentEvent",t.data));break;case"seek":e.sendEvent("componentEvent",t.data);break;case"contentLoaded":s(t.data.slide.index)}})),this.on("goTo"+t,(function(t){t.stopAll(),e.option("fullscreen.enable")&&e.isFullscreen===i.FULLSCREEN.CLOSED&&e.enterFullScreen()})),this.on("goTo"+t+"Out",(function(t){t.stopAll(),e.exitFullScreen()})),this.on("infoReady",(function(s){if(s.stop(),e.isFullscreen===i.FULLSCREEN.OPENED){var n=e.slides[s.data.index];n.broadcast("before"+t+"In",{data:{pseudo:e.isPseudo}}),n.broadcast("after"+t+"In",{data:{pseudo:e.isPseudo}})}})),this.on((function(e){e.stopAll()}))},f.normalizeOptions=function(){var e=this,t=g(["contextmenu.text.zoom.in","contextmenu.text.zoom.out","contextmenu.fullscreen.enter","contextmenu.fullscreen.exit","contextmenu.text.download"]);"auto"===this.option("fullscreen.thumbnails.size")&&this.option("fullscreen.thumbnails.size",this.option("thumbnails.size")),"off"===this.option("slide.animation.type")&&this.option("slide.animation.type",!1),"grid"===this.option("thumbnails.type")&&(this.isStandardGrid=!0,this.option("thumbnails.type","square")),"grid"===this.option("fullscreen.thumbnails.type")&&(this.isFullscreenGrid=!1,this.option("fullscreen.thumbnails.type","square")),t.forEach((function(t){var i;i=e.option(t),"string"===y.typeOf(i)&&""===i.trim()&&e.option(t,!1)})),this.option("thumbnails.enable")&&this.option("thumbnails.target")&&""===this.option("thumbnails.target").trim()&&this.option("thumbnails.target",!1),!this.option("slide.socialbuttons.enable")||this.option("slide.socialbuttons.types.facebook")||this.option("slide.socialbuttons.types.twitter")||this.option("slide.socialbuttons.types.linkedin")||this.option("slide.socialbuttons.types.reddit")||this.option("slide.socialbuttons.types.tumblr")||this.option("slide.socialbuttons.types.pinterest")||this.option("slide.socialbuttons.types.telegram")||this.option("slide.socialbuttons.enable",!1),this.slideOptions.sbEnable=this.option("slide.socialbuttons.enable")},f.addControllWrapper=function(){!this.controlsWrapperWasAppended&&this.controlsWrapper.node.childNodes.length&&(this.controlsWrapperWasAppended=!0,this.slideWrapper.append(this.controlsWrapper))},f.postInitialization=function(){var e=this;if(!this.isInitialized&&this.isInView&&this.isSelectorsReady&&this.isToolStarted&&this.isStartedFullInit){if(this.isInitialized=!0,this.hasSize||this.setContainerSize(),this.broadcast("inView",{data:this.isInView}),this.createArrows(),this.selectors&&(this.selectors.inView(this.isInView,this.instanceNode),this.selectors.activateItem(this.index)),!y.browser.mobile){var t=["edge","ie"].includes(y.browser.uaName)?"pointerout":"mouseout";this.movingContainer.addEvent(t,(function(t){if(!t.pointerType||"mouse"===t.pointerType){for(var i=t.related;i&&i!==e.movingContainer.node;)i=i.parentNode;e.movingContainer.node!==i&&null!==e.index&&e.slides[e.index].mouseAction("mouseout",t)}}))}this.slides.length>1&&this.initTouchDrag(),g(y.W).addEvent("resize",this.onResizeHandler),this.showHideArrows(),this.showHideSelectors(),this.option("fullscreen.always")&&this.slideWrapper.addClass(i.CSS_CURSOR_FULSCREEN_ALWAYS),this.movingContainer.attr("id",this.movingContainerId),this.createFullscreenButton(),this.addControllWrapper(),!this.slides[this.index]||this.slides[this.index].sirv||this.slides[this.index].videoSlide&&!this.isFullscreenState()||(this.enableFullscreenButton(),this.visibleFullscreenButton()),this.checkLoop(this.index),this.movingContainer.setCssProp("font-size",""),this.doHistory&&g(y.W).addEvent("popstate",this.onHistoryStateChange),this.autoplay(),this.isReady=!0,this.sendEvent("ready")}},f.addHistory=function(){if(this.doHistory){var e="#sirv-viewer-"+this.fullscreenViewId;if(y.W.node.location.hash!==e){var t={name:"Sirv.viewer",hash:this.fullscreenViewId},i=y.D.node.body.title||"Sirv viewer";try{y.W.node.history.state&&"Sirv.viewer"===y.W.node.history.state.name&&y.W.node.history.replaceState(null,i,""),y.W.node.history.pushState(t,i,e)}catch(e){}}}},f.setContainerSize=function(){var e=!1,t=0;this.selectors&&(t=this.selectorsWrapper.size[this.selectors.shortSide]);var s=this.movingContainer.size,n=this.option("thumbnails.position"),o=this.option("thumbnails.enable")&&this.canShowSelectors(this.slides.length)&&t>0&&!this.externalContainer;if(s.width||s.height)if(e=!0,this.isFullscreen===i.FULLSCREEN.OPENED)this.movingContainer.setCssProp("height",""),this.slideWrapper.setCssProp("height","");else if(this.doSetSize&&this.heightProportion){o&&["left","right"].includes(n)&&(s.width-=t);var r=s.width*(this.heightProportion.height/this.heightProportion.width);r>this.heightProportion.height&&(r=this.heightProportion.height),!o||["left","right"].includes(n)&&!this.isStandardGrid?this.movingContainer.setCssProp("height",r+"px"):this.slideWrapper.setCssProp("height",r+"px")}return e},f.findSlideIndex=function(e){for(var t=-1,i=0,s=this.slides.length;i<s;i++)if(this.slides[i].id&&this.slides[i].id===e){t=this.slides[i].index;break}return t},f.getCountOfEnabledSlides=function(e){var t=this.enabledIndexesOfSlides.length;return e&&(t=this.slides.length-t),t},f.getItems=function(e){var t=null,i=this.slides;e&&(y.defined(e.enabled)&&(t=e.enabled),e.group&&(i=this.getSlidesByGroup(e.group)));var s=[];return i.forEach((function(e){!0===t?e.enabled&&s.push(e.api):!1===t&&e.enabled||s.push(e.api)})),s},f.controlEnabledSlides=function(e,t){t?this.enabledIndexesOfSlides.splice(this.enabledIndexesOfSlides.indexOf(e),1):(this.enabledIndexesOfSlides.push(e),this.enabledIndexesOfSlides=this.enabledIndexesOfSlides.sort((function(e,t){var i=0;return e<t?i=-1:e>t&&(i=1),i})))},f.disableSlide=function(e,t){var i=!1,s="next",n=this.slides.length;if("string"===y.typeOf(e)&&(e=this.findSlideIndex(e)),"number"===y.typeOf(e)&&e>=0&&e<this.slides.length&&this.slides[e].enabled){var o=this.slides[e].$J_UUID;this.effect&&this.effect.stop(),this.slides[e].isActive&&(this.index===n-1&&this.option("loop")&&(s=0),this.jump(s,4,!0)||(this.slides[e].beforeHide(),this.slides[e].afterHide())),this.slides[e].enabled&&this.controlEnabledSlides(e,!0),this.slides[e].disable(),this.checkLoop(this.index),this.enabledIndexesOfSlides.length||(this.index=null),this.selectors&&this.selectors.disable(o),t||this.sendEvent("disableItem",{slide:this.slides[e].api}),this.checkSingleSlide(),this.showHideArrows(),this.showHideSelectors(),i=!0}return i},f.enableSlide=function(e){var t=this,s=!1;if("string"===y.typeOf(e)&&(e=this.findSlideIndex(e)),"number"===y.typeOf(e)&&e>=0&&e<this.slides.length&&!this.slides[e].enabled){this.slides[e].startGettingInfo(),this.slides[e].loadThumbnail(),this.slides[e].enable(),this.slides[e].resize();var n=this.enabledIndexesOfSlides.filter((function(e){return t.slides[e].slideAvailable}));this.enabledIndexesOfSlides.length||(this.index=e),this.slides[e].slideAvailable&&!n.length&&(this.index=e,this.slides[e].loadContent(),this.slides[e].beforeShow(),this.slides[e].afterShow(i.SLIDE_SHOWN_BY.ENABLE)),this.controlEnabledSlides(e),this.checkLoop(this.index),this.selectors&&(this.selectors.enable(this.slides[e].UUID),this.slides[e].slideAvailable&&this.selectors.activateCurrentItemByUUID(this.slides[e].UUID)),this.sendEvent("enableItem",{slide:this.slides[e].api}),this.checkSingleSlide(),this.showHideArrows(),this.showHideSelectors(),s=!0}return s},f.getSlidesByGroup=function(e){var t=null;return e&&(t=[],this.slides.forEach((function(i){i.belongsTo(e)&&t.push(i)}))),t},f.enableGroupOfSlides=function(e){var t=this,i=!1,s=this.getSlidesByGroup(e);return s&&s.length&&(i=!0,s.forEach((function(e){t.enableSlide(e.index)}))),i},f.disableGroupOfSlides=function(e){var t=this,i=!1,s=this.getSlidesByGroup(e);return s&&s.length&&(i=!0,s.forEach((function(e){t.disableSlide(e.index)}))),i},f.switchGroupOfSlides=function(e){var t=this,i=!1;e&&(this.getItems({enabled:!0}).forEach((function(i){t.slides[i.index].belongsTo(e)||t.disableSlide(i.index)})),i=this.enableGroupOfSlides(e));return i},f.jump=function(e,t,i,s){var n=!1,r=this.option("slide.animation.type"),a=s,l=["next","prev"].includes(e),d=this.slides.length;if(!this.effect||!this.enabledIndexesOfSlides.length||null===this.index)return n;if(a===y.U&&(a=this.index),!l){var c=this.findSlideIndex(e);c>=0&&(e=c)}var h=o.sliderLib.findIndex(e,a,d,this.option("loop"));if(null===h)return n;if(this.index!==h){if(!this.slides[h].enabled||!this.slides[h].slideAvailable)return l&&(n=this.jump(e,t,i,h)),n;clearTimeout(this.autoplayTimer),l||(e=h>this.index?"next":"prev"),this.checkLoop(h),r&&!i||(r="blank"),this.selectors&&(this.selectors.activateItem(h),this.selectors.jump(h)),this.effect.make({index:this.index,node:this.slides[this.index].node},{index:h,node:this.slides[h].node},{effect:r,direction:e},{whoUse:t}),n=!0}else this.slides[h].secondSelectorClick();return this.index=h,n},f.checkLoop=function(e){var t=this;if(this.arrows){var i=this.enabledIndexesOfSlides.filter((function(e){return!t.slides[e].selectorPinned&&t.slides[e].slideAvailable})).length;if(i<2)this.arrows.disable("backward"),this.arrows.disable("forward");else if(this.option("loop"))this.arrows.disable();else{var s=this.enabledIndexesOfSlides.indexOf(e);this.arrows.disable(),0!==s&&1!==i||this.arrows.disable("backward"),s!==i-1&&1!==i||this.arrows.disable("forward")}}},f.createFullscreenButton=function(){var e=this;this.option("fullscreen.enable")&&!this.fullscreenButton&&(this.fullscreenButton=y.$new("div").addClass("smv-button").addClass("smv-button-fullscreen").addClass(n),this.fullscreenButton.append(y.$new("div").addClass("smv-icon")),this.slides[this.index].spinInited?(this.enableFullscreenButton(),this.visibleFullscreenButton()):(this.disableFullscreenButton(),this.hideFullscreenButton()),this.fullscreenButton.addEvent(["btnclick","tap"],(function(t){t.stop(),e.isFullscreen!==i.FULLSCREEN.CLOSED&&e.isFullscreen!==i.FULLSCREEN.OPENED||(e.disableFullscreenButton(),e.hideFullscreenButton(),e.isFullscreen===i.FULLSCREEN.CLOSED?e.enterFullScreen():e.exitFullScreen())})),this.controlsWrapper.append(this.fullscreenButton),this.slides[this.index].slideReady&&setTimeout((function(){e.slides[e.index].videoSlide&&!e.isFullscreenState()||(e.enableFullscreenButton(),e.visibleFullscreenButton())}),0))},f.visibleFullscreenButton=function(){this.fullscreenButton&&this.fullscreenButton.removeClass(d)},f.hideFullscreenButton=function(){this.fullscreenButton&&this.fullscreenButton.addClass(d)},f.enableFullscreenButton=function(){this.fullscreenButton&&this.fullscreenButton.removeAttr("disabled")},f.disableFullscreenButton=function(){this.fullscreenButton&&this.fullscreenButton.attr("disabled","disabled")},f.createEffect=function(){var e=this;this.effect=new x({time:this.option("slide.animation.duration"),orientation:this.option("orientation")}),this.effect.parentClass=this,this.on("effectStart",(function(t){t.stopAll(),e.isMoving=!0,e.disableFullscreenButton(),e.slides[t.indexes[1]].videoSlide&&e.isFullscreen!==i.FULLSCREEN.OPENED&&e.hideFullscreenButton(),e.slides[t.indexes[0]].beforeHide(),e.slides[t.indexes[1]].beforeShow(),4!==t.data.callbackData.whoUse&&(e.sendEvent("beforeSlideIn",{slide:e.slides[t.indexes[1]].api}),e.sendEvent("beforeSlideOut",{slide:e.slides[t.indexes[0]].api}))})),this.on("effectEnd",(function(t){t.stopAll(),e.slides[t.indexes[1]].videoSlide&&e.isFullscreen!==i.FULLSCREEN.OPENED||(e.enableFullscreenButton(),e.visibleFullscreenButton()),e.slides[t.indexes[0]].afterHide(),e.slides[t.indexes[1]].afterShow(t.data.callbackData.whoUse),4!==t.data.callbackData.whoUse&&(e.sendEvent("afterSlideIn",{slide:e.slides[t.indexes[1]].api}),e.sendEvent("afterSlideOut",{slide:e.slides[t.indexes[0]].api})),e.autoplay(),e.isMoving=!1,e.residualAutoplayTime=e.autoplayDelay}))},f.createArrows=function(){var e=this,t=this.option;t("arrows")&&(this.arrows=new j({orientation:t("orientation")}),this.arrows.hide(),this.arrows.parentClass=this,this.on("arrowAction",(function(t){t.stopAll();var i=e.getNextIndex(t.data.type,e.index,e.slides.length,e.option("loop"));e.jump(i,2)})),this.arrows.nodes.forEach((function(t){e.controlsWrapper.append(t)})))},f.getNextIndex=function(e,t,i,s){var n=o.sliderLib.findIndex(e,t,i,s),r=n;return null===n||n===this.index||!this.slides[n].selectorPinned&&this.slides[n].slideAvailable&&this.slides[n].enabled||(r=this.getNextIndex(e,n,i,s)),r},f.isHiddenSlides=function(){return!this.slides.some((function(e){return!e.customSelector||e.customSelector&&e.slideAvailable}))},f.createSelectors=function(){var e=this,t=this.option;t("thumbnails.enable")||t("fullscreen.thumbnails.enable")?(this.selectors=new q(this.slides.map((function(e){return e.selectorData})),{isStandardGrid:this.isStandardGrid,standardStyle:t("thumbnails.type"),standardSize:t("thumbnails.size"),standardPosition:!!t("thumbnails.enable")&&t("thumbnails.position"),standardWatermark:t("thumbnails.watermark"),isFullscreenGrid:this.isFullscreenGrid,fullscreenStyle:t("fullscreen.thumbnails.type"),fullscreenSize:t("fullscreen.thumbnails.size"),fullscreenPosition:!!t("fullscreen.thumbnails.enable")&&t("fullscreen.thumbnails.position"),fullscreenAutohide:t("fullscreen.thumbnails.autohide"),fullscreenWatermark:t("fullscreen.thumbnails.watermark"),arrows:t("arrows")}),this.selectors.parentClass=this,this.on("selectorsReady",(function(t){t.stopAll(),e.isSelectorsReady=!0,e.postInitialization()})),this.on("getSelectorProportion",(function(t){t.stopAll();var i=e.getSlideByUUID(t.data.UUID);if(null!==i){var s=e.slides[i];if(s){var n={size:null,isSirv:!0};s.getSelectorProportion().then((function(e){n.isSirv=s.isSirvSelector(),n.size=e.size,t.data.resultingCallback(n)})).catch((function(i){n.isSirv=s.isSirvSelector(),e.pickOut(i.UUID),t.data.resultingCallback(n)}))}else t.data.resultingCallback(null)}else t.data.resultingCallback(null)})),this.on("getSelectorImgUrl",(function(t){t.stopAll();var i=e.getSlideByUUID(t.data.UUID);if(null!==i){var s=e.slides[i];s?s.getSelectorImgUrl(t.data.type,t.data.size,t.data.crop,t.data.watermark).then((function(e){t.data.resultingCallback({src:e.src,srcset:e.srcset,size:e.size,alt:e.alt,referrerpolicy:e.referrerpolicy})})).catch((function(e){t.data.resultingCallback(null)})):t.data.resultingCallback(null)}else t.data.resultingCallback(null)})),this.on("changeSlide",(function(t){t.stopAll();var i=e.getSlideByUUID(t.data.UUID);if(null!==i){var s=e.option("fullscreen.enable")&&e.option("fullscreen.always");e.slides[i].customSelector&&e.sendEvent("thumbnailClick",{slide:e.slides[i].api}),e.jump(i,2,s),s&&e.enterFullScreen()}})),this.on("visibility",(function(t){switch(t.stop(),t.action){case"show":e.movingContainer.removeClass("smv-selectors-closed");break;case"hide":e.movingContainer.addClass("smv-selectors-closed")}})),this.on("selectorsDone",(function(t){t.stopAll(),["left","right"].includes(e.selectors.currentStylePosition)&&e.onResize()})),this.selectorsWrapper.append(this.selectors.node),this.slides.forEach((function(t,i){t.enabled||e.selectors.disable(t.UUID)})),this.showHideSelectors(!0)):this.isSelectorsReady=!0},f.findSlide=function(){var e=this.instanceNode.attr("data-src");if(e){var t,s;try{t=this.viewerFileContent?this.viewerFileContent:(t=(t=e.split("?")[0]).split("."))[t.length-1]}catch(e){}"spin"===t||o.isVideo(e)?(s=y.$new("div",{"data-src":e}),t=i.SLIDE.TYPES.SPIN):[this.instanceNode.attr("data-type"),this.instanceNode.attr("data-effect")].includes("zoom")?(t=i.SLIDE.TYPES.ZOOM,s=y.$new("div",{"data-type":"zoom","data-src":e})):(t=i.SLIDE.TYPES.IMAGE,s=y.$new("img",{"data-src":e})),this.viewerFileContent&&s.store("view-content",t),this.instanceNode.append(s)}else(e=this.instanceNode.attr("data-bg-src"))&&this.instanceNode.append(y.$new("img",{"data-src":e}));return this.getSlides(!0)},f.canPinSlide=function(e){var t=J.findPinnedSelectorSide(e);return this.slides.filter((function(e){return e.pinnedSelectorSide===t})).length<3},f.getSlideByUUID=function(e){for(var t=null,i=0,s=this.slides.length;i<s;i++){if(this.slides[i].UUID===e){t=i;break}}return t},f.pickOut=function(e){var t=this.getSlideByUUID(e);null!==t&&(this.removeSlide(t),this.slides.length?(this.slides.length<2&&(this.option("thumbnails.enable")||this.option("fullscreen.thumbnails.enable"))&&(this.changeClasses(this.classes.standard,!0),this.setContainerSize()),this.isToolStarted||this.searchingOfProportions(),this.postInitialization()):this.emit("destroy",{data:{id:this.id,node:this.instanceNode.node}}))},f.getSlides=function(e){var t,n=this,r=(t=e?Array.from(this.instanceNode.node.childNodes):function(e){for(var t=[],i=0,s=0,n=0,o=e.length;n<o;n++){var r=e[n];r.querySelector(C)&&(r=r.querySelector(C));var a=y.$(r).attr("data-pinned"),l=r.hasAttribute("data-pinned");s>=3&&"start"===a||i>=3&&(l&&a&&("end"===a||"end"!==a&&"start"!==a)||l&&!a)||(s<3&&"start"===a&&s++,(i<3&&l&&a&&("end"===a||"end"!==a&&"start"!==a)||l&&!a)&&i++,t.push(e[n]))}return t}(t=Array.from(this.instanceNode.node.childNodes).filter((function(e){var t=!1;return n.sliderNodes.push(e.cloneNode(!0)),e.tagName&&["div","img","iframe","figure","video","picture",C].includes(g(e).tagName)&&(t=!0),e.parentNode.removeChild(e),t})))).map((function(e){return J.parse(e)}));return s.viewerFilters.forEach((function(e){var t=[].concat(r);t=t.map((function(e){var t={};return Object.entries(e).forEach((function(e){"type"===e[0]&&(e[1]=i.SLIDE.NAMES[e[1]]),o.createReadOnlyProp.apply(o,[t].concat(e))})),t}));var s=e(n.id,t);Array.isArray(s)&&(r=s.map((function(e){for(var t=e,i=0,s=r.length;i<s;i++)if(e.node===r[i].node){t=r.splice(i,1)[0];break}return t})))})),t=r,e||t.length||(t=this.findSlide()),t=o.sortSlidesByOrder(this.option("itemsOrder"),t)},f.createSlides=function(e){var t=this,i=0;e.forEach((function(e){if(!J.isSirvComponent(e.node)||J.hasComponent(e.node)){if((e=g(e.node)).tagName===C){var s=y.$new("div");e.attr("data-id")&&s.attr("data-id",e.attr("data-id")),e.attr("data-group")&&s.attr("data-group",e.attr("data-group")),s.append(e),e=s}e.addClass("smv-component");var n=new J(e.node,i,t.slideOptions);n.parentClass=t,t.slides.push(n),n.enabled&&n.slideAvailable&&t.enabledIndexesOfSlides.push(i),i+=1}})),this.firstSlideAhead=this.enabledIndexesOfSlides.length>8,this.enabledIndexesOfSlides.forEach((function(e,i){(!t.firstSlideAhead||i<8)&&t.slides[e].startGettingInfo()})),this.index>this.slides.length-1&&(this.index=0),this.postInitialization()},f.checkSingleSlide=function(){var e=this,t=1===this.enabledIndexesOfSlides.length;this.enabledIndexesOfSlides.forEach((function(i){e.slides[i].single(t)}))},f.showHideArrows=function(){if(this.arrows){var e=this.visibleSlides();e<2||this.option("fullscreen.always")&&!this.isFullscreenState()?this.arrows.hide():e>1&&(!this.option("fullscreen.always")||this.isFullscreenState())&&this.arrows.show()}},f.canShowSelectors=function(e){var t=this.isFullscreen===i.FULLSCREEN.OPENED?"fullscreen.thumbnails.always":"thumbnails.always";return this.option(t)||e>1},f.showHideSelectors=function(e){var t=this;this.selectors&&(this.selectorsDebounce||(this.selectorsDebounce=o.debounce((function(){t.selectors&&(t.canShowSelectors(t.enabledIndexesOfSlides.length)?t.selectors.isSelectorsActionEnabled()||(t.movingContainer.setCssProp("height","100%"),t.selectorsWrapper.removeClass("smv-hide-selectors"),t.selectors.enableActions(),t.onResize()):t.selectors.isSelectorsActionEnabled()&&(t.selectorsWrapper.addClass("smv-hide-selectors"),t.selectors.disableActions(),t.onResize()))}),e?0:32)),this.selectorsDebounce())},f.getAvailableSlideIndex=function(e){return e!==this.slides.length-1||this.slides[e].slideAvailable?this.slides[e+1].slideAvailable?e+1:this.getAvailableSlideIndex(e+1):-1},f.addAvailableSlideNode=function(e,t){var i=e.node,s=this.slides.length;if(e.slideAvailable)if(s>1&&t!==s-1)if(this.slides[t+1].slideAvailable)this.slidesContainer.node.insertBefore(i.node,this.slides[t+1].node.node);else{var n=this.getAvailableSlideIndex(t);n<0?this.slidesContainer.append(i):this.slidesContainer.node.insertBefore(i.node,this.slides[n].node.node)}else this.slidesContainer.append(i)},f.sortItems=function(e){if(Array.isArray(e)||(e=this.option("itemsOrder")),e.length){this.slides=o.sortSlidesByOrder(e,this.slides),this.selectors&&this.selectors.sortSelectors(this.slides.map((function(e){return e.UUID})),e.length),this.slides.forEach((function(e,t){e.newIndex=t}));for(var t=0,i=this.slides.length;t<i;t++)if(this.slides[t].slideActive){this.index=this.slides[t].index;break}}},f.insertSlide=function(e,s){var n=this,o=s.querySelector(C)||s;if(J.findPinnedSelectorSide(o)&&!this.canPinSlide(o))return!1;if(y.defined(e)||(e=this.slides.length+1),"number"===y.typeOf(e)&&e>=0&&s&&(!J.isSirvComponent(s)||J.hasComponent(s))){g(s).addClass("smv-component"),e>this.slides.length&&(e=this.slides.length),clearTimeout(this.timerRemove);var r=new J(s,e,this.slideOptions,!0);r.parentClass=this,this.slides.splice(e,0,r);var a=null===this.index;return null===this.index?r.enabled&&r.slideAvailable?this.index=e:a=!1:e<=this.index&&(this.index+=1),this.enabledIndexesOfSlides=[],this.slides.forEach((function(e,t){e.newIndex=t,e.enabled&&n.controlEnabledSlides(t)})),this.addAvailableSlideNode(r,e),this.addComponentsCSS(),r.appendToDOM(),r.initVideoPlayer(),r.startGettingInfo(),r.loadThumbnail(),r.startFullInit(null),r.startTool(this.index===e,!this.firstSlideAhead&&this.option("slide.preload"),this.firstSlideAhead),r.broadcast("inView",{data:this.isInView}),this.index===e&&(r.loadContent(),r.beforeShow(),r.afterShow(i.SLIDE_SHOWN_BY.INIT)),this.isFullscreen!==i.FULLSCREEN.OPENED||r.sirv||(r.broadcast("before"+t+"In",{data:{pseudo:this.isPseudo}}),r.broadcast("after"+t+"In",{data:{pseudo:this.isPseudo}})),this.checkLoop(this.index),this.selectors&&(this.selectors.insert(e,r.selectorData),a&&this.selectors.activateItem(this.index)),this.checkSingleSlide(),this.showHideSelectors(),this.showHideArrows(),!0}return!1},f.removeSlide=function(e){var t=this,i=!1;if("string"===y.typeOf(e)&&(e=this.findSlideIndex(e)),"number"===y.typeOf(e)&&e>=0&&e<this.slides.length){var s=this.slides[e].$J_UUID;return this.slides[e].enabled?this.disableSlide(e,!0):i=!0,this.slides[e].destroy(),this.slides.splice(e,1),this.enabledIndexesOfSlides=[],this.slides.forEach((function(e,i){e.newIndex=i,e.enabled&&t.controlEnabledSlides(i)})),this.selectors&&this.selectors.pickOut(s),null!==this.index&&e<=this.index&&0!==this.index&&(this.index-=1),i&&this.checkSingleSlide(),this.isHiddenSlides()&&(this.timerRemove=setTimeout((function(){t.instanceNode&&t.emit("destroy",{data:{id:t.id,node:t.instanceNode.node}})}),100)),!0}return!1},f.createContextMenu=function(){var e=this,t=this.option,s=[];t("contextmenu.enable")?((t("contextmenu.text.zoom.in")||t("contextmenu.text.zoom.out"))&&(t("contextmenu.text.zoom.in")&&s.push({id:"zoomin",label:t("contextmenu.text.zoom.in"),hidden:!1,action:function(t){e.slides[e.index].zoomIn(t.left,t.top)}}),t("contextmenu.text.zoom.out")&&s.push({id:"zoomout",label:t("contextmenu.text.zoom.out"),disabled:!0,hidden:!1,action:function(t){e.slides[e.index].zoomOut(t.left,t.top)}})),t("fullscreen.enable")&&(t("contextmenu.text.fullscreen.enter")||t("contextmenu.text.fullscreen.exit"))&&(t("contextmenu.text.fullscreen.enter")&&s.push({id:"enterfullscreen",label:t("contextmenu.text.fullscreen.enter"),hidden:!t("fullscreen.enable"),action:function(){e.enterFullScreen()}}),t("contextmenu.text.fullscreen.exit")&&s.push({id:"exitfullscreen",label:t("contextmenu.text.fullscreen.exit"),hidden:!0,action:function(){e.exitFullScreen()}})),t("contextmenu.text.download")&&(s.length&&s.push({id:"sirv-separator",hidden:!1,separator:!0}),s.push({id:"download",label:t("contextmenu.text.download"),action:function(){var t=e.slides[e.index].originImageUrl;t&&(y.$new("iframe").setCss({width:0,height:0,display:"none"}).appendTo(y.D.node.body).node.src=t+"?format=original&dl")}})),this.movingContainer.addEvent("contextmenu",(function(s){var n,o,r=!1,a=!0,l=!1,d=!1,c=!1,h="zoomin",u="zoomout",p="enterfullscreen",f="exitfullscreen";if(s.stopDefaults(),e.contextMenu&&!e.isMoving&&e.enabledIndexesOfSlides.length){var v=e.slides[e.index],m=v.typeOfSlide,S=i.SLIDE.TYPES;if(e.isReady&&v.isReady&&v.sirv&&m){var y=v.options;switch(m){case S.SPIN:n=!0;break;case S.ZOOM:n="deep"===y.mode;break;case S.IMAGE:break;case S.VIDEO:a=!1}n&&e.slides[e.index].zoomSizeExist&&(t("contextmenu.text.zoom.in")||t("contextmenu.text.zoom.out"))?(o=e.slides[e.index].zoomData,e.contextMenu.showItem(h),o.isZoomed&&1===o.zoom?e.contextMenu.disableItem(h):e.contextMenu.enableItem(h),e.contextMenu.showItem(u),o.isZoomed?e.contextMenu.enableItem(u):e.contextMenu.disableItem(u),l=!0):(e.contextMenu.hideItem(h),e.contextMenu.hideItem(u)),t("fullscreen.enable")&&(e.isFullscreenState()?(e.contextMenu.hideItem(p),e.contextMenu.isExist(f)&&(e.contextMenu.showItem(f),o&&o.isZoomed?e.contextMenu.disableItem(f):e.contextMenu.enableItem(f),d=!0)):(e.contextMenu.isExist(p)&&(e.contextMenu.showItem(p),o&&o.isZoomed?e.contextMenu.disableItem(p):e.contextMenu.enableItem(p),d=!0),e.contextMenu.hideItem(f))),e.contextMenu.isExist("download")&&a?(e.contextMenu.showItem("download"),c=!0):e.contextMenu.hideItem("download"),(l||d||c)&&((l||d)&&c&&m!==S.VIDEO?e.contextMenu.showItem("sirv-separator"):e.contextMenu.hideItem("sirv-separator"),r=!0,e.broadcast("stopContext"))}e.contextMenu.canShow=r}})),s.length&&!y.browser.mobile&&(this.contextMenu=new a(this.movingContainer,s,"sirv"),t("fullscreen.enable")&&(this.contextMenu.fullScreenBox=this.fullScreenBox))):this.movingContainer.addEvent("contextmenu",(function(e){e.stop()}))},f.enterFullScreen=function(){var e=this;if(this.isFullscreen!==i.FULLSCREEN.CLOSED)return!1;this.addHistory(),this.isFullscreen=i.FULLSCREEN.OPENING,this.fullscreenStartTime=+new Date;var s=!this.option("fullscreen.native")||!y.browser.fullScreen.capable||!y.browser.fullScreen.enabled();return X&&X.appendTo(y.D.node.body),this.disableFullscreenButton(),this.hideFullscreenButton(),this.selectors&&(this.setClasses(),this.option("fullscreen.thumbnails.enable")&&this.appendSelectors(),this.selectors.beforeEnterFullscreen()),this.slideWrapper.removeClass(i.CSS_CURSOR_FULSCREEN_ALWAYS),this.fullScreenBox.setCss({position:"fixed",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:99999999999}),this.boxSize=this.instanceNode.size,this.boxBoundaries=this.instanceNode.rect,this.fullScreenBox.append(this.movingContainer),g(y.D.node.body).append(this.fullScreenBox),this.movingContainer.setCssProp("height","100%"),this.broadcast("before"+t+"In",{data:{pseudo:s}}),this.slideWrapper.setCssProp("height",""),u&&this.productDetail&&this.productDetail.open(),y.browser.fullScreen.request(this.fullScreenBox,{windowFullscreen:!this.option("fullscreen.native"),onEnter:this.onEnteredFullScreen.bind(this),onExit:function(){[i.FULLSCREEN.CLOSED,i.FULLSCREEN.OPENING].includes(e.isFullscreen)||(e.isFullscreen=i.FULLSCREEN.CLOSING,e._beforeExitFullscreen(),e.broadcast("before"+t+"Out",{data:{pseudo:!1}}),e.onExitFullScreen())},fallback:function(){var t=y.D.node.getElementsByTagName("html")[0];g(t).addClass(c),g(document.body).render(),setTimeout((function(){return e.onEnteredFullScreen(!0)}),64)}}),!0},f.onEnteredFullScreen=function(e){var s=this;if(this.isFullscreen===i.FULLSCREEN.OPENING){this.isPseudo=e,e&&this.isFullscreen===i.FULLSCREEN.OPENING&&(this.fullScreenBox.setCss({top:X?Math.abs(X.node.getBoundingClientRect().top):0,left:0,right:0,bottom:0,width:"auto",height:X?y.W.node.innerHeight:"auto",display:this.productDetail?"flex":"block",position:"fixed"}),y.D.addEvent("keydown",this.pseudoFSEvent)),this.isFullscreen=i.FULLSCREEN.OPENED,this.fullscreenButton&&(this.fullscreenButton.removeClass(n),this.fullscreenButton.addClass(l),this.slides[this.index]&&this.slides[this.index].videoSlide&&this.isFullscreen!==i.FULLSCREEN.OPENED||setTimeout((function(){s.enableFullscreenButton(),s.visibleFullscreenButton()}),1)),this.selectors&&this.selectors.afterEnterFullscreen(),this.slides.length>1&&y.D.addEvent("keyup",this.keyBoardArrowsCallback),this.showHideArrows(),this.showHideSelectors(),this.broadcast("after"+t+"In",{data:{pseudo:e}}),this.onResize();var o={};this.enabledIndexesOfSlides.length&&(o={slide:this.slides[this.index].api}),this.sendEvent("fullscreenIn",o)}},f._beforeExitFullscreen=function(){this.disableFullscreenButton(),this.hideFullscreenButton(),this.option("fullscreen.always")&&this.slideWrapper.addClass(i.CSS_CURSOR_FULSCREEN_ALWAYS),this.selectors&&(this.option("fullscreen.thumbnails.enable")&&this.appendSelectors(),this.setClasses(),this.selectors.beforeExitFullscreen()),u&&this.productDetail&&this.productDetail.close()},f.exitFullScreen=function(){if(this.isFullscreen!==i.FULLSCREEN.OPENED)return!1;if(this.isFullscreen=i.FULLSCREEN.CLOSING,this._beforeExitFullscreen(),X&&X.remove(),y.browser.fullScreen.capable&&y.browser.fullScreen.enabled()&&this.option("fullscreen.native"))this.broadcast("before"+t+"Out",{data:{pseudo:!1}}),y.browser.fullScreen.cancel.call(document);else{var e=y.D.node.getElementsByTagName("html")[0];g(e).removeClass(c),this.broadcast("before"+t+"Out",{data:{pseudo:!0}}),this.onExitFullScreen(!0)}return!0},f.onExitFullScreen=function(e){var s=this;if(![i.FULLSCREEN.CLOSED,i.FULLSCREEN.OPENING].includes(this.isFullscreen)){if(y.D.removeEvent("keyup",this.keyBoardArrowsCallback),this.showHideArrows(),this.showHideSelectors(),this.instanceNode.append(this.movingContainer),this.fullScreenBox.remove(),this.fullscreenButton&&(this.fullscreenButton.removeClass(l),this.fullscreenButton.addClass(n),this.slides[this.index]&&this.slides[this.index].videoSlide&&this.isFullscreen!==i.FULLSCREEN.OPENED||setTimeout((function(){s.enableFullscreenButton(),s.visibleFullscreenButton()}),1)),this.doHistory){var o="#sirv-viewer-"+this.fullscreenViewId;try{y.W.node.location.hash===o&&y.W.node.history.back()}catch(e){}}this.isFullscreen=i.FULLSCREEN.CLOSED,this.isPseudo=!1,this.selectors&&this.selectors.afterExitFullscreen(),this.setContainerSize(),this.fullscreenStartTime=null,this.broadcast("after"+t+"Out",{data:{pseudo:e}});var r={};this.enabledIndexesOfSlides.length&&(r={slide:this.slides[this.index].api}),this.sendEvent("fullscreenOut",r),this.onResize()}},f.getSlide=function(e){var t;return(null===e||"number"===y.typeOf(e)&&e>=this.slides.length)&&(e=this.index),"string"===y.typeOf(e)&&(e=this.findSlideIndex(e)),null==(t=this.slides[e])?void 0:t.api},f.onResizeWithoutSelectors=function(){this.destroyed||(X&&this.isFullscreen===i.FULLSCREEN.OPENED&&this.fullScreenBox.setCss({height:y.W.node.innerHeight,top:Math.abs(X.node.getBoundingClientRect().top)}),this.setRootMargin(),this.setContainerSize(),this.slides.forEach((function(e){e.resize()})))},f.onResize=function(){this.destroyed||(this.selectors&&this.selectors.onResize(),this.onResizeDebounce())},f.play=function(e){var t=!1,i=this.option("slide.delay");return y.defined(e)&&"number"===y.typeOf(e)&&e>9&&(i=e),(null===this.autoplayTimer&&!this.isAutoplay||i!==this.autoplayDelay)&&(this.autoplayDelay=i,this.isAutoplay=!0,this.residualAutoplayTime=this.autoplayDelay,this.autoplay(),t=!0),t},f.pause=function(){var e=this.autoplayTimer;return this.isAutoplay=!1,clearTimeout(this.autoplayTimer),this.autoplayTimer=null,this.residualAutoplayTime=this.autoplayDelay,null===e},f.pauseAutoplay=function(){clearTimeout(this.autoplayTimer),this.autoplayTimer=null,this.residualAutoplayTime-=+new Date-this.currentAutoplayTime},f.autoplay=function(){var e=this;if(this.isAutoplay){this.currentAutoplayTime=+new Date;var t=this.autoplayDelay;this.residualAutoplayTime!==t&&(t=this.residualAutoplayTime<1e3?1e3:this.residualAutoplayTime),clearTimeout(this.autoplayTimer),this.autoplayTimer=setTimeout((function(){e.destroyed||e.jump("next",i.SLIDE_SHOWN_BY.AUTOPLAY)}),t)}},f.destroy=function(){var e,s,n=this;this.destroyed=!0,this.onResizeDebounce.cancel(),this.onResizeDebounce=null,clearTimeout(this.autoplayTimer),this.autoplayTimer=null,this.selectorsDebounce&&(this.selectorsDebounce.cancel(),this.selectorsDebounce=null),g(y.W).removeEvent("resize",this.onResizeHandler),this.onResizeHandler=null,g(y.D).removeEvent("keyup",this.keyBoardArrowsCallback),this.inViewModule&&(this.inViewModule.disconnect(),this.inViewModule=null),this.doHistory&&(g(y.W).removeEvent("popstate",this.onHistoryStateChange),i.FULLSCREEN_VIEWERS_IDs_ARRAY.splice(i.FULLSCREEN_VIEWERS_IDs_ARRAY.indexOf(this.fullscreenViewId),1)),this.movingContainer.removeEvent("mouseout"),this.slideWrapper.removeClass(i.CSS_CURSOR_FULSCREEN_ALWAYS),this.clearingTouchdragFunction&&this.clearingTouchdragFunction(),this.slidesContainer.removeEvent("touchdrag"),e=this.id,s=!1,(e=e.split("-")).splice(e.length-1,1),(e=e.join("-"))===b&&(s=!0),s&&this.instanceNode.removeAttr("id"),this.contextMenu&&(this.movingContainer.removeEvent("contextmenu"),this.contextMenu.destroy(),this.contextMenu=null),this.productDetail&&(this.productDetail.destroy(),this.productDetail=null),this.fullscreenButton&&(this.fullscreenButton.removeEvent(["btnclick","tap"]),this.fullscreenButton.remove()),this.fullscreenButton=null,this.effect&&(this.effect.destroy(),this.effect=null,this.on("effectStart"),this.on("effectEnd")),this.arrows&&(this.arrows.destroy(),this.arrows=null,this.off("arrowAction")),this.selectors&&(this.selectors.destroy(),this.selectors=null,this.off("visibility"),this.off("changeSlide"),this.off("selectorsReady"),this.off("getSelectorImgUrl"),this.off("selectorsDone"),this.off("getSelectorProportion")),this.off("componentEvent"),this.off("goTo"+t),this.off("goTo"+t+"Out"),this.off("infoReady"),this.off("slideVideoPlay"),this.off("slideVideoPause"),this.off("slideVideoEnd"),this.slides.forEach((function(e){var t=e.originNode;g(t).removeClass("smv-component"),e.destroy()})),this.slides=[],this.off("stats"),this.sliderNodes.forEach((function(e){return n.instanceNode.append(e)})),this.sliderNodes=[],g(y.D).removeEvent("keydown",this.pseudoFSEvent),this.pseudoFSEvent=null,g(y.D).removeEvent("keyup",this.keyBoardArrowsCallback),this.keyBoardArrowsCallback=null,this.fullScreenBox.remove(),this.fullScreenBox=null,this.controlsWrapper.remove(),this.controlsWrapper=null,this.slidesContainer.remove(),this.slidesContainer=null,this.selectorsWrapper.remove(),this.selectorsWrapper=null,this.slideWrapper.remove(),this.slideWrapper=null,this.movingContainer.remove(),this.movingContainer=null,this.isReady=!1,this.doSetSize=!1,this.instanceNode=null,this.externalContainer=null,r.prototype.destroy.call(this)},p}(r);return p}();return G=function(e){return Object.entries(e).forEach((function(t){var i=t[0],s=t[1];(s=g(s.split(";"))).length&&(""===s[s.length-1]&&s.splice(s.length-1,1),s=s.map((function(e){return e.replace(new RegExp("^"+i+"\\."),"")})),e[i]=s.join(";"))})),e},$=function(e,t){var i,s=y.typeOf(t),n=null;return"string"===s?n=e[t]:"array"===s&&e[i=t.shift()]&&(n=t.length?$(e[i],t):e[i]),n},Y=function(e,t,i){return{common:$(e.common,t)||i,mobile:$(e.mobile,t)||i}},function(t){"use strict";function i(i,s,n,o){var r;(r=t.call(this)||this).node=i,r.slider=null,r.lazyInit=o,r.options={},r.spinOptions={},r.zoomOptions={},r.imageOptions={},r.videoOptions={},r.sliderBuilder=new h(s,r.node),r.parseOptions(s),r.privateOptions={common:{},mobile:{}},r.toolOptions=null,r.inViewTimer=null,r.isRun=!1,r.api={isReady:r.isReady.bind(e.assertThisInitialized(r)),items:r.items.bind(e.assertThisInitialized(r)),disableItem:r.disableItem.bind(e.assertThisInitialized(r)),enableItem:r.enableItem.bind(e.assertThisInitialized(r)),enableGroup:r.enableGroup.bind(e.assertThisInitialized(r)),disableGroup:r.disableGroup.bind(e.assertThisInitialized(r)),switchGroup:r.switchGroup.bind(e.assertThisInitialized(r)),insertItem:r.insertItem.bind(e.assertThisInitialized(r)),removeItem:r.removeItem.bind(e.assertThisInitialized(r)),removeAllItems:r.removeAllItems.bind(e.assertThisInitialized(r)),jump:r.jump.bind(e.assertThisInitialized(r)),itemsCount:r.itemsCount.bind(e.assertThisInitialized(r)),next:r.next.bind(e.assertThisInitialized(r)),prev:r.prev.bind(e.assertThisInitialized(r)),isFullscreen:r.isFullscreen.bind(e.assertThisInitialized(r)),fullscreen:r.fullscreen.bind(e.assertThisInitialized(r)),child:r.child.bind(e.assertThisInitialized(r)),play:r.play.bind(e.assertThisInitialized(r)),pause:r.pause.bind(e.assertThisInitialized(r)),sortItems:r.sortItems.bind(e.assertThisInitialized(r))},r.on("viewerPublicEvent",(function(e){Object.assign(e.data.slider,r.api),e.data.slide&&(e.data.slide.parent=function(){return r.api},e.data.slide[e.data.slide.component]&&(e.data.slide[e.data.slide.component].parent=function(){return e.data.slide}))})),r.makeOptions();var a=r.toolOptions.get("autostart");return(a&&"off"!==a||n)&&r.run(),r}e.inheritsLoose(i,t);var s=i.prototype;return s.parseOptions=function(e){var t,i,s="viewer",n="spin",o="zoom",r="image",a="video",l=e.common,d=e.mobile;this.options=Y(e,s,{}),this.spinOptions={common:$(l,[s,n])||$(l,n)||{},mobile:$(d,[s,n])||$(d,n)||{}},this.zoomOptions={common:$(l,[s,o])||$(l,o)||{},mobile:$(d,[s,o])||$(d,o)||{}},this.imageOptions={common:$(l,[s,r])||$(l,r)||{},mobile:$(d,[s,r])||$(d,r)||{}},this.videoOptions={common:$(l,[s,a])||$(l,a)||{},mobile:$(d,[s,a])||$(d,a)||{}},t=this.options,(i=function(e){["spin","zoom","image","video"].forEach((function(t){e[t]&&delete e[t]}))})(t.common),i(t.mobile)},s.getSlideOptions=function(){var e=Y(this.privateOptions,"spin",""),t=Y(this.privateOptions,"zoom",""),i=Y(this.privateOptions,"image",""),s=Y(this.privateOptions,"video","");return{spin:{common:this.spinOptions,local:e},zoom:{common:this.zoomOptions,local:t},image:{common:this.imageOptions,local:i},video:{common:this.videoOptions,local:s}}},s.makeOptions=function(){var e={spin:/^spin/,zoom:/^zoom/,image:/^image/,video:/^video/};this.toolOptions=new y.Options(E),this.toolOptions.fromJSON(this.options.common),this.privateOptions.common=this.toolOptions.fromString(this.node.attr("data-options")||"",e),this.privateOptions.common=G(this.privateOptions.common),y.browser.touchScreen&&y.browser.mobile&&(this.toolOptions.fromJSON(this.options.mobile),this.privateOptions.mobile=this.toolOptions.fromString(this.node.attr("data-mobile-options")||"",e),this.privateOptions.mobile=G(this.privateOptions.mobile))},s.createSlider=function(e){this.slider=new K(this.node,{options:this.toolOptions,slideOptions:this.getSlideOptions(),lazyInit:this.lazyInit,viewerFileContent:e}),this.slider.parentClass=this,this.api.id=this.slider.id},s.run=function(e){var t=this;return this.isRun=!0,this.sliderBuilder.getOptions().then((function(i){t.parseOptions(i.dataOptions),e&&t.makeOptions(),i.content?t.createSlider(i.content):t.sliderBuilder.buildViewer().then((function(e){t.node=e.mainNode,t.createSlider()}))})).catch((function(e){console.log("Sirv: cannot get view from "+e.error)})),!0},s.isReady=function(){var e=!1;return this.slider&&(e=this.slider.isReady),e},s.isFullscreen=function(){var e=!1;return this.isReady()&&(e=2===this.slider.isFullscreen),e},s.startFullInit=function(e,t,i){var s;this.slider&&(this.lazyInit=i,this.parseOptions(e),this.makeOptions(),((s=this.toolOptions.get("autostart"))&&"off"!==s||t)&&this.slider.startFullInit({options:this.toolOptions,slideOptions:this.getSlideOptions(),lazyInit:this.lazyInit}))},s.start=function(){var e=!1;return this.slider||(e=this.run(!0)),e},s.stop=function(){var e=!1;return this.slider&&(e=!0,this.slider.destroy(),this.slider=null,this.off("viewerPublicEvent"),this.isRun=!1,this.sliderBuilder.destroy(),this.sliderBuilder=null,this.destroy()),e},s.insertItem=function(e,t){var i=!1;if(this.isReady()){if("string"===y.typeOf(e)){var s=y.$new("div");s.node.innerHTML=e.trim(),!(e=s.node.firstChild)||3!==e.nodeType&&8!==e.nodeType&&["div","img",C].includes(g(e).tagName)||(e=null)}else if(g(e).tagName===C){var n=y.$new("div");n.append(e),e=n.node}i=this.slider.insertSlide(t,e)}return i},s.removeItem=function(e){var t=!1;return this.isReady()&&(t=this.slider.removeSlide(e)),t},s.removeAllItems=function(){var e=!0;if(this.isReady())for(var t=this.itemsCount()-1;t>=0;t--){var i=this.removeItem(t);e&&(e=i)}else e=!1;return e},s.itemsCount=function(e){var t=0;if(this.isReady()){var i=this.items(e);null!==i&&(t=i.length)}return t},s.items=function(e){var t=this,i=null;return this.isReady()&&(i=this.slider.getItems(e)).forEach((function(e){e.parent=function(){return t.api}})),i},s.disableItem=function(e){var t=!1;return this.isReady()&&(t=this.slider.disableSlide(e)),t},s.enableItem=function(e){var t=!1;return this.isReady()&&(t=this.slider.enableSlide(e)),t},s.enableGroup=function(e){var t=!1;return this.isReady()&&(t=this.slider.enableGroupOfSlides(e)),t},s.disableGroup=function(e){var t=!1;return this.isReady()&&(t=this.slider.disableGroupOfSlides(e)),t},s.switchGroup=function(e){var t=!1;return this.isReady()&&(t=this.slider.switchGroupOfSlides(e)),t},s.jump=function(e){var t=!1;return this.isReady()&&(t=this.slider.jump(e)),t},s.next=function(){var e=!1;return this.isReady()&&(e=this.slider.jump("next")),e},s.prev=function(){var e=!1;return this.isReady()&&(e=this.slider.jump("prev")),e},s.fullscreen=function(){var e=!1;return this.isReady()&&(e=this.isFullscreen()?this.slider.exitFullScreen():this.slider.enterFullScreen()),e},s.child=function(e){var t,i=this,s=null;return this.isReady()&&(t=e,"number"!==y.typeOf(t)&&"string"!==y.typeOf(t)&&(t=null),e=t,(s=this.slider.getSlide(e))&&(s.parent=function(){return i.api})),s},s.play=function(e){var t=!1;return this.isReady()&&(t=this.slider.play(e)),t},s.pause=function(){var e=!1;return this.isReady()&&(e=this.slider.pause()),e},s.sortItems=function(e){this.isReady()&&this.slider.sortItems(e)},s.isEqual=function(e){return e===this.node},s.checkReadiness=function(e,t){var i=!1;return this.isReady()&&(i=this.slider.checkReadiness(e,t)),i},s.sendEvent=function(e,t){this.isReady()&&this.slider.sendReadyEvent(e,t)},i}(r)}));var w=window,_Sirv={items:{},eventManager:null,options:{}},isLazyImage=!0,baseModules=["bHelpers","magicJS","globalVariables","globalFunctions","EventManager","helper","Slider"];isLazyImage&&baseModules.push("LazyImage"),w.Sirv.require(baseModules,(function(e,t,i,s,n,o,r,a){var l=t,d=function(e,t,i){var s=[],n=null,o=_Sirv.items[t];return o.length&&e&&(n=function(e,t){var i=e;return"string"===l.typeOf(i)&&(i=(t||document).querySelector(i)),l.$(i)}(e,i),n&&(s=o.filter((function(e){return e.node===n})))),s.length?s[0]:null},c=function(e,t){return t||(t=document),"collection"===l.typeOf(e)?e:["element","magicjs-element"].includes(l.typeOf(e))?[e]:Array.from((l.$(t).node||t).querySelectorAll(e||".Sirv"))},h=function(e){var t=null;return(e=l.$(e)).hasClass("Sirv")&&(t="img"===e.tagName||e.attr("data-bg-src")||e.getCss("background-image")&&"none"!==e.getCss("background-image")?"image":"viewer"),t};_Sirv.items.image=[],_Sirv.items.viewer=[],_Sirv.start=function(e,t,i,n){var u=!1;"boolean"===l.typeOf(e)&&(u=e,e=void 0),Array.from(c(e,t)).forEach((function(e){var t=l.$(e);if(e&&t.hasClass("Sirv")){var c=h(t.node);if(i&&i!==c&&(c=null),_Sirv.options.common=o.deepExtend({},l.W.node.SirvOptions||{}),_Sirv.options.mobile=o.deepExtend({},l.W.node.SirvMobileOptions||{}),c&&["image","viewer"].includes(c)){if(!n&&function(e,t){var i=!1,s=t;return"image"===s&&(s="lazyImage"),e.common[s]&&(!1===e.common[s].autostart||["false","off"].includes(e.common[s].autostart))&&(i=!0),!i&&l.browser.touchScreen&&l.browser.mobile&&e.mobile[s]&&(!1===e.mobile[s].autostart||["false","off"].includes(e.mobile[s].autostart))&&(i=!0),i}(_Sirv.options,c))return;var p=d(t.node,c);if(p)p.startFullInit(Object.assign({},_Sirv.options),n,u);else switch(c){case"image":isLazyImage?(s.rootDOM.attachNode(e),s.rootDOM.resetGlobalCSS(e),(p=new a(t.node,{options:{common:o.deepExtend({},_Sirv.options.common.lazyImage||{}),mobile:o.deepExtend({},_Sirv.options.mobile.lazyImage||{})}},n)).isRun?(_Sirv.items.image.push(p),p.parentClass=_Sirv.eventManager):s.rootDOM.detachNode(e)):console.info("Sirv: Image component wasn't found.");break;case"viewer":s.rootDOM.attachNode(e),s.rootDOM.addMainStyle(e),(p=new r(t,Object.assign({},_Sirv.options),n,u)).isRun?(_Sirv.items.viewer.push(p),p.parentClass=_Sirv.eventManager):s.rootDOM.detachNode(e)}}}}))},_Sirv.stop=function(e,t,i){var s=["image","viewer"];i&&(s=[i]),s.forEach((function(i){e||t?Array.from(c(e,t)).forEach((function(e){var t=d(e,i);t&&t.stop()&&_Sirv.items[i].splice(_Sirv.items[i].indexOf(t),1)})):_Sirv.items[i]=_Sirv.items[i].filter((function(e){return!e.stop(!0)}))}))},_Sirv.getInstance=function(e,t,i){var s=d(e,t,i);return s?s.api:s},_Sirv.eventManager=new n(_Sirv.items),_Sirv.addFilterCallback=function(e,t){t?s.viewerFilters.unshift(e):s.viewerFilters.push(e)},_Sirv.removeFilterCallback=function(e){var t=[];s.viewerFilters.forEach((function(i){i!==e&&t.push(i)})),s.viewerFilters=t},_Sirv.removeAllFilterCallback=function(){s.viewerFilters=[]},s.stop=function(e,t){return _Sirv.stop(e,null,t)};var u=function(){var e={added:[],removed:[]},t=o.debounce((function(){var t=e.added.splice(0),i=e.removed.splice(0);t.forEach((function(e){(e=l.$(e)).node&&3!==e.node.nodeType&&8!==e.node.nodeType&&e.node.getElementsByClassName&&(e.hasClass("Sirv")?_Sirv.start(e,null,h(e)):s.rootDOM.rootContains(e.node)&&function(e){return e.closest?!e.closest("div.Sirv"):"trident"===l.browser.engine}(e.node)&&_Sirv.start(null,e))}));var n=[];i.forEach((function(e){(e=l.$(e)).node&&3!==e.node.nodeType&&8!==e.node.nodeType&&e.node.getElementsByClassName&&(e.hasClass("Sirv")?n.push(e):[].push.apply(n,e.node.getElementsByClassName("Sirv"))),n.forEach((function(e){if(e=l.$(e),!l.D.node.body.contains(e.node))try{_Sirv.stop(e,null,h(e))}catch(e){}}))}))}),250);l.W.node.MutationObserver&&new MutationObserver((function(i,s){for(var n=0,o=i.length;n<o;n++)"childList"===i[n].type&&([].push.apply(e.added,i[n].addedNodes),[].push.apply(e.removed,i[n].removedNodes));t()})).observe(l.D.node.body,{childList:!0,subtree:!0,attributes:!1})};s.rootDOM.resetGlobalCSS(),s.iconsHash.make(),"loading"===l.D.node.readyState&&_Sirv.start(!0),l.D.addEvent("domready",(function(){_Sirv.start(),u()}))}));var sayDeprecated=function(e){console.log("sirv.js: The method Sirv"+e+".refresh() is deprecated. \r\n         Use Sirv"+e+".stop() and Sirv"+e+".start() instead.")};w.Sirv.version="v3.3.2",w.Sirv.build="c75606de",w.Sirv.options={},w.Sirv.lazyimage={start:function(e,t){_Sirv.start(e,t,"image",!0)},stop:function(e,t){_Sirv.stop(e,t,"image")},getInstance:function(e,t){var i=null;return _Sirv.getInstance&&(i=_Sirv.getInstance(e,"image",t)),i},refresh:function(){sayDeprecated(".image")},on:function(e,t){return w.Sirv.on(e,t)},off:function(e,t){return w.Sirv.off(e,t)}},w.Sirv.viewer={start:function(e,t){_Sirv.start(e,t,"viewer",!0)},stop:function(e,t){_Sirv.stop(e,t,"viewer")},getInstance:function(e,t){var i=null;return _Sirv.getInstance&&(i=_Sirv.getInstance(e,"viewer",t)),i},refresh:function(){sayDeprecated(".viewer")},on:function(e,t){return w.Sirv.on(e,t)},off:function(e,t){return w.Sirv.off(e,t)},filters:{add:function(e,t){_Sirv.addFilterCallback(e,t)},remove:function(e){_Sirv.removeFilterCallback(e)},removeAll:function(){_Sirv.removeAllFilterCallback()}}},w.Sirv.start=function(e,t){_Sirv.start(e,t,null,!0)},w.Sirv.stop=function(e,t){_Sirv.stop(e,t)},w.Sirv.getInstance=function(e,t,i){var s=null;_Sirv.getInstance&&(s=("lazyimage"===t?w.Sirv.lazyimage:w.Sirv.viewer).getInstance(e,i));return s},w.Sirv.refresh=function(){sayDeprecated("")},w.Sirv.on=function(e,t){return _Sirv.eventManager.addEvent(e,t)},w.Sirv.off=function(e,t){return _Sirv.eventManager.removeEvent(e,t)},w.Sirv.whenReady=function(e){return e()},w.Sirv.whenLoaded=function(e){return e()};})();}