Sirv.define("ImageZoom",["bHelpers","magicJS","globalVariables","globalFunctions","helper","EventEmitter"],(function(i,t,e,s,o,h){var n=t,a=n.$;s.rootDOM.addModuleCSSByName("ImageZoom",(function(){return".sirv-zoom{position:absolute;backface-visibility:hidden!important;-webkit-touch-callout:none!important;-ms-user-select:none!important;user-select:none!important;outline:0!important;z-index:999999999;touch-action:none;-webkit-tap-highlight-color:transparent!important}.sirv-zoom .sirv-outside-zoom{background:#fff;box-shadow:0 0 3px rgba(153,153,153,.5)}.sirv-zoom .sirv-circle-zoom{border:0;border-radius:100%;background:rgba(255,255,255,.3)}.sirv-zoom .sirv-circle-zoom::before{position:absolute;display:block;top:0;right:0;bottom:0;left:0;border:1px solid rgba(153,153,153,.7);border-radius:100%;background:0 0;box-shadow:inset 0 0 20px 1px rgba(0,0,0,.3);content:'';z-index:126}.sirv-zoom .sirv-zoom-wrapper{position:absolute;display:inline-block;overflow:hidden;z-index:9}.sirv-zoom .sirv-zoom-wrapper .sirv-zoom-image-wrapper{position:absolute;overflow:hidden}.sirv-zoom .sirv-zoom-wrapper .sirv-zoom-image-wrapper>img{position:absolute;top:0;left:0;margin:0;padding:0;-webkit-user-drag:none;-ms-user-select:none;user-select:none;user-drag:none}.sirv-zoom .sirv-zoom-wrapper .sirv-deepzoom{position:relative;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:42}.sirv-zoom .sirv-zoom-wrapper .sirv-deepzoom>div{position:absolute;top:0;left:0;width:100%;height:100%}.sirv-zoom .sirv-zoom-wrapper .sirv-deepzoom>div canvas{top:0;left:0}.zoom-helper{position:fixed;border-radius:4px;display:inline-block;top:10px;right:10px;padding:10px;border:1px solid #ccc9c9;background-color:#eaeaea;box-shadow:1px 1px 9px 1px rgba(0,0,0,.5);overflow:hidden;z-index:999;overflow-y:auto}.zoom-helper .z-loaded-color{background-color:#87bd89!important}.zoom-helper .z-loading-color{background-color:#a99cef!important}.zoom-helper .z-canceled-color{background-color:#f19c9c!important}.zoom-helper .z-helper-head{margin-bottom:9px}.zoom-helper .z-body,.zoom-helper .z-head,.zoom-helper .z-level{position:relative}.zoom-helper .z-level{border-radius:4px;margin-bottom:9px;padding:10px;background-color:#d4d3d3;box-sizing:border-box}.zoom-helper .z-head{margin-bottom:9px}.zoom-helper .z-body{border-top:1px solid;border-left:1px solid}.zoom-helper .z-tile{position:absolute;display:inline-block;border-right:1px solid;border-bottom:1px solid;box-sizing:border-box}.zoom-helper .z-status{border-radius:50%;display:inline-block;width:10px;height:10px;margin-left:10px;background-color:#e87979;box-sizing:border-box}.zoom-helper .z-status.shown{background-color:#66ca66!important}.sirv-zoom-map{position:absolute;box-sizing:border-box;bottom:16px;left:16px;width:200px;height:150px;border:1px solid #bdbdbd;overflow:hidden;z-index:126;cursor:pointer}.sirv-zoom-map .sirv-zoom-map-lens{position:absolute;box-sizing:border-box;top:50px;left:50px;width:50px;height:50px;border:1px solid #fff;z-index:42}.sirv-zoom-map .sirv-zoom-map-lens::after,.sirv-zoom-map .sirv-zoom-map-lens::before{position:absolute;display:block;width:100%;height:100%;content:''}.sirv-zoom-map .sirv-zoom-map-lens::before{box-sizing:content-box;border-width:1em;border-style:solid;border-color:rgba(0,0,0,.6);border-image:initial;top:-1em;left:-1em}.sirv-zoom-map .sirv-zoom-map-lens::after{box-sizing:border-box;border-width:1px;border-style:solid;border-color:#fff;border-image:initial}.sirv-zoom-map>img{position:relative;top:0;left:0;width:100%;height:100%}.sirv-zoom-lens,.sirv-zoom-lens-wrapper{position:absolute;top:0;left:0}.sirv-zoom-lens-wrapper{background-color:rgba(153,153,153,.4);overflow:hidden;z-index:9999999999}.sirv-zoom-lens{box-shadow:0 0 3px rgba(153,153,153,.5);overflow:hidden}.sirv-zoom-lens img{max-width:none!important;max-height:none!important;transition:none!important}.sirv-filter-bw{filter:grayscale(.5) opacity(.5);filter:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='saturate' values='0'/><feComponentTransfer><feFuncA type='linear' slope='0.6'/></feComponentTransfer></filter></svg>#grayscale\")}"}));var r,l,c,d,u,p,m,g,v,w,f,S,z,y={canZoom:"smv-cursor-zoom",zoomIn:"smv-cursor-zoom-in",zoomOut:"smv-cursor-zoom-out",drag:"smv-cursor-dragging"},x=["mousedrag","touchdrag"],P=["edge","ie"].includes(n.browser.uaName)?"pointerup":"touchend",b=["edge","ie"].includes(n.browser.uaName)?"pointermove":"mousemove",E=function(i,t){return i/100*t},C=function(i,t){return(i-t)/2},T=function(i,t,e,s){return i>t&&(i=t),i+e<s&&(i=s-e),i},I=function(i,t){return i/t*100},D=function(i,t,e){return i<t&&(i=t),i>e&&(i=e),i},A=function(i,t){return t/i},M=function(t){"use strict";function e(i){var e;return(e=t.call(this)||this).o=Object.assign({maxTileSize:15,minTileSize:5},i||{}),e.inDoc=!1,e.container=n.$new("div").addClass("zoom-helper"),e.header=n.$new("div").addClass("z-helper-head"),e.zoom=n.$new("span").addClass("z-zoom"),e.tileSize={width:0,height:0},e.levels={},e}i.inheritsLoose(e,t);var s=e.prototype;return s._createHead=function(){var i=n.$new("div");i.innerHTML="Zoom: ",i.append(this.zoom),this.setZoom(0),this.header.append(i),(i=n.$new("div")).innerHTML='<div class="z-status z-canceled-color"></div> - canceled',this.header.append(i),(i=n.$new("div")).innerHTML='<div class="z-status z-loading-color"></div> - loading',this.header.append(i),(i=n.$new("div")).innerHTML='<div class="z-status z-loaded-color"></div> - loaded',this.header.append(i)},s._calcSizeOfTile=function(i){var t,e,s=this,o=function(i,t){var e=parseInt(i*t,10);return e<s.o.minTileSize&&(e=s.o.minTileSize),e};return i.width>i.height?e=o(t=this.o.maxTileSize,i.height/i.width):t=o(e=this.o.maxTileSize,i.width/i.height),{width:t,height:e}},s._createTile=function(i,t,e){var s=function(i,t){return i?((e=parseInt(t/2,10))<3&&(e=3),e):t;var e},o=function(i,t){return i%t<t/2},h=s(e.cols-1===i&&o(e.levelSize.width,e.tileSize.width),this.tileSize.width),a=s(e.rows-1===t&&o(e.levelSize.height,e.tileSize.height),this.tileSize.height),r=n.$new("div").addClass("z-tile");return r.setCss({top:t*this.tileSize.height+"px",left:i*this.tileSize.width+"px",width:h+"px",height:a+"px"}),{currentClass:null,width:h,height:a,col:i,row:t,node:r}},s._show=function(i){i&&(this.inDoc||(this.inDoc=!0,this._createHead(),this.container.append(this.header),a(n.D.node.body).append(this.container)),i.inDoc||(i.inDoc=!0,this.container.append(i.node),this.container.setCssProp("max-height",n.W.innerHeight-55+"px")))},s._setItemClass=function(i,t,e,s){var o=i.tiles[e][t];o.currentClass!==s&&(o.currentClass&&o.node.removeClass(o.currentClass),o.currentClass=s,o.node.addClass(s))},s.setZoom=function(i){(i+="").length<2&&(i+=".0"),this.zoom.innerHTML=i},s.createLevel=function(i){var t=this,e=n.$new("div").addClass("z-level"),s=n.$new("div").addClass("z-body"),o=n.$new("div").addClass("z-head"),h=n.$new("div").addClass("z-status"),a=n.$new("div");a.innerHTML="Level: "+i.level,o.append(a),(a=n.$new("div")).innerHTML="Shown:",a.append(h),o.append(a),(a=n.$new("div")).innerHTML=i.levelSize.width+"x"+i.levelSize.height,o.append(a),e.append(o),e.append(s),this.tileSize.width||(this.tileSize=this._calcSizeOfTile(i.levelSize));var r=function(e,o){var h,n,a=[];for(n=0;n<o;n++){var r=[];for(h=0;h<e;h++){var l=t._createTile(h,n,i);s.append(l.node),r.push(l)}a.push(r)}return a}(i.cols,i.rows),l=r[i.rows-1][i.cols-1];s.setCss({width:(i.cols-1)*this.tileSize.width+l.width+"px",height:(i.rows-1)*this.tileSize.height+l.height+"px"}),this.levels[i.level]={inDoc:!1,number:i.level,status:h,node:e,head:o,body:s,tiles:r}},s.tileAction=function(i){var t,e=this.levels[i.level+""];switch(i.type){case 0:t="z-canceled-color";break;case 1:t="z-loading-color";break;case 2:t="z-loaded-color"}this._setItemClass(e,i.col,i.row,t)},s.setLevelState=function(i,t){var e=this.levels[i+""],s="shown";t?e.inDoc&&e.status.addClass(s):e.status.removeClass(s)},s.setData=function(i){var t;n.defined(i.level)&&(t=this.levels[i.level+""]),t&&this._show(t),i.zoom&&this.setZoom(i.zoom),t&&"col"in i&&this._setItemClass(t,i.col,i.row,"z-loaded-color"),t&&n.defined(i.levelStatus)&&this.setLevelState(i.level,i.levelStatus)},s.destroy=function(){this.inDoc&&(this.inDoc=!1,this.zoom.remove(),this.zoom.inneHTML="",this.header.remove(),this.header.inneHTML="",this.container.remove(),this.container.inneHTML="",this.levels={},this.tileSize={width:0,height:0}),t.prototype.destroy.call(this)},e}(h),k=(r=function(){"use strict";function t(i){this.isInner=i.inner,this.rows=i.lengthOfRow,this.cols=i.lengthOfColumn,this.size={width:i.cameraWidth,height:i.cameraHeight},this.bMapS={width:i.mapWidth,height:i.mapHeight},this.bTileS={width:i.tileWidth,height:i.tileHeight},this.bScale={x:i.scaleX,y:i.scaleY},this.mapS={width:this.bMapS.width,height:this.bMapS.height},this.tileS={width:this.bTileS.width,height:this.bTileS.height},this.baseLastTileSize={width:this.bMapS.width-(this.cols-1)*this.bTileS.width,height:this.bMapS.height-(this.rows-1)*this.bTileS.height},this.lastTileSize={width:this.baseLastTileSize.width,height:this.baseLastTileSize.height},this.position={x:0,y:0},this.lastCorrectionPosition={x:0,y:0},this.scale={x:0,y:0},this.lastScale=0,this.lastGlobaslScale=0,this.count={x:0,y:0},this.calcCount(),this.shownTiles={startX:0,countX:this.count.x,startY:0,countY:this.count.y}}t.getTileIndex=function(i,t){return Math.floor(i/t)},t.getTileSize=function(i,t){return i*t};var e=t.prototype;return e.checkTile=function(i,t){var e=this.shownTiles;return e.startX<=i&&e.startY<=t&&e.startX+e.countX>i&&e.startY+e.countY>t},e.calcCount=function(){this.count={x:Math.ceil(this.size.width/this.tileS.width)+1,y:Math.ceil(this.size.height/this.tileS.height)+1}},e.findShownTiles=function(){var i=this.position,e=this.tileS,s=0,o=0,h=this.count.x,n=this.count.y;i.x<0&&(s=t.getTileIndex(Math.abs(i.x),e.width)),i.y<0&&(o=t.getTileIndex(Math.abs(i.y),e.height)),s+h>this.cols&&(h=this.cols-s),o+n>this.rows&&(n=this.rows-o),this.shownTiles={startX:s,countX:h,startY:o,countY:n}},e.calcTileSize=function(){this.tileS.width=t.getTileSize(this.bTileS.width,this.scale.x),this.tileS.height=t.getTileSize(this.bTileS.height,this.scale.y),this.lastTileSize.width=t.getTileSize(this.baseLastTileSize.width,this.scale.x),this.lastTileSize.height=t.getTileSize(this.baseLastTileSize.height,this.scale.y)},e.calcData=function(i){this.lastScale!==this.scale.x&&(this.calcTileSize(),this.calcCount(),this.mapS.width=this.tileS.width*(this.cols-1)+this.lastTileSize.width,this.mapS.height=this.tileS.height*(this.rows-1)+this.lastTileSize.height,this.lastCorrectionPosition.x=(this.bMapS.width*this.bScale.x-this.mapS.width)/2,this.lastCorrectionPosition.y=(this.bMapS.height*this.bScale.y-this.mapS.height)/2,this.lastScale=this.scale.x),this.position.x=i.x+this.lastCorrectionPosition.x,this.position.y=i.y+this.lastCorrectionPosition.y},e.action=function(i,t){this.lastGlobaslScale!==t.x&&(this.lastScale=this.scale.x,this.scale.x=t.x*this.bScale.x,this.scale.y=t.y*this.bScale.y,this.lastGlobaslScale=t.x),this.calcData(i),this.findShownTiles()},e.resize=function(i){this.size.width=i.width,this.size.height=i.height,this.calcCount(),this.findShownTiles()},e.destroy=function(){this.shownTiles=[]},i.createClass(t,[{key:"x",get:function(){return this.position.x}},{key:"y",get:function(){return this.position.y}},{key:"width",get:function(){return this.size.width}},{key:"height",get:function(){return this.size.height}},{key:"mapWidth",get:function(){return this.mapS.width},set:function(i){null!=i&&(this.mapS.width=i)}},{key:"mapHeight",get:function(){return this.mapS.height},set:function(i){null!=i&&(this.mapS.height=i)}},{key:"shownTilesX",get:function(){return this.shownTiles.startX}},{key:"shownTilesY",get:function(){return this.shownTiles.startY}},{key:"shownTilesWidth",get:function(){return this.shownTiles.countX}},{key:"shownTilesHeight",get:function(){return this.shownTiles.countY}},{key:"scaleX",get:function(){return this.scale.x}},{key:"scaleY",get:function(){return this.scale.y}}]),t}(),l=0,c=1,d=2,u=function(t){"use strict";function e(i){var e;return(e=t.call(this)||this).id=i.id,e.index={x:i.indexX,y:i.indexY},e.position={x:i.x,y:i.y},e.size={width:i.width,height:i.height},e.storage=i.storage,e.state=l,e.node=null,e.storage.has(e.id)&&(e.node=e.storage.get(e.id),e.state=d),e}i.inheritsLoose(e,t);var s=e.prototype;return s.addImageToStorage=function(){this.storage.has(this.id)||this.storage.set(this.id,this.node)},s.load=function(){this.state===l&&(this.state=c,this.emit("getTile",{data:{indexX:this.index.x,indexY:this.index.y,number:this.id}}))},s.cancelLoading=function(){this.state===c&&(this.state=l,this.emit("zoomCancelLoadingOfTiles",{data:{indexX:this.index.x,indexY:this.index.y,number:this.id}}))},s.destroy=function(){this.cancelLoading(),this.storage=null,t.prototype.destroy.call(this)},i.createClass(e,[{key:"loaded",get:function(){return this.state===d}},{key:"image",set:function(i){this.state!==d&&(this.state=d,this.node=a(i),this.addImageToStorage())}}]),e}(h),p=function(){"use strict";function t(i,t){this.p=a(i),this.dppx=t,this.w=n.$new("div"),this.cvs=n.$new("canvas"),this.ctx=this.cvs.node.getContext("2d"),this.w.append(this.cvs)}var e=t.prototype;return e.append=function(){this.p.append(this.w)},e.show=function(){this.w.setCssProp("display","")},e.hide=function(){this.w.setCssProp("display","none")},e.clear=function(){this.ctx.clearRect(0,0,this.cvs.node.width,this.cvs.node.height)},e.draw=function(i,t,e,s){this.ctx.setTransform(1,0,0,1,0,0),this.clear(),this.ctx.setTransform(i,0,0,t,e,s)},e.drawTile=function(i,t,e){"edge"===n.browser.uaName||"ie"===n.browser.uaName?this.dppx>1?this.ctx.drawImage(i.node,0,0,t.width,t.height,e.x,e.y,t.width,t.height):this.ctx.drawImage(i.node,e.x,e.y,t.width,t.height):this.ctx.drawImage(i.node,0,0,t.width,t.height,e.x,e.y,t.width,t.height)},e.destroy=function(){this.cvs.remove(),this.w.remove()},i.createClass(t,[{key:"index",set:function(i){this.w.addClass("deepzoom-level-"+i),this.w.attr("z-index"+(i+1))}},{key:"canvasSize",set:function(i){this.cvs.setCss(i),this.cvs.attr("width",i.width*this.dppx),this.cvs.attr("height",i.height*this.dppx)}}]),t}(),m=new Map,g=function(i,t){return i/t},v=function(t){"use strict";function e(i,e){var s;return(s=t.call(this)||this).view=i,s.id=e.id,s.dppx=e.dppx,s.size={width:e.width,height:e.height},s.mSize={width:e.maxWidth,height:e.maxHeight},s.tSize={width:e.tileWidth,height:e.tileHeight},s.tileImageSize={width:e.tileImageWidth,height:e.tileImageHeight},s.layerSize={width:e.layerWidth,height:e.layerHeight},s.hash=e.hash+"-"+s.size.width+"x"+s.size.height,m.has(s.hash)||m.set(s.hash,new Map),s.scaleFactor={x:(s.mSize.width-s.size.width)/s.size.width+1,y:(s.mSize.height-s.size.height)/s.size.height+1},s.maxDisplayedSize={width:e.maxDisplayedWidth,height:e.maxDisplayedHeight},s.minDisplayedSize={width:e.minDisplayedWidth,height:e.minDisplayedHeight},s.globalScale={x:1,y:1},s.globalPosition={x:0,y:0},s.view.index=s.id,s.lensSize={width:e.viewPortWidth,height:e.viewPortHeight},s.isAdded=!1,s.isShown=!1,s.tiles=s.calcTiles(),s.countOfTiles=s.tiles.length*s.tiles[0].length,s.loadedTiles=0,s.camera=new r({inner:e.inner,scaleX:s.scaleFactor.x,scaleY:s.scaleFactor.y,cameraWidth:e.viewPortWidth,cameraHeight:e.viewPortHeight,mapWidth:s.size.width,mapHeight:s.size.height,tileWidth:g(s.tileImageSize.width,s.dppx),tileHeight:g(s.tileImageSize.height,s.dppx),lengthOfRow:s.tiles.length,lengthOfColumn:s.tiles[0].length}),R&&R.createLevel({level:s.id,cols:s.tiles[0].length,rows:s.tiles.length,levelSize:{width:s.size.width,height:s.size.height},tileSize:{width:s.tileImageSize.width,height:s.tileImageSize.height}}),s}i.inheritsLoose(e,t);var s=e.prototype;return s.addEvents=function(){var i=this,t=this.tileImageSize;this.on("getTile",(function(e){e.data.width=i.size.width,e.data.height=i.size.height,e.data.level=i.id,e.data.imageSettings={tile:{width:t.width,height:t.height,number:e.data.number}},i.dppx>1&&(e.data.dppx=i.dppx),R&&R.tileAction({level:i.id,col:e.data.indexX,row:e.data.indexY,type:1})})),this.on("zoomCancelLoadingOfTiles",(function(e){e.data.width=i.size.width,e.data.height=i.size.height,e.data.imageSettings={tile:{width:t.width,height:t.height,number:e.data.number}},R&&R.tileAction({level:i.id,col:e.data.indexX,row:e.data.indexY,type:0})}))},s.cancelLoadingOfTiles=function(){this.tiles.forEach((function(i){i.forEach((function(i){i.cancelLoading()}))}))},s.append=function(){!this.isAdded&&this.isShown&&(this.isAdded=!0,this.addEvents(),this.view.append())},s.calcTiles=function(){for(var i=[],t=this.tileImageSize,e=Math.ceil(this.layerSize.width/t.width),s=Math.ceil(this.layerSize.height/t.height),o=0;o<s;o++){for(var h=a([]),n=0;n<e;n++){var r=new u({y:o*t.height,x:n*t.width,indexX:n,indexY:o,id:o*e+n,width:n!==e-1?t.width:this.layerSize.width-n*t.width,height:o!==s-1?t.height:this.layerSize.height-o*t.height,storage:m.get(this.hash)});r.parentClass=this,h.push(r)}i.push(h)}return i},s.correctDPPXPosition=function(i,t,e){var s=i;if(this.dppx>1){var o=t/2;s=Math.abs(i-o)/(e/100),s=o*this.dppx-e*this.dppx/100*s}return s},s.draw=function(){var i=this,t=this.camera;this.isShown&&(this.view.draw(t.scaleX,t.scaleY,this.correctDPPXPosition(t.x,t.width,t.mapWidth),this.correctDPPXPosition(t.y,t.height,t.mapHeight)),this.eachTile((function(t){i.drawTile(t)})))},s.drawTile=function(i){i&&i.loaded&&this.view.drawTile(i.node,i.size,i.position)},s.eachTile=function(i){for(var t=this.camera,e=0,s=t.shownTilesHeight;e<s;e++)for(var o=0,h=t.shownTilesWidth;o<h;o++)i(this.tiles[t.shownTilesY+e][t.shownTilesX+o])},s.checkSize=function(){var i=this.isShown,t=this.camera,e=t.mapWidth<=this.maxDisplayedSize.width,s=t.mapHeight<=this.maxDisplayedSize.height,o=t.mapWidth>this.minDisplayedSize.width,h=t.mapHeight>this.minDisplayedSize.height;this.isShown=e&&s&&o&&h,i!==this.isShown&&(this.isShown?this.view.show():this.view.hide(),this.isShown||this.cancelLoadingOfTiles())},s.action=function(i,t){this.globalPosition.x=i.x,this.globalPosition.y=i.y,this.globalScale.x=t.x,this.globalScale.y=t.y,this.camera.action(this.globalPosition,this.globalScale),(this.camera.mapWidth>this.mSize.width||this.camera.mapHeight>this.mSize.height)&&(this.camera.mapWidth=this.mSize.width,this.camera.mapHeight=this.mSize.height),this.checkSize(),this.append(),this.draw(),R&&R.setData({level:this.id,levelStatus:this.isShown})},s.loadImages=function(){this.isShown&&this.loadedTiles!==this.countOfTiles&&this.eachTile((function(i){i.load()}))},s.resize=function(i){this.lensSize=i,this.camera.resize(i),this.action(this.globalPosition,this.globalScale)},s.destroy=function(){this.off("getTile"),this.off("zoomCancelLoadingOfTiles"),this.isShown=!1,this.camera.destroy(),this.tiles.forEach((function(i){i.forEach((function(i){i.destroy()}))})),t.prototype.destroy.call(this)},i.createClass(e,[{key:"image",set:function(i){var t=this.tiles[i.indexY][i.indexX];t.loaded||(this.loadedTiles+=1),t.image=i.node,this.isShown&&this.camera.checkTile(i.indexX,i.indexY)&&this.drawTile(t),R&&R.setData({level:this.id,col:i.indexX,row:i.indexY})}},{key:"lensSize",set:function(i){this.view.canvasSize=i}}]),e}(h),w=function(){"use strict";function t(i,t){this.p=a(i),this.c=n.$new("div"),this.c.addClass(t+"-deepzoom")}var e=t.prototype;return e.show=function(){this.p.append(this.c)},e.hide=function(){this.c.remove()},e.destroy=function(){this.c.remove(),this.c=null},i.createClass(t,[{key:"container",get:function(){return this.c}}]),t}(),f=function(t){"use strict";function e(i,e){var s;return(s=t.call(this)||this).view=i,s.options=Object.assign({tiles:!0,inner:!0,tileSize:{width:256,height:256},minZoomFactor:100,upscale:!1},e),s._hash=null,s.setDefaultVars(),s}i.inheritsLoose(e,t),e.convertScaleToSize=function(i,t){return{width:o.round(i.width*t.x,2),height:o.round(i.height*t.y,2)}};var s=e.prototype;return s.setDefaultVars=function(){var i=this;this.isShown=!1,this.originSize={width:0,height:0},this._maxSize={width:0,height:0},this._minSize={width:0,height:0},this._lensSize={width:0,height:0},this.currentSize={width:0,height:0},this.levels=a([]),this.on("getTile",(function(t){i.options.tiles||(delete t.data.imageSettings.tile,delete t.data.number)}))},s.createLevels=function(){var i=function(i,t){return t<1.5?i:i*n.DPPX},t=this._maxSize,e=this._minSize;if(!this.levels.length&&t.width-e.width>this.options.minZoomFactor){var s=[];this.options.inner?s=function(i,t){for(var e=Math.max(1,Math.round(Math.log(Math.max(t.width/i.width,t.height/i.height))/Math.LN2)),s=t.width,o=t.height,h=[];e>0;)e-=1,h.push({width:s,height:o}),s=parseInt(s/2,10),o=parseInt(o/2,10);return h}(e,t,this.options.inner):s.push({width:t.width,height:t.height});for(var h=this.options.tileSize,a=0,r=s.length;a<r;a++){this.options.tiles||(h=s[a]);var l=a+1<r-1?s[a+1]:e,c=a-1>=0?s[a-1]:t,d=o.getDPPX(s[a].width,this.originSize.width,this.options.upscale),u=new p(this.view.container,d),m=new v(u,{id:r-a,hash:this._hash,dppx:d,inner:this.options.inner,width:s[a].width,height:s[a].height,maxWidth:this._maxSize.width,maxHeight:this._maxSize.height,layerWidth:Math.round(s[a].width*d),layerHeight:Math.round(s[a].height*d),maxDisplayedWidth:s[a].width+E(c.width-s[a].width,50),maxDisplayedHeight:s[a].height+E(c.height-s[a].height,50),minDisplayedWidth:l.width+E(s[a].width-l.width,50),minDisplayedHeight:l.height+E(s[a].height-l.height,50),tileWidth:h.width,tileHeight:h.height,tileImageWidth:i(h.width,d),tileImageHeight:i(h.height,d),viewPortWidth:this._lensSize.width,viewPortHeight:this._lensSize.height});m.parentClass=this,this.levels.push({view:u,controller:m})}this.levels.reverse()}},s.getCurrentShownLevel=function(){var i=null,t=this.levels.length;if(this.isShown)for(var e=t-1;e>=0;e--)if(this.levels[e].controller.isShown){i=this.levels[e].controller;break}return i},s.getScale=function(i){var t,e=this.getCurrentShownLevel(),s=this.levels.length;switch(i){case"zoomin":t=e?this.currentSize.width<e.size.width?A(this._maxSize.width,e.size.width):e.id!==s?A(this._maxSize.width,this.levels[e.id].controller.size.width):A(this._maxSize.width,this.levels[s-1].controller.size.width):A(this._maxSize.width,this.levels[0].controller.size.width);break;case"zoomout":t=e?this.currentSize.width>e.size.width?A(this._maxSize.width,e.size.width):e.id>1?A(this._maxSize.width,this.levels[e.id-2].controller.size.width):A(this._maxSize.width,this._minSize.width):A(this._maxSize.width,this._minSize.width)}return t},s.show=function(){return this.isShown||(this.isShown=!0,this.view.show()),this},s.hide=function(){return this.isShown&&(this.isShown=!1,this.view.hide(),this.levels.forEach((function(i){i.view.destroy(),i.controller.destroy()})),this.setDefaultVars()),this},s.action=function(i,t){return this.isShown&&(this.currentSize=e.convertScaleToSize(this._maxSize,t),this.levels.forEach((function(e){e.controller.action(i,t)})),R&&R.setData({zoom:o.round(this.currentSize.width/this._minSize.width,1,this.currentSize.width===this._maxSize.width)})),this},s.loadImages=function(){this.isShown&&this.levels.forEach((function(i){i.controller.loadImages()}))},s.resize=function(){var i=this;this.isShown&&this.levels.forEach((function(t){t.controller.resize(i._lensSize)}))},s.destroy=function(){this.hide(),this.off("getTile"),this.off("zoomCancelLoadingOfTiles"),t.prototype.destroy.call(this)},i.createClass(e,[{key:"hash",set:function(i){this._hash=""+n.getHashCode(i)}},{key:"lensSize",set:function(i){this._lensSize.width=i.width,this._lensSize.height=i.height}},{key:"minSize",set:function(i){this._minSize.width=i.width,this._minSize.height=i.height}},{key:"maxSize",set:function(i){this._maxSize.width=i.width,this._maxSize.height=i.height,this.originSize.width=i.originWidth,this.originSize.height=i.originHeight,this.createLevels()}},{key:"image",set:function(i){this.isShown&&(this.levels[i.level-1].controller.image=i)}}]),e}(h),function(t){"use strict";function e(e,s){var o;return(o=t.call(this)||this).view=new w(e,"sirv"),o.controller=new f(o.view,s),o.controller.parentClass=i.assertThisInitialized(o),o}i.inheritsLoose(e,t);var s=e.prototype;return s.loadImages=function(){this.controller.loadImages()},s.getScale=function(i){return this.controller.getScale(i)},s.show=function(){this.controller.show()},s.hide=function(){this.controller.hide()},s.action=function(i,t){this.controller.action(i,t)},s.resize=function(){this.controller.resize()},s.destroy=function(){this.controller.destroy(),this.controller=null,this.view.destroy(),this.view=null,t.prototype.destroy.call(this)},i.createClass(e,[{key:"lensSize",set:function(i){this.controller.lensSize=i}},{key:"image",set:function(i){this.controller.image=i}},{key:"hash",set:function(i){this.controller.hash=i}},{key:"minSize",set:function(i){this.controller.minSize=i}},{key:"maxSize",set:function(i){this.controller.maxSize=i}}]),e}(h)),N=function(){var t=function(){"use strict";function t(i,t){this.pn=a(i);var e="sirv-zoom-lens";this.c=n.$new("div"),this.c.addClass(e+"-wrapper"),this.ic=n.$new("div"),this.ic.addClass(e),this.ic.appendTo(this.c),this.img=null,this.bwImg=null,t&&this.c.addEvent("mousedown",(function(i){i.stop()}))}var e=t.prototype;return e.calcContainerPosition=function(){if(["img","canvas"].includes(this.pn.tagName)){var i=this.pn.position,t=a(this.pn.node.parentNode).position;this.c.setCss({top:i.top-t.top,left:i.left-t.left})}},e.setTransform=function(i,t){this.ic.setCssProp("transform","translate3d("+i+"px,"+t+"px, 0px)"),this.img&&this.img.setCssProp("transform","translate3d("+-1*i+"px, "+-1*t+"px, 0px)")},e.show=function(i,t){i&&(this.img=a(i)),this.calcContainerPosition(),this.imageSize=t,this.img&&this.ic.append(this.img);var e=this.pn;["img","canvas"].includes(e.tagName)&&(e=a(e.node.parentNode)),e.append(this.c)},e.hide=function(){this.c.remove(),this.img&&(this.img.remove(),this.img=null,this.bwImg&&(this.bwImg.remove(),this.bwImg=null))},e.destroy=function(){this.c.removeEvent("mousedown"),this.c.remove()},i.createClass(t,[{key:"container",get:function(){return this.c}},{key:"imageSize",set:function(i){this.img&&[this.img,this.bwImg].forEach((function(t){t&&t.setCss({top:0,left:0,width:i.width,height:i.height,position:"absolute"})}))}},{key:"size",get:function(){return this.pn.size}},{key:"containerSize",set:function(i){this.c.setCss({width:i.width,height:i.height})}},{key:"insideContainerSize",set:function(i){this.ic.setCss({width:i.width,height:i.height})}},{key:"insideContainerFontSize",set:function(i){this.ic.setCssProp("font-size",Math.max(i.width,i.height)+"px")}}]),t}(),e=function(i,t){return Math.abs(i-t)},s=function(i,t,e){return(i-t)*e},o=function(){"use strict";function t(i){this.view=i,this.pSize={width:0,height:0},this.inDoc=!1,this.timer=null,this.isPlaying=!1,this.pos={x:null,y:null},this.dPos={x:null,y:null},this._size={width:0,height:0},this.dSize={width:0,height:0}}var o=t.prototype;return o.doAnimation=function(){var i=!1,t=.001;return(e(this.pos.x,this.dPos.x)>t||e(this.pos.y,this.dPos.y)>t||e(this._size.width,this.dSize.width)>t||e(this._size.height,this.dSize.height)>t)&&(i=!0),i},o.animate=function(){var i=this;this.isPlaying=!0;var t=.4,e=s(this.pos.x,this.dPos.x,t),o=s(this.pos.y,this.dPos.y,t),h=s(this._size.width,this.dSize.width,t),n=s(this._size.height,this.dSize.height,t);this.dPos.x+=e,this.dPos.y+=o,this.dSize.width+=h,this.dSize.height+=n,this.setCss(),this.doAnimation()?this.timer=setTimeout((function(){i.animate()}),16):this.stopAnimation()},o.setCss=function(){var i=this._size,t=this.dSize;(e(i.width,t.width)>0||e(i.height,t.height)>0)&&(this.view.insideContainerSize=t,this.view.insideContainerFontSize=this.pSize),this.view.setTransform(Math.round(this.dPos.x),Math.round(this.dPos.y))},o.stopAnimation=function(){this.isPlaying&&(this.isPlaying=!1,clearTimeout(this.timer),this.dPos.x=this.pos.x,this.dPos.y=this.pos.y,this.dSize.width=this._size.width,this.dSize.height=this._size.height,this.setCss())},o.setSizes=function(){var i=this.view.size;this.pSize=i,this.view.containerSize=i,this.view.insideContainerFontSize=i},o.show=function(i){this.inDoc||(this.inDoc=!0,this.setSizes(),this.view.show(i,this.pSize))},o.hide=function(){this.inDoc&&(this.inDoc=!1,this.view.hide(),this.pos={x:null,y:null},this.dPos={x:null,y:null},this._size={width:0,height:0},this.dSize={width:0,height:0})},o.resize=function(){this.inDoc&&(this.setSizes(),this.view.calcContainerPosition())},o.destroy=function(){this.stopAnimation(),this.inDoc=!1},i.createClass(t,[{key:"size",set:function(i){this._size.width=i.width,this._size.height=i.height,this.inDoc&&null!==this.dPos.x&&(this.isPlaying||this.animate())}},{key:"position",set:function(i){var t=this._size,e=this.pSize,s=i.x-t.width/2,o=i.y-t.height/2;s<0&&(s=0),o<0&&(o=0),s>e.width-t.width&&(s=e.width-t.width),o>e.height-t.height&&(o=e.height-t.height),this.pos.x=s,this.pos.y=o,null===this.dPos.x&&(this.dPos.x=s,this.dPos.y=o),this.inDoc&&(this.isPlaying||this.animate())}}]),t}();return function(){"use strict";function e(i,e){this.view=new t(i,e),this.controller=new o(this.view)}var s=e.prototype;return s.addEventToMainContainer=function(i,t){this.view.container.addEvent(i,t)},s.removeEventToMainContainer=function(i,t){t?this.view.container.removeEvent(i,t):this.view.container.removeEvent(i)},s.clearEvents=function(){this.view.container.clearEvents()},s.show=function(i){this.controller.show(i)},s.hide=function(){this.controller.hide()},s.destroy=function(){this.controller.destroy(),this.view.destroy()},i.createClass(e,[{key:"boundaries",get:function(){return this.view.container.node.getBoundingClientRect()}},{key:"size",set:function(i){this.controller.size=i}},{key:"position",set:function(i){this.controller.position=i}}]),e}()}(),H=function(){var t=function(){"use strict";function t(i){this.p=a(i);var t="sirv-zoom-map";this.c=n.$new("div"),this.c.addClass(t),this.lens=n.$new("div"),this.lens.addClass(t+"-lens"),this._img=null,this.b=a(n.D.node.body),this.c.append(this.lens)}var e=t.prototype;return e.calcRightPosition=function(i,t){var e=this.c.rect;return{x:i-e.left,y:t-e.top}},e.addDomEventToDocBody=function(i,t){this.b.addEvent(i,t)},e.removeDomEventToDocBody=function(i,t){this.b.removeEvent(i,t)},e.addDomEventToLens=function(i,t){this.lens.addEvent(i,t)},e.addDomEvent=function(i,t){this.c.addEvent(i,t)},e.removeEvents=function(){this.c.removeEvent(["btnclick","tap"]),this.c.removeEvent(["mousedown","touchstart"]),this.lens.removeEvent(["mousedown","touchstart"]),this.c.removeEvent(["mousemove","touchmove"])},e.addLensCss=function(i,t,e){this.lens.setCss({top:i.top-1+"px",left:i.left-1+"px",width:t.width+"px",height:t.height+"px","font-size":e+"px"})},e.removeEventTransitionEvent=function(){this.c.removeEvent("transitionend")},e.show=function(i){var t=this;this.c.setCss({opacity:0,transition:"opacity .3s linear"}),this.p.append(this.c),this.c.render(),this.removeEventTransitionEvent(),this.c.addEvent("transitionend",(function(e){e.stop(),t.removeEventTransitionEvent(),t.c.setCssProp("transition",""),t.addDomEvent(["mousedown","touchstart"],(function(i){i.stop()})),i()})),this.c.setCssProp("opacity",1)},e.hide=function(i,t){var e=this;this.removeEventTransitionEvent(),i?(this.c.remove(),this.removeEvents(),t()):this.c.addEvent("transitionend",(function(i){i.stop(),e._removeEventTransitionEvent(),e.c.setCssProp("transition",""),e.c.remove(),e.removeEvents(),t()})),this.c.setCssProp("opacity",0)},e.destroy=function(){this.c=null,this.lens=null},i.createClass(t,[{key:"cursor",set:function(i){this.c.setCssProp("cursor",i)}},{key:"size",set:function(i){this.c.setCss({width:i.width+"px",height:i.height+"px"})}},{key:"img",set:function(i){this._img=n.$new("img",{src:i.src}),i.srcset&&this._img.attr("srcset",i.srcset+" 2x"),this.c.append(this._img)}}]),t}(),s=function(i,t,e){return n.defined(t)||(t=0),n.defined(e)||(e=100),Math.min(Math.max(i,t),e)},r=function(t){"use strict";function h(i,s){var o;return(o=t.call(this)||this).view=i,o.o=s,o.state=e.APPEARANCE.HIDDEN,o.scale={x:1,y:1},o.viewPortSize={width:0,height:0},o.bISize={width:0,height:0},o.cBISize={width:0,height:0},o.cBIPosition={top:0,left:0},o.mapSize={width:0,height:0},o.ls={width:0,height:0},o.lp={top:0,left:0},o.clp={x:0,y:0},o.isDragMoved=!1,o}i.inheritsLoose(h,t),h.setInTheCenter=function(i){return i<50?i=Math.max(i-(50-i),0):i>50&&(i=Math.min(i+(i-50),100)),i};var r=h.prototype;return r.getPercentPosition=function(i,t){var e=this.mapSize,h=this.view.calcRightPosition(i,t);return{x:i=s(o.round(I(h.x,e.width),1)),y:t=s(o.round(I(h.y,e.height),1))}},r.isInside=function(i,t){var e=!1,s=this.lp,o=this.ls,h=this.view.calcRightPosition(i,t);return s.left<h.x&&s.left+o.width>h.x&&s.top<h.y&&s.top+o.height>h.y&&(e=!0),e},r.addEvents=function(){var i=this,t=1,e=!1;this.dragEndHandler=function(t){e&&(t.stop(),e=!1,i.clp={x:0,y:0},i.view.cursor="",i.view.removeDomEventToDocBody(t.type,i.dragEndHandler),i.view.removeDomEventToDocBody("mouseout",i.mouseOutHandler))},this.mouseOutHandler=function(t){t.stop(),t.oe.relatedTarget&&"HTML"!==t.oe.relatedTarget.tagName||!e||(i.dragEndHandler(t),i.view.removeDomEventToDocBody(["mouseup","touchend"],i.dragEndHandler))},this.view.addDomEvent(["btnclick","tap"],(function(t){t.stop(),i.emit("zoomMapNewPosition",{data:i.getPercentPosition(t.x,t.y)})})),this.view.addDomEventToLens(["mousedown","touchstart"],(function(s){var o=s.pageXY;if(i.isInside(o.x,o.y)){s.stop(),t=1;var h=function(i){var t,e={x:0,y:0},s=i.originEvent;return n.defined(s.offsetX)?(e.x=s.offsetX,e.y=s.offsetY):(t=a(i.target).position,e.x=s.targetTouches[0].pageX-t.left,e.y=s.targetTouches[0].pageY-t.top),e}(s);i.clp.y=h.y,i.clp.x=h.x,e=!0,i.view.addDomEventToDocBody(["mouseup","touchend"],i.dragEndHandler),i.view.addDomEventToDocBody("mouseout",i.mouseOutHandler)}})),this.view.addDomEvent(["mousemove","touchmove"],(function(s){if(e){if(t<=0){s.stop();var o=s.pageXY;i.view.cursor="move",i.emit("zoomMapNewPosition",{data:i.getPercentPosition(o.x,o.y)})}t--}}))},r.calcMap=function(i,t,e,s){var o=this.o.maxwidth,h=this.o.maxheight;e<=o&&(h=(o=e/2)*(t/i)),s<=h&&(o=(h=s/2)*(i/t)),o/h>i/t?o=h*(i/t):h=o*(t/i),o=parseInt(o,10),h=parseInt(h,10),this.mapSize.width=o,this.mapSize.height=h,this.viewPortSize.width=e,this.viewPortSize.height=s,this.bISize.width=i,this.bISize.height=t},r.prepare=function(i,t,e,s){this.calcMap(i,t,e,s),this.view.size=this.mapSize,this.emit("zoomGetImage",{data:{width:this.mapSize.width,height:this.mapSize.height}})},r.move=function(i,t){var e=this.bISize,s=e.width*t.x,o=e.height*t.y,h=Math.abs(i.y+(e.height-o)/2),n=Math.abs(i.x+(e.width-s)/2);this.scale.x=t.x,this.scale.y=t.y,this.lensSize={width:s,height:o},this.lensPosition={top:h,left:n},this.view.addLensCss(this.lp,this.ls,Math.max(this.mapSize.width,this.mapSize.height))},r.show=function(){var i=this;[e.APPEARANCE.SHOWING,e.APPEARANCE.SHOWN].includes(this.state)||(this.state=e.APPEARANCE.SHOWING,this.view.show((function(){i.addEvents(),i.state=e.APPEARANCE.SHOWN})))},r.hide=function(i){var t=this;[e.APPEARANCE.HIDDEN,e.APPEARANCE.HIDING].includes(this.state)&&!i||(this.state=e.APPEARANCE.HIDING,this.view.hide(i,(function(){t.view.removeDomEventToDocBody(["mouseup","touchend"],t.dragEndHandler),t.state=e.APPEARANCE.HIDDEN})))},r.resize=function(i,t,e,s,o,h){this.o.maxwidth=i,this.o.maxheight=t,this.calcMap(e,s,o,h),this.view.size=this.mapSize},r.destroy=function(){this.hide(!0),t.prototype.destroy.call(this)},i.createClass(h,[{key:"lensPosition",set:function(i){var t=this.cBISize,e=this.mapSize,s=e.height/t.height*i.top,o=e.width/t.width*i.left;this.cBIPosition.top=i.top,this.cBIPosition.left=i.left,s<0&&(s=0),o<0&&(o=0);var h=this.ls;s+h.height>e.height&&(s=e.height-h.height),o+h.width>e.width&&(o=e.width-h.width),this.lp.top=s,this.lp.left=o}},{key:"lensSize",set:function(i){this.cBISize.width=i.width,this.cBISize.height=i.height;var t=this.mapSize,e=this.viewPortSize;this.ls.width=e.width>=i.width?t.width:e.width/i.width*t.width,this.ls.height=e.height>=i.height?t.height:e.height/i.height*t.height}}]),h}(h);return function(e){"use strict";function s(s,o){var h;return(h=e.call(this)||this).options=Object.assign({maxwidth:200,maxheight:200},o||{}),h.view=new t(s),h.controller=new r(h.view,h.options),h.controller.parentClass=i.assertThisInitialized(h),h}i.inheritsLoose(s,e);var o=s.prototype;return o.prepare=function(i,t,e,s){this.controller.prepare(i,t,e,s)},o.move=function(i,t){this.controller.move(i,t)},o.show=function(){this.controller.show()},o.hide=function(i){this.controller.hide(i)},o.resize=function(i,t,e,s,o,h){this.controller.resize(i,t,e,s,o,h)},o.destroy=function(){this.controller.destroy(),this.view.destroy(),e.prototype.destroy.call(this)},i.createClass(s,[{key:"img",set:function(i){this.view.img=i}}]),s}(h)}(),O=function(){"use strict";function t(i){this.pn=a(i);var t,e="sirv-zoom";this.cnv=n.$new("div"),this.cnv.addClass(e),this.node=n.$new("div").setCss({opacity:0}),this.node.addClass("sirv-zoom-wrapper"),this.zoomWrapper=n.$new("div").addClass("sirv-zoom-image-wrapper"),this.zoom=(t=this.pn,a(a(t).node.getElementsByTagName("img")[0]||a(t).node.getElementsByTagName("canvas")[0]||t)),this.lens=n.D.node.body,this.isBody=!0,this.image=null,this.perspective="",n.browser.mobile&&"ios"===n.browser.platform&&(this.perspective="perspective(1000px) ")}var e=t.prototype;return e.addScrollEvent=function(i){n.W.addEvent("scroll",i)},e.removeScrollEvent=function(i){i?n.W.removeEvent("scroll",i):n.W.removeEvent("scroll")},e.addClassToWrapper=function(i){this.node.addClass("sirv-"+i+"-zoom")},e.addEventToMainContainer=function(i,t){this.cnv.addEvent(i,t)},e.removeEventFromMainContainer=function(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];this.cnv.removeEvent(t)},e.addEventToWrapper=function(i,t){this.node.addEvent(i,t)},e.removeEventFromWrapper=function(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];this.node.removeEvent(t)},e.addMouseoutEvent=function(i){var t=this;this.addEventToWrapper("mouseout",(function(e){var s=e.related;if(s){for(;s&&s!==t.node.node&&s!==t.lens.node;)s=s.parentNode;t.node.node!==s&&i(e)}}))},e.toggleCursorClass=function(i,t){this.cnv.removeClass(i).addClass(t)},e.setImagePosition=function(i,t){this.image&&this.zoomWrapper.setCssProp("transform",this.perspective+"translate3d("+i.x+"px, "+i.y+"px, 0) scale("+t.x+", "+t.y+")")},e.addStartCss=function(){this.lensStyle={opacity:0,transform:"scale(0)"}},e.appendNodes=function(i,t){this.cnv.addEvent("contextmenu",(function(i){i.stopDefaults()})),this.image=a(i),this.image.setCss({width:t.width+"px",height:t.height+"px"}),n.browser.mobile||this.image.addEvent("mousedown",(function(i){i.stopDefaults()})),this.zoomWrapper.append(this.image),this.node.append(this.zoomWrapper),this.node.appendTo(this.cnv),this.cnv.appendTo(this.lens,!1)},e.setLensCss=function(i,t,e){this.lensPosition=i,this.lensSize=t,this.lensStyle={opacity:1,transform:"scale(1)",transition:e||"none"}},e.setImageSize=function(i,t,e){this.zoomWrapper.setCss({top:0,left:0,width:t.width+"px",height:t.height+"px","transform-origin":"50% 50%",transform:this.perspective+"translate3d("+i.x+"px, "+i.y+"px, 0) scale("+e.x+", "+e.y+")"}),this.zoomWrapper.render(),this.image.setCss({width:"100%",height:"100%"}),this.image.render()},e.clearCss=function(){this.node.setCss({transition:"",opacity:"",transform:""}),this.node.removeAttr("style"),this.image&&this.image.setCss({width:"",height:""}),this.zoomWrapper.setCss({top:"",left:"",width:"",height:"",transition:"",transform:""})},e.clearDOM=function(){this.image&&(this.image.remove(),this.image=null),this.zoomWrapper.remove(),this.node.remove(),this.cnv.remove()},e.removeEvents=function(){this.cnv.clearEvents(),this.image&&this.image.clearEvents(),this.node.clearEvents()},e.destroy=function(){this.image&&(this.image.remove(),this.image=null),this.zoomWrapper.remove(),this.node.remove(),this.cnv.remove()},i.createClass(t,[{key:"hash",get:function(){return this.image?this.image.$J_UUID+""||this.image.attr("src"):null}},{key:"parentSize",get:function(){return this.pn.size}},{key:"parentPostion",get:function(){return this.pn.position}},{key:"zoomSize",get:function(){return this.zoom.size}},{key:"parentBoundaries",get:function(){return this.cnv.node.parentNode?this.cnv.node.getBoundingClientRect():null}},{key:"lensContainer",set:function(i){i||(i=a(n.D.node.body)),this.isBody=a(i)===a(n.D.node.body),this.lens=a(i)}},{key:"eventNodePositionSize",set:function(i){var t=i.position.top,e=i.position.left;if(!this.isBody){var s=this.lens.position;t-=s.top,e-=s.left}this.cnv.setCss({top:t,left:e,width:i.size.width,height:i.size.height})}},{key:"lensStyle",set:function(i){this.node.setCss(i)}},{key:"lensPosition",set:function(i){this.lensStyle={top:i.top,left:i.left}}},{key:"lensSize",set:function(i){this.lensStyle={width:i.width,height:i.height}}},{key:"boundaries",get:function(){return this.cnv.node.getBoundingClientRect()}}]),t}(),L=function(t){"use strict";function e(i){var e;return(e=t.call(this,i)||this).mouseMoveHandler=null,e}i.inheritsLoose(e,t);var s=e.prototype;return s.getContainerForMap=function(){return this.node},s.addStartCss=function(){t.prototype.addStartCss.call(this),this.node.addEvent("mousescroll",(function(i){i.stop()})),this.lensStyle={opacity:0,transform:"scale(1)"}},s.removeDragstart=function(){this.node.del("event:mousedrag:dragstart")},s.addEventsCanvasClass=function(i){this.cnv.addClass(i)},s.removeEventsCanvasClass=function(i){this.cnv.removeClass(i)},s.getContainerSize=function(){return this.node.size},s.getContainerPosition=function(){return this.node.position},s.addGlobalEvent=function(i){this.mouseMoveHandler||(this.mouseMoveHandler=i,n.D.addEvent("mousemove",i))},s.removeGlobalEvent=function(){this.mouseMoveHandler&&(n.D.removeEvent("mousemove",this.mouseMoveHandler),this.mouseMoveHandler=null)},s.removeEvents=function(){t.prototype.removeEvents.call(this),this.removeGlobalEvent()},e}(O),Z=function(t){"use strict";function e(){return t.apply(this,arguments)||this}return i.inheritsLoose(e,t),i.createClass(e,[{key:"parentSize",get:function(){return this.zoom.size}},{key:"parentPostion",get:function(){return this.zoom.position}}]),e}(O),_=function(t){"use strict";function e(){return t.apply(this,arguments)||this}i.inheritsLoose(e,t);var s=e.prototype;return s.getImageForEye=function(){return this.image.node.cloneNode()},s.getNodeForEye=function(){return this.zoom},s.setCanvasNodeSize=function(i){this.cnv.setCss({width:i.width,height:i.height})},s.addStartCss=function(i){this.lensStyle={opacity:0,transform:"translate3d("+i.start.x+"%, "+i.start.y+"%, 0px)"}},s.setLensCss=function(i,e,s){this.cnv.setCss({top:i.top,left:i.left}),t.prototype.setLensCss.call(this,i,e,s)},s.addMouseMoveEvent=function(i){n.W.addEvent("mousemove",i)},s.removeMouseMoveEvent=function(i){n.W.removeEvent("mousemove",i)},s.clearCss=function(){this.cnv.removeAttr("style")},i.createClass(e,[{key:"lensPosition",set:function(i){this.cnv.setCss({top:i.top,left:i.left})}},{key:"parentSize",get:function(){return this.zoom.size}},{key:"parentPostion",get:function(){return this.zoom.position}}]),e}(O),W=(S=0,z=1,function(){"use strict";function i(i,t){this.state=S,this.id=null,this.cb=i||function(){},this.stopCb=t||function(){}}var t=i.prototype;return t.start=function(){var i=this;if(this.state!==z){this.state=z;var t=function(e){i.cb(e),i.state!==S&&(i.id=requestAnimationFrame(t))};this.id=requestAnimationFrame(t)}},t.stop=function(){this.state!==S&&(this.state=S,cancelAnimationFrame(this.id),this.stopCb())},i}()),R=null,B=function(t){"use strict";function s(i,s){var o;return(o=t.call(this)||this).o=Object.assign({test:!1,pan:!1,smoothing:!0,tiles:!0,customZooming:!0,clickBehavior:"both",upscale:!1,trigger:"hover"},s),o.view=i,o.state=e.APPEARANCE.HIDDEN,o._x=0,o._y=0,o.baseScale={x:1,y:1},o.scale={x:1,y:1},o.dScale={x:1,y:1},o.iSize={width:0,height:0},o.iPos={x:0,y:0},o.iDPos={x:0,y:0},o.pPos={top:0,left:0},o.pSize={width:0,height:0},o.anim=null,o.animCb=null,o.animStep=0,o.lastAnimTimer=0,o.deepZoom=null,o.deepZoomTimer=null,o.lensSize={width:0,height:0},o.lensHalfSize={width:0,height:0},o.lensPosition={top:0,left:0},o.currentLensSize={width:100,height:100},o.dppx=1,o.zoomNodeSize={width:0,height:0},o.boundaries=null,o.ANIM_STEP=.1,o.nonDeepZoomImageLevels=[],o.scrollHandler=function(){[e.APPEARANCE.SHOWING,e.APPEARANCE.SHOWN].includes(o.state)&&o.hide(o.state===e.APPEARANCE.SHOWING)},o}i.inheritsLoose(s,t);var h=s.prototype;return h.init=function(){this.getAllSizes(),this.view.setLensCss(this.lensPosition,this.lensSize),this.createDeepZoom(),this.createAnimation(this.ANIM_STEP),this.view.addScrollEvent(this.scrollHandler)},h.createDeepZoom=function(){var i=this;this.deepZoom=new k(this.view.node,{tiles:this.o.tiles,inner:["inner","outside"].includes(this.o.type),upscale:this.o.upscale}),this.deepZoom.parentClass=this,this.on("getTile",(function(t){t.stopAll(),i.emit("zoomGetImage",{data:t.data})})),this.on("zoomCancelLoadingOfTiles",(function(i){i.stopEmptyEvent()}))},h.getBoundaries=function(){this.boundaries=this.view.parentBoundaries},h.getAllSizes=function(){this.pSize=this.view.parentSize,this.pPos=this.view.parentPostion,this.zoomNodeSize=this.view.zoomSize,this.getBoundaries()},h.deepZoomAction=function(i,t){var e=this;clearTimeout(this.deepZoomTimer),this.deepZoomTimer=setTimeout((function(){e.deepZoom.loadImages(),t&&(e.deepZoom.lensSize=t,e.deepZoom.resize()),e.deepZoom.action(e.iDPos,e.dScale),i||e.deepZoomAction(e.dScale.x===e.scale.x)}),this.lastAnimTimer+10),t&&(this.deepZoom.lensSize=t,this.deepZoom.resize()),this.deepZoom.action(this.iDPos,this.dScale)},h.stopMovingAndZooming=function(){this.scale.x=this.dScale.x,this.scale.y=this.dScale.y,this.iPos.x=this.iDPos.x,this.iPos.y=this.iDPos.y},h.createAnimation=function(i){var t=this;this.animStep=i;var e=0;this.anim=new W((function(s){if(e){var h,n,a,r,l=!1;t.lastAnimTimer=s-e,e=s;var c,d,u=!1,p=!1;t.scale.x!==t.dScale.x&&(l=!0,t.sendZoomingAction(),h=(a=t.scale.x-t.dScale.x)*t.animStep,t.dScale.x+=h,t.dScale.y+=h,c="x",d=!1,t.dScale[c]<t.baseScale[c]&&(d=!0,t.dScale[c]=t.baseScale[c]),t.dScale[c]>1&&(d=!0,t.dScale[c]=1),p=u=d,Math.abs(a)<1e-4&&(t.dScale.x=t.scale.x,t.dScale.y=t.scale.x)),t.iPos.x===t.iDPos.x&&t.iPos.y===t.iDPos.y||(l=!0,a=t.iPos.x-t.iDPos.x,r=t.iPos.y-t.iDPos.y,h=a*t.animStep,n=r*t.animStep,t.iDPos.x+=h,t.iDPos.y+=n,t.iDPos.x=o.round(t.iDPos.x,4),t.iDPos.y=o.round(t.iDPos.y,4),(Math.max(Math.abs(a),Math.abs(r))<1||u||p)&&(t.iDPos.x=t.iPos.x,t.iDPos.y=t.iPos.y)),l?t.render(t.iDPos,t.dScale):t.animCb&&(t.animCb(),t.animStep=i,t.animCb=null)}else e=s}),(function(){e=0}))},h.render=function(i,t){this.deepZoomAction(),this.view.setImagePosition(i||this.iDPos,t||this.dScale)},h.correctX=function(i){return i-this.pPos.left},h.correctY=function(i){return i-this.pPos.top},h.getZoomData=function(i){var t=0;return i||(i=this.scale.x),(this.shown||this.showing)&&(t=o.round((i-this.baseScale.x)/(1-this.baseScale.x),2)),t},h.zoom=function(i,t,e){var s=this.scale.x,o=this.iSize,h=o.width*this.scale.x,n=o.height*this.scale.y,a=C(o.width,h),r=C(o.height,n);t=t||this.pPos.left+this.lensHalfSize.width,e=e||this.pPos.top+this.lensHalfSize.height,this.basePercentOfScale={x:I(Math.abs(this.iPos.x)+this.correctX(t)-a,h),y:I(Math.abs(this.iPos.y)+this.correctY(e)-r,n)};var l=this.deepZoom.getScale(i);this.scale.x=l,this.scale.y=l,this.x=t,this.y=e,this.afterZoom(s)},h.afterZoom=function(i){i!==this.scale.x&&(this.sendZoomingAction(),this.setCursorState(),this.o.smoothing?this.animStep=.25:(this.dScale.x=this.scale.x,this.dScale.y=this.scale.y,this.iDPos.x=this.iPos.x,this.iDPos.y=this.iPos.y,this.render(this.iPos,this.scale)))},h.zoomUp=function(i,t){return!(!this.shown&&!this.showing||1===this.scale.x)&&(this.zoom("zoomin",i,t),!0)},h.zoomDown=function(i,t){return!(!this.shown&&!this.showing||this.scale.x===this.baseScale.x)&&(this.zoom("zoomout",i,t),!0)},h.sendZoomingAction=function(){var i=this;clearTimeout(this.zoomingTimer),this.zoomingTimer=setTimeout(a((function(t){i.emit("zooming",{data:{zoom:i.getZoomData(),from:t,to:i.scale.x}})})).bind(this,this.dScale.x),24)},h.setCursorState=function(i){if(!n.defined(i)){var t=this.getZoomData();0===t?i="zoomIn":1===t?i="zoomOut":t>0&&t<1&&(i="up"===this.o.clickBehavior?"zoomIn":"zoomOut")}this.currentCursorState!==i&&(this.view.toggleCursorClass(y[this.currentCursorState],y[i]),this.currentCursorState=i)},h.setImage=function(i){var t=i.node;if(this.shown||this.showing){var e=Object.assign({},i.callbackData);e.node=t,this.deepZoom.image=e}},h.setLensSize=function(i,t){this.lensSize={width:i,height:t},this.lensHalfSize={width:this.lensSize.width/2,height:this.lensSize.height/2}},h.calcLensSize=function(){var i=this.pSize,t=this.currentLensSize;this.setLensSize(E(i.width,t.width),E(i.height,t.height))},h.getBaseScale=function(){this.baseScale={x:this.zoomNodeSize.width/this.iSize.width,y:this.zoomNodeSize.height/this.iSize.height}},h.calcLensPosition=function(){},h.getImagePosition=function(){},h.showDeepZoom=function(i,t){if(this.deepZoom){this.o.test&&!R&&((R=new M).parentClass=this);var e=this.view.hash;e&&(this.deepZoom.hash=e),this.deepZoom.lensSize=this.lensSize,this.deepZoom.minSize=this.zoomNodeSize,this.deepZoom.maxSize=Object.assign({originWidth:i,originHeight:t},this.iSize),this.deepZoom.show()}},h.endOfShowing=function(i){var t=!1;return this.state===e.APPEARANCE.SHOWING&&(t=!0,this.state=e.APPEARANCE.SHOWN,i||this.setEvents(),this.setCursorState(),this.o.smoothing||this.deepZoomAction()),t},h.sendZoomShownEvent=function(){this.emit("zoomShown",{data:{clientPosition:{x:this._x,y:this._y},pagePosition:{x:this.pPos.left,y:this.pPos.top}}})},h.showCenter=function(i,t,e){this.getAllSizes();var s=this.pPos.left+this.pSize.width/2,o=this.pPos.top+this.pSize.height/2;return this.show(i,t,s,o,!1,e)},h.show=function(){return this.state===e.APPEARANCE.HIDDEN&&(this.state=e.APPEARANCE.SHOWING,!0)},h.endOfHiding=function(){this.stopMovingAndZooming(),clearTimeout(this.hideTimer),this.anim.stop(),this.setCursorState("zoomIn"),this.view.clearCss(),this.baseScale={x:1,y:1},this.scale={x:1,y:1},this.dScale={x:1,y:1},this.setUpEvent=!1,this.basePercentOfScale={x:0,y:0},clearTimeout(this.deepZoomTimer),this.deepZoom.hide(),this.view.clearDOM(),this.state=e.APPEARANCE.HIDDEN,R&&(R.destroy(),R=null),this.emit("zoomHidden",{data:{clientPosition:{x:this._x,y:this._y},pagePosition:{x:this.pPos.left,y:this.pPos.top}}})},h.hide=function(i){return!![e.APPEARANCE.SHOWN,e.APPEARANCE.SHOWING].includes(this.state)&&(this.state=e.APPEARANCE.HIDING,this.view.removeEvents(),i?(clearTimeout(this.deepZoomTimer),this.deepZoom.hide(),this.endOfHiding()):this.stopMovingAndZooming(),!0)},h.addClickEvent=function(){var i=this,t=["btnclick","tap"];"dblclick"===this.o.trigger&&(t=["dblbtnclick","dbltap"]),this.view.addEventToWrapper(t,(function(t){t.stop(),i.x=t.x,i.y=t.y,"up"===i.o.clickBehavior?i.zoomUp(t.x,t.y)||i.hide():i.o.smoothing&&i.scale.x!==i.baseScale.x?i.hide():i.hide(!0)}))},h.customMove=function(i,t){[e.APPEARANCE.HIDDEN,e.APPEARANCE.HIDING].includes(this.state)||this.move(i,t)},h.move=function(i,t){this.x=i,this.y=t,this.afterMove()},h.afterMove=function(){this.o.smoothing||this.render(this.iPos,this.scale)},h.setEvents=function(){},h.setLensStyleOnResize=function(){this.view.lensStyle={top:this.lensPosition.top,left:this.lensPosition.left,width:this.lensSize.width,height:this.lensSize.height}},h.onResize=function(){if(this.state!==e.APPEARANCE.HIDDEN)if(this.state===e.APPEARANCE.HIDING)this.hide(!0);else{if(this.state===e.APPEARANCE.SHOWING&&this.o.smoothing&&(this.state=e.APPEARANCE.SHOWN,this.setEvents(),this.view.removeEventFromWrapper("transitionend"),this.view.lensStyle={transition:""},this.stopMovingAndZooming(),this.view.setImagePosition(this.iPos,this.scale)),this.getAllSizes(),this.zoomNodeSize.width>this.iSize.width||this.zoomNodeSize.height>this.iSize.height)return void this.hide(!0);this.getBaseScale(),this.scale.x=D(this.scale.x,this.baseScale.x,1),this.scale.y=D(this.scale.y,this.baseScale.y,1),this.calcLensSize(),this.calcLensPosition(),this.setLensStyleOnResize(),this.deepZoom.lensSize=this.pSize,this.deepZoom.minSize=this.zoomNodeSize,this.deepZoom.resize(),this.view.eventNodePositionSize={position:this.pPos,size:this.pSize},this.o.smoothing||(this.sendZoomingAction(),this.setCursorState(),this.deepZoomAction(),this.view.setImagePosition(this.iPos,this.scale))}},h.destroy=function(){this.hide(!0),clearTimeout(this.zoomingTimer),this.view.removeScrollEvent(this.scrollHandler),this.setCursorState("canZoom"),clearTimeout(this.deepZoomTimer),this.deepZoom.destroy(),this.deepZoom=null,this.off("getTile"),this.off("zoomCancelLoadingOfTiles"),R&&(R.destroy(),R=null),this.zoomingTimer=null,t.prototype.destroy.call(this)},i.createClass(s,[{key:"lensContainer",set:function(i){this.view.lensContainer=i}},{key:"shown",get:function(){return this.state===e.APPEARANCE.SHOWN}},{key:"showing",get:function(){return this.state===e.APPEARANCE.SHOWING}},{key:"x",set:function(i){this._x=this.correctX(i)}},{key:"y",set:function(i){this._y=this.correctY(i)}},{key:"nextMinZoom",get:function(){var i=this.deepZoom.getScale("zoomout");return i<this.baseScale.x&&(i=this.baseScale.x),this.getZoomData(i)}},{key:"nextMaxZoom",get:function(){var i=this.deepZoom.getScale("zoomin");return i>1&&(i=1),this.getZoomData(i)}}]),s}(h),X=function(t){"use strict";function s(i,e){var s;return(s=t.call(this,i,Object.assign({map:!1,mapSize:50},e))||this).basePercentOfScale={x:0,y:0},s.clonedImage=null,s.hideTimer=null,s.showTimer=null,s.map=null,s.zoomingTimer=null,s.currentCursorState=0,s.innerImagePosition={x:0,y:0},s.setUpEvent=!1,n.browser.mobile&&(s.o.pan=!0,"hover"===s.o.trigger&&(s.o.trigger="click")),s.view.setLensCss(s.lensPosition,s.lensSize),s.ANIM_STEP=.3,s}i.inheritsLoose(s,t);var o=s.prototype;return o.init=function(){t.prototype.init.call(this),this.createZoomMap()},o.createZoomMap=function(){var i=this;if(this.o.map){var t=parseInt(E(this.pSize.width/2,this.o.mapSize),10),e=parseInt(E(this.pSize.height/2,this.o.mapSize),10);this.map=new H(this.view.getContainerForMap(),{maxwidth:t,maxheight:e}),this.map.parentClass=this,this.on("zoomGetImage",(function(i){i.stopEmptyEvent(),i.data.map=!0,i.data.exactSize=!0})),this.on("zoomMapNewPosition",(function(t){t.stopAll(),i.x=i.pPos.left+E(i.lensSize.width,t.data.x),i.y=i.pPos.top+E(i.lensSize.height,t.data.y),i.calcPositionOfImageInCenter(i.scale),i.o.smoothing||(i.deepZoomAction(),i.view.setImagePosition(i.iPos,i.scale),i.map&&i.map.move(i.iPos,i.scale))}))}},o.move=function(i,t){this.x=i,this.y=t,this.calcPositionOfImage(this.scale),this.afterMove()},o.render=function(i,e){t.prototype.render.call(this,i,e),this.map&&this.map.move(i||this.iDPos,e||this.dScale)},o.calcPositionOfImageForPinch=function(i){i||(i=this.dScale);var t,e,s=this.iSize.width*i.x,o=this.iSize.height*i.y,h=C(this.iSize.width,s),n=C(this.iSize.height,o);s>this.lensSize.width?(t=this._x-(E(s,this.basePercentOfScale.x)+h),t=T(t,0-h,h+s,this.lensSize.width)):t=this.lensSize.width/2-(s/2+h),o>this.lensSize.height?(e=this._y-(E(o,this.basePercentOfScale.y)+n),e=T(e,0-n,n+o,this.lensSize.height)):e=this.lensSize.height/2-(o/2+n),this.iPos={x:t,y:e}},o.setScale=function(i,t,s){this.state===e.APPEARANCE.SHOWN&&(n.defined(t)&&(this.x=t,this.y=s),this.scale.x=i,this.scale.y=i,this.scale.x=D(this.scale.x,this.baseScale.x,1),this.scale.y=D(this.scale.y,this.baseScale.y,1),this.calcPositionOfImageForPinch(this.scale),this.sendZoomingAction(),this.setCursorState(),this.o.smoothing||(this.dScale.x=this.scale.x,this.dScale.y=this.scale.y,this.imageDPosition.x=this.imagePosition.x,this.imageDPosition.y=this.imagePosition.y,this.deepZoomAction(),this.view.setImagePosition(this.imagePosition,this.scale),this.map&&this.map.move(this.imagePosition,this.scale)))},o.afterZoom=function(i){this.calcPositionOfImageForPinch(this.scale),t.prototype.afterZoom.call(this,i)},o.calcPositionOfImage=function(i,t,e,s){var o=e||this._x,h=s||this._y;i||(i=this.dScale);var n,a,r=this.iSize.width*i.x,l=this.iSize.height*i.y,c=C(this.iSize.width,r),d=C(this.iSize.height,l);r>this.lensSize.width?(n=o-E(r,I(o,this.pSize.width))-c,n=T(n,0-c,c+r,this.lensSize.width)):n=this.lensSize.width/2-(r/2+c),l>this.lensSize.height?(a=h-E(l,I(h,this.pSize.height))-d,a=T(a,0-d,d+l,this.lensSize.height)):a=this.lensSize.height/2-(l/2+d),this.iPos={x:n,y:a}},o.calcPositionOfImageInCenter=function(i){i||(i=this.dScale);var t=this.iSize.width*i.x,e=this.iSize.height*i.y,s=C(this.iSize.width,t),o=C(this.iSize.height,e),h=this._x/(this.lensSize.width/t),n=this._y/(this.lensSize.height/e);h=this.lensSize.width/2-h-s,n=this.lensSize.height/2-n-o,h=T(h,0-s,s+t,this.lensSize.width),n=T(n,0-o,o+e,this.lensSize.height),this.iPos={x:h,y:n}},o.setImage=function(i){(this.shown||this.showing)&&(i.callbackData.map?this.map&&(this.map.img={src:i.src,srcset:i.srcset}):t.prototype.setImage.call(this,i))},o.endOfShowing=function(i){t.prototype.endOfShowing.call(this,i)&&this.map&&this.map.show()},o.getImagePosition=function(){this.innerImagePosition={x:C(this.lensSize.width,this.zoomNodeSize.width),y:C(this.lensSize.height,this.zoomNodeSize.height)}},o.show=function(i,e,s,o,h,n){var a=this;return!!t.prototype.show.call(this)&&(this.setUpEvent=h,this.iSize={width:e.width,height:e.height},this.view.addStartCss(),this.view.appendNodes(i,this.iSize),this.getAllSizes(),this.x=s,this.y=o,this.calcLensSize(),this.getImagePosition(),this.getBaseScale(),this.showDeepZoom(e.originWidth,e.originHeight),this.showTimer=setTimeout((function(){var i;a.showTimer=null,a.emit("zoomBeforeShow",{data:{}}),n&&"max"!==n&&("zero"===n?(a.scale.x=a.baseScale.x,a.scale.y=a.baseScale.y):(i=a.deepZoom.getScale("zoomin"),a.scale.x=i,a.scale.y=i)),a.calcPositionOfImage(a.scale,!0),a.view.eventNodePositionSize={position:a.pPos,size:a.pSize},a.dScale.x=a.baseScale.x,a.dScale.y=a.baseScale.y,a.iDPos={x:-1*C(a.iSize.width,a.iSize.width*a.dScale.x)+a.innerImagePosition.x,y:-1*C(a.iSize.height,a.iSize.height*a.dScale.y)+a.innerImagePosition.y},a.view.setLensCss(a.lensPosition,a.lensSize),a.view.setImageSize(a.iDPos,a.iSize,a.dScale),a.boundaries=a.view.boundaries,a.map&&a.map.prepare(a.iSize.width,a.iSize.height,a.pSize.width,a.pSize.height),a.o.smoothing&&"zero"!==n?(a.setEvents(),a.animStep=.3,a.animCb=function(){a.deepZoomAction(),a.endOfShowing(!0)}):a.endOfShowing(),a.o.smoothing&&a.anim.start(),a.sendZoomShownEvent()}),0),!0)},o.hide=function(i){var e=this,s=t.prototype.hide.call(this,i);return s&&(clearTimeout(this.showTimer),i||(this.scale.x!==this.baseScale.x||this.scale.y!==this.baseScale.y?(this.animStep=.4,this.scale.x=this.baseScale.x,this.scale.y=this.baseScale.y,this.iPos={x:-1*C(this.iSize.width,this.iSize.width*this.scale.x)+this.innerImagePosition.x,y:-1*C(this.iSize.height,this.iSize.height*this.scale.y)+this.innerImagePosition.y},this.animCb=function(){e.endOfHiding()}):this.endOfHiding())),s},o.addMouseScrollEvent=function(){var i=this;this.view.addEventToWrapper("mousescroll",(function(t){if(t.stop(),i.o.pan){var e=i.iSize,s=e.width*i.scale.x,o=e.height*i.scale.y,h=C(e.width,s),n=C(e.height,o);i.basePercentOfScale={x:I(Math.abs(i.iPos.x)+i.correctX(t.x)-h,s),y:I(Math.abs(i.iPos.y)+i.correctY(t.y)-n,o)}}var a,r=i.scale.x;if(t.isMouse){var l=t.delta/E(t.deltaFactor,37);i.scale.x+=l,i.scale.y+=l}else a=t.delta,Math.abs(a)>15&&(a=15,t.delta<0&&(a*=-1)),a/=350,i.scale.x+=a,i.scale.y+=a;i.scale.x=D(i.scale.x,i.baseScale.x,1),i.scale.y=D(i.scale.y,i.baseScale.y,1),i.o.pan?(i.x=t.x,i.y=t.y,i.calcPositionOfImageForPinch(i.scale)):i.calcPositionOfImage(i.scale),r!==i.scale.x&&(i.sendZoomingAction(),i.setCursorState(),i.o.smoothing||(i.dScale.x=i.scale.x,i.dScale.y=i.scale.y,i.iDPos.x=i.iPos.x,i.iDPos.y=i.iPos.y,i.deepZoomAction(),i.view.setImagePosition(i.iPos,i.scale),i.map&&i.map.move(i.iPos,i.scale))),i.hideByTimer()}))},o.hideByTimer=function(){var i=this;clearTimeout(this.hideTimer),this.scale.x<=this.baseScale.x+1e-8&&"outside"!==this.o.type&&(this.hideTimer=setTimeout((function(){i.hide(!0)}),1e3))},o.addInnerTouchDrag=function(){var i,t,e,s,o,h,n=this,a=!1;this.view.addEventToWrapper(x,(function(r){r.stop(),"dragstart"===r.state?(a=!0,n.view.addEventsCanvasClass(y.drag),n.stopMovingAndZooming(),n.x=r.x,n.y=r.y,e=n.iSize.width*n.scale.x,s=n.iSize.height*n.scale.y,o=C(n.iSize.width,e),h=C(n.iSize.height,s),i=r.x,t=r.y):"dragend"===r.state?(a=!1,n.view.removeEventsCanvasClass(y.drag)):a&&(n.x=r.x,n.y=r.y,e>n.lensSize.width?(n.iPos.x+=r.x-i,n.iPos.x=T(n.iPos.x,0-o,o+e,n.lensSize.width)):n.iPos.x=n.lensSize.width/2-(e/2+o),s>n.lensSize.height?(n.iPos.y+=r.y-t,n.iPos.y=T(n.iPos.y,0-h,h+s,n.lensSize.height)):n.iPos.y=n.lensSize.height/2-(s/2+h),n.o.smoothing&&n.o.pan?n.animStep=.3:(n.iDPos.x=n.iPos.x,n.iDPos.y=n.iPos.y,n.deepZoomAction(),n.view.setImagePosition(n.iPos,n.scale),n.map&&n.map.move(n.iPos,n.scale)),i=r.x,t=r.y)}))},o.addInnerPinch=function(){var i,t,s,o,h,n,a,r=this,l=1-this.baseScale.x;this.o.customZooming&&this.view.addEventToWrapper("pinch",(function(c){c.stop(),"pinchstart"===c.state?(clearTimeout(i),r.stopMovingAndZooming(),r.view.node.removeEvent(x),r.scale.x=r.dScale.x,r.scale.y=r.dScale.y,t=r.scale.x,o=1,h=1,n=1,a=r.baseScale.x,r.basePercent=c.centerPoint):"pinchresize"===c.state?r.basePercent=c.centerPoint:"pinchmove"===c.state?(r.x=c.centerPoint.x,r.y=c.centerPoint.y,s=c.scale,n<(s*=t)&&(n=s,a=r.baseScale.x,h=1,o=l/(n-r.baseScale.x)),a>s&&(a=s,n=1,o=1,h=r.baseScale.x/a),s=(r.baseScale.x+(s-r.baseScale.x)*o)*h,r.scale.x=s,r.scale.y=s,r.scale.x=D(r.scale.x,r.baseScale.x,1),r.scale.y=D(r.scale.y,r.baseScale.y,1),r.calcPositionOfImageForPinch(r.scale),r.sendZoomingAction(),r.setCursorState(),r.o.smoothing||(r.dScale.x=r.scale.x,r.dScale.y=r.scale.y,r.iDPos.x=r.iPos.x,r.iDPos.y=r.iPos.y,r.deepZoomAction(),r.view.setImagePosition(r.iPos,r.scale),r.map&&r.map.move(r.iPos,r.scale))):"pinchend"===c.state&&(clearTimeout(i),i=setTimeout((function(){r.addInnerTouchDrag()}),42),r.scale.x<=r.baseScale.x+1e-8&&"outside"!==r.o.type&&r.state!==e.APPEARANCE.HIDING&&(clearTimeout(i),r.hide(!0)))}))},o.hideZoomByMouseOut=function(){var i=this;this.view.addGlobalEvent((function(t){var e,s,o,h,a,r,l;e=t.clientXY,s=i.view.getContainerPosition(),o=i.view.getContainerSize(),h=n.D.scroll,a=!1,r=s.left-h.x,l=s.top-h.y,(e.x<=r||e.y<=l||e.x>=r+o.width||e.y>=l+o.height)&&(a=!0),a&&(i.view.removeGlobalEvent(),i.hide())}))},o.setEvents=function(){var i=this;this.setUpEvent&&n.browser.mobile&&this.view.addEventToWrapper(P,(function(t){t.stop(),i.hide(!0)})),this.o.customZooming&&this.addMouseScrollEvent(),this.addInnerTouchDrag(),this.view.removeDragstart(),this.setUpEvent||this.addInnerPinch(),"hover"!==this.o.trigger?this.addClickEvent():this.hideZoomByMouseOut(),this.o.pan||n.browser.mobile||this.view.addEventToMainContainer(b,(function(t){if(!t.pointerType||"touch"!==t.pointerType){t.stop();var e=t.pageXY;i.move(e.x,e.y)}}))},o.keepOldPosition=function(i){var t=this.iPos.x,e=this.iPos.y,s=this.iSize.width*this.scale.x,o=this.iSize.height*this.scale.y,h=C(this.iSize.width,s),n=C(this.iSize.height,o);t-=(i.width-this.lensSize.width)/2,e-=(i.height-this.lensSize.height)/2,t=s>this.lensSize.width?T(t,0-h,h+s,this.lensSize.width):this.lensSize.width/2-(s/2+h),e=o>this.lensSize.height?T(e,0-n,n+o,this.lensSize.height):this.lensSize.height/2-(o/2+n),this.iPos={x:t,y:e}},o.onResize=function(){var i=this.lensSize;if(t.prototype.onResize.call(this),this.state!==e.APPEARANCE.HIDDEN&&this.state!==e.APPEARANCE.HIDING&&(this.keepOldPosition(i),this.getImagePosition(),this.map)){var s=parseInt(E(this.pSize.width/2,this.o.mapSize),10),o=parseInt(E(this.pSize.height/2,this.o.mapSize),10);this.map.resize(s,o,this.iSize.width,this.iSize.height,this.pSize.width,this.pSize.height),this.o.smoothing||this.map.move(this.iPos,this.scale)}},o.destroy=function(){clearTimeout(this.showTimer),this.map&&(this.map.destroy(),this.map=null,this.off("zoomGetImage"),this.off("zoomMapNewPosition")),t.prototype.destroy.call(this)},i.createClass(s,[{key:"basePercent",set:function(i){if([e.APPEARANCE.SHOWN,e.APPEARANCE.SHOWING].includes(this.state)){var t=this.iSize,s=t.width*this.scale.x,o=t.height*this.scale.y,h=C(t.width,s),n=C(t.height,o);this.basePercentOfScale={x:I(Math.abs(this.iPos.x)+this.correctX(i.x)-h,s),y:I(Math.abs(this.iPos.y)+this.correctY(i.y)-n,o)}}}}]),s}(B),Y=function(t){"use strict";function e(i,e){var s;return n.browser.mobile&&9===e.margin&&delete e.margin,(s=t.call(this,i,Object.assign({width:70,height:70,margin:65},e))||this).setUpEvent=!1,s.isSquare=!0,s.ANIM_STEP=.4,s}i.inheritsLoose(e,t);var s=e.prototype;return s.init=function(){t.prototype.init.call(this),this.setOutsideLensSize()},s.setOutsideLensSize=function(){var i,t,e,s={width:this.o.width,height:this.o.height};s.width===s.height&&(this.isSquare=!0),[s.width,s.height].includes("auto")?(this.isSquare=!0,"auto"===s.width?"auto"!==s.height?(s.height=this.getPercentSize(s.height,"height"),s.width=s.height):(s.height=70,s.width=s.height):"auto"!==s.width?(s.width=this.getPercentSize(s.width,"width"),s.height=s.width):(s.height=70,s.width=s.height)):(s.width=this.getPercentSize(s.width,"width"),s.height=this.getPercentSize(s.height,"height")),this.currentLensSize=(i={width:s.width,height:s.height},t=10,e=90,(i.width>=i.height?i.width/i.height:i.height/i.width)>9?{width:50,height:50}:(i.width<t&&(i.height=t*(i.height/i.width),i.width=t),i.height<t&&(i.width=t*(i.width/i.height),i.height=t),i.width>e&&(i.height=e*(i.height/i.width),i.width=e),i.height>e&&(i.width=e*(i.width/i.height),i.height=e),i)),this.ANIM_STEP=.6},s.calcLensSize=function(){if(this.isSquare){var i=this.pSize,e=this.currentLensSize,s=E(Math.min(i.width,i.height),e.width);this.setLensSize(s,s)}else t.prototype.calcLensSize.call(this)},s.calcLensPosition=function(){var i,t,e,s,o=this.pSize,h=this.o.margin;h<0&&(h=0),this._x<0&&(this._x=0),this._y<0&&(this._y=0),this._x>o.width&&(this._x=o.width),this._y>o.height&&(this._y=o.height),i=this._y-this.lensHalfSize.height,t=this._x-this.lensHalfSize.width;var r=this.pPos;n.browser.mobile&&(i-=h,e=a(n.W).scroll,s=a(n.W).size,r.top+i<e.y&&(r.left+this._x-this.lensSize.width-h>e.x?(i=this._y-this.lensHalfSize.height,t=this._x-this.lensSize.width-h):r.left+this._x+this.lensSize.width+h<e.x+s.width?(i=this._y-this.lensHalfSize.height,t=this._x+h):e.y+s.height>r.top+this._y+h+this.lensSize.height&&(i=this._y+h))),this.lensPosition={top:i,left:t}},s.calcPositionOfImage=function(i,t,e,s){var o=e||this._x,h=s||this._y,n=this.lensHalfSize.width-E(this.iSize.width,I(o,this.pSize.width)),a=this.lensHalfSize.height-E(this.iSize.height,I(h,this.pSize.height));this.iPos={x:n,y:a}},s.getPercentSize=function(i,t){return/%$/.test(i)?i=parseInt(i,10):(i=parseInt(i,10),i/=this.pSize[t]/100),i},s.setEvents=function(){var i=this;this.setUpEvent&&!this.o.pan&&this.view.addEventToMainContainer(P,(function(t){t.stop(),i.hide(!0)})),this.o.customZooming&&this.addMouseScroollEvent(),this.addMouseOverEvent(),"hover"===this.o.trigger&&this.addMouseOutEvent(),this.o.pan&&this.addDragEvent(),n.browser.mobile&&this.addTapEvent(),"hover"!==this.o.trigger&&this.addClickEvent(),this.o.pan||n.browser.mobile||this.view.addEventToMainContainer(b,(function(t){if(!t.pointerType||"touch"!==t.pointerType){t.stop();var e=t.pageXY;i.move(e.x,e.y),(i._x<=0||i._y<=0||i._x>=i.pSize.width||i._y>=i.pSize.height)&&i.hide()}}))},s.afterMove=function(){this.calcLensPosition(),this.calcPositionOfImage(this.scale),this.view.lensPosition=this.lensPosition,t.prototype.afterMove.call(this)},s.changeLensSize=function(i){i.width=D(i.width,10,90),i.height=D(i.height,10,90),i.width!==this.currentLensSize.width&&(this.currentLensSize.width=i.width,this.currentLensSize.height=i.height,this.calcLensSize(),this.calcLensPosition(),this.calcPositionOfImage(),this.iDPos.x=this.iPos.x,this.iDPos.y=this.iPos.y,this.deepZoomAction(!1,this.lensSize),this.view.setImagePosition(this.iPos,this.scale),this.view.lensPosition=this.lensPosition,this.view.lensSize=this.lensSize)},s.addMouseScroollEvent=function(){var i=this;this.view.addEventToWrapper("mousescroll",(function(t){var e;t.stop();var s=t.delta,o={width:0,height:0};if(i.isSquare)for(e in o)({}).hasOwnProperty.call(o,e)&&(o[e]=i.currentLensSize[e]+s);else e=i.currentLensSize.height/i.currentLensSize.width,o.width=i.currentLensSize.width+s,o.height=i.currentLensSize.height+s*e;i.changeLensSize(o)}))},s.addMouseOverEvent=function(){var i=this;this.view.addEventToMainContainer("mouseover",(function(t){t.stop();var e=t.pageXY;i.x=e.x,i.y=e.y,i.calcLensPosition(),i.calcPositionOfImage(),i.view.lensPosition={top:i.lensPosition.top,left:i.lensPosition.left},i.view.setImagePosition(i.iPos,i.scale)}))},s.addMouseOutEvent=function(){var i=this;this.view.addEventToWrapper("mouseout",(function(t){for(var e=t.related;e&&e!==i.node&&e!==i.lensContainer&&e!==i.eventsCanvasNode;)e=e.parentNode;if(i.node!==e&&i.eventsCanvasNode!==e){var s=t.clientXY;(s.x<i.boundaries.left||s.x>i.boundaries.right||s.y<i.boundaries.top||s.y>i.boundaries.bottom)&&(t.stop(),i.o.smoothing?i.hide():i.hide(!0))}}))},s.addDragEvent=function(){var i=this,t=!1;this.view.addEventToMainContainer(x,(function(e){e.stop(),"dragstart"===e.state?t=!0:"dragend"===e.state?t=!1:t&&i.move(e.x,e.y)}))},s.addTapEvent=function(){var i=this;this.view.addEventToMainContainer("dblclick"===this.o.trigger?"dbltap":"tap",(function(t){t.stop(),i.o.smoothing?i.hide():i.hide(!0)}))},s.hide=function(i){var e=this,s=t.prototype.hide.call(this,i);return s&&(i||(this.view.addEventToWrapper("transitionend",(function(i){i.stop(),e.view.removeEventFromWrapper("transitionend"),e.endOfHiding()})),this.view.lensStyle={transition:"opacity .2s linear, transform .2s linear",opacity:0,transform:"scale(0)"})),s},s.show=function(i,e,s,o,h,n){var a=this;return!!t.prototype.show.call(this)&&(this.emit("zoomBeforeShow",{data:{}}),this.setUpEvent=h,this.iSize={width:e.width,height:e.height},this.view.addStartCss(),this.view.appendNodes(i,this.iSize),this.getAllSizes(),this.x=s,this.y=o,this.calcLensSize(),this.calcLensPosition(),this.getBaseScale(),this.showDeepZoom(e.originWidth,e.originHeight),this.calcPositionOfImage(this.scale,!0),this.view.eventNodePositionSize={position:this.pPos,size:this.pSize},this.dScale.x=this.baseScale.x,this.dScale.y=this.baseScale.y,this.iDPos={x:-1*C(this.iSize.width,this.iSize.width*this.dScale.x)-this.lensPosition.left,y:-1*C(this.iSize.height,this.iSize.height*this.dScale.y)-this.lensPosition.top},this.view.setLensCss(this.lensPosition,this.lensSize,"opacity .15s linear, transform .15s linear"),this.view.setImageSize(this.iDPos,this.iSize,this.dScale),this.boundaries=this.view.boundaries,this.o.smoothing?(this.view.addEventToWrapper("transitionend",(function(i){i.stop(),a.view.removeEventFromWrapper("transitionend"),a.view.lensStyle={transition:""},a.sendZoomShownEvent()})),this.endOfShowing(),this.anim.start()):(this.endOfShowing(),this.sendZoomShownEvent()),!0)},e}(B),F=function(t){"use strict";function s(e,s){var o;return(o=t.call(this,e,Object.assign({margin:9,outsidePosition:"right",width:100,height:100},s))||this).showingParams=null,o.eye=new N(o.view.getNodeForEye(),"hover"===o.o.trigger),o.ANIM_STEP=.18,o.mouseOutHandler=o.mouseOut.bind(i.assertThisInitialized(o)),o}i.inheritsLoose(s,t);var o=s.prototype;return o.getBoundaries=function(){this.boundaries=this.eye.boundaries},o.init=function(){t.prototype.init.call(this),this.setOutsideLensSize()},o.setEyesParams=function(){var i=this.currentLensSize.width/(this.iSize.width*this.scale.x),t=this.currentLensSize.height/(this.iSize.height*this.scale.y);this.eye.size={width:i*this.zoomNodeSize.width,height:t*this.zoomNodeSize.height},this.eye.position={x:this._x,y:this._y}},o.calcLensPosition=function(){var i=this.o.margin,t=this.pSize,e=this.pPos;i<0&&(i=0);var s=e.top,o=e.left;switch(this.o.outsidePosition){case"top":s+=-1*(this.lensSize.height+i);break;case"left":o+=-1*(this.lensSize.width+i);break;case"right":o+=t.width+i;break;case"bottom":s+=t.height+i}this.lensPosition={top:s,left:o}},o.calcPositionOfImage=function(i){i||(i=this.dScale);var t=this.iSize.width*i.x,e=this.iSize.height*i.y,s=C(this.iSize.width,t),o=C(this.iSize.height,e),h=this._x/(this.zoomNodeSize.width/t),n=this._y/(this.zoomNodeSize.height/e);h=this.lensSize.width/2-h-s,n=this.lensSize.height/2-n-o,h=T(h,0-s,s+t,this.lensSize.width),n=T(n,0-o,o+e,this.lensSize.height),this.iPos={x:h,y:n}},o.afterMove=function(){this.calcLensPosition(),this.calcPositionOfImage(this.scale),this.setEyesParams(),this.view.lensPosition=this.lensPosition,t.prototype.afterMove.call(this)},o.hide=function(i){var e=t.prototype.hide.call(this,i);return e&&(n.browser.mobile||this.view.removeMouseMoveEvent(this.mouseOutHandler),this.eye.clearEvents(),this.eye.hide(),i||(this.view.removeEvents(),this.endOfHiding())),e},o.getShowingPropertiesToOutsideMode=function(){var i={start:{x:0,y:0},end:{x:0,y:0}};switch(this.o.outsidePosition){case"top":i.start.y=10,i.end.y=0;break;case"left":i.start.x=10,i.end.x=0;break;case"right":i.start.x=-10,i.end.x=0;break;case"bottom":i.start.y=-10,i.end.y=0}return i},o.endOfShowing=function(){t.prototype.endOfShowing.call(this),this.getBoundaries()},o.show=function(i,e,s,o,h,n){return!!t.prototype.show.call(this)&&(this.emit("zoomBeforeShow",{data:{}}),this.iSize={width:e.width,height:e.height},this.showingParams=this.getShowingPropertiesToOutsideMode(),this.view.addStartCss(this.showingParams),this.view.appendNodes(i,this.iSize),this.getAllSizes(),this.x=s,this.y=o,this.calcLensSize(),this.calcLensPosition(),this.getBaseScale(),this.showDeepZoom(e.originWidth,e.originHeight),this.calcPositionOfImage(this.scale,!0),this.view.eventNodePositionSize={position:this.pPos,size:this.pSize},this.dScale.x=this.baseScale.x,this.dScale.y=this.baseScale.y,this.iDPos={x:-1*C(this.iSize.width,this.iSize.width*this.dScale.x),y:-1*C(this.iSize.height,this.iSize.height*this.dScale.y)},this.view.setLensCss(this.lensPosition,this.lensSize,this.o.smoothing?"opacity .4s linear, transform .15s ease-in":"none"),this.view.setImageSize(this.iDPos,this.iSize,this.dScale),(this.o.smoothing||"zero"===n)&&this.endOfShowing(),this.eye.show(this.view.getImageForEye()),this.getBoundaries(),this.setEyesParams(),this.animStep=.3,this.o.smoothing?this.anim.start():this.endOfShowing(),this.sendZoomShownEvent(),!0)},o.setOutsideLensSize=function(){var i={width:this.o.width,height:this.o.height};"auto"===i.width?i.width=this.pSize.width:/%$/.test(this.o.width)?i.width=this.pSize.width/100*parseInt(this.o.width,10):i.width=parseInt(i.width,10),"auto"===i.height?i.height=this.pSize.height:/%$/.test(this.o.height)?i.height=this.pSize.height/100*parseInt(this.o.height,10):i.height=parseInt(i.height,10),this.currentLensSize={width:i.width,height:i.height}},o.calcLensSize=function(){var i=this.currentLensSize;this.lensSize={width:i.width,height:i.height},this.lensHalfSize={width:this.lensSize.width/2,height:this.lensSize.height/2}},o.setEvents=function(){var i=this;if(n.browser.mobile&&this.o.pan&&this.addOutsideTouchDrag(),!n.browser.mobile&&n.browser.touchScreen&&["edge","ie"].includes(n.browser.uaName)&&(this.o.pan||this.eye.addEventToMainContainer("pointerup",(function(t){i.hide()}))),this.eye.addEventToMainContainer("mousemove",(function(t){t.stop();var e=t.pageXY;i.move(e.x,e.y)})),"hover"===this.o.trigger)n.browser.mobile||this.view.addMouseMoveEvent(this.mouseOutHandler),this.eye.addEventToMainContainer("mouseout",this.mouseOutHandler);else{var t=["btnclick","tap"];"dblclick"===this.o.trigger&&(t=["dblbtnclick","dbltap"]),this.eye.addEventToMainContainer(t,(function(t){i.hide()}))}this.o.customZooming&&this.setMouseScrollEvent()},o.mouseOut=function(i){var t=i.clientXY;(t.x<this.boundaries.left||t.x>this.boundaries.right||t.y<this.boundaries.top||t.y>this.boundaries.bottom)&&this.hide(!this.getZoomData())},o.addOutsideTouchDrag=function(){var i=this,t=!1;this.eye.addEventToMainContainer(x,(function(e){e.stop(),"dragstart"===e.state?t=!0:"dragend"===e.state?t=!1:t&&i.move(e.x,e.y)}))},o.setMouseScrollEvent=function(){var i=this;this.eye.addEventToMainContainer("mousescroll",(function(t){var e=i.scale.x;if(t.stop(),t.isMouse){var s=t.delta/E(t.deltaFactor,37);i.scale.x+=s,i.scale.y+=s}else{var o=t.delta;Math.abs(o)>15&&(o=15,t.delta<0&&(o*=-1)),o/=350,i.scale.x+=o,i.scale.y+=o}i.scale.x=D(i.scale.x,i.baseScale.x,1),i.scale.y=D(i.scale.y,i.baseScale.y,1),i.calcPositionOfImage(i.scale),e!==i.scale.x&&(i.sendZoomingAction(),i.setCursorState(),i.o.smoothing||(i.dScale.x=i.scale.x,i.dScale.y=i.scale.y,i.iDPos.x=i.iPos.x,i.iDPos.y=i.iPos.y,i.deepZoomAction(),i.setImagePosition(i.iPos,i.scale)),i.setEyesParams())}))},o.setLensStyleOnResize=function(){this.view.lensPosition=this.lensPosition,this.view.setCanvasNodeSize(this.lensSize)},o.onResize=function(){t.prototype.onResize.call(this),this.state!==e.APPEARANCE.HIDDEN&&this.state!==e.APPEARANCE.HIDING&&this.eye.resize()},o.destroy=function(){this.eye.destroy(),this.view.removeMouseMoveEvent(this.mouseOutHandler),t.prototype.destroy.call(this)},s}(B);return function(t){"use strict";function e(e,s){var o;return(o=t.call(this)||this).zoomType=s.type,"inner"===s.type?(o.view=new L(e),o.view.addClassToWrapper("inner"),o.controller=new X(o.view,s)):["circle","square"].includes(s.type)?(o.view=new Z(e),o.view.addClassToWrapper(s.type),o.controller=new Y(o.view,s)):(o.view=new _(e),o.view.addClassToWrapper("outside"),o.controller=new F(o.view,s)),o.controller.parentClass=i.assertThisInitialized(o),o.controller.init(),o}i.inheritsLoose(e,t);var s=e.prototype;return s.getZoomData=function(i){return this.controller.getZoomData(i)},s.zoomUp=function(i,t){return this.controller.zoomUp(i,t)},s.zoomDown=function(i,t){return this.controller.zoomDown(i,t)},s.showCenter=function(i,t,e){return this.controller.showCenter(i,t,e)},s.addLoadedImage=function(i){this.controller.setImage(i)},s.show=function(i,t,e,s,o,h){return this.controller.show(i,t,e,s,o,h)},s.hide=function(i){return this.controller.hide(i)},s.customMove=function(i,t){this.controller.customMove(i,t)},s.setScale=function(i,t,e){"inner"===this.zoomType&&this.controller.setScale(i,t,e)},s.onResize=function(){this.controller.onResize()},s.destroy=function(){this.view.destroy(),this.controller.destroy()},i.createClass(e,[{key:"lensContainer",set:function(i){this.controller.lensContainer=i}},{key:"shown",get:function(){return this.controller.shown}},{key:"showing",get:function(){return this.controller.showing}},{key:"nextMinZoom",get:function(){return this.controller.nextMinZoom}},{key:"nextMaxZoom",get:function(){return this.controller.nextMaxZoom}},{key:"baseScale",get:function(){return this.controller.baseScale}},{key:"basePercent",set:function(i){"inner"===this.zoomType&&(this.controller.basePercent=i)}}]),e}(h)}));