Sirv.define("Slider",["bHelpers","magicJS","globalVariables","globalFunctions","ResponsiveImage","helper","EventEmitter","ContextMenu","ComponentLoader","defaultsVideoOptions","ViewerImage","SliderBuilder","ProductDetail","Description","Spin","Zoom","Video"],(function(e,t,i,s,n,o,r,a,l,d,c,h,u,p,f,v,m){var S,y=t,g=y.$,b="smv",C="smv-thumbnail",E=(y.W.node.devicePixelRatio,{orientation:{type:"string",enum:["horizontal","vertical"],defaults:"horizontal"},arrows:{type:"boolean",defaults:!0},loop:{type:"boolean",defaults:!0},quality:{type:"number",minimum:0,maximum:100,defaults:80},hdQuality:{type:"number",minimum:0,maximum:100,defaults:60},itemsOrder:{type:"array",defaults:[]},autostart:{oneOf:[{type:"string",enum:["created","visible","off"]},{type:"boolean",enum:[!1]}],defaults:"visible"},threshold:{type:"number",minimum:0,defaults:0},slide:{first:{type:"number",minimum:0,defaults:0},delay:{type:"number",minimum:9,defaults:3e3},preload:{type:"boolean",defaults:!0},autoplay:{type:"boolean",defaults:!1},animation:{type:{oneOf:[{type:"string",enum:["off","slide","fade"]},{type:"boolean",enum:[!1]}],defaults:"fade"},duration:{type:"number",minimum:9,defaults:200}},socialbuttons:{enable:{type:"boolean",defaults:!1},types:{facebook:{type:"boolean",defaults:!0},twitter:{type:"boolean",defaults:!0},linkedin:{type:"boolean",defaults:!0},reddit:{type:"boolean",defaults:!0},tumblr:{type:"boolean",defaults:!0},pinterest:{type:"boolean",defaults:!0},telegram:{type:"boolean",defaults:!0}}}},thumbnails:{enable:{type:"boolean",defaults:!0},size:{type:"number",minimum:5,defaults:70},position:{type:"string",enum:["top","left","right","bottom"],defaults:"bottom"},type:{type:"string",enum:["square","auto","bullets","grid","crop"],defaults:"square"},always:{type:"boolean",defaults:!1},target:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:!1},watermark:{type:"boolean",defaults:!0}},fullscreen:{enable:{type:"boolean",defaults:!0},always:{type:"boolean",defaults:!1},native:{type:"boolean",defaults:!1},thumbnails:{enable:{type:"boolean",defaults:!0},size:{oneOf:[{type:"string",enum:["auto"]},{type:"number",minimum:5}],defaults:"auto"},position:{type:"string",enum:["top","left","right","bottom"],defaults:"bottom"},type:{type:"string",enum:["square","auto","bullets","grid","crop"],defaults:"square"},always:{type:"boolean",defaults:!1},autohide:{type:"boolean",defaults:!1},watermark:{type:"boolean",defaults:!0}}},contextmenu:{enable:{type:"boolean",defaults:!1},text:{zoom:{in:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Zoom In"},out:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Zoom Out"}},fullscreen:{enter:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Enter Full Screen"},exit:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Exit Full Screen"}},download:{oneOf:[{type:"string"},{type:"boolean",enum:[!1]}],defaults:"Download Image"}}},productdetail:{enable:{type:"boolean",defaults:!1},position:{type:"string",enum:["top","right","bottom","left"],defaults:"top"}}}),I=function(t){"use strict";function s(e,s,n){var o;return(o=t.call(this)||this).node=g(e),o.options=s,o._type=i.SLIDE.TYPES.NONE,o.imgSrc=null,o.effect=null,o.additionalEffects=[],o.isStarted=!1,o.isPrepared=!1,o.toolOptions={},o.api={},o.isActive=!1,o.additionalOptions=n,o.parse(),o.setEvents(),o}e.inheritsLoose(s,t),s.isExist=function(e){var t=!1,s=o.getSirvType(e);return s&&{Image:c,Spin:f,Zoom:v,Video:m}[y.camelize("-"+i.SLIDE.NAMES[s.type])]&&(t=!0),t};var n=s.prototype;return n.createAPI=function(){var e=this;if(this.effect){this.api=this.effect.api;var t=[],s=i.SLIDE.TYPES;switch(this._type){case s.SPIN:t=["play","rotate","rotateX","rotateY","zoomIn","zoomOut"];break;case s.ZOOM:this.api.zoomIn&&(t=["zoomIn","zoomOut"])}t.forEach((function(t){var i=e.api[t];e.api[t]=function(){var t=!1,s=i;if(e.isActive){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];t=s.apply(e,o)}return t}}))}},n.setEvents=function(){var e=this;this.on("stats",(function(t){t.stopEmptyEvent(),t.data.component=i.SLIDE.NAMES[e._type]})),this.on("componentEvent",(function(t){t.stopEmptyEvent(),t.data.component=i.SLIDE.NAMES[e._type],"ready"===t.data.type&&(e._type===i.SLIDE.TYPES.IMAGE&&null!==t.data.data.imageIndex&&t.stopAll(),e.toolOptions=e.effect.options)}))},n.parse=function(){var e=o.getSirvType(this.node.node);e&&(this._type=e.type,this.imgSrc=e.imgSrc)},n.push=function(e){if(c){var t=new c(e,{options:this.options.image,isFullscreen:this.additionalOptions.isFullscreen,imageIndex:this.additionalEffects.length});t.parentClass=this,this.additionalEffects.push({node:e,src:g(e).attr("src"),datasrc:g(e).attr("data-src"),effect:t})}},n.sendEvent=function(e){this.effect&&this.effect.sendEvent&&this.effect.sendEvent(e)},n.resize=function(){this.broadcast("resize")},n.startFullInit=function(e){var t=this;this.effect&&(this.effect.startFullInit(e?e[this._type]:null),this.additionalEffects.length&&this.additionalEffects.forEach((function(i){i.effect&&i.effect.startFullInit(e?e[t._type]:null)})))},n.getSelectorImgUrl=function(e){return this.effect.getSelectorImgUrl(e)},n.getInfoSize=function(){var e=this;return this._type===i.SLIDE.TYPES.IMAGE?new Promise((function(t,i){Promise.all([e.effect.getInfoSize()].concat(e.additionalEffects.map((function(e){return e.effect.getInfoSize()})))).then((function(e){t(e[0])})).catch(i)})):this.effect.getInfoSize()},n.start=function(){if(!this.isPrepared){this.isPrepared=!0;var e={isFullscreen:this.additionalOptions.isFullscreen,quality:this.additionalOptions.quality,hdQuality:this.additionalOptions.hdQuality,isHDQualitySet:this.additionalOptions.isHDQualitySet,always:this.additionalOptions.always,nativeFullscreen:this.additionalOptions.nativeFullscreen},t=i.SLIDE.TYPES;switch(this._type){case t.IMAGE:c&&(this.effect=new c(this.node.node,Object.assign(e,{options:this.options.image,imageIndex:null})),this.effect.parentClass=this);break;case t.PANZOOM:case t.ZOOM:v&&(this.effect=new v(this.node.node,Object.assign(e,{options:this.options.zoom})),this.effect.parentClass=this);break;case t.SPIN:f&&(this.node.setCss({width:"100%",height:"100%"}),this.effect=new f(this.node.node,Object.assign(e,{options:this.options.spin})),this.effect.parentClass=this);break;case t.VIDEO:m&&(this.effect=new m(this.node.node,Object.assign(e,{options:this.options.video,nativeFullscreen:this.additionalOptions.nativeFullscreen})),this.effect.parentClass=this)}this.createAPI()}},n.isThumbnailGif=function(){return!(!this.effect||this._type!==i.SLIDE.TYPES.SPIN)&&this.effect.isThumbnailGif()},n.isZoomSizeExist=function(){var e=i.SLIDE.TYPES;return!(!this.effect||![e.SPIN,e.PANZOOM,e.ZOOM].includes(this._type))&&this.effect.isZoomSizeExist()},n.startGettingInfo=function(){this.effect&&this.effect.startGettingInfo()},n.startTool=function(e,t,i){!this.isStarted&&this.effect&&(this.isStarted=!0,this.effect.run(e,t,i),this.additionalEffects.length&&this.additionalEffects.forEach((function(s){s.effect&&s.effect.run(e,t,i)})))},n.loadContent=function(){this.isStarted&&this.effect.loadContent()},n.loadThumbnail=function(){this.isStarted&&this.effect.loadThumbnail()},n.getData=function(){var e={};return this.effect&&(delete(e=Object.assign(e,this.api)).start,delete e.stop,delete e.refresh),e},n.getZoomData=function(){return[i.SLIDE.TYPES.SPIN,i.SLIDE.TYPES.ZOOM].includes(this._type)?{isZoomed:this.effect.isZoomed(),zoom:this.effect.getZoomData()}:null},n.getSpinOrientation=function(){return this._type===i.SLIDE.TYPES.SPIN?this.effect.orientation:null},n.getSocialButtonData=function(e,t){var s=null;return this.isStarted&&(s=this._type===i.SLIDE.TYPES.SPIN?this.effect.getSocialButtonData(e,t):this.effect.getSocialButtonData(e)),s},n.loadVideoSources=function(){this.effect&&this.effect.addSources()},n.isEffectActive=function(){return!(!this.effect||"spin"!==this._type)&&this.effect.isActive()},n.activate=function(){this.isActive||(this.isActive=!0)},n.deactivate=function(){this.isActive=!1},n.getToolOptions=function(){return this.toolOptions},n.destroy=function(){this.effect&&(this.effect.destroy(),this.additionalEffects.length&&this.additionalEffects.forEach((function(e){e.effect?e.effect.destroy():!e.src&&e.datasrc&&e.node.removeAttribute("src")}))),this.toolOptions={},this.api={},this.isActive=!1,this.isStarted=!1,this.isPrepared=!1,this.off("stats"),this.off("componentEvent"),t.prototype.destroy.call(this)},e.createClass(s,[{key:"type",get:function(){return this._type}},{key:"originImageUrl",get:function(){return this.effect?this.effect.originImageUrl:null}}]),s}(r),w={},x=function(t){"use strict";function i(e){var i;return(i=t.call(this)||this).options=Object.assign({effect:"blank",orientation:"horizontal",time:600,easing:"ease-in-out"},e),i.isMove=!1,i.callbackData=null,i.effectName="blank",i.effect=null,i.addEvents(),i}e.inheritsLoose(i,t);var s=i.prototype;return s.addEvents=function(){var e=this;this.on("effectStart",(function(t){t.data={callbackData:e.callbackData},e.isMove=!0})),this.on("effectEnd",(function(t){t.data={callbackData:e.callbackData},e.isMove=!1,e.effect.destroy(),e.effect=null}))},s.make=function(e,t,i,s){var n=Object.assign(this.options,i||{});this.stop();var o,r,a,l=(o=n.effect,y.camelize("-"+o));Object.prototype.hasOwnProperty.call(w,l)||(l="Blank"),this.effect=new w[l](e,t,{time:n.time,easing:n.easing,direction:(r=n.direction,a=n.orientation,"horizontal"===a?"next"===r?"right":"left":"next"===r?"bottom":"top")}),this.effect.parentClass=this,this.callbackData=s,this.effect.make()},s.stop=function(){this.effect&&(this.effect.destroy(),this.effect=null),this.callbackData=null},s.destroy=function(){this.stop(),this.off("effectStart"),this.off("effectEnd"),this.isMove=!1,t.prototype.destroy.call(this)},i}(r),O=function(t){"use strict";function i(e,i,s){var n;return(n=t.call(this)||this).name="blank",n.elements=[e,i],n.elements[0].node=g(n.elements[0].node),n.elements[1].node=g(n.elements[1].node),n.options=Object.assign({},s||{}),n.states={NOT_STARTED:0,MOVING:1,ENDED:2},n.state=n.states.NOT_STARTED,n.isDestroyed=!1,n}e.inheritsLoose(i,t);var s=i.prototype;return s._show=function(e){this.elements[e].node.setCss({opacity:1,visibility:"visible"})},s._hide=function(e){this.elements[e].node.setCss({opacity:0,visibility:"hidden"})},s._start=function(){this.emit("effectStart",{name:this.name,indexes:[this.elements[0].index,this.elements[1].index]}),this._show(0),this.elements[0].node.setCssProp("z-index",9),this._show(1),this.elements[1].node.setCssProp("z-index",7)},s._move=function(e){e()},s._end=function(){this.state!==this.states.ENDED&&(this.state=this.states.ENDED,this._hide(0),this.emit("effectEnd",{name:this.name,indexes:[this.elements[0].index,this.elements[1].index]}))},s._clear=function(){this.elements.forEach((function(e){e.node.setCss({zIndex:"",opacity:"",visibility:""})}))},s.make=function(){var e=this;this.state===this.states.NOT_STARTED&&(this.state=this.states.MOVING,this._start(),this._move((function(){e._end(),e._clear()})))},s.destroy=function(){this.isDestroyed||(this.isDestroyed=!0,this._end(),this._clear(),this.state=this.states.ENDED,t.prototype.destroy.call(this,this))},i}(r);w.Blank=O,w.Slide=(S=function(e){return e.map((function(e){return function(e){return e+"%"}(e)}))},function(t){"use strict";function i(e,i,s){var n;return(n=t.call(this,e,i,s)||this).options=Object.assign(n.options,Object.assign({direction:"left",time:600,easing:"ease-in-out"},s||{})),n.name="slide",n.from=g([0,-100]),n.to=g([100,0]),["right","bottom"].includes(n.options.direction)&&(n.from[1]*=-1,n.to[0]*=-1),n.from=S(n.from),n.to=S(n.to),n}e.inheritsLoose(i,t);var s=i.prototype;return s._show=function(e){var i=this.elements[e].node;["left","right"].includes(this.options.direction)?(this.from[e]=this.from[e]+", 0%",this.to[e]=this.to[e]+", 0%"):(this.from[e]="0%, "+this.from[e],this.to[e]="0%, "+this.to[e]),i.setCssProp("transform","translate3d("+this.from[e]+", 0px)"),t.prototype._show.call(this,e)},s._move=function(e){var i=this,s=this.options;this.elements[1].node.addEvent("transitionend",(function(s){i.elements[1].node.node===s.target&&(s.stop(),t.prototype._move.call(i,e))})),this.elements.forEach((function(e,t){e.node.render(),e.node.setCssProp("transition","transform "+s.time+"ms "+s.easing),e.node.setCssProp("transform","translate3d("+i.to[t]+", 0px)")}))},s._clear=function(){this.elements.forEach((function(e){e.node.removeEvent("transitionend"),e.node.setCss({transform:"",transition:""})})),t.prototype._clear.call(this,this)},i}(O));var P=function(t){"use strict";function i(e,i,s){var n;return(n=t.call(this,e,i,s)||this).options=Object.assign(n.options,Object.assign({time:600,easing:"linear"},s||{})),n.name="fade",n.from=g([1,0]),n.to=g([0,1]),n}e.inheritsLoose(i,t);var s=i.prototype;return s._show=function(e){t.prototype._show.call(this,e),this.elements[e].node.setCssProp("opacity",this.from[e])},s._move=function(e){var i=this,s=this.options;this.elements[1].node.addEvent("transitionend",(function(s){i.elements[1].node.node===s.target&&(s.stop(),t.prototype._move.call(i,e))})),this.elements.forEach((function(e,t){e.node.render(),e.node.setCssProp("transition","opacity "+s.time+"ms "+s.easing),e.node.setCssProp("opacity",i.to[t])}))},s._clear=function(){this.elements.forEach((function(e){e.node.removeEvent("transitionend"),e.node.setCss({opacity:"",transition:""})})),t.prototype._clear.call(this)},i}(O);w.Fade=P;var z,D,N,A,F,_,L,k,T,R,U,B,V,M,W,H,G,$,Y,j=function(t){"use strict";function i(i){var s,n;return(s=t.call(this)||this).options=Object.assign({orientation:"horizontal",customClass:""},i||{}),s.arrows=(s.options.orientation,n=s.options.customClass,g(["prev","next"]).map((function(e){var t=y.$new("div").addClass("smv-arrow-control","smv-arrow-control-"+e),i=y.$new("div").addClass("smv-button").addClass("smv-arrow").addClass("smv-arrow-"+e);return n&&""!==n&&i.addClass("smv-arrow-"+n),t.append(i),t}))),s.arrows.forEach((function(t,i){var n=i?"next":"prev",o=g(t.node.firstChild);t.store("arrowType",n),o.append(y.$new("div").addClass("smv-icon")),o.addEvent(["btnclick","tap"],g((function(e,i){i.stop(),t.fetch("disabled")||s.emit("arrowAction",{data:{type:e}})})).bind(e.assertThisInitialized(s),n))})),s.isShow=!0,s}e.inheritsLoose(i,t);var s=i.prototype;return s.show=function(){this.isShow||(this.arrows.forEach((function(e){e.removeClass("smv-hidden")})),this.isShow=!0)},s.hide=function(){this.isShow&&(this.isShow=!1,this.arrows.forEach((function(e){e.addClass("smv-hidden")})))},s.disable=function(e){if(e&&this.isShow){var t="forward"===e?1:0;this.arrows[t].store("disabled",!0),g(this.arrows[t].node.firstChild).attr("disabled","")}else this.arrows.forEach((function(e){g(e.node.firstChild).removeAttr("disabled"),e.store("disabled",!1)}))},s.destroy=function(){this.arrows.forEach((function(e){g(e.node.firstChild).removeEvent(["btnclick","tap"]),e.del("arrowType"),e.del("disabled"),e.remove()})),this.arrows=g([]),this.isShow=!1,t.prototype.destroy.call(this)},e.createClass(i,[{key:"nodes",get:function(){return g([this.arrows[0],this.arrows[1]])}}]),i}(r),q=(z=function(e){var t="horizontal";return["left","right"].includes(e)&&(t="vertical"),t},D={width:560,height:315},N=0,A=1,F=2,L=function(t){"use strict";function i(e,i,s,n,o){var r;return(r=t.call(this,e,i,s,n)||this).imageOrientation="horizontal",r.isSirv=!1,r.watermark=o,r.src=null,r.srcset=null,r._imageSize={width:0,height:0},r.getProportionPromise=null,r.getUrlPromise=null,r.loadImagePromise=null,r}e.inheritsLoose(i,t);var s=i.prototype;return s.setCssSize=function(){["square","crop"].includes(this.type)?this.customSquare():this.removeCustomSquare(),t.prototype.setCssSize.call(this)},s.setImageUrl=function(e,t,i,s){this.src=e,this.srcset=t,this.node&&((this.src||this.srcset)&&(s&&this.node.attr("referrerpolicy",s),this.srcset&&this.node.attr("srcset",this.srcset+" 2x"),this.node.attr("src",this.src),y.browser.mobile||this.node.addEvent("mousedown",(function(e){e.stopDefaults()}))),i&&this.node.attr("alt",i))},s.loadImage=function(){var e=this;return this.loadImagePromise||(this.loadImagePromise=new Promise((function(t,i){e.node?o.loadImage(e.isSirv?e.node.node:e.node.node.src).then((function(i){e.loaded=!0,e.imageSize=i.size,e.setCssSize(),t(e)})).catch((function(s){e.destroyed?t(e):i(e)})):t(e)}))),this.loadImagePromise},s.customSquare=function(){if(Math.abs(this._imageSize.width-this._imageSize.height)>2&&"div"!==this.node.tagName){var e=y.$new("div").setCss({overflow:"hidden",position:"relative"});this.node.attr("data-image-orientation",this.imageOrientation),e.append(this.node),this.node.setCss({width:"",height:"","max-width":"none"}),"crop"===this.type?"horizontal"===this.imageOrientation?this.node.setCssProp("height",this.size):this.node.setCssProp("width",this.size):"vertical"===this.imageOrientation?this.node.setCssProp("height",this.size):this.node.setCssProp("width",this.size),this.node=e}},s.removeCustomSquare=function(){this.node&&"div"===this.node.tagName&&(this.node.removeEvent(["touchstart","selectstart","contextmenu"]),this.node.remove(),this.node=g(this.node.node.firstChild),this.node.setCss({width:"",height:"",maxWidth:""}),this.node.removeAttr("data-image-orientation"))},s.complete=function(){var e=this;return this.url.then((function(){return e.loadImage()}))},s.destroy=function(){this.node&&this.node.removeEvent("mousedown"),this.getProportionPromise=null,this.getUrlPromise=null,this.loadImagePromise=null,t.prototype.destroy.call(this)},e.createClass(i,[{key:"proportion",get:function(){var e=this;return this.getProportionPromise||(this.getProportionPromise=new Promise((function(t,i){e.destroyed?t({width:0,height:0}):e.emit("getSelectorProportion",{data:{resultingCallback:function(i){var s=i.size;e.isSirv=i.isSirv,s?(s.width||(s=D),t(s)):t(D)}}})}))),this.getProportionPromise}},{key:"url",get:function(){var e=this;return this.getUrlPromise||(this.getUrlPromise=new Promise((function(t,i){e.destroyed?t(e):e.emit("getSelectorImgUrl",{data:{crop:"crop"===e.type,type:e.type,watermark:e.watermark,size:e.selectorSize,resultingCallback:function(s){s?(e.setImageUrl(s.src,s.srcset,s.alt,s.referrerpolicy),t(e)):i(e)}}})}))),this.getUrlPromise}},{key:"imageSize",set:function(e){this._imageSize=e,this.imageOrientation=this._imageSize.width>=this._imageSize.height?"horizontal":"vertical"}}]),i}(_=function(t){"use strict";function i(e,i,s,n){var o;return(o=t.call(this)||this).node=g(e),o.type=i,o.size=s,o.orientation=n,o.getPlaceholderSizePromise=null,o.destroyed=!1,o.loaded=!1,o.content=null,o.node.tagName===C&&(o.content=Array.from(o.node.node.childNodes)),o}e.inheritsLoose(i,t);var s=i.prototype;return s.isLoaded=function(){return this.loaded},s.setCssSize=function(){this.node.setCss(this.selectorSize)},s.complete=function(){return this.node.setCss({width:"",height:""}),this.setCssSize(),Promise.resolve()},s.appendTo=function(e){this.content?this.content.forEach((function(t){e.append(t)})):e.append(this.node)},s.destroy=function(){this.destroyed=!0,this.node=null,this.getPlaceholderSizePromise=null,t.prototype.destroy.call(this)},e.createClass(i,[{key:"selectorSize",get:function(){var e={};return["square","crop"].includes(this.type)?(e.width=this.size,e.height=this.size):"horizontal"===this.orientation?e.height=this.size:e.width=this.size,e}},{key:"placeholderSize",get:function(){var e=this;return this.getPlaceholderSizePromise||(this.getPlaceholderSizePromise=new Promise((function(t){var i,s=e.selectorSize;s.width&&s.height?t(s):e.destroyed?t({width:0,height:0}):e.proportion.then((function(e){i=e})).finally((function(){s.width?s.height=i.height/i.width*s.width:s.width=i.width/i.height*s.height,t(s)}))}))),this.getPlaceholderSizePromise}},{key:"proportion",get:function(){return Promise.resolve(D)}}]),i}(r)),k=function(t){"use strict";function i(e,i,s,n,r,a){var l;return(l=t.call(this)||this).UUID=n,l.options=o.deepExtend({standard:{type:"square",size:70,orientation:"horizontal",watermark:!0},fullscreen:{type:"square",size:70,orientation:"horizontal",watermark:!0},activeClass:"smv-active",placeholderClass:"smv-thumbnail-placeholder",selectorContent:null,disabled:!1},r||{}),l.parentContainer=g(e),l._index=i,l.selector=g(s)||y.$new("div"),l._container=y.$new("div").addClass("smv-item").setCss({display:"inline-block"}),l.placeholder=y.$new("div").addClass(l.options.placeholderClass),l._size={width:0,height:0},l.currentObject=null,l.actived=!1,l._disabled=!1,l._destroyed=!1,l._container.append(l.selector),l.parentContainer.append(l._container),l.options.disabled&&l.disable(),l.infoPromise=a||Promise.resolve(!1),l.state=N,l.initPromise=null,l.init(),l}e.inheritsLoose(i,t);var s=i.prototype;return s.init=function(){var e=this;return this.initPromise||(this.initPromise=new Promise((function(t){e.infoPromise.then((function(){var i,s;e.standard=e.createContent(e.options.standard),e.standard&&e.standard instanceof L&&(i=e.options.standard,s=e.options.fullscreen,!Object.entries(i).some((function(e){var t=e[0];return e[1]!==s[t]})))?e.fullscreen=e.standard:e.fullscreen=e.createContent(e.options.fullscreen,!0),e.selector.append(e.placeholder),e.selector.attr("data-type")||e.selector.setCssProp("font-size",0),e.addEvents(),e.addCustomClick(),t()}))}))),this.initPromise},s.createContent=function(e,t){var i;if("bullets"!==e.type){if(this.options.selectorContent)i=new _(this.options.selectorContent,e.type,e.size,e.orientation);else{var s=g(new Image);i=new L(s,e.type,e.size,e.orientation,e.watermark)}i.parentClass=this}return i},s.addEvents=function(){var e=this;this.on("getSelectorProportion",(function(t){t.data.UUID=e.UUID})),this.on("getSelectorImgUrl",(function(t){t.data.UUID=e.UUID}))},s.addPlaceholder=function(e,t){this._container.attr("data-selector-type",e),this.selector.append(this.placeholder),this.placeholder.setCss(t)},s.toggle=function(e){var t=this;return new Promise((function(i,s){t.init().then((function(){var n,o=Promise.resolve();if(t.state!==e)if(t.state=e,t._disabled)n=o;else{var r=t.standard,a=t.options.standard.type;2===e&&(r=t.fullscreen,a=t.options.fullscreen.type),"bullets"===a?(t.selector.node.innerHTML="",t.currentObject=a,t._container.attr("data-selector-type",a),t.emit("resize"),n=o):(r instanceof L||t._container.attr("data-selector-type",a),n=new Promise((function(i,s){r?r.placeholderSize.then((function(s){if(t.state!==e||t._destroyed)i();else{if(!r.isLoaded()&&!t.options.selectorContent){for(;t.selector.node.firstChild;)t.selector.node.removeChild(t.selector.node.firstChild);t.addPlaceholder(a,s)}i(),r.complete().then((function(){if(t.state===e&&!t._destroyed){for(t._container.attr("data-selector-type",a),t.placeholder.remove();t.selector.node.firstChild;)t.selector.node.removeChild(t.selector.node.firstChild);r.appendTo(t.selector),t.currentObject=r,t.emit("resize")}})).catch((function(){}))}})):i()})))}else n=o;n.then(i).catch(s)}))}))},s.addClick=function(){var e=this;this._container.addEvent(["btnclick","tap"],(function(t){t.stop(),e.emit("selectorAction",{data:e.UUID})}))},s.addCustomClick=function(){if(this.options.selectorContent&&y.$(this.options.selectorContent).tagName===C){var e=g(this.options.selectorContent).node.querySelectorAll("a");Array.from(e).forEach((function(e){y.$(e).addEvent(["btnclick","tap"],(function(t){t.stop(),"#"===y.$(e).attr("href")[0]?(y.W.node.location.hash="",y.W.node.location.hash=y.$(e).attr("href")):y.W.node.open(y.$(e).attr("href"))}))}))}},s.activate=function(){this.actived||(this.actived=!0,this._container.addClass(this.options.activeClass))},s.deactivate=function(){this.actived&&(this.actived=!1,this._container.removeClass(this.options.activeClass))},s.disable=function(){this._disabled||(this._disabled=!0,this._container.attr("disabled","true"),this._container.setCssProp("display","none"),this.deactivate(),this.emit("resize"))},s._toggleForEnable=function(){var e,t;if(this.state!==N&&(e=this.state===A?this.standard||"bullets":this.fullscreen||"bullets"),e!==this.currentObject){var i=this.state;this.state=N,t=this.toggle(i)}else t=Promise.resolve();return t},s.enable=function(){var e=this;this._disabled&&(this._disabled=!1,this._toggleForEnable().then((function(){e._disabled||(e._container.removeAttr("disabled"),e._container.setCssProp("display",""),e.emit("resize"))})))},s.destroy=function(){this._destroyed=!0,this.placeholder.remove(),this.off("getSelectorProportion"),this.off("getSelectorImgUrl"),this.standard&&(this.standard.destroy(),this.standard=null),this.fullscreen&&(this.fullscreen.destroy(),this.fullscreen=null),this._container.removeEvent(["btnclick","tap"]),this._container.remove(),this._container=null,this.parentContainer=null,this.selector=null,t.prototype.destroy.call(this)},e.createClass(i,[{key:"proportion",get:function(){var e=this,t=Promise.resolve();return this._disabled||(this.state===F&&this.fullscreen?t=this.fullscreen.proportion:this.standard&&(t=this.standard.proportion)),new Promise((function(i,s){e.init().then((function(){t.then(i).catch(s)}))}))}},{key:"canActivate",get:function(){return this.options.activated}},{key:"activated",get:function(){return this.actived}},{key:"size",get:function(){return this._size=this._container.size,this._size}},{key:"index",set:function(e){this._index=e},get:function(){return this._index}},{key:"container",get:function(){return this._container}},{key:"pinnedPosition",get:function(){return this.options.pinned}},{key:"destroyed",get:function(){return this._destroyed}},{key:"disabled",get:function(){return this._disabled}}]),i}(r),T=function(e,t){return t?e+="px, 0":e="0, "+e+"px",e},function(t){"use strict";function i(e,i){var s;return(s=t.call(this)||this).options=Object.assign({isStandardGrid:!1,standardStyle:"square",standardSize:70,standardPosition:"bottom",standardWatermark:!0,isFullscreenGrid:!1,fullscreenStyle:"square",fullscreenSize:70,fullscreenPosition:"bottom",fullscreenAutohide:!1,fullscreenWatermark:!0,arrows:!0,activeClass:"smv-active"},i||{}),s.instanceNode=y.$new("div").addClass("smv-selectors").setCss({opacity:0,visibility:"hidden",transition:""}),s.selectorsContainer=y.$new("div").addClass("smv-ss"),s.selectorsScroll=y.$new("div").addClass("smv-scroll").setCss({transform:"translate3d(0, 0, 0)"}),s.controlButton=y.$new("div").addClass("smv-selectors-toggle-switch"),s.selectorsScrollContainer=y.$new("div").addClass("smv-selectors-scroll-container"),s.startPinnedNode=null,s.endPinnedNode=null,s.baseSelectorsList=[],s.pinnedStartList=[],s.pinnedEndList=[],s.isMove=!1,s.currentPosition=0,s.containerSize={width:0,height:0},s.halfContainerSize=0,s.scrollSize={width:0,height:0},s.halfScrollSize=0,s.currentActiveItem=null,s.isShown=!1,s.isControlShown=!0,s.isControlInDoc=!1,s.controlDebounce=null,s.isReady=!1,s.resizeTimeout=null,s.isActionsEnabled=!0,s.isDone=!1,s.isInView=!1,s.state=A,s.arrows=null,s._currentStylePosition=s.options.standardPosition,s.longSide=null,s._shortSide=null,s.currentAxis="x",s.isStarted=!1,s.isDestroyed=!1,e.some((function(e){return!!e.pinned}))&&s.initPinnedBlocks(),s.selectors=e.map((function(e,t){return s.createSelector(e,t)})),s.sortPinnedSelectors(),s.identifyVariables(),s.setContainerCss(),s}e.inheritsLoose(i,t);var n=i.prototype;return n.findSelector=function(e){var t;return null!=(t=this.selectors.find((function(t){return t.UUID===e})))?t:null},n.insertBefore=function(e,t){var i=this.selectors,s=this.selectorsScroll;if(this.hasPinnedSelector){var n,o;if("start"===t.pinnedPosition)i=this.pinnedStartList,s=y.$(null!=(n=null==(o=this.startPinnedNode)?void 0:o.node.firstChild.firstChild)?n:null);else if("end"===t.pinnedPosition){var r,a;i=this.pinnedEndList,s=y.$(null!=(r=null==(a=this.endPinnedNode)?void 0:a.node.firstChild.firstChild)?r:null)}else i=this.baseSelectorsList;e=i.indexOf(t)}var l=null;e+1<i.length&&(l=i[e+1].container),this.hide(),s.node.insertBefore(t.container.node,l?l.node:l)},n.insert=function(e,t){t.pinned&&(this.initPinnedBlocks(),this.appendPinnedBlocks());var i=this.createSelector(t,e);this.isDone&&i.addClick(),this.hide(),this.selectors.splice(e,0,i),this.selectors.forEach((function(e,t){e.index=t})),this.sortPinnedSelectors(),this.insertBefore(e,i),i.toggle(this.state)},n.disable=function(e){var t=this.findSelector(e);t&&(this.currentActiveItem&&this.currentActiveItem===t&&(this.currentActiveItem=null),this.hide(),t.disable())},n.enable=function(e){var t=this.findSelector(e);t&&(this.hide(),t.enable())},n.pickOut=function(e){var t=this.findSelector(e);t&&(t.destroy(),this.selectors.splice(t.index,1),this.selectors.forEach((function(e,t){e.index=t})),this.sortPinnedSelectors())},n.createSelector=function(e,t){var i,s,n=this.selectorsScroll;if("start"===e.pinned)n=null!=(i=null==(s=this.startPinnedNode)?void 0:s.node.firstChild.firstChild)?i:null;else if("end"===e.pinned){var o,r;n=null!=(o=null==(r=this.endPinnedNode)?void 0:r.node.firstChild.firstChild)?o:null}var a=new k(n,t,e.node,e.UUID,{standard:{type:this.options.standardStyle,size:this.options.standardSize,orientation:z(this.options.standardPosition),watermark:this.options.standardWatermark},fullscreen:{type:this.options.fullscreenStyle,size:this.options.fullscreenSize,orientation:z(this.options.fullscreenPosition),watermark:this.options.fullscreenWatermark},activeClass:this.options.activeClass,selectorContent:e.selectorContent,disabled:e.disabled,pinned:e.pinned,activated:e.activated},e.infoPromise);return a.parentClass=this,a},n.addEventsFromSelectors=function(){var e,t=this;this.on("selectorAction",(function(e){e.stopAll(),t.emit("changeSlide",{data:{UUID:e.data}});var i=t.selectors.find((function(t){return t.UUID===e.data}));i!==y.U&&t.activateItem(i)})),this.on("resize",(function(i){i.stopAll(),clearTimeout(e),e=setTimeout((function(){t.onResize()}),16)}))},n.initPinnedBlocks=function(){if(!this.pinnedBlocksInited){var e=function(e){return y.$new("div").addClass(b+e).append(y.$new("div").addClass("smv-ss").append(y.$new("div").addClass("smv-scroll").setCss({transform:"translate3d(0, 0, 0)"})))};this.startPinnedNode=e("-selectors-pinned-start"),this.endPinnedNode=e("-selectors-pinned-end")}},n.appendPinnedBlocks=function(){this.pinnedBlocksInited&&(this.instanceNode.append(this.startPinnedNode),this.instanceNode.append(this.endPinnedNode))},n.sortPinnedSelectors=function(){this.pinnedStartList=this.selectors.filter((function(e){return"start"===e.pinnedPosition})),this.pinnedEndList=this.selectors.filter((function(e){return"end"===e.pinnedPosition})),this.baseSelectorsList=this.selectors.filter((function(e){return!e.pinnedPosition}))},n.init=function(){var e=this;if(this.createArrows(),this.selectorsScrollContainer.append(this.selectorsContainer).appendTo(this.instanceNode),this.appendPinnedBlocks(),this.arrows){this.arrows.hide();var t=this.arrows.nodes;this.selectorsScrollContainer.append(t[0]),this.selectorsScrollContainer.append(t[1])}this.selectorsContainer.append(this.selectorsScroll),this.isShown=!0,this.hide(),this.identifyVariables(),this.addEventsFromSelectors(),this._currentStylePosition||this.instanceNode.setCssProp("display","none"),Promise.all(this.selectors.map((function(e){return e.proportion}))).finally((function(){e.isReady=!0,e.emit("selectorsReady")}))},n.identifyVariables=function(){if(this._currentStylePosition){var e="horizontal"===z(this._currentStylePosition);this.longSide=e?"width":"height",this._shortSide="width"===this.longSide?"height":"width",this.currentAxis=e?"x":"y"}else this.longSide=null,this._shortSide=null},n.changeSelectors=function(e){return Promise.all(this.selectors.map((function(t){return t.toggle(e)})))},n.getSelectorsSize=function(){return this.selectors.filter((function(e){return!e.destroyed})).map((function(e){return e.size}))},n.enableActions=function(){this.isActionsEnabled||(this.isActionsEnabled=!0,this.show(),this.options.fullscreenAutohide&&(this.selectorsState=!0))},n.disableActions=function(){this.isActionsEnabled&&(this.isActionsEnabled=!1,this.hide(),this.controlDebounce&&this.controlDebounce.cancel())},n.show=function(e){if(!this.isShown&&this.isActionsEnabled&&!this.isDestroyed){var t=e?"":"opacity 400ms linear";this.isShown=!0,this.selectorsScroll.setCss({display:"inline-flex"}),this.getSizes(),this.jump(this.activatedItem,!0),this.instanceNode.setCss({opacity:1,visibility:"visible",transition:t})}},n.activateCurrentItemByUUID=function(e){var t=this.findSelector(e);t&&!this.currentActiveItem&&(this.currentActiveItem=t)},n.hide=function(){this.isShown&&(this.isShown=!1,this.instanceNode.setCss({opacity:0,visibility:"hidden",transition:""}))},n.start=function(e){var t=this;!this.isStarted&&this.isInView&&(this.isStarted=!0,this._currentStylePosition?this.changeSelectors(1).then((function(){return s.rootDOM.addMainStyle(e)})).then((function(){t.isDestroyed||(t.getSelectorsSize(),t.done(),t.show())})):this.done())},n.addControl=function(){var e=this;this.isControlInDoc||(this.instanceNode.addEvent(["mouseover","mouseout"],(function(t){var i=t.related;for(i&&(i=g(i));i&&i.node!==e.instanceNode.node&&i.node!==y.D.node.body;)(i=i.node.parentNode)&&(i=g(i));i&&i.node===e.instanceNode.node||e.setControlTimeout("mouseover"===t.type)})),this.controlButton.addEvent(["btnclick","tap"],(function(t){e.setControlTimeout(!0),e.selectorsState=!e.isControlShown})),g(this.instanceNode.node.parentNode).append(this.controlButton),this.controlDebounce=o.debounce((function(){e.selectorsState=!1}),3e3),this.isControlInDoc=!0)},n.removeControl=function(){this.isControlInDoc&&(this.instanceNode.removeEvent(["mouseover","mouseout"]),this.controlDebounce.cancel(),this.isControlShown=!0,this.controlButton.removeEvent(["btnclick","tap"]),this.controlButton.remove(),this.isControlInDoc=!1)},n.setControlTimeout=function(e){this.isControlInDoc&&(this.controlDebounce.cancel(),this.isControlShown&&!e&&this.controlDebounce())},n.inView=function(e,t){this.isInView=e,this.start(t)},n.done=function(){this.isDone||this.isDestroyed||(this.isDone=!0,this.getSizes(),this.selectors.forEach((function(e){e.addClick()})),this.onResize(),this.setDrag(),this.emit("selectorsDone"))},n.activateItem=function(e){var t=this.selectors[e];t&&(this.currentActiveItem&&this.currentActiveItem.deactivate(),!t.disabled&&t.canActivate&&(t.activate(),this.currentActiveItem=t),!t.activated&&this.currentActiveItem&&this.currentActiveItem.activate())},n.createArrows=function(){var e=this;!this.options.arrows||"grid"===this.options.standardStyle&&"grid"===this.options.standardStyle||(this.arrows=new j({orientation:z(this.currentPosition||this.options.fullscreenPosition),customClass:"thumbnails"}),this.arrows.parentClass=this,this.on("arrowAction",(function(t){t.stopAll(),e.jump(t.data.type)})))},n.isGrid=function(){return this.state===F?this.options.isFullscreenGrid:this.options.isStandardGrid},n.calculateContainerScroll=function(){if(this.hasPinnedSelector||this.pinnedBlocksInited){var e=this.instanceNode.size;this.arrows&&this.arrows.hide();var t=e[this.longSide]-(this.startPinnedNode.size[this.longSide]+this.endPinnedNode.size[this.longSide]);t<0&&(t=0),this.scrollSize[this.longSide]<t&&(t=this.scrollSize[this.longSide]),this.selectorsScrollContainer.setCssProp("max-"+this.longSide,t),this.getSizes()}},n.normalizePositionValue=function(e){var t=this.containerSize[this.longSide]-this.scrollSize[this.longSide];return this.arrows&&(this.arrows.disable(),t>=0||this.isGrid()?(this.arrows.hide(),this.getSizes()):this.arrows.isShow||(this.arrows.show(),this.getSizes())),0===t?0:(this.halfScrollSize<=this.halfContainerSize?e=this.halfContainerSize-this.halfScrollSize:(e>=0&&(e=0,this.arrows&&this.arrows.disable("backward")),e<=t&&(e=t,this.arrows&&this.arrows.disable("forward"))),e)},n.findItemPosition=function(t){if(!this.selectors[t]||this.selectors[t].pinnedPosition)return null;if(t=function(e,t){return e<0?e=0:e>t-1&&(e=t-1),e}(t,this.selectors.length),this.hasPinnedSelector){var i=this.baseSelectorsList.indexOf(this.selectors[t]);i<0&&(e.readOnlyError("i"),i=t),t=i}for(var s=this.selectors[t].size[this.longSide]/2,n=0,o=0;o<t;)this.selectors[o]&&(n+=this.selectors[o].size[this.longSide]),o+=1;var r=this.halfContainerSize-(n+s);return this.normalizePositionValue(r)},n.stopMoving=function(){if(this.isMove){var e=o.getMatrix(this.selectorsScroll);e&&(e=e.transform[this.currentAxis],this.currentPosition=e),this.clearAnimation(),this.selectorsScroll.setCssProp("transform","translate3d("+T(this.currentPosition,this.horizontal)+", 0)")}},n.clearAnimation=function(){this.selectorsScroll&&(this.selectorsScroll.removeEvent("transitionend"),this.selectorsScroll.setCssProp("transition","")),this.isMove=!1},n.jump=function(e,t){var i=this.currentPosition;this.stopMoving(),"string"!==y.typeOf(e)&&"number"!==y.typeOf(e)||("string"===y.typeOf(e)?("next"===e?i-=this.containerSize[this.longSide]:i+=this.containerSize[this.longSide],i=this.normalizePositionValue(i)):i=this.findItemPosition(e),null!==i&&this.move(i,null,t))},n.move=function(e,t,i){var s=this;if(t||(t=400),this.currentPosition!==e){this.selectorsScroll.removeEvent("transitionend");var n,o,r,a,l,d={};i||(this.isMove=!0,this.selectorsScroll.addEvent("transitionend",(function(e){e.stop(),s.clearAnimation()})),d.transition="transform "+(n=t,o=this.containerSize[this.longSide],r=Math.abs(e)-Math.abs(this.currentPosition),a=n,l=parseInt(n/3,10),(a=parseInt(Math.abs(r)/o*n,10))<l?a=l:a>n&&(a=n),a+"ms ease")),d.transform="translate3d("+T(e,this.horizontal)+", 0)",this.selectorsScroll.setCss(d),this.currentPosition=e}},n.getSizes=function(){this.containerSize=this.selectorsContainer.size,this.halfContainerSize=this.containerSize[this.longSide]/2,this.scrollSize=this.selectorsScroll.size,this.halfScrollSize=this.scrollSize[this.longSide]/2},n.setDrag=function(){var e,t,i,s,n,o,r,a,l=this,d={},c={x:null,y:null},h=!1,u=0,p=function(t,i){return{x:t-e.left,y:i-e.top}};d.dragstart=function(a){n=l.currentAxis,o="x"===n?"y":"x",r=l.longSide,c={x:a.x,y:a.y},l.containerSize[r]<l.scrollSize[r]&&(h=!0),e=l.selectorsContainer.position,l.stopMoving(),t=p(a.x,a.y)[n],i=l.containerSize[r]-l.scrollSize[r],s=0,a.timeStamp},d.dragend=function(e){var t,n;h&&(h=!1,e.stop(),e.timeStamp,((t=l.currentPosition-((n=s)+n/2))>0||t<i)&&(t=t>0?0:i),t=l.normalizePositionValue(t),l.move(t),a=null),u=0},d.dragmove=function(e){var i,r,d,f,v;u||(u=Math.abs(c[n]-e[n])>Math.abs(c[o]-e[o])?1:2),h&&1===u&&((i=p(e.x,e.y))[n]>i[o]&&(e.stop(),r=t-i[n],l.currentPosition-=r,f=t,v=i[n],d=f>v?"next":"prev",a&&d===a||(s=0),s+=r,t=i[n],a=d),l.selectorsScroll.setCssProp("transform","translate3d("+T(l.currentPosition,l.horizontal)+", 0)")),c={x:e.x,y:e.y}},this.selectorsContainer.addEvent(["mousedrag","touchdrag"],(function(e){d[e.state](e)}))},n.setContainerCss=function(){var e={},t=this.options.standardSize;this.state===F&&(t=this.options.fullscreenSize),e["min-"+this._shortSide]=t+"px",e[this._shortSide]="100%",this.instanceNode.setCss(e)},n.beforeEnterFullscreen=function(){this.hide(),this.state=F,this._currentStylePosition=this.options.fullscreenPosition,this._currentStylePosition||(this.instanceNode.setCssProp("display","none"),g(this.instanceNode.node.parentNode).setCssProp("display","none")),this.identifyVariables()},n.afterEnterFullscreen=function(){var e=this;this._currentStylePosition&&(this.instanceNode.setCssProp("display",""),g(this.instanceNode.node.parentNode).setCssProp("display",""),this.setContainerCss(),this.options.fullscreenAutohide&&(this.addControl(),this.isActionsEnabled&&(this.selectorsState=!0)),this.removeStyleForIE(),this.changeSelectors(2).then((function(){e.getSelectorsSize(),setTimeout((function(){e.show()}),150),e._currentStylePosition&&e.isActionsEnabled&&setTimeout((function(){e.selectorsState=!0}),1e3)})))},n.beforeExitFullscreen=function(){this.hide(),this.state=A,this._currentStylePosition=this.options.standardPosition,this.options.fullscreenAutohide&&this.removeControl(),this._currentStylePosition||(this.instanceNode.setCssProp("display","none"),g(this.instanceNode.node.parentNode).setCssProp("display","none")),this.identifyVariables()},n.afterExitFullscreen=function(){var e=this;this._currentStylePosition&&(this.instanceNode.setCssProp("display",""),g(this.instanceNode.node.parentNode).setCssProp("display",""),this.setContainerCss(),this.removeStyleForIE(),this.changeSelectors(1).then((function(){e.getSelectorsSize(),e.show()})))},n.removeStyleForIE=function(){"ie"===y.browser.uaName&&this.selectorsScroll.setCssProp(this.shortSide,"")},n.removeStyleForIE=function(){"ie"===y.browser.uaName&&this.selectorsScroll.setCssProp(this.shortSide,"")},n.isSelectorsActionEnabled=function(){return this.isActionsEnabled},n.sortSelectors=function(e,t){var i=this;this.selectors=e.map((function(e){return i.selectors.find((function(t){return t.UUID===e}))})),this.selectors.forEach((function(e,t){e.index=t}));for(var s=t-1;s>=0;s--)this.selectorsScroll.node.insertBefore(this.selectors[s].container.node,this.selectorsScroll.node.firstChild)},n.onResize=function(){var e=this;this.isDone&&this._currentStylePosition&&!this.isDestroyed&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((function(){var t=e.activatedItem;if(e.clearAnimation(),"ie"===y.browser.uaName){var i=e.isGrid()?"":e.selectors.reduce((function(t,i){return i.destroyed||(t+=i.size[e.longSide]),t}),0);e.selectorsScroll.setCssProp(e.longSide,i)}e.getSizes(),e.calculateContainerScroll(),e.activateItem(t),e.normalizePositionValue(),e.jump(t,!0),e.show()}),100))},n.destroy=function(){this.isDestroyed=!0,clearTimeout(this.resizeTimeout),this.instanceNode.removeEvent("transitionend"),this.removeControl(),this.controlButton=null,this.off("selectorAction"),this.off("resize"),this.clearAnimation(),this.arrows&&(this.arrows.destroy(),this.arrows=null,this.off("arrowAction")),this.selectors.forEach((function(e){e.destroy()})),this.selectorsScroll.remove(),this.selectorsScroll=null,this.selectorsContainer.remove(),this.selectorsContainer=null,this.instanceNode.remove(),this.instanceNode=null,this.currentActiveItem=null,this.pinnedBlocksInited&&(this.baseSelectorsList=[],this.pinnedStartList=[],this.pinnedEndList=[],this.endPinnedNode=null,this.startPinnedNode=null,this.selectorsScrollContainer=null,this.pinnedStartList=null,this.pinnedEndList=null),t.prototype.destroy.call(this)},e.createClass(i,[{key:"hasPinnedSelector",get:function(){return!(!this.pinnedStartList.length&&!this.pinnedEndList.length)}},{key:"pinnedBlocksInited",get:function(){return!!this.startPinnedNode&&!!this.endPinnedNode}},{key:"activatedItem",get:function(){return this.currentActiveItem?this.currentActiveItem.index:0}},{key:"selectorsState",set:function(e){this.isControlShown=e,this.setControlTimeout(),this.emit("visibility",{action:this.isControlShown?"show":"hide"})}},{key:"node",get:function(){return this.instanceNode}},{key:"horizontal",get:function(){return"horizontal"===z(this._currentStylePosition)}},{key:"currentStylePosition",get:function(){return this.state===F?this.options.fullscreenPosition:this.options.standardPosition}},{key:"shortSide",get:function(){return this._shortSide}}]),i}(r)),Z=(R=function(e){var t=(e=g(e)).attr("data-src");return t?(e.attr("data-src",t.split("?")[0]),e.removeAttr("src")):e.node.src=e.node.src.split("?")[0],e},U=function(t){"use strict";function s(e,s){var n;return(n=t.call(this)||this)._node=g(e),n.instanceOptions=function(e,t){var i=new y.Options(d);return i.fromJSON(t.common.common),i.fromString(t.local.common),i.fromString(e.attr("data-options")||""),y.browser.touchScreen&&y.browser.mobile&&(i.fromJSON(t.common.mobile),i.fromString(t.local.mobile),i.fromString(e.attr("data-mobile-options")||"")),i}(n._node,s),n.option=function(){return arguments.length>1?n.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):n.instanceOptions.get(arguments.length<=0?void 0:arguments[0])},n.type="video",n.player=null,n.state=i.VIDEO.NONE,n.isReady=!1,n.isShown=!1,n.id=null,n.playDebounce=null,n.currentTime=0,n.videoNode=y.$new("div"),n.videoWrapper=y.$new("div").addClass("smv-video").setCss({transition:"opacity .3 linear"}),n.videoWrapper.attr("data-video-type",n.type),n.fullscreen=n.option("controls.fullscreen"),n.hide(),n}e.inheritsLoose(s,t);var n=s.prototype;return n.onBeforeFullscreenIn=function(){this.getCurrentTime(),this.fullscreen=!1},n.onAfterFullscreenIn=function(){},n.onBeforeFullscreenOut=function(){this.getCurrentTime(),this.fullscreen=this.option("controls.fullscreen")},n.onAfterFullscreenOut=function(){},n.getSize=function(){var e=this;return new Promise((function(t){var i=e.videoWrapper.size;i.width&&i.height?t(i):o.videoModule.getAspectRatio(e._node).then((function(e){i.width?i.height=i.width*e:i.width=i.height/e,t(i)})).catch((function(){t(null)}))}))},n.createPlayer=function(e){var t=this;return this.player={ready:!0,play:function(){t.playDebounce()},pause:function(){t.player.player.node.pause()},player:this._node},this.playDebounce=o.debounce((function(){t.player.player.node.play()}),100),this.option("loop")?this.player.player.attr("loop","loop"):this.player.player.removeAttr("loop"),this.player.player.attr("playsinline","playsinline"),this.option("controls.enable")?this.player.player.attr("controls","controls"):this.player.player.removeAttr("controls"),this.autoplay?(this.player.player.volume=0,this.player.player.attr("muted","muted")):this.player.player.volume=this.option("volume")/100,this.player.player.attr("preload",this.option("preload")?"auto":"none"),this.addEvents(),this.emit("slideVideoReady",{data:{type:this.type,error:null}}),Promise.resolve()},n.init=function(){var e=this;if("video"===this.type){var t=this._node.attr("data-src");t&&this._node.attr("src",t),Array.from(this._node.node.children).forEach((function(e){(e=g(e))&&"source"===e.tagName&&(t=e.attr("data-src"))&&(e.attr("src",t),"gecko"===y.browser.engine&&e.node.parentNode.load())})),this.videoNode=this._node}this.id=this.type+"-"+o.generateUUID(),this.videoNode.attr("id",this.id),this.videoWrapper.append(this.videoNode);var i={type:this.type,error:null};o.videoModule.getAPI(this._node).then((function(t){e.createPlayer(t).then((function(){i.error=!1})).catch((function(e){i.error=!!e})).finally((function(){e.isReady=!0}))})).catch((function(t){i.error=!0,e.emit("slideVideoReady",{data:i})}))},n.addEvents=function(){var e=this;this.player.player.addEvent("play",(function(t){t.stop(),e.state=i.VIDEO.PLAY,e.emit("slideVideoPlay",{data:{type:e.type}})})),this.player.player.addEvent("pause",(function(t){t.stop(),e.state=i.VIDEO.PAUSE,e.emit("slideVideoPause",{data:{type:e.type}})})),this.player.player.addEvent("ended",(function(t){t.stop(),e.state=i.VIDEO.PAUSE,e.emit("slideVideoEnd",{data:{type:e.type}})}))},n.play=function(){this.player&&this.player.ready&&(this.setCurrentTime(),this.player.play())},n.pause=function(){this.player&&this.player.ready&&this.player.pause()},n.getCurrentTime=function(){this.player&&this.player.player&&(this.currentTime=this.player.player.currentTime)},n.setCurrentTime=function(){this.player&&this.player.ready&&(this.player.player.currentTime=this.currentTime)},n.show=function(){this.isShown=!0,this.videoWrapper.setCssProp("opacity",1)},n.hide=function(){this.isShown=!1,this.videoWrapper.setCssProp("opacity",0)},n.destroy=function(){this.playDebounce&&(this.playDebounce.cancel(),this.playDebounce=null),this.pause(),this.videoWrapper.remove(),this._node=R(this._node),"video"===this.type&&Array.from(this._node.node.children).forEach((function(e){"source"===g(e).tagName&&R(e)})),t.prototype.destroy.call(this)},e.createClass(s,[{key:"autoplay",get:function(){return this.option("autoplay")}},{key:"node",get:function(){return this.videoWrapper}},{key:"preStart",get:function(){return this.state===i.VIDEO.NONE}},{key:"paused",get:function(){return this.state===i.VIDEO.PAUSE}}]),s}(r),{HTMLVideo:U,YouTubeVideo:function(t){"use strict";function s(e,i){var s;return(s=t.call(this,e,i)||this).type="youtube",s.playerState=-1,s.videoWrapper.attr("data-video-type",s.type),s.apiPlayer=null,s}e.inheritsLoose(s,t);var n=s.prototype;return n.setCurrentTime=function(){this.player&&this.player.ready&&this.player.player.seekTo(this.currentTime)},n.getCurrentTime=function(){this.player&&this.player.player&&(this.player.player.getCurrentTime?this.currentTime=this.player.player.getCurrentTime():this.currentTime=0)},n.destroyVideoPlayer=function(){this.getCurrentTime(),this.player&&this.player.player&&(this.player.ready=!1,this.player.player.destroy()),this.playerState=-1},n.onBeforeFullscreenIn=function(){this.fullscreen=!1,this.destroyVideoPlayer()},n.onAfterFullscreenIn=function(){this.createPlayer(this.apiPlayer)},n.onBeforeFullscreenOut=function(){this.fullscreen=this.option("controls.fullscreen"),this.destroyVideoPlayer()},n.onAfterFullscreenOut=function(){this.createPlayer(this.apiPlayer)},n.createPlayer=function(e){var t=this;return this.apiPlayer=e,new Promise((function(i,s){var n=o.videoModule.getId(t._node);t.player={ready:!1,play:function(){t.player.player.playVideo()},pause:function(){t.player.player.pauseVideo()},player:new e.Player(t.id,{videoId:n,playerVars:{playlist:n,fs:t.fullscreen?1:0,rel:0,loop:t.option("loop")?1:0,autoplay:0,playsinline:1,controls:t.option("controls.enable")?1:0},events:{onReady:function(){t.playerState=-1,t.player.ready=!0,t.player.player.setVolume(t.option("volume")),t.emit("slideVideoReady",{data:{type:t.type,error:null}}),i()},onError:function(e){100===e.data&&(t.player=null),t.emit("slideVideoReady",{data:{type:t.type,error:!0}}),s(!0)},onStateChange:t.addEvents.bind(t)}})}}))},n.addEvents=function(e){var t=(e.target||e.target).getPlayerState();switch(this.playerState=t,this.state===i.VIDEO.PLAY&&(this.state=i.VIDEO.PAUSE),t){case-1:break;case 0:this.option("loop")||this.player.pause(),this.emit("slideVideoEnd",{data:{type:this.type}});break;case 1:this.state=i.VIDEO.PLAY,this.emit("slideVideoPlay",{data:{type:this.type}});break;case 2:this.state=i.VIDEO.PAUSE,this.emit("slideVideoPause",{data:{type:this.type}})}},n.destroy=function(){t.prototype.destroy.call(this),this.player&&this.player.player&&(this.player.player.destroy(),this.player.player=null)},s}(U),VimeoVideo:function(t){"use strict";function s(e,i){var s;return(s=t.call(this,e,i)||this).type="vimeo",s.apiPlayer=null,s.videoWrapper.attr("data-video-type",s.type),s}e.inheritsLoose(s,t);var n=s.prototype;return n.createPlayer=function(e){var t=this;return this.apiPlayer=e,new Promise((function(i,s){if(t.videoNode.attr("data-vimeo-id",o.videoModule.getId(t._node)),e.Player){var n=t.videoNode.attr("data-src");n&&t.videoNode.attr("src",n);var r={id:o.videoModule.getId(t._node),loop:t.option("loop"),controls:t.option("controls.enable"),speed:t.option("controls.speed")};t.player={ready:!1,play:function(){t.player.player.setVolume(0),t.player.player.play()},pause:function(){t.player.player.pause()},player:new e.Player(t.videoNode.node,r)},t.addEvents(i)}else s(!0)}))},n.destroyVideoPlayer=function(){this.player&&this.player.player&&(this.player.ready=!1,this.player.player.destroy())},n.play=function(){this.player&&this.player.ready&&(this.setCurrentTime(),this.player.play())},n.onBeforeFullscreenIn=function(){this.destroyVideoPlayer()},n.onAfterFullscreenIn=function(){this.createPlayer(this.apiPlayer)},n.onBeforeFullscreenOut=function(){this.destroyVideoPlayer()},n.onAfterFullscreenOut=function(){this.createPlayer(this.apiPlayer)},n.getCurrentTime=function(){},n.setCurrentTime=function(){this.player&&this.player.ready&&this.player.player.setCurrentTime(this.currentTime)},n.addEvents=function(e){var t=this;this.player.player.on("play",(function(){t.state=i.VIDEO.PLAY,t.emit("slideVideoPlay",{data:{type:t.type}})})),this.player.player.on("pause",(function(){t.state=i.VIDEO.PAUSE,t.emit("slideVideoPause",{data:{type:t.type}})})),this.player.player.on("ended",(function(){t.state=i.VIDEO.PAUSE,t.emit("slideVideoEnd",{data:{type:t.type}})})),this.player.player.on("loaded",(function(){})),this.player.player.on("timeupdate",(function(e){t.currentTime=e.seconds})),this.player.player?this.player.player.ready().then((function(){t.player.ready=!0,t.state===i.VIDEO.PLAY&&(t.state=i.VIDEO.PAUSE),t.player.player.setVolume(0),t.emit("slideVideoReady",{data:{type:t.type,error:null}}),e()})):this.emit("slideVideoReady",{data:{type:this.type,error:new Error("Player does not exist.")}})},n.destroy=function(){t.prototype.destroy.call(this),this.videoNode.remove(),this.videoNode=null,this.videoWrapper.remove(),this.videoWrapper=null,this.player&&this.player.player&&(this.player.player.destroy(),this.player.player=null),this._node=null},s}(U)}),J=(B="smv-can-zoom",V={top:0,left:0,width:"100%",height:"100%"},M=function(e,t){return new Promise((function(i){if(e=g(e),void 0===t&&(t=10),t>0){var s=e.size;s.width&&s.height?i(s):setTimeout((function(){M(e,t-=1).then(i)}),32)}else i(null)}))},W=function(e){var t={type:"node",data:null};if(o.videoModule.isVideo(e))t.type=o.videoModule.getType(e),t.type||(t.data=y.$new("div"));else{var i,s;if("img"===g(e).tagName)i=e;else try{i=e.getElementsByTagName("img")[0]}catch(e){}i&&(s=o.sliderLib.getSrc(g(i).attr("src"))||o.sliderLib.getSrc(g(i).attr("data-src"))),s?(t.type="img",t.data=s):(i=e.cloneNode?e.cloneNode(!0):y.$new("div"),t.data=i)}return t},H=function(e){var t=g(e.node.querySelector(C));return t||(t=e.tagName===C?e:null),t},function(t){"use strict";function s(n,o,r,a){var l;(l=t.call(this)||this).$J_UUID=y.$uuid(e.assertThisInitialized(l)),l.groups=(g(n).attr("data-group")||"").split(/\s*(?:,|$)\s*/);var d=J.parse(n);l.id=d.id,l._enabled=d.enabled,l.type=d.type,l.url=d.url,l.slideContent=g(n),l._index=o,l.isCustomAdded=a||!1,l._options={},l.options=r,l.instanceNode=y.$new("div").addClass("smv-slide").setCss({position:"absolute"}),l.instanceNode.setCss(V),l.contentWrapper=y.$new("div").addClass("smv-content"),l.contentWrapper.setCss(V),l.fullscreenOnlyNode=null,l.selector={UUID:l.$J_UUID,isCustom:!1,node:H(l.slideContent),isSirv:!1,isVideo:!1,selectorContent:null,size:{width:0,height:0},src:null,srcset:null,pinned:null,activated:!0,infoPromise:null,isStatic:!1},l.selector.isStatic=s.checkNonSirv(l.selector.node),l.selector.pinned=s.findPinnedSelectorSide(l.slideContent.node.querySelector(C)||l.slideContent.node),l.selector.isCustom=!!l.selector.node,l.thumbnailReferrerPolicy=l.getSelectorReferrerPolicy(),l.availableSlide=!0,l.isStartedFullInit=!1,l.fullscreenState=i.FULLSCREEN.CLOSED,l.isStarted=!1,l.sirvService=null,l.componentSize=null,l.inView=!1,l.isActive=!1,l.isReady=!1,l.video=null,l.isVideoPaused=!1,l.isVideoReady=!1,l.slideShownBy=i.SLIDE_SHOWN_BY.NONE,l.componentLoader=null,l.infoSize=null,l.sizePromise=null,l.isInDom=0,l.multiImages=[],l.lastOriginNode=null,l.dataThumbnailImage=l.getThumbnailImage(),l.dataThumbnailHtml=l.slideContent.attr("data-thumbnail-html"),l.dataHiddenSelector=l.slideContent.hasAttribute("data-hidden-selector"),l.swipeDisabled=l.slideContent.hasAttribute("data-swipe-disabled"),l.spinWasInited=!1,l.socialbuttons=null,l.getVideoThumbnailPromise=null,l.isPlaceholder=!1,l.customThumbnailImageClassPromise=null;var c=e.assertThisInitialized(l);return l._api={get index(){return c.index},get component(){return c.sirvService?i.SLIDE.NAMES[c.sirvService.type]:"unknown"},get groups(){return c.groups},get thumbnail(){var e,t;return null!=(e=null==(t=c.selector.node)?void 0:t.node)?e:null},isDisabled:function(){return!c.enabled},isActive:function(){return c.isActive},getSelector:function(){return this.thumbnail}},l.sendEventCloseFullscreenByClick=function(e){e.stop(),l.emit("goToFullscreenOut")},l.beforeParseSlide(),l.parseSlide(),l}e.inheritsLoose(s,t),s.findPinnedSelectorSide=function(e){if(e.hasAttribute("data-pinned")){var t=y.$(e).attr("data-pinned");return"start"!==t?"end":t}return null},s.parse=function(e){e=g(e);var t={};t.node=e.node,t.id=e.attr("data-id");var s=null,n=i.SLIDE.TYPES.HTML,r=!0;if(J.isSirvComponent(e)){var a=o.getSirvType(e);n=a.type,s=a.imgSrc}else o.videoModule.isVideo(e)?(n=i.SLIDE.TYPES.VIDEO,s=o.videoModule.getSrc(e)):("img"===e.tagName||"div"===e.tagName&&e.attr("data-src"))&&(n=i.SLIDE.TYPES.IMAGE,s=e.attr("data-src")||e.attr("src"));t.type=n,t.url=s;var l=e.node.getAttribute("data-disabled");return(l&&"false"!==l||""===l)&&(r=!1),t.enabled=r,t},s.checkNonSirv=function(e){return!(!e||"static"!==g(e).attr("data-type"))},s.isSirvComponent=function(e){var t=(e=g(e)).attr("data-src"),i=e.attr("src"),s=J.checkNonSirv(e),n=e.tagName,r=e.fetch("view-content");return!(s||!(r||"div"===n&&!["youtube","vimeo"].includes(o.videoModule.getType(t))&&t||"img"===n&&(t||i)))},s.hasComponent=function(e){return I.isExist(e)};var r=s.prototype;return r.isSwipeDisabled=function(){return this.swipeDisabled},r.getThumbnailImage=function(){var e=this.slideContent.attr("data-thumbnail-image");if(!e&&this.selector.isCustom&&!(e=this.selector.node.attr("data-src"))){var t=this.selector.node.node.children;1===t.length&&"img"===g(t[0]).tagName&&(e=g(t[0]).attr("data-src")||g(t[0]).attr("src"))}return e},r.startGettingInfo=function(){this.sirv&&this.sirvService.startGettingInfo()},r.loadContent=function(){var e=this;this.sirv&&this.getSlideSize().then((function(t){e.isInDom&&e.sirvService.loadContent()})).catch((function(e){}))},r.loadThumbnail=function(){var e=this;this.sirv&&this.getSlideSize().then((function(t){e.isInDom&&e.sirvService.loadThumbnail()})).catch((function(e){}))},r.belongsTo=function(e){var t=this,i=!1;return e&&("string"===y.typeOf(e)&&(e=[e]),i=e.some((function(e){return t.groups.includes(e)}))),i},r.addGroup=function(e){var t=!1;return e&&"string"===y.typeOf(e)&&!this.groups.includes(e)&&(t=!0,this.groups.push(e)),t},r.removeGroup=function(e){var t=!1;if(e&&"string"===y.typeOf(e)){var i=this.groups.indexOf(e);i>-1&&(t=!0,this.groups.splice(i,1))}return t},r.single=function(e){this.sirv&&this.broadcast("isSingleSlide",{data:{isSingle:e}})},r.checkReadiness=function(e,t){var s=!1;return this.sirv&&i.SLIDE.NAMES[this.sirvService.type]===t&&(s="init"===e?this.spinWasInited:this.isReady),s},r.sendReadyEvent=function(e,t){this.sirv&&i.SLIDE.NAMES[this.sirvService.type]===t&&this.sirvService.sendEvent(e)},r.createFullscreenOnlyScreen=function(){var e=this;this._options.fullscreenOnly&&(this.fullscreenOnlyNode=y.$new("div").addClass("smv-fullscreen-always"),this.fullscreenOnlyNode.addEvent(["btnclick","tap"],(function(t){t.stop(),e.emit("goToFullscreen")})),this.createPinchEvent(this.fullscreenOnlyNode),this.instanceNode.append(this.fullscreenOnlyNode,"top"))},r.createPinchEvent=function(e){var t=this;y.browser.touchScreen&&e.addEvent("pinch",(function(e){e.stop(),"pinchend"===e.state&&0===t.fullscreenState&&e.scale>=2&&t.emit("goToFullscreen")}))},r.disable=function(){this._enabled=!1,this.video&&this.video.pause(),this.componentLoader&&this.componentLoader.hide(!0)},r.enable=function(){this._enabled=!0},r.dragEvent=function(e){this.sirvService&&this.broadcast("dragEvent",{data:{type:e}})},r.startFullInit=function(e){this.isStartedFullInit||(this.isStartedFullInit=!0,e&&(this.options=e),this.sirvService&&this.sirvService.startFullInit(e?this._options:null),this.hide(),this.instanceNode.append(this.contentWrapper),this.sirv||this.appendToDOM())},r.createComponentLoader=function(){this.componentLoader||(this.componentLoader=new l(this.instanceNode),this.componentLoader.show())},r.setFullscreenEvents=function(){var e=this;this.on("beforeFullscreenIn",(function(t){e.fullscreenState===i.FULLSCREEN.OPENING?t.stopPropagation():(e.fullscreenState=i.FULLSCREEN.OPENING,e.video&&(e.isVideoPaused=e.video.paused,e.video.onBeforeFullscreenIn())),e.fullscreenOnlyNode&&e.fullscreenOnlyNode.setCssProp("display","none"),e.addEventCloseFullscreenByClick()})),this.on("afterFullscreenIn",(function(t){e.socialbuttons&&e.socialbuttons.closeButtons(),e.fullscreenState===i.FULLSCREEN.OPENED?t.stopPropagation():(e.fullscreenState=i.FULLSCREEN.OPENED,e.sirv&&e.componentLoader.isHiding()&&e.componentLoader.hide(!0),e.video&&(e.video.onAfterFullscreenIn(),!e.video.autoplay&&e.video.preStart||e.playVideo()))})),this.on("beforeFullscreenOut",(function(t){e.socialbuttons&&e.socialbuttons.closeButtons(),e.fullscreenState===i.FULLSCREEN.CLOSING?t.stopPropagation():(e.fullscreenState=i.FULLSCREEN.CLOSING,e.video&&(e.isVideoPaused=e.video.paused,e.video.onBeforeFullscreenOut())),e.fullscreenOnlyNode&&e.fullscreenOnlyNode.setCssProp("display","")})),this.on("afterFullscreenOut",(function(t){e.fullscreenState===i.FULLSCREEN.CLOSED?t.stopPropagation():(e.fullscreenState=i.FULLSCREEN.CLOSED,e.video&&(e.video.onAfterFullscreenOut(),!e.video.autoplay&&e.video.preStart||e.playVideo())),e.removeEventCloseFullscreeByClick()})),this.on("inView",(function(t){e.inView=t.data,e.video&&(e.inView?(!e.isVideoPaused&&!e.video.preStart||e.video.autoplay)&&e.playVideo():(e.isVideoPaused=e.video.paused,e.video.getCurrentTime(),e.video.pause()))}))},r.addEventCloseFullscreenByClick=function(){this._options.fullscreenOnly&&this.type===i.SLIDE.TYPES.IMAGE&&(this.contentWrapper.addEvent(["btnclick","tap"],this.sendEventCloseFullscreenByClick),this.slideContent.addEvent(["btnclick","tap"],this.sendEventCloseFullscreenByClick))},r.removeEventCloseFullscreeByClick=function(){this._options.fullscreenOnly&&this.type===i.SLIDE.TYPES.IMAGE&&(this.contentWrapper.removeEvent(["btnclick","tap"],this.sendEventCloseFullscreenByClick),this.slideContent.removeEvent(["btnclick","tap"],this.sendEventCloseFullscreenByClick))},r.zoomIn=function(e,t){this.broadcast("zoomUp",{data:{x:e,y:t}})},r.zoomOut=function(e,t){this.broadcast("zoomDown",{data:{x:e,y:t}})},r.mouseAction=function(e,t){this.sirv&&this.broadcast("mouseAction",{data:{type:e,originEvent:t}})},r.createSlideApi=function(){this.sirv&&!this.isStarted&&(this.isStarted=!0,this.api[i.SLIDE.NAMES[this.sirvService.type]]=this.sirvService.getData())},r.beforeShow=function(){this.isActive=!0,this.show(),this.sirv&&this.sirvService.activate(),this.createSlideApi()},r.afterShow=function(e){this.slideShownBy=e||i.SLIDE_SHOWN_BY.NONE,this.broadcast("startActions",{who:this.slideShownBy}),this.video&&this.video.autoplay&&this.playVideo()},r.beforeHide=function(){this.video?this.video.pause():this.broadcast("stopActions")},r.afterHide=function(){this.slideShownBy=i.SLIDE_SHOWN_BY.NONE,this.isActive=!1,this.hide(),this.sirv&&this.sirvService.deactivate(),this.socialbuttons&&this.socialbuttons.closeButtons()},r.show=function(){this.instanceNode.removeClass("smv-hidden"),this.instanceNode.addClass("smv-shown")},r.hide=function(){this.instanceNode.removeClass("smv-shown"),this.instanceNode.addClass("smv-hidden")},r.startTool=function(e,t,i){var s=this;this.sirv?this.getSlideSize().then((function(n){s.isInDom&&s.sirvService?(s.sirvService.startTool(e||s.isActive,t,i),s.addSocialButtons()):s.emit("contentLoaded",{data:{slide:{index:s._index}}})})).catch((function(e){})):this.getSlideSize().then((function(){s.emit("contentLoaded",{data:{slide:{index:s._index}}})}))},r.getSlideSize=function(){var e=this;return this.sizePromise||(this.sizePromise=new Promise((function(t,s){if(e.sirv){var n={UUID:e.$J_UUID};e.sirvService.getInfoSize().then((function(i){!e.infoSize&&i.size&&(e.infoSize=i.size),n.size=e.infoSize,t(n)})).catch((function(o){if(n.error=!0,e.sirvService){var r=e.sirvService.type;if(e.removeSirvService(),o&&o.error&&o.error.status&&404===o.error.status)n.error=o.error,s(n);else if(o&&("changeSpinToImage"===o.error||r===i.SLIDE.TYPES.IMAGE||o.isPlaceholder)){if(e.isPlaceholder=o.isPlaceholder,r===i.SLIDE.TYPES.IMAGE){e.isInDom=0,e.appendToDOM();var a=W(e.slideContent.node);e.selector.isCustom||(e.selector.src=a?a.data:null,e.selector.isSirv=!1)}else e.changeSpinToImage();var l=e.sizePromise;e.sizePromise=null;var d=e.getSlideSize();e.sizePromise=l,d.then(t).catch(s)}else n.error={status:404},s(n)}else n.error={status:404},s(n)})).finally((function(){e.isCustomAdded&&e.emit("infoReady",{data:{index:e._index}})}))}else{var r,a;if("img"===e.slideContent.tagName)r=e.slideContent.node;else try{r=e.slideContent.node.getElementsByTagName("img")[0]}catch(e){}r&&((a=o.sliderLib.getSrc(g(r).attr("src")))||(a=o.sliderLib.getSrc(g(r).attr("data-src")))),a?o.loadImage(a).then((function(i){e.infoSize=i.size,t({size:e.infoSize,UUID:e.$J_UUID})})).catch((function(i){t({size:e.infoSize,UUID:e.$J_UUID,error:{status:404}})})):e.video?e.video.getSize().then((function(i){e.infoSize=i||{width:0,height:0},t({size:e.infoSize,UUID:e.$J_UUID})})).catch((function(t){s({size:e.infoSize,UUID:e.$J_UUID,error:t})})):M(e.slideContent.node).then((function(i){e.infoSize=i||{width:0,height:0},t({size:e.infoSize,UUID:e.$J_UUID})})).catch((function(t){s({size:e.infoSize,UUID:e.$J_UUID,error:t})}))}}))),this.sizePromise},r.removeSirvService=function(){this.infoSize=null,this.slideContent&&this.slideContent.remove(),this.selector.node&&this.selector.node.removeAttr("data-type"),this.sirvService&&(this.sirvService.destroy(),this.sirvService=null),this.selector.isSirv=!1,this.off("stats"),this.off("componentEvent"),this.off("beforeFullscreenIn"),this.off("afterFullscreenIn"),this.off("beforeFullscreenOut"),this.off("afterFullscreenOut"),this.componentLoader&&(this.componentLoader.hide(!0),this.componentLoader.destroy(),this.componentLoader=null),this.fullscreenOnlyNode&&(this.fullscreenOnlyNode.kill(),this.fullscreenOnlyNode=null)},r.changeSpinToImage=function(){if(this.slideContent.removeClass("smv-component"),this.contentWrapper.removeClass("smv-content-"+i.SLIDE.NAMES[this.typeOfSlide]),this.lastOriginNode=this.slideContent,this.slideContent=y.$new("img",{"data-src":this.slideContent.attr("data-src")}),this.slideContent.addClass("smv-component"),this.parseSlide(),this.isInDom=0,this.appendToDOM(),this.isPlaceholder){var e=W(this.slideContent);this.selector.isCustom||(this.selector.src=e?e.data:null)}this.selector.node&&!this.selector.isCustom&&this.selector.node.attr("data-type",i.SLIDE.NAMES[this.typeOfSlide]),this.isStartedFullInit&&(this.isStartedFullInit=!1,this.startFullInit())},r.setSirvEvents=function(){var e=this;this.on("stats",(function(t){t.stopEmptyEvent(),t.data.index=e._index})),this.on("componentEvent",(function(t){t.stopEmptyEvent();var s=t.data.data;s.type=t.data.type,s.node=e.slideContent,"ready"===t.data.type&&(e.isReady=!0),t.data.slide=e.api,t.data.componentEventData=s,t.data.component===i.SLIDE.NAMES[i.SLIDE.TYPES.SPIN]?"init"===t.data.type&&(e.componentLoader.hide(),e.spinWasInited=!0,e.selector.node&&e.selector.node.addClass({row:"spin-x",col:"spin-y","multi-row":"spin-xy"}[e.sirvService.getSpinOrientation()]||"")):"ready"===t.data.type&&e.componentLoader.hide(),"ready"===t.data.type&&["spin","zoom"].includes(t.data.component)&&e.sirvService.isZoomSizeExist()&&e.contentWrapper.addClass(B)}))},r.addSocialButtons=function(){var e=this;if(this.validateComponentSocialButton()){var t=["facebook","twitter","linkedin","reddit","tumblr","pinterest","telegram"],i={};t.forEach((function(t){i[t]=e._options["sb"+y.camelize("-"+t)]}));var s=SocialButtons.getDataImage(),n={};t.forEach((function(t){n[t]=e.getLinkSocialButton(s[t],i[t])})),this.socialbuttons=new SocialButtons({text:this.slideContent.attr("alt"),link:n,title:this.slideContent.attr("title")},i,this.instanceNode)}},r.validateComponentSocialButton=function(){return!(!this._options.sbEnable||!SocialButtons||this.socialbuttons||!(this.sirv&&this.sirvService.type!==i.SLIDE.TYPES.VIDEO||this.video&&"video"!==this.video.type||"img"===this.slideContent.tagName))},r.getLinkSocialButton=function(e,t,s){var n=null;return s&&(n=this.sirv?this.sirvService.getSocialButtonData(e,this.api.component===i.SLIDE.NAMES[i.SLIDE.TYPES.SPIN]):"iframe"===this.slideContent.tagName?this.video.node.attr("data-src"):this.slideContent.attr("data-src")),n},r.searchImagesInHtmlContent=function(){var e=this,t=!1,i=Array.from(this.slideContent.node.querySelectorAll("img"));return i.length&&(t=!0,this.multiImages=i,i.forEach((function(t,i){var s=!J.checkNonSirv(t);s&&(e.sirvService?e.sirvService.push(t):(e.setSirvEvents(),e.selector.isSirv=!0,e.sirvService=new I(t,e._options,{quality:e._options.quality,hdQuality:e._options.hdQuality,isHDQualitySet:e._options.isHDQualitySet,always:e._options.fullscreenOnly,isFullscreen:e._options.isFullscreen,nativeFullscreen:e._options.nativeFullscreen}),e.sirvService.parentClass=e,e.sirvService.start(),e.createSlideApi())),e.multiImages.push({isSirv:s,node:t,src:g(t).attr("src"),datasrc:g(t).attr("data-src")})}))),t},r.isCustomSlideEmpty=function(){if(this.customSelector){var e=this.slideContent.node.querySelector(C);if(e){y.$(e).remove();var t=Array.from(this.slideContent.node.children).length;if(this.slideContent.append(e),J.isSirvComponent(this.slideContent)&&J.hasComponent(this.slideContent)&&!this.isPlaceholder||t||o.videoModule.isVideo(this.slideContent))return!1}}return!0},r.beforeParseSlide=function(){this.customSelector&&(this.isCustomSlideEmpty()&&(this.availableSlide=!1,this.selector.activated=!1),this.selector.node.remove())},r.createImgFromDiv=function(){if("div"===this.slideContent.tagName&&this.type===i.SLIDE.TYPES.IMAGE){var e=this.slideContent;this.slideContent=y.$new("img"),this.slideContent.attr("data-src",this.url);var t=e.attr("alt");t&&this.slideContent.attr("alt",t),(t=e.attr("title"))&&this.slideContent.attr("title",t),(t=e.attr("data-alt"))&&this.slideContent.attr("data-alt",t),(t=e.attr("data-referrerpolicy"))&&this.slideContent.attr("data-referrerpolicy",t)}},r.parseSlide=function(){J.isSirvComponent(this.slideContent)&&J.hasComponent(this.slideContent)&&!this.isPlaceholder?(this.setSirvEvents(),this.createImgFromDiv(),this.sirvService=new I(this.slideContent.node,this._options,{quality:this._options.quality,hdQuality:this._options.hdQuality,isHDQualitySet:this._options.isHDQualitySet,always:this._options.fullscreenOnly,isFullscreen:this._options.isFullscreen,nativeFullscreen:this._options.nativeFullscreen}),this.sirvService.parentClass=this,this.selector.isSirv=!0,this.sirvService.start(),this.createSlideApi(),this.selector.isVideo=this.sirvService.type===i.SLIDE.TYPES.VIDEO,this.contentWrapper.addClass("smv-content-"+i.SLIDE.NAMES[this.typeOfSlide])):(this.createImgFromDiv(),this.searchImagesInHtmlContent(),o.videoModule.isVideo(this.slideContent)&&(this.selector.isVideo=!0,this.initVideo(),this.contentWrapper.addClass("smv-content-video"))),(this.dataThumbnailImage||this.dataThumbnailHtml)&&(this.selector.isSirv=!1)},r.appendToDOM=function(){this.isInDom||(this.isInDom=1,this.createFullscreenOnlyScreen(),this.sirv||this.video?(this.createComponentLoader(),this.video?this.contentWrapper.append(this.video.node):this.contentWrapper.append(this.slideContent)):("img"===this.slideContent.tagName&&(this.contentWrapper.addClass("smv-slide-img"),o.sliderLib.getSrc(this.slideContent.attr("src"))||this.slideContent.attr("src",this.slideContent.attr("data-src"))),this.multiImages.length&&this.multiImages.forEach((function(e){!e.src&&e.datasrc&&g(e.node).attr("src",e.datasrc)})),this.contentWrapper.append(this.slideContent)),this.setFullscreenEvents())},r.initVideoPlayer=function(){this.video?this.video.init():this.sirv&&this.sirvService.type===i.SLIDE.TYPES.VIDEO&&this.sirvService.loadVideoSources()},r.secondSelectorClick=function(){this.sirv?this.broadcast("secondSelectorClick",{data:{slideIndex:this._index}}):this.video&&this.video.pause()},r.isSirvSelector=function(){return!this.selector.isCustom&&this.sirv&&this.sirvService.type!==i.SLIDE.TYPES.VIDEO},r.getSelectorProportion=function(){var e=this;return this.dataThumbnailImage?new Promise((function(t,i){e.getResponsiveImage().then((function(){return t(Object.assign({},e.selector))})).catch((function(s){o.loadImage(e.dataThumbnailImage).then((function(i){e.selector.size=i.size,t(Object.assign({},e.selector))})).catch((function(e){i(e)}))}))})):this.video?this.getNonSirvVideoThumbnail():this.getSlideSize()},r.getSelectorReferrerPolicy=function(){var e="no-referrer-when-downgrade";if(this.selector.isCustom){if(this.selector.node.hasAttribute("data-referrerpolicy"))return this.selector.node.attr("data-referrerpolicy");var t=Array.from(this.selector.node.node.children).filter((function(e){return"img"===g(e).tagName}));if(1===t.length)return g(t[0]).attr("referrerpolicy")||e}return this.slideContent.attr("data-referrerpolicy")||this.slideContent.attr("referrerpolicy")||e},r.getResponsiveImage=function(){var e=this;return this.customThumbnailImageClassPromise||(this.customThumbnailImageClassPromise=new Promise((function(t,i){var s=new n(e.dataThumbnailImage);s.loadInfo().then((function(i){e.selector.isSirv=!0,e.selector.size=s.originSize,t(s)})).catch(i)}))),this.customThumbnailImageClassPromise},r.getSirvThumbnailForCustomSelector=function(e){var t=this;return new Promise((function(i,s){t.getResponsiveImage().then((function(s){var n=s.getThumbnail(e);n.referrerpolicy=t.thumbnailReferrerPolicy,i(n)})).catch(s)}))},r.getSelectorImgUrl=function(e,t,i,s){var n=this,o={crop:i,watermark:s};t.width&&(o.width=t.width),t.height&&(o.height=t.height);var r=function(e){e.src&&(n.selector.src=e.src),e.srcset&&(n.selector.srcset=e.srcset);var t=Object.assign({},e);return t=Object.assign(t,n.selector)};return new Promise((function(e,t){var i=function(){n.selector.isCustom&&n.dataThumbnailImage?n.selector.isStatic?e(Object.assign({},n.selector)):n.getSirvThumbnailForCustomSelector(o).then((function(t){return e(r(t))})).catch((function(){return e(Object.assign({},n.selector))})):"img"===n.slideContent.tagName||n.multiImages.length?e(Object.assign({},n.selector)):n.video&&n.getNonSirvVideoThumbnail().then(e).catch(t)};n.sirv?n.sirvService.getInfoSize().then((function(i){n.selector.isCustom?n.selector.isStatic?e(Object.assign({},n.selector)):n.getSirvThumbnailForCustomSelector(o).then((function(t){return e(r(t))})).catch((function(){return e(Object.assign({},n.selector))})):n.sirvService.getSelectorImgUrl(o).then((function(t){t.referrerpolicy=n.thumbnailReferrerPolicy,e(r(t))})).catch(t)})).catch((function(){n.selector.isCustom?i():t()})):i()}))},r.getNonSirvVideoThumbnail=function(){var e=this;return this.getVideoThumbnailPromise||(this.getVideoThumbnailPromise=new Promise((function(t,i){o.videoModule.getImageSrc(e.slideContent,!0).then((function(i){e.selector.isCustom||(e.selector.src=i.thumbnail.url,e.selector.size={width:i.thumbnail.width,height:i.thumbnail.height}),t(Object.assign({},e.selector))})).catch((function(t){t&&!0!==t?t.UUID=e.$J_UUID:t={UUID:e.$J_UUID},i(t)}))}))),this.getVideoThumbnailPromise},r.playVideo=function(){this.isActive&&this.inView&&this.video&&(this.fullscreenState===i.FULLSCREEN.OPENED||[i.SLIDE_SHOWN_BY.AUTOPLAY,i.SLIDE_SHOWN_BY.USER,i.SLIDE_SHOWN_BY.INIT].includes(this.slideShownBy))&&this.video.play()},r.initVideo=function(){var e=this;this.on("slideVideoReady",(function(t){t.stop(),e.isVideoReady||(e.isVideoReady=!0,e.isReady=!0,e.video.show(),e.componentLoader.hide()),!e.video.autoplay&&e.video.preStart||e.playVideo()})),this.on("slideVideoPlay",(function(t){t.data.slide=e.api,e.isVideoPaused&&!e.video.autoplay&&e.video.pause(),e.isVideoPaused=!1})),this.on("slideVideoPause",(function(t){t.data.slide=e.api})),this.on("slideVideoEnd",(function(t){t.data.slide=e.api}));var t=this._options.video;switch(o.videoModule.getType(this.slideContent)){case"youtube":this.video=new Z.YouTubeVideo(this.slideContent,t);break;case"vimeo":this.video=new Z.VimeoVideo(this.slideContent,t);break;case"video":this.video=new Z.HTMLVideo(this.slideContent,t)}this.video.parentClass=this},r.resize=function(){if(this._enabled&&this.sirvService){this.sirvService.resize();var e=i.SLIDE.TYPES;this.isReady&&[e.SPIN,e.ZOOM].includes(this.typeOfSlide)&&(this.sirvService.isZoomSizeExist()?this.contentWrapper.addClass(B):this.contentWrapper.removeClass(B))}},r.destroy=function(){this.sirvService?(this.sirvService.destroy(),this.sirvService=null,this.off("stats"),this.off("componentEvent")):this.multiImages.length&&this.multiImages.forEach((function(e){!e.src&&e.datasrc&&e.node.removeAttribute("src")})),this.slideContent.del("view-content"),this.removeEventCloseFullscreeByClick(),this.sendEventCloseFullscreenByClick=null,this.lastOriginNode&&(this.slideContent.remove(),this.slideContent=this.lastOriginNode,this.lastOriginNode=null),this.fullscreenOnlyNode&&(this.fullscreenOnlyNode.kill(),this.fullscreenOnlyNode=null),this.off("beforeFullscreenIn"),this.off("afterFullscreenIn"),this.off("beforeFullscreenOut"),this.off("afterFullscreenOut"),this.off("inView"),this.video&&(this.off("slideVideoReady"),this.off("slideVideoPlay"),this.off("slideVideoPause"),this.off("slideVideoEnd"),this.video.destroy()),this.video=null,this.componentLoader&&(this.componentLoader.destroy(),this.componentLoader=null),this.socialbuttons&&this.socialbuttons.destroy(),this.sizePromise=null,this.componentSize=null,this.contentWrapper.remove(),this.contentWrapper=null,this.instanceNode.remove(),this.instanceNode=null,this.slideContent=null,this.isReady=!1,this.availableSlide=null,t.prototype.destroy.call(this)},e.createClass(s,[{key:"videoSlide",get:function(){var e=!1;return this.sirv?e=this.sirvService.type===i.SLIDE.TYPES.VIDEO:this.video&&(e=!0),e}},{key:"customSelector",get:function(){return this.selector.isCustom}},{key:"newIndex",set:function(e){this._index=e}},{key:"index",get:function(){return this._index}},{key:"enabled",get:function(){return this._enabled}},{key:"blokedTouchdrag",get:function(){var e=!1;return this.sirv&&(e=this.sirvService.type===i.SLIDE.TYPES.SPIN||this.sirvService.isEffectActive()),e}},{key:"options",set:function(e){this._options=Object.assign({spin:{},zoom:{},image:{},video:{},fullscreenOnly:!1},e||{})},get:function(){return this.sirv?this.sirvService.getToolOptions():{}}},{key:"slideAvailable",get:function(){return this.availableSlide}},{key:"selectorPinned",get:function(){return["start","end"].includes(this.selector.pinned)}},{key:"pinnedSelectorSide",get:function(){return this.selector.pinned}},{key:"sirv",get:function(){return!!this.sirvService}},{key:"node",get:function(){return this.instanceNode}},{key:"originNode",get:function(){return this.lastOriginNode||this.slideContent}},{key:"originImageUrl",get:function(){return this.sirv?this.sirvService.originImageUrl:null}},{key:"zoomData",get:function(){return this.sirv?this.sirvService.getZoomData():null}},{key:"typeOfSlide",get:function(){var e=null;return this.sirv&&(e=this.sirvService.type),e}},{key:"zoomSizeExist",get:function(){return!!this.sirv&&this.sirvService.isZoomSizeExist()}},{key:"api",get:function(){return this._api}},{key:"spinInited",get:function(){return this.spinWasInited}},{key:"slideReady",get:function(){return this.isReady}},{key:"selectorData",get:function(){var e=this;if(this.dataHiddenSelector)return null;if(this.selector.node||(this.selector.node=y.$new(C),this.selector.node.addClass("smv-selector")),this.dataThumbnailImage){var t=this.typeOfSlide;null!==t&&this.selector.node.attr("data-type",i.SLIDE.NAMES[t]),this.selector.src=this.dataThumbnailImage,this.selector.isStatic||(this.selector.infoPromise=new Promise((function(t){e.getResponsiveImage().catch((function(e){})).finally((function(){t(e.selector.isSirv,e.selector.size)}))})))}else if(this.dataThumbnailHtml){var s=y.$new("div");s.node.innerHTML=this.dataThumbnailHtml,this.selector.selectorContent=s.node.firstChild,this.selector.node.attr("data-type","html")}else if(this.selector.isCustom)this.selector.node.attr("data-type","html"),this.selector.selectorContent=this.selector.node;else if(this.sirv){var n=this.typeOfSlide;this.selector.node.attr("data-type",i.SLIDE.NAMES[n]),n===i.SLIDE.TYPES.SPIN&&this.sirvService.isThumbnailGif()&&this.selector.node.addClass("spin-thumbnail-gif")}else{var o=W(this.slideContent.node);["youtube","vimeo","video"].includes(o.type)?this.selector.node.attr("data-type",o.type):"img"===o.type?this.selector.src=o.data:(this.selector.selectorContent=o.data,this.selector.node.attr("data-type","html"))}return this.selector.isCustom&&this.selector.node.addClass("smv-custom-thumbnail"),this.selector.disabled=!this._enabled,this.selector}},{key:"UUID",get:function(){return this.$J_UUID}},{key:"slideActive",get:function(){return this.isActive}}]),s}(r)),Q=null,X=null,K=function(){var t=y.camelize("-fullscreen"),n="smv-button-fullscreen-open",l="smv-button-fullscreen-close",d="smv-button-hidden",c="smv-pseudo-fullscreen",h={width:"100%",height:"100%"},p=function(r){"use strict";function p(t,n){var a;(a=r.call(this)||this).instanceNode=g(t),a.instanceOptions=n.options,a.viewerFileContent=n.viewerFileContent,a.option=function(){return arguments.length>1?a.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):a.instanceOptions.get(arguments.length<=0?void 0:arguments[0])},a.slideOptions=Object.assign(n.slideOptions,{quality:a.instanceOptions.isset("quality")?a.option("quality"):null,hdQuality:a.option("hdQuality"),isHDQualitySet:a.instanceOptions.isset("hdQuality"),fullscreenOnly:a.option("fullscreen.always"),isFullscreen:a.option("fullscreen.enable"),nativeFullscreen:a.option("fullscreen.native"),sbEnable:a.option("slide.socialbuttons.enable"),sbFacebook:a.option("slide.socialbuttons.types.facebook"),sbTwitter:a.option("slide.socialbuttons.types.twitter"),sbLinkedin:a.option("slide.socialbuttons.types.linkedin"),sbReddit:a.option("slide.socialbuttons.types.reddit"),sbTumblr:a.option("slide.socialbuttons.types.tumblr"),sbPinterest:a.option("slide.socialbuttons.types.pinterest"),sbTelegram:a.option("slide.socialbuttons.types.telegram")}),a.id=a.instanceNode.attr("id"),a.id||(a.id="smv-"+o.generateUUID(),a.instanceNode.attr("id",a.id)),a.lazyInit=n.lazyInit,a.movingContainer=y.$new("div").addClass(b),a.slideWrapper=y.$new("div").addClass("smv-slides-box"),a.slidesContainer=y.$new("div").addClass("smv-slides"),a.selectorsWrapper=y.$new("div").addClass("smv-selectors-box"),a.fullScreenBox=y.$new("div").addClass("smv-fullscreen-box"),a.controlsWrapper=y.$new("div").addClass("smv-controls"),a.producDetailsText=a.instanceNode.attr("data-product-detail"),a.productDetail=null,a.fullScreenBox.addEvent(["mousescroll","touchstart"],(function(e){e.stopDistribution()})),a.isReady=!1,a.isMoving=!1,a.isSelectorsReady=!1,a.isToolStarted=!1,a.isInitialized=!1,a.isStartedFullInit=!1,a.inViewModule=null,a.isInView=!1,a.firstSlideAhead=!1,a.rootMargin=0,a.fullscreenButton=null,a.doSetSize=!1,a.heightProportion=null,a.slides=[],a.enabledIndexesOfSlides=[],a.selectors=null,a.arrows=null,a.contextMenu=null,a.countOfSizes=g([]),a.isFullscreen=i.FULLSCREEN.CLOSED,a.fullscreenStartTime=null,a.index=0,a.movingContainerId="smv-"+o.generateUUID(),a.cssRulesId="sirv_css_rules-"+o.generateUUID(),a.isComponentPinching=!1,a.isZoomIn=!1,a.hasSize=!1,a.isPseudo=!1,a.doHistory=!0,a.isAutoplay=a.option("slide.autoplay"),a.autoplayDelay=a.option("slide.delay"),a.residualAutoplayTime=a.autoplayDelay,a.sliderNodes=[],a.destroyed=!1,a.autoplayTimer=null,a.timerRemove=null,a.onResizeDebounce=o.debounce((function(){a.onResizeWithoutSelectors()}),16),a.selectorsDebounce=null,a.doHistory&&(a.fullscreenViewId=Math.floor(Math.random()*+new Date),i.FULLSCREEN_VIEWERS_IDs_ARRAY.push(a.fullscreenViewId)),a.controlsWrapperWasAppended=!1,a.isStandardGrid=!1,a.isFullscreenGrid=!1,a.clearingTouchdragFunction=null,a.classes={standard:{movingContainerClasses:g([]),selectorsWrapperClasses:g([])},fullscreen:{movingContainerClasses:g([]),selectorsWrapperClasses:g([])}},a.externalContainer=null,y.browser.mobile&&a.movingContainer.addClass("smv-mobile"),a.onResizeHandler=a.onResize.bind(e.assertThisInitialized(a)),a.pseudoFSEvent=function(e){27===e.oe.keyCode&&(g(y.D).removeEvent("keydown",a.pseudoFSEvent),a.exitFullScreen())},a.keyBoardArrowsCallback=function(e){var t,i=e.oe.keyCode;a.isReady&&[37,39].includes(i)&&(e.stop(),t=37===i?"prev":"next",a.jump(t,2))},a.onHistoryStateChange=function(e){try{e.oe.state&&"Sirv.viewer"===e.oe.state.name?(i.FULLSCREEN_VIEWERS_IDs_ARRAY.indexOf(e.oe.state.hash)<0&&(i.FULLSCREEN_VIEWERS_IDs_ARRAY.splice(i.FULLSCREEN_VIEWERS_IDs_ARRAY.indexOf(a.fullscreenViewId),1),a.fullscreenViewId=e.oe.state.hash,i.FULLSCREEN_VIEWERS_IDs_ARRAY.push(a.fullscreenViewId)),e.oe.state.hash===a.fullscreenViewId&&a.enterFullScreen()):a.isFullscreenState()&&a.exitFullScreen()}catch(e){}};var l=a.getSlides();return a.addComponentsCSS=o.debounce((function(){s.rootDOM.addCSSStringToHtml()}),100),s.rootDOM.addCSSStringToHtml(),s.rootDOM.addCSSString(a.instanceNode.node),a.setComponentsEvents(),a.createSlides(l),(y.browser.ready||"loading"!==y.D.node.readyState)&&a.startFullInit(),u&&a.option("productdetail.enable")&&a.producDetailsText&&a.createProductDetails(),a}e.inheritsLoose(p,r);var f=p.prototype;return f.isFullscreenState=function(){return[i.FULLSCREEN.OPENING,i.FULLSCREEN.OPENED].includes(this.isFullscreen)},f.createProductDetails=function(){this.productDetail=new u({text:this.producDetailsText,position:this.option("productdetail.position")},this.movingContainer,this.fullScreenBox)},f.setRootMargin=function(){var e=parseInt(this.option("threshold"),10);"string"===y.typeOf(this.option("threshold"))&&(e=(y.W.node.innerHeight||y.D.node.documentElement.clientHeight)/100*e);this.rootMargin=e},f.startFullInit=function(e){var t=this;if(!this.isStartedFullInit&&this.slides.length&&(this.isStartedFullInit=!0,!this.isHiddenSlides())){e&&(this.instanceOptions=e.options,this.option=function(){return arguments.length>1?t.instanceOptions.set(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):t.instanceOptions.get(arguments.length<=0?void 0:arguments[0])},this.slideOptions=Object.assign(e.slideOptions,{fullscreenOnly:this.option("fullscreen.always"),autoplay:this.option("video.autoplay")}),this.lazyInit=e.lazyInit,this.isAutoplay=this.option("slide.autoplay"),this.autoplayDelay=this.option("slide.delay"),this.residualAutoplayTime=this.autoplayDelay),this.option("fullscreen.always")&&this.movingContainer.addClass("smv-fullsreen-always"),null===Q&&(Q=y.browser.mobile&&window.matchMedia&&window.matchMedia("(max-device-width: 767px), (max-device-height: 767px)").matches),Q&&"ios"===y.browser.platform&&(X=y.$new("div").setCss({position:"fixed",top:0,width:0,height:"100vh"})),this.normalizeOptions(),this.setRootMargin(),this.slideWrapper.addClass("smv-"+("horizontal"===this.option("orientation")?"h":"v")),this.index=this.option("slide.first");var i=this.slides.length;if(this.index>i-1&&(this.index=0),i>0&&(!this.slides[this.index].enabled||!this.slides[this.index].slideAvailable)){for(var s=null,n=0;n<i;n++){var r=o.sliderLib.findIndex("next",this.index+n,i,!0);if(this.slides[r].enabled&&this.slides[r].slideAvailable){s=r;break}}if(null===s)return console.warn("Sirv Media Viewer: All items are disabled.",this.instanceNode.node),void this.emit("destroy",{data:{id:this.id,node:this.instanceNode.node}});this.index=s}this.createContextMenu(),this.setInViewAction(),this.option("thumbnails.enable")&&this.option("thumbnails.target")&&(this.externalContainer=g(y.D.node.querySelector(this.option("thumbnails.target"))),this.externalContainer||(this.externalContainer=null));var a=y.D.node.createDocumentFragment();a.appendChild(this.movingContainer.node),this.movingContainer.setCss(h),this.movingContainer.setCssProp("font-size",0),this.movingContainer.append(this.slideWrapper),this.slides.forEach((function(i){i.startFullInit(e?t.slideOptions:null)})),this.appendSelectors(!0),this.createClasses(),this.setClasses(),this.instanceNode.append(a),this.instanceNode.setCssProp("font-size",0),this.slideWrapper.append(this.slidesContainer),this.slidesContainer.setCss(h),this.instanceNode.render(),this.movingContainer.render(),this.selectorsWrapper.render(),this.slideWrapper.render();var l=this.instanceNode.size.height>0;this.createSelectors(),this.selectors&&this.isStandardGrid&&this.selectorsWrapper.setCss({flexBasis:this.option("thumbnails.size")+"px"});var d=10,c=function(){if(!t.destroyed){var e=t.slidesContainer.node.getBoundingClientRect();e.height||(e=t.slideWrapper.node.getBoundingClientRect()),(d-=1)>0&&(!e.width&&!e.height||l&&!e.height)?setTimeout(c,16):(t.instanceNode.setCssProp("font-size",""),e.width&&e.height||(t.doSetSize=!0),t.slides.forEach((function(e){e.slideAvailable&&t.slidesContainer.append(e.node),e.appendToDOM(),e.initVideoPlayer()})),t.setClasses(),t.searchingOfProportions(),t.selectors&&t.selectors.init(),t.postInitialization())}};this.firstSlideAhead&&this.broadcast("inView",{data:this.isInView}),setTimeout(c,16)}},f.visibleSlides=function(){return this.slides.filter((function(e){return e.slideAvailable&&e.enabled})).length},f.searchingOfProportions=function(){var e=this,t=this.slides.length,s=function(){var t=e.index,s=!e.firstSlideAhead&&e.option("slide.preload");e.hasSize=e.setContainerSize(),e.inViewModule&&["edge","ie"].includes(y.browser.uaName)&&e.inViewModule.takeRecords(),e.slides.forEach((function(i,n){i.startTool(t===n,s,e.firstSlideAhead)})),e.createEffect(),e.isToolStarted=!0,e.checkSingleSlide(),e.slides[e.index].beforeShow(),e.slides[e.index].afterShow(i.SLIDE_SHOWN_BY.INIT),e.postInitialization()},n=function(i,s){return new Promise((function(r,a){var l=e.slides[i],d=e.slides.length;if(s.push(i),l){var c=function(){var a=o.getArrayIndex(i+1,t);if(d!==e.slides.length&&a>i&&(a=i),s.includes(a)){var l=e.slidesContainer.size;l.width||(l.width=500),l.height||(l.height=.5625*l.width),e.heightProportion=l,r()}else n(a,s).then(r)};l.getSlideSize().then((function(t){var i=t.size;i&&i.width&&i.height?(e.heightProportion=i,r()):c()})).catch((function(t){var i=e.slides.length;t&&t.error&&404===t.error.status&&(i-=1,e.pickOut(t.UUID)),i>0?c():a()}))}}))};this.doSetSize?n(this.index,[]).then((function(){s()})).catch((function(){})):s()},f.initTouchDrag=function(){var e,t,s,n,o=this,r=["x","left","width"],a="y",l=!1,d=null,c=null,h=null,u=this.option("loop"),p=null,f=null,v=!0,m=!0,S=null,g=null,b=0,C={x:null,y:null},E=!1,I=function(e){return e/n*100},w=function(e,t){e&&e.node.setCssProp("transform",function(e){var t={x:0,y:0};return t[r[0]]=e,"translate3d("+t.x+"%, "+t.y+"%, 0px)"}(t))},x=function(){if(l){var e={transform:"",transition:""};c.node.removeEvent("transitionend"),S&&(m?(o.checkLoop(o.index),S.afterShow(i.SLIDE_SHOWN_BY.USER),c.afterHide(),o.sendEvent("afterSlideIn",{slide:S.api}),o.sendEvent("afterSlideOut",{slide:c.api})):S&&S.afterHide(),S&&S.node.setCss(e)),c.node.setCss(e),v=!0,m=!0,S=null,g=null,o.enableFullscreenButton(),o.autoplay(),l=!1,o.isMoving=!1,p=null,f=null,d=null,c=null,h=null,E=!1}},O=function(e,t){var i=null,s=t;s===y.U&&(s=o.index);var n=o.getNextIndex(e,s,o.slides.length,u);if(null!==n){var r=o.slides[n];r.index!==o.index&&(i=r.enabled?r:O(e,r.index))}return i},P=function(i){var n,o,a;l&&!E&&(l=!0,i.stop(),(o=i[r[0]]-e)<f?n="prev":o>f?n="next":n||(n=s>0?"next":"prev"),p=n,s=I(f=o)-t,!h&&s<-10&&(s=-10),!d&&s>10&&(s=10),w(d,(a=s)-100),w(c,a),w(h,a+100))},z=function(e){var t;l&&!E&&(1===b&&e.stop(),c.dragEvent(e.state),E=!0,(t=p,new Promise((function(e,i){var n,r=100,a=0,l=Math.abs(s);(l<25||2===b||"next"===t&&s<0||"prev"===t&&s>0)&&(m=!1),m||(t=s<0?"prev":"next"),S="next"===t?d:h,"next"!==t&&(r*=-1),(g="next"===t?h:d)&&(g.node.setCssProp("transform",""),g.afterHide()),m?(c.beforeHide(),o.sendEvent("beforeSlideIn",{slide:S.api}),o.sendEvent("beforeSlideOut",{slide:c.api}),o.index=S.index):(n=r,r=a,a=n,a*=-1,l<2&&(v=!1)),v&&(c.node.addEvent("transitionend",(function(t){t.stop(),e()})),S&&S.node.setCssProp("transition","transform, .3s"),c.node.setCssProp("transition","transform, .3s"),S&&S.node.size,c.node.size,o.selectors&&(o.selectors.activateItem(o.index),o.selectors.jump(o.index))),S&&w(S,a),w(c,r),v||e()}))).finally((function(){E=!1,x()})))};"vertical"===this.option("orientation")&&(r=["y","top","height"],a="x"),this.clearingTouchdragFunction=x,this.slidesContainer.addEvent("touchdrag",(function(u){o.isComponentPinching||o.isZoomIn||o.slides[o.index].blokedTouchdrag||o.option("fullscreen.always")&&o.isFullscreen!==i.FULLSCREEN.OPENED||("dragstart"===u.state?(C={x:u.x,y:u.y},function(i){E||(x(),o.effect.stop(),null!==o.index&&((c=o.slides[o.index]).isSwipeDisabled()||(l=!0,o.isMoving=!0,e=o.slidesContainer.position[r[1]],n=o.slidesContainer.size[r[2]],f=i[r[0]]-e,t=I(f),s=t,d=O("prev"),h=O("next"),d&&h&&(d.index===h.index?d.index<c.index?h=null:d=null:d.index!==c.index&&c.index!==h.index||(d.index===c.index?d=null:h=null)),d&&(w(d,-100),d.beforeShow()),h&&(w(h,100),h.beforeShow()),o.disableFullscreenButton())))}(u),c.dragEvent(u.state)):"dragmove"===u.state?(b||(b=Math.abs(C[r[0]]-u[r[0]])>Math.abs(C[a]-u[a])?1:2),1===b&&P(u),C={x:u.x,y:u.y}):"dragend"===u.state&&(z(u),b=0,C={x:null,y:null}))}))},f.appendSelectors=function(e){var t=this.movingContainer;this.externalContainer&&(this.isFullscreenState()?this.selectorsWrapper.removeClass("smv-external"):(t=this.externalContainer,this.selectorsWrapper.addClass("smv-external"))),(e||this.externalContainer)&&t.append(this.selectorsWrapper)},f.createClasses=function(){var e=this,t=this.option;["standard","fullscreen"].forEach((function(i){var s,n,o="standard"===i,r=t(o?"thumbnails.enable":"fullscreen.thumbnails.enable"),a=t(o?"thumbnails.position":"fullscreen.thumbnails.position"),l=(s=t(o?"thumbnails.type":"fullscreen.thumbnails.type"),n="thumbnails","bullets"===s&&(n=s),n),d=o?e.isStandardGrid:e.isFullscreenGrid;r&&(o&&e.externalContainer||e.classes[i].movingContainerClasses.push("smv-selectors-"+a),e.classes[i].selectorsWrapperClasses.push("smv-"+l),e.classes[i].selectorsWrapperClasses.push("smv-"+(["left","right"].includes(a)?"v":"h")),d&&e.classes[i].selectorsWrapperClasses.push("smv-grid"),t("fullscreen.thumbnails.autohide")&&!o&&(e.classes[i].movingContainerClasses.push("smv-autohide"),e.classes[i].movingContainerClasses.push("smv-selectors-closed")))}))},f.changeClasses=function(e,t){var i=this,s=t?"removeClass":"addClass";e.movingContainerClasses.forEach((function(e){i.movingContainer[s](e)})),e.selectorsWrapperClasses.forEach((function(e){i.selectorsWrapper[s](e)}))},f.setClasses=function(){this.isFullscreenState()?(this.changeClasses(this.classes.standard,!0),this.changeClasses(this.classes.fullscreen)):(this.changeClasses(this.classes.fullscreen,!0),this.changeClasses(this.classes.standard))},f.setInViewAction=function(){var e=this;"visible"===this.option("autostart")?(this.inViewModule=new o.InViewModule((function(t){t.forEach((function(t){var i=e.isInView,s=t.isIntersecting||t.intersectionRatio>0;e.isFullscreenState()&&!s&&(s=!0),i!==s&&(e.isInView=s,e.postInitialization(),e.broadcast("inView",{data:s}),e.isInView?e.autoplay():e.pauseAutoplay())}))}),{rootMargin:this.rootMargin+"px 0px"}),this.inViewModule.observe(this.instanceNode.node)):this.isInView=!0},f.sendEvent=function(e,t){t||(t={}),t.node=this.instanceNode,t.slider||(t.slider={type:e}),this.emit("viewerPublicEvent",{data:t})},f.checkReadiness=function(e,t){var i=!1;if(["init","ready"].includes(e))if("viewer"===t)"ready"===e&&(i=this.isReady);else for(var s=0,n=this.slides.length;s<n;s++)if(this.slides[s].checkReadiness(e,t)){i=!0;break}return i},f.sendReadyEvent=function(e,t){"viewer"===t?this.sendEvent("ready"):this.slides.forEach((function(i){i.sendReadyEvent(e,t)}))},f.sendStats=function(e,t){var i,s;if(t||(t={}),t.slider=this.id,e&&(t.data={},t.data.event=e),"spin"===t.component)(i={account:t.account,event:{type:t.component,name:t.event,data:t.data||{},sessionId:t.sessionId,origin:t.origin}}).event["sessionStart"===t.event?"ts":"time"]=t.eventTime,(s=JSON.parse(JSON.stringify(i))).event=JSON.stringify(s.event);i&&(!0===t.useBeacon?o.sendRawStats(s,!0):setTimeout((function(){o.sendRawStats(s)}),1),this.sendEvent("sendStats",y.detach(i)))},f.setComponentsEvents=function(){var e=this,s=function(t){if(e.firstSlideAhead&&t===e.index){var i=e.option("slide.preload");e.enabledIndexesOfSlides.forEach((function(t){e.slides[t].startGettingInfo(),i?e.slides[t].loadContent():e.slides[t].loadThumbnail()}))}},n=function(t){e.index===t&&e.autoplay()},o=function(t){e.index===t&&e.pauseAutoplay()};this.on("stats",(function(t){t.stopAll();var i=y.D.node,s=y.W.node,n=s.screen;"sessionStart"===t.data.event&&(t.data.data||(t.data.data={}),t.data.data.screen={width:n.width,height:n.height,availWidth:n.availWidth,availHeight:n.availHeight,colorDepth:n.colorDepth,pixelDepth:n.pixelDepth},t.data.data.browser={width:s.innerWidth||i.documentElement.clientWidth||i.body.clientWidth||0,height:s.innerHeight||i.documentElement.clientWidth||i.body.clientWidth||0}),e.sendStats(null,t.data)})),this.on("slideVideoPlay",(function(e){e.stopAll(),o(e.data.slide.index)})),this.on("slideVideoPause",(function(e){e.stopAll()})),this.on("slideVideoEnd",(function(e){e.stopAll(),n(e.data.slide.index)})),this.on("contentLoaded",(function(e){e.stopAll(),s(e.data.slide.index)})),this.on("componentEvent",(function(t){var r=t.data.type;switch(t.stopAll(),r){case"init":(e.index===t.data.slide.index||e.slides[e.index]&&e.slides[e.index].spinInited)&&(e.addControllWrapper(),e.enableFullscreenButton(),e.visibleFullscreenButton()),e.sendEvent("componentEvent",t.data);break;case"ready":e.index!==t.data.slide.index||"spin"===t.data.component||e.slides[t.data.slide.index].videoSlide&&!e.isFullscreenState()||(e.addControllWrapper(),e.enableFullscreenButton(),e.visibleFullscreenButton()),e.sendEvent("componentEvent",t.data);break;case"rotate":e.sendEvent("componentEvent",t.data);break;case"fullscreenIn":"video"===t.data.component?e.sendEvent("componentEvent",t.data):e.option("fullscreen.enable")&&e.isFullscreen===i.FULLSCREEN.CLOSED&&e.enterFullScreen();break;case"fullscreenOut":"video"===t.data.component?e.sendEvent("componentEvent",t.data):e.exitFullScreen();break;case"pinchStart":e.isComponentPinching=!0;break;case"pinchEnd":e.isComponentPinching=!1;break;case"zoomIn":e.isZoomIn=!0,o(t.data.slide.index),e.sendEvent("componentEvent",t.data);break;case"zoomOut":e.isZoomIn=!1,n(t.data.slide.index),e.sendEvent("componentEvent",t.data);break;case"hotspotOpened":o(t.data.slide.index);break;case"hotspotClosed":n(t.data.slide.index);break;case"spinStart":o(t.data.slide.index);break;case"spinEnd":n(t.data.slide.index);break;case"play":case"resume":"video"===t.data.component&&(o(t.data.slide.index),e.sendEvent("componentEvent",t.data));break;case"pause":"video"===t.data.component&&e.sendEvent("componentEvent",t.data);break;case"end":"video"===t.data.component&&(n(t.data.slide.index),e.sendEvent("componentEvent",t.data));break;case"seek":e.sendEvent("componentEvent",t.data);break;case"contentLoaded":s(t.data.slide.index)}})),this.on("goTo"+t,(function(t){t.stopAll(),e.option("fullscreen.enable")&&e.isFullscreen===i.FULLSCREEN.CLOSED&&e.enterFullScreen()})),this.on("goTo"+t+"Out",(function(t){t.stopAll(),e.exitFullScreen()})),this.on("infoReady",(function(s){if(s.stop(),e.isFullscreen===i.FULLSCREEN.OPENED){var n=e.slides[s.data.index];n.broadcast("before"+t+"In",{data:{pseudo:e.isPseudo}}),n.broadcast("after"+t+"In",{data:{pseudo:e.isPseudo}})}})),this.on((function(e){e.stopAll()}))},f.normalizeOptions=function(){var e=this,t=g(["contextmenu.text.zoom.in","contextmenu.text.zoom.out","contextmenu.fullscreen.enter","contextmenu.fullscreen.exit","contextmenu.text.download"]);"auto"===this.option("fullscreen.thumbnails.size")&&this.option("fullscreen.thumbnails.size",this.option("thumbnails.size")),"off"===this.option("slide.animation.type")&&this.option("slide.animation.type",!1),"grid"===this.option("thumbnails.type")&&(this.isStandardGrid=!0,this.option("thumbnails.type","square")),"grid"===this.option("fullscreen.thumbnails.type")&&(this.isFullscreenGrid=!1,this.option("fullscreen.thumbnails.type","square")),t.forEach((function(t){var i;i=e.option(t),"string"===y.typeOf(i)&&""===i.trim()&&e.option(t,!1)})),this.option("thumbnails.enable")&&this.option("thumbnails.target")&&""===this.option("thumbnails.target").trim()&&this.option("thumbnails.target",!1),!this.option("slide.socialbuttons.enable")||this.option("slide.socialbuttons.types.facebook")||this.option("slide.socialbuttons.types.twitter")||this.option("slide.socialbuttons.types.linkedin")||this.option("slide.socialbuttons.types.reddit")||this.option("slide.socialbuttons.types.tumblr")||this.option("slide.socialbuttons.types.pinterest")||this.option("slide.socialbuttons.types.telegram")||this.option("slide.socialbuttons.enable",!1),this.slideOptions.sbEnable=this.option("slide.socialbuttons.enable")},f.addControllWrapper=function(){!this.controlsWrapperWasAppended&&this.controlsWrapper.node.childNodes.length&&(this.controlsWrapperWasAppended=!0,this.slideWrapper.append(this.controlsWrapper))},f.postInitialization=function(){var e=this;if(!this.isInitialized&&this.isInView&&this.isSelectorsReady&&this.isToolStarted&&this.isStartedFullInit){if(this.isInitialized=!0,this.hasSize||this.setContainerSize(),this.broadcast("inView",{data:this.isInView}),this.createArrows(),this.selectors&&(this.selectors.inView(this.isInView,this.instanceNode),this.selectors.activateItem(this.index)),!y.browser.mobile){var t=["edge","ie"].includes(y.browser.uaName)?"pointerout":"mouseout";this.movingContainer.addEvent(t,(function(t){if(!t.pointerType||"mouse"===t.pointerType){for(var i=t.related;i&&i!==e.movingContainer.node;)i=i.parentNode;e.movingContainer.node!==i&&null!==e.index&&e.slides[e.index].mouseAction("mouseout",t)}}))}this.slides.length>1&&this.initTouchDrag(),g(y.W).addEvent("resize",this.onResizeHandler),this.showHideArrows(),this.showHideSelectors(),this.option("fullscreen.always")&&this.slideWrapper.addClass(i.CSS_CURSOR_FULSCREEN_ALWAYS),this.movingContainer.attr("id",this.movingContainerId),this.createFullscreenButton(),this.addControllWrapper(),!this.slides[this.index]||this.slides[this.index].sirv||this.slides[this.index].videoSlide&&!this.isFullscreenState()||(this.enableFullscreenButton(),this.visibleFullscreenButton()),this.checkLoop(this.index),this.movingContainer.setCssProp("font-size",""),this.doHistory&&g(y.W).addEvent("popstate",this.onHistoryStateChange),this.autoplay(),this.isReady=!0,this.sendEvent("ready")}},f.addHistory=function(){if(this.doHistory){var e="#sirv-viewer-"+this.fullscreenViewId;if(y.W.node.location.hash!==e){var t={name:"Sirv.viewer",hash:this.fullscreenViewId},i=y.D.node.body.title||"Sirv viewer";try{y.W.node.history.state&&"Sirv.viewer"===y.W.node.history.state.name&&y.W.node.history.replaceState(null,i,""),y.W.node.history.pushState(t,i,e)}catch(e){}}}},f.setContainerSize=function(){var e=!1,t=0;this.selectors&&(t=this.selectorsWrapper.size[this.selectors.shortSide]);var s=this.movingContainer.size,n=this.option("thumbnails.position"),o=this.option("thumbnails.enable")&&this.canShowSelectors(this.slides.length)&&t>0&&!this.externalContainer;if(s.width||s.height)if(e=!0,this.isFullscreen===i.FULLSCREEN.OPENED)this.movingContainer.setCssProp("height",""),this.slideWrapper.setCssProp("height","");else if(this.doSetSize&&this.heightProportion){o&&["left","right"].includes(n)&&(s.width-=t);var r=s.width*(this.heightProportion.height/this.heightProportion.width);r>this.heightProportion.height&&(r=this.heightProportion.height),!o||["left","right"].includes(n)&&!this.isStandardGrid?this.movingContainer.setCssProp("height",r+"px"):this.slideWrapper.setCssProp("height",r+"px")}return e},f.findSlideIndex=function(e){for(var t=-1,i=0,s=this.slides.length;i<s;i++)if(this.slides[i].id&&this.slides[i].id===e){t=this.slides[i].index;break}return t},f.getCountOfEnabledSlides=function(e){var t=this.enabledIndexesOfSlides.length;return e&&(t=this.slides.length-t),t},f.getItems=function(e){var t=null,i=this.slides;e&&(y.defined(e.enabled)&&(t=e.enabled),e.group&&(i=this.getSlidesByGroup(e.group)));var s=[];return i.forEach((function(e){!0===t?e.enabled&&s.push(e.api):!1===t&&e.enabled||s.push(e.api)})),s},f.controlEnabledSlides=function(e,t){t?this.enabledIndexesOfSlides.splice(this.enabledIndexesOfSlides.indexOf(e),1):(this.enabledIndexesOfSlides.push(e),this.enabledIndexesOfSlides=this.enabledIndexesOfSlides.sort((function(e,t){var i=0;return e<t?i=-1:e>t&&(i=1),i})))},f.disableSlide=function(e,t){var i=!1,s="next",n=this.slides.length;if("string"===y.typeOf(e)&&(e=this.findSlideIndex(e)),"number"===y.typeOf(e)&&e>=0&&e<this.slides.length&&this.slides[e].enabled){var o=this.slides[e].$J_UUID;this.effect&&this.effect.stop(),this.slides[e].isActive&&(this.index===n-1&&this.option("loop")&&(s=0),this.jump(s,4,!0)||(this.slides[e].beforeHide(),this.slides[e].afterHide())),this.slides[e].enabled&&this.controlEnabledSlides(e,!0),this.slides[e].disable(),this.checkLoop(this.index),this.enabledIndexesOfSlides.length||(this.index=null),this.selectors&&this.selectors.disable(o),t||this.sendEvent("disableItem",{slide:this.slides[e].api}),this.checkSingleSlide(),this.showHideArrows(),this.showHideSelectors(),i=!0}return i},f.enableSlide=function(e){var t=this,s=!1;if("string"===y.typeOf(e)&&(e=this.findSlideIndex(e)),"number"===y.typeOf(e)&&e>=0&&e<this.slides.length&&!this.slides[e].enabled){this.slides[e].startGettingInfo(),this.slides[e].loadThumbnail(),this.slides[e].enable(),this.slides[e].resize();var n=this.enabledIndexesOfSlides.filter((function(e){return t.slides[e].slideAvailable}));this.enabledIndexesOfSlides.length||(this.index=e),this.slides[e].slideAvailable&&!n.length&&(this.index=e,this.slides[e].loadContent(),this.slides[e].beforeShow(),this.slides[e].afterShow(i.SLIDE_SHOWN_BY.ENABLE)),this.controlEnabledSlides(e),this.checkLoop(this.index),this.selectors&&(this.selectors.enable(this.slides[e].UUID),this.slides[e].slideAvailable&&this.selectors.activateCurrentItemByUUID(this.slides[e].UUID)),this.sendEvent("enableItem",{slide:this.slides[e].api}),this.checkSingleSlide(),this.showHideArrows(),this.showHideSelectors(),s=!0}return s},f.getSlidesByGroup=function(e){var t=null;return e&&(t=[],this.slides.forEach((function(i){i.belongsTo(e)&&t.push(i)}))),t},f.enableGroupOfSlides=function(e){var t=this,i=!1,s=this.getSlidesByGroup(e);return s&&s.length&&(i=!0,s.forEach((function(e){t.enableSlide(e.index)}))),i},f.disableGroupOfSlides=function(e){var t=this,i=!1,s=this.getSlidesByGroup(e);return s&&s.length&&(i=!0,s.forEach((function(e){t.disableSlide(e.index)}))),i},f.switchGroupOfSlides=function(e){var t=this,i=!1;e&&(this.getItems({enabled:!0}).forEach((function(i){t.slides[i.index].belongsTo(e)||t.disableSlide(i.index)})),i=this.enableGroupOfSlides(e));return i},f.jump=function(e,t,i,s){var n=!1,r=this.option("slide.animation.type"),a=s,l=["next","prev"].includes(e),d=this.slides.length;if(!this.effect||!this.enabledIndexesOfSlides.length||null===this.index)return n;if(a===y.U&&(a=this.index),!l){var c=this.findSlideIndex(e);c>=0&&(e=c)}var h=o.sliderLib.findIndex(e,a,d,this.option("loop"));if(null===h)return n;if(this.index!==h){if(!this.slides[h].enabled||!this.slides[h].slideAvailable)return l&&(n=this.jump(e,t,i,h)),n;clearTimeout(this.autoplayTimer),l||(e=h>this.index?"next":"prev"),this.checkLoop(h),r&&!i||(r="blank"),this.selectors&&(this.selectors.activateItem(h),this.selectors.jump(h)),this.effect.make({index:this.index,node:this.slides[this.index].node},{index:h,node:this.slides[h].node},{effect:r,direction:e},{whoUse:t}),n=!0}else this.slides[h].secondSelectorClick();return this.index=h,n},f.checkLoop=function(e){var t=this;if(this.arrows){var i=this.enabledIndexesOfSlides.filter((function(e){return!t.slides[e].selectorPinned&&t.slides[e].slideAvailable})).length;if(i<2)this.arrows.disable("backward"),this.arrows.disable("forward");else if(this.option("loop"))this.arrows.disable();else{var s=this.enabledIndexesOfSlides.indexOf(e);this.arrows.disable(),0!==s&&1!==i||this.arrows.disable("backward"),s!==i-1&&1!==i||this.arrows.disable("forward")}}},f.createFullscreenButton=function(){var e=this;this.option("fullscreen.enable")&&!this.fullscreenButton&&(this.fullscreenButton=y.$new("div").addClass("smv-button").addClass("smv-button-fullscreen").addClass(n),this.fullscreenButton.append(y.$new("div").addClass("smv-icon")),this.slides[this.index].spinInited?(this.enableFullscreenButton(),this.visibleFullscreenButton()):(this.disableFullscreenButton(),this.hideFullscreenButton()),this.fullscreenButton.addEvent(["btnclick","tap"],(function(t){t.stop(),e.isFullscreen!==i.FULLSCREEN.CLOSED&&e.isFullscreen!==i.FULLSCREEN.OPENED||(e.disableFullscreenButton(),e.hideFullscreenButton(),e.isFullscreen===i.FULLSCREEN.CLOSED?e.enterFullScreen():e.exitFullScreen())})),this.controlsWrapper.append(this.fullscreenButton),this.slides[this.index].slideReady&&setTimeout((function(){e.slides[e.index].videoSlide&&!e.isFullscreenState()||(e.enableFullscreenButton(),e.visibleFullscreenButton())}),0))},f.visibleFullscreenButton=function(){this.fullscreenButton&&this.fullscreenButton.removeClass(d)},f.hideFullscreenButton=function(){this.fullscreenButton&&this.fullscreenButton.addClass(d)},f.enableFullscreenButton=function(){this.fullscreenButton&&this.fullscreenButton.removeAttr("disabled")},f.disableFullscreenButton=function(){this.fullscreenButton&&this.fullscreenButton.attr("disabled","disabled")},f.createEffect=function(){var e=this;this.effect=new x({time:this.option("slide.animation.duration"),orientation:this.option("orientation")}),this.effect.parentClass=this,this.on("effectStart",(function(t){t.stopAll(),e.isMoving=!0,e.disableFullscreenButton(),e.slides[t.indexes[1]].videoSlide&&e.isFullscreen!==i.FULLSCREEN.OPENED&&e.hideFullscreenButton(),e.slides[t.indexes[0]].beforeHide(),e.slides[t.indexes[1]].beforeShow(),4!==t.data.callbackData.whoUse&&(e.sendEvent("beforeSlideIn",{slide:e.slides[t.indexes[1]].api}),e.sendEvent("beforeSlideOut",{slide:e.slides[t.indexes[0]].api}))})),this.on("effectEnd",(function(t){t.stopAll(),e.slides[t.indexes[1]].videoSlide&&e.isFullscreen!==i.FULLSCREEN.OPENED||(e.enableFullscreenButton(),e.visibleFullscreenButton()),e.slides[t.indexes[0]].afterHide(),e.slides[t.indexes[1]].afterShow(t.data.callbackData.whoUse),4!==t.data.callbackData.whoUse&&(e.sendEvent("afterSlideIn",{slide:e.slides[t.indexes[1]].api}),e.sendEvent("afterSlideOut",{slide:e.slides[t.indexes[0]].api})),e.autoplay(),e.isMoving=!1,e.residualAutoplayTime=e.autoplayDelay}))},f.createArrows=function(){var e=this,t=this.option;t("arrows")&&(this.arrows=new j({orientation:t("orientation")}),this.arrows.hide(),this.arrows.parentClass=this,this.on("arrowAction",(function(t){t.stopAll();var i=e.getNextIndex(t.data.type,e.index,e.slides.length,e.option("loop"));e.jump(i,2)})),this.arrows.nodes.forEach((function(t){e.controlsWrapper.append(t)})))},f.getNextIndex=function(e,t,i,s){var n=o.sliderLib.findIndex(e,t,i,s),r=n;return null===n||n===this.index||!this.slides[n].selectorPinned&&this.slides[n].slideAvailable&&this.slides[n].enabled||(r=this.getNextIndex(e,n,i,s)),r},f.isHiddenSlides=function(){return!this.slides.some((function(e){return!e.customSelector||e.customSelector&&e.slideAvailable}))},f.createSelectors=function(){var e=this,t=this.option;t("thumbnails.enable")||t("fullscreen.thumbnails.enable")?(this.selectors=new q(this.slides.map((function(e){return e.selectorData})),{isStandardGrid:this.isStandardGrid,standardStyle:t("thumbnails.type"),standardSize:t("thumbnails.size"),standardPosition:!!t("thumbnails.enable")&&t("thumbnails.position"),standardWatermark:t("thumbnails.watermark"),isFullscreenGrid:this.isFullscreenGrid,fullscreenStyle:t("fullscreen.thumbnails.type"),fullscreenSize:t("fullscreen.thumbnails.size"),fullscreenPosition:!!t("fullscreen.thumbnails.enable")&&t("fullscreen.thumbnails.position"),fullscreenAutohide:t("fullscreen.thumbnails.autohide"),fullscreenWatermark:t("fullscreen.thumbnails.watermark"),arrows:t("arrows")}),this.selectors.parentClass=this,this.on("selectorsReady",(function(t){t.stopAll(),e.isSelectorsReady=!0,e.postInitialization()})),this.on("getSelectorProportion",(function(t){t.stopAll();var i=e.getSlideByUUID(t.data.UUID);if(null!==i){var s=e.slides[i];if(s){var n={size:null,isSirv:!0};s.getSelectorProportion().then((function(e){n.isSirv=s.isSirvSelector(),n.size=e.size,t.data.resultingCallback(n)})).catch((function(i){n.isSirv=s.isSirvSelector(),e.pickOut(i.UUID),t.data.resultingCallback(n)}))}else t.data.resultingCallback(null)}else t.data.resultingCallback(null)})),this.on("getSelectorImgUrl",(function(t){t.stopAll();var i=e.getSlideByUUID(t.data.UUID);if(null!==i){var s=e.slides[i];s?s.getSelectorImgUrl(t.data.type,t.data.size,t.data.crop,t.data.watermark).then((function(e){t.data.resultingCallback({src:e.src,srcset:e.srcset,size:e.size,alt:e.alt,referrerpolicy:e.referrerpolicy})})).catch((function(e){t.data.resultingCallback(null)})):t.data.resultingCallback(null)}else t.data.resultingCallback(null)})),this.on("changeSlide",(function(t){t.stopAll();var i=e.getSlideByUUID(t.data.UUID);if(null!==i){var s=e.option("fullscreen.enable")&&e.option("fullscreen.always");e.slides[i].customSelector&&e.sendEvent("thumbnailClick",{slide:e.slides[i].api}),e.jump(i,2,s),s&&e.enterFullScreen()}})),this.on("visibility",(function(t){switch(t.stop(),t.action){case"show":e.movingContainer.removeClass("smv-selectors-closed");break;case"hide":e.movingContainer.addClass("smv-selectors-closed")}})),this.on("selectorsDone",(function(t){t.stopAll(),["left","right"].includes(e.selectors.currentStylePosition)&&e.onResize()})),this.selectorsWrapper.append(this.selectors.node),this.slides.forEach((function(t,i){t.enabled||e.selectors.disable(t.UUID)})),this.showHideSelectors(!0)):this.isSelectorsReady=!0},f.findSlide=function(){var e=this.instanceNode.attr("data-src");if(e){var t,s;try{t=this.viewerFileContent?this.viewerFileContent:(t=(t=e.split("?")[0]).split("."))[t.length-1]}catch(e){}"spin"===t||o.isVideo(e)?(s=y.$new("div",{"data-src":e}),t=i.SLIDE.TYPES.SPIN):[this.instanceNode.attr("data-type"),this.instanceNode.attr("data-effect")].includes("zoom")?(t=i.SLIDE.TYPES.ZOOM,s=y.$new("div",{"data-type":"zoom","data-src":e})):(t=i.SLIDE.TYPES.IMAGE,s=y.$new("img",{"data-src":e})),this.viewerFileContent&&s.store("view-content",t),this.instanceNode.append(s)}else(e=this.instanceNode.attr("data-bg-src"))&&this.instanceNode.append(y.$new("img",{"data-src":e}));return this.getSlides(!0)},f.canPinSlide=function(e){var t=J.findPinnedSelectorSide(e);return this.slides.filter((function(e){return e.pinnedSelectorSide===t})).length<3},f.getSlideByUUID=function(e){for(var t=null,i=0,s=this.slides.length;i<s;i++){if(this.slides[i].UUID===e){t=i;break}}return t},f.pickOut=function(e){var t=this.getSlideByUUID(e);null!==t&&(this.removeSlide(t),this.slides.length?(this.slides.length<2&&(this.option("thumbnails.enable")||this.option("fullscreen.thumbnails.enable"))&&(this.changeClasses(this.classes.standard,!0),this.setContainerSize()),this.isToolStarted||this.searchingOfProportions(),this.postInitialization()):this.emit("destroy",{data:{id:this.id,node:this.instanceNode.node}}))},f.getSlides=function(e){var t,n=this,r=(t=e?Array.from(this.instanceNode.node.childNodes):function(e){for(var t=[],i=0,s=0,n=0,o=e.length;n<o;n++){var r=e[n];r.querySelector(C)&&(r=r.querySelector(C));var a=y.$(r).attr("data-pinned"),l=r.hasAttribute("data-pinned");s>=3&&"start"===a||i>=3&&(l&&a&&("end"===a||"end"!==a&&"start"!==a)||l&&!a)||(s<3&&"start"===a&&s++,(i<3&&l&&a&&("end"===a||"end"!==a&&"start"!==a)||l&&!a)&&i++,t.push(e[n]))}return t}(t=Array.from(this.instanceNode.node.childNodes).filter((function(e){var t=!1;return n.sliderNodes.push(e.cloneNode(!0)),e.tagName&&["div","img","iframe","figure","video","picture",C].includes(g(e).tagName)&&(t=!0),e.parentNode.removeChild(e),t})))).map((function(e){return J.parse(e)}));return s.viewerFilters.forEach((function(e){var t=[].concat(r);t=t.map((function(e){var t={};return Object.entries(e).forEach((function(e){"type"===e[0]&&(e[1]=i.SLIDE.NAMES[e[1]]),o.createReadOnlyProp.apply(o,[t].concat(e))})),t}));var s=e(n.id,t);Array.isArray(s)&&(r=s.map((function(e){for(var t=e,i=0,s=r.length;i<s;i++)if(e.node===r[i].node){t=r.splice(i,1)[0];break}return t})))})),t=r,e||t.length||(t=this.findSlide()),t=o.sortSlidesByOrder(this.option("itemsOrder"),t)},f.createSlides=function(e){var t=this,i=0;e.forEach((function(e){if(!J.isSirvComponent(e.node)||J.hasComponent(e.node)){if((e=g(e.node)).tagName===C){var s=y.$new("div");e.attr("data-id")&&s.attr("data-id",e.attr("data-id")),e.attr("data-group")&&s.attr("data-group",e.attr("data-group")),s.append(e),e=s}e.addClass("smv-component");var n=new J(e.node,i,t.slideOptions);n.parentClass=t,t.slides.push(n),n.enabled&&n.slideAvailable&&t.enabledIndexesOfSlides.push(i),i+=1}})),this.firstSlideAhead=this.enabledIndexesOfSlides.length>8,this.enabledIndexesOfSlides.forEach((function(e,i){(!t.firstSlideAhead||i<8)&&t.slides[e].startGettingInfo()})),this.index>this.slides.length-1&&(this.index=0),this.postInitialization()},f.checkSingleSlide=function(){var e=this,t=1===this.enabledIndexesOfSlides.length;this.enabledIndexesOfSlides.forEach((function(i){e.slides[i].single(t)}))},f.showHideArrows=function(){if(this.arrows){var e=this.visibleSlides();e<2||this.option("fullscreen.always")&&!this.isFullscreenState()?this.arrows.hide():e>1&&(!this.option("fullscreen.always")||this.isFullscreenState())&&this.arrows.show()}},f.canShowSelectors=function(e){var t=this.isFullscreen===i.FULLSCREEN.OPENED?"fullscreen.thumbnails.always":"thumbnails.always";return this.option(t)||e>1},f.showHideSelectors=function(e){var t=this;this.selectors&&(this.selectorsDebounce||(this.selectorsDebounce=o.debounce((function(){t.selectors&&(t.canShowSelectors(t.enabledIndexesOfSlides.length)?t.selectors.isSelectorsActionEnabled()||(t.movingContainer.setCssProp("height","100%"),t.selectorsWrapper.removeClass("smv-hide-selectors"),t.selectors.enableActions(),t.onResize()):t.selectors.isSelectorsActionEnabled()&&(t.selectorsWrapper.addClass("smv-hide-selectors"),t.selectors.disableActions(),t.onResize()))}),e?0:32)),this.selectorsDebounce())},f.getAvailableSlideIndex=function(e){return e!==this.slides.length-1||this.slides[e].slideAvailable?this.slides[e+1].slideAvailable?e+1:this.getAvailableSlideIndex(e+1):-1},f.addAvailableSlideNode=function(e,t){var i=e.node,s=this.slides.length;if(e.slideAvailable)if(s>1&&t!==s-1)if(this.slides[t+1].slideAvailable)this.slidesContainer.node.insertBefore(i.node,this.slides[t+1].node.node);else{var n=this.getAvailableSlideIndex(t);n<0?this.slidesContainer.append(i):this.slidesContainer.node.insertBefore(i.node,this.slides[n].node.node)}else this.slidesContainer.append(i)},f.sortItems=function(e){if(Array.isArray(e)||(e=this.option("itemsOrder")),e.length){this.slides=o.sortSlidesByOrder(e,this.slides),this.selectors&&this.selectors.sortSelectors(this.slides.map((function(e){return e.UUID})),e.length),this.slides.forEach((function(e,t){e.newIndex=t}));for(var t=0,i=this.slides.length;t<i;t++)if(this.slides[t].slideActive){this.index=this.slides[t].index;break}}},f.insertSlide=function(e,s){var n=this,o=s.querySelector(C)||s;if(J.findPinnedSelectorSide(o)&&!this.canPinSlide(o))return!1;if(y.defined(e)||(e=this.slides.length+1),"number"===y.typeOf(e)&&e>=0&&s&&(!J.isSirvComponent(s)||J.hasComponent(s))){g(s).addClass("smv-component"),e>this.slides.length&&(e=this.slides.length),clearTimeout(this.timerRemove);var r=new J(s,e,this.slideOptions,!0);r.parentClass=this,this.slides.splice(e,0,r);var a=null===this.index;return null===this.index?r.enabled&&r.slideAvailable?this.index=e:a=!1:e<=this.index&&(this.index+=1),this.enabledIndexesOfSlides=[],this.slides.forEach((function(e,t){e.newIndex=t,e.enabled&&n.controlEnabledSlides(t)})),this.addAvailableSlideNode(r,e),this.addComponentsCSS(),r.appendToDOM(),r.initVideoPlayer(),r.startGettingInfo(),r.loadThumbnail(),r.startFullInit(null),r.startTool(this.index===e,!this.firstSlideAhead&&this.option("slide.preload"),this.firstSlideAhead),r.broadcast("inView",{data:this.isInView}),this.index===e&&(r.loadContent(),r.beforeShow(),r.afterShow(i.SLIDE_SHOWN_BY.INIT)),this.isFullscreen!==i.FULLSCREEN.OPENED||r.sirv||(r.broadcast("before"+t+"In",{data:{pseudo:this.isPseudo}}),r.broadcast("after"+t+"In",{data:{pseudo:this.isPseudo}})),this.checkLoop(this.index),this.selectors&&(this.selectors.insert(e,r.selectorData),a&&this.selectors.activateItem(this.index)),this.checkSingleSlide(),this.showHideSelectors(),this.showHideArrows(),!0}return!1},f.removeSlide=function(e){var t=this,i=!1;if("string"===y.typeOf(e)&&(e=this.findSlideIndex(e)),"number"===y.typeOf(e)&&e>=0&&e<this.slides.length){var s=this.slides[e].$J_UUID;return this.slides[e].enabled?this.disableSlide(e,!0):i=!0,this.slides[e].destroy(),this.slides.splice(e,1),this.enabledIndexesOfSlides=[],this.slides.forEach((function(e,i){e.newIndex=i,e.enabled&&t.controlEnabledSlides(i)})),this.selectors&&this.selectors.pickOut(s),null!==this.index&&e<=this.index&&0!==this.index&&(this.index-=1),i&&this.checkSingleSlide(),this.isHiddenSlides()&&(this.timerRemove=setTimeout((function(){t.instanceNode&&t.emit("destroy",{data:{id:t.id,node:t.instanceNode.node}})}),100)),!0}return!1},f.createContextMenu=function(){var e=this,t=this.option,s=[];t("contextmenu.enable")?((t("contextmenu.text.zoom.in")||t("contextmenu.text.zoom.out"))&&(t("contextmenu.text.zoom.in")&&s.push({id:"zoomin",label:t("contextmenu.text.zoom.in"),hidden:!1,action:function(t){e.slides[e.index].zoomIn(t.left,t.top)}}),t("contextmenu.text.zoom.out")&&s.push({id:"zoomout",label:t("contextmenu.text.zoom.out"),disabled:!0,hidden:!1,action:function(t){e.slides[e.index].zoomOut(t.left,t.top)}})),t("fullscreen.enable")&&(t("contextmenu.text.fullscreen.enter")||t("contextmenu.text.fullscreen.exit"))&&(t("contextmenu.text.fullscreen.enter")&&s.push({id:"enterfullscreen",label:t("contextmenu.text.fullscreen.enter"),hidden:!t("fullscreen.enable"),action:function(){e.enterFullScreen()}}),t("contextmenu.text.fullscreen.exit")&&s.push({id:"exitfullscreen",label:t("contextmenu.text.fullscreen.exit"),hidden:!0,action:function(){e.exitFullScreen()}})),t("contextmenu.text.download")&&(s.length&&s.push({id:"sirv-separator",hidden:!1,separator:!0}),s.push({id:"download",label:t("contextmenu.text.download"),action:function(){var t=e.slides[e.index].originImageUrl;t&&(y.$new("iframe").setCss({width:0,height:0,display:"none"}).appendTo(y.D.node.body).node.src=t+"?format=original&dl")}})),this.movingContainer.addEvent("contextmenu",(function(s){var n,o,r=!1,a=!0,l=!1,d=!1,c=!1,h="zoomin",u="zoomout",p="enterfullscreen",f="exitfullscreen";if(s.stopDefaults(),e.contextMenu&&!e.isMoving&&e.enabledIndexesOfSlides.length){var v=e.slides[e.index],m=v.typeOfSlide,S=i.SLIDE.TYPES;if(e.isReady&&v.isReady&&v.sirv&&m){var y=v.options;switch(m){case S.SPIN:n=!0;break;case S.ZOOM:n="deep"===y.mode;break;case S.IMAGE:break;case S.VIDEO:a=!1}n&&e.slides[e.index].zoomSizeExist&&(t("contextmenu.text.zoom.in")||t("contextmenu.text.zoom.out"))?(o=e.slides[e.index].zoomData,e.contextMenu.showItem(h),o.isZoomed&&1===o.zoom?e.contextMenu.disableItem(h):e.contextMenu.enableItem(h),e.contextMenu.showItem(u),o.isZoomed?e.contextMenu.enableItem(u):e.contextMenu.disableItem(u),l=!0):(e.contextMenu.hideItem(h),e.contextMenu.hideItem(u)),t("fullscreen.enable")&&(e.isFullscreenState()?(e.contextMenu.hideItem(p),e.contextMenu.isExist(f)&&(e.contextMenu.showItem(f),o&&o.isZoomed?e.contextMenu.disableItem(f):e.contextMenu.enableItem(f),d=!0)):(e.contextMenu.isExist(p)&&(e.contextMenu.showItem(p),o&&o.isZoomed?e.contextMenu.disableItem(p):e.contextMenu.enableItem(p),d=!0),e.contextMenu.hideItem(f))),e.contextMenu.isExist("download")&&a?(e.contextMenu.showItem("download"),c=!0):e.contextMenu.hideItem("download"),(l||d||c)&&((l||d)&&c&&m!==S.VIDEO?e.contextMenu.showItem("sirv-separator"):e.contextMenu.hideItem("sirv-separator"),r=!0,e.broadcast("stopContext"))}e.contextMenu.canShow=r}})),s.length&&!y.browser.mobile&&(this.contextMenu=new a(this.movingContainer,s,"sirv"),t("fullscreen.enable")&&(this.contextMenu.fullScreenBox=this.fullScreenBox))):this.movingContainer.addEvent("contextmenu",(function(e){e.stop()}))},f.enterFullScreen=function(){var e=this;if(this.isFullscreen!==i.FULLSCREEN.CLOSED)return!1;this.addHistory(),this.isFullscreen=i.FULLSCREEN.OPENING,this.fullscreenStartTime=+new Date;var s=!this.option("fullscreen.native")||!y.browser.fullScreen.capable||!y.browser.fullScreen.enabled();return X&&X.appendTo(y.D.node.body),this.disableFullscreenButton(),this.hideFullscreenButton(),this.selectors&&(this.setClasses(),this.option("fullscreen.thumbnails.enable")&&this.appendSelectors(),this.selectors.beforeEnterFullscreen()),this.slideWrapper.removeClass(i.CSS_CURSOR_FULSCREEN_ALWAYS),this.fullScreenBox.setCss({position:"fixed",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:99999999999}),this.boxSize=this.instanceNode.size,this.boxBoundaries=this.instanceNode.rect,this.fullScreenBox.append(this.movingContainer),g(y.D.node.body).append(this.fullScreenBox),this.movingContainer.setCssProp("height","100%"),this.broadcast("before"+t+"In",{data:{pseudo:s}}),this.slideWrapper.setCssProp("height",""),u&&this.productDetail&&this.productDetail.open(),y.browser.fullScreen.request(this.fullScreenBox,{windowFullscreen:!this.option("fullscreen.native"),onEnter:this.onEnteredFullScreen.bind(this),onExit:function(){[i.FULLSCREEN.CLOSED,i.FULLSCREEN.OPENING].includes(e.isFullscreen)||(e.isFullscreen=i.FULLSCREEN.CLOSING,e._beforeExitFullscreen(),e.broadcast("before"+t+"Out",{data:{pseudo:!1}}),e.onExitFullScreen())},fallback:function(){var t=y.D.node.getElementsByTagName("html")[0];g(t).addClass(c),g(document.body).render(),setTimeout((function(){return e.onEnteredFullScreen(!0)}),64)}}),!0},f.onEnteredFullScreen=function(e){var s=this;if(this.isFullscreen===i.FULLSCREEN.OPENING){this.isPseudo=e,e&&this.isFullscreen===i.FULLSCREEN.OPENING&&(this.fullScreenBox.setCss({top:X?Math.abs(X.node.getBoundingClientRect().top):0,left:0,right:0,bottom:0,width:"auto",height:X?y.W.node.innerHeight:"auto",display:this.productDetail?"flex":"block",position:"fixed"}),y.D.addEvent("keydown",this.pseudoFSEvent)),this.isFullscreen=i.FULLSCREEN.OPENED,this.fullscreenButton&&(this.fullscreenButton.removeClass(n),this.fullscreenButton.addClass(l),this.slides[this.index]&&this.slides[this.index].videoSlide&&this.isFullscreen!==i.FULLSCREEN.OPENED||setTimeout((function(){s.enableFullscreenButton(),s.visibleFullscreenButton()}),1)),this.selectors&&this.selectors.afterEnterFullscreen(),this.slides.length>1&&y.D.addEvent("keyup",this.keyBoardArrowsCallback),this.showHideArrows(),this.showHideSelectors(),this.broadcast("after"+t+"In",{data:{pseudo:e}}),this.onResize();var o={};this.enabledIndexesOfSlides.length&&(o={slide:this.slides[this.index].api}),this.sendEvent("fullscreenIn",o)}},f._beforeExitFullscreen=function(){this.disableFullscreenButton(),this.hideFullscreenButton(),this.option("fullscreen.always")&&this.slideWrapper.addClass(i.CSS_CURSOR_FULSCREEN_ALWAYS),this.selectors&&(this.option("fullscreen.thumbnails.enable")&&this.appendSelectors(),this.setClasses(),this.selectors.beforeExitFullscreen()),u&&this.productDetail&&this.productDetail.close()},f.exitFullScreen=function(){if(this.isFullscreen!==i.FULLSCREEN.OPENED)return!1;if(this.isFullscreen=i.FULLSCREEN.CLOSING,this._beforeExitFullscreen(),X&&X.remove(),y.browser.fullScreen.capable&&y.browser.fullScreen.enabled()&&this.option("fullscreen.native"))this.broadcast("before"+t+"Out",{data:{pseudo:!1}}),y.browser.fullScreen.cancel.call(document);else{var e=y.D.node.getElementsByTagName("html")[0];g(e).removeClass(c),this.broadcast("before"+t+"Out",{data:{pseudo:!0}}),this.onExitFullScreen(!0)}return!0},f.onExitFullScreen=function(e){var s=this;if(![i.FULLSCREEN.CLOSED,i.FULLSCREEN.OPENING].includes(this.isFullscreen)){if(y.D.removeEvent("keyup",this.keyBoardArrowsCallback),this.showHideArrows(),this.showHideSelectors(),this.instanceNode.append(this.movingContainer),this.fullScreenBox.remove(),this.fullscreenButton&&(this.fullscreenButton.removeClass(l),this.fullscreenButton.addClass(n),this.slides[this.index]&&this.slides[this.index].videoSlide&&this.isFullscreen!==i.FULLSCREEN.OPENED||setTimeout((function(){s.enableFullscreenButton(),s.visibleFullscreenButton()}),1)),this.doHistory){var o="#sirv-viewer-"+this.fullscreenViewId;try{y.W.node.location.hash===o&&y.W.node.history.back()}catch(e){}}this.isFullscreen=i.FULLSCREEN.CLOSED,this.isPseudo=!1,this.selectors&&this.selectors.afterExitFullscreen(),this.setContainerSize(),this.fullscreenStartTime=null,this.broadcast("after"+t+"Out",{data:{pseudo:e}});var r={};this.enabledIndexesOfSlides.length&&(r={slide:this.slides[this.index].api}),this.sendEvent("fullscreenOut",r),this.onResize()}},f.getSlide=function(e){var t;return(null===e||"number"===y.typeOf(e)&&e>=this.slides.length)&&(e=this.index),"string"===y.typeOf(e)&&(e=this.findSlideIndex(e)),null==(t=this.slides[e])?void 0:t.api},f.onResizeWithoutSelectors=function(){this.destroyed||(X&&this.isFullscreen===i.FULLSCREEN.OPENED&&this.fullScreenBox.setCss({height:y.W.node.innerHeight,top:Math.abs(X.node.getBoundingClientRect().top)}),this.setRootMargin(),this.setContainerSize(),this.slides.forEach((function(e){e.resize()})))},f.onResize=function(){this.destroyed||(this.selectors&&this.selectors.onResize(),this.onResizeDebounce())},f.play=function(e){var t=!1,i=this.option("slide.delay");return y.defined(e)&&"number"===y.typeOf(e)&&e>9&&(i=e),(null===this.autoplayTimer&&!this.isAutoplay||i!==this.autoplayDelay)&&(this.autoplayDelay=i,this.isAutoplay=!0,this.residualAutoplayTime=this.autoplayDelay,this.autoplay(),t=!0),t},f.pause=function(){var e=this.autoplayTimer;return this.isAutoplay=!1,clearTimeout(this.autoplayTimer),this.autoplayTimer=null,this.residualAutoplayTime=this.autoplayDelay,null===e},f.pauseAutoplay=function(){clearTimeout(this.autoplayTimer),this.autoplayTimer=null,this.residualAutoplayTime-=+new Date-this.currentAutoplayTime},f.autoplay=function(){var e=this;if(this.isAutoplay){this.currentAutoplayTime=+new Date;var t=this.autoplayDelay;this.residualAutoplayTime!==t&&(t=this.residualAutoplayTime<1e3?1e3:this.residualAutoplayTime),clearTimeout(this.autoplayTimer),this.autoplayTimer=setTimeout((function(){e.destroyed||e.jump("next",i.SLIDE_SHOWN_BY.AUTOPLAY)}),t)}},f.destroy=function(){var e,s,n=this;this.destroyed=!0,this.onResizeDebounce.cancel(),this.onResizeDebounce=null,clearTimeout(this.autoplayTimer),this.autoplayTimer=null,this.selectorsDebounce&&(this.selectorsDebounce.cancel(),this.selectorsDebounce=null),g(y.W).removeEvent("resize",this.onResizeHandler),this.onResizeHandler=null,g(y.D).removeEvent("keyup",this.keyBoardArrowsCallback),this.inViewModule&&(this.inViewModule.disconnect(),this.inViewModule=null),this.doHistory&&(g(y.W).removeEvent("popstate",this.onHistoryStateChange),i.FULLSCREEN_VIEWERS_IDs_ARRAY.splice(i.FULLSCREEN_VIEWERS_IDs_ARRAY.indexOf(this.fullscreenViewId),1)),this.movingContainer.removeEvent("mouseout"),this.slideWrapper.removeClass(i.CSS_CURSOR_FULSCREEN_ALWAYS),this.clearingTouchdragFunction&&this.clearingTouchdragFunction(),this.slidesContainer.removeEvent("touchdrag"),e=this.id,s=!1,(e=e.split("-")).splice(e.length-1,1),(e=e.join("-"))===b&&(s=!0),s&&this.instanceNode.removeAttr("id"),this.contextMenu&&(this.movingContainer.removeEvent("contextmenu"),this.contextMenu.destroy(),this.contextMenu=null),this.productDetail&&(this.productDetail.destroy(),this.productDetail=null),this.fullscreenButton&&(this.fullscreenButton.removeEvent(["btnclick","tap"]),this.fullscreenButton.remove()),this.fullscreenButton=null,this.effect&&(this.effect.destroy(),this.effect=null,this.on("effectStart"),this.on("effectEnd")),this.arrows&&(this.arrows.destroy(),this.arrows=null,this.off("arrowAction")),this.selectors&&(this.selectors.destroy(),this.selectors=null,this.off("visibility"),this.off("changeSlide"),this.off("selectorsReady"),this.off("getSelectorImgUrl"),this.off("selectorsDone"),this.off("getSelectorProportion")),this.off("componentEvent"),this.off("goTo"+t),this.off("goTo"+t+"Out"),this.off("infoReady"),this.off("slideVideoPlay"),this.off("slideVideoPause"),this.off("slideVideoEnd"),this.slides.forEach((function(e){var t=e.originNode;g(t).removeClass("smv-component"),e.destroy()})),this.slides=[],this.off("stats"),this.sliderNodes.forEach((function(e){return n.instanceNode.append(e)})),this.sliderNodes=[],g(y.D).removeEvent("keydown",this.pseudoFSEvent),this.pseudoFSEvent=null,g(y.D).removeEvent("keyup",this.keyBoardArrowsCallback),this.keyBoardArrowsCallback=null,this.fullScreenBox.remove(),this.fullScreenBox=null,this.controlsWrapper.remove(),this.controlsWrapper=null,this.slidesContainer.remove(),this.slidesContainer=null,this.selectorsWrapper.remove(),this.selectorsWrapper=null,this.slideWrapper.remove(),this.slideWrapper=null,this.movingContainer.remove(),this.movingContainer=null,this.isReady=!1,this.doSetSize=!1,this.instanceNode=null,this.externalContainer=null,r.prototype.destroy.call(this)},p}(r);return p}();return G=function(e){return Object.entries(e).forEach((function(t){var i=t[0],s=t[1];(s=g(s.split(";"))).length&&(""===s[s.length-1]&&s.splice(s.length-1,1),s=s.map((function(e){return e.replace(new RegExp("^"+i+"\\."),"")})),e[i]=s.join(";"))})),e},$=function(e,t){var i,s=y.typeOf(t),n=null;return"string"===s?n=e[t]:"array"===s&&e[i=t.shift()]&&(n=t.length?$(e[i],t):e[i]),n},Y=function(e,t,i){return{common:$(e.common,t)||i,mobile:$(e.mobile,t)||i}},function(t){"use strict";function i(i,s,n,o){var r;(r=t.call(this)||this).node=i,r.slider=null,r.lazyInit=o,r.options={},r.spinOptions={},r.zoomOptions={},r.imageOptions={},r.videoOptions={},r.sliderBuilder=new h(s,r.node),r.parseOptions(s),r.privateOptions={common:{},mobile:{}},r.toolOptions=null,r.inViewTimer=null,r.isRun=!1,r.api={isReady:r.isReady.bind(e.assertThisInitialized(r)),items:r.items.bind(e.assertThisInitialized(r)),disableItem:r.disableItem.bind(e.assertThisInitialized(r)),enableItem:r.enableItem.bind(e.assertThisInitialized(r)),enableGroup:r.enableGroup.bind(e.assertThisInitialized(r)),disableGroup:r.disableGroup.bind(e.assertThisInitialized(r)),switchGroup:r.switchGroup.bind(e.assertThisInitialized(r)),insertItem:r.insertItem.bind(e.assertThisInitialized(r)),removeItem:r.removeItem.bind(e.assertThisInitialized(r)),removeAllItems:r.removeAllItems.bind(e.assertThisInitialized(r)),jump:r.jump.bind(e.assertThisInitialized(r)),itemsCount:r.itemsCount.bind(e.assertThisInitialized(r)),next:r.next.bind(e.assertThisInitialized(r)),prev:r.prev.bind(e.assertThisInitialized(r)),isFullscreen:r.isFullscreen.bind(e.assertThisInitialized(r)),fullscreen:r.fullscreen.bind(e.assertThisInitialized(r)),child:r.child.bind(e.assertThisInitialized(r)),play:r.play.bind(e.assertThisInitialized(r)),pause:r.pause.bind(e.assertThisInitialized(r)),sortItems:r.sortItems.bind(e.assertThisInitialized(r))},r.on("viewerPublicEvent",(function(e){Object.assign(e.data.slider,r.api),e.data.slide&&(e.data.slide.parent=function(){return r.api},e.data.slide[e.data.slide.component]&&(e.data.slide[e.data.slide.component].parent=function(){return e.data.slide}))})),r.makeOptions();var a=r.toolOptions.get("autostart");return(a&&"off"!==a||n)&&r.run(),r}e.inheritsLoose(i,t);var s=i.prototype;return s.parseOptions=function(e){var t,i,s="viewer",n="spin",o="zoom",r="image",a="video",l=e.common,d=e.mobile;this.options=Y(e,s,{}),this.spinOptions={common:$(l,[s,n])||$(l,n)||{},mobile:$(d,[s,n])||$(d,n)||{}},this.zoomOptions={common:$(l,[s,o])||$(l,o)||{},mobile:$(d,[s,o])||$(d,o)||{}},this.imageOptions={common:$(l,[s,r])||$(l,r)||{},mobile:$(d,[s,r])||$(d,r)||{}},this.videoOptions={common:$(l,[s,a])||$(l,a)||{},mobile:$(d,[s,a])||$(d,a)||{}},t=this.options,(i=function(e){["spin","zoom","image","video"].forEach((function(t){e[t]&&delete e[t]}))})(t.common),i(t.mobile)},s.getSlideOptions=function(){var e=Y(this.privateOptions,"spin",""),t=Y(this.privateOptions,"zoom",""),i=Y(this.privateOptions,"image",""),s=Y(this.privateOptions,"video","");return{spin:{common:this.spinOptions,local:e},zoom:{common:this.zoomOptions,local:t},image:{common:this.imageOptions,local:i},video:{common:this.videoOptions,local:s}}},s.makeOptions=function(){var e={spin:/^spin/,zoom:/^zoom/,image:/^image/,video:/^video/};this.toolOptions=new y.Options(E),this.toolOptions.fromJSON(this.options.common),this.privateOptions.common=this.toolOptions.fromString(this.node.attr("data-options")||"",e),this.privateOptions.common=G(this.privateOptions.common),y.browser.touchScreen&&y.browser.mobile&&(this.toolOptions.fromJSON(this.options.mobile),this.privateOptions.mobile=this.toolOptions.fromString(this.node.attr("data-mobile-options")||"",e),this.privateOptions.mobile=G(this.privateOptions.mobile))},s.createSlider=function(e){this.slider=new K(this.node,{options:this.toolOptions,slideOptions:this.getSlideOptions(),lazyInit:this.lazyInit,viewerFileContent:e}),this.slider.parentClass=this,this.api.id=this.slider.id},s.run=function(e){var t=this;return this.isRun=!0,this.sliderBuilder.getOptions().then((function(i){t.parseOptions(i.dataOptions),e&&t.makeOptions(),i.content?t.createSlider(i.content):t.sliderBuilder.buildViewer().then((function(e){t.node=e.mainNode,t.createSlider()}))})).catch((function(e){console.log("Sirv: cannot get view from "+e.error)})),!0},s.isReady=function(){var e=!1;return this.slider&&(e=this.slider.isReady),e},s.isFullscreen=function(){var e=!1;return this.isReady()&&(e=2===this.slider.isFullscreen),e},s.startFullInit=function(e,t,i){var s;this.slider&&(this.lazyInit=i,this.parseOptions(e),this.makeOptions(),((s=this.toolOptions.get("autostart"))&&"off"!==s||t)&&this.slider.startFullInit({options:this.toolOptions,slideOptions:this.getSlideOptions(),lazyInit:this.lazyInit}))},s.start=function(){var e=!1;return this.slider||(e=this.run(!0)),e},s.stop=function(){var e=!1;return this.slider&&(e=!0,this.slider.destroy(),this.slider=null,this.off("viewerPublicEvent"),this.isRun=!1,this.sliderBuilder.destroy(),this.sliderBuilder=null,this.destroy()),e},s.insertItem=function(e,t){var i=!1;if(this.isReady()){if("string"===y.typeOf(e)){var s=y.$new("div");s.node.innerHTML=e.trim(),!(e=s.node.firstChild)||3!==e.nodeType&&8!==e.nodeType&&["div","img",C].includes(g(e).tagName)||(e=null)}else if(g(e).tagName===C){var n=y.$new("div");n.append(e),e=n.node}i=this.slider.insertSlide(t,e)}return i},s.removeItem=function(e){var t=!1;return this.isReady()&&(t=this.slider.removeSlide(e)),t},s.removeAllItems=function(){var e=!0;if(this.isReady())for(var t=this.itemsCount()-1;t>=0;t--){var i=this.removeItem(t);e&&(e=i)}else e=!1;return e},s.itemsCount=function(e){var t=0;if(this.isReady()){var i=this.items(e);null!==i&&(t=i.length)}return t},s.items=function(e){var t=this,i=null;return this.isReady()&&(i=this.slider.getItems(e)).forEach((function(e){e.parent=function(){return t.api}})),i},s.disableItem=function(e){var t=!1;return this.isReady()&&(t=this.slider.disableSlide(e)),t},s.enableItem=function(e){var t=!1;return this.isReady()&&(t=this.slider.enableSlide(e)),t},s.enableGroup=function(e){var t=!1;return this.isReady()&&(t=this.slider.enableGroupOfSlides(e)),t},s.disableGroup=function(e){var t=!1;return this.isReady()&&(t=this.slider.disableGroupOfSlides(e)),t},s.switchGroup=function(e){var t=!1;return this.isReady()&&(t=this.slider.switchGroupOfSlides(e)),t},s.jump=function(e){var t=!1;return this.isReady()&&(t=this.slider.jump(e)),t},s.next=function(){var e=!1;return this.isReady()&&(e=this.slider.jump("next")),e},s.prev=function(){var e=!1;return this.isReady()&&(e=this.slider.jump("prev")),e},s.fullscreen=function(){var e=!1;return this.isReady()&&(e=this.isFullscreen()?this.slider.exitFullScreen():this.slider.enterFullScreen()),e},s.child=function(e){var t,i=this,s=null;return this.isReady()&&(t=e,"number"!==y.typeOf(t)&&"string"!==y.typeOf(t)&&(t=null),e=t,(s=this.slider.getSlide(e))&&(s.parent=function(){return i.api})),s},s.play=function(e){var t=!1;return this.isReady()&&(t=this.slider.play(e)),t},s.pause=function(){var e=!1;return this.isReady()&&(e=this.slider.pause()),e},s.sortItems=function(e){this.isReady()&&this.slider.sortItems(e)},s.isEqual=function(e){return e===this.node},s.checkReadiness=function(e,t){var i=!1;return this.isReady()&&(i=this.slider.checkReadiness(e,t)),i},s.sendEvent=function(e,t){this.isReady()&&this.slider.sendReadyEvent(e,t)},i}(r)}));var w=window,_Sirv={items:{},eventManager:null,options:{}},isLazyImage=!0,baseModules=["bHelpers","magicJS","globalVariables","globalFunctions","EventManager","helper","Slider"];isLazyImage&&baseModules.push("LazyImage"),w.Sirv.require(baseModules,(function(e,t,i,s,n,o,r,a){var l=t,d=function(e,t,i){var s=[],n=null,o=_Sirv.items[t];return o.length&&e&&(n=function(e,t){var i=e;return"string"===l.typeOf(i)&&(i=(t||document).querySelector(i)),l.$(i)}(e,i),n&&(s=o.filter((function(e){return e.node===n})))),s.length?s[0]:null},c=function(e,t){return t||(t=document),"collection"===l.typeOf(e)?e:["element","magicjs-element"].includes(l.typeOf(e))?[e]:Array.from((l.$(t).node||t).querySelectorAll(e||".Sirv"))},h=function(e){var t=null;return(e=l.$(e)).hasClass("Sirv")&&(t="img"===e.tagName||e.attr("data-bg-src")||e.getCss("background-image")&&"none"!==e.getCss("background-image")?"image":"viewer"),t};_Sirv.items.image=[],_Sirv.items.viewer=[],_Sirv.start=function(e,t,i,n){var u=!1;"boolean"===l.typeOf(e)&&(u=e,e=void 0),Array.from(c(e,t)).forEach((function(e){var t=l.$(e);if(e&&t.hasClass("Sirv")){var c=h(t.node);if(i&&i!==c&&(c=null),_Sirv.options.common=o.deepExtend({},l.W.node.SirvOptions||{}),_Sirv.options.mobile=o.deepExtend({},l.W.node.SirvMobileOptions||{}),c&&["image","viewer"].includes(c)){if(!n&&function(e,t){var i=!1,s=t;return"image"===s&&(s="lazyImage"),e.common[s]&&(!1===e.common[s].autostart||["false","off"].includes(e.common[s].autostart))&&(i=!0),!i&&l.browser.touchScreen&&l.browser.mobile&&e.mobile[s]&&(!1===e.mobile[s].autostart||["false","off"].includes(e.mobile[s].autostart))&&(i=!0),i}(_Sirv.options,c))return;var p=d(t.node,c);if(p)p.startFullInit(Object.assign({},_Sirv.options),n,u);else switch(c){case"image":isLazyImage?(s.rootDOM.attachNode(e),s.rootDOM.resetGlobalCSS(e),(p=new a(t.node,{options:{common:o.deepExtend({},_Sirv.options.common.lazyImage||{}),mobile:o.deepExtend({},_Sirv.options.mobile.lazyImage||{})}},n)).isRun?(_Sirv.items.image.push(p),p.parentClass=_Sirv.eventManager):s.rootDOM.detachNode(e)):console.info("Sirv: Image component wasn't found.");break;case"viewer":s.rootDOM.attachNode(e),s.rootDOM.addMainStyle(e),(p=new r(t,Object.assign({},_Sirv.options),n,u)).isRun?(_Sirv.items.viewer.push(p),p.parentClass=_Sirv.eventManager):s.rootDOM.detachNode(e)}}}}))},_Sirv.stop=function(e,t,i){var s=["image","viewer"];i&&(s=[i]),s.forEach((function(i){e||t?Array.from(c(e,t)).forEach((function(e){var t=d(e,i);t&&t.stop()&&_Sirv.items[i].splice(_Sirv.items[i].indexOf(t),1)})):_Sirv.items[i]=_Sirv.items[i].filter((function(e){return!e.stop(!0)}))}))},_Sirv.getInstance=function(e,t,i){var s=d(e,t,i);return s?s.api:s},_Sirv.eventManager=new n(_Sirv.items),_Sirv.addFilterCallback=function(e,t){t?s.viewerFilters.unshift(e):s.viewerFilters.push(e)},_Sirv.removeFilterCallback=function(e){var t=[];s.viewerFilters.forEach((function(i){i!==e&&t.push(i)})),s.viewerFilters=t},_Sirv.removeAllFilterCallback=function(){s.viewerFilters=[]},s.stop=function(e,t){return _Sirv.stop(e,null,t)};var u=function(){var e={added:[],removed:[]},t=o.debounce((function(){var t=e.added.splice(0),i=e.removed.splice(0);t.forEach((function(e){(e=l.$(e)).node&&3!==e.node.nodeType&&8!==e.node.nodeType&&e.node.getElementsByClassName&&(e.hasClass("Sirv")?_Sirv.start(e,null,h(e)):s.rootDOM.rootContains(e.node)&&function(e){return e.closest?!e.closest("div.Sirv"):"trident"===l.browser.engine}(e.node)&&_Sirv.start(null,e))}));var n=[];i.forEach((function(e){(e=l.$(e)).node&&3!==e.node.nodeType&&8!==e.node.nodeType&&e.node.getElementsByClassName&&(e.hasClass("Sirv")?n.push(e):[].push.apply(n,e.node.getElementsByClassName("Sirv"))),n.forEach((function(e){if(e=l.$(e),!l.D.node.body.contains(e.node))try{_Sirv.stop(e,null,h(e))}catch(e){}}))}))}),250);l.W.node.MutationObserver&&new MutationObserver((function(i,s){for(var n=0,o=i.length;n<o;n++)"childList"===i[n].type&&([].push.apply(e.added,i[n].addedNodes),[].push.apply(e.removed,i[n].removedNodes));t()})).observe(l.D.node.body,{childList:!0,subtree:!0,attributes:!1})};s.rootDOM.resetGlobalCSS(),s.iconsHash.make(),"loading"===l.D.node.readyState&&_Sirv.start(!0),l.D.addEvent("domready",(function(){_Sirv.start(),u()}))}));var sayDeprecated=function(e){console.log("sirv.js: The method Sirv"+e+".refresh() is deprecated. \r\n         Use Sirv"+e+".stop() and Sirv"+e+".start() instead.")};w.Sirv.version="[[SirvJS_version]]",w.Sirv.build="[[build_datetime]]",w.Sirv.options={},w.Sirv.lazyimage={start:function(e,t){_Sirv.start(e,t,"image",!0)},stop:function(e,t){_Sirv.stop(e,t,"image")},getInstance:function(e,t){var i=null;return _Sirv.getInstance&&(i=_Sirv.getInstance(e,"image",t)),i},refresh:function(){sayDeprecated(".image")},on:function(e,t){return w.Sirv.on(e,t)},off:function(e,t){return w.Sirv.off(e,t)}},w.Sirv.viewer={start:function(e,t){_Sirv.start(e,t,"viewer",!0)},stop:function(e,t){_Sirv.stop(e,t,"viewer")},getInstance:function(e,t){var i=null;return _Sirv.getInstance&&(i=_Sirv.getInstance(e,"viewer",t)),i},refresh:function(){sayDeprecated(".viewer")},on:function(e,t){return w.Sirv.on(e,t)},off:function(e,t){return w.Sirv.off(e,t)},filters:{add:function(e,t){_Sirv.addFilterCallback(e,t)},remove:function(e){_Sirv.removeFilterCallback(e)},removeAll:function(){_Sirv.removeAllFilterCallback()}}},w.Sirv.start=function(e,t){_Sirv.start(e,t,null,!0)},w.Sirv.stop=function(e,t){_Sirv.stop(e,t)},w.Sirv.getInstance=function(e,t,i){var s=null;_Sirv.getInstance&&(s=("lazyimage"===t?w.Sirv.lazyimage:w.Sirv.viewer).getInstance(e,i));return s},w.Sirv.refresh=function(){sayDeprecated("")},w.Sirv.on=function(e,t){return _Sirv.eventManager.addEvent(e,t)},w.Sirv.off=function(e,t){return _Sirv.eventManager.removeEvent(e,t)},w.Sirv.whenReady=function(e){return e()},w.Sirv.whenLoaded=function(e){return e()};