{"version":3,"sources":["../classes/hint.js"],"names":["Sirv","define","bHelpers","magicJS","globalVariables","globalFunctions","helper","moduleName","$J","$","rootDOM","addModuleCSSByName","HintInstance","parent","options","extend","html","showClass","additionalClass","autohide","instanceNode","$new","addClass","hintContainer","inDoc","isShown","timer","node","innerHTML","append","getAutoHideTime","getActionTime","result","value","getCss","split","e","trim","test","parseFloat","parseInt","getMovingTime","removeEvent","show","clearTimeout","getSize","setTimeout","hide","addEvent","stop","remove","removeClass","destroy","setCssProp"],"mappings":"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","sourcesContent":["Sirv.define(\n    'Hint',\n    ['bHelpers','magicJS','globalVariables','globalFunctions','helper'],\n    (bHelpers,magicJS,globalVariables,globalFunctions,helper) => {\n        const moduleName = 'Hint';\n        \n        const $J = magicJS;\n        const $ = $J.$;\n        \n        \n        /* start-removable-module-css */\n        globalFunctions.rootDOM.addModuleCSSByName(moduleName, () => {\n            return '.sirv-hint{position:absolute;display:inline-block;top:50%;left:0;width:100%;transform:translate3d(0,-50%,1px);transition:opacity .3s linear;text-align:center;opacity:0;z-index:42;pointer-events:none;-webkit-font-smoothing:antialiased}.sirv-hint.show{opacity:1}.sirv-hint-message{position:relative;display:inline-block;padding:.35em 1.5em;border-radius:2px;background:rgba(55,58,60,.8);color:#fff;font:normal 16px/1.5 \\'Lucida Grande\\',\\'Lucida Sans Unicode\\',Verdana,\\'Helvetica Neue\\',Arial,Helvetica,sans-serif;text-decoration:none}';\n        });\n        /* end-removable-module-css */\n        \n        /* eslint-env es6 */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\n// eslint-disable-next-line no-unused-vars\nclass HintInstance {\n    constructor(parent, options) {\n        this.parent = $(parent);\n\n        this.options = $J.extend({\n            html: 'hint',\n            showClass: 'show',\n            additionalClass: null,\n            autohide: 3500\n        }, options || {});\n\n        this.instanceNode = $J.$new('div').addClass('sirv-hint');\n        this.hintContainer = $J.$new('span').addClass('sirv-hint-message');\n\n        this.inDoc = false;\n        this.isShown = false;\n        this.timer = null;\n\n        this.instanceNode.addClass(this.options.additionalClass);\n        this.hintContainer.node.innerHTML = this.options.html;\n\n        this.instanceNode.append(this.hintContainer);\n    }\n\n    getAutoHideTime() {\n        return this.options.autohide;\n    }\n\n    getActionTime() {\n        let result = 0;\n        let value = this.instanceNode.getCss('transition');\n\n        try {\n            value = value.split(' ')[1];\n        } catch (e) {\n            value = 0;\n        }\n\n        if (value) {\n            value = value.trim();\n\n            if (/m?s$/.test(value)) {\n                if (/s$/.test(value)) {\n                    result = parseFloat(value);\n                    result *= 1000;\n                } else {\n                    result = parseInt(value, 10);\n                }\n            }\n        }\n\n        return result;\n    }\n\n    getMovingTime() {\n        return this.getAutoHideTime() + this.getActionTime();\n    }\n\n    append() {\n        if (!this.inDoc) {\n            this.inDoc = true;\n            this.parent.append(this.instanceNode);\n        }\n    }\n\n    removeEvent() { this.instanceNode.removeEvent('transitionend'); }\n\n    show() {\n        this.append();\n        clearTimeout(this.timer);\n        this.timer = null;\n        this.instanceNode.getSize(); // render\n        this.removeEvent();\n        this.instanceNode.addClass(this.options.showClass);\n        this.isShown = true;\n\n        if (this.options.autohide) {\n            this.timer = setTimeout(() => {\n                this.hide();\n            }, this.options.autohide);\n        }\n    }\n\n    hide() {\n        if (this.inDoc) {\n            this.removeEvent();\n            clearTimeout(this.timer);\n            this.timer = null;\n            this.instanceNode.addEvent('transitionend', (e) => {\n                e.stop();\n                this.removeEvent();\n                this.inDoc = false;\n                this.instanceNode.remove();\n            });\n\n            this.instanceNode.removeClass(this.options.showClass);\n            this.isShown = false;\n        }\n    }\n\n    destroy() {\n        this.instanceNode.setCssProp('transitionend', 'none');\n        this.hide();\n        this.removeEvent();\n        this.hintContainer.remove();\n        this.hintContainer.node.innerHTML = '';\n        this.instanceNode.remove();\n        this.inDoc = false;\n    }\n}\n\nreturn HintInstance;\n\n    }\n);\n"],"file":"hint.js"}