{"version":3,"sources":["../classes/imagezoom.js"],"names":["Sirv","define","bHelpers","magicJS","globalVariables","globalFunctions","helper","EventEmitter","moduleName","$J","$","rootDOM","addModuleCSSByName","CURSOR_STATES","canZoom","zoomIn","zoomOut","drag","TOUCH","TOUCHEND","isIe","MOVE","getPercentValue","value","percent","getDifference","bigValue","smallValue","checkImagePosition","minPos","maxPos","lensSize","getPercent","size","checkRange","min","max","calcScale","baseSize","currentSize","getLevels","minSize","maxSize","levelsNumber","Math","round","log","width","height","LN2","levelWidth","levelHeight","result","push","parseInt","ZoomHelper","options","o","extend","maxTileSize","minTileSize","inDoc","container","$new","addClass","header","zoom","tileSize","levels","_createHead","tmp","innerHTML","append","setZoom","_calcSizeOfTile","levelSize","getSize","sizeOfPart","aspectRatio","w","h","_createTile","c","r","isLast","s","checkSize","l","t","cols","rows","node","setCss","top","left","currentClass","col","row","_show","level","D","body","setCssProp","W","innerHeight","_setItemClass","_class","tile","tiles","removeClass","length","createLevel","createTiles","i","j","arr","arr2","head","statusContainer","last","number","status","tileAction","data","type","setLevelState","levelID","setData","defined","levelStatus","destroy","remove","inneHTML","DeepZoom","Camera","isInner","inner","lengthOfRow","lengthOfColumn","cameraWidth","cameraHeight","bMapS","mapWidth","mapHeight","bTileS","tileWidth","tileHeight","bScale","x","scaleX","y","scaleY","mapS","tileS","baseLastTileSize","lastTileSize","position","lastCorrectionPosition","scale","lastScale","lastGlobaslScale","count","calcCount","shownTiles","startX","countX","startY","countY","getTileIndex","floor","getTileSize","checkTile","st","ceil","findShownTiles","p","ts","abs","calcTileSize","calcData","setScale","action","resize","viewPort","setMapS","undefined","getShownTiles","getMapS","TILE_STATES","NOT_LOADED","LOADING","LOADED","Tile","id","index","indexX","indexY","storage","state","has","get","isLoaded","addImageToStorage","set","load","emit","cancelLoading","setImage","LevelView","parent","dppx","cvs","ctx","getContext","setIndex","attr","show","hide","clear","clearRect","draw","moveX","moveY","setTransform","drawTile","tileNode","tilePosition","browser","uaName","drawImage","setCanvasSize","TILES_HASH_STORAGE","Map","getCorrectedTileSize","Level","view","mSize","maxWidth","maxHeight","tSize","tileImageSize","tileImageWidth","tileImageHeight","layerSize","layerWidth","layerHeight","hash","scaleFactor","maxDisplayedSize","maxDisplayedWidth","maxDisplayedHeight","minDisplayedSize","minDisplayedWidth","minDisplayedHeight","globalScale","globalPosition","setLensSize","viewPortWidth","viewPortHeight","isAdded","isShown","calcTiles","countOfTiles","loadedTiles","camera","zoomHelper","setEvents","on","e","imageSettings","cancelLoadingOfTiles","forEach","imageData","l1","l2","setParent","correctDPPXPosition","pos","imageSize","center","eachTile","callback","mapSize","v1","v2","v3","v4","loadImages","cameraSize","off","ZoomView","parentNode","classPrefix","getContainer","ZoomController","minZoomFactor","upscale","setDefaultVars","convertScaleToSize","setHash","url","getHashCode","originSize","createLevels","calcTileImageSize","DPPX","_minSize","_maxSize","getDPPX","levelView","_level","controller","reverse","getCurrentShownLevel","getScale","direction","setMinSize","setMaxSize","originWidth","originHeight","DZoom","imageDPosition","dScale","Eye","View","hover","pn","className","ic","appendTo","img","bwImg","addEvent","stop","setContainerPosition","contains","getTagName","positon","getPosition","parentPosition","setImageSize","getContainerSize","setContainerSize","setInsideContainerSize","setInsideContainerFontSize","removeEvent","difference","a","b","getAnimationValue","step","Controller","pSize","timer","isPlaying","dPos","dSize","doAnimation","animate","dx","dy","dw","dh","setTimeout","stopAnimation","ds","clearTimeout","setSize","setPosition","ps","_x","_y","_Eye","prentNode","setEventToMainContainer","name","removeEventToMainContainer","clearEvents","getBoundaries","getBoundingClientRect","ZoomMap","lens","getRightPosition","rect","getRect","addDomEventToDocBody","eventName","removeDomEventToDocBody","addDomEventToLens","addDomEvent","changeCursor","removeEvents","setContainerCss","setLensCss","lensPosition","containerSize","setImg","src","srcset","removeEventTransitionEvent","opacity","transition","_e","force","_removeEventTransitionEvent","getOffset","oe","getOriginEvent","offsetX","offsetY","getTarget","targetTouches","pageX","pageY","betweenMinMax","APPEARANCE","HIDDEN","viewPortSize","bISize","cBISize","cBIPosition","ls","lp","clp","isDragMoved","setInTheCenter","getPercentPosition","cms","isInside","dragEndHandler","mouseOutHandler","event","relatedTarget","tagName","pageXY","getPageXY","offset","calcMap","imgWidth","imgHeight","zoomContainerWidth","zoomContainerHeight","cWidth","maxwidth","cHeight","maxheight","prepare","setLensPosition","bigImageTop","bigImageLeft","bis","ms","cm","vp","move","imgPos","imgTop","imgLeft","SHOWING","SHOWN","HIDING","_ZoomMap","findZoomNode","el","getElementsByTagName","cnv","zoomWrapper","isBody","image","perspective","mobile","platform","getHash","$J_UUID","getParentSize","getParentPostion","getZoomSize","getParentBoundaries","addScrollEvent","removeScrollEvent","addClassToWrapper","zoomType","removeEventFromMainContainer","args","setEventToWrapper","removeEventFromWrapper","addMouseoutEvent","toElement","getRelated","setLensContainer","lensContainer","toggleCursorClass","oldClass","newClass","setImagePosition","addStartCss","setLensStyle","transform","appendNodes","smallImg","stopDefaults","setEventNodePositionSize","parentContainer","styleObj","clearCss","removeAttr","clearDOM","InnerView","mouseMoveHandler","getContainerForMap","removeDragstart","del","addEventsCanvasClass","removeEventsCanvasClass","getContainerPosition","addGlobalEvent","removeGlobalEvent","MagnifierView","OutsideView","getImageForEye","cloneNode","getNodeForEye","setCanvasNodeSize","start","addMouseMoveEvent","removeMouseMoveEvent","AnimationLoop","STATES","STOPPED","STARTED","_Animation","stopCallback","cb","stopCb","lastTime","requestAnimationFrame","cancelAnimationFrame","test","pan","smoothing","customZooming","clickBehavior","trigger","baseScale","iSize","iPos","iDPos","pPos","anim","animCb","animStep","lastAnimTimer","deepZoom","deepZoomTimer","lensHalfSize","currentLensSize","zoomNodeSize","boundaries","ANIM_STEP","nonDeepZoomImageLevels","scrollHandler","init","getSizes","createDeepZoom","createAnimation","stopAll","stopEmptyEvent","isShowing","deepZoomAction","equals","newSize","stopMovingAndZooming","checkScale","sett","diffX","diffY","isChanged","xScaleWasClosed","yScaleWasClosed","sendZoomingAction","render","correctX","correctY","setXY","getZoomData","getNextMinZoom","getNextMaxZoom","is","cw","ch","basePercentOfScale","afterZoom","setCursorState","zoomUp","zoomDown","zoomingTimer","from","to","bind","currentCursorState","_data","callbackData","setSizeOfLens","calcSizeOfLens","cls","getBaseScale","calcPositionOfLens","getImagePosition","showDeepZoom","bigImageOriginWidth","bigImageOriginHeight","endOfShowing","isWithoutSettingEvents","sendZoomShownEvent","clientPosition","pagePosition","showCenter","largeImg","toLevel","endOfHiding","hideTimer","setUpEvent","addClickEvent","customMove","afterMove","setLensStyleOnResize","onResize","InnerController","outOfSquare","checkedPoint","nodePos","nodeSize","scrollPosition","IController","map","clonedImage","showTimer","innerImagePosition","createZoomMap","mWidth","mHeight","exactSize","calcPositionOfImageInCenter","calcPositionOfImage","calcPositionOfImageForPinch","imagePosition","first","sw","sh","setBasePercent","point","bigImageOptions","actionEndHide","addMouseScrollEvent","delta","isMouse","v","deltaFactor","hideByTimer","addInnerTouchDrag","lastX","lastY","currentWidth","currentHeight","addInnerPinch","startScale","saveValue","maxCompensation","minCompensation","centerPoint","hideZoomByMouseOut","getClientXY","getScroll","pointerType","keepOldPosition","oldLensSize","MagnifierController","MIN_SIZE_OF_LENS","MAX_SIZE_OF_LENS","DEFAULT_MAGNIFIER_SIZE","DEFAULT_MOBILE_MAGNIFIER_ZOOM_MARGIN","checkMinMax","factor","MController","margin","isSquare","getPercentSize","scroll","ws","pp","side","addMouseScroollEvent","addMouseOverEvent","addMouseOutEvent","addDragEvent","addTapEvent","changeLensSize","hasOwnProperty","call","eventsCanvasNode","right","bottom","OutsideController","DEFAULT_OUTSIDE_ZOOM_MARGIN","OController","outsidePosition","showingParams","eye","mouseOut","setEyesParams","getShowingPropertiesToOutsideMode","end","addOutsideTouchDrag","touchScreen","setMouseScrollEvent","isStart","ImageZoom"],"mappings":"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","sourcesContent":["Sirv.define(\n    'ImageZoom',\n    ['bHelpers','magicJS','globalVariables','globalFunctions','helper','EventEmitter'],\n    (bHelpers,magicJS,globalVariables,globalFunctions,helper,EventEmitter) => {\n        const moduleName = 'ImageZoom';\n        \n        const $J = magicJS;\n        const $ = $J.$;\n        \n        \n        /* start-removable-module-css */\n        globalFunctions.rootDOM.addModuleCSSByName(moduleName, () => {\n            return '.sirv-zoom{position:absolute;-webkit-backface-visibility:hidden!important;backface-visibility:hidden!important;-webkit-touch-callout:none!important;-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important;outline:0!important;z-index:999999999;touch-action:none;-webkit-tap-highlight-color:transparent!important}.sirv-zoom .sirv-outside-zoom{background:#fff;box-shadow:0 0 3px rgba(153,153,153,.5)}.sirv-zoom .sirv-circle-zoom{border:0;border-radius:100%;background:rgba(255,255,255,.3)}.sirv-zoom .sirv-circle-zoom::before{position:absolute;display:block;top:0;right:0;bottom:0;left:0;border:1px solid rgba(153,153,153,.7);border-radius:100%;background:0 0;box-shadow:inset 0 0 20px 1px rgba(0,0,0,.3);content:\\'\\';z-index:126}.sirv-zoom .sirv-zoom-wrapper{position:absolute;display:inline-block;overflow:hidden;z-index:9}.sirv-zoom .sirv-zoom-wrapper .sirv-zoom-image-wrapper{position:absolute;overflow:hidden}.sirv-zoom .sirv-zoom-wrapper .sirv-zoom-image-wrapper>img{position:absolute;top:0;left:0;margin:0;padding:0;-webkit-user-drag:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;user-drag:none}.sirv-zoom .sirv-zoom-wrapper .sirv-deepzoom{position:relative;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:42}.sirv-zoom .sirv-zoom-wrapper .sirv-deepzoom>div{position:absolute;top:0;left:0;width:100%;height:100%}.sirv-zoom .sirv-zoom-wrapper .sirv-deepzoom>div canvas{top:0;left:0}.zoom-helper{position:fixed;border-radius:4px;display:inline-block;top:10px;right:10px;padding:10px;border:1px solid #ccc9c9;background-color:#eaeaea;box-shadow:1px 1px 9px 1px rgba(0,0,0,.5);overflow:hidden;z-index:999;overflow-y:auto}.zoom-helper .z-loaded-color{background-color:#87bd89!important}.zoom-helper .z-loading-color{background-color:#a99cef!important}.zoom-helper .z-canceled-color{background-color:#f19c9c!important}.zoom-helper .z-helper-head{margin-bottom:9px}.zoom-helper .z-body,.zoom-helper .z-head,.zoom-helper .z-level{position:relative}.zoom-helper .z-level{border-radius:4px;margin-bottom:9px;padding:10px;background-color:#d4d3d3;box-sizing:border-box}.zoom-helper .z-head{margin-bottom:9px}.zoom-helper .z-body{border-top:1px solid;border-left:1px solid}.zoom-helper .z-tile{position:absolute;display:inline-block;border-right:1px solid;border-bottom:1px solid;box-sizing:border-box}.zoom-helper .z-status{border-radius:50%;display:inline-block;width:10px;height:10px;margin-left:10px;background-color:#e87979;box-sizing:border-box}.zoom-helper .z-status.shown{background-color:#66ca66!important}.sirv-zoom-map{position:absolute;box-sizing:border-box;bottom:16px;left:16px;width:200px;height:150px;border:1px solid #bdbdbd;overflow:hidden;z-index:126;cursor:pointer}.sirv-zoom-map .sirv-zoom-map-lens{position:absolute;box-sizing:border-box;top:50px;left:50px;width:50px;height:50px;border:1px solid #fff;z-index:42}.sirv-zoom-map .sirv-zoom-map-lens::after,.sirv-zoom-map .sirv-zoom-map-lens::before{position:absolute;display:block;width:100%;height:100%;content:\\'\\'}.sirv-zoom-map .sirv-zoom-map-lens::before{box-sizing:content-box;border-width:1em;border-style:solid;border-color:rgba(0,0,0,.6);-o-border-image:initial;border-image:initial;top:-1em;left:-1em}.sirv-zoom-map .sirv-zoom-map-lens::after{box-sizing:border-box;border-width:1px;border-style:solid;border-color:#fff;-o-border-image:initial;border-image:initial}.sirv-zoom-map>img{position:relative;top:0;left:0;width:100%;height:100%}.sirv-zoom-lens,.sirv-zoom-lens-wrapper{position:absolute;top:0;left:0}.sirv-zoom-lens-wrapper{background-color:rgba(153,153,153,.4);overflow:hidden;z-index:9999999999}.sirv-zoom-lens{box-shadow:0 0 3px rgba(153,153,153,.5);overflow:hidden}.sirv-zoom-lens img{max-width:none!important;max-height:none!important;transition:none!important}.sirv-filter-bw{filter:grayscale(.5) opacity(.5);filter:url(\"data:image/svg+xml;utf8,<svg xmlns=\\'http://www.w3.org/2000/svg\\'><filter id=\\'grayscale\\'><feColorMatrix type=\\'saturate\\' values=\\'0\\'/><feComponentTransfer><feFuncA type=\\'linear\\' slope=\\'0.6\\'/></feComponentTransfer></filter></svg>#grayscale\")}';\n        });\n        /* end-removable-module-css */\n        \n        /* eslint-env es6 */\n/* global helper */\n/* eslint-disable no-unused-vars */\n\nconst CURSOR_STATES = {\n    canZoom: 'smv-cursor-zoom',\n    zoomIn: 'smv-cursor-zoom-in',\n    zoomOut: 'smv-cursor-zoom-out',\n    drag: 'smv-cursor-dragging'\n};\n\nconst TOUCH = 'mousedrag touchdrag';\nconst TOUCHEND = helper.isIe() ? 'pointerup' : 'touchend';\n\nlet MOVE = 'mousemove';\nif (helper.isIe()) {\n    MOVE = 'pointermove';\n}\n\nconst getPercentValue = (value, percent) => { return value / 100 * percent; };\n\nconst getDifference = (bigValue, smallValue) => { return (bigValue - smallValue) / 2; };\n\nconst checkImagePosition = (value, minPos, maxPos, lensSize) => {\n    if (value > minPos) { value = minPos; }\n    if (value + maxPos < lensSize) { value = lensSize - maxPos; }\n    return value;\n};\n\nconst getPercent = (value, size) => { return value / size * 100; };\n\nconst checkRange = (value, min, max) => {\n    if (value < min) { value = min; }\n    if (value > max) { value = max; }\n    return value;\n};\n\nconst calcScale = (baseSize, currentSize) => { return currentSize / baseSize; };\n\nconst getLevels = (minSize, maxSize) => {\n    let levelsNumber = Math.max(1, Math.round(Math.log(Math.max(maxSize.width / minSize.width, maxSize.height / minSize.height)) / Math.LN2));\n    let levelWidth = maxSize.width;\n    let levelHeight = maxSize.height;\n\n    const result = [];\n    while (levelsNumber > 0) {\n        levelsNumber -= 1;\n        result.push({\n            width: levelWidth,\n            height: levelHeight\n        });\n\n        levelWidth = parseInt(levelWidth / 2, 10);\n        levelHeight = parseInt(levelHeight / 2, 10);\n    }\n\n    return result;\n};\n\n/* eslint-env es6 */\n/* global EventEmitter */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n/* eslint class-methods-use-this: [\"off\", { \"_setItemClass\": [\"error\"] }] */\n\n\n/* start-removable-tile-helper-block */\n\n// eslint-disable-next-line no-unused-vars\nclass ZoomHelper extends EventEmitter {\n    constructor(options) {\n        super();\n        this.o = $J.extend({\n            maxTileSize: 15,\n            minTileSize: 5\n        }, options || {});\n\n        this.inDoc = false;\n        this.container = $J.$new('div').addClass('zoom-helper');\n        this.header = $J.$new('div').addClass('z-helper-head');\n        this.zoom = $J.$new('span').addClass('z-zoom');\n\n        this.tileSize = { width: 0, height: 0 };\n        this.levels = {};\n    }\n\n    _createHead() {\n        let tmp = $J.$new('div');\n        tmp.innerHTML = 'Zoom: ';\n        tmp.append(this.zoom);\n        this.setZoom(0);\n        this.header.append(tmp);\n\n        tmp = $J.$new('div');\n        tmp.innerHTML = '<div class=\"z-status z-canceled-color\"></div> - canceled';\n        this.header.append(tmp);\n\n        tmp = $J.$new('div');\n        tmp.innerHTML = '<div class=\"z-status z-loading-color\"></div> - loading';\n        this.header.append(tmp);\n\n        tmp = $J.$new('div');\n        tmp.innerHTML = '<div class=\"z-status z-loaded-color\"></div> - loaded';\n        this.header.append(tmp);\n    }\n\n    _calcSizeOfTile(levelSize) {\n        const getSize = (sizeOfPart, aspectRatio) => {\n            let result = parseInt(sizeOfPart * aspectRatio, 10);\n\n            if (result < this.o.minTileSize) {\n                result = this.o.minTileSize;\n            }\n\n            return result;\n        };\n\n        let w;\n        let h;\n\n        if (levelSize.width > levelSize.height) {\n            w = this.o.maxTileSize;\n            h = getSize(w, levelSize.height / levelSize.width);\n        } else {\n            h = this.o.maxTileSize;\n            w = getSize(h, levelSize.width / levelSize.height);\n        }\n\n        return {\n            width: w,\n            height: h\n        };\n    }\n\n    _createTile(c, r, options) {\n        const getSize = (isLast, size) => {\n            return isLast ? ((() => {\n                let s = parseInt(size / 2, 10);\n                if (s < 3) { s = 3; }\n                return s;\n            })()) : size;\n        };\n        const checkSize = (l, t) => { return l % t < t / 2; };\n        const w = getSize(options.cols - 1 === c && checkSize(options.levelSize.width, options.tileSize.width), this.tileSize.width);\n        const h = getSize(options.rows - 1 === r && checkSize(options.levelSize.height, options.tileSize.height), this.tileSize.height);\n        const node = $J.$new('div').addClass('z-tile');\n\n        node.setCss({\n            top: (r * this.tileSize.height) + 'px',\n            left: (c * this.tileSize.width) + 'px',\n            width: w + 'px',\n            height: h + 'px'\n        });\n\n        return {\n            currentClass: null,\n            width: w,\n            height: h,\n            col: c,\n            row: r,\n            node: node\n        };\n    }\n\n    _show(level) {\n        if (!level) { return; }\n\n        if (!this.inDoc) {\n            this.inDoc = true;\n            this._createHead();\n            this.container.append(this.header);\n            $($J.D.node.body).append(this.container);\n        }\n\n        if (!level.inDoc) {\n            level.inDoc = true;\n            this.container.append(level.node);\n\n            this.container.setCssProp('max-height', ($J.W.innerHeight - 55) + 'px');\n        }\n    }\n\n    _setItemClass(level, col, row, _class) {\n        const tile = level.tiles[row][col];\n\n        if (tile.currentClass !== _class) {\n            if (tile.currentClass) {\n                tile.node.removeClass(tile.currentClass);\n            }\n            tile.currentClass = _class;\n            tile.node.addClass(_class);\n        }\n    }\n\n    setZoom(zoom) {\n        // zoom = zoom + '';\n        zoom += '';\n        if (zoom.length < 2) { zoom += '.0'; }\n        this.zoom.innerHTML = zoom;\n    }\n\n    createLevel(options) {\n        const node = $J.$new('div').addClass('z-level');\n        const body = $J.$new('div').addClass('z-body');\n\n        const createTiles = (cols, rows) => {\n            let i;\n            let j;\n            const arr = [];\n\n            for (j = 0; j < rows; j++) {\n                const arr2 = [];\n                for (i = 0; i < cols; i++) {\n                    const tile = this._createTile(i, j, options);\n                    body.append(tile.node);\n                    arr2.push(tile);\n                }\n                arr.push(arr2);\n            }\n\n            return arr;\n        };\n\n        const head = $J.$new('div').addClass('z-head');\n        const statusContainer = $J.$new('div').addClass('z-status');\n\n        let tmp = $J.$new('div');\n        tmp.innerHTML = 'Level: ' + options.level;\n        head.append(tmp);\n\n        tmp = $J.$new('div');\n        tmp.innerHTML = 'Shown:';\n        tmp.append(statusContainer);\n        head.append(tmp);\n\n        tmp = $J.$new('div');\n        tmp.innerHTML = options.levelSize.width + 'x' + options.levelSize.height;\n        head.append(tmp);\n\n        node.append(head);\n        node.append(body);\n\n        if (!this.tileSize.width) {\n            this.tileSize = this._calcSizeOfTile(options.levelSize);\n        }\n\n        const tiles = createTiles(options.cols, options.rows);\n\n        const last = tiles[options.rows - 1][options.cols - 1];\n\n        body.setCss({\n            width: ((options.cols - 1) * this.tileSize.width + last.width) + 'px',\n            height: ((options.rows - 1) * this.tileSize.height + last.height) + 'px'\n        });\n\n        this.levels[options.level] = {\n            inDoc: false,\n            number: options.level,\n            status: statusContainer,\n            node: node,\n            head: head,\n            body: body,\n            tiles: tiles\n        };\n\n        // this._show(this.levels[options.level]);\n    }\n\n    tileAction(data) {\n        const level = this.levels[data.level + ''];\n        let _class;\n        switch (data.type) {\n            case 0: // canceled\n                _class = 'z-canceled-color';\n                break;\n            case 1: // loading\n                _class = 'z-loading-color';\n                break;\n            case 2: // loaded\n                _class = 'z-loaded-color';\n                break;\n            // no default\n        }\n\n        this._setItemClass(level, data.col, data.row, _class);\n    }\n\n    setLevelState(levelID, value) {\n        const level = this.levels[levelID + ''];\n        const _class = 'shown';\n\n        if (value) {\n            if (level.inDoc) {\n                level.status.addClass(_class);\n            }\n        } else {\n            level.status.removeClass(_class);\n        }\n    }\n\n    setData(data) {\n        let level;\n\n        if ($J.defined(data.level)) {\n            level = this.levels[data.level + ''];\n        }\n\n        if (level) { this._show(level); }\n\n        if (data.zoom) {\n            this.setZoom(data.zoom);\n        }\n\n        if (level) {\n            if ('col' in data) {\n                this._setItemClass(level, data.col, data.row, 'z-loaded-color');\n            }\n        }\n\n        if (level && $J.defined(data.levelStatus)) {\n            this.setLevelState(data.level, data.levelStatus);\n        }\n    }\n\n    destroy() {\n        if (this.inDoc) {\n            this.inDoc = false;\n\n            this.zoom.remove();\n            this.zoom.inneHTML = '';\n\n            this.header.remove();\n            this.header.inneHTML = '';\n\n            this.container.remove();\n            this.container.inneHTML = '';\n\n            this.levels = {};\n            this.tileSize = { width: 0, height: 0 };\n        }\n        super.destroy();\n    }\n}\n\n/* end-removable-tile-helper-block */\n\nconst DeepZoom = (() => {\n/* eslint-env es6 */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\n// eslint-disable-next-line no-unused-vars\nclass Camera {\n    constructor(options) {\n        this.isInner = options.inner;\n        // lengthOfRow\n        this.rows = options.lengthOfRow;\n        // lengthOfColumn\n        this.cols = options.lengthOfColumn;\n\n        this.size = { width: options.cameraWidth, height: options.cameraHeight };\n\n        // baseMapSize\n        this.bMapS = { width: options.mapWidth, height: options.mapHeight };\n\n        // baseTileSize\n        this.bTileS = { width: options.tileWidth, height: options.tileHeight };\n\n        // baseScale\n        this.bScale = { x: options.scaleX, y: options.scaleY };\n\n        // mapSize\n        this.mapS = { width: this.bMapS.width, height: this.bMapS.height };\n\n        // tileSize\n        this.tileS = { width: this.bTileS.width, height: this.bTileS.height };\n\n        this.baseLastTileSize = {\n            width: this.bMapS.width - (this.cols - 1) * this.bTileS.width,\n            height: this.bMapS.height - (this.rows - 1) * this.bTileS.height\n        };\n\n        this.lastTileSize = { width: this.baseLastTileSize.width, height: this.baseLastTileSize.height };\n\n        this.position = { x: 0, y: 0 };\n        this.lastCorrectionPosition = { x: 0, y: 0 };\n        this.scale = { x: 0, y: 0 };\n        this.lastScale = 0;\n        this.lastGlobaslScale = 0;\n\n        this.count = { x: 0, y: 0 };\n        this.calcCount();\n\n        this.shownTiles = { startX: 0, countX: this.count.x, startY: 0, countY: this.count.y };\n    }\n\n    static getTileIndex(position, tileSize) { return Math.floor(position / tileSize); }\n    static getTileSize(size, scale) { return size * scale; }\n\n    checkTile(x, y) {\n        const st = this.shownTiles;\n        return st.startX <= x && st.startY <= y && st.startX + st.countX > x && st.startY + st.countY > y;\n    }\n\n    calcCount() {\n        this.count = {\n            x: Math.ceil(this.size.width / this.tileS.width) + 1,\n            y: Math.ceil(this.size.height / this.tileS.height) + 1\n        };\n    }\n\n    findShownTiles() {\n        const p = this.position;\n        const ts = this.tileS;\n        let startX = 0;\n        let startY = 0;\n        let countX = this.count.x;\n        let countY = this.count.y;\n\n        if (p.x < 0) { startX = Camera.getTileIndex(Math.abs(p.x), ts.width); }\n        if (p.y < 0) { startY = Camera.getTileIndex(Math.abs(p.y), ts.height); }\n\n        if (startX + countX > this.cols) { countX = this.cols - startX; }\n        if (startY + countY > this.rows) { countY = this.rows - startY; }\n\n        this.shownTiles = { startX: startX, countX: countX, startY: startY, countY: countY };\n    }\n\n    calcTileSize() {\n        this.tileS.width = Camera.getTileSize(this.bTileS.width, this.scale.x);\n        this.tileS.height = Camera.getTileSize(this.bTileS.height, this.scale.y);\n\n        this.lastTileSize.width = Camera.getTileSize(this.baseLastTileSize.width, this.scale.x);\n        this.lastTileSize.height = Camera.getTileSize(this.baseLastTileSize.height, this.scale.y);\n    }\n\n    calcData(position) {\n        if (this.lastScale !== this.scale.x) {\n            this.calcTileSize();\n            this.calcCount();\n\n            this.mapS.width = this.tileS.width * (this.cols - 1) + this.lastTileSize.width;\n            this.mapS.height = this.tileS.height * (this.rows - 1) + this.lastTileSize.height;\n\n            this.lastCorrectionPosition.x = (this.bMapS.width * this.bScale.x - this.mapS.width) / 2;\n            this.lastCorrectionPosition.y = (this.bMapS.height * this.bScale.y - this.mapS.height) / 2;\n\n            this.lastScale = this.scale.x;\n        }\n\n        this.position.x = position.x + this.lastCorrectionPosition.x;\n        this.position.y = position.y + this.lastCorrectionPosition.y;\n    }\n\n    setScale(scale) {\n        this.lastScale = this.scale.x;\n        this.scale.x = scale.x * this.bScale.x;\n        this.scale.y = scale.y * this.bScale.y;\n    }\n\n    action(position, scale) {\n        if (this.lastGlobaslScale !== scale.x) {\n            this.setScale(scale);\n            this.lastGlobaslScale = scale.x;\n        }\n\n        this.calcData(position);\n        this.findShownTiles();\n    }\n\n    resize(viewPort) {\n        this.size.width = viewPort.width;\n        this.size.height = viewPort.height;\n        this.calcCount();\n        this.findShownTiles();\n    }\n\n    setMapS(width, height) {\n        if (width !== null && width !== undefined) {\n            this.mapS.width = width;\n        }\n\n        if (height !== null && height !== undefined) {\n            this.mapS.height = height;\n        }\n    }\n\n    getShownTiles() {\n        return this.shownTiles;\n    }\n\n    getMapS() {\n        return this.mapS;\n    }\n\n    destroy() {\n        this.shownTiles = $([]);\n    }\n}\n\n/* eslint-env es6 */\n/* global Map */\n/* global EventEmitter */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\nconst TILE_STATES = {\n    NOT_LOADED: 0,\n    LOADING: 1,\n    LOADED: 2\n};\n\n// eslint-disable-next-line no-unused-vars\nclass Tile extends EventEmitter {\n    constructor(options) {\n        super();\n        this.id = options.id;\n        this.index = { x: options.indexX, y: options.indexY };\n        this.position = { x: options.x, y: options.y };\n        this.size = { width: options.width, height: options.height };\n        this.storage = options.storage;\n\n        this.state = TILE_STATES.NOT_LOADED;\n        this.node = null;\n\n        if (this.storage.has(this.id)) {\n            this.node = this.storage.get(this.id);\n            this.state = TILE_STATES.LOADED;\n        }\n    }\n\n    isLoaded() {\n        return this.state === TILE_STATES.LOADED;\n    }\n\n    addImageToStorage() {\n        if (!this.storage.has(this.id)) {\n            this.storage.set(this.id, this.node);\n        }\n    }\n\n    load() {\n        if (this.state === TILE_STATES.NOT_LOADED) {\n            this.state = TILE_STATES.LOADING;\n\n            this.emit('getTile', {\n                data: {\n                    indexX: this.index.x,\n                    indexY: this.index.y,\n                    number: this.id\n                }\n            });\n        }\n    }\n\n    cancelLoading() {\n        if (this.state === TILE_STATES.LOADING) {\n            this.state = TILE_STATES.NOT_LOADED;\n            this.emit('zoomCancelLoadingOfTiles', {\n                data: {\n                    indexX: this.index.x,\n                    indexY: this.index.y,\n                    number: this.id\n                }\n            });\n        }\n    }\n\n    setImage(node) {\n        if (this.state !== TILE_STATES.LOADED) {\n            this.state = TILE_STATES.LOADED;\n            this.node = $(node);\n            this.addImageToStorage();\n        }\n    }\n\n    destroy() {\n        this.cancelLoading();\n        this.storage = null;\n        super.destroy();\n    }\n}\n\n/* eslint-env es6 */\n\n\n// eslint-disable-next-line no-unused-vars\nclass LevelView {\n    constructor(parent, dppx) {\n        this.p = $(parent);\n\n        this.dppx = dppx;\n        // wrapper\n        this.w = $J.$new('div');\n        this.cvs = $J.$new('canvas');\n        this.ctx = this.cvs.node.getContext('2d');\n        this.w.append(this.cvs);\n    }\n\n    setIndex(index) {\n        this.w.addClass('deepzoom-level-' + index);\n        this.w.attr('z-index' + (index + 1));\n    }\n\n    append() {\n        this.p.append(this.w);\n    }\n\n    show() {\n        this.w.setCssProp('display', '');\n    }\n\n    hide() {\n        this.w.setCssProp('display', 'none');\n    }\n\n    clear() {\n        this.ctx.clearRect(0, 0, this.cvs.node.width, this.cvs.node.height);\n    }\n\n    draw(scale, moveX, moveY) {\n        this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n        this.clear();\n        this.ctx.setTransform(scale.x, 0, 0, scale.y, moveX, moveY);\n    }\n\n    drawTile(tileNode, tileSize, tilePosition) {\n        if ($J.browser.uaName === 'edge' || $J.browser.uaName === 'ie') {\n            if (this.dppx > 1) {\n                this.ctx.drawImage(tileNode.node, 0, 0, tileSize.width, tileSize.height, tilePosition.x, tilePosition.y, tileSize.width, tileSize.height);\n            } else {\n                this.ctx.drawImage(tileNode.node, tilePosition.x, tilePosition.y, tileSize.width, tileSize.height);\n            }\n        } else {\n            this.ctx.drawImage(tileNode.node, 0, 0, tileSize.width, tileSize.height, tilePosition.x, tilePosition.y, tileSize.width, tileSize.height);\n        }\n    }\n\n    setCanvasSize(width, height) {\n        this.cvs.setCss({ width: width, height: height });\n        this.cvs.attr('width', width * this.dppx);\n        this.cvs.attr('height', height * this.dppx);\n    }\n\n    destroy() {\n        this.cvs.remove();\n        this.w.remove();\n    }\n}\n\n/* eslint-env es6 */\n/* global Map, Camera, Tile, zoomHelper, EventEmitter */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\nconst TILES_HASH_STORAGE = new Map();\n\nconst getCorrectedTileSize = (value, dppx) => {\n    // return value * ((1 - (dppx - 1)) || 1);\n    // dppx -= 1;\n    // if (dppx <= 0) { dppx = 1; }\n    // return value * dppx;\n    return value / dppx;\n};\n\n// eslint-disable-next-line no-unused-vars\nclass Level extends EventEmitter {\n    constructor(view, options) {\n        super();\n        this.view = view;\n\n        this.id = options.id; // number of level\n        this.dppx = options.dppx;\n\n        this.size = { width: options.width, height: options.height }; // size of level image\n        // maxSize\n        this.mSize = { width: options.maxWidth, height: options.maxHeight }; // size of biggest image\n        // tileSize\n        this.tSize = { width: options.tileWidth, height: options.tileHeight };\n        this.tileImageSize = { width: options.tileImageWidth, height: options.tileImageHeight };\n        this.layerSize = { width: options.layerWidth, height: options.layerHeight };\n\n        this.hash = options.hash + '-' + (this.size.width + 'x' + this.size.height);\n\n        if (!TILES_HASH_STORAGE.has(this.hash)) {\n            TILES_HASH_STORAGE.set(this.hash, new Map());\n        }\n\n        this.scaleFactor = {\n            x: (this.mSize.width - this.size.width) / this.size.width + 1,\n            y: (this.mSize.height - this.size.height) / this.size.height + 1\n        };\n\n        this.maxDisplayedSize = { width: options.maxDisplayedWidth, height: options.maxDisplayedHeight };\n        this.minDisplayedSize = { width: options.minDisplayedWidth, height: options.minDisplayedHeight };\n\n        this.globalScale = { x: 1, y: 1 };\n        this.globalPosition = { x: 0, y: 0 };\n        this.view.setIndex(this.id);\n\n        this.setLensSize(options.viewPortWidth, options.viewPortHeight);\n\n        this.isAdded = false;\n        this.isShown = false;\n\n        this.tiles = this.calcTiles();\n\n        this.countOfTiles = this.tiles.length * this.tiles[0].length;\n        this.loadedTiles = 0;\n\n        this.camera = new Camera({\n            inner: options.inner,\n            scaleX: this.scaleFactor.x,\n            scaleY: this.scaleFactor.y,\n            cameraWidth: options.viewPortWidth,\n            cameraHeight: options.viewPortHeight,\n            mapWidth: this.size.width,\n            mapHeight: this.size.height,\n            tileWidth: getCorrectedTileSize(this.tileImageSize.width, this.dppx),\n            tileHeight: getCorrectedTileSize(this.tileImageSize.height, this.dppx),\n            lengthOfRow: this.tiles.length,\n            lengthOfColumn: this.tiles[0].length\n        });\n\n        /* start-removable-tile-helper-block */\n        if (zoomHelper) {\n            zoomHelper.createLevel({\n                level: this.id,\n                cols: this.tiles[0].length,\n                rows: this.tiles.length,\n                levelSize: { width: this.size.width, height: this.size.height, },\n                tileSize: {\n                    width: this.tileImageSize.width,\n                    height: this.tileImageSize.height\n                }\n            });\n        }\n        /* end-removable-tile-helper-block */\n    }\n\n    setEvents() {\n        const ts = this.tileImageSize;\n        this.on('getTile', (e) => {\n            e.data.width = this.size.width;\n            e.data.height = this.size.height;\n            e.data.level = this.id;\n            e.data.imageSettings = {\n                tile: {\n                    width: ts.width,\n                    height: ts.height,\n                    number: e.data.number\n                }\n            };\n\n            if (this.dppx > 1) { e.data.dppx = this.dppx; }\n\n            /* start-removable-tile-helper-block */\n            if (zoomHelper) {\n                zoomHelper.tileAction({\n                    level: this.id,\n                    col: e.data.indexX,\n                    row: e.data.indexY,\n                    type: 1\n                });\n            }\n            /* end-removable-tile-helper-block */\n        });\n\n        this.on('zoomCancelLoadingOfTiles', (e) => {\n            e.data.width = this.size.width;\n            e.data.height = this.size.height;\n            e.data.imageSettings = {\n                tile: {\n                    width: ts.width,\n                    height: ts.height,\n                    number: e.data.number\n                }\n            };\n\n            /* start-removable-tile-helper-block */\n            if (zoomHelper) {\n                zoomHelper.tileAction({\n                    level: this.id,\n                    col: e.data.indexX,\n                    row: e.data.indexY,\n                    type: 0\n                });\n            }\n            /* end-removable-tile-helper-block */\n        });\n    }\n\n    cancelLoadingOfTiles() {\n        this.tiles.forEach((row) => {\n            row.forEach((tile) => {\n                tile.cancelLoading();\n            });\n        });\n    }\n\n    setImage(imageData) {\n        const tile = this.tiles[imageData.indexY][imageData.indexX];\n\n        if (!tile.isLoaded()) {\n            this.loadedTiles += 1;\n        }\n\n        tile.setImage(imageData.node);\n\n        if (this.isShown && this.camera.checkTile(imageData.indexX, imageData.indexY)) {\n            this.drawTile(tile);\n        }\n\n        /* start-removable-tile-helper-block */\n        if (zoomHelper) {\n            zoomHelper.setData({\n                level: this.id,\n                col: imageData.indexX,\n                row: imageData.indexY\n            });\n        }\n        /* end-removable-tile-helper-block */\n    }\n\n    append() {\n        if (!this.isAdded && this.isShown) {\n            this.isAdded = true;\n            this.setEvents();\n            this.view.append();\n        }\n    }\n\n    calcTiles() {\n        const result = [];\n        const ts = this.tileImageSize;\n        const l1 = Math.ceil(this.layerSize.width / ts.width);\n        const l2 = Math.ceil(this.layerSize.height / ts.height);\n\n        for (let j = 0; j < l2; j++) {\n            const arr = $([]);\n            for (let i = 0; i < l1; i++) {\n                const tile = new Tile({\n                    y: j * ts.height,\n                    x: i * ts.width,\n                    indexX: i,\n                    indexY: j,\n                    id: j * l1 + i,\n                    width: (i !== l1 - 1) ? ts.width : (this.layerSize.width - i * ts.width),\n                    height: (j !== l2 - 1) ? ts.height : (this.layerSize.height - j * ts.height),\n                    storage: TILES_HASH_STORAGE.get(this.hash)\n                });\n\n                tile.setParent(this);\n                arr.push(tile);\n            }\n            result.push(arr);\n        }\n\n        return result;\n    }\n\n    correctDPPXPosition(pos, lensSize, imageSize) {\n        let result = pos;\n\n        if (this.dppx > 1) {\n            const center = lensSize / 2;\n            result = Math.abs(pos - center) / (imageSize / 100);\n            result = (center * this.dppx) - (imageSize * this.dppx) / 100 * result;\n        }\n\n        return result;\n    }\n\n    draw() {\n        const c = this.camera;\n\n        if (this.isShown) {\n            this.view.draw(c.scale, this.correctDPPXPosition(c.position.x, c.size.width, c.mapS.width), this.correctDPPXPosition(c.position.y, c.size.height, c.mapS.height));\n            this.eachTile((tile) => { this.drawTile(tile); });\n        }\n    }\n\n    drawTile(tile) {\n        if (tile && tile.isLoaded()) {\n            this.view.drawTile(tile.node, tile.size, tile.position);\n        }\n    }\n\n    eachTile(callback) {\n        const st = this.camera.getShownTiles();\n        for (let y = 0, l = st.countY; y < l; y++) {\n            for (let x = 0, l2 = st.countX; x < l2; x++) {\n                callback(this.tiles[st.startY + y][st.startX + x]);\n            }\n        }\n    }\n\n    checkSize() {\n        const last = this.isShown;\n        const mapSize = this.camera.getMapS();\n        const v1 = mapSize.width <= this.maxDisplayedSize.width;\n        const v2 = mapSize.height <= this.maxDisplayedSize.height;\n        const v3 = mapSize.width > this.minDisplayedSize.width;\n        const v4 = mapSize.height > this.minDisplayedSize.height;\n\n        this.isShown = (v1 && v2 && v3 && v4);\n\n        if (last !== this.isShown) {\n            if (this.isShown) {\n                this.view.show();\n            } else {\n                this.view.hide();\n            }\n\n            if (!this.isShown) {\n                this.cancelLoadingOfTiles();\n            }\n        }\n    }\n\n    action(position, scale) {\n        this.globalPosition.x = position.x;\n        this.globalPosition.y = position.y;\n        this.globalScale.x = scale.x;\n        this.globalScale.y = scale.y;\n\n        this.camera.action(this.globalPosition, this.globalScale);\n\n        if (this.camera.getMapS().width > this.mSize.width || this.camera.getMapS().height > this.mSize.height) {\n            this.camera.setMapS(this.mSize.width, this.mSize.height);\n        }\n\n        this.checkSize();\n\n        this.append();\n\n        this.draw();\n\n        /* start-removable-tile-helper-block */\n        if (zoomHelper) {\n            zoomHelper.setData({\n                level: this.id,\n                levelStatus: this.isShown\n            });\n        }\n        /* end-removable-tile-helper-block */\n    }\n\n    loadImages() {\n        if (this.isShown && this.loadedTiles !== this.countOfTiles) {\n            this.eachTile((tile) => { tile.load(); });\n        }\n    }\n\n    setLensSize(width, height) {\n        this.view.setCanvasSize(width, height);\n    }\n\n    resize(cameraSize) {\n        this.setLensSize(cameraSize.width, cameraSize.height);\n        this.camera.resize(cameraSize);\n        this.action(this.globalPosition, this.globalScale);\n    }\n\n    destroy() {\n        this.off('getTile');\n        this.off('zoomCancelLoadingOfTiles');\n        this.isShown = false;\n\n        this.camera.destroy();\n        this.tiles.forEach((row) => {\n            row.forEach((tile) => {\n                tile.destroy();\n            });\n        });\n\n        super.destroy();\n    }\n}\n\n/* eslint-env es6 */\n/* global Level */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\n// eslint-disable-next-line no-unused-vars\nclass ZoomView {\n    constructor(parentNode, classPrefix) {\n        this.p = $(parentNode);\n        // container\n        this.c = $J.$new('div');\n        this.c.addClass(classPrefix + '-deepzoom');\n    }\n\n    getContainer() {\n        return this.c;\n    }\n\n    show() {\n        this.p.append(this.c);\n    }\n\n    hide() {\n        this.c.remove();\n    }\n\n    destroy() {\n        this.c.remove();\n        this.c = null;\n    }\n}\n\n/* eslint-env es6 */\n/* global Level, getPercentValue, zoomHelper, EventEmitter, helper, LevelView, calcScale, getLevels */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\n// eslint-disable-next-line no-unused-vars\nclass ZoomController extends EventEmitter {\n    constructor(view, options) {\n        super();\n\n        this.view = view;\n\n        this.options = $J.extend({\n            tiles: true,\n            inner: true,\n            tileSize: { width: 256, height: 256 },\n            minZoomFactor: 100, // px\n            upscale: false\n        }, options);\n\n        this.hash = null;\n\n        this.setDefaultVars();\n    }\n\n    static convertScaleToSize(size, scale) {\n        return {\n            width: helper.round(size.width * scale.x, 2),\n            height: helper.round(size.height * scale.y, 2)\n        };\n    }\n\n    setHash(url) {\n        // this.hash = '' + $J.getHashCode(url.split('?')[0]);\n        this.hash = '' + $J.getHashCode(url);\n    }\n\n    // private\n    setDefaultVars() {\n        this.isShown = false;\n        this.originSize = { width: 0, height: 0 };\n        this.maxSize = { width: 0, height: 0 };\n        this.minSize = { width: 0, height: 0 };\n        this.lensSize = { width: 0, height: 0 };\n        this.currentSize = { width: 0, height: 0 };\n\n        this.levels = $([]);\n\n        this.on('getTile', (e) => {\n            if (!this.options.tiles) {\n                delete e.data.imageSettings.tile;\n                delete e.data.number;\n            }\n        });\n    }\n\n    // private\n    createLevels() {\n        const calcTileImageSize = (value, dppx) => {\n            return dppx < 1.5 ? value : value * $J.DPPX;\n        };\n        const maxSize = this.maxSize;\n        const minSize = this.minSize;\n\n        if (!this.levels.length && maxSize.width - minSize.width > this.options.minZoomFactor) {\n            let arr = [];\n            if (this.options.inner) {\n                arr = getLevels(minSize, maxSize, this.options.inner);\n            } else {\n                arr.push({\n                    width: maxSize.width,\n                    height: maxSize.height\n                });\n            }\n\n            let tileSize = this.options.tileSize;\n\n            for (let i = 0, l = arr.length; i < l; i++) {\n                if (!this.options.tiles) { tileSize = arr[i]; }\n                const _minSize = (i + 1 < l - 1) ? arr[i + 1] : minSize;\n                const _maxSize = (i - 1 >= 0) ? arr[i - 1] : maxSize;\n                const dppx = helper.getDPPX(arr[i].width, this.originSize.width, this.options.upscale);\n\n                const levelView = new LevelView(this.view.getContainer(), dppx);\n                const _level = new Level(levelView, {\n                    id: l - i,\n                    hash: this.hash,\n                    dppx: dppx,\n                    inner: this.options.inner,\n                    width: arr[i].width,\n                    height: arr[i].height,\n                    maxWidth: this.maxSize.width,\n                    maxHeight: this.maxSize.height,\n                    layerWidth: Math.round(arr[i].width * dppx),\n                    layerHeight: Math.round(arr[i].height * dppx),\n\n                    maxDisplayedWidth: arr[i].width + getPercentValue(_maxSize.width - arr[i].width, 50),\n                    maxDisplayedHeight: arr[i].height + getPercentValue(_maxSize.height - arr[i].height, 50),\n                    minDisplayedWidth: _minSize.width + getPercentValue(arr[i].width - _minSize.width, 50),\n                    minDisplayedHeight: _minSize.height + getPercentValue(arr[i].height - _minSize.height, 50),\n\n                    tileWidth: tileSize.width,\n                    tileHeight: tileSize.height,\n                    tileImageWidth: calcTileImageSize(tileSize.width, dppx),\n                    tileImageHeight: calcTileImageSize(tileSize.height, dppx),\n                    viewPortWidth: this.lensSize.width,\n                    viewPortHeight: this.lensSize.height\n                });\n\n                _level.setParent(this);\n\n                this.levels.push({\n                    view: levelView,\n                    controller: _level\n                });\n            }\n\n            this.levels.reverse();\n        }\n    }\n\n    getCurrentShownLevel() {\n        let result = null;\n        const l = this.levels.length;\n\n        if (this.isShown) {\n            for (let i = l - 1; i >= 0; i--) {\n                if (this.levels[i].controller.isShown) {\n                    result = this.levels[i].controller;\n                    break;\n                }\n            }\n        }\n\n        return result;\n    }\n\n    getScale(direction) {\n        const level = this.getCurrentShownLevel();\n        let scale;\n        const l = this.levels.length;\n\n        switch (direction) {\n            case 'zoomin':\n                if (level) {\n                    if (this.currentSize.width < level.size.width) {\n                        scale = calcScale(this.maxSize.width, level.size.width);\n                    } else if (level.id !== l) {\n                        scale = calcScale(this.maxSize.width, this.levels[level.id].controller.size.width);\n                    } else {\n                        scale = calcScale(this.maxSize.width, this.levels[l - 1].controller.size.width);\n                    }\n                } else {\n                    scale = calcScale(this.maxSize.width, this.levels[0].controller.size.width);\n                }\n                break;\n            case 'zoomout':\n                if (level) {\n                    if (this.currentSize.width > level.size.width) {\n                        scale = calcScale(this.maxSize.width, level.size.width);\n                    } else if (level.id > 1) {\n                        scale = calcScale(this.maxSize.width, this.levels[level.id - 2].controller.size.width);\n                    } else {\n                        scale = calcScale(this.maxSize.width, this.minSize.width);\n                    }\n                } else {\n                    scale = calcScale(this.maxSize.width, this.minSize.width);\n                }\n                break;\n            // no default\n        }\n\n        return scale;\n    }\n\n    show() {\n        if (!this.isShown) {\n            this.isShown = true;\n            this.view.show();\n        }\n        return this;\n    }\n\n    hide() {\n        if (this.isShown) {\n            this.isShown = false;\n\n            this.view.hide();\n\n            this.levels.forEach((level) => {\n                level.view.destroy();\n                level.controller.destroy();\n            });\n\n            this.setDefaultVars();\n        }\n\n        return this;\n    }\n\n    action(position, scale) {\n        if (this.isShown) {\n            this.currentSize = ZoomController.convertScaleToSize(this.maxSize, scale);\n\n            this.levels.forEach((level) => {\n                level.controller.action(position, scale);\n            });\n\n            /* start-removable-tile-helper-block */\n            if (zoomHelper) {\n                zoomHelper.setData({\n                    zoom: helper.round(this.currentSize.width / this.minSize.width, 1, this.currentSize.width === this.maxSize.width)\n                });\n            }\n            /* end-removable-tile-helper-block */\n        }\n\n        return this;\n    }\n\n    setLensSize(width, height) {\n        this.lensSize.width = width;\n        this.lensSize.height = height;\n        return this;\n    }\n\n    setMinSize(width, height) {\n        this.minSize.width = width;\n        this.minSize.height = height;\n        return this;\n    }\n\n    setMaxSize(width, height, originWidth, originHeight) {\n        this.maxSize.width = width;\n        this.maxSize.height = height;\n        this.originSize.width = originWidth;\n        this.originSize.height = originHeight;\n        this.createLevels();\n\n        return this;\n    }\n\n    loadImages() {\n        if (this.isShown) {\n            this.levels.forEach((level) => {\n                level.controller.loadImages();\n            });\n        }\n        return this;\n    }\n\n    setImage(data) {\n        if (this.isShown) {\n            this.levels[data.level - 1].controller.setImage(data);\n        }\n        return this;\n    }\n\n    resize() {\n        if (this.isShown) {\n            this.levels.forEach((level) => {\n                level.controller.resize(this.lensSize);\n            });\n        }\n\n        return this;\n    }\n\n    destroy() {\n        this.hide();\n        this.off('getTile');\n        this.off('zoomCancelLoadingOfTiles');\n        super.destroy();\n    }\n}\n\n/* eslint-env es6 */\n/* global EventEmitter */\n/* global ZoomView */\n/* global ZoomController */\n/* eslint-disable indent */\n/* eslint-disable no-lonely-if */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n/* eslint guard-for-in: \"off\"*/\n/* eslint no-restricted-syntax: [\"error\",  \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\n// eslint-disable-next-line no-unused-vars\nclass DZoom extends EventEmitter {\n    constructor(parentNode, options) {\n        super();\n        this.view = new ZoomView(parentNode, 'sirv');\n        this.controller = new ZoomController(this.view, options);\n        this.controller.setParent(this);\n    }\n\n    setLensSize(width, height) {\n        this.controller.setLensSize(width, height);\n        return this;\n    }\n\n    loadImages() {\n        this.controller.loadImages();\n        return this;\n    }\n\n    getScale(direction) {\n        return this.controller.getScale(direction);\n    }\n\n    setImage(data) {\n        this.controller.setImage(data);\n        return this;\n    }\n\n    setHash(hash) {\n        this.controller.setHash(hash);\n        return this;\n    }\n\n    setMinSize(width, height) {\n        this.controller.setMinSize(width, height);\n        return this;\n    }\n\n    setMaxSize(width, height, originWidth, originHeight) {\n        this.controller.setMaxSize(width, height, originWidth, originHeight);\n        return this;\n    }\n\n    show() {\n        this.controller.show();\n        return this;\n    }\n\n    hide() {\n        this.controller.hide();\n        return this;\n    }\n\n    action(imageDPosition, dScale) {\n        this.controller.action(imageDPosition, dScale);\n        return this;\n    }\n\n    resize() {\n        this.controller.resize();\n        return this;\n    }\n\n    destroy() {\n        this.controller.destroy();\n        this.controller = null;\n        this.view.destroy();\n        this.view = null;\n        super.destroy();\n    }\n}\n\nreturn DZoom;\n})();\nconst Eye = (() => {\n\n/* eslint-env es6 */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n// eslint-disable-next-line no-unused-vars\nclass View {\n    constructor(parent, hover) {\n        this.pn = $(parent);\n\n        const className = 'sirv-zoom-lens';\n\n        // container\n        this.c = $J.$new('div');\n        this.c.addClass(className + '-wrapper');\n\n        // insideContainer\n        this.ic = $J.$new('div');\n        this.ic.addClass(className);\n\n        this.ic.appendTo(this.c);\n\n        this.img = null;\n        // blackAndWhiteImg\n        this.bwImg = null;\n\n        if (hover) {\n            this.c.addEvent('mousedown', (e) => { e.stop(); });\n        }\n    }\n\n    setContainerPosition() {\n        if ($J.contains(['img', 'canvas'], this.pn.getTagName())) {\n            const positon = this.pn.getPosition();\n            const parentPosition = $(this.pn.node.parentNode).getPosition();\n            this.c.setCss({\n                top: positon.top - parentPosition.top,\n                left: positon.left - parentPosition.left\n            });\n        }\n    }\n\n    setImageSize(size) {\n        if (this.img) {\n            // this.bwImg = $(this.img.cloneNode());\n\n            // this.bwImg.addClass('sirv-filter-bw');\n\n            [this.img, this.bwImg].forEach((img) => {\n                if (img) {\n                    img.setCss({\n                        top: 0,\n                        left: 0,\n                        width: size.width,\n                        height: size.height,\n                        position: 'absolute'\n                    });\n                }\n            });\n        }\n    }\n\n    getContainerSize() {\n        return this.pn.getSize();\n        // return {\n        //     width: 132,\n        //     height: 200\n        // };\n    }\n\n    setContainerSize(size) {\n        this.c.setCss({ width: size.width, height: size.height });\n    }\n\n    setInsideContainerSize(size) {\n        this.ic.setCss({ width: size.width, height: size.height, });\n    }\n\n    setInsideContainerFontSize(size) {\n        this.ic.setCssProp('font-size', Math.max(size.width, size.height) + 'px');\n    }\n\n    setTransform(x, y) {\n        this.ic.setCssProp('transform', 'translate3d(' + x + 'px,' + y + 'px, 0px)');\n\n        if (this.img) {\n            this.img.setCssProp('transform', 'translate3d(' + (x * (-1)) + 'px, ' + (y * (-1)) + 'px, 0px)');\n        }\n    }\n\n    show(img, size) {\n        if (img) { this.img = $(img); }\n\n        this.setContainerPosition();\n        this.setImageSize(size);\n\n        if (this.img) {\n            this.ic.append(this.img);\n            // this.pn.append(this.bwImg);\n        }\n\n        let container = this.pn;\n        if ($J.contains(['img', 'canvas'], container.getTagName())) {\n            container = $(container.node.parentNode);\n        }\n\n        container.append(this.c);\n    }\n\n    hide() {\n        this.c.remove();\n\n        if (this.img) {\n            this.img.remove();\n            this.img = null;\n\n            if (this.bwImg) {\n                this.bwImg.remove();\n                this.bwImg = null;\n            }\n        }\n    }\n\n    destroy() {\n        this.c.removeEvent('mousedown');\n        this.c.remove();\n    }\n}\n\n/* eslint-env es6 */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\nconst difference = (a, b) => { return Math.abs(a - b); };\nconst getAnimationValue = (a, b, step) => { return (a - b) * step; };\n\n// eslint-disable-next-line no-unused-vars\nclass Controller {\n    constructor(view) {\n        this.view = view;\n\n        // parentSize\n        this.pSize = { width: 0, height: 0 };\n        this.inDoc = false;\n\n        this.timer = null;\n        this.isPlaying = false;\n\n        this.pos = { x: null, y: null };\n        this.dPos = { x: null, y: null };\n        this.size = { width: 0, height: 0 };\n        this.dSize = { width: 0, height: 0 };\n    }\n\n    // private\n    doAnimation() {\n        let result = false;\n        const minSize = 0.001;\n\n        if (\n                difference(this.pos.x, this.dPos.x) > minSize ||\n                difference(this.pos.y, this.dPos.y) > minSize ||\n                difference(this.size.width, this.dSize.width) > minSize ||\n                difference(this.size.height, this.dSize.height) > minSize\n            ) {\n            result = true;\n        }\n\n        return result;\n    }\n\n    // private\n    animate() {\n        this.isPlaying = true;\n\n        const step = 0.4;\n        const dx = getAnimationValue(this.pos.x, this.dPos.x, step);\n        const dy = getAnimationValue(this.pos.y, this.dPos.y, step);\n        const dw = getAnimationValue(this.size.width, this.dSize.width, step);\n        const dh = getAnimationValue(this.size.height, this.dSize.height, step);\n\n        this.dPos.x += dx;\n        this.dPos.y += dy;\n        this.dSize.width += dw;\n        this.dSize.height += dh;\n\n        this.setCss();\n\n        if (this.doAnimation()) {\n            this.timer = setTimeout(() => {\n                this.animate();\n            }, 16);\n        } else {\n            this.stopAnimation();\n        }\n    }\n\n    // private\n    setCss() {\n        const s = this.size;\n        const ds = this.dSize;\n\n        if (difference(s.width, ds.width) > 0 || difference(s.height, ds.height) > 0) {\n            this.view.setInsideContainerSize(ds);\n            this.view.setInsideContainerFontSize(this.pSize);\n        }\n\n        this.view.setTransform(Math.round(this.dPos.x), Math.round(this.dPos.y));\n    }\n\n    // private\n    stopAnimation() {\n        if (this.isPlaying) {\n            this.isPlaying = false;\n\n            clearTimeout(this.timer);\n\n            this.dPos.x = this.pos.x;\n            this.dPos.y = this.pos.y;\n            this.dSize.width = this.size.width;\n            this.dSize.height = this.size.height;\n\n            this.setCss();\n        }\n    }\n\n    setSize(size) {\n        this.size.width = size.width;\n        this.size.height = size.height;\n\n        if (this.inDoc && this.dPos.x !== null) {\n            if (!this.isPlaying) {\n                this.animate();\n            }\n        }\n    }\n\n    setPosition(x, y) {\n        const s = this.size;\n        const ps = this.pSize;\n        let _x = x - s.width / 2;\n        let _y = y - s.height / 2;\n\n        if (_x < 0) { _x = 0; }\n        if (_y < 0) { _y = 0; }\n\n        if (_x > ps.width - s.width) { _x = ps.width - s.width; }\n        if (_y > ps.height - s.height) { _y = ps.height - s.height; }\n\n        this.pos.x = _x;\n        this.pos.y = _y;\n\n        if (this.dPos.x === null) {\n            this.dPos.x = _x;\n            this.dPos.y = _y;\n        }\n\n        if (this.inDoc) {\n            if (!this.isPlaying) {\n                this.animate();\n            }\n        }\n    }\n\n    // private\n    setContainerSize() {\n        const ps = this.view.getContainerSize();\n        this.pSize = ps;\n        this.view.setContainerSize(ps);\n        this.view.setInsideContainerFontSize(ps);\n    }\n\n    show(img) {\n        if (!this.inDoc) {\n            this.inDoc = true;\n            this.setContainerSize();\n            this.view.show(img, this.pSize);\n        }\n    }\n\n    hide() {\n        if (this.inDoc) {\n            this.inDoc = false;\n\n            this.view.hide();\n\n            this.pos = { x: null, y: null };\n            this.dPos = { x: null, y: null };\n            this.size = { width: 0, height: 0 };\n            this.dSize = { width: 0, height: 0 };\n        }\n    }\n\n    resize() {\n        if (this.inDoc) {\n            this.setContainerSize();\n            this.view.setContainerPosition();\n        }\n    }\n\n    destroy() {\n        this.stopAnimation();\n        this.inDoc = false;\n    }\n}\n\n/* eslint-env es6 */\n/* global View */\n/* global Controller */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n// eslint-disable-next-line no-unused-vars\nclass _Eye {\n    constructor(prentNode, hover) {\n        this.view = new View(prentNode, hover);\n        this.controller = new Controller(this.view);\n    }\n\n    setEventToMainContainer(name, callback) {\n        this.view.c.addEvent(name, callback);\n    }\n\n    removeEventToMainContainer(name, callback) {\n        if (callback) {\n            this.view.c.removeEvent(name, callback);\n        } else {\n            this.view.c.removeEvent(name);\n        }\n    }\n\n    clearEvents() {\n        this.view.c.clearEvents();\n    }\n\n    getBoundaries() {\n        return this.view.c.node.getBoundingClientRect();\n    }\n\n    show(img) {\n        this.controller.show(img);\n    }\n\n    hide() {\n        this.controller.hide();\n    }\n\n    setSize(size) {\n        this.controller.setSize(size);\n    }\n\n    setPosition(x, y) {\n        this.controller.setPosition(x, y);\n    }\n\n    destroy() {\n        this.controller.destroy();\n        this.view.destroy();\n    }\n}\n\nreturn _Eye;\n})();\n\nconst ZoomMap = (() => {\n\n/* eslint-env es6 */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n// eslint-disable-next-line no-unused-vars\nclass View {\n    constructor(parent) {\n        this.p = $(parent);\n\n        const className = 'sirv-zoom-map';\n\n        // container\n        this.c = $J.$new('div');\n        this.c.addClass(className);\n        this.lens = $J.$new('div');\n        this.lens.addClass(className + '-lens');\n\n        this.img = null;\n\n        this.b = $($J.D.node.body);\n\n        this.c.append(this.lens);\n    }\n\n    getRightPosition(x, y) {\n        const rect = this.c.getRect();\n        return {\n            x: x - rect.left,\n            y: y - rect.top\n        };\n    }\n\n    addDomEventToDocBody(eventName, callback) {\n        this.b.addEvent(eventName, callback);\n    }\n\n    removeDomEventToDocBody(eventName, callback) {\n        this.b.removeEvent(eventName, callback);\n    }\n\n    addDomEventToLens(eventName, callback) {\n        this.lens.addEvent(eventName, callback);\n    }\n\n    addDomEvent(eventName, callback) {\n        this.c.addEvent(eventName, callback);\n    }\n\n    changeCursor(value) {\n        this.c.setCssProp('cursor', value);\n    }\n\n    removeEvents() {\n        this.c.removeEvent('btnclick tap');\n        this.c.removeEvent('mousedown touchstart');\n        this.lens.removeEvent('mousedown touchstart');\n        this.c.removeEvent('mousemove touchmove');\n    }\n\n    setContainerCss(size) {\n        this.c.setCss({\n            width: size.width + 'px',\n            height: size.height + 'px'\n        });\n    }\n\n    setLensCss(lensPosition, lensSize, containerSize) {\n        this.lens.setCss({\n            top: (lensPosition.top - 1) + 'px',\n            left: (lensPosition.left - 1) + 'px',\n            width: lensSize.width + 'px',\n            height: lensSize.height + 'px',\n            'font-size': containerSize + 'px'\n        });\n    }\n\n    setImg(src, srcset) {\n        this.img = $J.$new('img', { 'src': src });\n\n        if (srcset) {\n            this.img.attr('srcset', srcset + ' 2x');\n        }\n\n        this.c.append(this.img);\n    }\n\n    // private\n    removeEventTransitionEvent() {\n        this.c.removeEvent('transitionend');\n    }\n\n    show(callback) {\n        this.c.setCss({\n            opacity: 0,\n            transition: 'opacity .3s linear'\n        });\n\n        this.p.append(this.c);\n\n        this.c.getSize(); // render\n\n        this.removeEventTransitionEvent();\n        this.c.addEvent('transitionend', (e) => {\n            e.stop();\n            this.removeEventTransitionEvent();\n            this.c.setCssProp('transition', '');\n            this.addDomEvent('mousedown touchstart', (_e) => { _e.stop(); });\n            callback();\n        });\n\n        this.c.setCssProp('opacity', 1);\n    }\n\n    hide(force, callback) {\n        this.removeEventTransitionEvent();\n\n        if (!force) {\n            this.c.addEvent('transitionend', (e) => {\n                e.stop();\n                this._removeEventTransitionEvent();\n                this.c.setCssProp('transition', '');\n                this.c.remove();\n                this.removeEvents();\n                callback();\n            });\n        } else {\n            this.c.remove();\n            this.removeEvents();\n            callback();\n        }\n\n        this.c.setCssProp('opacity', 0);\n    }\n\n    destroy() {\n        this.c = null;\n        this.lens = null;\n    }\n}\n\n/* eslint-env es6 */\n/* global getPercent */\n/* global EventEmitter */\n/* global helper */\n/* global getPercentValue */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\nconst getOffset = (e) => {\n    let rect;\n    const result = { x: 0, y: 0 };\n    const oe = e.getOriginEvent();\n\n    if ($J.defined(oe.offsetX)) {\n        result.x = oe.offsetX;\n        result.y = oe.offsetY;\n    } else {\n        // rect = e.getTarget().getBoundingClientRect();\n        rect = $(e.getTarget()).getPosition();\n\n        result.x = oe.targetTouches[0].pageX - rect.left;\n        result.y = oe.targetTouches[0].pageY - rect.top;\n    }\n\n    return result;\n};\n\nconst betweenMinMax = (value, min, max) => {\n    if (!$J.defined(min)) { min = 0; }\n    if (!$J.defined(max)) { max = 100; }\n\n    return Math.min(Math.max(value, min), max);\n};\n\n// eslint-disable-next-line no-unused-vars\nclass Controller extends EventEmitter {\n    constructor(view, options) {\n        super();\n        this.view = view;\n\n        this.o = options;\n\n        this.state = globalVariables.APPEARANCE.HIDDEN;\n        this.scale = { x: 1, y: 1 };\n        this.viewPortSize = { width: 0, height: 0 };\n\n        // bigImageSize\n        this.bISize = { width: 0, height: 0 };\n\n        // currentBigImageSize\n        this.cBISize = { width: 0, height: 0 };\n        // currentBigImagePosition\n        this.cBIPosition = { top: 0, left: 0 };\n\n        // currentMapContainerSize\n        this.mapSize = { width: 0, height: 0 };\n\n        // lensSize\n        this.ls = { width: 0, height: 0 };\n        // lensPosition\n        this.lp = { top: 0, left: 0 };\n        // correctLensPosition\n        this.clp = { x: 0, y: 0 };\n\n        this.isDragMoved = false;\n    }\n\n    // convert current percent to the center percent of map eye\n    static setInTheCenter(value) {\n        if (value < 50) {\n            value = Math.max(value - (50 - value), 0);\n        } else if (value > 50) {\n            value = Math.min(value + (value - 50), 100);\n        }\n\n        return value;\n    }\n\n    // private\n    getPercentPosition(x, y) {\n        const cms = this.mapSize;\n        const pos = this.view.getRightPosition(x, y);\n\n        x = betweenMinMax(helper.round(getPercent(pos.x, cms.width), 1));\n        y = betweenMinMax(helper.round(getPercent(pos.y, cms.height), 1));\n\n        return { x: x, y: y };\n    }\n\n    // private\n    isInside(x, y) {\n        let result = false;\n        const lp = this.lp;\n        const ls = this.ls;\n        const pos = this.view.getRightPosition(x, y);\n\n        if (lp.left < pos.x && lp.left + ls.width > pos.x && lp.top < pos.y && lp.top + ls.height > pos.y) { result = true; }\n\n        return result;\n    }\n\n    // private\n    setEvents() {\n        let count = 1;\n        let isDragMoved = false;\n\n        this.dragEndHandler = (e) => {\n            if (isDragMoved) {\n                e.stop();\n                isDragMoved = false;\n                this.clp = { x: 0, y: 0 };\n                this.view.changeCursor('');\n                this.view.removeDomEventToDocBody(e.type, this.dragEndHandler);\n                this.view.removeDomEventToDocBody('mouseout', this.mouseOutHandler);\n            }\n        };\n\n        this.mouseOutHandler = (event) => {\n            event.stop();\n            if ((!event.oe.relatedTarget || event.oe.relatedTarget.tagName === 'HTML') && isDragMoved) {\n                this.dragEndHandler(event);\n                this.view.removeDomEventToDocBody('mouseup touchend', this.dragEndHandler);\n            }\n        };\n\n        this.view.addDomEvent('btnclick tap', (e) => {\n            e.stop();\n            // this.emit('zoomMapNewPosition', { data: this.getPercentPosition(e.x - this.ls.width / 2, e.y - this.ls.height / 2) });\n            this.emit('zoomMapNewPosition', { data: this.getPercentPosition(e.x, e.y) });\n        });\n\n        this.view.addDomEventToLens('mousedown touchstart', (e) => {\n            const pageXY = e.getPageXY();\n\n            if (this.isInside(pageXY.x, pageXY.y)) {\n                e.stop();\n                count = 1;\n\n                const offset = getOffset(e);\n\n                this.clp.y = offset.y;\n                this.clp.x = offset.x;\n                isDragMoved = true;\n                this.view.addDomEventToDocBody('mouseup touchend', this.dragEndHandler);\n                this.view.addDomEventToDocBody('mouseout', this.mouseOutHandler);\n            }\n        });\n\n        this.view.addDomEvent('mousemove touchmove', (e) => {\n            if (isDragMoved) {\n                if (count <= 0) {\n                    e.stop();\n                    const pageXY = e.getPageXY();\n\n                    this.view.changeCursor('move');\n                    // this.emit('zoomMapNewPosition', { data: this.getPercentPosition(pageXY.x - this.clp.x, pageXY.y - this.clp.y) });\n                    this.emit('zoomMapNewPosition', { data: this.getPercentPosition(pageXY.x, pageXY.y) });\n                }\n                count--;\n            }\n        });\n    }\n\n    // private\n    calcMap(imgWidth, imgHeight, zoomContainerWidth, zoomContainerHeight) {\n        let cWidth = this.o.maxwidth;\n        let cHeight = this.o.maxheight;\n\n        if (zoomContainerWidth <= cWidth) {\n            cWidth = zoomContainerWidth / 2;\n            cHeight = cWidth * (imgHeight / imgWidth);\n        }\n\n        if (zoomContainerHeight <= cHeight) {\n            cHeight = zoomContainerHeight / 2;\n            cWidth = cHeight * (imgWidth / imgHeight);\n        }\n\n        if (cWidth / cHeight > imgWidth / imgHeight) {\n            cWidth = cHeight * (imgWidth / imgHeight);\n        } else {\n            cHeight = cWidth * (imgHeight / imgWidth);\n        }\n\n        cWidth = parseInt(cWidth, 10);\n        cHeight = parseInt(cHeight, 10);\n\n        this.mapSize.width = cWidth;\n        this.mapSize.height = cHeight;\n        this.viewPortSize.width = zoomContainerWidth;\n        this.viewPortSize.height = zoomContainerHeight;\n        this.bISize.width = imgWidth;\n        this.bISize.height = imgHeight;\n    }\n\n    prepare(imgWidth, imgHeight, zoomContainerWidth, zoomContainerHeight) {\n        this.calcMap(imgWidth, imgHeight, zoomContainerWidth, zoomContainerHeight);\n        this.view.setContainerCss(this.mapSize);\n\n        this.emit('zoomGetImage', {\n            data: {\n                width: this.mapSize.width,\n                height: this.mapSize.height\n            }\n        });\n    }\n\n    setLensPosition(bigImageTop, bigImageLeft) {\n        let top;\n        let left;\n        const bis = this.cBISize;\n        const ms = this.mapSize;\n\n        top = ms.height / bis.height * bigImageTop;\n        left = ms.width / bis.width * bigImageLeft;\n\n        this.cBIPosition.top = bigImageTop;\n        this.cBIPosition.left = bigImageLeft;\n\n        if (top < 0) { top = 0; }\n        if (left < 0) { left = 0; }\n\n        const ls = this.ls;\n\n        if (top + ls.height > ms.height) { top = ms.height - ls.height; }\n        if (left + ls.width > ms.width) { left = ms.width - ls.width; }\n\n        this.lp.top = top;\n        this.lp.left = left;\n    }\n\n    setLensSize(width, height) {\n        this.cBISize.width = width;\n        this.cBISize.height = height;\n\n        const cm = this.mapSize;\n        const vp = this.viewPortSize;\n\n        this.ls.width = vp.width >= width ? cm.width : vp.width / width * cm.width;\n        this.ls.height = vp.height >= height ? cm.height : vp.height / height * cm.height;\n    }\n\n    move(imgPos, scale) {\n        const bis = this.bISize;\n        const imgWidth = bis.width * scale.x;\n        const imgHeight = bis.height * scale.y;\n        const imgTop = Math.abs(imgPos.y + (bis.height - imgHeight) / 2);\n        const imgLeft = Math.abs(imgPos.x + (bis.width - imgWidth) / 2);\n\n        this.scale.x = scale.x;\n        this.scale.y = scale.y;\n\n        this.setLensSize(imgWidth, imgHeight);\n        this.setLensPosition(imgTop, imgLeft);\n        this.view.setLensCss(this.lp, this.ls, Math.max(this.mapSize.width, this.mapSize.height));\n    }\n\n    show() {\n        if ($J.contains([globalVariables.APPEARANCE.SHOWING, globalVariables.APPEARANCE.SHOWN], this.state)) { return; }\n        this.state = globalVariables.APPEARANCE.SHOWING;\n\n        this.view.show(() => {\n            this.setEvents();\n            this.state = globalVariables.APPEARANCE.SHOWN;\n        });\n    }\n\n    hide(force) {\n        if ($J.contains([globalVariables.APPEARANCE.HIDDEN, globalVariables.APPEARANCE.HIDING], this.state) && !force) { return; }\n        this.state = globalVariables.APPEARANCE.HIDING;\n\n        this.view.hide(force, () => {\n            this.view.removeDomEventToDocBody('mouseup touchend', this.dragEndHandler);\n            this.state = globalVariables.APPEARANCE.HIDDEN;\n        });\n    }\n\n    resize(maxWidth, maxHeight, imgWidth, imgHeight, zoomContainerWidth, zoomContainerHeight) {\n        this.o.maxwidth = maxWidth;\n        this.o.maxheight = maxHeight;\n\n        this.calcMap(imgWidth, imgHeight, zoomContainerWidth, zoomContainerHeight);\n        this.view.setContainerCss(this.mapSize);\n    }\n\n    destroy() {\n        this.hide(true);\n        super.destroy();\n    }\n}\n\n/* eslint-env es6 */\n/* global EventEmitter */\n/* global View */\n/* global Controller */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n// eslint-disable-next-line no-unused-vars\nclass _ZoomMap extends EventEmitter {\n    constructor(parent, options) {\n        super();\n\n        this.options = $J.extend({\n            maxwidth: 200,\n            maxheight: 200\n        }, options || {});\n\n        this.view = new View(parent);\n        this.controller = new Controller(this.view, this.options);\n        this.controller.setParent(this);\n    }\n\n    prepare(imgWidth, imgHeight, zoomContainerWidth, zoomContainerHeight) {\n        this.controller.prepare(imgWidth, imgHeight, zoomContainerWidth, zoomContainerHeight);\n    }\n\n    move(imgPos, scale) {\n        this.controller.move(imgPos, scale);\n    }\n\n    setImg(src, srcset) {\n        this.view.setImg(src, srcset);\n    }\n\n    show() {\n        this.controller.show();\n    }\n\n    hide(force) {\n        this.controller.hide(force);\n    }\n\n    resize(maxWidth, maxHeight, imgWidth, imgHeight, zoomContainerWidth, zoomContainerHeight) {\n        this.controller.resize(maxWidth, maxHeight, imgWidth, imgHeight, zoomContainerWidth, zoomContainerHeight);\n    }\n\n    destroy() {\n        this.controller.destroy();\n        this.view.destroy();\n        super.destroy();\n    }\n}\n\nreturn _ZoomMap;\n})();\n\n/* eslint-env es6 */\n/* eslint-disable indent */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n/* eslint guard-for-in: \"off\"*/\n/* eslint no-restricted-syntax: [\"error\",  \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\nconst findZoomNode = (el) => {\n    return $($(el).node.getElementsByTagName('img')[0] || $(el).node.getElementsByTagName('canvas')[0] || el);\n};\n\n// eslint-disable-next-line no-unused-vars\nclass View {\n    constructor(parentNode) {\n        this.pn = $(parentNode);\n\n        const className = 'sirv-zoom';\n\n        // eventsCanvasNode\n        this.cnv = $J.$new('div');\n        this.cnv.addClass(className);\n        this.node = $J.$new('div').setCss({ opacity: 0 });\n        this.node.addClass(className + '-wrapper');\n        this.zoomWrapper = $J.$new('div').addClass('sirv-zoom-image-wrapper');\n\n        // zoomNode\n        this.zoom = findZoomNode(this.pn);\n        // lensContainer\n        this.lens = $J.D.node.body;\n        this.isBody = true;\n\n        this.image = null;\n\n        this.perspective = '';\n\n        if ($J.browser.mobile && $J.browser.platform === 'ios') {\n            // perspective much helps for ios\n            this.perspective = 'perspective(1000px) ';\n        }\n    }\n\n    getHash() {\n        if (this.image) {\n            return this.image.$J_UUID + '' || this.image.attr('src');\n        }\n\n        return null;\n    }\n\n    getParentSize() {\n        return this.pn.getSize();\n    }\n\n    getParentPostion() {\n        return this.pn.getPosition(); // Inaccurate position for mobile\n    }\n\n    getZoomSize() {\n        return this.zoom.getSize();\n    }\n\n    getParentBoundaries() {\n        if (this.cnv.node.parentNode) {\n            return this.cnv.node.getBoundingClientRect();\n        }\n\n        return null;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    addScrollEvent(callback) {\n        $J.W.addEvent('scroll', callback);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    removeScrollEvent(callback) {\n        if (callback) {\n            $J.W.removeEvent('scroll', callback);\n        } else {\n            $J.W.removeEvent('scroll');\n        }\n    }\n\n    addClassToWrapper(zoomType) {\n        this.node.addClass('sirv-' + zoomType + '-zoom');\n    }\n\n    setEventToMainContainer(name, callback) {\n        this.cnv.addEvent(name, callback);\n    }\n\n    removeEventFromMainContainer(...args) {\n        this.cnv.removeEvent(args);\n    }\n\n    setEventToWrapper(name, callback) {\n        this.node.addEvent(name, callback);\n    }\n\n    removeEventFromWrapper(...args) {\n        this.node.removeEvent(args);\n    }\n\n    addMouseoutEvent(callback) {\n        this.setEventToWrapper('mouseout', (e) => {\n            // let toElement = e.toElement || e.relatedTarget;\n            let toElement = e.getRelated();\n\n            if (!toElement) { return; }\n\n            while (toElement && toElement !== this.node.node && toElement !== this.lens.node) {\n            // while (toElement !== this.node && toElement !== $J.D.node.body) {\n                toElement = toElement.parentNode;\n            }\n\n            if (this.node.node !== toElement) {\n                callback(e);\n            }\n        });\n    }\n\n    setLensContainer(lensContainer) {\n        if (!lensContainer) {\n            lensContainer = $($J.D.node.body);\n        }\n\n        this.isBody = $(lensContainer) === $($J.D.node.body);\n\n        this.lens = $(lensContainer);\n    }\n\n    toggleCursorClass(oldClass, newClass) {\n        this.cnv\n            .removeClass(oldClass)\n            .addClass(newClass);\n    }\n\n    setImagePosition(position, scale) {\n        if (this.image) {\n            this.zoomWrapper.setCssProp('transform', this.perspective + 'translate3d(' + position.x + 'px, ' + position.y + 'px, 0) scale(' + scale.x + ', ' + scale.y + ')');\n        }\n    }\n\n    addStartCss() {\n        this.setLensStyle({\n            opacity: 0,\n            transform: 'scale(0)'\n        });\n    }\n\n    appendNodes(smallImg, imageSize) {\n        this.cnv.addEvent('contextmenu', (e) => { e.stopDefaults(); });\n\n        this.image = $(smallImg);\n\n        this.image.setCss({\n            width: imageSize.width + 'px',\n            height: imageSize.height + 'px'\n        });\n\n        /*\n            if tiels === false\n            image sticks to mouse cursor\n            just for firefox\n        */\n        if (!$J.browser.mobile) {\n            this.image.addEvent('mousedown', (e) => { e.stopDefaults(); });\n        }\n\n        this.zoomWrapper.append(this.image);\n        this.node.append(this.zoomWrapper);\n        this.node.appendTo(this.cnv);\n        this.cnv.appendTo(this.lens, false);\n    }\n\n    setEventNodePositionSize(pos, size) {\n        let top = pos.top;\n        let left = pos.left;\n\n        if (!this.isBody) {\n            const parentContainer = this.lens.getPosition();\n            top -= parentContainer.top;\n            left -= parentContainer.left;\n        }\n\n        this.cnv.setCss({ top: top, left: left, width: size.width, height: size.height });\n    }\n\n    setLensStyle(styleObj) {\n        this.node.setCss(styleObj);\n    }\n\n    setLensPosition(position) {\n        this.setLensStyle({\n            top: position.top,\n            left: position.left,\n        });\n    }\n\n    setLensSize(size) {\n        this.setLensStyle({\n            width: size.width,\n            height: size.height,\n        });\n    }\n\n    setLensCss(position, size, transition) {\n        this.setLensPosition(position);\n        this.setLensSize(size);\n        this.node.setCss({\n            opacity: 1,\n            transform: 'scale(1)',\n            // top: position.top,\n            // left: position.left,\n            // width: size.width,\n            // height: size.height,\n            transition: transition || 'none'\n        });\n    }\n\n    setImageSize(position, size, scale) {\n        this.zoomWrapper.setCss({\n            'top': 0,\n            'left': 0,\n            'width': size.width + 'px',\n            'height': size.height + 'px',\n            'transform-origin': '50% 50%',\n\n            'transform': this.perspective + 'translate3d(' + position.x + 'px, ' + position.y + 'px, 0) scale(' + scale.x + ', ' + scale.y + ')'\n        }).getSize();\n\n        this.image.setCss({\n            width: '100%',\n            height: '100%'\n        }).getSize();\n    }\n\n    clearCss() {\n        this.node.setCss({\n            transition: '',\n            opacity: '',\n            transform: ''\n        });\n\n        this.node.removeAttr('style');\n\n        if (this.image) {\n            this.image.setCss({ width: '', height: '' });\n        }\n\n        this.zoomWrapper.setCss({\n            top: '',\n            left: '',\n            width: '',\n            height: '',\n            transition: '',\n            transform: ''\n        });\n    }\n\n    clearDOM() {\n        if (this.image) {\n            this.image.remove();\n            this.image = null;\n        }\n        this.zoomWrapper.remove();\n        this.node.remove();\n        this.cnv.remove();\n    }\n\n    removeEvents() {\n        this.cnv.clearEvents();\n        // this.cnv.removeEvent('mouseover');\n\n        if (this.image) {\n            this.image.clearEvents();\n        }\n\n        this.node.clearEvents();\n\n        // this.node.removeEvent('mouseout');\n        // this.node.removeEvent('mousemove');\n        // this.node.removeEvent('btnclick');\n        // this.node.removeEvent('mousescroll');\n        // this.node.removeEvent('transitionend');\n        // this.node.removeEvent('mousedrag');\n        // this.node.removeEvent('touchdrag');\n    }\n\n    getBoundaries() {\n        return this.cnv.node.getBoundingClientRect();\n    }\n\n    destroy() {\n        if (this.image) {\n            this.image.remove();\n            this.image = null;\n        }\n        this.zoomWrapper.remove();\n        this.node.remove();\n        this.cnv.remove();\n    }\n}\n\n/* eslint-env es6 */\n/* global View */\n\n\n// eslint-disable-next-line no-unused-vars\nclass InnerView extends View {\n    constructor(parentNode) {\n        super(parentNode);\n        this.mouseMoveHandler = null;\n    }\n\n    getContainerForMap() {\n        return this.node;\n    }\n\n    addStartCss() { // TODO review it\n        super.addStartCss();\n\n        this.node.addEvent('mousescroll', (e) => { e.stop(); });\n        this.setLensStyle({\n            opacity: 0,\n            transform: 'scale(1)'\n        });\n    }\n\n    removeDragstart() {\n        this.node.del('event:mousedrag:dragstart'); // fix mousedrag when the lens is opening second time\n    }\n\n    addEventsCanvasClass(className) {\n        this.cnv.addClass(className);\n    }\n\n    removeEventsCanvasClass(className) {\n        this.cnv.removeClass(className);\n    }\n\n    getContainerSize() {\n        return this.node.getSize();\n    }\n\n    getContainerPosition() {\n        return this.node.getPosition();\n    }\n\n    addGlobalEvent(callback) {\n        if (!this.mouseMoveHandler) {\n            this.mouseMoveHandler = callback;\n            $J.D.addEvent('mousemove', callback);\n        }\n    }\n\n    removeGlobalEvent() {\n        if (this.mouseMoveHandler) {\n            $J.D.removeEvent('mousemove', this.mouseMoveHandler);\n            this.mouseMoveHandler = null;\n        }\n    }\n\n    removeEvents() {\n        super.removeEvents();\n        this.removeGlobalEvent();\n    }\n}\n\n/* eslint-env es6 */\n/* global View */\n\n// eslint-disable-next-line no-unused-vars\nclass MagnifierView extends View {\n    getParentSize() {\n        return this.zoom.getSize();\n    }\n\n    getParentPostion() {\n        return this.zoom.getPosition(); // Inaccurate position for mobiles\n    }\n}\n\n/* eslint-env es6 */\n/* global View */\n/* eslint-disable indent */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n/* eslint guard-for-in: \"off\"*/\n/* eslint no-restricted-syntax: [\"error\",  \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\n// eslint-disable-next-line no-unused-vars\nclass OutsideView extends View {\n    getImageForEye() {\n        return this.image.node.cloneNode();\n    }\n\n    getNodeForEye() {\n        return this.zoom;\n    }\n\n    setLensPosition(position) {\n        this.cnv.setCss({\n            top: position.top,\n            left: position.left,\n        });\n    }\n\n    setCanvasNodeSize(size) {\n        this.cnv.setCss({\n            width: size.width,\n            height: size.height,\n        });\n    }\n\n    addStartCss(value) {\n        this.setLensStyle({\n            opacity: 0,\n            transform: 'translate3d(' + value.start.x + '%, ' + value.start.y + '%, 0px)'\n        });\n    }\n\n    getParentSize() {\n        return this.zoom.getSize();\n    }\n\n    getParentPostion() {\n        return this.zoom.getPosition(); // Inaccurate position for mobiles\n    }\n\n    setLensCss(position, size, transition) {\n        this.cnv.setCss({\n            top: position.top,\n            left: position.left\n        });\n\n        // super.setLensCss({ top: 0, left: 0 }, size, transition);\n        super.setLensCss(position, size, transition);\n    }\n\n    addMouseMoveEvent(callback) {\n        $J.W.addEvent('mousemove', callback);\n    }\n\n    removeMouseMoveEvent(callback) {\n        $J.W.removeEvent('mousemove', callback);\n    }\n\n    clearCss() {\n        this.cnv.removeAttr('style');\n    }\n}\n\n/* eslint-env es6 */\n/* eslint-disable indent */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n/* eslint no-restricted-syntax: [\"error\",  \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\nconst AnimationLoop = (() => {\n    const STATES = {\n        STOPPED: 0,\n        STARTED: 1\n    };\n\n    class _Animation {\n        constructor(callback, stopCallback) {\n            this.state = STATES.STOPPED;\n            this.id = null;\n            this.cb = callback || (() => {});\n            this.stopCb = stopCallback || (() => {});\n        }\n\n        start() {\n            if (this.state !== STATES.STARTED) {\n                this.state = STATES.STARTED;\n                const step = (lastTime) => {\n                    this.cb(lastTime);\n                    if (this.state !== STATES.STOPPED) {\n                        this.id = requestAnimationFrame(step);\n                    }\n                };\n\n                this.id = requestAnimationFrame(step);\n            }\n        }\n\n        stop() {\n            if (this.state !== STATES.STOPPED) {\n                this.state = STATES.STOPPED;\n                cancelAnimationFrame(this.id);\n                this.stopCb();\n            }\n        }\n    }\n\n    return _Animation;\n})();\n\n/* eslint-env es6 */\n/* global EventEmitter */\n/* global ZoomHelper */\n/* global helper */\n/* global AnimationLoop */\n/* global getDifference */\n/* global getPercentValue */\n/* global checkRange */\n/* global CURSOR_STATES */\n/* global getPercent */\n/* global DeepZoom */\n/* eslint-disable indent */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n/* eslint guard-for-in: \"off\"*/\n/* eslint no-restricted-syntax: [\"error\",  \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\nlet zoomHelper = null; // TODO tmp\n\n// eslint-disable-next-line no-unused-vars\nclass Controller extends EventEmitter {\n    constructor(view, o) {\n        super();\n\n        this.o = $J.extend({\n            test: false,\n            pan: false, // drag zoom\n            smoothing: true,\n            tiles: true,\n            customZooming: true,\n            clickBehavior: 'both', // both, up\n            upscale: false, // upscale last level image when we have retina display\n            trigger: 'hover', // hover, click, dblclick\n        }, o);\n\n        this.view = view;\n\n        this.state = globalVariables.APPEARANCE.HIDDEN;\n\n        this.x = 0;\n        this.y = 0;\n\n        this.baseScale = { x: 1, y: 1 };\n        this.scale = { x: 1, y: 1 };\n        this.dScale = { x: 1, y: 1 };\n\n        // imageSize\n        this.iSize = { width: 0, height: 0 };\n        // imagePosition\n        this.iPos = { x: 0, y: 0 };\n        // imageDPosition\n        this.iDPos = { x: 0, y: 0 };\n\n        // parentPosition\n        this.pPos = { top: 0, left: 0 };\n        // parentSize\n        this.pSize = { width: 0, height: 0 };\n\n        this.anim = null;\n        this.animCb = null;\n        this.animStep = 0;\n        this.lastAnimTimer = 0;\n\n        this.deepZoom = null;\n        this.deepZoomTimer = null;\n\n        this.lensSize = { width: 0, height: 0 };\n        this.lensHalfSize = { width: 0, height: 0 };\n        this.lensPosition = { top: 0, left: 0 };\n\n        this.currentLensSize = { width: 100, height: 100 };\n\n        this.dppx = 1; // just for image, not tiles\n\n        this.zoomNodeSize = { width: 0, height: 0 };\n\n        this.boundaries = null;\n\n        this.ANIM_STEP = 0.1;\n\n        this.nonDeepZoomImageLevels = [];\n\n        this.scrollHandler = () => {\n            if ($J.contains([globalVariables.APPEARANCE.SHOWING, globalVariables.APPEARANCE.SHOWN], this.state)) {\n                this.hide(this.state === globalVariables.APPEARANCE.SHOWING);\n            }\n        };\n    }\n\n    init() {\n        this.getSizes();\n        this.view.setLensCss(this.lensPosition, this.lensSize);\n        this.createDeepZoom();\n        this.createAnimation(this.ANIM_STEP);\n        this.view.addScrollEvent(this.scrollHandler);\n    }\n\n    // private\n    createDeepZoom() {\n        this.deepZoom = new DeepZoom(this.view.node, {\n            tiles: this.o.tiles,\n            inner: $J.contains(['inner', 'outside'], this.o.type),\n            upscale: this.o.upscale\n            // minSize: this.pSize\n        });\n\n        this.deepZoom.setParent(this);\n\n        this.on('getTile', (e) => {\n            e.stopAll();\n            this.emit('zoomGetImage', { data: e.data });\n        });\n\n        this.on('zoomCancelLoadingOfTiles', (e) => { e.stopEmptyEvent(); });\n    }\n\n    setLensContainer(lensContainer) {\n        this.view.setLensContainer(lensContainer);\n    }\n\n    // private\n    getBoundaries() {\n        this.boundaries = this.view.getParentBoundaries();\n    }\n\n    // private\n    getSizes() {\n        this.pSize = this.view.getParentSize();\n        this.pPos = this.view.getParentPostion();\n        this.zoomNodeSize = this.view.getZoomSize();\n        this.getBoundaries();\n    }\n\n    isShown() {\n        return (this.state === globalVariables.APPEARANCE.SHOWN);\n    }\n\n    isShowing() {\n        return (this.state === globalVariables.APPEARANCE.SHOWING);\n    }\n\n    // private\n    deepZoomAction(equals, newSize) {\n        clearTimeout(this.deepZoomTimer);\n        this.deepZoomTimer = setTimeout(() => {\n            this.deepZoom.loadImages();\n            if (newSize) {\n                this.deepZoom.setLensSize(newSize.width, newSize.height);\n                this.deepZoom.resize();\n            }\n            this.deepZoom.action(this.iDPos, this.dScale);\n            if (!equals) {\n                this.deepZoomAction(this.dScale.x === this.scale.x);\n            }\n        }, this.lastAnimTimer + 10); // must be more than fps (1000 / 60 = 16)\n\n        if (newSize) {\n            this.deepZoom.setLensSize(newSize.width, newSize.height);\n            this.deepZoom.resize();\n        }\n        this.deepZoom.action(this.iDPos, this.dScale);\n    }\n\n    // private\n    stopMovingAndZooming() {\n        this.scale.x = this.dScale.x;\n        this.scale.y = this.dScale.y;\n        this.iPos.x = this.iDPos.x;\n        this.iPos.y = this.iDPos.y;\n    }\n\n    // private\n    createAnimation(step) {\n        const checkScale = (sett) => {\n            let result = false;\n\n            if (this.dScale[sett] < this.baseScale[sett]) {\n                result = true;\n                this.dScale[sett] = this.baseScale[sett];\n            }\n\n            if (this.dScale[sett] > 1) {\n                result = true;\n                this.dScale[sett] = 1;\n            }\n\n            return result;\n        };\n\n        this.animStep = step;\n\n        let last = 0;\n        this.anim = new AnimationLoop((lastTime) => {\n            if (!last) { last = lastTime; return; }\n            let dx;\n            let dy;\n            let diffX;\n            let diffY;\n            let isChanged = false;\n            this.lastAnimTimer = lastTime - last;\n\n            last = lastTime;\n\n            let xScaleWasClosed = false;\n            let yScaleWasClosed = false;\n\n            if (this.scale.x !== this.dScale.x) {\n                isChanged = true;\n                this.sendZoomingAction();\n                // this.setCursorState();\n\n                diffX = this.scale.x - this.dScale.x;\n                // diffY = this.scale.y - this.dScale.y;\n\n                dx = diffX * this.animStep;\n                // dy = diffY * this.animStep;\n\n                this.dScale.x += dx;\n                this.dScale.y += dx;\n                // this.dScale.y += dy;\n\n                xScaleWasClosed = checkScale('x');\n                yScaleWasClosed = xScaleWasClosed;\n                // yScaleWasClosed = checkScale('y');\n\n                // if (Math.abs(diffX) < 0.0001 || Math.abs(diffY) < 0.0001) {\n                if (Math.abs(diffX) < 0.0001) {\n                    this.dScale.x = this.scale.x;\n                    // this.dScale.y = this.scale.y;\n                    this.dScale.y = this.scale.x;\n                }\n            }\n\n            if (this.iPos.x !== this.iDPos.x || this.iPos.y !== this.iDPos.y) {\n                isChanged = true;\n                diffX = this.iPos.x - this.iDPos.x;\n                diffY = this.iPos.y - this.iDPos.y;\n\n                dx = diffX * this.animStep;\n                dy = diffY * this.animStep;\n\n                this.iDPos.x += dx;\n                this.iDPos.y += dy;\n\n                this.iDPos.x = helper.round(this.iDPos.x, 4);\n                this.iDPos.y = helper.round(this.iDPos.y, 4);\n\n                if (Math.max(Math.abs(diffX), Math.abs(diffY)) < 1 || xScaleWasClosed || yScaleWasClosed) {\n                    this.iDPos.x = this.iPos.x;\n                    this.iDPos.y = this.iPos.y;\n                }\n            }\n\n            if (isChanged) {\n                this.render(this.iDPos, this.dScale);\n            } else if (this.animCb) {\n                this.animCb();\n                this.animStep = step;\n                this.animCb = null;\n            }\n        }, () => {\n            last = 0;\n        });\n    }\n\n    render(position, scale) {\n        this.deepZoomAction();\n        this.view.setImagePosition(position || this.iDPos, scale || this.dScale);\n    }\n\n    // private\n    correctX(value) { return value - this.pPos.left; }\n    // private\n    correctY(value) { return value - this.pPos.top; }\n\n    // private\n    setXY(x, y) {\n        this.x = this.correctX(x);\n        this.y = this.correctY(y);\n    }\n\n    getZoomData(scale) {\n        let result = 0;\n\n        if (!scale) { scale = this.scale.x; }\n\n        if (this.isShown() || this.isShowing()) {\n            result = helper.round((scale - this.baseScale.x) / (1 - this.baseScale.x), 2);\n        }\n\n        return result;\n    }\n\n    getNextMinZoom() {\n        let result = this.deepZoom.getScale('zoomout');\n\n        if (result < this.baseScale.x) { result = this.baseScale.x; }\n\n        return this.getZoomData(result);\n    }\n\n    getNextMaxZoom() {\n        let result = this.deepZoom.getScale('zoomin');\n\n        if (result > 1) { result = 1; }\n\n        return this.getZoomData(result);\n    }\n\n\n    // private\n    zoom(direction, x, y) {\n        const last = this.scale.x;\n        const is = this.iSize;\n        const cw = is.width * this.scale.x;\n        const ch = is.height * this.scale.y;\n        const dw = getDifference(is.width, cw);\n        const dh = getDifference(is.height, ch);\n\n        x = x || (this.pPos.left + this.lensHalfSize.width);\n        y = y || (this.pPos.top + this.lensHalfSize.height);\n\n        this.basePercentOfScale = {\n            x: getPercent((Math.abs(this.iPos.x) + this.correctX(x)) - dw, cw),\n            y: getPercent((Math.abs(this.iPos.y) + this.correctY(y)) - dh, ch)\n        };\n\n        const scale = this.deepZoom.getScale(direction);\n\n        this.scale.x = scale;\n        this.scale.y = scale;\n\n        this.setXY(x, y);\n\n        this.afterZoom(last);\n    }\n\n    afterZoom(lastScale) {\n        if (lastScale !== this.scale.x) {\n            this.sendZoomingAction();\n            this.setCursorState();\n\n            if (this.o.smoothing) {\n                this.animStep = 0.25;\n            } else {\n                this.dScale.x = this.scale.x;\n                this.dScale.y = this.scale.y;\n                this.iDPos.x = this.iPos.x;\n                this.iDPos.y = this.iPos.y;\n                this.render(this.iPos, this.scale);\n            }\n        }\n    }\n\n    // public\n    zoomUp(x, y) {\n        if ((this.isShown() || this.isShowing()) && this.scale.x !== 1) {\n            this.zoom('zoomin', x, y);\n            return true;\n        }\n\n        return false;\n    }\n\n    // public\n    zoomDown(x, y) {\n        if ((this.isShown() || this.isShowing()) && this.scale.x !== this.baseScale.x) {\n            this.zoom('zoomout', x, y);\n            return true;\n        }\n\n        return false;\n    }\n\n    // private\n    sendZoomingAction() {\n        clearTimeout(this.zoomingTimer);\n        this.zoomingTimer = setTimeout($((from) => {\n            this.emit('zooming', {\n                data: {\n                    zoom: this.getZoomData(), // from 0 to 1\n                    from: from,\n                    to: this.scale.x\n                }\n            });\n        }).bind(this, this.dScale.x), 24);\n    }\n\n    // private\n    setCursorState(state) {\n        if (!$J.defined(state)) {\n            const scale = this.getZoomData();\n\n            if (scale === 0) {\n                state = 'zoomIn';\n            } else if (scale === 1) {\n                state = 'zoomOut';\n            } else if (scale > 0 && scale < 1) {\n                if (this.o.clickBehavior === 'up') {\n                    state = 'zoomIn';\n                } else {\n                    state = 'zoomOut';\n                }\n            }\n        }\n\n        if (this.currentCursorState !== state) {\n            this.view.toggleCursorClass(CURSOR_STATES[this.currentCursorState], CURSOR_STATES[state]);\n            this.currentCursorState = state;\n        }\n    }\n\n    setImage(data) { // when will work last block \"else\" if deepZoom always true!?\n        const node = data.node;\n\n        if (this.isShown() || this.isShowing()) {\n            const _data = $J.extend({}, data.callbackData);\n            _data.node = node;\n            this.deepZoom.setImage(_data);\n        }\n    }\n\n    // private\n    setSizeOfLens(width, height) {\n        this.lensSize = { width: width, height: height };\n\n        this.lensHalfSize = {\n            width: this.lensSize.width / 2,\n            height: this.lensSize.height / 2\n        };\n    }\n\n    // private\n    calcSizeOfLens() {\n        const ps = this.pSize;\n        const cls = this.currentLensSize;\n\n        this.setSizeOfLens(getPercentValue(ps.width, cls.width), getPercentValue(ps.height, cls.height));\n    }\n\n    // private\n    getBaseScale() {\n        this.baseScale = {\n            x: this.zoomNodeSize.width / this.iSize.width,\n            y: this.zoomNodeSize.height / this.iSize.height\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    calcPositionOfLens() {}\n\n    // eslint-disable-next-line class-methods-use-this\n    getImagePosition() {}\n\n    // private\n    showDeepZoom(bigImageOriginWidth, bigImageOriginHeight) {\n        if (this.deepZoom) {\n            /* start-removable-tile-helper-block */\n            if (this.o.test && !zoomHelper) {\n                zoomHelper = new ZoomHelper();\n                zoomHelper.setParent(this);\n            }\n            /* end-removable-tile-helper-block */\n\n            const hash = this.view.getHash();\n\n            if (hash) {\n                this.deepZoom.setHash(hash);\n            }\n\n            this.deepZoom\n                .setLensSize(this.lensSize.width, this.lensSize.height)\n                .setMinSize(this.zoomNodeSize.width, this.zoomNodeSize.height)\n                .setMaxSize(this.iSize.width, this.iSize.height, bigImageOriginWidth, bigImageOriginHeight)\n                .show();\n        }\n    }\n\n    // private\n    endOfShowing(isWithoutSettingEvents) {\n        let result = false;\n        if (this.state === globalVariables.APPEARANCE.SHOWING) {\n            result = true;\n            this.state = globalVariables.APPEARANCE.SHOWN;\n\n            if (!isWithoutSettingEvents) {\n                this.setEvents();\n            }\n\n            this.setCursorState();\n            if (!this.o.smoothing) {\n                this.deepZoomAction();\n            }\n        }\n        return result;\n    }\n\n    sendZoomShownEvent() {\n        this.emit('zoomShown', {\n            data: {\n                clientPosition: {\n                    x: this.x,\n                    y: this.y\n                },\n                pagePosition: {\n                    x: this.pPos.left,\n                    y: this.pPos.top\n                }\n            }\n        });\n    }\n\n    showCenter(smallImg, largeImg, toLevel) {\n        this.getSizes();\n        const x = this.pPos.left + this.pSize.width / 2;\n        const y = this.pPos.top + this.pSize.height / 2;\n\n        return this.show(smallImg, largeImg, x, y, false, toLevel);\n    }\n\n    /*\n        public\n        toLevel = max || undefined(default), first, zero\n    */\n    show() {\n        if (this.state !== globalVariables.APPEARANCE.HIDDEN) { return false; }\n        this.state = globalVariables.APPEARANCE.SHOWING;\n\n        return true;\n    }\n\n    // private\n    endOfHiding() {\n        this.stopMovingAndZooming();\n        clearTimeout(this.hideTimer);\n        this.anim.stop();\n\n        this.setCursorState('zoomIn');\n\n        this.view.clearCss();\n\n        this.baseScale = { x: 1, y: 1 };\n        this.scale = { x: 1, y: 1 };\n        this.dScale = { x: 1, y: 1 };\n        this.setUpEvent = false;\n        this.basePercentOfScale = { x: 0, y: 0 };\n\n        clearTimeout(this.deepZoomTimer);\n        this.deepZoom.hide();\n\n        this.view.clearDOM();\n\n        this.state = globalVariables.APPEARANCE.HIDDEN;\n\n        /* start-removable-tile-helper-block */\n        if (zoomHelper) {\n            zoomHelper.destroy();\n            zoomHelper = null;\n        }\n        /* end-removable-tile-helper-block */\n\n        this.emit('zoomHidden', {\n            data: {\n                clientPosition: {\n                    x: this.x,\n                    y: this.y\n                },\n                pagePosition: {\n                    x: this.pPos.left,\n                    y: this.pPos.top\n                }\n            }\n        });\n    }\n\n    // private\n    hide(force) {\n        if (!$J.contains([globalVariables.APPEARANCE.SHOWN, globalVariables.APPEARANCE.SHOWING], this.state)) { return false; }\n\n        this.state = globalVariables.APPEARANCE.HIDING;\n        this.view.removeEvents();\n\n        if (force) {\n            clearTimeout(this.deepZoomTimer);\n            this.deepZoom.hide();\n\n            this.endOfHiding();\n        } else {\n            this.stopMovingAndZooming();\n        }\n\n        return true;\n    }\n\n    // private\n    addClickEvent() {\n        let eventName = 'btnclick tap';\n\n        if (this.o.trigger === 'dblclick') {\n            eventName = 'dblbtnclick dbltap';\n        }\n\n        this.view.setEventToWrapper(eventName, (e) => {\n            e.stop();\n\n            this.setXY(e.x, e.y);\n            if (this.o.clickBehavior === 'up') {\n                if (!this.zoomUp(e.x, e.y)) {\n                    this.hide();\n                }\n            } else if (this.o.smoothing && this.scale.x !== this.baseScale.x) {\n                this.hide();\n            } else {\n                this.hide(true);\n            }\n        });\n    }\n\n    customMove(x, y) {\n        if (!$J.contains([globalVariables.APPEARANCE.HIDDEN, globalVariables.APPEARANCE.HIDING], this.state)) {\n            this.move(x, y);\n        }\n    }\n\n    // private\n    move(x, y) {\n        this.setXY(x, y);\n        this.afterMove();\n    }\n\n    // private\n    afterMove() {\n        if (!this.o.smoothing) {\n            this.render(this.iPos, this.scale);\n        }\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    setEvents() {}\n\n    setLensStyleOnResize() {\n        this.view.setLensStyle({ top: this.lensPosition.top, left: this.lensPosition.left, width: this.lensSize.width, height: this.lensSize.height });\n    }\n\n    onResize() {\n        if (this.state !== globalVariables.APPEARANCE.HIDDEN) {\n            if (this.state === globalVariables.APPEARANCE.HIDING) {\n                this.hide(true);\n            } else {\n                if (this.state === globalVariables.APPEARANCE.SHOWING) {\n                    if (this.o.smoothing) {\n                        this.state = globalVariables.APPEARANCE.SHOWN;\n                        this.setEvents();\n\n                        this.view.removeEventFromWrapper('transitionend');\n                        this.view.setLensStyle({ 'transition': '' });\n                        this.stopMovingAndZooming();\n                        this.view.setImagePosition(this.iPos, this.scale);\n                    }\n                }\n\n                this.getSizes();\n\n                if (this.zoomNodeSize.width > this.iSize.width || this.zoomNodeSize.height > this.iSize.height) {\n                    this.hide(true);\n                    return;\n                }\n\n                this.getBaseScale();\n\n                this.scale.x = checkRange(this.scale.x, this.baseScale.x, 1);\n                this.scale.y = checkRange(this.scale.y, this.baseScale.y, 1);\n\n                this.calcSizeOfLens();\n                this.calcPositionOfLens();\n\n                this.setLensStyleOnResize();\n\n                this.deepZoom\n                    .setLensSize(this.pSize.width, this.pSize.height)\n                    .setMinSize(this.zoomNodeSize.width, this.zoomNodeSize.height)\n                    // .setMaxSize(this.iSize.width, this.iSize.height)\n                    .resize();\n\n                // this.calcPositionOfImage(false, true);\n\n                this.view.setEventNodePositionSize(this.pPos, this.pSize);\n\n                if (!this.o.smoothing) {\n                    this.sendZoomingAction();\n                    this.setCursorState();\n                    this.deepZoomAction();\n                    this.view.setImagePosition(this.iPos, this.scale);\n                }\n            }\n        }\n    }\n\n    destroy() {\n        this.hide(true);\n        clearTimeout(this.zoomingTimer);\n\n        this.view.removeScrollEvent(this.scrollHandler);\n\n        this.setCursorState('canZoom');\n\n        clearTimeout(this.deepZoomTimer);\n        this.deepZoom.destroy();\n        this.deepZoom = null;\n        this.off('getTile');\n        this.off('zoomCancelLoadingOfTiles');\n\n        /* start-removable-tile-helper-block */\n        if (zoomHelper) {\n            zoomHelper.destroy();\n            zoomHelper = null;\n        }\n        /* end-removable-tile-helper-block */\n\n        this.zoomingTimer = null;\n        super.destroy();\n    }\n}\n\n/* eslint-env es6 */\n/* global TOUCHEND */\n/* global TOUCH */\n/* global checkRange */\n/* global ZoomMap */\n/* global Controller */\n/* global getPercentValue */\n/* global getDifference */\n/* global checkImagePosition */\n/* global CURSOR_STATES */\n/* global getPercent */\n/* global MOVE */\n/* eslint-disable indent */\n/* eslint-disable no-lonely-if */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n/* eslint guard-for-in: \"off\"*/\n/* eslint no-restricted-syntax: [\"error\",  \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\n// eslint-disable-next-line no-unused-vars\nconst InnerController = (() => {\n    // const MAX_SCALE_SIZE = 0.9135416666666667;\n    // const MIN_SCALE_SIZE = 0.03854166666666667;\n    // const MAX_STEP = 0.07;\n    // const MAX_STEP = 0.2;\n    // const MIN_STEP = 0.2;\n    // const MIN_STEP = 0.5;\n    // const getStepForAppearance = (scaleSize) => {\n    //     let nextStep;\n\n    //     nextStep = Math.abs(MAX_SCALE_SIZE - MIN_SCALE_SIZE) / Math.abs(MAX_STEP - MIN_STEP);\n    //     nextStep = MAX_STEP + (MAX_SCALE_SIZE - scaleSize) / nextStep;\n\n    //     return nextStep;\n    // };\n\n    const outOfSquare = (checkedPoint, nodePos, nodeSize, scrollPosition) => {\n        let result = false;\n\n        const x = nodePos.left - scrollPosition.x;\n        const y = nodePos.top - scrollPosition.y;\n\n        if (checkedPoint.x <= x || checkedPoint.y <= y || checkedPoint.x >= x + nodeSize.width || checkedPoint.y >= y + nodeSize.height) {\n            result = true;\n        }\n\n        return result;\n    };\n\n    class IController extends Controller {\n        constructor(view, o) {\n            super(view, $J.extend({\n                map: false,\n                mapSize: 50 // in percentage // 100% is 50% from each image side\n            }, o));\n\n            this.basePercentOfScale = { x: 0, y: 0 };\n            this.clonedImage = null;\n            this.hideTimer = null;\n            this.showTimer = null;\n\n            this.map = null;\n            this.zoomingTimer = null;\n\n            this.currentCursorState = 0;\n\n            this.innerImagePosition = { x: 0, y: 0 };\n\n            this.setUpEvent = false;\n\n            if ($J.browser.mobile) {\n                this.o.pan = true;\n\n                if (this.o.trigger === 'hover') {\n                    this.o.trigger = 'click';\n                }\n            }\n\n            this.view.setLensCss(this.lensPosition, this.lensSize);\n            this.ANIM_STEP = 0.3;\n        }\n\n        init() {\n            super.init();\n            this.createZoomMap();\n        }\n\n        // private\n        createZoomMap() {\n            if (!this.o.map) { return; }\n\n            const mWidth = parseInt(getPercentValue(this.pSize.width / 2, this.o.mapSize), 10);\n            const mHeight = parseInt(getPercentValue(this.pSize.height / 2, this.o.mapSize), 10);\n\n            this.map = new ZoomMap(this.view.getContainerForMap(), {\n                maxwidth: mWidth,\n                maxheight: mHeight\n            });\n            this.map.setParent(this);\n\n            this.on('zoomGetImage', (e) => {\n                e.stopEmptyEvent();\n                e.data.map = true;\n                e.data.exactSize = true;\n            });\n\n            this.on('zoomMapNewPosition', (e) => {\n                e.stopAll();\n\n                // this.move(\n                //     this.pPos.left + getPercentValue(this.lensSize.width, e.data.x),\n                //     this.pPos.top + getPercentValue(this.lensSize.height, e.data.y)\n                // );\n\n                this.setXY(\n                    this.pPos.left + getPercentValue(this.lensSize.width, e.data.x),\n                    this.pPos.top + getPercentValue(this.lensSize.height, e.data.y)\n                );\n\n                this.calcPositionOfImageInCenter(this.scale);\n\n                if (!this.o.smoothing) {\n                    this.deepZoomAction();\n                    this.view.setImagePosition(this.iPos, this.scale);\n                    if (this.map) {\n                        this.map.move(this.iPos, this.scale);\n                    }\n                }\n            });\n        }\n\n        // private\n        move(x, y) {\n            this.setXY(x, y);\n            this.calcPositionOfImage(this.scale);\n            this.afterMove();\n        }\n\n        // private\n        render(position, scale) {\n            super.render(position, scale);\n\n            if (this.map) {\n                this.map.move(position || this.iDPos, scale || this.dScale);\n            }\n        }\n\n        // private\n        calcPositionOfImageForPinch(scale) {\n            if (!scale) {\n                scale = this.dScale;\n            }\n\n            const w = this.iSize.width * scale.x;\n            const h = this.iSize.height * scale.y;\n\n            const dw = getDifference(this.iSize.width, w);\n            const dh = getDifference(this.iSize.height, h);\n\n            let x;\n            let y;\n            if (w > this.lensSize.width) {\n                x = this.x - (getPercentValue(w, this.basePercentOfScale.x) + dw);\n                x = checkImagePosition(x, 0 - dw, dw + w, this.lensSize.width);\n            } else {\n                x = (this.lensSize.width / 2) - (w / 2 + dw);\n            }\n\n            if (h > this.lensSize.height) {\n                y = this.y - (getPercentValue(h, this.basePercentOfScale.y) + dh);\n                y = checkImagePosition(y, 0 - dh, dh + h, this.lensSize.height);\n            } else {\n                y = (this.lensSize.height / 2) - (h / 2 + dh);\n            }\n\n            this.iPos = { x: x, y: y };\n        }\n\n        setScale(scale, x, y) {\n            if (this.state === globalVariables.APPEARANCE.SHOWN) {\n                if ($J.defined(x)) {\n                    this.setXY(x, y);\n                }\n\n                this.scale.x = scale;\n                this.scale.y = scale;\n\n                this.scale.x = checkRange(this.scale.x, this.baseScale.x, 1);\n                this.scale.y = checkRange(this.scale.y, this.baseScale.y, 1);\n\n                this.calcPositionOfImageForPinch(this.scale);\n                this.sendZoomingAction();\n                this.setCursorState();\n\n                if (!this.o.smoothing) {\n                    this.dScale.x = this.scale.x;\n                    this.dScale.y = this.scale.y;\n                    this.imageDPosition.x = this.imagePosition.x;\n                    this.imageDPosition.y = this.imagePosition.y;\n                    this.deepZoomAction();\n                    this.view.setImagePosition(this.imagePosition, this.scale);\n                    if (this.map) { this.map.move(this.imagePosition, this.scale); }\n                }\n            }\n        }\n\n        // private\n        afterZoom(lastScale) {\n            this.calcPositionOfImageForPinch(this.scale);\n            super.afterZoom(lastScale);\n        }\n\n        // private\n        calcPositionOfImage(scale, first, _x, _y) {\n            const sw = (_x || this.x);\n            const sh = (_y || this.y);\n\n            if (!scale) {\n                scale = this.dScale;\n            }\n\n            const w = this.iSize.width * scale.x;\n            const h = this.iSize.height * scale.y;\n            const dw = getDifference(this.iSize.width, w);\n            const dh = getDifference(this.iSize.height, h);\n            let x;\n            let y;\n\n            // x = sw - getPercentValue(w, getPercent(sw, this.pSize.width)) - dw;\n            // y = sh - getPercentValue(h, getPercent(sh, this.pSize.height)) - dh;\n\n            // x = checkImagePosition(x, 0 - dw, dw + w, this.lensSize.width);\n            // y = checkImagePosition(y, 0 - dh, dh + h, this.lensSize.height);\n\n            if (w > this.lensSize.width) {\n                x = sw - getPercentValue(w, getPercent(sw, this.pSize.width)) - dw;\n                x = checkImagePosition(x, 0 - dw, dw + w, this.lensSize.width);\n            } else {\n                x = (this.lensSize.width / 2) - (w / 2 + dw);\n            }\n\n            if (h > this.lensSize.height) {\n                y = sh - getPercentValue(h, getPercent(sh, this.pSize.height)) - dh;\n                y = checkImagePosition(y, 0 - dh, dh + h, this.lensSize.height);\n            } else {\n                y = (this.lensSize.height / 2) - (h / 2 + dh);\n            }\n\n            this.iPos = { x: x, y: y };\n        }\n\n        calcPositionOfImageInCenter(scale) {\n            if (!scale) {\n                scale = this.dScale;\n            }\n\n            const w = this.iSize.width * scale.x;\n            const h = this.iSize.height * scale.y;\n            const dw = getDifference(this.iSize.width, w);\n            const dh = getDifference(this.iSize.height, h);\n\n            // let x = this.x / (this.zoomNodeSize.width / w);\n            // let y = this.y / (this.zoomNodeSize.height / h);\n            let x = this.x / (this.lensSize.width / w);\n            let y = this.y / (this.lensSize.height / h);\n\n            x = this.lensSize.width / 2 - x - dw;\n            y = this.lensSize.height / 2 - y - dh;\n\n            x = checkImagePosition(x, 0 - dw, dw + w, this.lensSize.width);\n            y = checkImagePosition(y, 0 - dh, dh + h, this.lensSize.height);\n\n            this.iPos = { x: x, y: y };\n        }\n\n        setBasePercent(point) {\n            if ($J.contains([globalVariables.APPEARANCE.SHOWN, globalVariables.APPEARANCE.SHOWING], this.state)) {\n                const is = this.iSize;\n                const cw = is.width * this.scale.x;\n                const ch = is.height * this.scale.y;\n                const dw = getDifference(is.width, cw);\n                const dh = getDifference(is.height, ch);\n\n                this.basePercentOfScale = {\n                    x: getPercent((Math.abs(this.iPos.x) + this.correctX(point.x)) - dw, cw),\n                    y: getPercent((Math.abs(this.iPos.y) + this.correctY(point.y)) - dh, ch)\n                };\n            }\n        }\n\n        setImage(data) { //when will work last block \"else\" if deepZoom always true!?\n            if (this.isShown() || this.isShowing()) {\n                if (data.callbackData.map) {\n                    if (this.map) {\n                        this.map.setImg(data.src, data.srcset);\n                    }\n                } else {\n                    super.setImage(data);\n                }\n            }\n        }\n\n        // private\n        endOfShowing(isWithoutSettingEvents) {\n            if (super.endOfShowing(isWithoutSettingEvents)) {\n                if (this.map) {\n                    this.map.show();\n                }\n            }\n        }\n\n        getImagePosition() {\n            this.innerImagePosition = {\n                x: getDifference(this.lensSize.width, this.zoomNodeSize.width),\n                y: getDifference(this.lensSize.height, this.zoomNodeSize.height)\n            };\n        }\n\n        /*\n            public\n            toLevel = max || undefined(default), first, zero\n        */\n        show(smallImg, bigImageOptions, x, y, actionEndHide, toLevel) {\n            if (!super.show()) { return false; }\n\n            this.setUpEvent = actionEndHide;\n\n            this.iSize = {\n                width: bigImageOptions.width,\n                height: bigImageOptions.height\n            };\n\n            this.view.addStartCss();\n            this.view.appendNodes(smallImg, this.iSize);\n\n            this.getSizes();\n            this.setXY(x, y);\n            this.calcSizeOfLens();\n            this.getImagePosition();\n            this.getBaseScale();\n            this.showDeepZoom(bigImageOptions.originWidth, bigImageOptions.originHeight);\n\n            this.showTimer = setTimeout(() => { // this timeout helps us to show non tile image without blink (cloned image manages to render)\n                this.showTimer = null;\n                this.emit('zoomBeforeShow', { data: {} });\n\n                if (toLevel && toLevel !== 'max') {\n                    let scale;\n\n                    if (toLevel === 'zero') {\n                        this.scale.x = this.baseScale.x;\n                        this.scale.y = this.baseScale.y;\n                    } else {\n                        scale = this.deepZoom.getScale('zoomin');\n                        this.scale.x = scale;\n                        this.scale.y = scale;\n                    }\n                }\n\n                this.calcPositionOfImage(this.scale, true);\n\n                this.view.setEventNodePositionSize(this.pPos, this.pSize);\n\n                this.dScale.x = this.baseScale.x;\n                this.dScale.y = this.baseScale.y;\n\n                this.iDPos = {\n                    x: (getDifference(this.iSize.width, this.iSize.width * this.dScale.x) * (-1)) + this.innerImagePosition.x,\n                    y: (getDifference(this.iSize.height, this.iSize.height * this.dScale.y) * (-1)) + this.innerImagePosition.y\n                };\n\n                this.view.setLensCss(this.lensPosition, this.lensSize);\n\n                this.view.setImageSize(this.iDPos, this.iSize, this.dScale);\n\n                this.boundaries = this.view.getBoundaries();\n\n                if (this.map) {\n                    this.map.prepare(this.iSize.width, this.iSize.height, this.pSize.width, this.pSize.height);\n                }\n\n                if (this.o.smoothing && toLevel !== 'zero') {\n                    this.setEvents();\n                    // this.animStep = getStepForAppearance(this.scale.x - this.baseScale.x);\n                    this.animStep = 0.3;\n                    this.animCb = () => {\n                        this.deepZoomAction();\n                        this.endOfShowing(true);\n                    };\n                } else {\n                    this.endOfShowing();\n                }\n\n                if (this.o.smoothing) {\n                    this.anim.start();\n                }\n\n                // deleted it from this.endOfShowing() function because it sometimes doesn't work\n                this.sendZoomShownEvent();\n            }, 0);\n            return true;\n        }\n\n        hide(force) {\n            const result = super.hide(force);\n\n            if (result) {\n                clearTimeout(this.showTimer);\n                if (force) {\n                    // empty\n                } else {\n                    if (this.scale.x !== this.baseScale.x || this.scale.y !== this.baseScale.y) {\n                        // this.animStep = getStepForAppearance(this.scale.x - this.baseScale.x);\n                        this.animStep = 0.4;\n                        this.scale.x = this.baseScale.x;\n                        this.scale.y = this.baseScale.y;\n\n                        this.iPos = {\n                            x: (getDifference(this.iSize.width, this.iSize.width * this.scale.x) * (-1)) + this.innerImagePosition.x,\n                            y: (getDifference(this.iSize.height, this.iSize.height * this.scale.y) * (-1)) + this.innerImagePosition.y\n                        };\n\n                        this.animCb = () => {\n                            this.endOfHiding();\n                        };\n                    } else {\n                        this.endOfHiding();\n                    }\n                }\n            }\n\n            return result;\n        }\n\n        // private\n        addMouseScrollEvent() {\n            this.view.setEventToWrapper('mousescroll', (e) => {\n                e.stop();\n\n                if (this.o.pan) {\n                    const is = this.iSize;\n                    const cw = is.width * this.scale.x;\n                    const ch = is.height * this.scale.y;\n                    const dw = getDifference(is.width, cw);\n                    const dh = getDifference(is.height, ch);\n\n                    this.basePercentOfScale = {\n                        x: getPercent((Math.abs(this.iPos.x) + this.correctX(e.x)) - dw, cw),\n                        y: getPercent((Math.abs(this.iPos.y) + this.correctY(e.y)) - dh, ch)\n                    };\n                }\n\n                let delta;\n                const last = this.scale.x;\n\n                if (e.isMouse) {\n                    const percent = 37;\n                    const v = (e.delta / getPercentValue(e.deltaFactor, percent));\n                    this.scale.x += v;\n                    this.scale.y += v;\n                } else {\n                    delta = e.delta;\n                    if (Math.abs(delta) > 15) {\n                        delta = 15;\n                        if (e.delta < 0) {\n                            delta *= (-1);\n                        }\n                    }\n\n                    delta /= 350;\n\n                    this.scale.x += delta;\n                    this.scale.y += delta;\n                }\n\n                this.scale.x = checkRange(this.scale.x, this.baseScale.x, 1);\n                this.scale.y = checkRange(this.scale.y, this.baseScale.y, 1);\n\n                if (this.o.pan) {\n                    this.setXY(e.x, e.y);\n                    this.calcPositionOfImageForPinch(this.scale);\n                } else {\n                    this.calcPositionOfImage(this.scale);\n                }\n\n                if (last !== this.scale.x) {\n                    this.sendZoomingAction();\n                    this.setCursorState();\n                    if (!this.o.smoothing) {\n                        this.dScale.x = this.scale.x;\n                        this.dScale.y = this.scale.y;\n                        this.iDPos.x = this.iPos.x;\n                        this.iDPos.y = this.iPos.y;\n                        this.deepZoomAction();\n                        this.view.setImagePosition(this.iPos, this.scale);\n                        if (this.map) { this.map.move(this.iPos, this.scale); }\n                    }\n                }\n\n                this.hideByTimer();\n            });\n        }\n\n        hideByTimer() {\n            clearTimeout(this.hideTimer);\n\n            if (this.scale.x <= this.baseScale.x + 0.00000001 && this.o.type !== 'outside') {\n                this.hideTimer = setTimeout(() => {\n                    this.hide(true);\n                }, 1000);\n            }\n        }\n\n        // private\n        addInnerTouchDrag() {\n            let move = false;\n            let lastX;\n            let lastY;\n            let currentWidth;\n            let currentHeight;\n            let dw;\n            let dh;\n\n            this.view.setEventToWrapper(TOUCH, (e) => {\n                e.stop();\n\n                if (e.state === 'dragstart') {\n                    move = true;\n                    this.view.addEventsCanvasClass(CURSOR_STATES.drag);\n\n                    this.stopMovingAndZooming();\n\n                    // this.scale.x = this.dScale.x;\n                    // this.scale.y = this.dScale.y;\n\n                    this.setXY(e.x, e.y);\n\n                    currentWidth = this.iSize.width * this.scale.x;\n                    currentHeight = this.iSize.height * this.scale.y;\n                    dw = getDifference(this.iSize.width, currentWidth);\n                    dh = getDifference(this.iSize.height, currentHeight);\n\n                    lastX = e.x;\n                    lastY = e.y;\n                } else if (e.state === 'dragend') {\n                    move = false;\n                    this.view.removeEventsCanvasClass(CURSOR_STATES.drag);\n                } else if (move) {\n                    this.setXY(e.x, e.y);\n\n                    if (currentWidth > this.lensSize.width) {\n                        this.iPos.x += (e.x - lastX);\n                        this.iPos.x = checkImagePosition(this.iPos.x, 0 - dw, dw + currentWidth, this.lensSize.width);\n                    } else {\n                        this.iPos.x = (this.lensSize.width / 2) - (currentWidth / 2 + dw);\n                    }\n\n                    if (currentHeight > this.lensSize.height) {\n                        this.iPos.y += (e.y - lastY);\n                        this.iPos.y = checkImagePosition(this.iPos.y, 0 - dh, dh + currentHeight, this.lensSize.height);\n                    } else {\n                        this.iPos.y = (this.lensSize.height / 2) - (currentHeight / 2 + dh);\n                    }\n\n                    if (this.o.smoothing && this.o.pan) {\n                        this.animStep = 0.3;\n                    } else {\n                        this.iDPos.x = this.iPos.x;\n                        this.iDPos.y = this.iPos.y;\n                        this.deepZoomAction();\n                        this.view.setImagePosition(this.iPos, this.scale);\n                        if (this.map) {\n                            this.map.move(this.iPos, this.scale);\n                        }\n                    }\n\n                    lastX = e.x;\n                    lastY = e.y;\n                }\n            });\n        }\n\n        // private\n        addInnerPinch() {\n            let timer;\n            let startScale;\n            const saveValue = 1 - this.baseScale.x;\n            let scale;\n            let maxCompensation;\n            let minCompensation;\n            let max;\n            let min;\n\n            if (!this.o.customZooming) { return; }\n\n            this.view.setEventToWrapper('pinch', (e) => {\n                e.stop();\n\n                if (e.state === 'pinchstart') {\n                    clearTimeout(timer);\n                    this.stopMovingAndZooming();\n                    this.view.node.removeEvent(TOUCH);\n\n                    this.scale.x = this.dScale.x;\n                    this.scale.y = this.dScale.y;\n\n                    startScale = this.scale.x;\n\n                    maxCompensation = 1;\n                    minCompensation = 1;\n                    max = 1;\n                    min = this.baseScale.x;\n\n                    this.setBasePercent(e.centerPoint);\n                } else if (e.state === 'pinchresize') {\n                    this.setBasePercent(e.centerPoint);\n                } else if (e.state === 'pinchmove') {\n                    this.setXY(e.centerPoint.x, e.centerPoint.y);\n\n                    scale = e.scale;\n                    scale *= startScale;\n\n                    if (max < scale) {\n                        max = scale;\n\n                        min = this.baseScale.x;\n                        minCompensation = 1;\n\n                        maxCompensation = saveValue / (max - this.baseScale.x);\n                    }\n\n                    if (min > scale) {\n                        min = scale;\n\n                        max = 1;\n                        maxCompensation = 1;\n\n                        minCompensation = this.baseScale.x / min;\n                    }\n\n                    scale = (this.baseScale.x + (scale - this.baseScale.x) * maxCompensation) * minCompensation;\n\n                    this.scale.x = scale;\n                    this.scale.y = scale;\n\n                    this.scale.x = checkRange(this.scale.x, this.baseScale.x, 1);\n                    this.scale.y = checkRange(this.scale.y, this.baseScale.y, 1);\n\n                    this.calcPositionOfImageForPinch(this.scale);\n                    this.sendZoomingAction();\n                    this.setCursorState();\n\n                    if (!this.o.smoothing) {\n                        this.dScale.x = this.scale.x;\n                        this.dScale.y = this.scale.y;\n                        this.iDPos.x = this.iPos.x;\n                        this.iDPos.y = this.iPos.y;\n                        this.deepZoomAction();\n                        this.view.setImagePosition(this.iPos, this.scale);\n                        if (this.map) { this.map.move(this.iPos, this.scale); }\n                    }\n                } else if (e.state === 'pinchend') {\n                    clearTimeout(timer);\n                    timer = setTimeout(() => {\n                        this.addInnerTouchDrag();\n                    }, 42);\n\n                    if (this.scale.x <= this.baseScale.x + 0.00000001 && this.o.type !== 'outside' && this.state !== globalVariables.APPEARANCE.HIDING) {\n                        clearTimeout(timer);\n                        this.hide(true);\n                    }\n                }\n            });\n        }\n\n        hideZoomByMouseOut() {\n            const cb = (e) => {\n                if (outOfSquare(e.getClientXY(), this.view.getContainerPosition(), this.view.getContainerSize(), $J.D.getScroll())) {\n                    this.view.removeGlobalEvent();\n                    this.hide();\n                }\n            };\n\n            this.view.addGlobalEvent(cb);\n        }\n\n        // private\n        setEvents() {\n            if (this.setUpEvent && $J.browser.mobile) {\n                this.view.setEventToWrapper(TOUCHEND, (e) => {\n                    e.stop();\n                    this.hide(true);\n                });\n            }\n\n            if (this.o.customZooming) {\n                this.addMouseScrollEvent();\n            }\n\n            this.addInnerTouchDrag();\n            this.view.removeDragstart();\n\n            if (!this.setUpEvent) {\n                this.addInnerPinch();\n            }\n\n            if (this.o.trigger !== 'hover') {\n                this.addClickEvent();\n            } else {\n                this.hideZoomByMouseOut();\n            }\n\n            if (!this.o.pan && !$J.browser.mobile) {\n                this.view.setEventToMainContainer(MOVE, (e) => {\n                    if (e.pointerType && e.pointerType === 'touch') { return; }\n                    e.stop();\n\n                    const pageXY = e.getPageXY();\n                    this.move(pageXY.x, pageXY.y);\n                });\n            }\n        }\n\n        // private\n        keepOldPosition(oldLensSize) {\n            let x = this.iPos.x;\n            let y = this.iPos.y;\n            const w = this.iSize.width * this.scale.x;\n            const h = this.iSize.height * this.scale.y;\n            const dw = getDifference(this.iSize.width, w);\n            const dh = getDifference(this.iSize.height, h);\n\n            x -= ((oldLensSize.width - this.lensSize.width) / 2);\n            y -= ((oldLensSize.height - this.lensSize.height) / 2);\n\n            if (w > this.lensSize.width) {\n                x = checkImagePosition(x, 0 - dw, dw + w, this.lensSize.width);\n            } else {\n                x = (this.lensSize.width / 2) - (w / 2 + dw);\n            }\n\n            if (h > this.lensSize.height) {\n                y = checkImagePosition(y, 0 - dh, dh + h, this.lensSize.height);\n            } else {\n                y = (this.lensSize.height / 2) - (h / 2 + dh);\n            }\n\n            this.iPos = { x: x, y: y };\n        }\n\n        onResize() {\n            const oldLensSize = this.lensSize;\n            super.onResize();\n            if (this.state !== globalVariables.APPEARANCE.HIDDEN) {\n                if (this.state !== globalVariables.APPEARANCE.HIDING) {\n                    this.keepOldPosition(oldLensSize);\n                    this.getImagePosition();\n                    if (this.map) {\n                        const mWidth = parseInt(getPercentValue(this.pSize.width / 2, this.o.mapSize), 10);\n                        const mHeight = parseInt(getPercentValue(this.pSize.height / 2, this.o.mapSize), 10);\n                        this.map.resize(mWidth, mHeight, this.iSize.width, this.iSize.height, this.pSize.width, this.pSize.height);\n\n\n                        if (!this.o.smoothing) {\n                            this.map.move(this.iPos, this.scale);\n                        }\n                    }\n                }\n            }\n        }\n\n        destroy() {\n            clearTimeout(this.showTimer);\n\n            if (this.map) {\n                this.map.destroy();\n                this.map = null;\n                this.off('zoomGetImage');\n                this.off('zoomMapNewPosition');\n            }\n\n            super.destroy();\n        }\n    }\n\n    return IController;\n})();\n\n/* eslint-env es6 */\n/* global getDifference */\n/* global TOUCHEND */\n/* global TOUCH */\n/* global getPercent */\n/* global Controller */\n/* global getPercentValue */\n/* global MOVE */\n/* global checkRange */\n/* eslint-disable indent */\n/* eslint-disable no-lonely-if */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n/* eslint guard-for-in: \"off\"*/\n/* eslint no-restricted-syntax: [\"error\",  \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n// eslint-disable-next-line\nconst MagnifierController = (() => {\n    const MIN_SIZE_OF_LENS = 10;\n    const MAX_SIZE_OF_LENS = 90;\n    const DEFAULT_MAGNIFIER_SIZE = 70; // percent\n    const DEFAULT_MOBILE_MAGNIFIER_ZOOM_MARGIN = 65;\n\n    const checkMinMax = (size) => {\n        let factor;\n\n        if (size.width >= size.height) {\n            factor = size.width / size.height;\n        } else {\n            factor = size.height / size.width;\n        }\n\n        const min = MIN_SIZE_OF_LENS;\n        const max = MAX_SIZE_OF_LENS;\n\n        if (factor > max / min) {\n            return {\n                width: 50,\n                height: 50\n            };\n        }\n\n        if (size.width < min) {\n            size.height = min * (size.height / size.width);\n            size.width = min;\n        }\n\n        if (size.height < min) {\n            size.width = min * (size.width / size.height);\n            size.height = min;\n        }\n\n        if (size.width > max) {\n            size.height = max * (size.height / size.width);\n            size.width = max;\n        }\n\n        if (size.height > max) {\n            size.width = max * (size.width / size.height);\n            size.height = max;\n        }\n\n        return size;\n    };\n\n    // eslint-disable-next-line no-unused-vars\n    class MController extends Controller {\n        constructor(view, o) {\n            if ($J.browser.mobile && o.margin === 9) { delete o.margin; }\n            super(view, $J.extend({\n                width: 70, // percent\n                height: 70, // percent\n                margin: DEFAULT_MOBILE_MAGNIFIER_ZOOM_MARGIN\n            }, o));\n\n            this.setUpEvent = false;\n            this.isSquare = true;\n            this.ANIM_STEP = 0.4;\n        }\n\n        init() {\n            super.init();\n            this.setLensSize();\n        }\n\n        // private\n        setLensSize() {\n            const s = { width: this.o.width, height: this.o.height };\n\n            if (s.width === s.height) {\n                this.isSquare = true;\n            }\n\n            if ($J.contains([s.width, s.height], 'auto')) {\n                this.isSquare = true;\n                if (s.width === 'auto') {\n                    if (s.height !== 'auto') {\n                        s.height = this.getPercentSize(s.height, 'height');\n                        s.width = s.height;\n                    } else {\n                        s.height = DEFAULT_MAGNIFIER_SIZE;\n                        s.width = s.height;\n                    }\n                } else if (s.width !== 'auto') {\n                    s.width = this.getPercentSize(s.width, 'width');\n                    s.height = s.width;\n                } else {\n                    s.height = DEFAULT_MAGNIFIER_SIZE;\n                    s.width = s.height;\n                }\n            } else {\n                s.width = this.getPercentSize(s.width, 'width');\n                s.height = this.getPercentSize(s.height, 'height');\n            }\n\n            this.currentLensSize = checkMinMax({ width: s.width, height: s.height });\n\n            this.ANIM_STEP = 0.6;\n        }\n\n        // private\n        calcSizeOfLens() {\n            if (this.isSquare) {\n                const ps = this.pSize;\n                const cls = this.currentLensSize;\n                const value = getPercentValue(Math.min(ps.width, ps.height), cls.width);\n                this.setSizeOfLens(value, value);\n            } else {\n                super.calcSizeOfLens();\n            }\n        }\n\n        // private\n        calcPositionOfLens() {\n            const ps = this.pSize;\n            let margin = this.o.margin;\n            //eslint-disable-next-line no-unused-vars\n            // let lensPositionState = 'top'; // top left right bottom;\n\n            if (margin < 0) { margin = 0; }\n\n            if (this.x < 0) { this.x = 0; }\n            if (this.y < 0) { this.y = 0; }\n            if (this.x > ps.width) { this.x = ps.width; }\n            if (this.y > ps.height) { this.y = ps.height; }\n\n            let top;\n            let left;\n\n            top = this.y - this.lensHalfSize.height;\n            left = this.x - this.lensHalfSize.width;\n\n            // if (!$J.browser.mobile) {\n            //     margin = 0;\n            // }\n\n            let scroll;\n            let ws;\n            const pp = this.pPos;\n\n            if ($J.browser.mobile) {\n                top -= margin;\n\n                scroll = $($J.W).getScroll();\n                ws = $($J.W).getSize();\n\n                if (pp.top + top < scroll.y) {\n                    if (pp.left + this.x - this.lensSize.width - margin > scroll.x) {\n                        // lensPositionState = 'left';\n                        top = this.y - this.lensHalfSize.height;\n                        left = this.x - this.lensSize.width - margin;\n                    } else if (pp.left + this.x + this.lensSize.width + margin < scroll.x + ws.width) {\n                        // lensPositionState = 'right';\n                        top = this.y - this.lensHalfSize.height;\n                        left = this.x + margin;\n                    } else if (scroll.y + ws.height > pp.top + this.y + margin + this.lensSize.height) {\n                        // lensPositionState = 'bottom';\n                        top = this.y + margin;\n                    }\n                }\n            }\n\n            // if ($J.contains(['top', 'bottom'], lensPositionState) && !$J.browser.mobile) {\n            //     if (pp.left + left < scroll.x) {\n            //         left = scroll.x - pp.left;\n            //     }\n\n            //     if (pp.left + left + this.lensSize.width > scroll.x + ws.width) {\n            //         left = scroll.x - pp.left + ws.width - this.lensSize.width;\n            //     }\n            // }\n\n            this.lensPosition = { top: top, left: left };\n        }\n\n        calcPositionOfImage(scale, first, _x, _y) {\n            const sw = (_x || this.x);\n            const sh = (_y || this.y);\n            const x = this.lensHalfSize.width - getPercentValue(this.iSize.width, getPercent(sw, this.pSize.width));\n            const y = this.lensHalfSize.height - getPercentValue(this.iSize.height, getPercent(sh, this.pSize.height));\n\n            this.iPos = { x: x, y: y };\n        }\n\n        // private\n        getPercentSize(value, side) {\n            if (/%$/.test(value)) {\n                value = parseInt(value, 10);\n            } else {\n                value = parseInt(value, 10);\n                value /= (this.pSize[side] / 100);\n            }\n\n            return value;\n        }\n\n        // private\n        setEvents() {\n            if (this.setUpEvent && !this.o.pan) {\n                this.view.setEventToMainContainer(TOUCHEND, (e) => {\n                    e.stop();\n                    this.hide(true);\n                });\n            }\n\n            if (this.o.customZooming) {\n                this.addMouseScroollEvent();\n            }\n\n            this.addMouseOverEvent();\n\n            if (this.o.trigger === 'hover') {\n                this.addMouseOutEvent();\n            }\n\n            if (this.o.pan) {\n                this.addDragEvent();\n            }\n\n            if ($J.browser.mobile) {\n                this.addTapEvent();\n            }\n\n            if (this.o.trigger !== 'hover') {\n                this.addClickEvent();\n            }\n\n            if (!this.o.pan && !$J.browser.mobile) {\n                this.view.setEventToMainContainer(MOVE, (e) => {\n                    if (e.pointerType && e.pointerType === 'touch') { return; }\n                    e.stop();\n\n                    const pageXY = e.getPageXY();\n                    this.move(pageXY.x, pageXY.y);\n\n                    if (this.x <= 0 || this.y <= 0 || this.x >= this.pSize.width || this.y >= this.pSize.height) {\n                        this.hide();\n                    }\n                });\n            }\n        }\n\n        afterMove() {\n            this.calcPositionOfLens();\n            this.calcPositionOfImage(this.scale);\n            this.view.setLensPosition(this.lensPosition);\n            super.afterMove();\n        }\n\n        // private\n        changeLensSize(size) {\n            const min = MIN_SIZE_OF_LENS;\n            const max = MAX_SIZE_OF_LENS;\n\n            size.width = checkRange(size.width, min, max);\n            size.height = checkRange(size.height, min, max);\n\n            if (size.width !== this.currentLensSize.width) {\n                this.currentLensSize.width = size.width;\n                this.currentLensSize.height = size.height;\n\n                this.calcSizeOfLens();\n                this.calcPositionOfLens();\n                this.calcPositionOfImage();\n\n                this.iDPos.x = this.iPos.x;\n                this.iDPos.y = this.iPos.y;\n\n                this.deepZoomAction(false, this.lensSize);\n                this.view.setImagePosition(this.iPos, this.scale);\n\n                this.view.setLensPosition(this.lensPosition);\n                this.view.setLensSize(this.lensSize);\n            }\n        }\n\n        // private\n        addMouseScroollEvent() {\n            this.view.setEventToWrapper('mousescroll', (e) => {\n                e.stop();\n\n                let i;\n                const delta = e.delta;\n                const s = { width: 0, height: 0 };\n\n                if (this.isSquare) {\n                    for (i in s) {\n                        if ({}.hasOwnProperty.call(s, i)) {\n                            s[i] = this.currentLensSize[i] + delta;\n                        }\n                    }\n                } else {\n                    i = this.currentLensSize.height / this.currentLensSize.width;\n                    s.width = this.currentLensSize.width + delta;\n                    s.height = this.currentLensSize.height + delta * i;\n                }\n\n                this.changeLensSize(s);\n            });\n        }\n\n        // private\n        addMouseOverEvent() {\n            this.view.setEventToMainContainer('mouseover', (e) => {\n                e.stop();\n\n                const pageXY = e.getPageXY();\n                this.setXY(pageXY.x, pageXY.y);\n\n                this.calcPositionOfLens();\n                this.calcPositionOfImage();\n\n                this.view.setLensPosition({\n                    top: this.lensPosition.top,\n                    left: this.lensPosition.left\n                });\n\n                this.view.setImagePosition(this.iPos, this.scale);\n            });\n        }\n\n        // private\n        addMouseOutEvent() {\n            this.view.setEventToWrapper('mouseout', (e) => {\n                // let toElement = e.toElement || e.relatedTarget;\n                let toElement = e.getRelated();\n\n                // if we change between workspace we must to hide the lens\n                // if (!toElement) { return; }\n\n                while (toElement && toElement !== this.node && toElement !== this.lensContainer && toElement !== this.eventsCanvasNode) {\n                    toElement = toElement.parentNode;\n                }\n\n                if (this.node !== toElement && this.eventsCanvasNode !== toElement) {\n                    const p = e.getClientXY();\n                    if (p.x < this.boundaries.left || p.x > this.boundaries.right\n                        || p.y < this.boundaries.top || p.y > this.boundaries.bottom\n                    ) {\n                        e.stop();\n                        if (this.o.smoothing) {\n                            this.hide();\n                        } else {\n                            this.hide(true);\n                        }\n                    }\n                }\n            });\n        }\n\n        // private\n        addDragEvent() {\n            let move = false;\n            this.view.setEventToMainContainer(TOUCH, (e) => {\n                e.stop();\n                if (e.state === 'dragstart') {\n                    move = true;\n                } else if (e.state === 'dragend') {\n                    move = false;\n                } else if (move) {\n                    this.move(e.x, e.y);\n                }\n            });\n        }\n\n        // private\n        addTapEvent() {\n            this.view.setEventToMainContainer(this.o.trigger === 'dblclick' ? 'dbltap' : 'tap', (e) => {\n                e.stop();\n                if (this.o.smoothing) {\n                    this.hide();\n                } else {\n                    this.hide(true);\n                }\n            });\n        }\n\n        hide(force) {\n            const result = super.hide(force);\n\n            if (result) {\n                if (force) {\n                    // empty\n                } else {\n                    this.view.setEventToWrapper('transitionend', (e) => {\n                        e.stop();\n                        this.view.removeEventFromWrapper('transitionend');\n                        this.endOfHiding();\n                    });\n\n                    this.view.setLensStyle({\n                        transition: 'opacity .2s linear, transform .2s linear',\n                        opacity: 0,\n                        transform: 'scale(0)'\n                    });\n                }\n            }\n\n            return result;\n        }\n\n        /*\n            public\n            toLevel = max || undefined(default), first, zero\n        */\n        show(smallImg, bigImageOptions, x, y, actionEndHide, toLevel) {\n            if (!super.show()) { return false; }\n\n            this.emit('zoomBeforeShow', { data: {} });\n\n            this.setUpEvent = actionEndHide;\n\n            this.iSize = {\n                width: bigImageOptions.width,\n                height: bigImageOptions.height\n            };\n\n            this.view.addStartCss();\n            this.view.appendNodes(smallImg, this.iSize);\n\n            this.getSizes();\n            this.setXY(x, y);\n            this.calcSizeOfLens();\n            this.calcPositionOfLens();\n            // this.getImagePosition();\n            this.getBaseScale();\n            this.showDeepZoom(bigImageOptions.originWidth, bigImageOptions.originHeight);\n\n            // this.calcPositionOfImage(false, true);\n            this.calcPositionOfImage(this.scale, true);\n\n            this.view.setEventNodePositionSize(this.pPos, this.pSize);\n\n            this.dScale.x = this.baseScale.x;\n            this.dScale.y = this.baseScale.y;\n\n            this.iDPos = {\n                x: (getDifference(this.iSize.width, this.iSize.width * this.dScale.x) * (-1)) - this.lensPosition.left,\n                y: (getDifference(this.iSize.height, this.iSize.height * this.dScale.y) * (-1)) - this.lensPosition.top\n            };\n\n            this.view.setLensCss(this.lensPosition, this.lensSize, 'opacity .15s linear, transform .15s linear');\n\n            this.view.setImageSize(this.iDPos, this.iSize, this.dScale);\n\n            this.boundaries = this.view.getBoundaries();\n\n            if (this.o.smoothing) {\n                this.view.setEventToWrapper('transitionend', (e) => {\n                    e.stop();\n                    this.view.removeEventFromWrapper('transitionend');\n                    this.view.setLensStyle({ transition: '' });\n                    this.sendZoomShownEvent();\n                });\n                this.endOfShowing();\n                this.anim.start();\n            } else {\n                this.endOfShowing();\n                this.sendZoomShownEvent();\n            }\n\n            // deleted it from this.endOfShowing() function because it sometimes doesn't work\n            // this.sendZoomShownEvent();\n\n            return true;\n        }\n    }\n\n    return MController;\n})();\n\n/* eslint-env es6 */\n/* global checkRange */\n/* global TOUCH */\n/* global getDifference */\n/* global Eye */\n/* global getPercentValue */\n/* global helper */\n/* global Controller */\n/* global checkImagePosition */\n/* eslint-disable indent */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n/* eslint guard-for-in: \"off\"*/\n/* eslint no-restricted-syntax: [\"error\",  \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n// eslint-disable-next-line no-unused-vars\nconst OutsideController = (() => {\n    const DEFAULT_OUTSIDE_ZOOM_MARGIN = 9; // px\n\n    class OController extends Controller {\n        constructor(view, o) {\n            super(view, $J.extend({\n                margin: DEFAULT_OUTSIDE_ZOOM_MARGIN,\n                outsidePosition: 'right', // top, left, right, bottom\n                width: 100, // percent\n                height: 100, // percent\n            }, o));\n\n            this.showingParams = null;\n\n            this.eye = new Eye(this.view.getNodeForEye(), this.o.trigger === 'hover');\n            this.ANIM_STEP = 0.18;\n            this.mouseOutHandler = this.mouseOut.bind(this);\n        }\n\n        getBoundaries() {\n            this.boundaries = this.eye.getBoundaries();\n        }\n\n        init() {\n            super.init();\n            this.setLensSize();\n        }\n\n        // private\n        setEyesParams() {\n            const sw = this.currentLensSize.width / (this.iSize.width * this.scale.x);\n            const sh = this.currentLensSize.height / (this.iSize.height * this.scale.y);\n\n            this.eye.setSize({\n                width: sw * this.zoomNodeSize.width,\n                height: sh * this.zoomNodeSize.height\n            });\n\n            this.eye.setPosition(this.x, this.y);\n        }\n\n        calcPositionOfLens() {\n            let margin = this.o.margin;\n            const ps = this.pSize;\n            const pp = this.pPos;\n\n            if (margin < 0) { margin = 0; }\n\n            let t = pp.top;\n            let l = pp.left;\n\n            switch (this.o.outsidePosition) {\n                case 'top':\n                    t += (this.lensSize.height + margin) * (-1);\n                    break;\n                case 'left':\n                    l += (this.lensSize.width + margin) * (-1);\n                    break;\n                case 'right':\n                    l += (ps.width + margin);\n                    break;\n                case 'bottom':\n                    t += (ps.height + margin);\n                    break;\n\n                //no default\n            }\n\n            this.lensPosition = { top: t, left: l };\n        }\n\n        calcPositionOfImage(scale) {\n            if (!scale) { scale = this.dScale; }\n\n            const w = this.iSize.width * scale.x;\n            const h = this.iSize.height * scale.y;\n            const dw = getDifference(this.iSize.width, w);\n            const dh = getDifference(this.iSize.height, h);\n\n\n            let x = this.x / (this.zoomNodeSize.width / w);\n            let y = this.y / (this.zoomNodeSize.height / h);\n\n            x = this.lensSize.width / 2 - x - dw;\n            y = this.lensSize.height / 2 - y - dh;\n\n            x = checkImagePosition(x, 0 - dw, dw + w, this.lensSize.width);\n            y = checkImagePosition(y, 0 - dh, dh + h, this.lensSize.height);\n\n            this.iPos = { x: x, y: y };\n        }\n\n        afterMove() {\n            this.calcPositionOfLens();\n            this.calcPositionOfImage(this.scale);\n            this.setEyesParams();\n            this.view.setLensPosition(this.lensPosition);\n            super.afterMove();\n        }\n\n        hide(force) {\n            const result = super.hide(force);\n\n            if (result) {\n                if (!$J.browser.mobile) {\n                    this.view.removeMouseMoveEvent(this.mouseOutHandler);\n                }\n\n                this.eye.clearEvents();\n\n                this.eye.hide();\n                if (force) {\n                    // empty\n                } else {\n                    this.view.removeEvents();\n                    this.endOfHiding();\n                }\n            }\n\n            return result;\n        }\n\n        // private\n        getShowingPropertiesToOutsideMode() {\n            const result = { start: { x: 0, y: 0 }, end: { x: 0, y: 0 } };\n\n            switch (this.o.outsidePosition) {\n                case 'top':\n                    result.start.y = 10;\n                    result.end.y = 0;\n                    break;\n                case 'left':\n                    result.start.x = 10;\n                    result.end.x = 0;\n                    break;\n                case 'right':\n                    result.start.x = -10;\n                    result.end.x = 0;\n                    break;\n                case 'bottom':\n                    result.start.y = -10;\n                    result.end.y = 0;\n                    break;\n\n                // no default\n            }\n\n            return result;\n        }\n\n        // private\n        endOfShowing() {\n            super.endOfShowing();\n            this.getBoundaries();\n        }\n\n        /*\n            public\n            toLevel = max || undefined(default), first, zero\n        */\n        show(smallImg, bigImageOptions, x, y, actionEndHide, toLevel) {\n            if (!super.show()) { return false; }\n\n            this.emit('zoomBeforeShow', { data: {} });\n\n            this.iSize = {\n                width: bigImageOptions.width,\n                height: bigImageOptions.height\n            };\n\n            this.showingParams = this.getShowingPropertiesToOutsideMode();\n            this.view.addStartCss(this.showingParams);\n            this.view.appendNodes(smallImg, this.iSize);\n\n            this.getSizes();\n            this.setXY(x, y);\n            this.calcSizeOfLens();\n            this.calcPositionOfLens();\n            // this.getImagePosition();\n            this.getBaseScale();\n            this.showDeepZoom(bigImageOptions.originWidth, bigImageOptions.originHeight);\n\n            // this.calcPositionOfImage(false, true);\n            this.calcPositionOfImage(this.scale, true);\n\n            this.view.setEventNodePositionSize(this.pPos, this.pSize);\n\n            this.dScale.x = this.baseScale.x;\n            this.dScale.y = this.baseScale.y;\n\n            this.iDPos = {\n                x: getDifference(this.iSize.width, this.iSize.width * this.dScale.x) * (-1),\n                y: getDifference(this.iSize.height, this.iSize.height * this.dScale.y) * (-1)\n            };\n\n            this.view.setLensCss(this.lensPosition, this.lensSize, this.o.smoothing ? 'opacity .4s linear, transform .15s ease-in' : 'none');\n\n            this.view.setImageSize(this.iDPos, this.iSize, this.dScale);\n\n            if (this.o.smoothing || toLevel === 'zero') {\n                this.endOfShowing();\n            }\n\n            this.eye.show(this.view.getImageForEye());\n            this.getBoundaries();\n            this.setEyesParams();\n            this.animStep = 0.3;\n\n            if (this.o.smoothing) {\n                this.anim.start();\n            } else {\n                this.endOfShowing();\n            }\n\n            // deleted it from this.endOfShowing() function because it sometimes doesn't work\n            this.sendZoomShownEvent();\n\n            return true;\n        }\n\n        setLensSize() {\n            const s = { width: this.o.width, height: this.o.height };\n\n            if (s.width === 'auto') {\n                s.width = this.pSize.width;\n            } else if (/%$/.test(this.o.width)) {\n                s.width = this.pSize.width / 100 * parseInt(this.o.width, 10);\n            } else {\n                s.width = parseInt(s.width, 10);\n            }\n\n            if (s.height === 'auto') {\n                s.height = this.pSize.height;\n            } else if (/%$/.test(this.o.height)) {\n                s.height = this.pSize.height / 100 * parseInt(this.o.height, 10);\n            } else {\n                s.height = parseInt(s.height, 10);\n            }\n\n            this.currentLensSize = { width: s.width, height: s.height };\n        }\n\n        calcSizeOfLens() {\n            const cls = this.currentLensSize;\n            this.lensSize = { width: cls.width, height: cls.height };\n            this.lensHalfSize = {\n                width: this.lensSize.width / 2,\n                height: this.lensSize.height / 2\n            };\n        }\n\n        // private\n        setEvents() {\n            if ($J.browser.mobile && this.o.pan) {\n                this.addOutsideTouchDrag();\n            }\n\n            // TODO maybe remove it\n            if (!$J.browser.mobile && $J.browser.touchScreen && helper.isIe()) {\n                if (!this.o.pan) {\n                    this.eye.setEventToMainContainer('pointerup', (e) => {\n                        this.hide();\n                    });\n                }\n            }\n\n            this.eye.setEventToMainContainer('mousemove', (e) => {\n                e.stop();\n                const pageXY = e.getPageXY();\n                this.move(pageXY.x, pageXY.y);\n            });\n\n            if (this.o.trigger === 'hover') {\n                if (!$J.browser.mobile) {\n                    this.view.addMouseMoveEvent(this.mouseOutHandler);\n                }\n\n                this.eye.setEventToMainContainer('mouseout', this.mouseOutHandler);\n            } else {\n                let eventName = 'btnclick tap';\n                if (this.o.trigger === 'dblclick') {\n                    eventName = 'dblbtnclick dbltap';\n                }\n\n                this.eye.setEventToMainContainer(eventName, (e) => {\n                    this.hide();\n                });\n            }\n\n            if (this.o.customZooming) {\n                this.setMouseScrollEvent();\n            }\n        }\n\n        mouseOut(e) {\n            const p = e.getClientXY();\n            if (p.x < this.boundaries.left || p.x > this.boundaries.right\n                || p.y < this.boundaries.top || p.y > this.boundaries.bottom\n            ) {\n                this.hide(!this.getZoomData());\n            }\n        }\n\n        // private\n        // it works if trigger !== 'hover'\n        addOutsideTouchDrag() {\n            let isStart = false;\n            this.eye.setEventToMainContainer(TOUCH, (e) => {\n                e.stop();\n                if (e.state === 'dragstart') {\n                    isStart = true;\n                } else if (e.state === 'dragend') {\n                    isStart = false;\n                } else if (isStart) {\n                    this.move(e.x, e.y);\n                }\n            });\n        }\n\n        // private\n        setMouseScrollEvent() {\n            this.eye.setEventToMainContainer('mousescroll', (e) => {\n                const last = this.scale.x;\n                let delta;\n\n                e.stop();\n\n                if (e.isMouse) {\n                    const percent = 37;\n                    const v = (e.delta / getPercentValue(e.deltaFactor, percent));\n                    this.scale.x += v;\n                    this.scale.y += v;\n                } else {\n                    delta = e.delta;\n                    if (Math.abs(delta) > 15) {\n                        delta = 15;\n                        if (e.delta < 0) {\n                            delta *= (-1);\n                        }\n                    }\n\n                    delta /= 350;\n\n                    this.scale.x += delta;\n                    this.scale.y += delta;\n                }\n\n                this.scale.x = checkRange(this.scale.x, this.baseScale.x, 1);\n                this.scale.y = checkRange(this.scale.y, this.baseScale.y, 1);\n\n                this.calcPositionOfImage(this.scale);\n\n                if (last !== this.scale.x) {\n                    this.sendZoomingAction();\n                    this.setCursorState();\n                    if (!this.o.smoothing) {\n                        this.dScale.x = this.scale.x;\n                        this.dScale.y = this.scale.y;\n                        this.iDPos.x = this.iPos.x;\n                        this.iDPos.y = this.iPos.y;\n                        this.deepZoomAction();\n                        this.setImagePosition(this.iPos, this.scale);\n                    }\n                    this.setEyesParams();\n                }\n            });\n        }\n\n        setLensStyleOnResize() {\n            this.view.setLensPosition(this.lensPosition);\n            this.view.setCanvasNodeSize(this.lensSize);\n        }\n\n        onResize() {\n            super.onResize();\n\n            if (this.state !== globalVariables.APPEARANCE.HIDDEN && this.state !== globalVariables.APPEARANCE.HIDING) {\n                this.eye.resize();\n            }\n        }\n\n        destroy() {\n            this.eye.destroy();\n            this.view.removeMouseMoveEvent(this.mouseOutHandler);\n            super.destroy();\n        }\n    }\n\n    return OController;\n})();\n\n/* eslint-env es6 */\n/* global InnerView */\n/* global EventEmitter */\n/* global InnerController */\n/* global MagnifierController */\n/* global MagnifierView */\n/* global OutsideController */\n/* global OutsideView */\n/* eslint-disable indent */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n/* eslint guard-for-in: \"off\"*/\n/* eslint no-restricted-syntax: [\"error\",  \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\n// eslint-disable-next-line no-unused-vars\nclass ImageZoom extends EventEmitter {\n    constructor(parentNode, o) {\n        super();\n\n        this.zoomType = o.type;\n\n        if (o.type === 'inner') {\n            this.view = new InnerView(parentNode);\n            this.view.addClassToWrapper('inner');\n            this.controller = new InnerController(this.view, o);\n        } else if ($J.contains(['circle', 'square'], o.type)) {\n            this.view = new MagnifierView(parentNode);\n            this.view.addClassToWrapper(o.type);\n            this.controller = new MagnifierController(this.view, o);\n        } else { // outside\n            this.view = new OutsideView(parentNode);\n            this.view.addClassToWrapper('outside');\n            this.controller = new OutsideController(this.view, o);\n        }\n\n        this.controller.setParent(this);\n        this.controller.init();\n    }\n\n    setLensContainer(lensContainer) {\n        this.controller.setLensContainer(lensContainer);\n    }\n\n    isShown() {\n        return this.controller.isShown();\n    }\n\n    getZoomData(scale) {\n        return this.controller.getZoomData(scale);\n    }\n\n    getNextMinZoom() {\n        return this.controller.getNextMinZoom();\n    }\n\n    getNextMaxZoom() {\n        return this.controller.getNextMaxZoom();\n    }\n\n    zoomUp(x, y) {\n        return this.controller.zoomUp(x, y);\n    }\n\n    zoomDown(x, y) {\n        return this.controller.zoomDown(x, y);\n    }\n\n    showCenter(smallImg, largeImg, toLevel) {\n        return this.controller.showCenter(smallImg, largeImg, toLevel);\n    }\n\n    isShowing() {\n        return this.controller.isShowing();\n    }\n\n    setImage(data) {\n        this.controller.setImage(data);\n    }\n\n    show(smallImg, bigImageOptions, x, y, actionEndHide, toLevel) {\n        return this.controller.show(smallImg, bigImageOptions, x, y, actionEndHide, toLevel);\n    }\n\n    hide(force) {\n        return this.controller.hide(force);\n    }\n\n    customMove(x, y) {\n        this.controller.customMove(x, y);\n    }\n\n    getBaseScale() {\n        return this.controller.baseScale;\n    }\n\n    setBasePercent(point) {\n        if (this.zoomType === 'inner') {\n            this.controller.setBasePercent(point);\n        }\n    }\n\n    setScale(scale, x, y) {\n        if (this.zoomType === 'inner') {\n            this.controller.setScale(scale, x, y);\n        }\n    }\n\n    onResize() {\n        this.controller.onResize();\n    }\n\n    destroy() {\n        this.view.destroy();\n        this.controller.destroy();\n    }\n}\n\nreturn ImageZoom;\n\n    }\n);\n"],"file":"imagezoom.js"}