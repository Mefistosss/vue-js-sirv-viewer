{"version":3,"sources":["../slider/slider.js"],"names":["Sirv","define","sirvRequire","sirvModule","bHelpers","magicJS","globalVariables","globalFunctions","ResponsiveImage","helper","Promise","EventEmitter","ContextMenu","ComponentLoader","defaultsVideoOptions","ViewerImage","SliderBuilder","moduleName","$J","$","rootDOM","addModuleCSSByName","CSS_MAIN_CLASS","smv","SELECTOR_TAG","SELECTOR_CLASS","DPPX","W","node","devicePixelRatio","defaultOptions","orientation","type","defaults","arrows","loop","quality","minimum","maximum","hdQuality","itemsOrder","autostart","oneOf","threshold","slide","first","delay","preload","autoplay","animation","duration","socialbuttons","enable","types","facebook","twitter","linkedin","reddit","tumblr","pinterest","telegram","thumbnails","size","position","always","target","watermark","fullscreen","autohide","contextmenu","text","zoom","out","enter","exit","download","productdetail","Spin","Zoom","Video","ProductDetail","SocialButtons","remoteModules","sliderConfig","config","promises","objEach","key","value","resolve","sliderModule","load","arr","result","mods","forEach","mod","push","length","all","SirvService","options","additionalOptions","SLIDE","TYPES","NONE","imgSrc","effect","additionalEffects","isStarted","isPrepared","toolOptions","api","isActive","parse","setEvents","isExist","resultOfParse","getSirvType","deps","Image","camelize","NAMES","createAPI","methods","t","SPIN","ZOOM","zoomIn","method","_oldMethod","om","args","apply","on","e","stopEmptyEvent","data","component","IMAGE","imageIndex","stopAll","getOptions","imgNode","image","isFullscreen","setParent","src","attr","datasrc","sendEvent","nameOfEvent","resize","broadcast","startFullInit","getSelectorImgUrl","getInfoSize","reject","concat","map","then","values","catch","start","isHDQualitySet","nativeFullscreen","extend","PANZOOM","setCss","width","height","spin","VIDEO","video","isThumbnailGif","isZoomSizeExist","contains","startGettingInfo","startTool","isShown","firstSlideAhead","run","loadContent","loadThumbnail","getType","getData","stop","refresh","getOriginImageUrl","getZoomData","isZoomed","getSpinOrientation","getOrientation","getSocialButtonData","isSpin","loadVideoSources","addSources","isEffectActive","activate","deactivate","getToolOptions","destroy","removeAttribute","off","Effects","Effect","getClassName","str","getDirection","direction","Effect_","time","easing","isMove","callbackData","effectName","getNamesOfEffects","hashKeys","make","element1","element2","o","name","Object","prototype","hasOwnProperty","call","Blank_","elements","states","NOT_STARTED","MOVING","ENDED","state","isDestroyed","_show","index","opacity","visibility","_hide","_start","emit","indexes","setCssProp","_move","callback","_end","_clear","element","zIndex","Blank","Slide","toPercentString","getNormalizeArray","Slide_","from","to","el","addEvent","getTarget","getSize","removeEvent","transform","transition","Fade_","Fade","Arrows","createArrows","customClass","container","$new","addClass","arrow","append","Arrows_","_arrowType","button","firstChild","store","typeOfArrow","fetch","bind","isShow","getNodes","show","removeClass","hide","disable","indexArrow","removeAttr","del","remove","Selectors","equalOptions","opt1","opt2","DEFAULT_SIZE","SELECTORS_STATE","STANDARD","FULLSCREEN","SelectorContent","getPlaceholderSizePromise","destroyed","loaded","content","getTagName","$A","childNodes","isLoaded","setCssSize","css","getSelectorSize","selectorSize","getPlaceholderSize","s","getProportion","_size","finally","complete","getNode","appendTo","ImageSelectorContent","imageOrientation","isSirv","srcset","imageSize","getProportionPromise","getUrlPromise","loadImagePromise","customSquare","removeCustomSquare","resultingCallback","setImageUrl","alt","referrerpolicy","browser","mobile","stopDefaults","getUrl","crop","setImageData","loadImage","imageData","error","Math","abs","div","overflow","maxWidth","Selector","parentNode","selector","uuid","infoPromise","UUID","deepExtend","standard","activeClass","placeholderClass","selectorContent","disabled","parentContainer","display","placeholder","currentObject","initPromise","init","createContent","dataType","setCustomEvent","img","activatedSelector","activated","addPlaceholder","selectorType","toggle","res","rej","_resolve","innerHTML","removeChild","setEvent","nodesList","querySelectorAll","item","location","hash","open","isActivate","_toggleForEnable","neededType","last","setIndex","getContainer","isDisabled","SELECTORS","getTime","maxTime","step","minTime","parseInt","convertToTranslateString","isHorizontal","normalizeIndex","isPinned","Selectors_","selectors","isStandardGrid","standardStyle","standardSize","standardPosition","standardWatermark","isFullscreenGrid","fullscreenStyle","fullscreenSize","fullscreenPosition","fullscreenAutohide","fullscreenWatermark","instanceNode","selectorsContainer","selectorsScroll","controlButton","selectorsScrollContainer","pinnedNodeAtStart","pinnedNodeAtEnd","hasPinnedSelector","baseSelectorsList","blocksPinnedInited","pinnedStartList","pinnedEndList","currentPosition","containerSize","halfContainerSize","scrollSize","halfScrollSize","currentActiveItem","isControlShown","isControlInDoc","controlDebounce","isReady","resizeTimeout","isActionsEnabled","isDone","isInView","currentStylePosition","longSide","shortSide","currentAxis","setHasPinnedSelector","initPinnedBlocks","_selector","createSelector","sortByBaseSelectors","orderPinnedSelectorByType","identifyVariables","setContainerCss","getSelectorsIndexByUUID","i","l","getSelectorByUUID","insertSelectorBefore","pinned","updateIndex","getPinnedScrollContainer","referenceElement","insertBefore","insertSelector","selectorIndex","selectorObj","addPinnedBlocks","splice","getScrollContainer","targetSelector","disableSelector","selectorUUID","enableSelector","pickOut","_index","reorderDataSelectors","statusSelector","selectorData","setEventsFromSelectors","setActiveItem","timer","clearTimeout","setTimeout","onResize","getContainers","containerNode","scrollNode","containerNodes","startContainer","endContainer","dataSelectors","Array","isArray","selectorClass","some","dataSelector","filter","indexOf","arrowsNodes","changeSelectors","getSelectorsSize","enableActions","setSelectorsState","disableActions","cancel","force","_transition","getSizes","jump","getActiveItem","setCurrentActiveItemByUUID","parentSlider","addMainStyle","done","addControl","relatedTarget","getRelated","D","body","setControlTimeout","debounce","removeControl","action","justClear","inView","setDrag","isGrid","calculateContainerScroll","instanceSize","getIndexBaseSelectors","normalizePositionValue","max","findItemPosition","halfSelectorSize","currentIndex","transitionPosition","stopMoving","getMatrix","clearAnimation","withoutAnimation","typeOf","move","speed","fns","lastXY","x","y","containerPosition","diffSize","distance","axis","otherAxis","side","startTimeStamp","dragState","getXY","left","top","oldValue","newValue","culcDistance","dist","min","onDrag","dragstart","getPosition","timeStamp","dragend","dragmove","point","diff","dir","beforeEnterFullscreen","afterEnterFullscreen","removeStyleForIE","beforeExitFullscreen","afterExitFullscreen","pinnedNode","getCurrentStylePosition","uaName","isSelectorsActionEnabled","getShortSide","sortSelectorsByUUID","uuidList","sortredSelectors","sortNodesSelectors","lengthOrder","rewriteSelectorsIndexes","sortSelectors","orderLength","itemIndex","slideVideo","correctVideoSrc","_src","split","opts","Options","fromJSON","common","fromString","local","touchScreen","HTMLVideo","instanceOptions","option","set","get","player","id","playDebounce","currentTime","videoNode","videoWrapper","isAutoplay","onBeforeFullscreenIn","getCurrentTime","onAfterFullscreenIn","onBeforeFullscreenOut","onAfterFullscreenOut","videoModule","getAspectRatio","aspectratio","createPlayer","ready","play","pause","volume","getVideoNode","children","child","engine","generateUUID","getAPI","_err","err","PLAY","PAUSE","setCurrentTime","isPreStart","isPaused","YouTubeVideo","playerState","apiPlayer","seekTo","destroyVideoPlayer","videoID","getId","playVideo","pauseVideo","Player","videoId","playerVars","playlist","fs","rel","playsinline","controls","events","setVolume","getPlayerState","VimeoVideo","tmp","opt","seconds","Error","CAN_ZOOM_CLASS","NECESSARY_CSS","getContentSize","count","undefined","findSomethingForSelector","isVideo","getElementsByTagName","sliderLib","getSrc","cloneNode","getCustomSelectorNode","querySelector","isCustomAdded","$J_UUID","$uuid","groups","slideData","enabled","url","slideContent","setOptions","contentWrapper","fullscreenOnlyNode","isCustom","isStatic","checkNonSirv","findPinnedSelectorSide","thumbnailReferrerPolicy","getSelectorReferrerPolicy","availableSlide","isStartedFullInit","fullscreenState","CLOSED","sirvService","componentSize","isVideoPaused","isVideoReady","slideShownBy","SLIDE_SHOWN_BY","componentLoader","infoSize","sizePromise","isInDom","multiImages","lastOriginNode","dataThumbnailImage","getThumbnailImage","dataThumbnailHtml","dataHiddenSelector","hasAttribute","swipeDisabled","spinWasInited","getVideoThumbnailPromise","isPlaceholder","customThumbnailImageClassPromise","this_","thumbnail","getSelector","sendEventCloseFullscreenByClick","beforeParseSlide","parseSlide","attrValue","HTML","isSirvComponent","slideIsDisabled","getAttribute","dataSrc","nonSirv","tagName","viewContent","hasComponent","isSwipeDisabled","getSlideSize","isVideoSlide","belongsTo","group","g","addGroup","newGroup","removeGroup","isCustomSelector","single","isSingle","setNewIndex","getIndex","checkReadiness","eventName","sendReadyEvent","createFullscreenOnlyScreen","fullscreenOnly","createPinchEvent","FS_IN","scale","isEnabled","isBlokedTouchdrag","dragEvent","appendToDOM","createComponentLoader","isSlideAvailable","isSelectorPinned","getPinnedSelectorSide","setFullscreenEvents","OPENING","stopPropagation","addEventCloseFullscreenByClick","closeButtons","OPENED","isHiding","CLOSING","removeEventCloseFullscreeByClick","getOriginNode","zoomOut","mouseAction","originEvent","getTypeOfSlide","createSlideApi","beforeShow","afterShow","whoUse","who","beforeHide","afterHide","addSocialButtons","typeOfSirvService","removeSirvService","status","changeSpinToImage","oldPromise","newPromise","kill","setSirvEvents","eventData","componentEventData","spinTypeClassMap","row","col","validateComponentSocialButton","sTypes","dataImageSB","getDataImage","link","getLinkSocialButton","sbEnable","searchImagesInHtmlContent","images","isSirvImage","isCustomSlideEmpty","smvSelector","createImgFromDiv","old","initVideo","initVideoPlayer","secondSelectorClick","slideIndex","isSirvSelector","getSelectorProportion","getResponsiveImage","getNonSirvVideoThumbnail","baseReferrerPolicy","listImg","getImageInfo","info","getOriginSize","getSirvThumbnailForCustomSelector","data_","rImageInstance","getThumbnail","_data","_result","getImageSrc","isSpinInited","isSlideReady","typeOfSlide","getUUID","isSlideActive","AUTOPLAY","USER","INIT","videoOptions","isHandset","iPhoneSafariViewportRuler","SirvSlider","_FULLSCREEN","STANDARD_BUTTON_CLASS","FULLSCREEN_BUTTON_CLASS","FULLSCREEN_BUTTON_HIDE_CLASS","PSEUDO_FULLSCREEN_CLASS","STANDARD_CSS","MIN_AUTOPLAY","MAX_SLIDES_TO_CHANGE_PRELOAD_BEHAVIOR","isCustomId","join","getThumbnailsType","getExistComponents","productDetailsText","slidePinnedFilter","rawSlides","slides","pinnedAtTheEnd","pinnedAtTheStart","dataPinned","currentNode","indexSlide","pinnedAttr","Slider","viewerFileContent","slideOptions","isset","sbFacebook","sbTwitter","sbLinkedin","sbReddit","sbTumblr","sbPinterest","sbTelegram","lazyInit","movingContainer","slideWrapper","slidesContainer","selectorsWrapper","fullScreenBox","controlsWrapper","producDetailsText","productDetail","stopDistribution","isMoving","isSelectorsReady","isToolStarted","isInitialized","inViewModule","rootMargin","fullscreenButton","doSetSize","heightProportion","enabledIndexesOfSlides","contextMenu","countOfSizes","fullscreenStartTime","movingContainerId","cssRulesId","isComponentPinching","isZoomIn","hasSize","isPseudo","doHistory","autoplayDelay","residualAutoplayTime","sliderNodes","autoplayTimer","timerRemove","onResizeDebounce","onResizeWithoutSelectors","selectorsDebounce","fullscreenViewId","floor","random","now","FULLSCREEN_VIEWERS_IDs_ARRAY","controlsWrapperWasAppended","clearingTouchdragFunction","classes","movingContainerClasses","selectorsWrapperClasses","externalContainer","onResizeHandler","pseudoFSEvent","oe","keyCode","exitFullScreen","keyBoardArrowsCallback","d","kc","onHistoryStateChange","enterFullScreen","isFullscreenState","ex","parsedSlides","getSlides","addComponentsCSS","addCSSStringToHtml","addCSSString","setComponentsEvents","createSlides","readyState","createProductDetails","setRootMargin","v","innerHeight","documentElement","clientHeight","isHiddenSlides","window","matchMedia","matches","platform","normalizeOptions","tmpIndex","findIndex","console","warn","createContextMenu","setInViewAction","fragment","createDocumentFragment","appendChild","appendSelectors","createClasses","setClasses","containerHasHeight","createSelectors","flexBasis","steps","getBoundingClientRect","searchingOfProportions","postInitialization","visibleSlides","initOtherComponents","p","setContainerSize","isIe","takeRecords","_slide","createEffect","checkSingleSlide","slidesCount","nextSearching","nextIndex","getArrayIndex","_l","initTouchDrag","axises","otherAxise","startPosition","lastPercent","firstSlide","middleSlide","lastSlide","lastDirection","lastPosition","makeAnimation","isChanging","nextSlide","useless","stateOfScroll","lastAnimation","getSlidePercent","getStyleValue","pos","setSlidesCss","endOfEffect","currentSlidePosition","nextSlidePosition","fullClear","checkLoop","enableFullscreenButton","getNextSlide","fromIndex","U","getNextIndex","disableFullscreenButton","current","end","_type","isStandard","en","ss","grid","changeClasses","obj","className","InViewModule","entries","entry","iv","isIntersecting","intersectionRatio","pauseAutoplay","observe","slider","sendStats","typeOfEvent","event","stats","serverStats","account","sessionId","origin","eventTime","JSON","stringify","useBeacon","sendRawStats","detach","doc","win","scrn","screen","availWidth","availHeight","colorDepth","pixelDepth","innerWidth","clientWidth","addControllWrapper","visibleFullscreenButton","pseudo","isEmpty","trim","pointerType","toElement","showHideArrows","showHideSelectors","CSS_CURSOR_FULSCREEN_ALWAYS","createFullscreenButton","addHistory","urlHash","title","history","replaceState","pushState","isSelectorsContainer","canShowSelectors","findSlideIndex","getCountOfEnabledSlides","getItems","settings","defined","getSlidesByGroup","controlEnabledSlides","indexOfSlide","sort","a","b","disableSlide","withoutEvent","slideUUID","enableSlide","lenghtAvailableSlides","ENABLE","enableGroupOfSlides","disableGroupOfSlides","switchGroupOfSlides","fast","cIndex","isContains","newIndex","hideFullscreenButton","resultIndex","getSlideByUUID","_tmp","findSlide","canPinSlide","pinnedSlides","removeSlide","fromFindSlide","filteredSlides","viewerFilters","r","createReadOnlyProp","sortSlidesByOrder","slideindex","selectorCount","property","canShow","getAvailableSlideIndex","startIndex","addAvailableSlideNode","slideNode","indexAvailableSlide","sortItems","order","insertSlide","htmlNodeSlide","nonIndex","flag","contextmenuData","label","hidden","separator","dlw","magnify","zoomData","dl","zoomMenu","fullscreenMenu","downloadMenu","zoomin","zoomout","enterfullscreen","exitfullscreen","mode","showItem","disableItem","enableItem","hideItem","setCanShow","setFullScreenBox","Date","fullScreen","capable","boxSize","boxBoundaries","getRect","request","windowFullscreen","onEnter","onEnteredFullScreen","onExit","_beforeExitFullscreen","onExitFullScreen","fallback","rootTag","document","right","bottom","close","back","getSlide","currentDelay","currentAutoplayTime","disconnect","checkArgument","clearPrivateOptions","_value","replace","RegExp","source","optType","shift","getOptionsByType","oType","def","removeProperties","rm","_obj","Slider_","spinOptions","zoomOptions","imageOptions","sliderBuilder","parseOptions","privateOptions","inViewTimer","isRun","items","enableGroup","disableGroup","switchGroup","insertItem","removeItem","removeAllItems","itemsCount","next","prev","parent","makeOptions","as","viewer","getSlideOptions","exclude","createSlider","dataOptions","buildViewer","data2","mainNode","log","htmlSlide","nodeType","numberOfSlide","isEqual","eventname"],"mappings":"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","sourcesContent":["Sirv.define(\n    'Slider',\n    ['require','module','bHelpers','magicJS','globalVariables','globalFunctions','ResponsiveImage','helper','Promise!','EventEmitter','ContextMenu','ComponentLoader','defaultsVideoOptions','ViewerImage','SliderBuilder'],\n    (sirvRequire,sirvModule,bHelpers,magicJS,globalVariables,globalFunctions,ResponsiveImage,helper,Promise,EventEmitter,ContextMenu,ComponentLoader,defaultsVideoOptions,ViewerImage,SliderBuilder) => {\n        const moduleName = 'Slider';\n        \n        const $J = magicJS;\n        const $ = $J.$;\n        \n        \n        /* start-removable-module-css */\n        globalFunctions.rootDOM.addModuleCSSByName(moduleName, () => {\n            return '.Sirv{line-height:0}.Sirv>img{max-width:100%}.Sirv>:nth-child(n+2){display:none}.Sirv>smv-thumbnail{display:none}.smv,div.Sirv{-webkit-touch-callout:none;touch-callout:none;-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;position:relative;width:100%;height:100%;z-index:1;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.smv{flex-wrap:nowrap!important;align-content:stretch!important}.smv-message{display:block;position:absolute;top:50%;left:33%;width:33%;padding:6px;border-width:1px;border-color:#aaa;border-collapse:separate;border-style:solid;border-radius:15px;background-color:#fff;background-image:none;color:#000;font-size:10px;text-align:center;box-shadow:0 0 10px #000;overflow:hidden;z-index:100}.smv-fullscreen-box{background-color:#fff;touch-action:none}.smv-fullscreen-box .smv{overflow:hidden}.smv-fullscreen-box .smv-message{top:15px;border-color:#ccc;background-color:#000;color:#fff;font-size:18px}.smv-fullscreen-box .smv-controls{width:0;height:0}@media not screen and (max-device-width:767px){.smv-pseudo-fullscreen,.smv-pseudo-fullscreen body{overflow:hidden!important}.smv-pseudo-fullscreen body{height:auto!important}}@media screen and (max-device-width:767px){:root.smv-pseudo-fullscreen:not(.ios-magic):not([data-magic-ua=safari]),:root.smv-pseudo-fullscreen:not(.ios-magic):not([data-magic-ua=safari]) body{overflow:hidden!important}:root.smv-pseudo-fullscreen:not(.ios-magic):not([data-magic-ua=safari]) body{height:auto!important}}.smv-slides-box,.smv-slides-box .smv-slides{display:inline-block!important}.smv-slides-box,.smv-slides-box .smv-slides{top:0!important;left:0!important}.smv-slides-box,.smv-slides-box .smv-slides,.smv-slides-box .smv-slides .smv-slide,.smv-slides-box .smv-slides .smv-slide .smv-content{line-height:100%!important;text-align:center!important}.smv-slides-box{position:relative!important;z-index:43}.smv-slides-box .smv-slides{position:absolute!important;width:100%!important;height:100%!important;overflow:hidden!important;vertical-align:top;touch-action:pan-y}.smv-slides-box .smv-slides .smv-slide{display:inline-block;position:absolute!important}.smv-slides-box .smv-slides .smv-slide .smv-fullscreen-always{position:absolute!important;top:0;left:0;width:100%;height:100%;z-index:9999999999999999}.smv-slides-box .smv-slides .smv-slide.smv-shown{opacity:1;visibility:visible;z-index:7}.smv-slides-box .smv-slides .smv-slide.smv-hidden{opacity:0;visibility:hidden;z-index:5;pointer-events:none!important}.smv-slides-box .smv-slides .smv-slide .smv-content{overflow:hidden}.smv-slides-box .smv-slides .smv-slide .smv-content::after{display:inline-block;height:100%;content:\\'\\';vertical-align:middle}.smv-slides-box .smv-slides .smv-slide .smv-content>img{width:auto;max-width:100%;height:auto;max-height:100%;vertical-align:middle}.smv-slides-box .smv-slides .smv-slide .smv-content>*{display:inline-block!important;position:relative!important}.smv-slides-box .sirv-zoom{z-index:40!important}.smv-autohide .smv-slides-box{width:100%;height:100%;z-index:41}.smv-content>img.smv-component.preloading{visibility:hidden!important}.smv-cursor-zoom-in{cursor:zoom-in}.smv-cursor-zoom-out{cursor:zoom-out}.smv-cursor-dragging{cursor:move}.smv-cursor-fullscreen-always{cursor:pointer}.smv-cursor-fullscreen-always .smv-cursor-dragging,.smv-cursor-fullscreen-always .smv-cursor-zoom-in,.smv-cursor-fullscreen-always .smv-cursor-zoom-out{cursor:pointer}.smv-fullscreen-box .smv-selectors-bottom .smv-slides-box,.smv-fullscreen-box .smv-selectors-top .smv-slides-box{display:flex!important;flex-direction:column}.smv-fullscreen-box .smv-selectors-bottom .smv-slides-box .smv-slides,.smv-fullscreen-box .smv-selectors-top .smv-slides-box .smv-slides{flex:1 1 100%}.smv-selectors-box{position:relative!important;flex-grow:0;flex-shrink:0;z-index:42}.smv-selectors-box *{box-sizing:border-box}.smv-selectors-box .smv-selectors{display:flex!important;flex-wrap:nowrap;align-content:stretch;width:100%!important;height:100%!important;box-sizing:border-box}.smv-selectors-box.smv-h .smv-selectors{flex-direction:row}.smv-selectors-box.smv-v .smv-selectors{flex-direction:column}.smv-selectors-box.smv-external{position:relative!important}.fake-container{position:absolute;top:0;left:0;width:100%;height:100%;transition:opacity .2s linear;opacity:0}.fake-container.shown{opacity:1}.fake-container>div{display:inline-block;position:relative;top:0;left:0}.fake-container>div::before{position:absolute;top:50%;left:50%;width:85%;height:85%;transform:translate(-50%,-50%);transition:none;border:1px solid #ccc;background-color:#eaeaea;content:\\'\\'}.smv-fullscreen-box .smv-selectors-box.smv-thumbnails.smv-h{padding-top:4px;padding-bottom:4px}.smv-fullscreen-box .smv-selectors-box.smv-thumbnails.smv-h .smv-selectors{justify-content:center}.smv-fullscreen-box .smv-selectors-box.smv-thumbnails.smv-v{padding-right:4px;padding-left:4px}.smv-fullscreen-box .smv-selectors-box.smv-thumbnails.smv-v .smv-selectors{justify-content:center}.mobile-magic .smv-fullscreen-box .smv-selectors-bottom .smv-selectors-box.smv-thumbnails{padding-bottom:20px}.smv.smv-autohide .smv-selectors-box{position:absolute!important;transform:translate3d(0,0,0);transition:transform .3s linear}.smv.smv-autohide.smv-selectors-top .smv-selectors-box{top:0}.smv.smv-autohide.smv-selectors-left .smv-selectors-box{left:0}.smv.smv-autohide.smv-selectors-right .smv-selectors-box{right:0}.smv.smv-autohide.smv-selectors-bottom .smv-selectors-box{bottom:0}.smv.smv-autohide.smv-selectors-closed.smv-selectors-top .smv-selectors-box{transform:translate3d(0,-100%,0)}.smv.smv-autohide.smv-selectors-closed.smv-selectors-left .smv-selectors-box{transform:translate3d(-100%,0,0)}.smv.smv-autohide.smv-selectors-closed.smv-selectors-right .smv-selectors-box{transform:translate3d(100%,0,0)}.smv.smv-autohide.smv-selectors-closed.smv-selectors-bottom .smv-selectors-box{transform:translate3d(0,100%,0)}.smv-selectors-box.smv-h{width:100%}.smv-selectors-box.smv-v{height:100%}.smv-selectors-box .smv-selectors .smv-ss,.smv-selectors-box .smv-selectors .smv-ss .smv-scroll .smv-item,.smv-selectors-box.smv-thumbnails .smv-selectors .smv-ss .smv-scroll .smv-item .smv-selector{position:relative!important}.smv-selectors-box .smv-selectors .smv-selectors-scroll-container{display:flex!important;flex-wrap:nowrap;align-content:stretch;order:0;width:100%;height:100%;box-sizing:border-box}.smv-selectors-box .smv-selectors .smv-selectors-pinned-start{order:-1}.smv-selectors-box .smv-selectors .smv-selectors-pinned-end{order:1}.smv-selectors-box.smv-thumbnails.smv-v .smv-selectors{justify-content:center}.smv-selectors-box.smv-thumbnails.smv-v .smv-selectors-scroll-container{flex-direction:column}.smv-selectors-box.smv-thumbnails.smv-h .smv-selectors{justify-content:center}.smv-selectors-box.smv-thumbnails.smv-h .smv-selectors-scroll-container{flex-direction:row}.smv-selectors-box.smv-thumbnails.smv-h .smv-selectors .smv-selectors-pinned-start,.smv-selectors-box.smv-thumbnails.smv-v .smv-selectors .smv-selectors-pinned-start{display:flex!important;flex-wrap:nowrap;align-content:stretch;box-sizing:border-box}.smv-selectors-box.smv-thumbnails.smv-h .smv-selectors .smv-selectors-pinned-end,.smv-selectors-box.smv-thumbnails.smv-v .smv-selectors .smv-selectors-pinned-end{display:flex!important;flex-wrap:nowrap;align-content:stretch;box-sizing:border-box}.smv-selectors-box .smv-selectors .smv-ss{display:inline-block!important;flex-grow:1;flex-shrink:1;text-align:left;overflow:hidden;perspective:1000px}.smv-selectors-box .smv-selectors .smv-ss .smv-scroll{display:inline-flex!important;position:relative!important;top:0!important;left:0!important;flex-wrap:nowrap;align-content:stretch;align-items:center;justify-content:flex-start;transform-style:preserve-3d!important;-webkit-backface-visibility:hidden!important;backface-visibility:hidden!important}.smv-selectors-box.smv-grid .smv-selectors .smv-ss .smv-scroll{flex-wrap:wrap;align-content:center}.smv-selectors-box.smv-v .smv-selectors .smv-ss .smv-scroll{flex-direction:column}.smv-selectors-box.smv-grid .smv-selectors .smv-ss .smv-scroll,.smv-selectors-box.smv-h .smv-selectors .smv-ss .smv-scroll{flex-direction:row}.smv-selectors-box .smv-selectors .smv-ss .smv-scroll .smv-item smv-thumbnail{display:inline-block;position:relative}.smv-selectors-box.smv-thumbnails .smv-selectors .smv-ss .smv-scroll .smv-item smv-thumbnail{text-align:center}.smv-selectors-box.smv-thumbnails .smv-selectors .smv-ss .smv-scroll .smv-item smv-thumbnail:not([data-type]),.smv-selectors-box.smv-thumbnails .smv-selectors .smv-ss .smv-scroll .smv-item smv-thumbnail[data-type=image],.smv-selectors-box.smv-thumbnails .smv-selectors .smv-ss .smv-scroll .smv-item smv-thumbnail[data-type=spin],.smv-selectors-box.smv-thumbnails .smv-selectors .smv-ss .smv-scroll .smv-item smv-thumbnail[data-type=video],.smv-selectors-box.smv-thumbnails .smv-selectors .smv-ss .smv-scroll .smv-item smv-thumbnail[data-type=vimeo],.smv-selectors-box.smv-thumbnails .smv-selectors .smv-ss .smv-scroll .smv-item smv-thumbnail[data-type=youtube],.smv-selectors-box.smv-thumbnails .smv-selectors .smv-ss .smv-scroll .smv-item smv-thumbnail[data-type=zoom]{font-size:0}.smv-selectors-box.smv-thumbnails .smv-selectors .smv-ss .smv-scroll .smv-item smv-thumbnail:not([data-type]),.smv-selectors-box.smv-thumbnails .smv-selectors .smv-ss .smv-scroll .smv-item smv-thumbnail[data-type=html]{line-height:normal}.smv-selectors-box.smv-thumbnails .smv-selectors .smv-ss .smv-scroll .smv-item[data-selector-type=square] smv-thumbnail[data-type=image],.smv-selectors-box.smv-thumbnails .smv-selectors .smv-ss .smv-scroll .smv-item[data-selector-type=square] smv-thumbnail[data-type=spin],.smv-selectors-box.smv-thumbnails .smv-selectors .smv-ss .smv-scroll .smv-item[data-selector-type=square] smv-thumbnail[data-type=zoom]{text-align:left}.smv-selectors-box.smv-thumbnails.smv-h .smv-selectors .smv-ss .smv-scroll .smv-item smv-thumbnail img{width:auto;max-width:none!important;margin:0;padding:0}.smv-selectors-box.smv-v .smv-selectors .smv-ss .smv-scroll .smv-item smv-thumbnail{display:inline-block!important}.smv-selectors-box.smv-v .smv-selectors .smv-ss .smv-scroll .smv-item smv-thumbnail:not([data-type=html]){white-space:nowrap}.smv-selectors-box.smv-grid .smv-selectors .smv-ss .smv-scroll .smv-item{width:auto;height:auto}.smv-selectors-box.smv-h .smv-selectors .smv-ss .smv-scroll{height:100%}.smv-selectors-box.smv-v .smv-selectors .smv-ss .smv-scroll{width:100%}.smv-selectors-box.smv-thumbnails .smv-item smv-thumbnail .smv-thumbnail-placeholder{background-color:#e8e8e8}.smv-selectors-box.smv-thumbnails .smv-item smv-thumbnail>img{display:inline-block!important;position:relative!important}.smv-selectors-box.smv-thumbnails .smv-item[data-selector-type=crop] smv-thumbnail img[data-image-orientation=horizontal],.smv-selectors-box.smv-thumbnails .smv-item[data-selector-type=crop] smv-thumbnail img[data-image-orientation=vertical],.smv-selectors-box.smv-thumbnails .smv-item[data-selector-type=square] smv-thumbnail img[data-image-orientation=horizontal],.smv-selectors-box.smv-thumbnails .smv-item[data-selector-type=square] smv-thumbnail img[data-image-orientation=vertical]{position:absolute;top:50%;left:50%;transform:translate3d(-50%,-50%,0)}.smv-selectors-box.smv-thumbnails .smv-item[data-selector-type=square] smv-thumbnail img[data-image-orientation=horizontal]{height:auto}.smv-selectors-box.smv-thumbnails .smv-item[data-selector-type=crop] smv-thumbnail img[data-image-orientation=horizontal]{width:auto}.smv-selectors-box.smv-thumbnails .smv-item[data-selector-type=square] smv-thumbnail img[data-image-orientation=vertical]{width:auto}.smv-selectors-box.smv-thumbnails .smv-item[data-selector-type=crop] smv-thumbnail img[data-image-orientation=vertical]{height:auto}.smv-selectors-box.smv-v.smv-thumbnails .smv-item{line-height:1}.smv-selectors-box.smv-thumbnails .smv-item{box-sizing:border-box}.smv-selectors-box.smv-thumbnails.smv-h .smv-item{padding:2px 4px 2px 0}.smv-selectors-box.smv-thumbnails.smv-v .smv-item{padding:0 1px 4px}.smv-selectors-box.smv-thumbnails.smv-h .smv-item:first-child{padding-left:0}.smv-selectors-box.smv-thumbnails.smv-v .smv-item:first-child{padding-top:0}.smv-selectors-box.smv-thumbnails.smv-h .smv-item:last-child{padding-right:0}.smv-selectors-box.smv-thumbnails.smv-v .smv-item:last-child{padding-bottom:0}.smv-selectors-box smv-thumbnail{cursor:pointer}.smv-selectors-box smv-thumbnail smv-thumbnail{display:inline-block}.smv-thumbnails .smv-item smv-thumbnail{padding:2px;border:1px solid transparent;box-sizing:border-box}.smv-thumbnails .smv-item.smv-active smv-thumbnail{border-color:#373a3c}.smv-bullets .smv-selectors{align-items:center}.smv-bullets.smv-v .smv-selectors{justify-content:center}.smv-bullets.smv-v .smv-selectors-scroll-container{flex-direction:column}.smv-bullets.smv-h .smv-selectors{justify-content:center}.smv-bullets.smv-h .smv-selectors-scroll-container{flex-direction:row}.smv-bullets .smv-item{width:20px;height:20px}.smv-bullets .smv-item smv-thumbnail{display:inline-block!important;position:absolute!important;top:0!important;right:0!important;bottom:0!important;left:0!important;width:8px;height:8px;margin:auto!important;transition:transform .2s cubic-bezier(.17,.67,.41,1.87);border-radius:50%!important;background-color:#999;box-shadow:0 0 0 1px #999}.smv-bullets .smv-item smv-thumbnail::after{position:absolute;top:50%;left:50%;width:100%;height:100%;transform:translate3d(-50%,-50%,0);transition:background-color .2s linear;border-radius:50%;content:\\'\\'}.smv-bullets .smv-item.smv-active smv-thumbnail::after{background-color:#fff}.smv .smv-selectors-toggle-switch{display:none;position:absolute;margin:0;padding:0;transition:opacity .2s linear;outline:0;background-color:transparent;cursor:pointer;opacity:.9999;z-index:42}.smv-fullscreen-box .smv.smv-autohide .smv-selectors-toggle-switch{display:inline-block}.smv-autohide .smv-selectors-toggle-switch::after,.smv-autohide .smv-selectors-toggle-switch::before{display:inline-block;position:absolute;background-color:#999;content:\\'\\'}.smv-autohide .smv-h .smv-selectors-toggle-switch::after,.smv-autohide .smv-h .smv-selectors-toggle-switch::before{top:50%;width:40%;height:4px;transition:transform .2s linear,top .2s linear}.smv-autohide .smv-v .smv-selectors-toggle-switch::after,.smv-autohide .smv-v .smv-selectors-toggle-switch::before{left:50%;width:4px;height:40%;transition:transform .2s linear,left .2s linear}.smv-autohide .smv-h .smv-selectors-toggle-switch{left:50%;width:100px;height:40px;transform:translateX(-50%)}.smv-autohide .smv-v .smv-selectors-toggle-switch{top:50%;width:40px;height:100px;transform:translateY(-50%)}.smv-autohide.smv-selectors-top .smv-selectors-toggle-switch{top:100%}.smv-autohide.smv-selectors-left .smv-selectors-toggle-switch{left:100%}.smv-autohide.smv-selectors-right .smv-selectors-toggle-switch{right:100%}.smv-autohide.smv-selectors-bottom .smv-selectors-toggle-switch{bottom:100%}.smv-autohide .smv-h .smv-selectors-toggle-switch:before{left:50%;transform:translateY(-100%) rotateZ(0);transform-origin:left;border-top-left-radius:2px;border-bottom-left-radius:2px}.smv-autohide .smv-h .smv-selectors-toggle-switch:after{right:50%;transform:translateY(100%) rotateZ(0);transform-origin:right;border-top-right-radius:2px;border-bottom-right-radius:2px}.smv-autohide .smv-v .smv-selectors-toggle-switch:before{top:50%;transform:translateY(-100%) rotateZ(0);transform-origin:top;border-top-left-radius:2px;border-top-right-radius:2px}.smv-autohide .smv-v .smv-selectors-toggle-switch:after{bottom:50%;transform:translateY(100%) rotateZ(0);transform-origin:bottom;border-bottom-left-radius:2px;border-bottom-right-radius:2px}.smv-autohide.smv-selectors-bottom .smv-selectors-toggle-switch::before,.smv-autohide.smv-selectors-top.smv-selectors-closed .smv-selectors-toggle-switch::before{transform:translateX(-90%) rotateZ(20deg);border-radius:2px}.smv-autohide.smv-selectors-bottom .smv-selectors-toggle-switch::after,.smv-autohide.smv-selectors-top.smv-selectors-closed .smv-selectors-toggle-switch::after{transform:translateX(90%) rotateZ(-20deg);border-radius:2px}.smv-autohide.smv-selectors-bottom.smv-selectors-closed .smv-selectors-toggle-switch::before,.smv-autohide.smv-selectors-top .smv-selectors-toggle-switch::before{transform:translateX(-90%) rotateZ(-20deg);border-radius:2px}.smv-autohide.smv-selectors-bottom.smv-selectors-closed .smv-selectors-toggle-switch::after,.smv-autohide.smv-selectors-top .smv-selectors-toggle-switch::after{transform:translateX(90%) rotateZ(20deg);border-radius:2px}.smv-autohide.smv-selectors-left .smv-selectors-toggle-switch::before,.smv-autohide.smv-selectors-right.smv-selectors-closed .smv-selectors-toggle-switch::before{transform:translateY(-90%) rotateZ(20deg);border-radius:2px}.smv-autohide.smv-selectors-left .smv-selectors-toggle-switch::after,.smv-autohide.smv-selectors-right.smv-selectors-closed .smv-selectors-toggle-switch::after{transform:translateY(90%) rotateZ(-20deg);border-radius:2px}.smv-autohide.smv-selectors-left.smv-selectors-closed .smv-selectors-toggle-switch::before,.smv-autohide.smv-selectors-right .smv-selectors-toggle-switch::before{transform:translateY(-90%) rotateZ(-20deg);border-radius:2px}.smv-autohide.smv-selectors-left.smv-selectors-closed .smv-selectors-toggle-switch::after,.smv-autohide.smv-selectors-right .smv-selectors-toggle-switch::after{transform:translateY(90%) rotateZ(20deg);border-radius:2px}.smv-thumbnails .smv-item .smv-selector.smv-thumbnail-placeholder::after,.smv-thumbnails .smv-item .smv-selector.smv-thumbnail-placeholder::before{display:none}.smv-thumbnails smv-thumbnail[data-type=spin]::before,.smv-thumbnails smv-thumbnail[data-type=video]::before,.smv-thumbnails smv-thumbnail[data-type=vimeo]::before,.smv-thumbnails smv-thumbnail[data-type=youtube]::before{position:absolute;top:2px;right:2px;bottom:2px;left:2px;margin:auto;border-radius:0;background:no-repeat center/auto 85% rgba(55,58,60,.7);content:\\'\\';z-index:1}.smv-thumbnails smv-thumbnail[data-type=spin]::before{background-image:url(\"data:image/svg+xml,%3Csvg viewBox=\\'0 0 48 48\\' fill=\\'none\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E%3Cpath fill-rule=\\'evenodd\\' clip-rule=\\'evenodd\\' d=\\'M35.8149 18.5697c.1631.3545.3111.7175.4424 1.0883 1.3982.2431 2.6883.5262 3.8482.8425 2.0478.5585 3.6328 1.2057 4.6821 1.8824 1.0942.7056 1.3611 1.2749 1.3611 1.617 0 .3421-.2669.9114-1.3611 1.6169-1.0493.6768-2.6343 1.324-4.6821 1.8825-1.1599.3163-2.45.5993-3.8482.8425-.1313.3707-.279.7336-.4421 1.0881 6.7861-1.1006 11.3335-3.1205 11.3335-5.43 0-2.3096-4.5476-4.3296-11.3338-5.4302zm-6.3847 17.2452c-.3545.1632-.7173.311-1.0882.4423-.2431 1.3981-.5261 2.6881-.8425 3.848-.5583 2.0479-1.2056 3.6327-1.8823 4.6822-.7056 1.0942-1.2749 1.361-1.617 1.361-.342 0-.9113-.2668-1.6169-1.361-.6768-1.0495-1.324-2.6343-1.8823-4.6822-.3164-1.1598-.5994-2.4498-.8426-3.8478-.3708-.1313-.7338-.279-1.0883-.4422 1.1006 6.786 3.1203 11.3332 5.4301 11.3332 2.3096 0 4.3294-4.5473 5.43-11.3335zM31.6505 28.4122l-7.5169 4.6786-7.8897-5.4306v-7.7678l7.9045-4.7363 7.6204 4.7418-.1183 8.5143zm-.751-.3813l.1008-7.255-6.4777 4.2992V32l6.3769-3.9691zm-7.1331 3.9298v-6.8816l-6.7663-4.3242v6.5485l6.7663 4.6573zm-6.4601-11.8659l6.8341 4.3676 6.5808-4.3677-6.5806-4.0948-6.8343 4.0949z\\' fill=\\'%23fff\\'/%3E%3Cpath d=\\'M25.6172 3.21252c-.7056-1.09423-1.2749-1.36108-1.617-1.36108-.342 0-.9113.26685-1.6169 1.36108-.6768 1.04944-1.324 2.63428-1.8823 4.68201-.3164 1.15991-.5994 2.45007-.8426 3.84817a12.9205 12.9205 0 00-1.0883.4421C19.6707 5.3988 21.6904.85144 24.0002.85144c2.0519 0 3.8751 3.58915 5.0283 9.14856H30a.50008.50008 0 01.4253.2371.49995.49995 0 01.0219.4865l-1.5 3a.49916.49916 0 01-.1843.2017A.4993.4993 0 0128.5 14a.49896.49896 0 01-.2628-.0747.4994.4994 0 01-.1844-.2017l-1.5-3a.50039.50039 0 01-.0523-.2461.50103.50103 0 01.0742-.2404A.49998.49998 0 0127 10h1.0066c-.1574-.74137-.3268-1.44458-.5071-2.10547-.5583-2.04773-1.2056-3.63257-1.8823-4.68201zM12.1848 29.4299c-.1638-.3559-.3113-.719-.4421-1.0882-1.398-.2431-2.68801-.5261-3.84792-.8424-2.04761-.5585-3.63257-1.2057-4.68213-1.8825-1.09424-.7055-1.36109-1.2748-1.36109-1.6169 0-.3421.26685-.9114 1.36109-1.617 1.04956-.6767 2.63452-1.3239 4.68213-1.8824.5105-.1392 1.0462-.272 1.60522-.3977v1.0003c0 .0852.02179.1691.06329.2435a.5002.5002 0 00.41423.256.50036.50036 0 00.24608-.0523l3-1.5a.49916.49916 0 00.2017-.1843.4993.4993 0 00.0747-.2629.49896.49896 0 00-.0747-.2628.4994.4994 0 00-.2017-.1844l-3-1.5a.50036.50036 0 00-.24608-.0523.5002.5002 0 00-.41423.256.50035.50035 0 00-.06329.2435v.9753C4.22636 20.2356.85156 22.0102.85156 23.9999c0 2.3095 4.54712 4.3294 11.33324 5.43z\\' fill=\\'%23fff\\'/%3E%3C/svg%3E\")}.smv-thumbnails smv-thumbnail.spin-thumbnail-gif[data-type=spin]::before{display:none}.smv-thumbnails smv-thumbnail[data-type=video]::before,.smv-thumbnails smv-thumbnail[data-type=vimeo]::before,.smv-thumbnails smv-thumbnail[data-type=youtube]::before{background-image:url(\"data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 48 48\\'%3E%3Cpath fill=\\'%23fff\\' d=\\'M37.25 23.57a.5.5 0 010 .86l-21 12.13a.5.5 0 01-.75-.44V11.88a.5.5 0 01.75-.44z\\'/%3E%3C/svg%3E\");background-size:auto 65%}.smv-thumbnails smv-thumbnail.smv-custom-thumbnail[data-type=spin]::before,.smv-thumbnails smv-thumbnail.smv-custom-thumbnail[data-type=video]::before{display:none}.smv-selectors-box .smv-selectors .smv-ss .smv-scroll .smv-item[disabled]{display:none!important}.smv-selectors-box.smv-hide-selectors{display:none!important}.smv div.smv-button{box-shadow:none}.smv-arrow-control{display:inline-block!important;position:absolute;z-index:42!important;pointer-events:none}.smv-arrow-control.smv-hidden{display:none!important;visibility:hidden!important}.smv-h .smv-arrow-control-prev,.smv-v .smv-arrow-control-prev{order:-1}.smv-h .smv-arrow-control-next,.smv-v .smv-arrow-control-next{order:1}.smv-h .smv-arrow-control{top:0;width:60px;height:100%}.smv-h .smv-arrow-control-prev{left:0}.smv-h .smv-arrow-control-next{right:0}.smv-v .smv-arrow-control{left:0;width:100%;height:60px}.smv-v .smv-arrow-control-prev{top:0}.smv-v .smv-arrow-control-next{bottom:0}.smv-arrow{display:flex!important;position:absolute!important;top:0!important;right:0!important;bottom:0!important;left:0!important;align-items:center!important;justify-content:center!important;width:100%;height:100%;margin:auto!important;padding:0!important;border:0!important;outline:0!important;background-color:transparent!important;cursor:pointer!important;pointer-events:auto}.smv-arrow::-moz-focus-inner{border:0}.smv-arrow .smv-icon{display:inline-block!important;position:relative!important;top:0!important;left:0!important;width:100%!important;height:100%!important;transition:opacity .2s linear!important;background-position:center;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDggNDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xOC43NTkzIDkuMzQ5MjFDMTguMzk5OCA4LjkyOTg4IDE3Ljc2ODUgOC44ODEzMiAxNy4zNDkyIDkuMjQwNzRDMTYuOTI5OSA5LjYwMDE3IDE2Ljg4MTMgMTAuMjMxNSAxNy4yNDA3IDEwLjY1MDhMMTguNzU5MyA5LjM0OTIxWk0zMCAyNEwzMC43NTkzIDI0LjY1MDhDMzEuMDgwMiAyNC4yNzYzIDMxLjA4MDIgMjMuNzIzNyAzMC43NTkzIDIzLjM0OTJMMzAgMjRaTTE3LjI0MDcgMzcuMzQ5MkMxNi44ODEzIDM3Ljc2ODUgMTYuOTI5OSAzOC4zOTk4IDE3LjM0OTIgMzguNzU5M0MxNy43Njg1IDM5LjExODcgMTguMzk5OCAzOS4wNzAxIDE4Ljc1OTMgMzguNjUwOEwxNy4yNDA3IDM3LjM0OTJaTTE3LjI0MDcgMTAuNjUwOEwyOS4yNDA3IDI0LjY1MDhMMzAuNzU5MyAyMy4zNDkyTDE4Ljc1OTMgOS4zNDkyMUwxNy4yNDA3IDEwLjY1MDhaTTI5LjI0MDcgMjMuMzQ5MkwxNy4yNDA3IDM3LjM0OTJMMTguNzU5MyAzOC42NTA4TDMwLjc1OTMgMjQuNjUwOEwyOS4yNDA3IDIzLjM0OTJaIiBmaWxsPSIjOTk5OTk5Ii8+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-size:cover;opacity:.000001}@supports ((-webkit-mask-image:url()) or (mask-image:url())) and ((-webkit-mask-repeat:no-repeat) or (mask-repeat:no-repeat)) and ((-webkit-mask-position:center) or (mask-position:center)) and ((-webkit-mask-size:cover) or (mask-size:cover)){.smv-arrow-control .smv-arrow .smv-icon{-webkit-mask-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDggNDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xOC43NTkzIDkuMzQ5MjFDMTguMzk5OCA4LjkyOTg4IDE3Ljc2ODUgOC44ODEzMiAxNy4zNDkyIDkuMjQwNzRDMTYuOTI5OSA5LjYwMDE3IDE2Ljg4MTMgMTAuMjMxNSAxNy4yNDA3IDEwLjY1MDhMMTguNzU5MyA5LjM0OTIxWk0zMCAyNEwzMC43NTkzIDI0LjY1MDhDMzEuMDgwMiAyNC4yNzYzIDMxLjA4MDIgMjMuNzIzNyAzMC43NTkzIDIzLjM0OTJMMzAgMjRaTTE3LjI0MDcgMzcuMzQ5MkMxNi44ODEzIDM3Ljc2ODUgMTYuOTI5OSAzOC4zOTk4IDE3LjM0OTIgMzguNzU5M0MxNy43Njg1IDM5LjExODcgMTguMzk5OCAzOS4wNzAxIDE4Ljc1OTMgMzguNjUwOEwxNy4yNDA3IDM3LjM0OTJaTTE3LjI0MDcgMTAuNjUwOEwyOS4yNDA3IDI0LjY1MDhMMzAuNzU5MyAyMy4zNDkyTDE4Ljc1OTMgOS4zNDkyMUwxNy4yNDA3IDEwLjY1MDhaTTI5LjI0MDcgMjMuMzQ5MkwxNy4yNDA3IDM3LjM0OTJMMTguNzU5MyAzOC42NTA4TDMwLjc1OTMgMjQuNjUwOEwyOS4yNDA3IDIzLjM0OTJaIiBmaWxsPSIjOTk5OTk5Ii8+Cjwvc3ZnPgo=);mask-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDggNDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xOC43NTkzIDkuMzQ5MjFDMTguMzk5OCA4LjkyOTg4IDE3Ljc2ODUgOC44ODEzMiAxNy4zNDkyIDkuMjQwNzRDMTYuOTI5OSA5LjYwMDE3IDE2Ljg4MTMgMTAuMjMxNSAxNy4yNDA3IDEwLjY1MDhMMTguNzU5MyA5LjM0OTIxWk0zMCAyNEwzMC43NTkzIDI0LjY1MDhDMzEuMDgwMiAyNC4yNzYzIDMxLjA4MDIgMjMuNzIzNyAzMC43NTkzIDIzLjM0OTJMMzAgMjRaTTE3LjI0MDcgMzcuMzQ5MkMxNi44ODEzIDM3Ljc2ODUgMTYuOTI5OSAzOC4zOTk4IDE3LjM0OTIgMzguNzU5M0MxNy43Njg1IDM5LjExODcgMTguMzk5OCAzOS4wNzAxIDE4Ljc1OTMgMzguNjUwOEwxNy4yNDA3IDM3LjM0OTJaTTE3LjI0MDcgMTAuNjUwOEwyOS4yNDA3IDI0LjY1MDhMMzAuNzU5MyAyMy4zNDkyTDE4Ljc1OTMgOS4zNDkyMUwxNy4yNDA3IDEwLjY1MDhaTTI5LjI0MDcgMjMuMzQ5MkwxNy4yNDA3IDM3LjM0OTJMMTguNzU5MyAzOC42NTA4TDMwLjc1OTMgMjQuNjUwOEwyOS4yNDA3IDIzLjM0OTJaIiBmaWxsPSIjOTk5OTk5Ii8+Cjwvc3ZnPgo=);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:center;mask-position:center;-webkit-mask-size:cover;mask-size:cover;background-color:#999;background-image:none}}.smv-fullscreen-box .smv-slides-box .smv-arrow .smv-icon,.smv-slides-box:hover .smv-arrow .smv-icon{opacity:.4}.smv.smv-mobile .smv-arrow .smv-icon{opacity:.999999!important}.smv-h .smv-arrow .smv-icon{max-width:100%;max-height:70%}.smv-v .smv-arrow .smv-icon{max-width:70%;max-height:100%}.smv-selectors-box:hover .smv-arrow:hover .smv-icon,.smv-slides-box:hover .smv-arrow:hover .smv-icon{opacity:.999999}.mobile-magic .smv-slides-box .smv-arrow[disabled] .smv-icon{opacity:.2!important}.smv-selectors-box .smv-arrow[disabled] .smv-icon,.smv-selectors-box .smv-arrow[disabled]:hover .smv-icon,.smv-slides-box:hover .smv-arrow[disabled] .smv-icon,.smv-slides-box:hover .smv-arrow[disabled]:hover .smv-icon{opacity:.2!important}.smv-h .smv-arrow-prev .smv-icon{transform:rotateZ(180deg)!important}.smv-v .smv-arrow-prev .smv-icon{transform:rotateZ(-90deg)!important}.smv-v .smv-arrow-next .smv-icon{transform:rotateZ(90deg)!important}.smv-h .smv-arrow{width:44px;height:91px}.smv-v .smv-arrow{width:91px;height:44px}.smv-h .smv-selectors .smv-arrow{width:22px;height:45px}.smv-v .smv-selectors .smv-arrow{width:45px;height:22px}.smv-selectors-box .smv-arrow .smv-icon{opacity:.999999}.smv-selectors-box .smv-selectors .smv-arrow-control{position:relative;flex-grow:0;flex-shrink:0}.smv-h .smv-selectors .smv-arrow-control{align-self:stretch;width:35px;height:auto}.smv-v .smv-selectors .smv-arrow-control{align-self:stretch;width:auto;height:35px}.smv-fullscreen-box .smv.smv-autohide.smv-selectors-left .smv-h .smv-arrow-control-prev{left:110px;transition:left .3s linear}.smv-fullscreen-box .smv.smv-autohide.smv-selectors-left.smv-selectors-closed .smv-h .smv-arrow-control-prev{left:40px}.smv-fullscreen-box .smv.smv-autohide.smv-selectors-right .smv-h .smv-arrow-control-next{right:110px;transition:right .3s linear}.smv-fullscreen-box .smv.smv-autohide.smv-selectors-right.smv-selectors-closed .smv-h .smv-arrow-control-next{right:40px}.smv-fullscreen-box .smv.smv-autohide.smv-selectors-top .smv-v .smv-arrow-control-prev{top:110px;transition:top .3s linear}.smv-fullscreen-box .smv.smv-autohide.smv-selectors-top.smv-selectors-closed .smv-v .smv-arrow-control-prev{top:40px}.smv-fullscreen-box .smv.smv-autohide.smv-selectors-bottom .smv-v .smv-arrow-control-next{bottom:110px;transition:bottom .3s linear}.smv-fullscreen-box .smv.smv-autohide.smv-selectors-bottom.smv-selectors-closed .smv-v .smv-arrow-control-next{bottom:40px}.smv .smv-button-fullscreen{position:absolute;top:0;right:0;width:60px;height:60px;margin:0;padding:12px;transition:opacity .2s linear;border:0;outline:0;background-color:transparent;font-size:0;line-height:100%;cursor:pointer;opacity:.999999;z-index:84;box-sizing:border-box}.smv .smv-button-fullscreen::-moz-focus-inner{border:0}.smv:hover .smv-button-fullscreen:hover{opacity:.999999}.smv.smv-mobile .smv-button-fullscreen{opacity:.999999!important}.smv .smv-button-fullscreen.smv-button-hidden{opacity:0!important;pointer-events:none}.smv .smv-button-fullscreen .smv-icon{position:relative;top:0;left:0;width:100%;height:100%;background-position:center;background-repeat:no-repeat;background-size:cover}.smv .smv-button-fullscreen-close{padding:8px;opacity:.999999}.smv-button-fullscreen-open .smv-icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDggNDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xNC4zOTMyIDQ2QzExLjgwNjkgNDQuODY5MSA5LjQ1ODUyIDQzLjI5NTUgNy40NDM2OSA0MS4zNzVMMTUuOTM0IDMyLjg4NUMxNS40Mzk4IDMyLjQzNiAxNC45ODMyIDMxLjk0NjQgMTQuNTY5NSAzMS40MjE1TDYuMDU0MzggMzkuOTM2NEM0LjM5MTQ5IDM4LjA2NTIgMy4wMTY4MiAzNS45MzIxIDIgMzMuNjA2OFY0NUMyIDQ1LjU1MjMgMi40NDc3MiA0NiAzIDQ2SDE0LjM5MzJaIiBmaWxsPSIjOTk5OTk5Ii8+CjxwYXRoIGQ9Ik0xNC42NSAxNi40Nzc2TDYuMTM5OTcgNy45Njc4NkM0LjQzODYzIDkuODYxOTIgMy4wMzQyMiAxMi4wMjgxIDIgMTQuMzkzMlYzQzIgMi40NDc3MiAyLjQ0NzcyIDIgMyAySDE0LjM5MzJDMTEuODQ2NyAzLjExMzU1IDkuNTMwNzQgNC42NTYyOCA3LjUzNjggNi41MzY3MkwxNi4wMjk2IDE1LjAyOTJDMTUuNTMwNyAxNS40NzI4IDE1LjA2OTEgMTUuOTU3MyAxNC42NSAxNi40Nzc2WiIgZmlsbD0iIzk5OTk5OSIvPgo8cGF0aCBkPSJNMzEuNDIxOCAxNC41Njk4QzMxLjk0NjggMTQuOTgzNSAzMi40MzYzIDE1LjQ0MDEgMzIuODg1MiAxNS45MzQzTDQxLjM3NTYgNy40NDQyOUM0My4yOTU4IDkuNDU4OTkgNDQuODY5MiAxMS44MDcyIDQ2IDE0LjM5MzJWM0M0NiAyLjQ0NzcyIDQ1LjU1MjMgMiA0NSAySDMzLjYwNjhDMzUuOTMyNCAzLjAxNjk0IDM4LjA2NTYgNC4zOTE3OSAzOS45MzcgNi4wNTQ5M0wzMS40MjE4IDE0LjU2OThaIiBmaWxsPSIjOTk5OTk5Ii8+CjxwYXRoIGQ9Ik0zMi45NzExIDMxLjk3MDFDMzIuNTI3NSAzMi40NjkgMzIuMDQzIDMyLjkzMDcgMzEuNTIyOCAzMy4zNDk4TDQwLjAzMjggNDEuODU5NUMzOC4xMzg1IDQzLjU2MTEgMzUuOTcyMSA0NC45NjU3IDMzLjYwNjggNDZINDVDNDUuNTUyMyA0NiA0NiA0NS41NTIzIDQ2IDQ1VjMzLjYwNjhDNDQuODg2NiAzNi4xNTMxIDQzLjM0NCAzOC40Njg4IDQxLjQ2MzggNDAuNDYyNkwzMi45NzExIDMxLjk3MDFaIiBmaWxsPSIjOTk5OTk5Ii8+Cjwvc3ZnPgo=)}.smv-button-fullscreen-close .smv-icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDggNDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0yNS4zODQxIDI0LjcyNDFDMjQuOTkzNyAyNC4zMzM0IDI0Ljk5MzkgMjMuNzAwMiAyNS4zODQ3IDIzLjMwOThMMzcgMTEuNzA1MUwzNi4yOTQzIDExTDI0LjY3OTMgMjIuNjA0NEMyNC4yODg2IDIyLjk5NDcgMjMuNjU1NiAyMi45OTQ0IDIzLjI2NTIgMjIuNjAzOEwxMS43MDUyIDExLjAzNjZMMTEgMTEuNzQyMkwyMi41NTkzIDIzLjMwODdDMjIuOTQ5NyAyMy42OTk0IDIyLjk0OTUgMjQuMzMyNiAyMi41NTg4IDI0LjcyM0wxMS4wMzcgMzYuMjM0MkwxMS43NDI3IDM2LjkzOTNMMjMuMjY0MSAyNS40Mjg0QzIzLjY1NDggMjUuMDM4MSAyNC4yODc5IDI1LjAzODMgMjQuNjc4MiAyNS40Mjg5TDM2LjI0MjEgMzdMMzYuOTQ3MiAzNi4yOTQ0TDI1LjM4NDEgMjQuNzI0MVoiIGZpbGw9IiM5OTk5OTkiLz4KPHBhdGggZD0iTTI1LjM4NDEgMjQuNzI0MUMyNC45OTM3IDI0LjMzMzQgMjQuOTkzOSAyMy43MDAyIDI1LjM4NDcgMjMuMzA5OEwzNyAxMS43MDUxTDM2LjI5NDMgMTFMMjQuNjc5MyAyMi42MDQ0QzI0LjI4ODYgMjIuOTk0NyAyMy42NTU2IDIyLjk5NDQgMjMuMjY1MiAyMi42MDM4TDExLjcwNTIgMTEuMDM2NkwxMSAxMS43NDIyTDIyLjU1OTMgMjMuMzA4N0MyMi45NDk3IDIzLjY5OTQgMjIuOTQ5NSAyNC4zMzI2IDIyLjU1ODggMjQuNzIzTDExLjAzNyAzNi4yMzQyTDExLjc0MjcgMzYuOTM5M0wyMy4yNjQxIDI1LjQyODRDMjMuNjU0OCAyNS4wMzgxIDI0LjI4NzkgMjUuMDM4MyAyNC42NzgyIDI1LjQyODlMMzYuMjQyMSAzN0wzNi45NDcyIDM2LjI5NDRMMjUuMzg0MSAyNC43MjQxWiIgc3Ryb2tlPSIjOTk5OTk5Ii8+Cjwvc3ZnPgo=)}@supports ((-webkit-mask-image:url()) or (mask-image:url())) and ((-webkit-mask-repeat:no-repeat) or (mask-repeat:no-repeat)) and ((-webkit-mask-position:center) or (mask-position:center)) and ((-webkit-mask-size:cover) or (mask-size:cover)){.smv-button-fullscreen-open .smv-icon{background-color:#999;background-image:none;-webkit-mask-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDggNDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xNC4zOTMyIDQ2QzExLjgwNjkgNDQuODY5MSA5LjQ1ODUyIDQzLjI5NTUgNy40NDM2OSA0MS4zNzVMMTUuOTM0IDMyLjg4NUMxNS40Mzk4IDMyLjQzNiAxNC45ODMyIDMxLjk0NjQgMTQuNTY5NSAzMS40MjE1TDYuMDU0MzggMzkuOTM2NEM0LjM5MTQ5IDM4LjA2NTIgMy4wMTY4MiAzNS45MzIxIDIgMzMuNjA2OFY0NUMyIDQ1LjU1MjMgMi40NDc3MiA0NiAzIDQ2SDE0LjM5MzJaIiBmaWxsPSIjOTk5OTk5Ii8+CjxwYXRoIGQ9Ik0xNC42NSAxNi40Nzc2TDYuMTM5OTcgNy45Njc4NkM0LjQzODYzIDkuODYxOTIgMy4wMzQyMiAxMi4wMjgxIDIgMTQuMzkzMlYzQzIgMi40NDc3MiAyLjQ0NzcyIDIgMyAySDE0LjM5MzJDMTEuODQ2NyAzLjExMzU1IDkuNTMwNzQgNC42NTYyOCA3LjUzNjggNi41MzY3MkwxNi4wMjk2IDE1LjAyOTJDMTUuNTMwNyAxNS40NzI4IDE1LjA2OTEgMTUuOTU3MyAxNC42NSAxNi40Nzc2WiIgZmlsbD0iIzk5OTk5OSIvPgo8cGF0aCBkPSJNMzEuNDIxOCAxNC41Njk4QzMxLjk0NjggMTQuOTgzNSAzMi40MzYzIDE1LjQ0MDEgMzIuODg1MiAxNS45MzQzTDQxLjM3NTYgNy40NDQyOUM0My4yOTU4IDkuNDU4OTkgNDQuODY5MiAxMS44MDcyIDQ2IDE0LjM5MzJWM0M0NiAyLjQ0NzcyIDQ1LjU1MjMgMiA0NSAySDMzLjYwNjhDMzUuOTMyNCAzLjAxNjk0IDM4LjA2NTYgNC4zOTE3OSAzOS45MzcgNi4wNTQ5M0wzMS40MjE4IDE0LjU2OThaIiBmaWxsPSIjOTk5OTk5Ii8+CjxwYXRoIGQ9Ik0zMi45NzExIDMxLjk3MDFDMzIuNTI3NSAzMi40NjkgMzIuMDQzIDMyLjkzMDcgMzEuNTIyOCAzMy4zNDk4TDQwLjAzMjggNDEuODU5NUMzOC4xMzg1IDQzLjU2MTEgMzUuOTcyMSA0NC45NjU3IDMzLjYwNjggNDZINDVDNDUuNTUyMyA0NiA0NiA0NS41NTIzIDQ2IDQ1VjMzLjYwNjhDNDQuODg2NiAzNi4xNTMxIDQzLjM0NCAzOC40Njg4IDQxLjQ2MzggNDAuNDYyNkwzMi45NzExIDMxLjk3MDFaIiBmaWxsPSIjOTk5OTk5Ii8+Cjwvc3ZnPgo=);mask-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDggNDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xNC4zOTMyIDQ2QzExLjgwNjkgNDQuODY5MSA5LjQ1ODUyIDQzLjI5NTUgNy40NDM2OSA0MS4zNzVMMTUuOTM0IDMyLjg4NUMxNS40Mzk4IDMyLjQzNiAxNC45ODMyIDMxLjk0NjQgMTQuNTY5NSAzMS40MjE1TDYuMDU0MzggMzkuOTM2NEM0LjM5MTQ5IDM4LjA2NTIgMy4wMTY4MiAzNS45MzIxIDIgMzMuNjA2OFY0NUMyIDQ1LjU1MjMgMi40NDc3MiA0NiAzIDQ2SDE0LjM5MzJaIiBmaWxsPSIjOTk5OTk5Ii8+CjxwYXRoIGQ9Ik0xNC42NSAxNi40Nzc2TDYuMTM5OTcgNy45Njc4NkM0LjQzODYzIDkuODYxOTIgMy4wMzQyMiAxMi4wMjgxIDIgMTQuMzkzMlYzQzIgMi40NDc3MiAyLjQ0NzcyIDIgMyAySDE0LjM5MzJDMTEuODQ2NyAzLjExMzU1IDkuNTMwNzQgNC42NTYyOCA3LjUzNjggNi41MzY3MkwxNi4wMjk2IDE1LjAyOTJDMTUuNTMwNyAxNS40NzI4IDE1LjA2OTEgMTUuOTU3MyAxNC42NSAxNi40Nzc2WiIgZmlsbD0iIzk5OTk5OSIvPgo8cGF0aCBkPSJNMzEuNDIxOCAxNC41Njk4QzMxLjk0NjggMTQuOTgzNSAzMi40MzYzIDE1LjQ0MDEgMzIuODg1MiAxNS45MzQzTDQxLjM3NTYgNy40NDQyOUM0My4yOTU4IDkuNDU4OTkgNDQuODY5MiAxMS44MDcyIDQ2IDE0LjM5MzJWM0M0NiAyLjQ0NzcyIDQ1LjU1MjMgMiA0NSAySDMzLjYwNjhDMzUuOTMyNCAzLjAxNjk0IDM4LjA2NTYgNC4zOTE3OSAzOS45MzcgNi4wNTQ5M0wzMS40MjE4IDE0LjU2OThaIiBmaWxsPSIjOTk5OTk5Ii8+CjxwYXRoIGQ9Ik0zMi45NzExIDMxLjk3MDFDMzIuNTI3NSAzMi40NjkgMzIuMDQzIDMyLjkzMDcgMzEuNTIyOCAzMy4zNDk4TDQwLjAzMjggNDEuODU5NUMzOC4xMzg1IDQzLjU2MTEgMzUuOTcyMSA0NC45NjU3IDMzLjYwNjggNDZINDVDNDUuNTUyMyA0NiA0NiA0NS41NTIzIDQ2IDQ1VjMzLjYwNjhDNDQuODg2NiAzNi4xNTMxIDQzLjM0NCAzOC40Njg4IDQxLjQ2MzggNDAuNDYyNkwzMi45NzExIDMxLjk3MDFaIiBmaWxsPSIjOTk5OTk5Ii8+Cjwvc3ZnPgo=);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:center;mask-position:center;-webkit-mask-size:cover;mask-size:cover}.smv-button-fullscreen-close .smv-icon{background-color:#999;background-image:none;-webkit-mask-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDggNDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0yNS4zODQxIDI0LjcyNDFDMjQuOTkzNyAyNC4zMzM0IDI0Ljk5MzkgMjMuNzAwMiAyNS4zODQ3IDIzLjMwOThMMzcgMTEuNzA1MUwzNi4yOTQzIDExTDI0LjY3OTMgMjIuNjA0NEMyNC4yODg2IDIyLjk5NDcgMjMuNjU1NiAyMi45OTQ0IDIzLjI2NTIgMjIuNjAzOEwxMS43MDUyIDExLjAzNjZMMTEgMTEuNzQyMkwyMi41NTkzIDIzLjMwODdDMjIuOTQ5NyAyMy42OTk0IDIyLjk0OTUgMjQuMzMyNiAyMi41NTg4IDI0LjcyM0wxMS4wMzcgMzYuMjM0MkwxMS43NDI3IDM2LjkzOTNMMjMuMjY0MSAyNS40Mjg0QzIzLjY1NDggMjUuMDM4MSAyNC4yODc5IDI1LjAzODMgMjQuNjc4MiAyNS40Mjg5TDM2LjI0MjEgMzdMMzYuOTQ3MiAzNi4yOTQ0TDI1LjM4NDEgMjQuNzI0MVoiIGZpbGw9IiM5OTk5OTkiLz4KPHBhdGggZD0iTTI1LjM4NDEgMjQuNzI0MUMyNC45OTM3IDI0LjMzMzQgMjQuOTkzOSAyMy43MDAyIDI1LjM4NDcgMjMuMzA5OEwzNyAxMS43MDUxTDM2LjI5NDMgMTFMMjQuNjc5MyAyMi42MDQ0QzI0LjI4ODYgMjIuOTk0NyAyMy42NTU2IDIyLjk5NDQgMjMuMjY1MiAyMi42MDM4TDExLjcwNTIgMTEuMDM2NkwxMSAxMS43NDIyTDIyLjU1OTMgMjMuMzA4N0MyMi45NDk3IDIzLjY5OTQgMjIuOTQ5NSAyNC4zMzI2IDIyLjU1ODggMjQuNzIzTDExLjAzNyAzNi4yMzQyTDExLjc0MjcgMzYuOTM5M0wyMy4yNjQxIDI1LjQyODRDMjMuNjU0OCAyNS4wMzgxIDI0LjI4NzkgMjUuMDM4MyAyNC42NzgyIDI1LjQyODlMMzYuMjQyMSAzN0wzNi45NDcyIDM2LjI5NDRMMjUuMzg0MSAyNC43MjQxWiIgc3Ryb2tlPSIjOTk5OTk5Ii8+Cjwvc3ZnPgo=);mask-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDggNDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0yNS4zODQxIDI0LjcyNDFDMjQuOTkzNyAyNC4zMzM0IDI0Ljk5MzkgMjMuNzAwMiAyNS4zODQ3IDIzLjMwOThMMzcgMTEuNzA1MUwzNi4yOTQzIDExTDI0LjY3OTMgMjIuNjA0NEMyNC4yODg2IDIyLjk5NDcgMjMuNjU1NiAyMi45OTQ0IDIzLjI2NTIgMjIuNjAzOEwxMS43MDUyIDExLjAzNjZMMTEgMTEuNzQyMkwyMi41NTkzIDIzLjMwODdDMjIuOTQ5NyAyMy42OTk0IDIyLjk0OTUgMjQuMzMyNiAyMi41NTg4IDI0LjcyM0wxMS4wMzcgMzYuMjM0MkwxMS43NDI3IDM2LjkzOTNMMjMuMjY0MSAyNS40Mjg0QzIzLjY1NDggMjUuMDM4MSAyNC4yODc5IDI1LjAzODMgMjQuNjc4MiAyNS40Mjg5TDM2LjI0MjEgMzdMMzYuOTQ3MiAzNi4yOTQ0TDI1LjM4NDEgMjQuNzI0MVoiIGZpbGw9IiM5OTk5OTkiLz4KPHBhdGggZD0iTTI1LjM4NDEgMjQuNzI0MUMyNC45OTM3IDI0LjMzMzQgMjQuOTkzOSAyMy43MDAyIDI1LjM4NDcgMjMuMzA5OEwzNyAxMS43MDUxTDM2LjI5NDMgMTFMMjQuNjc5MyAyMi42MDQ0QzI0LjI4ODYgMjIuOTk0NyAyMy42NTU2IDIyLjk5NDQgMjMuMjY1MiAyMi42MDM4TDExLjcwNTIgMTEuMDM2NkwxMSAxMS43NDIyTDIyLjU1OTMgMjMuMzA4N0MyMi45NDk3IDIzLjY5OTQgMjIuOTQ5NSAyNC4zMzI2IDIyLjU1ODggMjQuNzIzTDExLjAzNyAzNi4yMzQyTDExLjc0MjcgMzYuOTM5M0wyMy4yNjQxIDI1LjQyODRDMjMuNjU0OCAyNS4wMzgxIDI0LjI4NzkgMjUuMDM4MyAyNC42NzgyIDI1LjQyODlMMzYuMjQyMSAzN0wzNi45NDcyIDM2LjI5NDRMMjUuMzg0MSAyNC43MjQxWiIgc3Ryb2tlPSIjOTk5OTk5Ii8+Cjwvc3ZnPgo=);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:center;mask-position:center;-webkit-mask-size:cover;mask-size:cover}}.smv-fullscreen-box .smv.smv-autohide.smv-selectors-right .smv-button-fullscreen{right:70px;transition:right .3s linear,opacity .2s linear}.smv-fullscreen-box .smv.smv-autohide.smv-selectors-right.smv-selectors-closed .smv-button-fullscreen{right:0}.smv-fullscreen-box .smv.smv-autohide.smv-selectors-top .smv-button-fullscreen{top:70px;transition:top .3s linear,opacity .2s linear}.smv-fullscreen-box .smv.smv-autohide.smv-selectors-top.smv-selectors-closed .smv-button-fullscreen{top:0}.smv-fullsreen-always .smv-button-fullscreen-open{display:none}.smv-video,.smv-video iframe,.smv-video>*{top:0;left:0;width:100%;height:100%}.smv-video>*{display:inline-block;position:relative}';\n        });\n        /* end-removable-module-css */\n        \n        /* eslint-disable no-unused-vars */\n\nconst CSS_MAIN_CLASS = globalVariables.smv;\nconst SELECTOR_TAG = CSS_MAIN_CLASS + '-thumbnail';\nconst SELECTOR_CLASS = CSS_MAIN_CLASS + '-selector';\n\nlet DPPX = ($J.W.node.devicePixelRatio >= 2) ? 2 : 1; // Dots per px. 2 - is equal to Retina.;\n\n/* eslint-env es6 */\n/* eslint-disable no-extra-semi */\n/* eslint-disable no-unused-vars */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\nconst defaultOptions = {\n    orientation: { type: 'string', 'enum': ['horizontal', 'vertical'], defaults: 'horizontal' },\n    arrows: { type: 'boolean', defaults: true },\n    loop: { type: 'boolean', defaults: true },\n\n    // Quality applied to images (1x - 1.49x).\n    quality: { type: 'number', minimum: 0, maximum: 100, defaults: 80 },\n    // Quality applied to hi-res images (1.5x - 2x).\n    hdQuality: { type: 'number', minimum: 0, maximum: 100, defaults: 60 },\n\n    itemsOrder: { type: 'array', defaults: [] },\n\n    autostart: {\n        oneOf: [\n            /*\n                created - init and load\n                visible - init and load in view\n                off - not init\n            */\n            { type: 'string', 'enum': ['created', 'visible', 'off'] },\n            { type: 'boolean', 'enum': [false] }\n        ],\n        defaults: 'visible'\n    },\n\n    // A distance from the viewport within which the in-view state should be triggered.\n    threshold: { type: 'number', minimum: 0, defaults: 0 },\n\n    slide: {\n        // slide.first\n        first: { type: 'number', minimum: 0, defaults: 0 },\n        // slide.delay\n        delay: { type: 'number', minimum: 9, defaults: 3000 },\n        // slide.preload\n        preload: { type: 'boolean', defaults: true },\n        // slide.autoplay\n        autoplay: { type: 'boolean', defaults: false },\n\n        animation: {\n            // slide.animation.type\n            type: {\n                oneOf: [\n                    { type: 'string', 'enum': ['off', 'slide', 'fade'] },\n                    { type: 'boolean', 'enum': [false] }\n                ],\n                defaults: 'fade'\n            },\n\n            // slide.animation.type\n            duration: { type: 'number', minimum: 9, defaults: 200 }\n        },\n\n        socialbuttons: {\n            enable: { type: 'boolean', defaults: false },\n            types: {\n                facebook: { type: 'boolean', defaults: true },\n                twitter: { type: 'boolean', defaults: true },\n                linkedin: { type: 'boolean', defaults: true },\n                reddit: { type: 'boolean', defaults: true },\n                tumblr: { type: 'boolean', defaults: true },\n                pinterest: { type: 'boolean', defaults: true },\n                telegram: { type: 'boolean', defaults: true }\n            }\n        }\n    },\n\n    thumbnails: {\n        // thumbnails.enable\n        enable: { type: 'boolean', defaults: true },\n        // thumbnails.size\n        size: { type: 'number', minimum: 5, defaults: 70 },\n        // thumbnails.position\n        position: { type: 'string', 'enum': ['top', 'left', 'right', 'bottom'], defaults: 'bottom' },\n        // thumbnails.type\n        type: { type: 'string', 'enum': ['square', 'auto', 'bullets', 'grid', 'crop'], defaults: 'square' },\n        // thumbnails.always\n        always: { type: 'boolean', defaults: false },\n        // thumbnails.target\n        target: {\n            oneOf: [\n                { type: 'string' },\n                { type: 'boolean', 'enum': [false] },\n            ],\n            defaults: false\n        },\n        // thumbnails.watermark\n        watermark: { type: 'boolean', defaults: true }\n    },\n\n    fullscreen: {\n        // fullscreen.enable\n        enable: { type: 'boolean', defaults: true },\n        // fullscreen.always\n        always: { type: 'boolean', defaults: false },\n        // fullscreen.native\n        'native': { type: 'boolean', defaults: false },\n\n        // TODO\n        // +background: <color>,\n\n        thumbnails: {\n            // fullscreen.thumbnails.enable\n            enable: { type: 'boolean', defaults: true },\n            // fullscreen.thumbnails.size\n            size: {\n                oneOf: [\n                    { type: 'string', 'enum': ['auto'] },\n                    { type: 'number', minimum: 5 }\n                ],\n                defaults: 'auto'\n            },\n            // fullscreen.thumbnails.position\n            position: { type: 'string', 'enum': ['top', 'left', 'right', 'bottom'], defaults: 'bottom' },\n            // fullscreen.thumbnails.type\n            type: { type: 'string', 'enum': ['square', 'auto', 'bullets', 'grid', 'crop'], defaults: 'square' },\n            // thumbnails.always\n            always: { type: 'boolean', defaults: false },\n            // fullscreen.thumbnails.autohide\n            autohide: { type: 'boolean', defaults: false },\n            // fullscreen.thumbnails.watermark\n            watermark: { type: 'boolean', defaults: true }\n        }\n    },\n\n    contextmenu: {\n        // contextmenu.enable\n        enable: { type: 'boolean', defaults: false },\n        text: {\n            zoom: {\n                // contextmenu.text.zoom.in\n                'in': {\n                    oneOf: [\n                        { type: 'string' },\n                        { type: 'boolean', 'enum': [false] }\n                    ],\n                    defaults: 'Zoom In'\n                },\n                // contextmenu.text.zoom.out\n                out: {\n                    oneOf: [\n                        { type: 'string' },\n                        { type: 'boolean', 'enum': [false] }\n                    ],\n                    defaults: 'Zoom Out'\n                }\n            },\n\n            fullscreen: {\n                // contextmenu.fullscreen.enter\n                enter: {\n                    oneOf: [\n                        { type: 'string' },\n                        { type: 'boolean', 'enum': [false] }\n                    ],\n                    defaults: 'Enter Full Screen'\n                },\n                // contextmenu.fullscreen.exit\n                exit: {\n                    oneOf: [\n                        { type: 'string' },\n                        { type: 'boolean', 'enum': [false] }\n                    ],\n                    defaults: 'Exit Full Screen'\n                }\n            },\n            // contextmenu.text.download\n            download: {\n                oneOf: [\n                    { type: 'string' },\n                    { type: 'boolean', 'enum': [false] }\n                ],\n                defaults: 'Download Image'\n            }\n        }\n    },\n\n    productdetail: {\n        enable: { type: 'boolean', defaults: false },\n        position: { type: 'string', 'enum': ['top', 'right', 'bottom', 'left'], defaults: 'top' }\n    }\n\n    /*\n        TODO\n        contextmenu: {\n            items: [\n                { action: zoomIn, text: '' }\n                { action: zoomOut }\n            ]\n        }\n\n    */\n\n    // ready: { type: 'function', defaults: () => {} },\n    // beforeSlideIn: { type: 'function', defaults: () => {} },\n    // beforeSlideOut: { type: 'function', defaults: () => {} },\n    // afterSlideIn: { type: 'function', defaults: () => {} },\n    // afterSlideOut: { type: 'function', defaults: () => {} },\n    // fullscreenIn: { type: 'function', defaults: () => {} },\n    // fullscreenOut: { type: 'function', defaults: () => {} }\n    // sendStats: { type: 'function', defaults: () => {} }\n};\n\n/* eslint-env es6 */\n/* global sirvRequire */\n/* global sirvModule */\n/* global helper */\n\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\", \"varsIgnorePattern\": \"Spin|Zoom|Video|Description|ProductDetail|SocialButtons|HotSpot|remoteModules\" }] */\n\n\nlet Spin = null;\nlet Zoom = null;\nlet Video = null;\n// let Description = null;\nlet ProductDetail = null;\nlet SocialButtons = null;\n// let HotSpots = null;\n\nconst remoteModules = (() => {\n    const sliderConfig = sirvModule.config();\n    const promises = {};\n\n    helper.objEach(sliderConfig, (key, value) => {\n        if (key !== 'description') {\n            promises[key] = new Promise((resolve) => {\n                sirvRequire([value], (sliderModule) => {\n                    switch (key) {\n                        case 'spin':\n                            Spin = sliderModule;\n                            break;\n                        case 'zoom':\n                            Zoom = sliderModule;\n                            break;\n                        case 'video':\n                            Video = sliderModule;\n                            break;\n                        // 'description' is not used\n                        // case 'description':\n                        //     Description = sliderModule;\n                        //     break;\n                        case 'productDetail':\n                            ProductDetail = sliderModule;\n                            break;\n                        case 'socialButtons':\n                            SocialButtons = sliderModule;\n                            break;\n                        //no default\n                    }\n\n                    resolve();\n                });\n            });\n        }\n    });\n\n    return {\n        load: (arr) => {\n            let result;\n            const mods = [];\n\n            if (!arr) { arr = []; }\n\n            arr.forEach((mod) => {\n                if (promises[mod]) {\n                    mods.push(promises[mod]);\n                }\n            });\n\n            if (!mods.length) {\n                result = Promise.resolve();\n            } else {\n                result = Promise.all(mods);\n            }\n\n            return result;\n        }\n    };\n})();\n\n/* eslint-env es6 */\n/* global $ */\n/* global $J */\n/* global EventEmitter */\n/* global helper */\n/* global ViewerImage */\n/* global Zoom */\n/* global Spin */\n/* global Video */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n/* eslint-disable no-lonely-if */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\", \"varsIgnorePattern\": \"SirvService\" }] */\n\n\nclass SirvService extends EventEmitter {\n    constructor(node, options, additionalOptions) {\n        super();\n\n        this.node = $(node);\n        this.options = options;\n\n        this.type = globalVariables.SLIDE.TYPES.NONE;\n        this.imgSrc = null;\n        this.effect = null;\n        this.additionalEffects = [];\n        this.isStarted = false;\n        this.isPrepared = false;\n        this.toolOptions = {};\n        this.api = {};\n        this.isActive = false;\n        this.additionalOptions = additionalOptions;\n\n        this.parse();\n        this.setEvents();\n    }\n\n    static isExist(node) {\n        let result = false;\n        const resultOfParse = helper.getSirvType(node);\n        const deps = {\n            Image: ViewerImage,\n            Spin: Spin,\n            Zoom: Zoom,\n            Video: Video\n        };\n\n        if (resultOfParse && !!deps[$J.camelize('-' + globalVariables.SLIDE.NAMES[resultOfParse.type])]) {\n            result = true;\n        }\n\n        return result;\n    }\n\n    createAPI() {\n        if (this.effect) {\n            this.api = this.effect.api;\n\n            let methods = [];\n            const t = globalVariables.SLIDE.TYPES;\n\n            switch (this.type) {\n                case t.SPIN:\n                    methods = ['play', 'rotate', 'rotateX', 'rotateY', 'zoomIn', 'zoomOut'];\n                    break;\n                case t.ZOOM:\n                    if (this.api.zoomIn) {\n                        methods = ['zoomIn', 'zoomOut'];\n                    }\n                    break;\n                // no default\n            }\n\n            methods.forEach((method) => {\n                const _oldMethod = this.api[method];\n                this.api[method] = (...args) => {\n                    let result = false;\n                    const om = _oldMethod;\n\n                    if (this.isActive) {\n                        result = om.apply(this, args);\n                    }\n\n                    return result;\n                };\n            });\n        }\n    }\n\n    setEvents() {\n        this.on('stats', (e) => {\n            e.stopEmptyEvent();\n            e.data.component = globalVariables.SLIDE.NAMES[this.type];\n        });\n\n        // init, ready, zoomIn, zoomOut\n        this.on('componentEvent', (e) => {\n            e.stopEmptyEvent();\n\n            e.data.component = globalVariables.SLIDE.NAMES[this.type];\n\n            if (e.data.type === 'ready') {\n                if (this.type === globalVariables.SLIDE.TYPES.IMAGE && e.data.data.imageIndex !== null) {\n                    e.stopAll();\n                }\n                this.toolOptions = this.effect.getOptions();\n            }\n        });\n    }\n\n    parse() {\n        const resultOfParse = helper.getSirvType(this.node.node);\n        if (resultOfParse) {\n            this.type = resultOfParse.type;\n            this.imgSrc = resultOfParse.imgSrc;\n        }\n    }\n\n    push(imgNode) {\n        if (ViewerImage) {\n            const effect = new ViewerImage(imgNode, {\n                options: this.options.image,\n                isFullscreen: this.additionalOptions.isFullscreen,\n                imageIndex: this.additionalEffects.length\n            });\n            effect.setParent(this);\n\n            this.additionalEffects.push({\n                node: imgNode,\n                src: $(imgNode).attr('src'),\n                datasrc: $(imgNode).attr('data-src'),\n                effect: effect\n            });\n        }\n    }\n\n    sendEvent(nameOfEvent) {\n        if (this.effect && this.effect.sendEvent) { this.effect.sendEvent(nameOfEvent); }\n    }\n\n    resize() {\n        this.broadcast('resize');\n    }\n\n    startFullInit(options) {\n        if (this.effect) {\n            this.effect.startFullInit(options ? options[this.type] : null);\n\n            if (this.additionalEffects.length) {\n                this.additionalEffects.forEach((effect) => {\n                    if (effect.effect) {\n                        effect.effect.startFullInit(options ? options[this.type] : null);\n                    }\n                });\n            }\n        }\n    }\n\n    getSelectorImgUrl(data) {\n        return this.effect.getSelectorImgUrl(data);\n    }\n\n    getInfoSize() {\n        let result = null;\n\n        if (this.type === globalVariables.SLIDE.TYPES.IMAGE) {\n            result = new Promise((resolve, reject) => {\n                Promise.all(\n                    [\n                        this.effect.getInfoSize()\n                    ].concat(\n                        this.additionalEffects.map((value) => {\n                            return value.effect.getInfoSize();\n                        })\n                    )\n                )\n                    .then((values) => { resolve(values[0]); })\n                    .catch(reject);\n            });\n        } else {\n            result = this.effect.getInfoSize();\n        }\n\n        return result;\n    }\n\n    start() {\n        if (this.isPrepared) { return; }\n        this.isPrepared = true;\n\n        const options = {\n            isFullscreen: this.additionalOptions.isFullscreen,\n            quality: this.additionalOptions.quality,\n            hdQuality: this.additionalOptions.hdQuality,\n            isHDQualitySet: this.additionalOptions.isHDQualitySet,\n            always: this.additionalOptions.always,\n            nativeFullscreen: this.additionalOptions.nativeFullscreen\n        };\n\n        const t = globalVariables.SLIDE.TYPES;\n\n        switch (this.type) {\n            case t.IMAGE:\n                if (ViewerImage) {\n                    this.effect = new ViewerImage(this.node.node, $J.extend(options, {\n                        options: this.options.image,\n                        imageIndex: null\n                    }));\n                    this.effect.setParent(this);\n                }\n                break;\n            case t.PANZOOM:\n            case t.ZOOM:\n                if (Zoom) {\n                    this.effect = new Zoom(this.node.node, $J.extend(options, {\n                        options: this.options.zoom\n                    }));\n                    this.effect.setParent(this);\n                }\n                break;\n            case t.SPIN:\n                if (Spin) {\n                    this.node.setCss({ // fix for shadow DOM\n                        width: '100%',\n                        height: '100%'\n                    });\n                    this.effect = new Spin(this.node.node, $J.extend(options, {\n                        options: this.options.spin\n                    }));\n                    this.effect.setParent(this);\n                }\n                break;\n            case t.VIDEO:\n                if (Video) {\n                    this.effect = new Video(this.node.node, $J.extend(options, {\n                        options: this.options.video,\n                        nativeFullscreen: this.additionalOptions.nativeFullscreen\n                    }));\n                    this.effect.setParent(this);\n                }\n                break;\n            default:\n        }\n\n        this.createAPI();\n    }\n\n    isThumbnailGif() {\n        if (this.effect && this.type === globalVariables.SLIDE.TYPES.SPIN) {\n            return this.effect.isThumbnailGif();\n        }\n\n        return false;\n    }\n\n    isZoomSizeExist() {\n        const t = globalVariables.SLIDE.TYPES;\n        if (this.effect && $J.contains([t.SPIN, t.PANZOOM, t.ZOOM], this.type)) {\n            return this.effect.isZoomSizeExist();\n        }\n\n        return false;\n    }\n\n    startGettingInfo() {\n        if (this.effect) {\n            this.effect.startGettingInfo();\n        }\n    }\n\n    startTool(isShown, preload, firstSlideAhead) {\n        if (!this.isStarted && this.effect) {\n            this.isStarted = true;\n            this.effect.run(isShown, preload, firstSlideAhead);\n\n            if (this.additionalEffects.length) {\n                this.additionalEffects.forEach((effect) => {\n                    if (effect.effect) {\n                        effect.effect.run(isShown, preload, firstSlideAhead);\n                    }\n                });\n            }\n        }\n    }\n\n    loadContent() {\n        if (this.isStarted) {\n            this.effect.loadContent();\n        }\n    }\n\n    loadThumbnail() {\n        if (this.isStarted) {\n            this.effect.loadThumbnail();\n        }\n    }\n\n    getType() {\n        return this.type;\n    }\n\n    getData() {\n        let result = {};\n\n        if (this.effect) {\n            result = $J.extend(result, this.api);\n            delete result.start;\n            delete result.stop;\n            delete result.refresh;\n        }\n\n        return result;\n    }\n\n    getOriginImageUrl() {\n        if (this.effect) {\n            return this.effect.getOriginImageUrl();\n        }\n\n        return null;\n    }\n\n    getZoomData() {\n        if ($J.contains([globalVariables.SLIDE.TYPES.SPIN, globalVariables.SLIDE.TYPES.ZOOM], this.type)) {\n            return {\n                isZoomed: this.effect.isZoomed(),\n                zoom: this.effect.getZoomData()\n            };\n        }\n\n        return null;\n    }\n\n    getSpinOrientation() {\n        if (this.type === globalVariables.SLIDE.TYPES.SPIN) {\n            return this.effect.getOrientation();\n        }\n\n        return null;\n    }\n\n    getSocialButtonData(data, isSpin) {\n        let result = null;\n\n        if (this.isStarted) {\n            if (this.type === globalVariables.SLIDE.TYPES.SPIN) {\n                result = this.effect.getSocialButtonData(data, isSpin);\n            } else {\n                result = this.effect.getSocialButtonData(data);\n            }\n        }\n\n        return result;\n    }\n\n    loadVideoSources() {\n        if (this.effect) {\n            this.effect.addSources();\n        }\n    }\n\n    /**\n     * Viewer has touchdrag event for slideing slides and if we have touchdrag event in the effect (spin) it can make conflict\n     * The method fixes conflict\n     */\n    isEffectActive() {\n        if (this.effect && this.type === 'spin') {\n            return this.effect.isActive();\n        }\n\n        return false;\n    }\n\n    activate() {\n        if (!this.isActive) {\n            this.isActive = true;\n        }\n    }\n\n    deactivate() {\n        this.isActive = false;\n    }\n\n    getToolOptions() {\n        return this.toolOptions;\n    }\n\n    destroy() {\n        if (this.effect) {\n            this.effect.destroy();\n\n            if (this.additionalEffects.length) {\n                this.additionalEffects.forEach((effect) => {\n                    if (effect.effect) {\n                        effect.effect.destroy();\n                    } else {\n                        if (!effect.src && effect.datasrc) {\n                            effect.node.removeAttribute('src');\n                        }\n                    }\n                });\n            }\n        }\n        this.toolOptions = {};\n        this.api = {};\n        this.isActive = false;\n        this.isStarted = false;\n        this.isPrepared = false;\n        this.off('stats');\n        this.off('componentEvent');\n        super.destroy();\n    }\n}\n\n/* eslint-env es6 */\n/* global EventEmitter */\n/* eslint class-methods-use-this: [\"error\", {\"exceptMethods\": [\"getNamesOfEffects\"]}] */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\", \"varsIgnorePattern\": \"Effect\" }] */\n\n\nconst Effects = {};\n\nconst Effect = (() => {\n    const getClassName = (str) => { return $J.camelize('-' + str); };\n\n    const getDirection = (direction, orientation) => {\n        var result;\n        if (orientation === 'horizontal') {\n            result = (direction === 'next') ? 'right' : 'left';\n        } else {\n            result = (direction === 'next') ? 'bottom' : 'top';\n        }\n\n        return result;\n    };\n\n    class Effect_ extends EventEmitter {\n        constructor(options) {\n            super();\n            this.options = $J.extend({\n                effect: 'blank',\n                orientation: 'horizontal',\n                time: 600,\n                easing: 'ease-in-out'\n            }, options);\n            this.isMove = false;\n\n            this.callbackData = null;\n\n            this.effectName = 'blank';\n            this.effect = null;\n\n            this.setEvents();\n        }\n\n        setEvents() {\n            this.on('effectStart', (e) => {\n                e.data = { callbackData: this.callbackData };\n                this.isMove = true;\n            });\n\n            this.on('effectEnd', (e) => {\n                e.data = { callbackData: this.callbackData };\n                this.isMove = false;\n                this.effect.destroy();\n                this.effect = null;\n            });\n        }\n\n        getNamesOfEffects() { return $J.hashKeys(Effects); }\n\n        make(element1, element2, options, callbackData) {\n            const o = $J.extend(this.options, (options || {}));\n\n            this.stop();\n\n            let name = getClassName(o.effect);\n\n            if (!Object.prototype.hasOwnProperty.call(Effects, name)) { name = 'Blank'; }\n\n            this.effect = new Effects[name](element1, element2, {\n                time: o.time,\n                easing: o.easing,\n                direction: getDirection(o.direction, o.orientation)\n            });\n            this.effect.setParent(this);\n\n            this.callbackData = callbackData;\n\n            this.effect.make();\n        }\n\n        stop() {\n            if (this.effect) {\n                this.effect.destroy();\n                this.effect = null;\n            }\n\n            this.callbackData = null;\n        }\n\n        destroy() {\n            this.stop();\n            this.off('effectStart');\n            this.off('effectEnd');\n            this.isMove = false;\n            super.destroy();\n        }\n    }\n\n    return Effect_;\n})();\n\n/* eslint-env es6 */\n/* global Effects */\n/* global EventEmitter */\n/* eslint class-methods-use-this: [\"error\", {\"exceptMethods\": [\"_move\"]}] */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\nclass Blank_ extends EventEmitter {\n    constructor(element1, element2, options) {\n        super();\n        this.name = 'blank';\n        this.elements = [element1, element2];\n        this.elements[0].node = $(this.elements[0].node);\n        this.elements[1].node = $(this.elements[1].node);\n        this.options = $J.extend({}, (options || {}));\n        this.states = {\n            NOT_STARTED: 0,\n            MOVING: 1,\n            ENDED: 2\n        };\n        this.state = this.states.NOT_STARTED;\n        this.isDestroyed = false;\n    }\n\n    _show(index) { this.elements[index].node.setCss({ opacity: 1, visibility: 'visible' }); }\n    _hide(index) { this.elements[index].node.setCss({ opacity: 0, visibility: 'hidden' }); }\n\n    _start() {\n        this.emit('effectStart', { name: this.name, indexes: [this.elements[0].index, this.elements[1].index] });\n        this._show(0);\n        this.elements[0].node.setCssProp('z-index', 9);\n        this._show(1);\n        this.elements[1].node.setCssProp('z-index', 7);\n    }\n\n    _move(callback) { callback(); }\n\n    _end() {\n        if (this.state !== this.states.ENDED) {\n            this.state = this.states.ENDED;\n            this._hide(0);\n            this.emit('effectEnd', { name: this.name, indexes: [this.elements[0].index, this.elements[1].index] });\n        }\n    }\n\n    _clear() {\n        this.elements.forEach((element) => {\n            element.node.setCss({ zIndex: '', opacity: '', visibility: '' });\n        });\n    }\n\n    make() {\n        if (this.state === this.states.NOT_STARTED) {\n            this.state = this.states.MOVING;\n            this._start();\n            this._move(() => {\n                this._end();\n                this._clear();\n            });\n        }\n    }\n\n    destroy() {\n        if (!this.isDestroyed) {\n            this.isDestroyed = true;\n            this._end();\n            this._clear();\n            this.state = this.states.ENDED;\n            super.destroy(this);\n        }\n    }\n}\n\nEffects.Blank = Blank_;\n\n/* global Effects, Blank_ */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\nEffects.Slide = (() => {\n    const toPercentString = (value) => { return value + '%'; };\n\n    const getNormalizeArray = (arr) => { return arr.map((value) => { return toPercentString(value); }); };\n\n    class Slide_ extends Blank_ {\n        constructor(element1, element2, options) {\n            super(element1, element2, options);\n\n            this.options = $J.extend(this.options, $J.extend({\n                direction: 'left', // top / left / right / bottom\n                time: 600,\n                easing: 'ease-in-out'\n            }, (options || {})));\n            this.name = 'slide';\n\n            this.from = $([0, -100]);\n            this.to = $([100, 0]);\n\n            if ($J.contains(['right', 'bottom'], this.options.direction)) {\n                this.from[1] *= (-1);\n                this.to[0] *= (-1);\n            }\n\n            this.from = getNormalizeArray(this.from);\n            this.to = getNormalizeArray(this.to);\n        }\n\n        _show(index) {\n            const el = this.elements[index].node;\n\n            if ($J.contains(['left', 'right'], this.options.direction)) {\n                this.from[index] = this.from[index] + ', 0%';\n                this.to[index] = this.to[index] + ', 0%';\n            } else {\n                this.from[index] = '0%, ' + this.from[index];\n                this.to[index] = '0%, ' + this.to[index];\n            }\n\n            el.setCssProp('transform', 'translate3d(' + this.from[index] + ', 0px)');\n            super._show(index);\n        }\n\n        _move(callback) {\n            const options = this.options;\n            this.elements[1].node.addEvent('transitionend', (e) => {\n                if (this.elements[1].node.node !== e.getTarget()) { return; }\n                e.stop();\n                super._move(callback);\n            });\n\n            this.elements.forEach((element, index) => {\n                element.node.getSize();\n                element.node.setCssProp('transition', 'transform ' + options.time + 'ms ' + options.easing);\n                element.node.setCssProp('transform', 'translate3d(' + this.to[index] + ', 0px)');\n            });\n        }\n\n        _clear() {\n            this.elements.forEach((element) => {\n                element.node.removeEvent('transitionend');\n                element.node.setCss({ transform: '', transition: '' });\n            });\n\n            super._clear(this);\n        }\n    }\n\n    return Slide_;\n})();\n\n/* eslint-env es6 */\n/* global Effects, Blank_ */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\nclass Fade_ extends Blank_ {\n    constructor(element1, element2, options) {\n        super(element1, element2, options);\n\n        this.options = $J.extend(this.options, $J.extend({\n            time: 600,\n            easing: 'linear'\n        }, (options || {})));\n        this.name = 'fade';\n\n        this.from = $([1, 0]);\n        this.to = $([0, 1]);\n    }\n\n    _show(index) {\n        super._show(index);\n        const el = this.elements[index].node;\n        el.setCssProp('opacity', this.from[index]);\n    }\n\n    _move(callback) {\n        const options = this.options;\n\n        this.elements[1].node.addEvent('transitionend', (e) => {\n            if (this.elements[1].node.node !== e.getTarget()) { return; }\n            e.stop();\n            super._move(callback);\n        });\n\n        this.elements.forEach((element, index) => {\n            element.node.getSize();\n            element.node.setCssProp('transition', 'opacity ' + options.time + 'ms ' + options.easing);\n            element.node.setCssProp('opacity', this.to[index]);\n        });\n    }\n\n    _clear() {\n        this.elements.forEach((element) => {\n            element.node.removeEvent('transitionend');\n            element.node.setCss({ opacity: '', transition: '' });\n        });\n\n        super._clear();\n    }\n}\n\nEffects.Fade = Fade_;\n\n/* eslint-env es6 */\n/* global CSS_MAIN_CLASS */\n/* global EventEmitter */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\", \"varsIgnorePattern\": \"Arrows\" }] */\n\n\nconst Arrows = (() => {\n    const createArrows = (orientation, customClass) => {\n        return $(['prev', 'next']).map((value) => {\n            const container = $J.$new('div').addClass(CSS_MAIN_CLASS + '-arrow-control ' + CSS_MAIN_CLASS + '-arrow-control-' + value);\n            const arrow = $J.$new('div')\n                .addClass(CSS_MAIN_CLASS + '-button')\n                .addClass(CSS_MAIN_CLASS + '-arrow')\n                .addClass(CSS_MAIN_CLASS + '-arrow-' + value);\n\n            if (customClass && customClass !== '') {\n                arrow.addClass(CSS_MAIN_CLASS + '-arrow-' + customClass);\n            }\n\n            container.append(arrow);\n            return container;\n        });\n    };\n\n    class Arrows_ extends EventEmitter {\n        constructor(options) {\n            super();\n\n            this.options = $J.extend({\n                orientation: 'horizontal',\n                customClass: ''\n            }, (options || {}));\n\n            this.arrows = createArrows(this.options.orientation, this.options.customClass);\n\n            this.arrows.forEach((arrow, index) => {\n                const _arrowType = !index ? 'prev' : 'next';\n                const button = $(arrow.node.firstChild);\n\n                arrow.store('arrowType', _arrowType);\n                button.append($J.$new('div').addClass(CSS_MAIN_CLASS + '-icon'));\n                button.addEvent('btnclick tap', $((typeOfArrow, e) => {\n                    e.stop();\n\n                    if (!arrow.fetch('disabled')) {\n                        this.emit('arrowAction', { data: { type: typeOfArrow } });\n                    }\n                }).bind(this, _arrowType));\n            });\n\n            this.isShow = true;\n        }\n\n        getNodes() { return $([this.arrows[0], this.arrows[1]]); }\n\n        show() {\n            if (!this.isShow) {\n                this.arrows.forEach((arrow) => {\n                    arrow.removeClass(CSS_MAIN_CLASS + '-hidden');\n                });\n                this.isShow = true;\n            }\n        }\n\n        hide() {\n            if (this.isShow) {\n                this.isShow = false;\n                this.arrows.forEach((arrow) => {\n                    arrow.addClass(CSS_MAIN_CLASS + '-hidden');\n                });\n            }\n        }\n\n        disable(arrow) {\n            if (arrow && this.isShow) {\n                const indexArrow = (arrow === 'forward' ? 1 : 0);\n                this.arrows[indexArrow].store('disabled', true);\n                $(this.arrows[indexArrow].node.firstChild).attr('disabled', '');\n            } else {\n                this.arrows.forEach((element) => {\n                    $(element.node.firstChild).removeAttr('disabled');\n                    element.store('disabled', false);\n                });\n            }\n        }\n\n        destroy() {\n            this.arrows.forEach((arrow) => {\n                $(arrow.node.firstChild).removeEvent('btnclick tap');\n                arrow.del('arrowType');\n                arrow.del('disabled');\n                arrow.remove();\n            });\n\n            this.arrows = $([]);\n            this.isShow = false;\n            super.destroy();\n        }\n    }\n\n    return Arrows_;\n})();\n\nconst Selectors = (() => {\n\n/* global helper */\n/* eslint-disable no-unused-vars */\n\nconst getOrientation = (position) => {\n    let result = 'horizontal';\n\n    if ($J.contains(['left', 'right'], position)) {\n        result = 'vertical';\n    }\n\n    return result;\n};\n\nconst equalOptions = (opt1, opt2) => {\n    let result = true;\n\n    helper.objEach(opt1, (key, value) => {\n        if (result && value !== opt2[key]) {\n            result = false;\n        }\n    });\n\n    return result;\n};\n\nconst DEFAULT_SIZE = {\n    width: 560,\n    height: 315\n};\n\nconst SELECTORS_STATE = {\n    NONE: 0,\n    STANDARD: 1,\n    FULLSCREEN: 2\n};\n\n/* eslint-env es6 */\n/* global EventEmitter, globalFunctions, DEFAULT_SIZE, SELECTOR_TAG */\n/* eslint-disable indent */\n/* eslint-disable no-lonely-if */\n/* eslint-disable class-methods-use-this */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\", \"varsIgnorePattern\": \"SelectorContent\" }] */\n\nclass SelectorContent extends EventEmitter {\n    constructor(node, type, size, orientation) {\n        super();\n        this.node = $(node);\n        this.type = type;\n        this.size = size; // 70\n        this.orientation = orientation; // selectors orientation 'horizontal' | 'vertical'\n        this.getPlaceholderSizePromise = null;\n        this.destroyed = false;\n        this.loaded = false;\n\n        this.content = null;\n        if (this.node.getTagName() === SELECTOR_TAG) {\n            this.content = $J.$A(this.node.node.childNodes);\n        }\n    }\n\n    isLoaded() {\n        return this.loaded;\n    }\n\n    setCssSize() {\n        const css = this.getSelectorSize();\n        this.node.setCss(css);\n    }\n\n    getSelectorSize() {\n        const selectorSize = {};\n\n        if ($J.contains(['square', 'crop'], this.type)) {\n            selectorSize.width = this.size;\n            selectorSize.height = this.size;\n        } else {\n            if (this.orientation === 'horizontal') {\n                selectorSize.height = this.size;\n            } else {\n                selectorSize.width = this.size;\n            }\n        }\n\n        return selectorSize;\n    }\n\n    getPlaceholderSize() {\n        if (!this.getPlaceholderSizePromise) {\n            this.getPlaceholderSizePromise = new Promise((resolve) => {\n                const size = this.getSelectorSize();\n\n                if (size.width && size.height) {\n                    resolve(size);\n                } else {\n                    if (this.destroyed) {\n                        resolve({ width: 0, height: 0 });\n                    } else {\n                        let s;\n                        this.getProportion()\n                            .then((_size) => {\n                                s = _size;\n                            }).finally(() => {\n                                if (!size.width) {\n                                    size.width = s.width / s.height * size.height;\n                                } else {\n                                    size.height = s.height / s.width * size.width;\n                                }\n                                resolve(size);\n                            });\n                    }\n                }\n            });\n        }\n\n        return this.getPlaceholderSizePromise;\n    }\n\n    getProportion() {\n        return Promise.resolve(DEFAULT_SIZE);\n    }\n\n    complete() {\n        this.node.setCss({ width: '', height: '' });\n        this.setCssSize();\n        return Promise.resolve();\n    }\n\n    getNode() {\n        return this.node;\n    }\n\n    appendTo(container) {\n        if (this.content) {\n            this.content.forEach((node) => {\n                container.append(node);\n            });\n        } else {\n            container.append(this.getNode());\n        }\n    }\n\n    destroy() {\n        this.destroyed = true;\n        this.node = null;\n        this.getPlaceholderSizePromise = null;\n        super.destroy();\n    }\n}\n\n/* eslint-env es6 */\n/* global SelectorContent, globalFunctions, DEFAULT_SIZE, helper */\n/* eslint-disable indent */\n/* eslint-disable no-lonely-if */\n/* eslint-disable class-methods-use-this */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\", \"varsIgnorePattern\": \"ImageSelectorContent\" }] */\n\n\nclass ImageSelectorContent extends SelectorContent {\n    constructor(node, type, size, orientation, watermark) {\n        super(node, type, size, orientation);\n\n        this.imageOrientation = 'horizontal'; // 'horizontal' | 'vertical'\n        this.isSirv = false;\n        this.watermark = watermark;\n\n        this.src = null;\n        this.srcset = null;\n        this.imageSize = { width: 0, height: 0 };\n\n        this.getProportionPromise = null;\n        this.getUrlPromise = null;\n        this.loadImagePromise = null;\n    }\n\n    setCssSize() {\n        if ($J.contains(['square', 'crop'], this.type)) {\n            this.customSquare();\n        } else {\n            this.removeCustomSquare();\n        }\n\n        super.setCssSize();\n    }\n\n    getProportion() {\n        if (!this.getProportionPromise) {\n            this.getProportionPromise = new Promise((resolve, reject) => {\n                if (this.destroyed) {\n                    resolve({ width: 0, height: 0 });\n                } else {\n                    this.emit('getSelectorProportion', { data: {\n                        resultingCallback: (data) => {\n                            let size = data.size;\n                            this.isSirv = data.isSirv;\n                            if (size) {\n                                if (!size.width) {\n                                    size = DEFAULT_SIZE;\n                                }\n\n                                resolve(size);\n                            } else {\n                                resolve(DEFAULT_SIZE);\n                            }\n                        }\n                    } });\n                }\n            });\n        }\n\n        return this.getProportionPromise;\n    }\n\n    setImageUrl(src, srcset, alt, referrerpolicy) {\n        this.src = src;\n        this.srcset = srcset;\n\n        if (this.node) {\n            if (this.src || this.srcset) {\n                if (referrerpolicy) {\n                    this.node.attr('referrerpolicy', referrerpolicy);\n                }\n\n                if (this.srcset) {\n                    this.node.attr('srcset', this.srcset + ' 2x');\n                }\n\n                this.node.attr('src', this.src);\n\n                if (!$J.browser.mobile) {\n                    // fix for firefox\n                    // glueing images to cursor\n                    this.node.addEvent('mousedown', (e) => { e.stopDefaults(); });\n                }\n            }\n\n            if (alt) {\n                this.node.attr('alt', alt);\n            }\n        }\n    }\n\n    getUrl() {\n        if (!this.getUrlPromise) {\n            this.getUrlPromise = new Promise((resolve, reject) => {\n                if (this.destroyed) {\n                    resolve(this);\n                } else {\n                    const selectorSize = this.getSelectorSize();\n                    this.emit('getSelectorImgUrl', { data: {\n                        crop: this.type === 'crop',\n                        type: this.type,\n                        watermark: this.watermark,\n                        size: selectorSize,\n                        resultingCallback: (result) => {\n                            if (result) {\n                                this.setImageUrl(result.src, result.srcset, result.alt, result.referrerpolicy);\n                                resolve(this);\n                            } else {\n                                reject(this);\n                            }\n                        }\n                    } });\n                }\n            });\n        }\n\n        return this.getUrlPromise;\n    }\n\n    setImageData(size) {\n        this.imageSize = size;\n        this.imageOrientation = (this.imageSize.width >= this.imageSize.height) ? 'horizontal' : 'vertical';\n    }\n\n    loadImage() {\n        if (!this.loadImagePromise) {\n            this.loadImagePromise = new Promise((resolve, reject) => {\n                if (this.node) {\n                    helper.loadImage(this.isSirv ? this.node.node : this.node.node.src)\n                        .then((imageData) => {\n                            this.loaded = true;\n                            this.setImageData(imageData.size);\n                            this.setCssSize();\n                            resolve(this);\n                        }).catch((error) => {\n                            if (this.destroyed) {\n                                resolve(this);\n                            } else {\n                                reject(this);\n                            }\n                        });\n                } else {\n                    resolve(this);\n                }\n            });\n        }\n\n        return this.loadImagePromise;\n    }\n\n    customSquare() {\n        if (Math.abs(this.imageSize.width - this.imageSize.height) > 2 && this.node.getTagName() !== 'div') {\n            const div = $J.$new('div').setCss({ overflow: 'hidden', position: 'relative' });\n            this.node.attr('data-image-orientation', this.imageOrientation);\n            div.append(this.node);\n            this.node.setCss({ width: '', height: '', 'max-width': 'none' });\n\n            if (this.type === 'crop') {\n                if (this.imageOrientation === 'horizontal') {\n                    this.node.setCssProp('height', this.size);\n                } else {\n                    this.node.setCssProp('width', this.size);\n                }\n            } else {\n                if (this.imageOrientation === 'vertical') {\n                    this.node.setCssProp('height', this.size);\n                } else {\n                    this.node.setCssProp('width', this.size);\n                }\n            }\n\n            this.node = div;\n        }\n    }\n\n    removeCustomSquare() {\n        if (this.node && this.node.getTagName() === 'div') {\n            this.node.removeEvent('touchstart selectstart contextmenu'); // TODO review it\n            this.node.remove();\n            this.node = $(this.node.node.firstChild);\n            this.node.setCss({ width: '', height: '', maxWidth: '' });\n            this.node.removeAttr('data-image-orientation');\n        }\n    }\n\n    complete() {\n        return this.getUrl().then(() => this.loadImage());\n    }\n\n    destroy() {\n        if (this.node) {\n            this.node.removeEvent('mousedown');\n        }\n        this.getProportionPromise = null;\n        this.getUrlPromise = null;\n        this.loadImagePromise = null;\n        super.destroy();\n    }\n}\n\n/* eslint-env es6 */\n/* global ImageSelectorContent, globalFunctions, helper, EventEmitter, CSS_MAIN_CLASS, SELECTOR_TAG, SELECTORS_STATE, equalOptions, SelectorContent */\n/* eslint-disable indent */\n/* eslint-disable no-lonely-if */\n/* eslint-disable class-methods-use-this */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\", \"varsIgnorePattern\": \"Selector\" }] */\n\n\nclass Selector extends EventEmitter {\n    constructor(parentNode, index, selector, uuid, options, infoPromise) {\n        super();\n\n        this.UUID = uuid;\n        this.options = helper.deepExtend({\n            standard: {\n                type: 'square', // 'square' | 'crop' | 'auto' | 'bullets'\n                size: 70,\n                orientation: 'horizontal', // 'horizontal' | 'vertical'\n                watermark: true // true | false\n            },\n            fullscreen: {\n                type: 'square', // 'square' | 'crop' | 'auto' | 'bullets'\n                size: 70,\n                orientation: 'horizontal', // 'horizontal' | 'vertical'\n                watermark: true // true | false\n            },\n\n            activeClass: CSS_MAIN_CLASS + '-active',\n            placeholderClass: CSS_MAIN_CLASS + '-thumbnail-placeholder',\n            selectorContent: null,\n            disabled: false\n        }, options || {});\n\n        this.parentContainer = $(parentNode);\n        this.index = index;\n        this.selector = $(selector) || $J.$new('div');\n        this.container = $J.$new('div').addClass(CSS_MAIN_CLASS + '-item').setCss({ display: 'inline-block' }); // itemContainer\n        this.placeholder = $J.$new('div').addClass(this.options.placeholderClass);\n\n        this.size = { width: 0, height: 0 };\n\n        this.currentObject = null;\n        this.isActive = false;\n        this.disabled = false;\n        this.destroyed = false;\n\n        this.container.append(this.selector);\n\n        this.parentContainer.append(this.container);\n\n        if (this.options.disabled) {\n            this.disable();\n        }\n\n        this.infoPromise = infoPromise || Promise.resolve(false);\n\n        this.state = SELECTORS_STATE.NONE;\n\n        this.initPromise = null;\n        this.init();\n    }\n\n    init() {\n        if (!this.initPromise) {\n            this.initPromise = new Promise((resolve) => {\n                this.infoPromise.then(() => {\n                    this.standard = this.createContent(this.options.standard);\n\n                    if (this.standard && this.standard instanceof ImageSelectorContent && equalOptions(this.options.standard, this.options.fullscreen)) {\n                        this.fullscreen = this.standard;\n                    } else {\n                        this.fullscreen = this.createContent(this.options.fullscreen, true);\n                    }\n                    this.selector.append(this.placeholder);\n\n                    const dataType = this.selector.attr('data-type');\n                    if (!dataType) {\n                        this.selector.setCssProp('font-size', 0);\n                    }\n\n                    this.setEvents();\n                    this.setCustomEvent();\n                    resolve();\n                });\n            });\n        }\n\n        return this.initPromise;\n    }\n\n    createContent(options, fullscreen) {\n        let result;\n\n        if (options.type !== 'bullets') {\n            if (this.options.selectorContent) {\n                result = new SelectorContent(this.options.selectorContent, options.type, options.size, options.orientation);\n            } else {\n                const img = $(new Image());\n                result = new ImageSelectorContent(img, options.type, options.size, options.orientation, options.watermark);\n            }\n\n            result.setParent(this);\n        }\n\n        return result;\n    }\n\n    getProportion() {\n        let result = Promise.resolve();\n\n        if (!this.disabled) {\n            if (this.state === SELECTORS_STATE.FULLSCREEN && this.fullscreen) {\n                result = this.fullscreen.getProportion();\n            } else if (this.standard) {\n                result = this.standard.getProportion();\n            }\n        }\n\n        return new Promise((resolve, reject) => {\n            this.init().then(() => {\n                result.then(resolve).catch(reject);\n            });\n        });\n    }\n\n    activatedSelector() {\n        return this.options.activated;\n    }\n\n    setEvents() {\n        this.on('getSelectorProportion', (e) => { e.data.UUID = this.UUID; });\n        this.on('getSelectorImgUrl', (e) => { e.data.UUID = this.UUID; });\n    }\n\n    addPlaceholder(selectorType, size) {\n        this.container.attr('data-selector-type', selectorType);\n        this.selector.append(this.placeholder);\n        this.placeholder.setCss(size);\n    }\n\n    /*\n        1 - SELECTORS_STATE.STANDARD,\n        2 - SELECTORS_STATE.FULLSCREEN\n    */\n    toggle(state /* 1 or 2 only */) {\n        return new Promise((res, rej) => {\n            this.init().then(() => {\n                let result;\n                const _resolve = Promise.resolve();\n\n                if (this.state !== state) {\n                    this.state = state;\n\n                    if (this.disabled) {\n                        result = _resolve;\n                    } else {\n                        let selector = this.standard;\n                        let selectorType = this.options.standard.type;\n                        if (state === 2) {\n                            selector = this.fullscreen;\n                            selectorType = this.options.fullscreen.type;\n                        }\n\n                        if (selectorType === 'bullets') {\n                            this.selector.node.innerHTML = '';\n                            this.currentObject = selectorType;\n                            this.container.attr('data-selector-type', selectorType);\n                            this.emit('resize');\n                            result = _resolve;\n                        } else {\n                            if (!(selector instanceof ImageSelectorContent)) {\n                                this.container.attr('data-selector-type', selectorType);\n                            }\n\n                            result = new Promise((resolve, reject) => {\n                                if (selector) {\n                                    selector.getPlaceholderSize().then((size) => {\n                                        if (this.state === state && !this.destroyed) {\n                                            if (!selector.isLoaded() && !this.options.selectorContent) {\n                                                // NOTE: this.selector.node.innerHTML = ''; doesn't work properly in IE 11\n                                                while (this.selector.node.firstChild) {\n                                                    this.selector.node.removeChild(this.selector.node.firstChild);\n                                                }\n\n                                                this.addPlaceholder(selectorType, size);\n                                            }\n                                            resolve();\n\n                                            selector.complete().then(() => {\n                                                if (this.state === state && !this.destroyed) {\n                                                    this.container.attr('data-selector-type', selectorType);\n                                                    this.placeholder.remove();\n\n                                                    // NOTE: this.selector.node.innerHTML = ''; doesn't work properly in IE 11\n                                                    while (this.selector.node.firstChild) {\n                                                        this.selector.node.removeChild(this.selector.node.firstChild);\n                                                    }\n\n                                                    selector.appendTo(this.selector);\n                                                    this.currentObject = selector;\n                                                    this.emit('resize');\n                                                }\n                                            }).catch(() => {\n                                                // empty\n                                            });\n                                        } else {\n                                            resolve();\n                                        }\n                                    });\n                                } else {\n                                    resolve();\n                                }\n                            });\n                        }\n                    }\n                } else {\n                    result = _resolve;\n                }\n\n                result.then(res).catch(rej);\n            });\n        });\n    }\n\n    setEvent() {\n        this.container.addEvent('btnclick tap', (e) => {\n            e.stop();\n            this.emit('selectorAction', { data: this.UUID });\n        });\n    }\n\n    setCustomEvent() {\n        if (this.options.selectorContent && $J.$(this.options.selectorContent).getTagName() === SELECTOR_TAG) {\n            const nodesList = $(this.options.selectorContent).node.querySelectorAll('a');\n\n            $J.$A(nodesList).forEach((item) => {\n                $J.$(item).addEvent('btnclick tap', (e) => {\n                    e.stop();\n\n                    if ($J.$(item).attr('href')[0] === '#') {\n                        $J.W.node.location.hash = '';\n                        $J.W.node.location.hash = $J.$(item).attr('href');\n                    } else {\n                        $J.W.node.open($J.$(item).attr('href'));\n                    }\n                });\n            });\n        }\n    }\n\n    activate() {\n        if (!this.isActive) {\n            this.isActive = true;\n            this.container.addClass(this.options.activeClass);\n        }\n    }\n\n    isActivate() {\n        return this.isActive;\n    }\n\n    deactivate() {\n        if (this.isActive) {\n            this.isActive = false;\n            this.container.removeClass(this.options.activeClass);\n        }\n    }\n\n    getSize() {\n        this.size = this.container.getSize();\n        return this.size;\n    }\n\n    disable() {\n        if (!this.disabled) {\n            this.disabled = true;\n            this.container.attr('disabled', 'true');\n            this.container.setCssProp('display', 'none');\n            this.deactivate();\n            this.emit('resize');\n        }\n    }\n\n    _toggleForEnable() {\n        let neededType;\n        if (this.state !== SELECTORS_STATE.NONE) {\n            if (this.state === SELECTORS_STATE.STANDARD) {\n                neededType = this.standard || 'bullets';\n            } else {\n                neededType = this.fullscreen || 'bullets';\n            }\n        }\n\n        let result;\n\n        if (neededType !== this.currentObject) {\n            const last = this.state;\n            this.state = SELECTORS_STATE.NONE;\n            result = this.toggle(last);\n        } else {\n            result = Promise.resolve();\n        }\n\n        return result;\n    }\n\n    enable() {\n        if (this.disabled) {\n            this.disabled = false;\n            this._toggleForEnable().then(() => {\n                if (!this.disabled) {\n                    this.container.removeAttr('disabled');\n                    this.container.setCssProp('display', '');\n                    this.emit('resize');\n                }\n            });\n        }\n    }\n\n    setIndex(index) {\n        this.index = index;\n    }\n\n    getContainer() {\n        return this.container;\n    }\n\n    getOptions() {\n        return this.options;\n    }\n\n    isDestroyed() {\n        return this.destroyed;\n    }\n\n    isDisabled() {\n        return this.disabled;\n    }\n\n    destroy() {\n        this.destroyed = true;\n        this.placeholder.remove();\n\n        this.off('getSelectorProportion');\n        this.off('getSelectorImgUrl');\n\n        if (this.standard) {\n            this.standard.destroy();\n            this.standard = null;\n        }\n\n        if (this.fullscreen) {\n            this.fullscreen.destroy();\n            this.fullscreen = null;\n        }\n\n        this.container.removeEvent('btnclick tap');\n        this.container.remove();\n        this.container = null;\n        this.parentContainer = null;\n        this.selector = null;\n        super.destroy();\n    }\n}\n\n/* eslint-env es6 */\n/* global globalFunctions, helper, EventEmitter, CSS_MAIN_CLASS, SELECTORS_STATE, Selector, getOrientation, Arrows */\n/* eslint-disable indent */\n/* eslint-disable no-lonely-if */\n/* eslint-disable class-methods-use-this */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\", \"varsIgnorePattern\": \"Selectors_\" }] */\n\n\nconst SELECTORS = 'selectors';\n\nconst getTime = (maxTime, width, step) => {\n    let result = maxTime;\n    const minTime = parseInt(maxTime / 3, 10);\n\n    result = parseInt(Math.abs(step) / width * maxTime, 10);\n\n    if (result < minTime) {\n        result = minTime;\n    } else if (result > maxTime) {\n        result = maxTime;\n    }\n\n    return result;\n};\n\nconst convertToTranslateString = (value, isHorizontal) => {\n    if (isHorizontal) {\n        value += 'px, 0';\n    } else {\n        value = '0, ' + value + 'px';\n    }\n\n    return value;\n};\n\nconst normalizeIndex = (index, length) => {\n    if (index < 0) {\n        index = 0;\n    } else if (index > length - 1) {\n        index = length - 1;\n    }\n\n    return index;\n};\n\nconst isPinned = (value) => {\n    return (value === 'start' || value === 'end');\n};\n\nclass Selectors_ extends EventEmitter {\n    constructor(selectors, options) {\n        super();\n\n        this.options = $J.extend({\n            isStandardGrid: false,\n            standardStyle: 'square', // square | crop | auto | bullets\n            standardSize: 70,\n            standardPosition: 'bottom', // top, left, right, bottom, false\n            standardWatermark: true,\n            isFullscreenGrid: false,\n            fullscreenStyle: 'square', // square | crop | auto | bullets\n            fullscreenSize: 70,\n            fullscreenPosition: 'bottom', // top, left, right, bottom, false\n            fullscreenAutohide: false,\n            fullscreenWatermark: true,\n            arrows: true,\n            activeClass: CSS_MAIN_CLASS + '-active'\n        }, (options || {}));\n\n        this.instanceNode = $J.$new('div').addClass(CSS_MAIN_CLASS + '-' + SELECTORS).setCss({ opacity: 0, visibility: 'hidden', transition: '' });\n        this.selectorsContainer = $J.$new('div').addClass(CSS_MAIN_CLASS + '-ss');\n        this.selectorsScroll = $J.$new('div').addClass(CSS_MAIN_CLASS + '-scroll').setCss({ transform: 'translate3d(0, 0, 0)' });\n        this.controlButton = $J.$new('div').addClass(CSS_MAIN_CLASS + '-' + SELECTORS + '-toggle-switch');\n\n        this.selectorsScrollContainer = $J.$new('div').addClass(CSS_MAIN_CLASS + '-selectors-scroll-container');\n\n        this.pinnedNodeAtStart = null;\n        this.pinnedNodeAtEnd = null;\n\n        this.hasPinnedSelector = false;\n        this.baseSelectorsList = null;\n        this.blocksPinnedInited = false;\n\n        this.pinnedStartList = [];\n        this.pinnedEndList = [];\n\n        this.isMove = false;\n        this.currentPosition = 0;\n        this.containerSize = { width: 0, height: 0 };\n        this.halfContainerSize = 0;\n        this.scrollSize = { width: 0, height: 0 };\n        this.halfScrollSize = 0;\n        this.currentActiveItem = null;\n        this.isShown = false;\n        this.isControlShown = true;\n        this.isControlInDoc = false;\n        this.controlDebounce = null;\n        this.isReady = false;\n        this.resizeTimeout = null;\n        this.isActionsEnabled = true;\n\n        this.isDone = false;\n        this.isInView = false;\n\n        this.state = SELECTORS_STATE.STANDARD;\n\n        this.arrows = null;\n\n        this.currentStylePosition = this.options.standardPosition;\n\n        this.longSide = null;\n        this.shortSide = null;\n        this.currentAxis = 'x';\n\n        this.isStarted = false;\n        this.isDestroyed = false;\n\n        this.setHasPinnedSelector(selectors);\n        this.initPinnedBlocks();\n\n        this.selectors = [];\n        selectors.forEach((_selector, index) => {\n            this.selectors.push(this.createSelector(_selector, index));\n        });\n\n        this.sortByBaseSelectors(this.selectors);\n        this.orderPinnedSelectorByType(this.selectors);\n        this.identifyVariables();\n        this.setContainerCss();\n    }\n\n    getSelectorsIndexByUUID(uuid) {\n        let result = null;\n\n        for (let i = 0, l = this.selectors.length; i < l; i++) {\n            if (this.selectors[i].UUID === uuid) {\n                result = i;\n                break;\n            }\n        }\n\n        return result;\n    }\n\n    getSelectorByUUID(uuid) {\n        let result = this.getSelectorsIndexByUUID(uuid);\n\n        if (result !== null) {\n            result = this.selectors[result];\n        }\n\n        return result;\n    }\n\n    insertSelectorBefore(index, selector) {\n        let selectors = this.selectors;\n        let selectorsScroll = this.selectorsScroll;\n\n        if (this.hasPinnedSelector) {\n            if (!selector.getOptions().pinned) {\n                selectors = this.baseSelectorsList;\n                index = this.updateIndex(selectors, selector);\n            } else if (selector.getOptions().pinned === 'start') {\n                selectors = this.pinnedStartList;\n                selectorsScroll = $J.$(this.getPinnedScrollContainer(this.pinnedNodeAtStart));\n                index = this.updateIndex(selectors, selector);\n            } else if (selector.getOptions().pinned === 'end') {\n                selectors = this.pinnedEndList;\n                selectorsScroll = $J.$(this.getPinnedScrollContainer(this.pinnedNodeAtEnd));\n                index = this.updateIndex(selectors, selector);\n            }\n        }\n\n        let referenceElement = null;\n\n        if (index + 1 < selectors.length) {\n            referenceElement = selectors[index + 1].container;\n        }\n\n        this.hide();\n        selectorsScroll.node.insertBefore(selector.getContainer().node, referenceElement ? referenceElement.node : referenceElement);\n    }\n\n    insertSelector(selectorIndex, selectorObj) {\n        if (!this.blocksPinnedInited) {\n            this.setHasPinnedSelector(selectorObj);\n            this.initPinnedBlocks();\n            this.addPinnedBlocks();\n        }\n\n        const selector = this.createSelector(selectorObj, selectorIndex);\n\n        if (this.isDone) {\n            selector.setEvent();\n        }\n\n        this.hide();\n        this.selectors.splice(selectorIndex, 0, selector);\n        this.selectors.forEach((_selector, index) => { _selector.setIndex(index); });\n\n        if (selector.getOptions().pinned) {\n            this.orderPinnedSelectorByType(selector);\n            if (!this.baseSelectorsList || !this.baseSelectorsList.length) {\n                this.sortByBaseSelectors(this.selectors);\n            }\n        } else {\n            this.sortByBaseSelectors(this.selectors);\n        }\n\n        this.insertSelectorBefore(selectorIndex, selector);\n        selector.toggle(this.state);\n    }\n\n    getScrollContainer(targetSelector) {\n        if (targetSelector.pinned === 'start') {\n            return this.getPinnedScrollContainer(this.pinnedNodeAtStart);\n        } else if (targetSelector.pinned === 'end') {\n            return this.getPinnedScrollContainer(this.pinnedNodeAtEnd);\n        }\n\n        return this.selectorsScroll;\n    }\n\n    disableSelector(selectorUUID) {\n        const selector = this.getSelectorByUUID(selectorUUID);\n        if (selector) {\n            if (this.currentActiveItem && this.currentActiveItem === selector) {\n                this.currentActiveItem = null;\n            }\n\n            this.hide();\n            selector.disable();\n        }\n    }\n\n    enableSelector(selectorUUID) {\n        const selector = this.getSelectorByUUID(selectorUUID);\n        if (selector) {\n            this.hide();\n            selector.enable();\n        }\n    }\n\n    pickOut(selectorUUID) {\n        let selector = null;\n        const index = this.getSelectorsIndexByUUID(selectorUUID);\n\n        if (index !== null) {\n            selector = this.selectors[index];\n        }\n\n        if (selector) {\n            const pinned = selector.getOptions().pinned;\n            selector.destroy();\n            this.selectors.splice(index, 1);\n            this.selectors.forEach((_selector, _index) => { _selector.setIndex(_index); });\n            this.reorderDataSelectors(pinned);\n        }\n    }\n\n    reorderDataSelectors(statusSelector) {\n        if (statusSelector) {\n            this.setHasPinnedSelector(this.selectors);\n        }\n\n        if (this.hasPinnedSelector && !statusSelector) {\n            this.sortByBaseSelectors(this.selectors);\n        } else if (this.hasPinnedSelector && statusSelector) {\n            this.orderPinnedSelectorByType(this.selectors);\n        } else if (!this.hasPinnedSelector) {\n            this.baseSelectorsList = [];\n            this.pinnedStartList = [];\n            this.pinnedEndList = [];\n        }\n    }\n\n    createSelector(selectorData, index) {\n        const selector = new Selector(this.getScrollContainer(selectorData), index, selectorData.node, selectorData.UUID, {\n            standard: {\n                type: this.options.standardStyle,\n                size: this.options.standardSize,\n                orientation: getOrientation(this.options.standardPosition),\n                watermark: this.options.standardWatermark\n            },\n            fullscreen: {\n                type: this.options.fullscreenStyle,\n                size: this.options.fullscreenSize,\n                orientation: getOrientation(this.options.fullscreenPosition),\n                watermark: this.options.fullscreenWatermark\n            },\n            activeClass: this.options.activeClass,\n            selectorContent: selectorData.selectorContent,\n            disabled: selectorData.disabled,\n            pinned: selectorData.pinned,\n            activated: selectorData.activated\n        }, selectorData.infoPromise);\n\n        selector.setParent(this);\n\n        return selector;\n    }\n\n    setEventsFromSelectors() {\n        this.on('selectorAction', (e) => {\n            e.stopAll();\n            this.emit('changeSlide', { data: { UUID: e.data } });\n            const index = this.getSelectorsIndexByUUID(e.data);\n\n            if (index !== null) {\n                this.setActiveItem(index);\n            }\n        });\n\n        let timer;\n        this.on('resize', (e) => {\n            e.stopAll();\n            clearTimeout(timer);\n            timer = setTimeout(() => {\n                this.onResize();\n            }, 16);\n        });\n    }\n\n    initPinnedBlocks() {\n        const getContainers = () => {\n            return {\n                containerNode: $J.$new('div').addClass(CSS_MAIN_CLASS + '-ss'),\n                scrollNode: $J.$new('div').addClass(CSS_MAIN_CLASS + '-scroll').setCss({ transform: 'translate3d(0, 0, 0)' })\n            };\n        };\n\n        if (!this.blocksPinnedInited && this.hasPinnedSelector) {\n            this.pinnedNodeAtStart = $J.$new('div').addClass(CSS_MAIN_CLASS + '-selectors-pinned-start');\n            this.pinnedNodeAtEnd = $J.$new('div').addClass(CSS_MAIN_CLASS + '-selectors-pinned-end');\n\n            let containerNodes = getContainers();\n            const startContainer = containerNodes.containerNode;\n            startContainer.append(containerNodes.scrollNode);\n            this.pinnedNodeAtStart.append(startContainer);\n\n            containerNodes = getContainers();\n            const endContainer = containerNodes.containerNode;\n            endContainer.append(containerNodes.scrollNode);\n            this.pinnedNodeAtEnd.append(endContainer);\n            this.blocksPinnedInited = true;\n        }\n    }\n\n    addPinnedBlocks() {\n        if (this.blocksPinnedInited && this.hasPinnedSelector) {\n            this.instanceNode.append(this.pinnedNodeAtStart);\n            this.instanceNode.append(this.pinnedNodeAtEnd);\n        }\n    }\n\n    setHasPinnedSelector(dataSelectors) {\n        if (Array.isArray(dataSelectors)) {\n            if (dataSelectors.length < 1) {\n                this.hasPinnedSelector = false;\n                return;\n            }\n\n            const selectorClass = dataSelectors[0] instanceof Selector;\n\n            this.hasPinnedSelector = dataSelectors.some((selector) => {\n                return isPinned(selectorClass ? selector.getOptions().pinned : selector.pinned);\n            });\n            return;\n        } else if (isPinned(dataSelectors.pinned)) {\n            this.hasPinnedSelector = true;\n            return;\n        }\n\n        this.hasPinnedSelector = false;\n    }\n\n    orderPinnedSelectorByType(dataSelectors) {\n        if (this.hasPinnedSelector) {\n            if (Array.isArray(dataSelectors)) {\n                this.pinnedStartList = [];\n                this.pinnedEndList = [];\n\n                dataSelectors.forEach((dataSelector) => {\n                    const selectorType = dataSelector.options.pinned;\n\n                    if (selectorType === 'start') {\n                        this.pinnedStartList.push(dataSelector);\n                    } else if (selectorType === 'end') {\n                        this.pinnedEndList.push(dataSelector);\n                    }\n                });\n            } else {\n                if (dataSelectors.getOptions().pinned === 'start') {\n                    this.pinnedStartList = this.selectors.filter((selector) => {\n                        return selector.getOptions().pinned === 'start';\n                    });\n                } else if (dataSelectors.getOptions().pinned === 'end') {\n                    this.pinnedEndList = this.selectors.filter((selector) => {\n                        return selector.getOptions().pinned === 'end';\n                    });\n                }\n            }\n        }\n    }\n\n    updateIndex(selectors, selector) {\n        return selectors.indexOf(selector);\n    }\n\n    init() {\n        this.createArrows();\n        this.selectorsScrollContainer.append(this.selectorsContainer).appendTo(this.instanceNode);\n\n        this.addPinnedBlocks();\n\n        if (this.arrows) {\n            this.arrows.hide();\n            const arrowsNodes = this.arrows.getNodes();\n            this.selectorsScrollContainer.append(arrowsNodes[0]);\n            this.selectorsScrollContainer.append(arrowsNodes[1]);\n        }\n\n        this.selectorsContainer.append(this.selectorsScroll);\n\n        this.isShown = true;\n        this.hide();\n\n        this.identifyVariables();\n        this.setEventsFromSelectors();\n\n        if (!this.currentStylePosition) {\n            this.instanceNode.setCssProp('display', 'none');\n        }\n\n        Promise.all(this.selectors.map(selector => selector.getProportion())).finally(() => {\n            this.isReady = true;\n            this.emit('selectorsReady');\n        });\n    }\n\n    identifyVariables() {\n        if (this.currentStylePosition) {\n            const isHorizontal = getOrientation(this.currentStylePosition) === 'horizontal';\n\n            this.longSide = isHorizontal ? 'width' : 'height';\n            this.shortSide = this.longSide === 'width' ? 'height' : 'width';\n            this.currentAxis = isHorizontal ? 'x' : 'y';\n        } else {\n            this.longSide = null;\n            this.shortSide = null;\n        }\n    }\n\n    changeSelectors(direction) {\n        return Promise.all(this.selectors.map(selector => selector.toggle(direction)));\n    }\n\n    getSelectorsSize() {\n        this.selectors.forEach((selector) => { if (!selector.isDestroyed()) { selector.getSize(); } });\n    }\n\n    enableActions() {\n        if (!this.isActionsEnabled) {\n            this.isActionsEnabled = true;\n            this.show();\n\n            if (this.options.fullscreenAutohide) {\n                this.setSelectorsState(true);\n            }\n        }\n    }\n\n    disableActions() {\n        if (this.isActionsEnabled) {\n            this.isActionsEnabled = false;\n            this.hide();\n            if (this.controlDebounce) {\n                this.controlDebounce.cancel();\n            }\n        }\n    }\n\n    show(force) {\n        if (!this.isShown && this.isActionsEnabled && !this.isDestroyed) {\n            const _transition = force ? '' : 'opacity 400ms linear';\n            this.isShown = true;\n\n            this.selectorsScroll.setCss({ display: 'inline-flex' }); // for rendering\n            this.getSizes();\n\n            this.jump(this.getActiveItem(), true);\n\n            this.instanceNode.setCss({\n                opacity: 1,\n                visibility: 'visible',\n                transition: _transition\n            });\n        }\n    }\n\n    getActiveItem() {\n        return this.currentActiveItem ? this.currentActiveItem.index : 0;\n    }\n\n    setCurrentActiveItemByUUID(selectorUUID) {\n        const selector = this.getSelectorByUUID(selectorUUID);\n\n        if (selector && !this.currentActiveItem) {\n            this.currentActiveItem = selector;\n        }\n    }\n\n    hide() {\n        if (this.isShown) {\n            this.isShown = false;\n            this.instanceNode.setCss({ opacity: 0, visibility: 'hidden', transition: '' });\n        }\n    }\n\n    start(parentSlider) {\n        if (!this.isStarted && this.isInView) {\n            this.isStarted = true;\n            if (this.currentStylePosition) {\n                this.changeSelectors(1)\n                    .then(() => globalFunctions.rootDOM.addMainStyle(parentSlider))\n                    .then(() => {\n                        if (!this.isDestroyed) {\n                            this.getSelectorsSize();\n                            this.done();\n                            this.show();\n                        }\n                    });\n            } else {\n                this.done();\n            }\n        }\n    }\n\n    addControl() {\n        if (!this.isControlInDoc) {\n            this.instanceNode.addEvent('mouseover mouseout', (e) => {\n                let relatedTarget = e.getRelated();\n\n                if (relatedTarget) {\n                    relatedTarget = $(relatedTarget);\n                }\n\n                while (relatedTarget && relatedTarget.node !== this.instanceNode.node && relatedTarget.node !== $J.D.node.body) {\n                    relatedTarget = relatedTarget.node.parentNode;\n                    if (relatedTarget) {\n                        relatedTarget = $(relatedTarget);\n                    }\n                }\n\n                if (!relatedTarget || relatedTarget.node !== this.instanceNode.node) {\n                    this.setControlTimeout(e.type === 'mouseover');\n                }\n            });\n\n            this.controlButton.addEvent('btnclick tap', (e) => {\n                this.setControlTimeout(true);\n                this.setSelectorsState(!this.isControlShown);\n            });\n\n            $(this.instanceNode.node.parentNode).append(this.controlButton);\n\n            this.controlDebounce = helper.debounce(() => { this.setSelectorsState(false); }, 3000);\n\n            this.isControlInDoc = true;\n        }\n    }\n\n    removeControl() {\n        if (this.isControlInDoc) {\n            this.instanceNode.removeEvent('mouseover mouseout');\n            this.controlDebounce.cancel();\n            this.isControlShown = true;\n            this.controlButton.removeEvent('btnclick tap');\n            this.controlButton.remove();\n            this.isControlInDoc = false;\n        }\n    }\n\n    setSelectorsState(open) {\n        this.isControlShown = open;\n\n        this.setControlTimeout();\n\n        this.emit('visibility', {\n            action: this.isControlShown ? 'show' : 'hide'\n        });\n    }\n\n    setControlTimeout(justClear) {\n        if (this.isControlInDoc) {\n            this.controlDebounce.cancel();\n            if (this.isControlShown && !justClear) {\n                this.controlDebounce();\n            }\n        }\n    }\n\n    getNode() { return this.instanceNode; }\n\n    isHorizontal() { return getOrientation(this.currentStylePosition) === 'horizontal'; }\n\n    inView(value, parentSlider) {\n        this.isInView = value;\n\n        // sometimes selectors can be inside external container and we do not know which container with 'Sirv' class name inicialide it\n        // so we need pass it for right adding css in shadow dom\n        this.start(parentSlider);\n    }\n\n    done() {\n        if (!this.isDone && !this.isDestroyed) {\n            this.isDone = true;\n            this.getSizes();\n\n            this.selectors.forEach((selector) => {\n                selector.setEvent();\n            });\n            this.onResize();\n            this.setDrag();\n            this.emit('selectorsDone');\n        }\n    }\n\n    setActiveItem(index) {\n        const selector = this.selectors[index];\n\n        if (this.currentActiveItem) {\n            this.currentActiveItem.deactivate();\n        }\n\n        if (selector && !selector.isDisabled() && selector.activatedSelector()) {\n            selector.activate();\n            this.currentActiveItem = selector;\n        }\n\n        if (!selector.isActivate() && this.currentActiveItem) {\n            this.currentActiveItem.activate();\n        }\n    }\n\n    createArrows() {\n        if (!this.options.arrows || this.options.standardStyle === 'grid' && this.options.standardStyle === 'grid') { return; }\n\n        this.arrows = new Arrows({\n            orientation: getOrientation(this.currentPosition || this.options.fullscreenPosition),\n            customClass: 'thumbnails'\n        });\n        this.arrows.setParent(this);\n\n        this.on('arrowAction', (e) => {\n            e.stopAll();\n            this.jump(e.data.type);\n        });\n    }\n\n    isGrid() {\n        if (this.state === SELECTORS_STATE.FULLSCREEN) {\n            return this.options.isFullscreenGrid;\n        }\n\n        return this.options.isStandardGrid;\n    }\n\n    calculateContainerScroll() {\n        if (this.hasPinnedSelector || this.blocksPinnedInited) {\n            const instanceSize = this.instanceNode.getSize();\n\n            if (this.arrows) {\n                this.arrows.hide();\n            }\n\n            let maxWidth = instanceSize[this.longSide] - (this.pinnedNodeAtStart.getSize()[this.longSide] + this.pinnedNodeAtEnd.getSize()[this.longSide]);\n\n            if (maxWidth < 0) {\n                maxWidth = 0;\n            }\n\n            if (this.scrollSize[this.longSide] < maxWidth) {\n                maxWidth = this.scrollSize[this.longSide];\n            }\n\n            this.selectorsScrollContainer.setCssProp('max-' + this.longSide, maxWidth);\n            this.getSizes();\n        }\n    }\n\n    sortByBaseSelectors(selectors) {\n        if (this.hasPinnedSelector) {\n            this.baseSelectorsList = selectors.filter(selector => !selector.getOptions().pinned);\n        }\n    }\n\n    getIndexBaseSelectors(index) {\n        let result = this.baseSelectorsList.indexOf(this.selectors[index]);\n\n        if (result < 0) {\n            result = index;\n        }\n\n        return result;\n    }\n\n    normalizePositionValue(value) {\n        const max = this.containerSize[this.longSide] - this.scrollSize[this.longSide];\n\n        if (this.arrows) {\n            this.arrows.disable();\n            if (max >= 0 || this.isGrid()) {\n                this.arrows.hide();\n                this.getSizes();\n            } else {\n                if (!this.arrows.isShow) {\n                    this.arrows.show();\n                    this.getSizes();\n                }\n            }\n        }\n\n        if (max === 0) { return 0; }\n\n        if (this.halfScrollSize <= this.halfContainerSize) {\n            value = this.halfContainerSize - this.halfScrollSize;\n        } else {\n            if (value >= 0) {\n                value = 0;\n                if (this.arrows) {\n                    this.arrows.disable('backward');\n                }\n            }\n\n            if (value <= max) {\n                value = max;\n                if (this.arrows) {\n                    this.arrows.disable('forward');\n                }\n            }\n        }\n        return value;\n    }\n\n    findItemPosition(index) {\n        if (!this.selectors[index] || this.selectors[index].options.pinned) { return null; }\n\n        index = normalizeIndex(index, this.selectors.length);\n\n        if (this.hasPinnedSelector) {\n            index = this.getIndexBaseSelectors(index);\n        }\n\n        const halfSelectorSize = this.selectors[index].size[this.longSide] / 2;\n        let position = 0;\n        let currentIndex = 0;\n\n        while (currentIndex < index) {\n            if (this.selectors[currentIndex]) {\n                position += this.selectors[currentIndex].size[this.longSide];\n            }\n            currentIndex += 1;\n        }\n\n        const transitionPosition = this.halfContainerSize - (position + halfSelectorSize);\n\n        return this.normalizePositionValue(transitionPosition);\n    }\n\n    stopMoving() {\n        if (this.isMove) {\n            let position = helper.getMatrix(this.selectorsScroll);\n\n            if (position) {\n                position = position.transform[this.currentAxis];\n                this.currentPosition = position;\n            }\n\n            this.clearAnimation();\n            this.selectorsScroll.setCssProp('transform', 'translate3d(' + convertToTranslateString(this.currentPosition, this.isHorizontal()) + ', 0)');\n        }\n    }\n\n    clearAnimation() {\n        if (this.selectorsScroll) {\n            this.selectorsScroll.removeEvent('transitionend');\n            this.selectorsScroll.setCssProp('transition', '');\n        }\n        this.isMove = false;\n    }\n\n    jump(direction, withoutAnimation) {\n        let value = this.currentPosition;\n\n        this.stopMoving();\n\n        if ($J.typeOf(direction) === 'string' || $J.typeOf(direction) === 'number') {\n            if ($J.typeOf(direction) === 'string') {\n                if (direction === 'next') {\n                    value -= this.containerSize[this.longSide];\n                } else {\n                    value += this.containerSize[this.longSide];\n                }\n\n                value = this.normalizePositionValue(value);\n            } else {\n                value = this.findItemPosition(direction);\n            }\n        } else { return; }\n\n        if (value !== null) {\n            this.move(value, null, withoutAnimation);\n        }\n    }\n\n    move(value, speed, withoutAnimation) {\n        if (!speed) { speed = 400; }\n\n        if (this.currentPosition === value) { return; }\n        this.selectorsScroll.removeEvent('transitionend');\n\n        const css = {};\n\n        if (!withoutAnimation) {\n            this.isMove = true;\n            this.selectorsScroll.addEvent('transitionend', (e) => {\n                e.stop();\n                this.clearAnimation();\n            });\n\n            css.transition = 'transform ' + getTime(speed, this.containerSize[this.longSide], Math.abs(value) - Math.abs(this.currentPosition)) + 'ms ease';\n        }\n\n        css.transform = 'translate3d(' + convertToTranslateString(value, this.isHorizontal()) + ', 0)';\n\n        this.selectorsScroll.setCss(css);\n\n        this.currentPosition = value;\n    }\n\n    getSizes() {\n        this.containerSize = this.selectorsContainer.getSize();\n        this.halfContainerSize = this.containerSize[this.longSide] / 2;\n\n        this.scrollSize = this.selectorsScroll.getSize();\n        this.halfScrollSize = this.scrollSize[this.longSide] / 2;\n    }\n\n    setDrag() {\n        const fns = {};\n        let lastXY = { x: null, y: null };\n        let move = false;\n        let containerPosition;\n        let last;\n        let diffSize;\n        let distance;\n        let axis;\n        let otherAxis;\n        let side;\n        let direction;\n        let startTimeStamp;\n        let dragState = 0; // 0 - nothing, 1 - drag, 2 - sroll page\n\n        const getXY = (x, y) => {\n            return {\n                x: x - containerPosition.left,\n                y: y - containerPosition.top\n            };\n        };\n\n        const getDirection = (oldValue, newValue) => {\n            return oldValue > newValue ? 'next' : 'prev';\n        };\n\n        const culcDistance = (dist, speed) => {\n            const min = dist / 2;\n            // const max = dist * 2;\n\n            return dist + min;\n        };\n\n        const onDrag = (e) => {\n            fns[e.state](e);\n        };\n\n        fns.dragstart = (e) => {\n            axis = this.currentAxis;\n            otherAxis = (axis === 'x') ? 'y' : 'x';\n            side = this.longSide;\n\n            lastXY = { x: e.x, y: e.y };\n\n            if (this.containerSize[side] < this.scrollSize[side]) { move = true; }\n\n            containerPosition = this.selectorsContainer.getPosition();\n            this.stopMoving();\n            last = getXY(e.x, e.y)[axis];\n            diffSize = this.containerSize[side] - this.scrollSize[side];\n            distance = 0;\n            startTimeStamp = e.timeStamp;\n        };\n\n        fns.dragend = (e) => {\n            let value;\n            let speed;\n\n            if (move) {\n                move = false;\n                e.stop();\n\n                speed = e.timeStamp - startTimeStamp;\n                value = this.currentPosition - culcDistance(distance, speed);\n\n                if (value > 0 || value < diffSize) {\n                    if (value > 0) {\n                        value = 0;\n                    } else {\n                        value = diffSize;\n                    }\n                }\n\n                value = this.normalizePositionValue(value);\n                this.move(value);\n                direction = null;\n            }\n\n            dragState = 0;\n        };\n\n        fns.dragmove = (e) => {\n            let point;\n            let diff;\n            let dir;\n\n            if (!dragState) {\n                if (Math.abs(lastXY[axis] - e[axis]) > Math.abs(lastXY[otherAxis] - e[otherAxis])) {\n                    dragState = 1;\n                } else {\n                    dragState = 2;\n                }\n            }\n\n            if (move && dragState === 1) {\n                point = getXY(e.x, e.y);\n\n                if (point[axis] > point[otherAxis]) {\n                    e.stop();\n                    diff = last - point[axis];\n                    this.currentPosition -= diff;\n                    dir = getDirection(last, point[axis]);\n                    if (!direction || dir !== direction) { distance = 0; }\n                    distance += diff;\n                    last = point[axis];\n                    direction = dir;\n                }\n\n                this.selectorsScroll.setCssProp('transform', 'translate3d(' + convertToTranslateString(this.currentPosition, this.isHorizontal()) + ', 0)');\n            }\n\n            lastXY = { x: e.x, y: e.y };\n        };\n\n        this.selectorsContainer.addEvent('mousedrag touchdrag', onDrag);\n    }\n\n    setContainerCss() {\n        const css = {};\n        let size = this.options.standardSize;\n\n        if (this.state === SELECTORS_STATE.FULLSCREEN) {\n            size = this.options.fullscreenSize;\n        }\n\n        css['min-' + this.shortSide] = size + 'px';\n        css[this.shortSide] = '100%';\n\n        this.instanceNode.setCss(css);\n    }\n\n    beforeEnterFullscreen() {\n        this.hide();\n\n        this.state = SELECTORS_STATE.FULLSCREEN;\n\n        this.currentStylePosition = this.options.fullscreenPosition;\n\n        if (!this.currentStylePosition) {\n            this.instanceNode.setCssProp('display', 'none');\n            $(this.instanceNode.node.parentNode).setCssProp('display', 'none');\n        }\n\n        this.identifyVariables();\n    }\n\n    afterEnterFullscreen() {\n        if (this.currentStylePosition) {\n            this.instanceNode.setCssProp('display', '');\n            $(this.instanceNode.node.parentNode).setCssProp('display', '');\n\n            this.setContainerCss();\n\n            if (this.options.fullscreenAutohide) {\n                this.addControl();\n                if (this.isActionsEnabled) {\n                    this.setSelectorsState(true);\n                }\n            }\n\n            this.removeStyleForIE();\n            this.changeSelectors(2)\n                .then(() => {\n                    this.getSelectorsSize();\n\n                    setTimeout(() => {\n                        this.show();\n                    }, 150); // must be more than resize timeout\n\n                    if (this.currentStylePosition && this.isActionsEnabled) {\n                        setTimeout(() => {\n                            this.setSelectorsState(true);\n                        }, 1000);\n                    }\n                });\n        }\n    }\n\n    beforeExitFullscreen() {\n        this.hide();\n\n        this.state = SELECTORS_STATE.STANDARD;\n\n        this.currentStylePosition = this.options.standardPosition;\n\n        if (this.options.fullscreenAutohide) {\n            this.removeControl();\n        }\n\n        if (!this.currentStylePosition) {\n            this.instanceNode.setCssProp('display', 'none');\n            $(this.instanceNode.node.parentNode).setCssProp('display', 'none');\n        }\n\n        this.identifyVariables();\n    }\n\n    afterExitFullscreen() {\n        if (this.currentStylePosition) {\n            this.instanceNode.setCssProp('display', '');\n            $(this.instanceNode.node.parentNode).setCssProp('display', '');\n\n            this.setContainerCss();\n            this.removeStyleForIE();\n            this.changeSelectors(1)\n                .then(() => {\n                    this.getSelectorsSize();\n                    this.show();\n                });\n        }\n    }\n\n    getPinnedScrollContainer(pinnedNode) {\n        return pinnedNode ? pinnedNode.node.firstChild.firstChild : null;\n    }\n\n    getCurrentStylePosition() {\n        return this.getCurrentStylePosition;\n    }\n\n    removeStyleForIE() {\n        if ($J.browser.uaName === 'ie') {\n            this.selectorsScroll.setCssProp(this.shortSide, '');\n        }\n    }\n\n    isSelectorsActionEnabled() {\n        return this.isActionsEnabled;\n    }\n\n    getShortSide() {\n        return this.shortSide;\n    }\n\n    sortSelectorsByUUID(uuidList) {\n        const sortredSelectors = [];\n\n        uuidList.forEach((uuid) => {\n            for (let i = 0, l = this.selectors.length; i < l; i++) {\n                if (uuid === this.selectors[i].UUID) {\n                    sortredSelectors.push(this.selectors[i]);\n                    break;\n                }\n            }\n        });\n\n        this.selectors = sortredSelectors;\n    }\n\n    sortNodesSelectors(lengthOrder) {\n        for (let i = lengthOrder - 1; i >= 0; i--) {\n            this.selectorsScroll.node.insertBefore(this.selectors[i].getContainer().node, this.selectorsScroll.node.firstChild);\n        }\n    }\n\n    rewriteSelectorsIndexes() {\n        this.selectors.forEach((selector, index) => {\n            selector.setIndex(index);\n        });\n    }\n\n    sortSelectors(uuidList, orderLength) {\n        this.sortSelectorsByUUID(uuidList);\n        this.rewriteSelectorsIndexes();\n        this.sortNodesSelectors(orderLength);\n    }\n\n    onResize() {\n        if (this.isDone && this.currentStylePosition && !this.isDestroyed) {\n            clearTimeout(this.resizeTimeout);\n            this.resizeTimeout = setTimeout(() => { // the timer helps calc new size of selectors after changing size of images\n                const itemIndex = this.getActiveItem();\n                this.clearAnimation();\n\n                let selectorSize = 0;\n                this.selectors.forEach((selector) => {\n                    if (!selector.isDestroyed()) {\n                        const size = selector.getSize();\n                        selectorSize += size[this.longSide];\n                    }\n                });\n\n                if ($J.browser.uaName === 'ie') {\n                    if (this.isGrid()) {\n                        selectorSize = '';\n                    }\n\n                    this.selectorsScroll.setCssProp(this.longSide, selectorSize);\n                }\n\n                this.getSizes();\n                this.calculateContainerScroll();\n                this.setActiveItem(itemIndex);\n                this.normalizePositionValue();\n                this.jump(itemIndex, true);\n                this.show();\n            }, 100);\n        }\n    }\n\n    destroy() {\n        this.isDestroyed = true;\n        clearTimeout(this.resizeTimeout);\n        this.instanceNode.removeEvent('transitionend');\n        this.removeControl();\n        this.controlButton = null;\n\n        this.off('selectorAction');\n        this.off('resize');\n\n        this.clearAnimation();\n\n        if (this.arrows) {\n            this.arrows.destroy();\n            this.arrows = null;\n            this.off('arrowAction');\n        }\n\n        this.selectors.forEach((selector) => { selector.destroy(); });\n        this.selectorsScroll.remove();\n        this.selectorsScroll = null;\n        this.selectorsContainer.remove();\n        this.selectorsContainer = null;\n        this.instanceNode.remove();\n        this.instanceNode = null;\n        this.currentActiveItem = null;\n\n        if (this.blocksPinnedInited) {\n            this.hasPinnedSelector = null;\n            this.baseSelectorsList = null;\n            this.pinnedStartList = null;\n            this.pinnedEndList = null;\n            this.blocksPinnedInited = false;\n            this.pinnedNodeAtEnd = null;\n            this.pinnedNodeAtStart = null;\n            this.selectorsScrollContainer = null;\n            this.pinnedStartList = null;\n            this.pinnedEndList = null;\n        }\n        super.destroy();\n    }\n}\n\nreturn Selectors_;\n})();\n\n/* eslint-env es6 */\n/* global defaultsVideoOptions */\n/* global EventEmitter */\n/* global helper */\n/* global CSS_MAIN_CLASS */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\", \"varsIgnorePattern\": \"slideVideo\" }] */\n\n\nconst slideVideo = (() => {\n    const correctVideoSrc = (node) => {\n        node = $(node);\n        const _src = node.attr('data-src');\n\n        if (_src) {\n            node.attr('data-src', _src.split('?')[0]);\n            node.removeAttr('src');\n        } else {\n            node.node.src = node.node.src.split('?')[0];\n        }\n\n        return node;\n    };\n\n    const getOptions = (node, opts) => {\n        const options = new $J.Options(defaultsVideoOptions);\n\n        options.fromJSON(opts.common.common);\n        options.fromString(opts.local.common);\n        options.fromString(node.attr('data-options') || '');\n\n        if ($J.browser.touchScreen && $J.browser.mobile) {\n            // options.parseSchema(mobileDefaults, true);\n            options.fromJSON(opts.common.mobile);\n            options.fromString(opts.local.mobile);\n            options.fromString(node.attr('data-mobile-options') || '');\n        }\n\n        return options;\n    };\n\n    class HTMLVideo extends EventEmitter {\n        constructor(node, options) {\n            super();\n\n            this.node = $(node);\n\n            this.instanceOptions = getOptions(this.node, options);\n\n            this.option = (...args) => {\n                if (args.length > 1) {\n                    return this.instanceOptions.set(args[0], args[1]);\n                }\n                return this.instanceOptions.get(args[0]);\n            };\n            this.type = 'video';\n            this.player = null;\n            this.state = globalVariables.VIDEO.NONE;\n            this.isReady = false;\n            this.isShown = false;\n            this.id = null;\n            this.playDebounce = null;\n            this.currentTime = 0;\n\n            this.videoNode = $J.$new('div');\n            this.videoWrapper = $J.$new('div').addClass(CSS_MAIN_CLASS + '-video').setCss({ transition: 'opacity .3 linear' });\n\n            this.videoWrapper.attr('data-video-type', this.type);\n\n            this.fullscreen = this.option('controls.fullscreen');\n\n            this.hide();\n        }\n\n        isAutoplay() {\n            return this.option('autoplay');\n        }\n\n        onBeforeFullscreenIn() {\n            this.getCurrentTime();\n            this.fullscreen = false;\n        }\n\n        onAfterFullscreenIn() {}\n\n        onBeforeFullscreenOut() {\n            this.getCurrentTime();\n            this.fullscreen = this.option('controls.fullscreen');\n        }\n\n        onAfterFullscreenOut() {}\n\n        getSize() {\n            return new Promise((resolve) => {\n                const size = this.videoWrapper.getSize();\n\n                if (size.width && size.height) {\n                    resolve(size);\n                } else {\n                    helper.videoModule.getAspectRatio(this.node).then((aspectratio) => {\n                        if (size.width) {\n                            size.height = size.width * aspectratio;\n                        } else {\n                            size.width = size.height / aspectratio;\n                        }\n                        resolve(size);\n                    }).catch(() => {\n                        resolve(null);\n                    });\n                }\n            });\n        }\n\n        createPlayer(player) {\n            this.player = {\n                ready: true,\n\n                play: () => {\n                    this.playDebounce();\n                },\n\n                pause: () => {\n                    this.player.player.node.pause();\n                },\n\n                player: this.node\n            };\n\n            this.playDebounce = helper.debounce(() => { this.player.player.node.play(); }, 100);\n\n            if (this.option('loop')) {\n                this.player.player.attr('loop', 'loop');\n            } else {\n                this.player.player.removeAttr('loop');\n            }\n\n            this.player.player.attr('playsinline', 'playsinline');\n\n            if (this.option('controls.enable')) {\n                this.player.player.attr('controls', 'controls');\n            } else {\n                this.player.player.removeAttr('controls');\n            }\n\n            if (this.isAutoplay()) {\n                this.player.player.volume = 0;\n                this.player.player.attr('muted', 'muted');\n            } else {\n                this.player.player.volume = this.option('volume') / 100;\n            }\n\n            this.player.player.attr('preload', this.option('preload') ? 'auto' : 'none');\n\n            this.setEvents();\n\n            this.emit('slideVideoReady', { data: { type: this.type, error: null } });\n            return Promise.resolve();\n        }\n\n        getVideoNode() {\n            return this.videoWrapper;\n        }\n\n        init() {\n            if (this.type === 'video') {\n                let _src = this.node.attr('data-src');\n\n                if (_src) {\n                    this.node.attr('src', _src);\n                }\n\n                $J.$A(this.node.node.children).forEach((child) => {\n                    child = $(child);\n                    if (child && child.getTagName() === 'source') {\n                        _src = child.attr('data-src');\n\n                        if (_src) {\n                            child.attr('src', _src);\n                            if ($J.browser.engine === 'gecko') {\n                                child.node.parentNode.load();\n                            }\n                        }\n                    }\n                });\n\n                this.videoNode = this.node;\n            }\n\n            this.id = this.type + '-' + helper.generateUUID();\n            this.videoNode.attr('id', this.id);\n\n            this.videoWrapper.append(this.videoNode);\n\n            const data = { type: this.type, error: null };\n\n            helper.videoModule.getAPI(this.node).then((player) => {\n                this.createPlayer(player)\n                    .then(() => { data.error = false; })\n                    .catch((_err) => { data.error = !!_err; })\n                    .finally(() => {\n                        this.isReady = true;\n                        // this.emit('slideVideoReady', { data: data });\n                    });\n            }).catch((err) => {\n                data.error = true;\n                this.emit('slideVideoReady', { data: data });\n            });\n        }\n\n        setEvents() {\n            this.player.player.addEvent('play', (e) => {\n                e.stop();\n                this.state = globalVariables.VIDEO.PLAY;\n                this.emit('slideVideoPlay', {\n                    data: { type: this.type }\n                });\n            });\n\n            this.player.player.addEvent('pause', (e) => {\n                e.stop();\n                this.state = globalVariables.VIDEO.PAUSE;\n                this.emit('slideVideoPause', {\n                    data: { type: this.type }\n                });\n            });\n\n            this.player.player.addEvent('ended', (e) => {\n                e.stop();\n                this.state = globalVariables.VIDEO.PAUSE;\n                this.emit('slideVideoEnd', {\n                    data: { type: this.type }\n                });\n            });\n        }\n\n        play() {\n            if (this.player && this.player.ready) {\n                this.setCurrentTime();\n                this.player.play();\n            }\n        }\n\n        pause() {\n            if (this.player && this.player.ready) {\n                this.player.pause();\n            }\n        }\n\n        getCurrentTime() {\n            if (this.player && this.player.player) {\n                this.currentTime = this.player.player.currentTime;\n            }\n        }\n\n        setCurrentTime() {\n            if (this.player && this.player.ready) {\n                this.player.player.currentTime = this.currentTime;\n            }\n        }\n\n        isPreStart() {\n            return this.state === globalVariables.VIDEO.NONE;\n        }\n\n        isPaused() {\n            return this.state === globalVariables.VIDEO.PAUSE;\n        }\n\n        show() {\n            this.isShown = true;\n            this.videoWrapper.setCssProp('opacity', 1);\n        }\n\n        hide() {\n            this.isShown = false;\n            this.videoWrapper.setCssProp('opacity', 0);\n        }\n\n        destroy() {\n            if (this.playDebounce) {\n                this.playDebounce.cancel();\n                this.playDebounce = null;\n            }\n            this.pause();\n            this.videoWrapper.remove();\n\n            this.node = correctVideoSrc(this.node);\n\n            if (this.type === 'video') {\n                $J.$A(this.node.node.children).forEach((child) => {\n                    if ($(child).getTagName() === 'source') {\n                        correctVideoSrc(child);\n                    }\n                });\n            }\n\n            super.destroy();\n        }\n    }\n\n\n    class YouTubeVideo extends HTMLVideo {\n        constructor(node, options) {\n            super(node, options);\n            this.type = 'youtube';\n            this.playerState = -1;\n            this.videoWrapper.attr('data-video-type', this.type);\n            this.apiPlayer = null;\n        }\n\n        setCurrentTime() {\n            if (this.player && this.player.ready) {\n                this.player.player.seekTo(this.currentTime);\n            }\n        }\n\n        getCurrentTime() {\n            if (this.player && this.player.player) {\n                if (this.player.player.getCurrentTime) {\n                    this.currentTime = this.player.player.getCurrentTime();\n                } else {\n                    this.currentTime = 0;\n                }\n            }\n        }\n\n        destroyVideoPlayer() {\n            this.getCurrentTime();\n            if (this.player && this.player.player) {\n                this.player.ready = false;\n                this.player.player.destroy();\n            }\n\n            this.playerState = -1;\n        }\n\n        onBeforeFullscreenIn() {\n            this.fullscreen = false;\n            // we must destroy and create player because the 'onStateChange' won't work after change DOM\n            this.destroyVideoPlayer();\n        }\n\n        onAfterFullscreenIn() {\n            this.createPlayer(this.apiPlayer);\n        }\n\n        onBeforeFullscreenOut() {\n            this.fullscreen = this.option('controls.fullscreen');\n            // we must destroy and create player because the 'onStateChange' won't work after change DOM\n            this.destroyVideoPlayer();\n        }\n\n        onAfterFullscreenOut() {\n            this.createPlayer(this.apiPlayer);\n        }\n\n        createPlayer(player) {\n            this.apiPlayer = player;\n            return new Promise((resolve, reject) => {\n                const videoID = helper.videoModule.getId(this.node);\n                this.player = {\n                    ready: false,\n\n                    play: () => {\n                        this.player.player.playVideo();\n                    },\n\n                    pause: () => {\n                        this.player.player.pauseVideo();\n                    },\n\n                    player: new player.Player(this.id, {\n                        videoId: videoID,\n                        playerVars: {\n                            playlist: videoID, // it is just for loop parameter\n                            fs: this.fullscreen ? 1 : 0,\n                            rel: 0,\n                            loop: this.option('loop') ? 1 : 0,\n                            autoplay: 0,\n                            playsinline: 1,\n                            controls: this.option('controls.enable') ? 1 : 0\n                        },\n                        events: {\n                            'onReady': () => {\n                                this.playerState = -1;\n                                this.player.ready = true;\n                                this.player.player.setVolume(this.option('volume'));\n                                this.emit('slideVideoReady', { data: { type: this.type, error: null } });\n                                resolve();\n                            },\n\n                            'onError': (err) => {\n                                if (err.data === 100) {\n                                    // 'Video is not found'\n                                    this.player = null;\n                                }\n                                this.emit('slideVideoReady', { data: { type: this.type, error: true } });\n                                reject(true);\n                            },\n\n                            'onStateChange': this.setEvents.bind(this)\n                        }\n                    })\n                };\n            });\n        }\n\n        setEvents(e) {\n            const state = (e.target || e.getTarget()).getPlayerState();\n            this.playerState = state;\n            if (this.state === globalVariables.VIDEO.PLAY) {\n                this.state = globalVariables.VIDEO.PAUSE;\n            }\n            switch (state) {\n                case -1:\n                    break;\n                case 0:\n                    // console.log('finish');\n                    if (!this.option('loop')) {\n                        this.player.pause();\n                    }\n\n                    this.emit('slideVideoEnd', {\n                        data: { type: this.type }\n                    });\n                    break;\n                case 1:\n                    // console.log('play');\n                    this.state = globalVariables.VIDEO.PLAY;\n                    this.emit('slideVideoPlay', {\n                        data: { type: this.type }\n                    });\n                    break;\n                case 2:\n                    // console.log('pause');\n                    this.state = globalVariables.VIDEO.PAUSE;\n                    this.emit('slideVideoPause', {\n                        data: { type: this.type }\n                    });\n                    break;\n                case 3:\n                    // console.log('buffering');\n                    break;\n                case 5:\n                    // console.log('video cued');\n                    break;\n                // no default\n            }\n        }\n\n        destroy() {\n            super.destroy();\n\n            if (this.player && this.player.player) {\n                this.player.player.destroy();\n                this.player.player = null;\n            }\n        }\n    }\n\n\n    // urls\n    // http://vimeo.com/6701902\n    // http://vimeo.com/670190233\n    // https://vimeo.com/11111111\n    // https://www.vimeo.com/11111111\n    // http://player.vimeo.com/video/67019023\n    // http://player.vimeo.com/video/67019022?title=0&byline=0&portrait=0\n    // https://vimeo.com/channels/11111111\n    // http://vimeo.com/channels/vimeogirls/6701902\n    // http://vimeo.com/channels/staffpicks/6701902\n    // https://vimeo.com/album/2222222/video/11111111\n    // https://vimeo.com/groups/name/videos/11111111\n    // https://vimeo.com/11111111?param=test\n\n\n    // wrong\n    // http://vimeo.com/videoschool\n    // http://vimeo.com/videoschool/archive/behind_the_scenes\n    // http://vimeo.com/forums/screening_room\n    // http://vimeo.com/forums/screening_room/topic:42708\n\n    class VimeoVideo extends HTMLVideo {\n        constructor(node, options) {\n            super(node, options);\n            this.type = 'vimeo';\n            this.apiPlayer = null;\n            this.videoWrapper.attr('data-video-type', this.type);\n        }\n\n\n        createPlayer(player) {\n            this.apiPlayer = player;\n            return new Promise((resolve, reject) => {\n                this.videoNode.attr('data-vimeo-id', helper.videoModule.getId(this.node));\n\n                if (player.Player) {\n                    const tmp = this.videoNode.attr('data-src');\n\n                    if (tmp) {\n                        this.videoNode.attr('src', tmp);\n                    }\n\n                    const opt = {\n                        id: helper.videoModule.getId(this.node),\n                        loop: this.option('loop'),\n                        controls: this.option('controls.enable'),\n                        speed: this.option('controls.speed')\n                    };\n\n                    this.player = {\n                        ready: false,\n\n                        play: () => {\n                            this.player.player.setVolume(0);\n                            this.player.player.play();\n                        },\n\n                        pause: () => {\n                            this.player.player.pause();\n                        },\n\n                        player: new player.Player(this.videoNode.node, opt)\n                    };\n\n                    this.setEvents(resolve);\n                } else {\n                    reject(true);\n                }\n            });\n        }\n\n        destroyVideoPlayer() {\n            if (this.player && this.player.player) {\n                this.player.ready = false;\n                this.player.player.destroy();\n            }\n        }\n\n        play() {\n            if (this.player && this.player.ready) {\n                this.setCurrentTime();\n                this.player.play();\n            }\n        }\n\n        onBeforeFullscreenIn() {\n            this.destroyVideoPlayer();\n        }\n\n        onAfterFullscreenIn() {\n            this.createPlayer(this.apiPlayer);\n        }\n\n        onBeforeFullscreenOut() {\n            this.destroyVideoPlayer();\n        }\n\n        onAfterFullscreenOut() {\n            this.createPlayer(this.apiPlayer);\n        }\n\n        getCurrentTime() {}\n\n        setCurrentTime() {\n            if (this.player && this.player.ready) {\n                this.player.player.setCurrentTime(this.currentTime);\n            }\n        }\n\n        setEvents(callback) {\n            this.player.player.on('play', () => {\n                this.state = globalVariables.VIDEO.PLAY;\n                this.emit('slideVideoPlay', {\n                    data: { type: this.type }\n                });\n            });\n\n            this.player.player.on('pause', () => {\n                this.state = globalVariables.VIDEO.PAUSE;\n                this.emit('slideVideoPause', {\n                    data: { type: this.type }\n                });\n            });\n\n            this.player.player.on('ended', () => {\n                this.state = globalVariables.VIDEO.PAUSE;\n                this.emit('slideVideoEnd', {\n                    data: { type: this.type }\n                });\n            });\n\n            this.player.player.on('loaded', () => {\n                // empty\n            });\n\n            this.player.player.on('timeupdate', (data) => {\n                this.currentTime = data.seconds;\n            });\n\n            // vimeo api bug\n            // If we use the ready event before then we add listerners of vimeo events then events do not work\n            if (this.player.player) {\n                this.player.player.ready().then(() => {\n                    this.player.ready = true;\n                    if (this.state === globalVariables.VIDEO.PLAY) {\n                        this.state = globalVariables.VIDEO.PAUSE;\n                    }\n                    this.player.player.setVolume(0);\n                    // this.player.player.setVolume(this.option('volume') / 100);\n                    this.emit('slideVideoReady', { data: { type: this.type, error: null } });\n                    callback();\n                });\n            } else {\n                this.emit('slideVideoReady', { data: { type: this.type, error: new Error('Player does not exist.') } });\n            }\n        }\n\n        destroy() {\n            super.destroy();\n\n            this.videoNode.remove();\n            this.videoNode = null;\n            this.videoWrapper.remove();\n            this.videoWrapper = null;\n\n            if (this.player && this.player.player) {\n                this.player.player.destroy();\n                this.player.player = null;\n            }\n\n            this.node = null;\n        }\n    }\n\n    return {\n        HTMLVideo: HTMLVideo,\n        YouTubeVideo: YouTubeVideo,\n        VimeoVideo: VimeoVideo\n    };\n})();\n\n/* eslint-env es6 */\n/* global helper */\n/* global $, $J, EventEmitter, SocialButtons */\n/* global ComponentLoader, ResponsiveImage */\n/* eslint-disable no-lonely-if */\n/* global SirvService, CSS_MAIN_CLASS, SELECTOR_TAG, SELECTOR_CLASS, slideVideo */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\", \"varsIgnorePattern\": \"Slide\" }] */\n\n\nconst Slide = (() => {\n    const CAN_ZOOM_CLASS = CSS_MAIN_CLASS + '-can-zoom';\n\n    /**\n     * because that css can take much time for loading\n     * and we can get wrong sizes\n     */\n    const NECESSARY_CSS = {\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%'\n    };\n\n    const getContentSize = (node, count) => {\n        return new Promise((resolve) => {\n            node = $(node);\n\n            if (count === undefined) { count = 10; }\n\n            if (count > 0) {\n                const size = node.getSize();\n                if (!size.width || !size.height) {\n                    setTimeout(() => {\n                        count -= 1;\n                        getContentSize(node, count).then(resolve);\n                    }, 32);\n                } else {\n                    resolve(size);\n                }\n            } else {\n                resolve(null);\n            }\n        });\n    };\n\n    const findSomethingForSelector = (node) => {\n        const result = { type: 'node', data: null };\n\n        if (helper.videoModule.isVideo(node)) {\n            result.type = helper.videoModule.getType(node);\n            if (!result.type) {\n                result.data = $J.$new('div');\n            }\n        } else {\n            let tmp;\n            let src;\n\n            if ($(node).getTagName() === 'img') {\n                tmp = node;\n            } else {\n                try {\n                    tmp = node.getElementsByTagName('img')[0];\n                } catch (e) {\n                    // empty\n                }\n            }\n\n            if (tmp) {\n                src = helper.sliderLib.getSrc($(tmp).attr('src')) || helper.sliderLib.getSrc($(tmp).attr('data-src'));\n            }\n\n            if (src) {\n                result.type = 'img';\n                result.data = src;\n            } else {\n                if (node.cloneNode) {\n                    tmp = node.cloneNode(true);\n                } else {\n                    tmp = $J.$new('div');\n                }\n\n                result.data = tmp;\n            }\n        }\n\n        return result;\n    };\n\n    const getCustomSelectorNode = (node) => {\n        let result = $(node.node.querySelector(SELECTOR_TAG));\n\n        if (!result) {\n            if (node.getTagName() === SELECTOR_TAG) {\n                result = node;\n            } else {\n                result = null;\n            }\n        }\n\n        return result;\n    };\n\n    class Slide_ extends EventEmitter {\n        constructor(node, index, options, isCustomAdded) {\n            super();\n\n            this.$J_UUID = $J.$uuid(this);\n\n            this.groups = ($(node).attr('data-group') || '').split(/\\s*(?:,|$)\\s*/);\n\n            const slideData = Slide.parse(node);\n            this.id = slideData.id; // data-id attr\n            this.enabled = slideData.enabled;\n            this.type = slideData.type;\n            this.url = slideData.url;\n\n            this.slideContent = $(node);\n            this.index = index;\n            this.isCustomAdded = isCustomAdded || false;\n\n            this.options = {};\n            this.setOptions(options);\n\n            this.instanceNode = $J.$new('div').addClass(CSS_MAIN_CLASS + '-slide').setCss({ position: 'absolute' });\n            this.instanceNode.setCss(NECESSARY_CSS);\n            this.contentWrapper = $J.$new('div').addClass(CSS_MAIN_CLASS + '-content');\n            this.contentWrapper.setCss(NECESSARY_CSS);\n            this.fullscreenOnlyNode = null;\n\n            this.selector = {\n                UUID: this.$J_UUID,\n                isCustom: false,\n                node: getCustomSelectorNode(this.slideContent),\n                isSirv: false,\n                isVideo: false,\n                selectorContent: null,\n                size: { width: 0, height: 0 },\n                src: null,\n                srcset: null,\n                pinned: null,\n                activated: true,\n                infoPromise: null,\n                isStatic: false\n            };\n\n            this.selector.isStatic = Slide_.checkNonSirv(this.selector.node);\n            this.selector.pinned = Slide_.findPinnedSelectorSide(this.slideContent.node.querySelector(SELECTOR_TAG) || this.slideContent.node);\n            this.selector.isCustom = !!this.selector.node;\n            this.thumbnailReferrerPolicy = this.getSelectorReferrerPolicy();\n            this.availableSlide = true;\n\n            this.isStartedFullInit = false;\n            this.fullscreenState = globalVariables.FULLSCREEN.CLOSED;\n            this.isStarted = false;\n            this.sirvService = null;\n            this.componentSize = null;\n            this.inView = false;\n            this.isActive = false;\n            this.isReady = false;\n            this.video = null;\n            this.isVideoPaused = false;\n            this.isVideoReady = false;\n\n            this.slideShownBy = globalVariables.SLIDE_SHOWN_BY.NONE;\n            this.componentLoader = null;\n\n            this.infoSize = null;\n            this.sizePromise = null;\n            this.isInDom = 0; // 0 / 1\n            this.multiImages = [];\n            this.lastOriginNode = null;\n\n            this.dataThumbnailImage = this.getThumbnailImage();\n\n            this.dataThumbnailHtml = this.slideContent.attr('data-thumbnail-html');\n            this.dataHiddenSelector = this.slideContent.hasAttribute('data-hidden-selector');\n            // Disables switching slides by swipe on touchscreen.\n            this.swipeDisabled = this.slideContent.hasAttribute('data-swipe-disabled');\n\n            this.spinWasInited = false;\n\n            this.socialbuttons = null;\n\n            this.getVideoThumbnailPromise = null;\n            this.isPlaceholder = false;\n\n            this.customThumbnailImageClassPromise = null;\n\n            const this_ = this;\n            this.api = {\n                get index() { return this_.index; },\n                get component() {\n                    if (this_.sirvService) {\n                        return globalVariables.SLIDE.NAMES[this_.sirvService.getType()];\n                    }\n\n                    return 'unknown';\n                },\n                get groups() { return this_.groups; },\n                get thumbnail() { return this_.selector.node.node; },\n                isDisabled() { return !this_.enabled; },\n                isActive() { return this_.isActive; },\n                getSelector() { return this.thumbnail; } // for backward compatibility\n            };\n\n            this.sendEventCloseFullscreenByClick = (e) => {\n                e.stop();\n                this.emit('goToFullscreenOut');\n            };\n\n            this.beforeParseSlide();\n            this.parseSlide();\n        }\n\n        static findPinnedSelectorSide(node) {\n            if (node.hasAttribute('data-pinned')) {\n                const attrValue = $J.$(node).attr('data-pinned');\n                return attrValue !== 'start' ? 'end' : attrValue;\n            }\n\n            return null;\n        }\n\n        static parse(node) {\n            node = $(node);\n\n            // const result = { node: node.node };\n            const result = {};\n            result.node = node.node;\n            result.id = node.attr('data-id');\n\n            let url = null;\n            let type = globalVariables.SLIDE.TYPES.HTML;\n            let enabled = true;\n\n            /*\n                spin, zoom, image, video, html\n            */\n            if (Slide.isSirvComponent(node)) {\n                const tmp = helper.getSirvType(node);\n                type = tmp.type;\n                url = tmp.imgSrc;\n            } else if (helper.videoModule.isVideo(node)) {\n                type = globalVariables.SLIDE.TYPES.VIDEO;\n                url = helper.videoModule.getSrc(node);\n            } else if (node.getTagName() === 'img' || node.getTagName() === 'div' && node.attr('data-src')) {\n                type = globalVariables.SLIDE.TYPES.IMAGE;\n                url = node.attr('data-src') || node.attr('src');\n            }\n\n            result.type = type;\n            result.url = url;\n\n            const slideIsDisabled = node.node.getAttribute('data-disabled'); // don't use .attr() method\n            if (slideIsDisabled && slideIsDisabled !== 'false' || slideIsDisabled === '') {\n                enabled = false;\n            }\n\n            result.enabled = enabled;\n\n            return result;\n        }\n\n        static checkNonSirv(node) {\n            if (node && $(node).attr('data-type') === 'static') {\n                return true;\n            }\n\n            return false;\n        }\n\n        static isSirvComponent(node) {\n            node = $(node);\n\n            // const dataEffect = node.attr('data-type') || node.attr('data-effect');\n            const dataSrc = node.attr('data-src');\n            const src = node.attr('src');\n            const nonSirv = Slide.checkNonSirv(node);\n            const tagName = node.getTagName();\n            const viewContent = node.fetch('view-content');\n\n            if (\n                !nonSirv &&\n                (\n                    // (tagName === 'div' && !$J.contains(['youtube', 'vimeo'], helper.videoModule.getType(dataSrc)) && (dataEffect === 'zoom' || helper.isSpin(dataSrc) || helper.isVideo(dataSrc))) ||\n                    viewContent ||\n                    (tagName === 'div' && !$J.contains(['youtube', 'vimeo'], helper.videoModule.getType(dataSrc)) && dataSrc) ||\n                    (tagName === 'img' && (dataSrc || src))\n                )\n            ) {\n                return true;\n            }\n\n            return false;\n        }\n\n        static hasComponent(node) {\n            return SirvService.isExist(node);\n        }\n\n        isSwipeDisabled() {\n            return this.swipeDisabled;\n        }\n\n        getThumbnailImage() {\n            let result = this.slideContent.attr('data-thumbnail-image');\n\n            if (!result && this.selector.isCustom) {\n                result = this.selector.node.attr('data-src');\n                if (!result) {\n                    const children = this.selector.node.node.children;\n                    if (children.length === 1 && $(children[0]).getTagName() === 'img') {\n                        result = $(children[0]).attr('data-src') || $(children[0]).attr('src');\n                    }\n                }\n            }\n\n            return result;\n        }\n\n        startGettingInfo() {\n            if (this.isSirv()) {\n                this.sirvService.startGettingInfo();\n            }\n        }\n\n        loadContent() {\n            if (this.isSirv()) {\n                this.getSlideSize()\n                    .then((infoSize) => {\n                        if (this.isInDom) {\n                            this.sirvService.loadContent();\n                        }\n                    }).catch((err) => {});\n            }\n        }\n\n        loadThumbnail() {\n            if (this.isSirv()) {\n                this.getSlideSize()\n                    .then((infoSize) => {\n                        if (this.isInDom) {\n                            this.sirvService.loadThumbnail();\n                        }\n                    }).catch((err) => {});\n            }\n        }\n\n        isVideoSlide() {\n            let result = false;\n\n            if (this.isSirv()) {\n                result = this.sirvService.getType() === globalVariables.SLIDE.TYPES.VIDEO;\n            } else if (this.video) {\n                result = true;\n            }\n\n            return result;\n        }\n\n        belongsTo(group) {\n            let result = false;\n\n            if (group) {\n                if ($J.typeOf(group) === 'string') {\n                    group = [group];\n                }\n\n                result = group.some(g => $J.contains(this.groups, g));\n            }\n\n            return result;\n        }\n\n        addGroup(newGroup) {\n            let result = false;\n\n            if (newGroup && $J.typeOf(newGroup) === 'string' && !$J.contains(this.groups, newGroup)) {\n                result = true;\n                this.groups.push(newGroup);\n            }\n\n            return result;\n        }\n\n        removeGroup(group) {\n            let result = false;\n\n            if (group && $J.typeOf(group) === 'string') {\n                const index = this.groups.indexOf(group);\n                if (index > -1) {\n                    result = true;\n                    this.groups.splice(index, 1);\n                }\n            }\n\n            return result;\n        }\n\n        isCustomSelector() {\n            return this.selector.isCustom;\n        }\n\n        single(isSingle) {\n            if (this.isSirv()) {\n                this.broadcast('isSingleSlide', { data: { isSingle: isSingle } });\n            }\n        }\n\n        setNewIndex(index) {\n            this.index = index;\n        }\n\n        getIndex() {\n            return this.index;\n        }\n\n        checkReadiness(eventName, component) {\n            let result = false;\n\n            if (this.isSirv() && globalVariables.SLIDE.NAMES[this.sirvService.getType()] === component) {\n                if (eventName === 'init') {\n                    result = this.spinWasInited;\n                } else {\n                    result = this.isReady;\n                }\n            }\n\n            return result;\n        }\n\n        sendReadyEvent(eventName, component) {\n            if (this.isSirv() && globalVariables.SLIDE.NAMES[this.sirvService.getType()] === component) {\n                this.sirvService.sendEvent(eventName);\n            }\n        }\n\n        createFullscreenOnlyScreen() {\n            if (this.options.fullscreenOnly) {\n                this.fullscreenOnlyNode = $J.$new('div').addClass(CSS_MAIN_CLASS + '-fullscreen-always');\n                // this.fullscreenOnlyNode.addEvent('mousedown touchstart', (e) => {\n                this.fullscreenOnlyNode.addEvent('btnclick tap', (e) => {\n                    e.stop();\n                    this.emit('goToFullscreen');\n                });\n\n                this.createPinchEvent(this.fullscreenOnlyNode);\n\n                this.instanceNode.append(this.fullscreenOnlyNode, 'top');\n            }\n        }\n\n        createPinchEvent(node) {\n            if ($J.browser.touchScreen) {\n                // difference between scale\n                const FS_IN = 2;\n                node.addEvent('pinch', (e) => {\n                    e.stop();\n                    switch (e.state) {\n                        case 'pinchend':\n                            if (this.fullscreenState === 0 && e.scale >= FS_IN) {\n                                this.emit('goToFullscreen');\n                            }\n                            break;\n                        default:\n                    }\n                });\n            }\n        }\n\n        isEnabled() {\n            return this.enabled;\n        }\n\n        disable() {\n            this.enabled = false;\n            if (this.video) { this.video.pause(); }\n            if (this.componentLoader) {\n                this.componentLoader.hide(true);\n            }\n        }\n\n        enable() {\n            this.enabled = true;\n        }\n\n        isBlokedTouchdrag() {\n            let result = false;\n\n            if (this.isSirv()) {\n                if (this.sirvService.getType() === globalVariables.SLIDE.TYPES.SPIN) {\n                    result = true;\n                } else {\n                    result = this.sirvService.isEffectActive();\n                }\n            }\n\n            return result;\n        }\n\n        setOptions(options) {\n            this.options = $J.extend({\n                spin: {},\n                zoom: {},\n                image: {},\n                video: {},\n                fullscreenOnly: false\n            }, (options || {}));\n        }\n\n        dragEvent(type) {\n            if (this.sirvService) {\n                this.broadcast('dragEvent', { data: { type: type } });\n            }\n        }\n\n        startFullInit(options) {\n            if (this.isStartedFullInit) { return; }\n            this.isStartedFullInit = true;\n\n            if (options) {\n                this.setOptions(options);\n            }\n\n            if (this.sirvService) {\n                this.sirvService.startFullInit(options ? this.options : null);\n            }\n\n            this.hide();\n\n            this.instanceNode.append(this.contentWrapper);\n\n            if (!this.isSirv()) {\n                this.appendToDOM();\n            }\n        }\n\n        createComponentLoader() {\n            if (!this.componentLoader) {\n                this.componentLoader = new ComponentLoader(this.instanceNode);\n                this.componentLoader.show();\n            }\n        }\n\n        isSlideAvailable() {\n            return this.availableSlide;\n        }\n\n        isSelectorPinned() {\n            return $J.contains(['start', 'end'], this.selector.pinned);\n        }\n\n        getPinnedSelectorSide() {\n            return this.selector.pinned;\n        }\n\n        setFullscreenEvents() {\n            this.on('beforeFullscreenIn', (e) => {\n                if (this.fullscreenState === globalVariables.FULLSCREEN.OPENING) {\n                    e.stopPropagation();\n                } else {\n                    this.fullscreenState = globalVariables.FULLSCREEN.OPENING;\n                    if (this.video) {\n                        this.isVideoPaused = this.video.isPaused();\n                        this.video.onBeforeFullscreenIn();\n                    }\n                }\n\n                if (this.fullscreenOnlyNode) {\n                    this.fullscreenOnlyNode.setCssProp('display', 'none');\n                }\n                this.addEventCloseFullscreenByClick();\n            });\n\n            this.on('afterFullscreenIn', (e) => {\n                if (this.socialbuttons) {\n                    this.socialbuttons.closeButtons();\n                }\n\n                if (this.fullscreenState === globalVariables.FULLSCREEN.OPENED) {\n                    e.stopPropagation();\n                } else {\n                    this.fullscreenState = globalVariables.FULLSCREEN.OPENED;\n                    if (this.isSirv() && this.componentLoader.isHiding()) {\n                        this.componentLoader.hide(true);\n                    }\n                    if (this.video) {\n                        this.video.onAfterFullscreenIn();\n                        if (this.video.isAutoplay() || !this.video.isPreStart()) {\n                            this.playVideo();\n                        }\n                    }\n                }\n            });\n\n            this.on('beforeFullscreenOut', (e) => {\n                if (this.socialbuttons) {\n                    this.socialbuttons.closeButtons();\n                }\n\n                if (this.fullscreenState === globalVariables.FULLSCREEN.CLOSING) {\n                    e.stopPropagation();\n                } else {\n                    this.fullscreenState = globalVariables.FULLSCREEN.CLOSING;\n                    if (this.video) {\n                        this.isVideoPaused = this.video.isPaused();\n                        this.video.onBeforeFullscreenOut();\n                    }\n                }\n\n                if (this.fullscreenOnlyNode) {\n                    this.fullscreenOnlyNode.setCssProp('display', '');\n                }\n            });\n\n            this.on('afterFullscreenOut', (e) => {\n                if (this.fullscreenState === globalVariables.FULLSCREEN.CLOSED) {\n                    e.stopPropagation();\n                } else {\n                    this.fullscreenState = globalVariables.FULLSCREEN.CLOSED;\n                    if (this.video) {\n                        this.video.onAfterFullscreenOut();\n                        if (this.video.isAutoplay() || !this.video.isPreStart()) {\n                            this.playVideo();\n                        }\n                    }\n                }\n                this.removeEventCloseFullscreeByClick();\n            });\n\n            this.on('inView', (e) => {\n                this.inView = e.data;\n\n                if (this.video) {\n                    if (this.inView) {\n                        if (!this.isVideoPaused && !this.video.isPreStart() || this.video.isAutoplay()) {\n                            this.playVideo();\n                        }\n                    } else {\n                        this.isVideoPaused = this.video.isPaused();\n                        this.video.getCurrentTime();\n                        this.video.pause();\n                    }\n                }\n            });\n        }\n\n        addEventCloseFullscreenByClick() {\n            if (this.options.fullscreenOnly && this.type === globalVariables.SLIDE.TYPES.IMAGE) {\n                this.contentWrapper.addEvent('btnclick tap', this.sendEventCloseFullscreenByClick);\n                this.slideContent.addEvent('btnclick tap', this.sendEventCloseFullscreenByClick);\n            }\n        }\n\n        removeEventCloseFullscreeByClick() {\n            if (this.options.fullscreenOnly && this.type === globalVariables.SLIDE.TYPES.IMAGE) {\n                this.contentWrapper.removeEvent('btnclick tap', this.sendEventCloseFullscreenByClick);\n                this.slideContent.removeEvent('btnclick tap', this.sendEventCloseFullscreenByClick);\n            }\n        }\n\n        isSirv() { return !!this.sirvService; }\n        getNode() { return this.instanceNode; }\n        getOriginNode() { return this.lastOriginNode || this.slideContent; }\n\n        getOriginImageUrl() {\n            if (this.isSirv()) {\n                return this.sirvService.getOriginImageUrl();\n            }\n\n            return null;\n        }\n\n        zoomIn(x, y) {\n            this.broadcast('zoomUp', { data: { x: x, y: y } });\n        }\n\n        zoomOut(x, y) {\n            this.broadcast('zoomDown', { data: { x: x, y: y } });\n        }\n\n        mouseAction(type, originEvent) {\n            if (this.isSirv()) {\n                this.broadcast('mouseAction', { data: { type: type, originEvent: originEvent } });\n            }\n        }\n\n        getZoomData() {\n            if (this.isSirv()) {\n                return this.sirvService.getZoomData();\n            }\n\n            return null;\n        }\n\n        getTypeOfSlide() {\n            let result = null;\n            if (this.isSirv()) { result = this.sirvService.getType(); }\n            return result;\n        }\n\n        getOptions() {\n            return this.isSirv() ? this.sirvService.getToolOptions() : {};\n        }\n\n        createSlideApi() {\n            if (this.isSirv() && !this.isStarted) {\n                this.isStarted = true;\n\n                this.api[globalVariables.SLIDE.NAMES[this.sirvService.getType()]] = this.sirvService.getData();\n            }\n        }\n\n        beforeShow() {\n            this.isActive = true;\n            this.show();\n            if (this.isSirv()) {\n                this.sirvService.activate();\n            }\n\n            this.createSlideApi();\n        }\n\n        afterShow(whoUse) {\n            this.slideShownBy = whoUse || globalVariables.SLIDE_SHOWN_BY.NONE;\n            this.broadcast('startActions', { who: this.slideShownBy });\n            if (this.video && this.video.isAutoplay()) {\n                this.playVideo();\n            }\n        }\n\n        beforeHide() {\n            if (this.video) {\n                this.video.pause();\n            } else {\n                this.broadcast('stopActions');\n            }\n        }\n\n        afterHide() {\n            this.slideShownBy = globalVariables.SLIDE_SHOWN_BY.NONE;\n            this.isActive = false;\n            this.hide();\n\n            if (this.isSirv()) {\n                this.sirvService.deactivate();\n            }\n\n            if (this.socialbuttons) {\n                this.socialbuttons.closeButtons();\n            }\n        }\n\n        show() {\n            this.instanceNode.removeClass(CSS_MAIN_CLASS + '-hidden');\n            this.instanceNode.addClass(CSS_MAIN_CLASS + '-shown');\n        }\n\n        hide() {\n            this.instanceNode.removeClass(CSS_MAIN_CLASS + '-shown');\n            this.instanceNode.addClass(CSS_MAIN_CLASS + '-hidden');\n        }\n\n        isZoomSizeExist() {\n            if (this.isSirv()) {\n                return this.sirvService.isZoomSizeExist();\n            }\n\n            return false;\n        }\n\n        startTool(isShown, preload, firstSlideAhead) {\n            if (this.isSirv()) {\n                this.getSlideSize()\n                    .then((infoSize) => {\n                        if (this.isInDom) {\n                            this.sirvService.startTool(isShown || this.isActive, preload, firstSlideAhead);\n                            this.addSocialButtons();\n                        }\n                    }).catch((err) => {});\n            } else {\n                this.getSlideSize()\n                    .then(() => {\n                        this.emit('contentLoaded', { data: { slide: { index: this.index } } });\n                    });\n            }\n        }\n\n        getSlideSize() {\n            if (!this.sizePromise) {\n                this.sizePromise = new Promise((resolve, reject) => {\n                    if (this.isSirv()) {\n                        const result = { UUID: this.$J_UUID };\n                        this.sirvService.getInfoSize()\n                            .then((infoSize) => {\n                                if (!this.infoSize && infoSize.size) {\n                                    this.infoSize = infoSize.size;\n                                }\n                                result.size = this.infoSize;\n                                resolve(result);\n                            })\n                            .catch((err) => {\n                                result.error = true;\n\n                                if (this.sirvService) {\n                                    const typeOfSirvService = this.sirvService.getType();\n\n                                    this.removeSirvService();\n\n                                    if (err && err.error && err.error.status && err.error.status === 404) {\n                                        result.error = err.error;\n                                        reject(result);\n                                    } else if (err && (err.error === 'changeSpinToImage' || typeOfSirvService === globalVariables.SLIDE.TYPES.IMAGE || err.isPlaceholder)) {\n                                        this.isPlaceholder = err.isPlaceholder;\n                                        if (typeOfSirvService === globalVariables.SLIDE.TYPES.IMAGE) {\n                                            this.isInDom = 0;\n                                            this.appendToDOM();\n\n                                            const data = findSomethingForSelector(this.slideContent.node);\n\n                                            if (!this.selector.isCustom) {\n                                                this.selector.src = data ? data.data : null;\n                                                this.selector.isSirv = false;\n                                            }\n                                        } else {\n                                            this.changeSpinToImage();\n                                        }\n\n                                        //  \n                                        const oldPromise = this.sizePromise;\n                                        this.sizePromise = null;\n                                        const newPromise = this.getSlideSize();\n                                        this.sizePromise = oldPromise;\n                                        newPromise.then(resolve).catch(reject);\n                                    } else {\n                                        result.error = { status: 404 };\n                                        reject(result);\n                                    }\n                                } else {\n                                    result.error = { status: 404 };\n                                    reject(result);\n                                }\n                            })\n                            .finally(() => {\n                                if (this.isCustomAdded) {\n                                    this.emit('infoReady', { data: { index: this.index } });\n                                }\n                            });\n                    } else {\n                        let img;\n                        let src;\n\n                        if (this.slideContent.getTagName() === 'img') {\n                            img = this.slideContent.node;\n                        } else {\n                            try {\n                                img = this.slideContent.node.getElementsByTagName('img')[0];\n                            } catch (e) {\n                                // empty\n                            }\n                        }\n\n                        if (img) {\n                            src = helper.sliderLib.getSrc($(img).attr('src'));\n                            if (!src) {\n                                src = helper.sliderLib.getSrc($(img).attr('data-src'));\n                            }\n                        // } else {\n                        //     src = helper.sliderLib.getSrc($(img).attr('data-src'));\n                        }\n\n                        if (src) {\n                            helper.loadImage(src).then((imageData) => {\n                                this.infoSize = imageData.size;\n                                resolve({ size: this.infoSize, UUID: this.$J_UUID });\n                            }).catch((error) => {\n                                resolve({ size: this.infoSize, UUID: this.$J_UUID, error: { status: 404 } });\n                            });\n                        } else {\n                            if (this.video) {\n                                this.video.getSize()\n                                    .then((size) => {\n                                        this.infoSize = size || { width: 0, height: 0 };\n                                        resolve({ size: this.infoSize, UUID: this.$J_UUID });\n                                    })\n                                    .catch((err) => { reject({ size: this.infoSize, UUID: this.$J_UUID, error: err }); });\n                            } else {\n                                getContentSize(this.slideContent.node)\n                                    .then((size) => {\n                                        this.infoSize = size || { width: 0, height: 0 };\n                                        resolve({ size: this.infoSize, UUID: this.$J_UUID });\n                                    })\n                                    .catch((err) => { reject({ size: this.infoSize, UUID: this.$J_UUID, error: err }); });\n                            }\n                        }\n                    }\n                });\n            }\n\n            return this.sizePromise;\n        }\n\n        getData() { return this.api; }\n\n        removeSirvService() {\n            this.infoSize = null;\n\n            if (this.slideContent) {\n                this.slideContent.remove();\n            }\n\n            if (this.selector.node) {\n                this.selector.node.removeAttr('data-type');\n            }\n\n            if (this.sirvService) {\n                this.sirvService.destroy();\n                this.sirvService = null;\n            }\n\n            this.selector.isSirv = false;\n\n            this.off('stats');\n            this.off('componentEvent');\n            this.off('beforeFullscreenIn');\n            this.off('afterFullscreenIn');\n            this.off('beforeFullscreenOut');\n            this.off('afterFullscreenOut');\n\n            if (this.componentLoader) {\n                this.componentLoader.hide(true);\n                this.componentLoader.destroy();\n                this.componentLoader = null;\n            }\n\n            if (this.fullscreenOnlyNode) {\n                this.fullscreenOnlyNode.kill();\n                this.fullscreenOnlyNode = null;\n            }\n        }\n\n        changeSpinToImage() {\n            this.slideContent.removeClass(CSS_MAIN_CLASS + '-component');\n            this.contentWrapper.removeClass(CSS_MAIN_CLASS + '-content-' + globalVariables.SLIDE.NAMES[this.getTypeOfSlide()]);\n\n            this.lastOriginNode = this.slideContent;\n            this.slideContent = $J.$new('img', { 'data-src': this.slideContent.attr('data-src') });\n            this.slideContent.addClass(CSS_MAIN_CLASS + '-component');\n\n            this.parseSlide();\n            this.isInDom = 0;\n            this.appendToDOM();\n\n            if (this.isPlaceholder) {\n                const data = findSomethingForSelector(this.slideContent);\n                if (!this.selector.isCustom) {\n                    this.selector.src = data ? data.data : null;\n                }\n            }\n\n            if (this.selector.node && !this.selector.isCustom) {\n                this.selector.node.attr('data-type', globalVariables.SLIDE.NAMES[this.getTypeOfSlide()]);\n            }\n\n            if (this.isStartedFullInit) {\n                this.isStartedFullInit = false;\n                this.startFullInit();\n            }\n        }\n\n        setSirvEvents() {\n            this.on('stats', (e) => {\n                e.stopEmptyEvent();\n                e.data.index = this.index;\n            });\n\n            // init, ready, zoomIn, zoomOut\n            this.on('componentEvent', (e) => {\n                e.stopEmptyEvent();\n\n                const eventData = e.data.data;\n                eventData.type = e.data.type;\n                eventData.node = this.slideContent;\n\n                if (e.data.type === 'ready') {\n                    this.isReady = true;\n                }\n                e.data.slide = this.getData();\n                e.data.componentEventData = eventData;\n\n                if (e.data.component === globalVariables.SLIDE.NAMES[globalVariables.SLIDE.TYPES.SPIN]) {\n                    if (e.data.type === 'init') {\n                        this.componentLoader.hide();\n                        this.spinWasInited = true;\n\n                        const spinTypeClassMap = {\n                            row: 'spin-x',\n                            col: 'spin-y',\n                            'multi-row': 'spin-xy'\n                        };\n\n                        if (this.selector.node) {\n                            this.selector.node.addClass(spinTypeClassMap[this.sirvService.getSpinOrientation()] || '');\n                        }\n                    }\n                } else {\n                    if (e.data.type === 'ready') {\n                        this.componentLoader.hide();\n                    }\n                }\n\n                if (e.data.type === 'ready' && $J.contains(['spin', 'zoom'], e.data.component)) {\n                    if (this.sirvService.isZoomSizeExist()) {\n                        this.contentWrapper.addClass(CAN_ZOOM_CLASS);\n                    }\n                }\n            });\n        }\n\n        addSocialButtons() {\n            if (this.validateComponentSocialButton()) {\n                const arr = ['facebook', 'twitter', 'linkedin', 'reddit', 'tumblr', 'pinterest', 'telegram'];\n                const sTypes = {};\n                arr.forEach((value) => { sTypes[value] = this.options['sb' + $J.camelize('-' + value)]; });\n\n                const dataImageSB = SocialButtons.getDataImage();\n                const link = {};\n                arr.forEach((value) => { link[value] = this.getLinkSocialButton(dataImageSB[value], sTypes[value]); });\n\n                this.socialbuttons = new SocialButtons({\n                    'text': this.slideContent.attr('alt'),\n                    'link': link,\n                    'title': this.slideContent.attr('title')\n                }, sTypes, this.instanceNode);\n            }\n        }\n\n        validateComponentSocialButton() {\n            if (this.options.sbEnable && SocialButtons && !this.socialbuttons) {\n                if ((this.isSirv() && this.sirvService.getType() !== globalVariables.SLIDE.TYPES.VIDEO) || this.video && this.video.type !== 'video' || this.slideContent.getTagName() === 'img') {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n\n        getLinkSocialButton(data, isSpin, enable) {\n            let result = null;\n            if (enable) {\n                if (this.isSirv()) {\n                    result = this.sirvService.getSocialButtonData(data, this.api.component === globalVariables.SLIDE.NAMES[globalVariables.SLIDE.TYPES.SPIN]);\n                } else if (this.slideContent.getTagName() === 'iframe') {\n                    result = this.video.node.attr('data-src');\n                } else {\n                    result = this.slideContent.attr('data-src');\n                }\n            }\n\n            return result;\n        }\n\n        searchImagesInHtmlContent() {\n            let result = false;\n            const images = $J.$A(this.slideContent.node.querySelectorAll('img'));\n\n            if (images.length) {\n                result = true;\n\n                this.multiImages = images;\n\n                images.forEach((img, index) => {\n                    const isSirvImage = !Slide.checkNonSirv(img);\n                    if (isSirvImage) {\n                        if (!this.sirvService) {\n                            this.setSirvEvents();\n                            this.selector.isSirv = true;\n\n                            this.sirvService = new SirvService(img, this.options, {\n                                quality: this.options.quality,\n                                hdQuality: this.options.hdQuality,\n                                isHDQualitySet: this.options.isHDQualitySet,\n                                always: this.options.fullscreenOnly,\n                                isFullscreen: this.options.isFullscreen,\n                                nativeFullscreen: this.options.nativeFullscreen\n                            });\n\n                            this.sirvService.setParent(this);\n\n                            this.sirvService.start();\n                            this.createSlideApi();\n                        } else {\n                            this.sirvService.push(img);\n                        }\n                    }\n\n                    this.multiImages.push({\n                        isSirv: isSirvImage,\n                        node: img,\n                        src: $(img).attr('src'),\n                        datasrc: $(img).attr('data-src')\n                    });\n                });\n            }\n\n            return result;\n        }\n\n        isCustomSlideEmpty() {\n            if (this.isCustomSelector()) {\n                const smvSelector = this.slideContent.node.querySelector(SELECTOR_TAG);\n\n                if (smvSelector) {\n                    $J.$(smvSelector).remove();\n                    const length = $J.$A(this.slideContent.node.children).length;\n                    this.slideContent.append(smvSelector);\n\n                    if (Slide.isSirvComponent(this.slideContent) && Slide.hasComponent(this.slideContent) && !this.isPlaceholder || length || helper.videoModule.isVideo(this.slideContent)) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        }\n\n        beforeParseSlide() {\n            if (this.isCustomSelector()) {\n                if (this.isCustomSlideEmpty()) {\n                    this.availableSlide = false;\n                    this.selector.activated = false;\n                }\n\n                this.selector.node.remove();\n            }\n        }\n\n        createImgFromDiv() {\n            if (this.slideContent.getTagName() === 'div' && this.type === globalVariables.SLIDE.TYPES.IMAGE) {\n                const old = this.slideContent;\n                this.slideContent = $J.$new('img');\n                this.slideContent.attr('data-src', this.url);\n\n                let tmp = old.attr('alt');\n                if (tmp) {\n                    this.slideContent.attr('alt', tmp);\n                }\n\n                tmp = old.attr('title');\n                if (tmp) {\n                    this.slideContent.attr('title', tmp);\n                }\n\n                tmp = old.attr('data-alt');\n                if (tmp) {\n                    this.slideContent.attr('data-alt', tmp);\n                }\n\n                tmp = old.attr('data-referrerpolicy');\n                if (tmp) {\n                    this.slideContent.attr('data-referrerpolicy', tmp);\n                }\n            }\n        }\n\n        parseSlide() {\n            if (Slide.isSirvComponent(this.slideContent) && Slide.hasComponent(this.slideContent) && !this.isPlaceholder) {\n                this.setSirvEvents();\n\n                this.createImgFromDiv();\n\n                this.sirvService = new SirvService(this.slideContent.node, this.options, {\n                    quality: this.options.quality,\n                    hdQuality: this.options.hdQuality,\n                    isHDQualitySet: this.options.isHDQualitySet,\n                    always: this.options.fullscreenOnly,\n                    isFullscreen: this.options.isFullscreen,\n                    nativeFullscreen: this.options.nativeFullscreen\n                });\n                this.sirvService.setParent(this);\n                this.selector.isSirv = true;\n\n                this.sirvService.start();\n                this.createSlideApi();\n\n                this.selector.isVideo = (this.sirvService.getType() === globalVariables.SLIDE.TYPES.VIDEO);\n                this.contentWrapper.addClass(CSS_MAIN_CLASS + '-content-' + globalVariables.SLIDE.NAMES[this.getTypeOfSlide()]);\n            } else {\n                this.createImgFromDiv();\n\n                this.searchImagesInHtmlContent();\n                if (helper.videoModule.isVideo(this.slideContent)) {\n                    this.selector.isVideo = true;\n                    this.initVideo();\n                    this.contentWrapper.addClass(CSS_MAIN_CLASS + '-content-video');\n                }\n            }\n\n            if (this.dataThumbnailImage || this.dataThumbnailHtml) {\n                this.selector.isSirv = false;\n            }\n        }\n\n        appendToDOM() {\n            if (!this.isInDom) {\n                this.isInDom = 1;\n                this.createFullscreenOnlyScreen();\n\n                if (this.isSirv() || this.video) {\n                    this.createComponentLoader();\n\n                    if (this.video) {\n                        this.contentWrapper.append(this.video.getVideoNode());\n                    } else {\n                        this.contentWrapper.append(this.slideContent);\n                    }\n                } else {\n                    if (this.slideContent.getTagName() === 'img') {\n                        this.contentWrapper.addClass(CSS_MAIN_CLASS + '-slide-img');\n\n                        if (!helper.sliderLib.getSrc(this.slideContent.attr('src'))) {\n                            this.slideContent.attr('src', this.slideContent.attr('data-src'));\n                        }\n                    }\n\n                    if (this.multiImages.length) {\n                        this.multiImages.forEach((img) => {\n                            if (!img.src && img.datasrc) {\n                                $(img.node).attr('src', img.datasrc);\n                            }\n                        });\n                    }\n\n                    this.contentWrapper.append(this.slideContent);\n                }\n\n                this.setFullscreenEvents();\n            }\n        }\n\n        initVideoPlayer() {\n            if (this.video) {\n                this.video.init();\n            } else if (this.isSirv() && this.sirvService.getType() === globalVariables.SLIDE.TYPES.VIDEO) {\n                this.sirvService.loadVideoSources();\n            }\n        }\n\n        secondSelectorClick() {\n            if (this.isSirv()) {\n                this.broadcast('secondSelectorClick', { data: { slideIndex: this.index } });\n            } else {\n                if (this.video) {\n                    this.video.pause();\n                }\n            }\n        }\n\n        isSirvSelector() {\n            if (!this.selector.isCustom) {\n                return this.isSirv() && this.sirvService.getType() !== globalVariables.SLIDE.TYPES.VIDEO;\n            }\n\n            return false;\n        }\n\n        getSelectorProportion() {\n            let result;\n\n            if (this.dataThumbnailImage) {\n                result = new Promise((resolve, reject) => {\n                    this.getResponsiveImage()\n                        .then(() => resolve($J.extend({}, this.selector)))\n                        .catch((error) => {\n                            helper.loadImage(this.dataThumbnailImage).then((imageData) => {\n                                this.selector.size = imageData.size;\n                                resolve($J.extend({}, this.selector));\n                            }).catch((error) => {\n                                reject(error);\n                            });\n                        });\n                });\n            } else if (this.video) { // because proportions of video is not the same as video thumbnail proportions\n                result = this.getNonSirvVideoThumbnail();\n            } else {\n                result = this.getSlideSize();\n            }\n\n            return result;\n        }\n\n        getSelectorReferrerPolicy() {\n            const baseReferrerPolicy = 'no-referrer-when-downgrade';\n\n            if (this.selector.isCustom) {\n                if (this.selector.node.hasAttribute('data-referrerpolicy')) {\n                    return this.selector.node.attr('data-referrerpolicy');\n                }\n\n                const listImg = $J.$A(this.selector.node.node.children).filter((item) => { return $(item).getTagName() === 'img'; });\n                if (listImg.length === 1) {\n                    return $(listImg[0]).attr('referrerpolicy') || baseReferrerPolicy;\n                }\n            }\n\n            return this.slideContent.attr('data-referrerpolicy') || this.slideContent.attr('referrerpolicy') || baseReferrerPolicy;\n        }\n\n        getResponsiveImage() {\n            if (!this.customThumbnailImageClassPromise) {\n                this.customThumbnailImageClassPromise = new Promise((resolve, reject) => {\n                    const image = new ResponsiveImage(this.dataThumbnailImage);\n                    image.getImageInfo()\n                        .then((info) => {\n                            this.selector.isSirv = true;\n                            this.selector.size = image.getOriginSize();\n                            resolve(image);\n                        }).catch(reject);\n                });\n            }\n\n            return this.customThumbnailImageClassPromise;\n        }\n\n        getSirvThumbnailForCustomSelector(data_) {\n            return new Promise((resolve, reject) => {\n                this.getResponsiveImage()\n                    .then((rImageInstance) => {\n                        const data = rImageInstance.getThumbnail(data_);\n                        data.referrerpolicy = this.thumbnailReferrerPolicy;\n                        resolve(data);\n                    })\n                    .catch(reject);\n            });\n        }\n\n        getSelectorImgUrl(type, size, crop, watermark) {\n            const data = { crop, watermark };\n            if (size.width) { data.width = size.width; }\n            if (size.height) { data.height = size.height; }\n\n            const extend = (_data) => {\n                if (_data.src) { this.selector.src = _data.src; }\n                if (_data.srcset) { this.selector.srcset = _data.srcset; }\n\n                let selectorData = $J.extend({}, _data);\n                selectorData = $J.extend(selectorData, this.selector);\n\n                return selectorData;\n            };\n\n            return new Promise((resolve, reject) => {\n                if (this.isSirv()) {\n                    this.sirvService.getInfoSize().then((infoSize) => {\n                        if (this.selector.isCustom) {\n                            if (this.selector.isStatic) {\n                                resolve($J.extend({}, this.selector));\n                            } else {\n                                this.getSirvThumbnailForCustomSelector(data)\n                                    .then(result => resolve(extend(result)))\n                                    .catch(() => resolve($J.extend({}, this.selector)));\n                            }\n                        } else {\n                            this.sirvService.getSelectorImgUrl(data).then((result) => {\n                                result.referrerpolicy = this.thumbnailReferrerPolicy;\n                                resolve(extend(result));\n                            }).catch(reject);\n                        }\n                    }).catch(reject);\n                } else {\n                    if (this.selector.isCustom && this.dataThumbnailImage) {\n                        if (this.selector.isStatic) {\n                            resolve($J.extend({}, this.selector));\n                        } else {\n                            this.getSirvThumbnailForCustomSelector(data)\n                                .then(_result => resolve(extend(_result)))\n                                .catch(() => resolve($J.extend({}, this.selector)));\n                        }\n                    } else if (this.slideContent.getTagName() === 'img' || this.multiImages.length) {\n                        resolve($J.extend({}, this.selector));\n                    } else if (this.video) {\n                        this.getNonSirvVideoThumbnail().then(resolve).catch(reject);\n                    }\n\n                    // if (this.slideContent.getTagName() === 'img' || this.multiImages.length || this.dataThumbnailImage) {\n                    //     resolve($J.extend({}, this.selector));\n                    // } else if (this.video) {\n                    //     this.getNonSirvVideoThumbnail().then(resolve).catch(reject);\n                    // }\n                }\n            });\n        }\n\n        getNonSirvVideoThumbnail() {\n            if (!this.getVideoThumbnailPromise) {\n                this.getVideoThumbnailPromise = new Promise((resolve, reject) => {\n                    helper.videoModule.getImageSrc(this.slideContent, true).then((data) => {\n                        if (!this.selector.isCustom) {\n                            this.selector.src = data.thumbnail.url;\n                            this.selector.size = {\n                                width: data.thumbnail.width,\n                                height: data.thumbnail.height\n                            };\n                        }\n\n                        resolve($J.extend({}, this.selector));\n                    }).catch((err) => {\n                        if (!err || err === true) {\n                            err = { UUID: this.$J_UUID };\n                        } else {\n                            err.UUID = this.$J_UUID;\n                        }\n                        reject(err);\n                    });\n                });\n            }\n\n            return this.getVideoThumbnailPromise;\n        }\n\n        isSpinInited() {\n            return this.spinWasInited;\n        }\n\n        isSlideReady() {\n            return this.isReady;\n        }\n\n        getSelector() {\n            if (this.dataHiddenSelector) { return null; }\n\n            if (!this.selector.node) {\n                this.selector.node = $J.$new(SELECTOR_TAG);\n                this.selector.node.addClass(SELECTOR_CLASS);\n            }\n\n            if (this.dataThumbnailImage) {\n                const typeOfSlide = this.getTypeOfSlide();\n\n                if (typeOfSlide !== null) {\n                    this.selector.node.attr('data-type', globalVariables.SLIDE.NAMES[typeOfSlide]);\n                }\n\n                this.selector.src = this.dataThumbnailImage;\n\n                if (!this.selector.isStatic) {\n                    this.selector.infoPromise = new Promise((resolve) => {\n                        this.getResponsiveImage()\n                            .catch((err) => {})\n                            .finally(() => {\n                                resolve(this.selector.isSirv, this.selector.size);\n                            });\n                    });\n                }\n            } else if (this.dataThumbnailHtml) {\n                const tmp = $J.$new('div');\n                tmp.node.innerHTML = this.dataThumbnailHtml;\n                this.selector.selectorContent = tmp.node.firstChild;\n                this.selector.node.attr('data-type', 'html');\n            } else if (this.selector.isCustom) {\n                this.selector.node.attr('data-type', 'html');\n                this.selector.selectorContent = this.selector.node;\n            } else {\n                if (this.isSirv()) {\n                    const t = this.getTypeOfSlide();\n                    this.selector.node.attr('data-type', globalVariables.SLIDE.NAMES[t]);\n                    if (t === globalVariables.SLIDE.TYPES.SPIN && this.sirvService.isThumbnailGif()) {\n                        this.selector.node.addClass('spin-thumbnail-gif');\n                    }\n                } else {\n                    const data = findSomethingForSelector(this.slideContent.node);\n\n                    if ($J.contains(['youtube', 'vimeo', 'video'], data.type)) {\n                        this.selector.node.attr('data-type', data.type);\n                    } else if (data.type === 'img') {\n                        this.selector.src = data.data;\n                    } else {\n                        this.selector.selectorContent = data.data;\n                        this.selector.node.attr('data-type', 'html');\n                    }\n                }\n            }\n\n            if (this.selector.isCustom) {\n                this.selector.node.addClass(CSS_MAIN_CLASS + '-custom-thumbnail');\n            }\n\n            this.selector.disabled = !this.enabled;\n\n            return this.selector;\n        }\n\n        getUUID() {\n            return this.$J_UUID;\n        }\n\n        isSlideActive() {\n            return this.isActive;\n        }\n\n        playVideo() {\n            if (this.isActive && this.inView && this.video && (this.fullscreenState === globalVariables.FULLSCREEN.OPENED || $J.contains([globalVariables.SLIDE_SHOWN_BY.AUTOPLAY, globalVariables.SLIDE_SHOWN_BY.USER, globalVariables.SLIDE_SHOWN_BY.INIT], this.slideShownBy))) {\n                this.video.play();\n            }\n        }\n\n        initVideo() {\n            this.on('slideVideoReady', (e) => {\n                e.stop();\n\n                if (!this.isVideoReady) {\n                    this.isVideoReady = true;\n                    this.isReady = true;\n                    this.video.show();\n                    this.componentLoader.hide();\n                }\n\n                if (this.video.isAutoplay() || !this.video.isPreStart()) {\n                    this.playVideo();\n                }\n            });\n\n            this.on('slideVideoPlay', (e) => {\n                // e.stop();\n                e.data.slide = this.getData();\n\n                if (this.isVideoPaused && !this.video.isAutoplay()) {\n                    this.video.pause();\n                }\n\n                this.isVideoPaused = false;\n            });\n\n            this.on('slideVideoPause', (e) => {\n                // e.stop();\n                e.data.slide = this.getData();\n            });\n\n            this.on('slideVideoEnd', (e) => {\n                // e.stop();\n                e.data.slide = this.getData();\n            });\n\n            const videoOptions = this.options.video;\n\n            switch (helper.videoModule.getType(this.slideContent)) {\n                case 'youtube':\n                    this.video = new slideVideo.YouTubeVideo(this.slideContent, videoOptions);\n                    break;\n                case 'vimeo':\n                    this.video = new slideVideo.VimeoVideo(this.slideContent, videoOptions);\n                    break;\n                case 'video':\n                    this.video = new slideVideo.HTMLVideo(this.slideContent, videoOptions);\n                    break;\n                default:\n                    // empty\n            }\n\n            this.video.setParent(this);\n        }\n\n        resize() {\n            if (!this.enabled) { return; }\n            if (this.sirvService) {\n                this.sirvService.resize();\n\n                const t = globalVariables.SLIDE.TYPES;\n                if (this.isReady && $J.contains([t.SPIN, t.ZOOM], this.getTypeOfSlide())) {\n                    if (this.sirvService.isZoomSizeExist()) {\n                        this.contentWrapper.addClass(CAN_ZOOM_CLASS);\n                    } else {\n                        this.contentWrapper.removeClass(CAN_ZOOM_CLASS);\n                    }\n                }\n            } else {\n                // when video leaves viewport and then appears the browser generates resize event on android\n                // if (this.video) {\n                //     this.video.pause();\n                // }\n            }\n        }\n\n        destroy() {\n            if (this.sirvService) {\n                this.sirvService.destroy();\n                this.sirvService = null;\n                this.off('stats');\n                this.off('componentEvent');\n            } else if (this.multiImages.length) {\n                this.multiImages.forEach((img) => {\n                    if (!img.src && img.datasrc) {\n                        img.node.removeAttribute('src');\n                    }\n                });\n            }\n\n            this.slideContent.del('view-content');\n\n            this.removeEventCloseFullscreeByClick();\n            this.sendEventCloseFullscreenByClick = null;\n\n            if (this.lastOriginNode) {\n                this.slideContent.remove();\n                this.slideContent = this.lastOriginNode;\n                this.lastOriginNode = null;\n            }\n\n            if (this.fullscreenOnlyNode) {\n                this.fullscreenOnlyNode.kill();\n                this.fullscreenOnlyNode = null;\n            }\n\n            this.off('beforeFullscreenIn');\n            this.off('afterFullscreenIn');\n            this.off('beforeFullscreenOut');\n            this.off('afterFullscreenOut');\n            this.off('inView');\n\n            if (this.video) {\n                this.off('slideVideoReady');\n                this.off('slideVideoPlay');\n                this.off('slideVideoPause');\n                this.off('slideVideoEnd');\n\n                this.video.destroy();\n            }\n            this.video = null;\n\n            if (this.componentLoader) {\n                this.componentLoader.destroy();\n                this.componentLoader = null;\n            }\n\n            if (this.socialbuttons) {\n                this.socialbuttons.destroy();\n            }\n\n            this.sizePromise = null;\n\n            this.componentSize = null;\n            this.contentWrapper.remove();\n            this.contentWrapper = null;\n            this.instanceNode.remove();\n            this.instanceNode = null;\n            this.slideContent = null;\n            this.isReady = false;\n            this.availableSlide = null;\n\n            super.destroy();\n        }\n    }\n\n    return Slide_;\n})();\n\n/* eslint-env es6 */\n/* global $, $J, Slide, Selectors, Arrows, Effect, CSS_MAIN_CLASS, SELECTOR_TAG, EventEmitter, ContextMenu, helper, globalVariables, remoteModules, ProductDetail*/\n/* eslint-disable indent */\n/* eslint-disable no-lonely-if */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\", \"varsIgnorePattern\": \"SirvSlider\" }] */\n\nlet isHandset = null;\n// DIV used to correctly measure viewport height in Safari > 10 on iPhone\nlet iPhoneSafariViewportRuler = null;\n\nconst SirvSlider = (() => {\n    const FULLSCREEN = 'fullscreen';\n    const _FULLSCREEN = $J.camelize('-' + FULLSCREEN);\n    const STANDARD_BUTTON_CLASS = CSS_MAIN_CLASS + '-button-' + FULLSCREEN + '-open';\n    const FULLSCREEN_BUTTON_CLASS = CSS_MAIN_CLASS + '-button-' + FULLSCREEN + '-close';\n    const FULLSCREEN_BUTTON_HIDE_CLASS = CSS_MAIN_CLASS + '-button-hidden';\n    // const SIZE_MESSAGE = 'can\\'t get size';\n    const PSEUDO_FULLSCREEN_CLASS = CSS_MAIN_CLASS + '-pseudo-' + FULLSCREEN;\n    const STANDARD_CSS = { width: '100%', height: '100%' };\n    const MIN_AUTOPLAY = 1000;\n    const MAX_SLIDES_TO_CHANGE_PRELOAD_BEHAVIOR = 8;\n\n    const isCustomId = (id) => {\n        let result = false;\n\n        id = id.split('-');\n        id.splice(id.length - 1, 1);\n        id = id.join('-');\n\n        if (id === CSS_MAIN_CLASS) {\n            result = true;\n        }\n\n        return result;\n    };\n\n    const getThumbnailsType = (type) => {\n        let result = 'thumbnails';\n\n        if (type === 'bullets') {\n            result = type;\n        }\n\n        return result;\n    };\n\n    // const getSelectorsSide = (position) => {\n    //     let result = null;\n\n    //     switch (position) {\n    //         case 'left':\n    //         case 'right':\n    //             result = 'width';\n    //             break;\n    //         case 'top':\n    //         case 'bottom':\n    //             result = 'height';\n    //             break;\n    //         // no default\n    //     }\n\n    const getExistComponents = (arr, productDetailsText, socialbuttons) => {\n        const result = [];\n        const t = globalVariables.SLIDE.TYPES;\n\n        arr.forEach((slide) => {\n            if (slide.type && !$J.contains([t.IMAGE, t.HTML], slide.type) && !$J.contains(result, slide.type)) {\n                result.push(globalVariables.SLIDE.NAMES[slide.type]);\n            }\n        });\n\n        if (productDetailsText) {\n            result.push('productDetail');\n        }\n\n        if (socialbuttons) {\n            result.push('socialButtons');\n        }\n\n        return result;\n    };\n\n    const slidePinnedFilter = (rawSlides) => {\n        const slides = [];\n        let pinnedAtTheEnd = 0;\n        let pinnedAtTheStart = 0;\n        let dataPinned;\n        let currentNode;\n\n        for (let indexSlide = 0, l = rawSlides.length; indexSlide < l; indexSlide++) {\n            currentNode = rawSlides[indexSlide];\n\n            if (currentNode.querySelector(SELECTOR_TAG)) {\n                currentNode = currentNode.querySelector(SELECTOR_TAG);\n            }\n\n            dataPinned = $J.$(currentNode).attr('data-pinned');\n            const pinnedAttr = currentNode.hasAttribute('data-pinned');\n\n            if ((pinnedAtTheStart >= 3 && dataPinned === 'start') || (pinnedAtTheEnd >= 3 && ((pinnedAttr && dataPinned && (dataPinned === 'end' ||\n                dataPinned !== 'end' && dataPinned !== 'start')) || (pinnedAttr && !dataPinned)))) {\n                // eslint-disable-next-line\n                continue;\n            }\n\n            if (pinnedAtTheStart < 3 && dataPinned === 'start') {\n                pinnedAtTheStart++;\n            }\n\n            if (pinnedAtTheEnd < 3 && (pinnedAttr && dataPinned && (dataPinned === 'end' || dataPinned !== 'end' && dataPinned !== 'start')) || (pinnedAttr && !dataPinned)) {\n                pinnedAtTheEnd++;\n            }\n\n            slides.push(rawSlides[indexSlide]);\n        }\n\n        return slides;\n    };\n\n    class Slider extends EventEmitter {\n        constructor(node, options) {\n            super();\n            this.instanceNode = $(node);\n            this.instanceOptions = options.options;\n            this.viewerFileContent = options.viewerFileContent;\n\n            this.option = (...args) => {\n                if (args.length > 1) {\n                    return this.instanceOptions.set(args[0], args[1]);\n                }\n                return this.instanceOptions.get(args[0]);\n            };\n\n            this.slideOptions = $J.extend(options.slideOptions, {\n                quality: this.instanceOptions.isset('quality') ? this.option('quality') : null,\n                hdQuality: this.option('hdQuality'),\n                isHDQualitySet: this.instanceOptions.isset('hdQuality'),\n                fullscreenOnly: this.option(FULLSCREEN + '.always'),\n                isFullscreen: this.option(FULLSCREEN + '.enable'),\n                nativeFullscreen: this.option(FULLSCREEN + '.native'),\n\n                sbEnable: this.option('slide.socialbuttons.enable'),\n                sbFacebook: this.option('slide.socialbuttons.types.facebook'),\n                sbTwitter: this.option('slide.socialbuttons.types.twitter'),\n                sbLinkedin: this.option('slide.socialbuttons.types.linkedin'),\n                sbReddit: this.option('slide.socialbuttons.types.reddit'),\n                sbTumblr: this.option('slide.socialbuttons.types.tumblr'),\n                sbPinterest: this.option('slide.socialbuttons.types.pinterest'),\n                sbTelegram: this.option('slide.socialbuttons.types.telegram')\n            });\n\n            this.id = this.instanceNode.attr('id');\n\n            if (!this.id) {\n                this.id = CSS_MAIN_CLASS + '-' + helper.generateUUID();\n                this.instanceNode.attr('id', this.id);\n            }\n\n            this.lazyInit = options.lazyInit;\n\n            this.movingContainer = $J.$new('div').addClass(CSS_MAIN_CLASS);\n            this.slideWrapper = $J.$new('div').addClass(CSS_MAIN_CLASS + '-slides-box');\n            this.slidesContainer = $J.$new('div').addClass(CSS_MAIN_CLASS + '-slides');\n            this.selectorsWrapper = $J.$new('div').addClass(CSS_MAIN_CLASS + '-selectors-box');\n            this.fullScreenBox = $J.$new('div').addClass(CSS_MAIN_CLASS + '-' + FULLSCREEN + '-box');\n            this.controlsWrapper = $J.$new('div').addClass(CSS_MAIN_CLASS + '-controls');\n\n            this.producDetailsText = this.instanceNode.attr('data-product-detail');\n            this.productDetail = null;\n\n            this.fullScreenBox.addEvent('mousescroll touchstart', (e) => { e.stopDistribution(); });\n\n            this.isReady = false;\n            this.isMoving = false;\n            this.isSelectorsReady = false;\n            this.isToolStarted = false;\n            this.isInitialized = false;\n            this.isStartedFullInit = false;\n            this.inViewModule = null;\n            this.isInView = false;\n            this.firstSlideAhead = false;\n            this.rootMargin = 0;\n\n            this.fullscreenButton = null;\n            this.doSetSize = false;\n            this.heightProportion = null;\n            this.slides = [];\n            this.enabledIndexesOfSlides = [];\n            this.selectors = null;\n            this.arrows = null;\n            this.contextMenu = null;\n            this.countOfSizes = $([]);\n            this.isFullscreen = globalVariables.FULLSCREEN.CLOSED;\n            this.fullscreenStartTime = null;\n            this.index = 0;\n            this.movingContainerId = CSS_MAIN_CLASS + '-' + helper.generateUUID();\n            this.cssRulesId = 'sirv_css_rules-' + helper.generateUUID();\n            this.isComponentPinching = false;\n            this.isZoomIn = false;\n            this.hasSize = false;\n            this.isPseudo = false;\n            this.doHistory = true;\n            this.isAutoplay = this.option('slide.autoplay');\n            this.autoplayDelay = this.option('slide.delay');\n            this.residualAutoplayTime = this.autoplayDelay;\n            this.sliderNodes = [];\n            this.destroyed = false;\n            this.autoplayTimer = null;\n            this.timerRemove = null;\n\n            this.onResizeDebounce = helper.debounce(() => { this.onResizeWithoutSelectors(); }, 16);\n            this.selectorsDebounce = null;\n\n            if (this.doHistory) {\n                this.fullscreenViewId = Math.floor(Math.random() * $J.now());\n                globalVariables.FULLSCREEN_VIEWERS_IDs_ARRAY.push(this.fullscreenViewId);\n            }\n\n            this.controlsWrapperWasAppended = false;\n            this.isStandardGrid = false;\n            this.isFullscreenGrid = false;\n\n\n            // conflict with pinch event make us to inject the timer\n            // this.touchDragTimer = null;\n\n            this.clearingTouchdragFunction = null;\n            this.classes = {\n                standard: {\n                    movingContainerClasses: $([]),\n                    selectorsWrapperClasses: $([])\n                },\n\n                fullscreen: {\n                    movingContainerClasses: $([]),\n                    selectorsWrapperClasses: $([])\n                }\n            };\n\n            this.externalContainer = null;\n\n            if ($J.browser.mobile) {\n                this.movingContainer.addClass(CSS_MAIN_CLASS + '-mobile');\n            }\n\n            this.onResizeHandler = this.onResize.bind(this);\n\n            this.pseudoFSEvent = (e) => {\n                if (e.oe.keyCode === 27) { // Esc\n                    $($J.D).removeEvent('keydown', this.pseudoFSEvent);\n                    this.exitFullScreen();\n                }\n            };\n\n            this.keyBoardArrowsCallback = (e) => {\n                let d;\n                const kc = e.oe.keyCode;\n\n                if (this.isReady) {\n                    if ($J.contains([37, 39], kc)) {\n                        e.stop();\n\n                        d = (kc === 37) ? 'prev' : 'next';\n\n                        this.jump(d, 2);\n                    }\n                }\n            };\n\n            this.onHistoryStateChange = (e) => {\n                try {\n                    if (e.oe.state && e.oe.state.name === 'Sirv.viewer') {\n                        if (globalVariables.FULLSCREEN_VIEWERS_IDs_ARRAY.indexOf(e.oe.state.hash) < 0) {\n                            globalVariables.FULLSCREEN_VIEWERS_IDs_ARRAY.splice(globalVariables.FULLSCREEN_VIEWERS_IDs_ARRAY.indexOf(this.fullscreenViewId), 1);\n                            this.fullscreenViewId = e.oe.state.hash;\n                            globalVariables.FULLSCREEN_VIEWERS_IDs_ARRAY.push(this.fullscreenViewId);\n                        }\n\n                        if (e.oe.state.hash === this.fullscreenViewId) {\n                            this.enterFullScreen();\n                        }\n                    } else {\n                        if (this.isFullscreenState()) {\n                            this.exitFullScreen();\n                        }\n                    }\n                } catch (ex) {\n                    // empty\n                }\n            };\n\n            const parsedSlides = this.getSlides();\n\n            this.addComponentsCSS = helper.debounce(() => { globalFunctions.rootDOM.addCSSStringToHtml(); }, 100);\n            remoteModules.load(getExistComponents(parsedSlides, this.producDetailsText, this.option('slide.socialbuttons.enable'))).then(() => {\n                if (!this.destroyed) {\n                    globalFunctions.rootDOM.addCSSStringToHtml();\n                    globalFunctions.rootDOM.addCSSString(this.instanceNode.node);\n                    this.setComponentsEvents();\n                    this.createSlides(parsedSlides);\n\n                    if ($J.browser.ready || $J.D.node.readyState !== 'loading') {\n                        this.startFullInit();\n                    }\n\n                    if (ProductDetail && this.option('productdetail.enable') && this.producDetailsText) {\n                        this.createProductDetails();\n                    }\n                }\n            });\n        }\n\n        isFullscreenState() {\n            return $J.contains([globalVariables.FULLSCREEN.OPENING, globalVariables.FULLSCREEN.OPENED], this.isFullscreen);\n        }\n\n        createProductDetails() {\n            this.productDetail = new ProductDetail({\n                text: this.producDetailsText,\n                position: this.option('productdetail.position')\n             }, this.movingContainer, this.fullScreenBox);\n        }\n\n        setRootMargin() {\n            let value = parseInt(this.option('threshold'), 10);\n\n            if ($J.typeOf(this.option('threshold')) === 'string') {\n                const v = ($J.W.node.innerHeight || $J.D.node.documentElement.clientHeight) / 100 * value;\n                value = v;\n            }\n\n            this.rootMargin = value;\n        }\n\n        startFullInit(options) { // the method must be launched after 'this.createSlides' method\n            if (this.isStartedFullInit || !this.slides.length) { return; }\n            this.isStartedFullInit = true;\n\n            if (this.isHiddenSlides()) {\n                return;\n            }\n\n            if (options) {\n                this.instanceOptions = options.options;\n\n                this.option = (...args) => {\n                    if (args.length > 1) {\n                        return this.instanceOptions.set(args[0], args[1]);\n                    }\n                    return this.instanceOptions.get(args[0]);\n                };\n\n                this.slideOptions = $J.extend(options.slideOptions, {\n                    fullscreenOnly: this.option(FULLSCREEN + '.always'),\n                    autoplay: this.option('video.autoplay')\n                });\n\n                this.lazyInit = options.lazyInit;\n                this.isAutoplay = this.option('slide.autoplay');\n                this.autoplayDelay = this.option('slide.delay');\n                this.residualAutoplayTime = this.autoplayDelay;\n            }\n\n            if (this.option(FULLSCREEN + '.always')) {\n                this.movingContainer.addClass(CSS_MAIN_CLASS + '-fullsreen-always');\n            }\n\n            if (isHandset === null) {\n                isHandset = ($J.browser.mobile && window.matchMedia && window.matchMedia('(max-device-width: 767px), (max-device-height: 767px)').matches);\n            }\n\n            // Create a ruler div to properly handle viewport height in Safari (>10) on iPhone with and without address bar, bookmark bar and status bar.\n            // if (isHandset && $J.browser.platform === 'ios' && $J.browser.uaName === 'safari' && parseInt($J.browser.uaVersion, 10) > 10) {\n            if (isHandset && $J.browser.platform === 'ios') {\n                iPhoneSafariViewportRuler = $J.$new('div').setCss({ position: 'fixed', top: 0, width: 0, height: '100vh' });\n            }\n\n            this.normalizeOptions();\n\n            this.setRootMargin();\n\n            this.slideWrapper.addClass(CSS_MAIN_CLASS + '-' + (this.option('orientation') === 'horizontal' ? 'h' : 'v'));\n\n            this.index = this.option('slide.first');\n\n            const l = this.slides.length;\n\n            if (this.index > l - 1) {\n                this.index = 0;\n            }\n\n            if (l > 0 && (!this.slides[this.index].isEnabled() || !this.slides[this.index].isSlideAvailable())) {\n                let index = null;\n                for (let i = 0; i < l; i++) {\n                    const tmpIndex = helper.sliderLib.findIndex('next', this.index + i, l, true);\n                    if (this.slides[tmpIndex].isEnabled() && this.slides[tmpIndex].isSlideAvailable()) {\n                        index = tmpIndex;\n                        break;\n                    }\n                }\n\n                if (index === null) {\n                    // eslint-disable-next-line no-console\n                    console.warn('Sirv Media Viewer: All items are disabled.', this.instanceNode.node);\n                    this.emit('destroy', { data: { id: this.id, node: this.instanceNode.node } });\n                    return;\n                }\n\n                this.index = index;\n            }\n\n            this.createContextMenu();\n\n            this.setInViewAction();\n\n            if (this.option('thumbnails.enable') && this.option('thumbnails.target')) {\n                this.externalContainer = $($J.D.node.querySelector(this.option('thumbnails.target')));\n                if (!this.externalContainer) {\n                    this.externalContainer = null;\n                }\n            }\n\n            const fragment = $J.D.node.createDocumentFragment();\n            fragment.appendChild(this.movingContainer.node);\n            this.movingContainer.setCss(STANDARD_CSS);\n            this.movingContainer.setCssProp('font-size', 0);\n\n            this.movingContainer.append(this.slideWrapper);\n            // this.slideWrapper.setCss(STANDARD_CSS);\n\n            this.slides.forEach((slide) => { slide.startFullInit(options ? this.slideOptions : null); });\n\n            this.appendSelectors(true);\n            this.createClasses();\n            this.setClasses();\n\n            // css takes too long time to loading\n            // and we have size because display = block by default\n            // if selectors wrapper is vertical orientation\n            // this.selectorsWrapper.setCssProp('display', 'inline-block');\n\n            this.instanceNode.append(fragment);\n            this.instanceNode.setCssProp('font-size', 0);\n\n            this.slideWrapper.append(this.slidesContainer);\n            this.slidesContainer.setCss(STANDARD_CSS);\n\n            this.instanceNode.getSize();\n            this.movingContainer.getSize();\n            this.selectorsWrapper.getSize();\n            this.slideWrapper.getSize();\n\n            const containerHasHeight = this.instanceNode.getSize().height > 0;\n\n            this.createSelectors();\n\n            if (this.selectors && this.isStandardGrid) {\n                this.selectorsWrapper.setCss({\n                    flexBasis: this.option('thumbnails.size') + 'px'\n                });\n            }\n\n            let steps = 10;\n            const getSize = () => {\n                if (this.destroyed) { return; }\n\n                let size = this.slidesContainer.node.getBoundingClientRect();\n\n                if (!size.height) {\n                    size = this.slideWrapper.node.getBoundingClientRect();\n                }\n\n                steps -= 1;\n\n                if (steps > 0 && ((!size.width && !size.height) || containerHasHeight && !size.height)) {\n                    setTimeout(getSize, 16);\n                } else {\n                    this.instanceNode.setCssProp('font-size', '');\n\n                    if (size.width) {\n                        // size.height / size.width < 0.25 - fix for ie and firefox\n                        // if (!size.height || size.height / size.width < 0.25) {\n                        if (!size.height) {\n                            this.doSetSize = true;\n                        }\n                    } else {\n                        // Fix for display none\n                        this.doSetSize = true;\n                    }\n\n                    this.slides.forEach((slide) => {\n                        if (slide.isSlideAvailable()) {\n                            this.slidesContainer.append(slide.getNode());\n                        }\n\n                        slide.appendToDOM();\n                        // all elements must be in dom\n                        slide.initVideoPlayer();\n                    });\n\n                    this.setClasses();\n                    this.searchingOfProportions();\n                    if (this.selectors) { this.selectors.init(); }\n                    this.postInitialization();\n                }\n            };\n\n            if (this.firstSlideAhead) { // if autostart is false\n                this.broadcast('inView', { data: this.isInView });\n            }\n\n            setTimeout(getSize, 16);\n        }\n\n        visibleSlides() {\n            return this.slides.filter(slide => slide.isSlideAvailable() && slide.isEnabled()).length;\n        }\n\n        searchingOfProportions() {\n            const l = this.slides.length;\n\n            const initOtherComponents = () => {\n                const i = this.index;\n                const p = this.firstSlideAhead ? false : this.option('slide.preload');\n\n                this.hasSize = this.setContainerSize();\n\n                if (this.inViewModule && helper.isIe()) {\n                    this.inViewModule.takeRecords();\n                }\n\n                this.slides.forEach((_slide, index) => { _slide.startTool(i === index, p, this.firstSlideAhead); });\n\n                this.createEffect();\n\n                this.isToolStarted = true;\n\n                this.checkSingleSlide();\n\n                this.slides[this.index].beforeShow();\n                this.slides[this.index].afterShow(globalVariables.SLIDE_SHOWN_BY.INIT);\n\n                this.postInitialization();\n            };\n\n            const getSlideSize = (index, indexes) => {\n                return new Promise((resolve, reject) => {\n                    const slide = this.slides[index];\n                    const slidesCount = this.slides.length;\n                    indexes.push(index);\n\n                    if (slide) {\n                        const nextSearching = () => {\n                            let nextIndex = helper.getArrayIndex(index + 1, l);\n\n                            if (slidesCount !== this.slides.length && nextIndex > index) {\n                                nextIndex = index;\n                            }\n\n                            if ($J.contains(indexes, nextIndex)) {\n                                const tmp = this.slidesContainer.getSize();\n\n                                if (!tmp.width) {\n                                    tmp.width = 500; // we don'n have any size\n                                }\n\n                                if (!tmp.height) {\n                                    // it can be video without sizes or html, but we have width\n                                    tmp.height = tmp.width * 0.5625; // (9/16)\n                                }\n\n                                this.heightProportion = tmp;\n                                resolve();\n                            } else {\n                                getSlideSize(nextIndex, indexes).then(resolve);\n                            }\n                        };\n\n                        slide.getSlideSize()\n                            .then((data) => {\n                                const size = data.size;\n\n                                if (size && size.width && size.height) {\n                                    this.heightProportion = size;\n                                    resolve();\n                                } else {\n                                    nextSearching();\n                                }\n                            })\n                            .catch((err) => {\n                                let _l = this.slides.length;\n\n                                if (err && err.error && err.error.status === 404) {\n                                    _l -= 1;\n                                    this.pickOut(err.UUID);\n                                }\n\n                                if (_l > 0) {\n                                    nextSearching();\n                                } else {\n                                    reject();\n                                }\n                            });\n                    }\n                });\n            };\n\n            if (this.doSetSize) {\n                getSlideSize(this.index, []).then(() => {\n                    initOtherComponents();\n                }).catch(() => {});\n            } else {\n                initOtherComponents();\n            }\n        }\n\n        initTouchDrag() {\n            let axises = ['x', 'left', 'width'];\n            let otherAxise = 'y';\n            let containerPosition;\n            let isMoving = false;\n            let startPosition;\n            let lastPercent;\n            let size;\n\n            let firstSlide = null;\n            let middleSlide = null;\n            let lastSlide = null;\n\n            const loop = this.option('loop');\n\n            let lastDirection = null;\n            let lastPosition = null;\n\n            let makeAnimation = true;\n            let isChanging = true;\n            let nextSlide = null;\n            let useless = null;\n            let stateOfScroll = 0; // 0 - nothing, 1 - drag slide, 2 - scroll page\n\n            let lastXY = { x: null, y: null };\n            let lastAnimation = false;\n\n            const getSlidePercent = (value) => {\n                return (value / size) * 100;\n            };\n\n            const getStyleValue = (value) => {\n                const pos = { x: 0, y: 0 };\n\n                pos[axises[0]] = value;\n\n                return 'translate3d(' + pos.x + '%, ' + pos.y + '%, 0px)';\n            };\n\n            const setCss = (node, value) => {\n                if (node) {\n                    node.getNode().setCssProp('transform', getStyleValue(value));\n                }\n            };\n\n            const setSlidesCss = (value) => {\n                setCss(firstSlide, value - 100);\n                setCss(middleSlide, value);\n                setCss(lastSlide, value + 100);\n            };\n\n            const endOfEffect = (direction) => {\n                return new Promise((resolve, reject) => {\n                    let tmp;\n                    let currentSlidePosition = 100;\n                    let nextSlidePosition = 0;\n                    const abs = Math.abs(lastPercent);\n\n                    if (abs < 25 || stateOfScroll === 2 || direction === 'next' && lastPercent < 0 || direction === 'prev' && lastPercent > 0) {\n                        isChanging = false;\n                    }\n\n                    if (!isChanging) {\n                        if (lastPercent < 0) {\n                            direction = 'prev';\n                        } else {\n                            direction = 'next';\n                        }\n                    }\n\n                    nextSlide = (direction === 'next') ? firstSlide : lastSlide;\n                    useless = (direction === 'next') ? lastSlide : firstSlide;\n\n                    if (direction !== 'next') {\n                        currentSlidePosition *= (-1);\n                    }\n\n                    if (useless) {\n                        useless.getNode().setCssProp('transform', '');\n                        useless.afterHide();\n                    }\n\n                    if (isChanging) {\n                        middleSlide.beforeHide();\n\n                        this.sendEvent('beforeSlideIn', { slide: nextSlide.getData() });\n                        this.sendEvent('beforeSlideOut', { slide: middleSlide.getData() });\n\n                        this.index = nextSlide.getIndex();\n                    } else {\n                        tmp = currentSlidePosition;\n                        currentSlidePosition = nextSlidePosition;\n                        nextSlidePosition = tmp;\n                        nextSlidePosition *= (-1);\n\n                        if (abs < 2) {\n                            makeAnimation = false;\n                        }\n                    }\n\n                    if (makeAnimation) {\n                        middleSlide.getNode().addEvent('transitionend', (e) => {\n                            e.stop();\n                            resolve();\n                        });\n\n                        if (nextSlide) {\n                            nextSlide.getNode().setCssProp('transition', 'transform, .3s');\n                        }\n                        middleSlide.getNode().setCssProp('transition', 'transform, .3s');\n\n                        if (nextSlide) {\n                            nextSlide.getNode().getSize();\n                        }\n\n                        middleSlide.getNode().getSize();\n\n                        if (this.selectors) {\n                            this.selectors.setActiveItem(this.index);\n                            this.selectors.jump(this.index);\n                        }\n                    }\n\n                    if (nextSlide) {\n                        setCss(nextSlide, nextSlidePosition);\n                    }\n                    setCss(middleSlide, currentSlidePosition);\n\n                    if (!makeAnimation) {\n                        resolve();\n                    }\n                });\n            };\n\n            const fullClear = () => {\n                if (isMoving) {\n                    const css = { 'transform': '', 'transition': '' };\n                    middleSlide.getNode().removeEvent('transitionend');\n\n                    if (nextSlide) {\n                        if (isChanging) {\n                            this.checkLoop(this.index);\n                            nextSlide.afterShow(globalVariables.SLIDE_SHOWN_BY.USER);\n                            middleSlide.afterHide();\n                            this.sendEvent('afterSlideIn', { slide: nextSlide.getData() });\n                            this.sendEvent('afterSlideOut', { slide: middleSlide.getData() });\n                        } else {\n                            if (nextSlide) {\n                                nextSlide.afterHide();\n                            }\n                        }\n\n                        if (nextSlide) {\n                            nextSlide.getNode().setCss(css);\n                        }\n                    }\n\n                    middleSlide.getNode().setCss(css);\n\n                    makeAnimation = true;\n                    isChanging = true;\n                    nextSlide = null;\n                    useless = null;\n\n                    this.enableFullscreenButton();\n                    this.autoplay();\n                    isMoving = false;\n                    this.isMoving = false;\n\n                    lastDirection = null;\n                    lastPosition = null;\n\n                    firstSlide = null;\n                    middleSlide = null;\n                    lastSlide = null;\n                    lastAnimation = false;\n                }\n            };\n\n            const getNextSlide = (direction, fromIndex) => {\n                let result = null;\n                let currentIndex = fromIndex;\n\n                if (currentIndex === $J.U) {\n                    currentIndex = this.index;\n                }\n\n                const index = this.getNextIndex(direction, currentIndex, this.slides.length, loop);\n\n                if (index !== null) {\n                    const slide = this.slides[index];\n\n                    if (slide.getIndex() !== this.index) {\n                        if (!slide.isEnabled()) {\n                            result = getNextSlide(direction, slide.getIndex());\n                        } else {\n                            result = slide;\n                        }\n                    }\n                }\n\n                return result;\n            };\n\n            const start = (e) => {\n                if (lastAnimation) { return; }\n                fullClear();\n                this.effect.stop();\n                if (this.index === null) { return; }\n\n                middleSlide = this.slides[this.index];\n\n                if (middleSlide.isSwipeDisabled()) { return; }\n\n                isMoving = true;\n                this.isMoving = true;\n\n                containerPosition = this.slidesContainer.getPosition()[axises[1]];\n                size = this.slidesContainer.getSize()[axises[2]];\n                lastPosition = e[axises[0]] - containerPosition;\n                startPosition = getSlidePercent(lastPosition);\n                lastPercent = startPosition;\n\n                // const l = this.slides.length;\n                // firstSlide = this.slides[helper.sliderLib.getIndexFromDirection(this.index, 'prev', l, loop)];\n                // lastSlide = this.slides[helper.sliderLib.getIndexFromDirection(this.index, 'next', l, loop)];\n                firstSlide = getNextSlide('prev');\n                lastSlide = getNextSlide('next');\n\n                if (firstSlide && lastSlide) {\n                    if (firstSlide.getIndex() === lastSlide.getIndex()) {\n                        if (firstSlide.getIndex() < middleSlide.getIndex()) {\n                            lastSlide = null;\n                        } else {\n                            firstSlide = null;\n                        }\n                    } else if (firstSlide.getIndex() === middleSlide.getIndex() || middleSlide.getIndex() === lastSlide.getIndex()) {\n                        if (firstSlide.getIndex() === middleSlide.getIndex()) {\n                            firstSlide = null;\n                        } else {\n                            lastSlide = null;\n                        }\n                    }\n                }\n\n                if (firstSlide) {\n                    setCss(firstSlide, -100);\n                    firstSlide.beforeShow();\n                }\n\n                if (lastSlide) {\n                    setCss(lastSlide, 100);\n                    lastSlide.beforeShow();\n                }\n\n                this.disableFullscreenButton();\n            };\n\n            const move = (e) => {\n                let direction;\n                let current;\n\n                if (isMoving && !lastAnimation) {\n                    isMoving = true;\n\n                    e.stop();\n\n                    current = e[axises[0]] - containerPosition;\n\n                    if (current < lastPosition) {\n                        direction = 'prev';\n                    } else if (current > lastPosition) {\n                        direction = 'next';\n                    } else {\n                        if (!direction) {\n                            direction = lastPercent > 0 ? 'next' : 'prev';\n                        }\n                    }\n\n                    lastPosition = current;\n                    lastDirection = direction;\n\n                    lastPercent = getSlidePercent(lastPosition) - startPosition;\n\n                    if (!lastSlide && lastPercent < -10) {\n                        lastPercent = -10;\n                    }\n\n                    if (!firstSlide && lastPercent > 10) {\n                        lastPercent = 10;\n                    }\n\n                    setSlidesCss(lastPercent);\n                }\n            };\n\n            const end = (e) => {\n                if (isMoving && !lastAnimation) {\n                    if (stateOfScroll === 1) {\n                        e.stop();\n                    }\n\n                    middleSlide.dragEvent(e.state);\n\n                    lastAnimation = true;\n                    endOfEffect(lastDirection).finally(() => {\n                        lastAnimation = false;\n                        fullClear();\n                    });\n                }\n            };\n\n            const onDrag = (e) => {\n                if (this.isComponentPinching || this.isZoomIn || this.slides[this.index].isBlokedTouchdrag() || this.option(FULLSCREEN + '.always') && this.isFullscreen !== globalVariables.FULLSCREEN.OPENED) { return; }\n                if (e.state === 'dragstart') {\n                    // clearTimeout(this.touchDragTimer);\n                    lastXY = { x: e.x, y: e.y };\n                    // this.touchDragTimer = setTimeout(() => {\n                        start(e);\n                        middleSlide.dragEvent(e.state);\n                    // }, 16);\n                } else if (e.state === 'dragmove') {\n                    if (!stateOfScroll) {\n                        if (Math.abs(lastXY[axises[0]] - e[axises[0]]) > Math.abs(lastXY[otherAxise] - e[otherAxise])) {\n                            stateOfScroll = 1;\n                        } else {\n                            stateOfScroll = 2;\n                        }\n                    }\n\n                    if (stateOfScroll === 1) {\n                        move(e);\n                    }\n\n                    lastXY = { x: e.x, y: e.y };\n                } else if (e.state === 'dragend') {\n                    // clearTimeout(this.touchDragTimer);\n                    // this.touchDragTimer = null;\n                    end(e);\n                    stateOfScroll = 0;\n                    lastXY = { x: null, y: null };\n                }\n            };\n\n            if (this.option('orientation') === 'vertical') { axises = ['y', 'top', 'height']; otherAxise = 'x'; }\n\n            this.clearingTouchdragFunction = fullClear;\n\n            this.slidesContainer.addEvent('touchdrag', onDrag);\n            // this.slidesContainer.addEvent('mousedrag touchdrag', onDrag);\n        }\n\n        appendSelectors(start) {\n            let container = this.movingContainer;\n\n            if (this.externalContainer) {\n                if (!this.isFullscreenState()) {\n                    container = this.externalContainer;\n                    this.selectorsWrapper.addClass(CSS_MAIN_CLASS + '-external');\n                } else {\n                    this.selectorsWrapper.removeClass(CSS_MAIN_CLASS + '-external');\n                }\n            }\n\n            if (start || this.externalContainer) {\n                container.append(this.selectorsWrapper);\n            }\n        }\n\n        createClasses() {\n            const option = this.option;\n\n            const getOrientation = (value) => {\n                if ($J.contains(['left', 'right'], value)) {\n                    return 'v';\n                }\n\n                return 'h';\n            };\n\n            ['standard', 'fullscreen'].forEach((_type) => {\n                const isStandard = _type === 'standard';\n                const en = isStandard ? option('thumbnails.enable') : option('fullscreen.thumbnails.enable');\n                const s = isStandard ? option('thumbnails.position') : option('fullscreen.thumbnails.position');\n                const ss = getThumbnailsType(isStandard ? option('thumbnails.type') : option('fullscreen.thumbnails.type'));\n                const grid = isStandard ? this.isStandardGrid : this.isFullscreenGrid;\n\n                if (en) {\n                    if (!isStandard || !this.externalContainer) {\n                        this.classes[_type].movingContainerClasses.push(CSS_MAIN_CLASS + '-selectors-' + s);\n                    }\n\n                    this.classes[_type].selectorsWrapperClasses.push(CSS_MAIN_CLASS + '-' + ss);\n                    this.classes[_type].selectorsWrapperClasses.push(CSS_MAIN_CLASS + '-' + getOrientation(s));\n\n                    if (grid) {\n                        this.classes[_type].selectorsWrapperClasses.push(CSS_MAIN_CLASS + '-grid');\n                    }\n\n                    if (option('fullscreen.thumbnails.autohide') && !isStandard) {\n                        this.classes[_type].movingContainerClasses.push(CSS_MAIN_CLASS + '-autohide');\n                        this.classes[_type].movingContainerClasses.push(CSS_MAIN_CLASS + '-selectors-closed');\n                    }\n                }\n            });\n        }\n\n        changeClasses(obj, remove) {\n            const action = remove ? 'removeClass' : 'addClass';\n\n            obj.movingContainerClasses.forEach((className) => {\n                this.movingContainer[action](className);\n            });\n\n            obj.selectorsWrapperClasses.forEach((className) => {\n                this.selectorsWrapper[action](className);\n            });\n        }\n\n        setClasses() {\n            if (this.isFullscreenState()) {\n                this.changeClasses(this.classes.standard, true);\n                this.changeClasses(this.classes.fullscreen);\n            } else {\n                this.changeClasses(this.classes.fullscreen, true);\n                this.changeClasses(this.classes.standard);\n            }\n        }\n\n        setInViewAction() {\n            if (this.option('autostart') === 'visible') {\n                this.inViewModule = new helper.InViewModule((entries) => {\n                    entries.forEach((entry) => {\n                        const last = this.isInView;\n                        // https://github.com/verlok/vanilla-lazyload/issues/293#issuecomment-469100338\n                        // Sometimes 'intersectionRatio' can be 0 but 'isIntersecting' is true\n                        let iv = entry.isIntersecting || entry.intersectionRatio > 0;\n                        if (this.isFullscreenState() && !iv) { iv = true; }\n\n                        if (last !== iv) {\n                            this.isInView = iv;\n                            this.postInitialization();\n                            this.broadcast('inView', { data: iv });\n\n                            if (this.isInView) {\n                                this.autoplay();\n                            } else {\n                                this.pauseAutoplay();\n                            }\n                        }\n                    });\n                }, {\n                    rootMargin: this.rootMargin + 'px 0px'\n                });\n\n                this.inViewModule.observe(this.instanceNode.node);\n            } else {\n                this.isInView = true;\n            }\n        }\n\n        sendEvent(nameOfEvent, data) {\n            /*\n                slider events: [\n                    'ready',\n                    'beforeSlideIn',\n                    'beforeSlideOut',\n                    'afterSlideIn',\n                    'afterSlideOut',\n                    'fullscreenIn',\n                    'fullscreenOut',\n                    'enableItem',\n                    'disableItem'\n                ]\n            */\n\n            if (!data) { data = {}; }\n            data.node = this.instanceNode;\n            if (!data.slider) { data.slider = { type: nameOfEvent }; }\n\n            this.emit('viewerPublicEvent', { data: data });\n        }\n\n        checkReadiness(eventName, component) {\n            let result = false;\n\n            if ($J.contains(['init', 'ready'], eventName)) {\n                if (component === 'viewer') {\n                    if (eventName === 'ready') {\n                        result = this.isReady;\n                    }\n                } else {\n                    for (let i = 0, l = this.slides.length; i < l; i++) {\n                        if (this.slides[i].checkReadiness(eventName, component)) {\n                            result = true;\n                            break;\n                        }\n                    }\n                }\n            }\n\n            return result;\n        }\n\n        sendReadyEvent(eventName, component) {\n            if (component === 'viewer') {\n                this.sendEvent('ready');\n            } else {\n                this.slides.forEach((slide) => { slide.sendReadyEvent(eventName, component); });\n            }\n        }\n\n        sendStats(typeOfEvent, data) {\n            if (!data) { data = {}; }\n            data.slider = this.id;\n\n            if (typeOfEvent) {\n                data.data = {};\n                data.data.event = typeOfEvent;\n            }\n\n            let stats;\n            let serverStats;\n\n            switch (data.component) {\n                case 'spin':\n                    stats = {\n                        account: data.account,\n                        event: {\n                            type: data.component,\n                            name: data.event,\n                            data: data.data || {},\n                            sessionId: data.sessionId,\n                            origin: data.origin\n                        }\n                    };\n\n                    stats.event[data.event === 'sessionStart' ? 'ts' : 'time'] = data.eventTime;\n\n                    serverStats = JSON.parse(JSON.stringify(stats));\n                    serverStats.event = JSON.stringify(serverStats.event);\n                    break;\n                // no default\n            }\n\n            if (stats) {\n                if (data.useBeacon === true) {\n                    helper.sendRawStats(serverStats, true);\n                } else {\n                    setTimeout(() => {\n                        helper.sendRawStats(serverStats);\n                    }, 1);\n                }\n\n                this.sendEvent('sendStats', $J.detach(stats));\n            }\n        }\n\n        setComponentsEvents() {\n            // const size = this.slidesContainer.getSize();\n            // const getProportionSize = (proportions) => {\n            //     let i;\n            //     let result = null;\n\n            //     for (i = 0; i < proportions.length; i++) {\n            //         if (proportions[i].size) {\n            //             result = proportions[i].size;\n            //             break;\n            //         }\n            //     }\n\n            //     return result;\n            // };\n\n            const loadContent = (index) => {\n                if (this.firstSlideAhead && index === this.index) {\n                    const p = this.option('slide.preload');\n                    this.enabledIndexesOfSlides.forEach((slideIndex) => {\n                        this.slides[slideIndex].startGettingInfo();\n                        if (p) {\n                            this.slides[slideIndex].loadContent();\n                        } else {\n                            this.slides[slideIndex].loadThumbnail();\n                        }\n                    });\n                }\n            };\n\n            const play = (index) => {\n                if (this.index === index) {\n                    this.autoplay();\n                }\n            };\n\n            const pause = (index) => {\n                if (this.index === index) {\n                    this.pauseAutoplay();\n                }\n            };\n\n            this.on('stats', (e) => {\n                /*\n                    e.data = {\n                        event: 'rotate',  // name of event\n                        data: {},         // event data\n                        index: 0          // slide Index\n                        component: 'spin' // type of component\n                    }\n                */\n                e.stopAll();\n\n                const doc = $J.D.node;\n                const win = $J.W.node;\n                const scrn = win.screen;\n\n                if (e.data.event === 'sessionStart') {\n                    if (!e.data.data) {\n                        e.data.data = {};\n                    }\n\n                    e.data.data.screen = {\n                        width: scrn.width,\n                        height: scrn.height,\n                        availWidth: scrn.availWidth,\n                        availHeight: scrn.availHeight,\n                        colorDepth: scrn.colorDepth,\n                        pixelDepth: scrn.pixelDepth\n                    };\n\n                    e.data.data.browser = {\n                        width: win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth || 0,\n                        height: win.innerHeight || doc.documentElement.clientWidth || doc.body.clientWidth || 0\n                    };\n                }\n\n                this.sendStats(null, e.data);\n            });\n\n            this.on('slideVideoPlay', (e) => {\n                e.stopAll();\n                pause(e.data.slide.index);\n            });\n\n            this.on('slideVideoPause', (e) => {\n                e.stopAll();\n                // pause(e.data.slide.index);\n            });\n\n            this.on('slideVideoEnd', (e) => {\n                e.stopAll();\n                play(e.data.slide.index);\n            });\n\n            // if slide is not sirv component\n            this.on('contentLoaded', (e) => {\n                e.stopAll();\n                loadContent(e.data.slide.index);\n            });\n\n            // init,ready,zoomIn,zoomOut\n            // fullscreenIn, fullscreenOut\n            // pinchStart, pinchEnd\n            this.on('componentEvent', (e) => {\n                const event = e.data.type;\n                e.stopAll();\n\n                switch (event) {\n                    case 'init':\n                        if (this.index === e.data.slide.index || (this.slides[this.index] && this.slides[this.index].isSpinInited())) {\n                            this.addControllWrapper();\n                            this.enableFullscreenButton();\n                            this.visibleFullscreenButton();\n                        }\n\n                        this.sendEvent('componentEvent', e.data);\n                        break;\n                    case 'ready':\n                        if (this.index === e.data.slide.index && e.data.component !== 'spin' && (!this.slides[e.data.slide.index].isVideoSlide() || this.isFullscreenState())) {\n                            this.addControllWrapper();\n                            this.enableFullscreenButton();\n                            this.visibleFullscreenButton();\n                        }\n\n                        this.sendEvent('componentEvent', e.data);\n                        break;\n                    case 'rotate':\n                        this.sendEvent('componentEvent', e.data);\n                        break;\n                    case 'fullscreenIn':\n                        if (e.data.component === 'video') {\n                            this.sendEvent('componentEvent', e.data);\n                        } else if (this.option(FULLSCREEN + '.enable') && this.isFullscreen === globalVariables.FULLSCREEN.CLOSED) {\n                            this.enterFullScreen();\n                        }\n                        break;\n                    case 'fullscreenOut':\n                        if (e.data.component === 'video') {\n                            this.sendEvent('componentEvent', e.data);\n                        } else {\n                            this.exitFullScreen();\n                        }\n                        break;\n                    case 'pinchStart':\n                        // clearTimeout(this.touchDragTimer);\n                        // this.touchDragTimer = null;\n                        this.isComponentPinching = true;\n                        break;\n                    case 'pinchEnd':\n                        this.isComponentPinching = false;\n                        break;\n                    case 'zoomIn':\n                        this.isZoomIn = true;\n                        pause(e.data.slide.index);\n                        this.sendEvent('componentEvent', e.data);\n                        break;\n                    case 'zoomOut':\n                        this.isZoomIn = false;\n                        play(e.data.slide.index);\n                        this.sendEvent('componentEvent', e.data);\n                        break;\n                    case 'hotspotOpened':\n                        pause(e.data.slide.index);\n                        break;\n                    case 'hotspotClosed':\n                        play(e.data.slide.index);\n                        break;\n                    case 'spinStart':\n                        pause(e.data.slide.index);\n                        break;\n                    case 'spinEnd':\n                        play(e.data.slide.index);\n                        break;\n                    case 'play':\n                        if (e.data.component === 'video') {\n                            pause(e.data.slide.index);\n                            this.sendEvent('componentEvent', e.data);\n                        }\n                        break;\n                    case 'resume':\n                        if (e.data.component === 'video') {\n                            pause(e.data.slide.index);\n                            this.sendEvent('componentEvent', e.data);\n                        }\n                        break;\n                    case 'pause':\n                        if (e.data.component === 'video') {\n                            this.sendEvent('componentEvent', e.data);\n                        }\n                        break;\n                    case 'end':\n                        if (e.data.component === 'video') {\n                            play(e.data.slide.index);\n                            this.sendEvent('componentEvent', e.data);\n                        }\n                        break;\n                    case 'seek': // video component event\n                        this.sendEvent('componentEvent', e.data);\n                        break;\n                    case 'contentLoaded':\n                        loadContent(e.data.slide.index);\n                        break;\n                    default:\n                        // no default\n                }\n            });\n\n            this.on('goTo' + _FULLSCREEN, (e) => {\n                e.stopAll();\n                if (this.option(FULLSCREEN + '.enable') && this.isFullscreen === globalVariables.FULLSCREEN.CLOSED) {\n                    this.enterFullScreen();\n                }\n            });\n\n            this.on('goTo' + _FULLSCREEN + 'Out', (e) => {\n                e.stopAll();\n                this.exitFullScreen();\n            });\n\n            this.on('infoReady', (e) => { // if slide was added by api\n                e.stop();\n\n                if (this.isFullscreen === globalVariables.FULLSCREEN.OPENED) {\n                    const slide = this.slides[e.data.index];\n                    slide.broadcast('before' + _FULLSCREEN + 'In', { data: { pseudo: this.isPseudo } });\n                    slide.broadcast('after' + _FULLSCREEN + 'In', { data: { pseudo: this.isPseudo } });\n                }\n            });\n\n            this.on((e) => { e.stopAll(); });\n        }\n\n        normalizeOptions() {\n            const opts = $(['contextmenu.text.zoom.in', 'contextmenu.text.zoom.out', 'contextmenu.' + FULLSCREEN + '.enter', 'contextmenu.' + FULLSCREEN + '.exit', 'contextmenu.text.download']);\n            const isEmpty = (str) => { return $J.typeOf(str) === 'string' && str.trim() === ''; };\n\n            if (this.option('fullscreen.thumbnails.size') === 'auto') {\n                this.option('fullscreen.thumbnails.size', this.option('thumbnails.size'));\n            }\n\n            if (this.option('slide.animation.type') === 'off') {\n                this.option('slide.animation.type', false);\n            }\n\n            if (this.option('thumbnails.type') === 'grid') {\n                this.isStandardGrid = true;\n                this.option('thumbnails.type', 'square');\n            }\n\n            if (this.option('fullscreen.thumbnails.type') === 'grid') {\n                this.isFullscreenGrid = false;\n                this.option('fullscreen.thumbnails.type', 'square');\n            }\n\n            opts.forEach((opt) => {\n                if (isEmpty(this.option(opt))) {\n                    this.option(opt, false);\n                }\n            });\n\n            if (this.option('thumbnails.enable') && this.option('thumbnails.target') && this.option('thumbnails.target').trim() === '') {\n                this.option('thumbnails.target', false);\n            }\n\n            if (this.option('slide.socialbuttons.enable') &&\n                (!this.option('slide.socialbuttons.types.facebook') &&\n                !this.option('slide.socialbuttons.types.twitter') &&\n                !this.option('slide.socialbuttons.types.linkedin') &&\n                !this.option('slide.socialbuttons.types.reddit') &&\n                !this.option('slide.socialbuttons.types.tumblr') &&\n                !this.option('slide.socialbuttons.types.pinterest') &&\n                !this.option('slide.socialbuttons.types.telegram'))) {\n                this.option('slide.socialbuttons.enable', false);\n            }\n\n            this.slideOptions.sbEnable = this.option('slide.socialbuttons.enable');\n        }\n\n        addControllWrapper() {\n            if (!this.controlsWrapperWasAppended && this.controlsWrapper.node.childNodes.length) {\n                this.controlsWrapperWasAppended = true;\n                this.slideWrapper.append(this.controlsWrapper);\n            }\n        }\n\n        postInitialization() {\n            if (!this.isInitialized && this.isInView && this.isSelectorsReady && this.isToolStarted && this.isStartedFullInit) {\n                this.isInitialized = true;\n\n                if (!this.hasSize) {\n                    this.setContainerSize();\n                }\n\n                this.broadcast('inView', { data: this.isInView });\n\n                this.createArrows();\n\n                if (this.selectors) {\n                    this.selectors.inView(this.isInView, this.instanceNode);\n                    this.selectors.setActiveItem(this.index);\n                }\n\n                if (!$J.browser.mobile) {\n                    let eventName = 'mouseout';\n                    if (helper.isIe()) {\n                        eventName = 'pointerout';\n                    }\n                    this.movingContainer.addEvent(eventName, (e) => {\n                        if (e.pointerType && e.pointerType !== 'mouse') { return; }\n                        let toElement = e.getRelated();\n\n                        while (toElement && toElement !== this.movingContainer.node) {\n                            toElement = toElement.parentNode;\n                        }\n\n                        if (this.movingContainer.node !== toElement && this.index !== null) {\n                            this.slides[this.index].mouseAction('mouseout', e);\n                        }\n                    });\n                }\n\n                if (this.slides.length > 1) {\n                    this.initTouchDrag();\n                }\n\n                $($J.W).addEvent('resize', this.onResizeHandler);\n\n                this.showHideArrows();\n                this.showHideSelectors();\n\n                if (this.option(FULLSCREEN + '.always')) {\n                    this.slideWrapper.addClass(globalVariables.CSS_CURSOR_FULSCREEN_ALWAYS);\n                }\n\n                this.movingContainer.attr('id', this.movingContainerId);\n\n                this.createFullscreenButton();\n                this.addControllWrapper();\n                if (this.slides[this.index] && !this.slides[this.index].isSirv() && (!this.slides[this.index].isVideoSlide() || this.isFullscreenState())) {\n                    this.enableFullscreenButton();\n                    this.visibleFullscreenButton();\n                }\n\n                this.checkLoop(this.index);\n\n                // we can't reset this style earlier, because youtube and vimeo can't get size if it is first slide\n                this.movingContainer.setCssProp('font-size', '');\n\n                if (this.doHistory) { $($J.W).addEvent('popstate', this.onHistoryStateChange); }\n\n                this.autoplay();\n                this.isReady = true;\n                this.sendEvent('ready');\n            }\n        }\n\n        addHistory() {\n            if (this.doHistory) {\n                // Modify browser history so that expanded view can be closed by browser's Back button\n                const urlHash = '#sirv-viewer-' + this.fullscreenViewId;\n                if ($J.W.node.location.hash !== urlHash) {\n                    const state = { name: 'Sirv.viewer', hash: this.fullscreenViewId };\n                    const title = $J.D.node.body.title || 'Sirv viewer';\n\n                    try {\n                        if ($J.W.node.history.state && $J.W.node.history.state.name === 'Sirv.viewer') {\n                            $J.W.node.history.replaceState(null, title, '');\n                        }\n                        $J.W.node.history.pushState(state, title, urlHash);\n                    } catch (e) {\n                        // empty\n                    }\n                }\n            }\n        }\n\n        setContainerSize() {\n            let result = false;\n            let ss = 0;\n\n            if (this.selectors) {\n                ss = this.selectorsWrapper.getSize()[this.selectors.getShortSide()];\n            }\n\n            const size = this.movingContainer.getSize();\n            const selectors = this.option('thumbnails.position');\n            const isSelectorsContainer = this.option('thumbnails.enable') && this.canShowSelectors(this.slides.length) && ss > 0 && !this.externalContainer;\n\n            if (size.width || size.height) {\n                result = true;\n                if (this.isFullscreen === globalVariables.FULLSCREEN.OPENED) {\n                    this.movingContainer.setCssProp('height', '');\n                    this.slideWrapper.setCssProp('height', '');\n                } else {\n                    if (this.doSetSize && this.heightProportion) {\n                        if (isSelectorsContainer && $J.contains(['left', 'right'], selectors)) { size.width -= ss; }\n                        let height = size.width * (this.heightProportion.height / this.heightProportion.width);\n                        if (height > this.heightProportion.height) { height = this.heightProportion.height; }\n                        // if (isSelectorsContainer && $J.contains(['top', 'bottom'], selectors)) { height += ss; }\n                        // this.movingContainer.setCssProp('height', height + 'px');\n\n                        if (!isSelectorsContainer || $J.contains(['left', 'right'], selectors) && !this.isStandardGrid) {\n                            this.movingContainer.setCssProp('height', height + 'px');\n                        } else {\n                            this.slideWrapper.setCssProp('height', height + 'px');\n                        }\n                    }\n                }\n            }\n\n            return result;\n        }\n\n        findSlideIndex(id) {\n            let result = -1;\n\n            for (let i = 0, l = this.slides.length; i < l; i++) {\n                if (this.slides[i].id && this.slides[i].id === id) {\n                    result = this.slides[i].index;\n                    break;\n                }\n            }\n\n            return result;\n        }\n\n        getCountOfEnabledSlides(isDisabled) {\n            let result = this.enabledIndexesOfSlides.length;\n\n            if (isDisabled) {\n                result = this.slides.length - result;\n            }\n\n            return result;\n        }\n\n        getItems(settings) {\n            /*\n                settings = undefined\n                settings = {\n                    enabled: true|false,\n                    group: 'group'|['group', ...]\n                }\n            */\n\n            let isEnabled = null;\n            let slides = this.slides;\n\n            if (settings) {\n                if ($J.defined(settings.enabled)) {\n                    isEnabled = settings.enabled;\n                }\n\n                if (settings.group) {\n                    slides = this.getSlidesByGroup(settings.group);\n                }\n            }\n\n            const result = [];\n\n            slides.forEach((slide) => {\n                if (isEnabled === true) {\n                    if (slide.isEnabled()) {\n                        result.push(slide.getData());\n                    }\n                } else if (isEnabled === false) {\n                    if (!slide.isEnabled()) {\n                        result.push(slide.getData());\n                    }\n                } else {\n                    result.push(slide.getData());\n                }\n            });\n\n            return result;\n        }\n\n        controlEnabledSlides(indexOfSlide, remove) {\n            if (remove) {\n                this.enabledIndexesOfSlides.splice(this.enabledIndexesOfSlides.indexOf(indexOfSlide), 1);\n            } else {\n                this.enabledIndexesOfSlides.push(indexOfSlide);\n                this.enabledIndexesOfSlides = this.enabledIndexesOfSlides.sort((a, b) => {\n                    let result = 0;\n\n                    if (a < b) {\n                        result = -1;\n                    } else if (a > b) {\n                        result = 1;\n                    }\n\n                    return result;\n                });\n            }\n        }\n\n        disableSlide(indexOfSlide, withoutEvent) {\n            let result = false;\n            let nextSlide = 'next';\n            const l = this.slides.length;\n\n            if ($J.typeOf(indexOfSlide) === 'string') {\n                indexOfSlide = this.findSlideIndex(indexOfSlide);\n            }\n\n            if ($J.typeOf(indexOfSlide) === 'number' && indexOfSlide >= 0 && indexOfSlide < this.slides.length && this.slides[indexOfSlide].isEnabled()) {\n                const slideUUID = this.slides[indexOfSlide].$J_UUID;\n                if (this.effect) {\n                    this.effect.stop();\n                }\n                if (this.slides[indexOfSlide].isActive) {\n                    if (this.index === l - 1 && this.option('loop')) { nextSlide = 0; }\n                    if (!this.jump(nextSlide, 4, true)) {\n                        this.slides[indexOfSlide].beforeHide();\n                        this.slides[indexOfSlide].afterHide();\n                    }\n                }\n                if (this.slides[indexOfSlide].isEnabled()) {\n                    this.controlEnabledSlides(indexOfSlide, true);\n                }\n\n                this.slides[indexOfSlide].disable();\n                this.checkLoop(this.index);\n                if (!this.enabledIndexesOfSlides.length) {\n                    this.index = null;\n                }\n                if (this.selectors) { this.selectors.disableSelector(slideUUID); }\n                if (!withoutEvent) {\n                    this.sendEvent('disableItem', { slide: this.slides[indexOfSlide].getData() });\n                }\n                this.checkSingleSlide();\n                this.showHideArrows();\n                this.showHideSelectors();\n                result = true;\n            }\n\n            return result;\n        }\n\n        enableSlide(slideIndex) {\n            let result = false;\n\n            if ($J.typeOf(slideIndex) === 'string') {\n                slideIndex = this.findSlideIndex(slideIndex);\n            }\n\n            if ($J.typeOf(slideIndex) === 'number' && slideIndex >= 0 && slideIndex < this.slides.length && !this.slides[slideIndex].isEnabled()) {\n                this.slides[slideIndex].startGettingInfo();\n                this.slides[slideIndex].loadThumbnail();\n\n                this.slides[slideIndex].enable();\n                this.slides[slideIndex].resize();\n\n                const lenghtAvailableSlides = this.enabledIndexesOfSlides.filter((index) => {\n                    return this.slides[index].isSlideAvailable();\n                });\n\n                if (!this.enabledIndexesOfSlides.length) {\n                    this.index = slideIndex;\n                }\n\n                if (this.slides[slideIndex].isSlideAvailable() && !lenghtAvailableSlides.length) {\n                    this.index = slideIndex;\n                    this.slides[slideIndex].loadContent();\n                    this.slides[slideIndex].beforeShow();\n                    this.slides[slideIndex].afterShow(globalVariables.SLIDE_SHOWN_BY.ENABLE);\n                }\n\n                this.controlEnabledSlides(slideIndex);\n                this.checkLoop(this.index);\n                if (this.selectors) {\n                    this.selectors.enableSelector(this.slides[slideIndex].getUUID());\n                    if (this.slides[slideIndex].isSlideAvailable()) { this.selectors.setCurrentActiveItemByUUID(this.slides[slideIndex].getUUID()); }\n                }\n                this.sendEvent('enableItem', { slide: this.slides[slideIndex].getData() });\n\n                this.checkSingleSlide();\n                this.showHideArrows();\n                this.showHideSelectors();\n                result = true;\n            }\n\n            return result;\n        }\n\n        getSlidesByGroup(group) {\n            let result = null;\n\n            if (group) {\n                result = [];\n\n                this.slides.forEach((slide) => {\n                    if (slide.belongsTo(group)) {\n                        result.push(slide);\n                    }\n                });\n            }\n\n            return result;\n        }\n\n        enableGroupOfSlides(group) {\n            let result = false;\n\n            const slides = this.getSlidesByGroup(group);\n\n            if (slides && slides.length) {\n                result = true;\n                slides.forEach((slide) => {\n                    this.enableSlide(slide.getIndex());\n                });\n            }\n\n            return result;\n        }\n\n        disableGroupOfSlides(group) {\n            let result = false;\n\n            const slides = this.getSlidesByGroup(group);\n\n            if (slides && slides.length) {\n                result = true;\n                slides.forEach((slide) => {\n                    this.disableSlide(slide.getIndex());\n                });\n            }\n\n            return result;\n        }\n\n        switchGroupOfSlides(group) {\n            let result = false;\n\n            if (group) {\n                const slides = this.getItems({ enabled: true });\n\n                slides.forEach((slide) => {\n                    if (!this.slides[slide.index].belongsTo(group)) {\n                        this.disableSlide(slide.index);\n                    }\n                });\n\n                result = this.enableGroupOfSlides(group);\n            }\n\n            return result;\n        }\n\n        jump(direction, whoUse, fast, cIndex) {\n            let result = false;\n            let effect = this.option('slide.animation.type');\n            let currentIndex = cIndex;\n            const isContains = $J.contains(['next', 'prev'], direction);\n            const l = this.slides.length;\n\n            if (!this.effect || !this.enabledIndexesOfSlides.length || this.index === null) { return result; }\n\n            if (currentIndex === $J.U) {\n                currentIndex = this.index;\n            }\n\n            if (!isContains) {\n                const res = this.findSlideIndex(direction);\n                if (res >= 0) { direction = res; }\n            }\n\n            const index = helper.sliderLib.findIndex(direction, currentIndex, l, this.option('loop'));\n            if (index === null) { return result; }\n\n            if (this.index !== index) {\n                if (!this.slides[index].isEnabled() || !this.slides[index].isSlideAvailable()) {\n                    if (isContains) {\n                        result = this.jump(direction, whoUse, fast, index);\n                    }\n\n                    return result;\n                }\n\n                clearTimeout(this.autoplayTimer);\n                if (!isContains) {\n                    if (index > this.index) {\n                        direction = 'next';\n                    } else {\n                        direction = 'prev';\n                    }\n                }\n\n                this.checkLoop(index);\n\n                if (!effect || fast) { effect = 'blank'; }\n\n                if (this.selectors) {\n                    this.selectors.setActiveItem(index);\n                    this.selectors.jump(index);\n                }\n                this.effect.make({\n                    index: this.index,\n                    node: this.slides[this.index].getNode()\n                }, {\n                    index: index,\n                    node: this.slides[index].getNode(),\n                }, {\n                    effect: effect,\n                    direction: direction\n                }, {\n                    whoUse: whoUse\n                });\n                result = true;\n            } else {\n                this.slides[index].secondSelectorClick();\n            }\n\n            this.index = index;\n            return result;\n        }\n\n        checkLoop(index) {\n            if (this.arrows) {\n                const l = this.enabledIndexesOfSlides.filter((indexSlide) => {\n                    return !this.slides[indexSlide].isSelectorPinned() && this.slides[indexSlide].isSlideAvailable();\n                }).length;\n\n                if (l < 2) {\n                    this.arrows.disable('backward');\n                    this.arrows.disable('forward');\n                } else if (!this.option('loop')) {\n                    const newIndex = this.enabledIndexesOfSlides.indexOf(index);\n                    this.arrows.disable();\n\n                    if (newIndex === 0 || l === 1) {\n                        this.arrows.disable('backward');\n                    }\n\n                    if (newIndex === l - 1 || l === 1) {\n                        this.arrows.disable('forward');\n                    }\n                } else {\n                    this.arrows.disable();\n                }\n            }\n        }\n\n        createFullscreenButton() {\n            if (!this.option(FULLSCREEN + '.enable') || this.fullscreenButton) { return; }\n\n            this.fullscreenButton = $J.$new('div').addClass(CSS_MAIN_CLASS + '-button')\n                                    .addClass(CSS_MAIN_CLASS + '-button-' + FULLSCREEN)\n                                    .addClass(STANDARD_BUTTON_CLASS);\n\n            this.fullscreenButton.append($J.$new('div').addClass(CSS_MAIN_CLASS + '-icon'));\n            this.disableFullscreenButton();\n            this.hideFullscreenButton();\n\n            this.fullscreenButton.addEvent('btnclick tap', (e) => {\n                e.stop();\n                if (this.isFullscreen === globalVariables.FULLSCREEN.CLOSED || this.isFullscreen === globalVariables.FULLSCREEN.OPENED) {\n                    this.disableFullscreenButton();\n                    this.hideFullscreenButton();\n                    if (this.isFullscreen === globalVariables.FULLSCREEN.CLOSED) {\n                        this.enterFullScreen();\n                    } else {\n                        this.exitFullScreen();\n                    }\n                }\n            });\n\n            this.controlsWrapper.append(this.fullscreenButton);\n\n            if (this.slides[this.index].isSlideReady()) {\n                setTimeout(() => {\n                    if (!this.slides[this.index].isVideoSlide() || this.isFullscreenState()) {\n                        this.enableFullscreenButton();\n                        this.visibleFullscreenButton();\n                    }\n                }, 0);\n            }\n        }\n\n        visibleFullscreenButton() {\n            if (this.fullscreenButton) {\n                this.fullscreenButton.removeClass(FULLSCREEN_BUTTON_HIDE_CLASS);\n            }\n        }\n\n        hideFullscreenButton() {\n            if (this.fullscreenButton) {\n                this.fullscreenButton.addClass(FULLSCREEN_BUTTON_HIDE_CLASS);\n            }\n        }\n\n        enableFullscreenButton() {\n            if (this.fullscreenButton) {\n                this.fullscreenButton.removeAttr('disabled');\n            }\n        }\n\n        disableFullscreenButton() {\n            if (this.fullscreenButton) {\n                this.fullscreenButton.attr('disabled', 'disabled');\n            }\n        }\n\n        createEffect() {\n            this.effect = new Effect({\n                time: this.option('slide.animation.duration'),\n                orientation: this.option('orientation')\n            });\n            this.effect.setParent(this);\n\n            this.on('effectStart', (e) => {\n                e.stopAll();\n                this.isMoving = true;\n                this.disableFullscreenButton();\n                if (this.slides[e.indexes[1]].isVideoSlide() && this.isFullscreen !== globalVariables.FULLSCREEN.OPENED) {\n                    this.hideFullscreenButton();\n                }\n\n                this.slides[e.indexes[0]].beforeHide();\n                this.slides[e.indexes[1]].beforeShow();\n                if (e.data.callbackData.whoUse !== 4) {\n                    this.sendEvent('beforeSlideIn', { slide: this.slides[e.indexes[1]].getData() });\n                    this.sendEvent('beforeSlideOut', { slide: this.slides[e.indexes[0]].getData() });\n                }\n            });\n\n            this.on('effectEnd', (e) => {\n                e.stopAll();\n\n                if (!this.slides[e.indexes[1]].isVideoSlide() || this.isFullscreen === globalVariables.FULLSCREEN.OPENED) {\n                    this.enableFullscreenButton();\n                    this.visibleFullscreenButton();\n                }\n\n                this.slides[e.indexes[0]].afterHide();\n                this.slides[e.indexes[1]].afterShow(e.data.callbackData.whoUse);\n                if (e.data.callbackData.whoUse !== 4) {\n                    this.sendEvent('afterSlideIn', { slide: this.slides[e.indexes[1]].getData() });\n                    this.sendEvent('afterSlideOut', { slide: this.slides[e.indexes[0]].getData() });\n                }\n                this.autoplay();\n                this.isMoving = false;\n                this.residualAutoplayTime = this.autoplayDelay;\n            });\n        }\n\n        createArrows() {\n            const option = this.option;\n            if (!option('arrows')) { return; }\n\n            this.arrows = new Arrows({\n                orientation: option('orientation')\n            });\n            this.arrows.hide();\n            this.arrows.setParent(this);\n\n            this.on('arrowAction', (e) => {\n                e.stopAll();\n                // e.data.type === 'next' || 'prev'\n\n                const index = this.getNextIndex(e.data.type, this.index, this.slides.length, this.option('loop'));\n                this.jump(index, 2);\n            });\n\n            this.arrows.getNodes().forEach((node) => {\n                this.controlsWrapper.append(node);\n            });\n        }\n\n        getNextIndex(direction, index, length, loop) {\n            const resultIndex = helper.sliderLib.findIndex(direction, index, length, loop);\n            let result = resultIndex;\n\n            if (resultIndex !== null && resultIndex !== this.index &&\n                (this.slides[resultIndex].isSelectorPinned() || !this.slides[resultIndex].isSlideAvailable() || !this.slides[resultIndex].isEnabled())) {\n                result = this.getNextIndex(direction, resultIndex, length, loop);\n            }\n\n            return result;\n        }\n\n        isHiddenSlides() {\n            return !this.slides.some((slide) => {\n                return !slide.isCustomSelector() || (slide.isCustomSelector() && slide.isSlideAvailable());\n            });\n        }\n\n        createSelectors() {\n            const option = this.option;\n\n            if (!option('thumbnails.enable') && !option('fullscreen.thumbnails.enable')) {\n                this.isSelectorsReady = true;\n                return;\n            }\n\n            this.selectors = new Selectors(this.slides.map(slide => slide.getSelector()), {\n                isStandardGrid: this.isStandardGrid,\n                standardStyle: option('thumbnails.type'),\n                standardSize: option('thumbnails.size'),\n                standardPosition: option('thumbnails.enable') ? option('thumbnails.position') : false,\n                standardWatermark: option('thumbnails.watermark'),\n                isFullscreenGrid: this.isFullscreenGrid,\n                fullscreenStyle: option('fullscreen.thumbnails.type'),\n                fullscreenSize: option('fullscreen.thumbnails.size'),\n                fullscreenPosition: option('fullscreen.thumbnails.enable') ? option('fullscreen.thumbnails.position') : false,\n                fullscreenAutohide: option('fullscreen.thumbnails.autohide'),\n                fullscreenWatermark: option('fullscreen.thumbnails.watermark'),\n                arrows: option('arrows')\n            });\n\n            this.selectors.setParent(this);\n\n            this.on('selectorsReady', (e) => {\n                e.stopAll();\n                this.isSelectorsReady = true;\n                this.postInitialization();\n            });\n\n            this.on('getSelectorProportion', (e) => {\n                e.stopAll();\n\n                const index = this.getSlideByUUID(e.data.UUID);\n\n                if (index !== null) {\n                    const slide = this.slides[index];\n                    if (slide) {\n                        const result = { size: null, isSirv: true };\n                        slide.getSelectorProportion()\n                            .then((data) => {\n                                result.isSirv = slide.isSirvSelector();\n                                result.size = data.size;\n                                e.data.resultingCallback(result);\n                            })\n                            .catch((err) => {\n                                result.isSirv = slide.isSirvSelector();\n                                this.pickOut(err.UUID);\n                                e.data.resultingCallback(result);\n                            });\n                    } else {\n                        e.data.resultingCallback(null);\n                    }\n                } else {\n                    e.data.resultingCallback(null);\n                }\n            });\n\n            this.on('getSelectorImgUrl', (e) => {\n                e.stopAll();\n                const index = this.getSlideByUUID(e.data.UUID);\n\n                if (index !== null) {\n                    const slide = this.slides[index];\n\n                    if (slide) {\n                        slide.getSelectorImgUrl(e.data.type, e.data.size, e.data.crop, e.data.watermark)\n                            .then((result) => {\n                                e.data.resultingCallback({\n                                    src: result.src,\n                                    srcset: result.srcset,\n                                    size: result.size,\n                                    alt: result.alt,\n                                    referrerpolicy: result.referrerpolicy\n                                });\n                            }).catch((err) => {\n                                e.data.resultingCallback(null);\n                            });\n                    } else {\n                        e.data.resultingCallback(null);\n                    }\n                } else {\n                    e.data.resultingCallback(null);\n                }\n            });\n\n            this.on('changeSlide', (e) => {\n                e.stopAll();\n\n                const index = this.getSlideByUUID(e.data.UUID);\n\n                if (index !== null) {\n                    const _tmp = this.option(FULLSCREEN + '.enable') && this.option(FULLSCREEN + '.always');\n                    if (this.slides[index].isCustomSelector()) {\n                        this.sendEvent('thumbnailClick', { slide: this.slides[index].getData() });\n                    }\n\n                    this.jump(index, 2, _tmp);\n\n                    if (_tmp) {\n                        this.enterFullScreen();\n                    }\n                }\n            });\n\n            this.on('visibility', (e) => {\n                e.stop();\n                switch (e.action) {\n                    case 'show':\n                        this.movingContainer.removeClass(CSS_MAIN_CLASS + '-selectors-closed');\n                        break;\n                    case 'hide':\n                        this.movingContainer.addClass(CSS_MAIN_CLASS + '-selectors-closed');\n                        break;\n                    // no default\n                }\n            });\n\n            this.on('selectorsDone', (e) => {\n                e.stopAll();\n\n                if ($J.contains(['left', 'right'], this.selectors.getCurrentStylePosition())) {\n                    this.onResize();\n                }\n            });\n\n            this.selectorsWrapper.append(this.selectors.getNode());\n\n            this.slides.forEach((slide, index) => {\n                if (!slide.isEnabled()) {\n                    this.selectors.disableSelector(slide.getUUID());\n                }\n            });\n\n            this.showHideSelectors(true);\n        }\n\n        findSlide() {\n            let dataSrc = this.instanceNode.attr('data-src');\n\n            if (dataSrc) {\n                let tmp;\n                try {\n                    if (this.viewerFileContent) {\n                        tmp = this.viewerFileContent;\n                    } else {\n                        tmp = dataSrc.split('?')[0];\n                        tmp = tmp.split('.');\n                        tmp = tmp[tmp.length - 1];\n                    }\n                } catch (e) {\n                    // empty\n                }\n\n                let node;\n                if (tmp === 'spin' || helper.isVideo(dataSrc)) {\n                    node = $J.$new('div', { 'data-src': dataSrc });\n                    tmp = globalVariables.SLIDE.TYPES.SPIN;\n                } else {\n                    if ($J.contains([this.instanceNode.attr('data-type'), this.instanceNode.attr('data-effect')], 'zoom')) {\n                        tmp = globalVariables.SLIDE.TYPES.ZOOM;\n                        node = $J.$new('div', { 'data-type': 'zoom', 'data-src': dataSrc });\n                    } else {\n                        tmp = globalVariables.SLIDE.TYPES.IMAGE;\n                        node = $J.$new('img', { 'data-src': dataSrc });\n                    }\n                }\n\n                if (this.viewerFileContent) {\n                    node.store('view-content', tmp);\n                }\n\n                this.instanceNode.append(node);\n            } else {\n                dataSrc = this.instanceNode.attr('data-bg-src');\n                if (dataSrc) {\n                    this.instanceNode.append($J.$new('img', { 'data-src': dataSrc }));\n                }\n            }\n\n            return this.getSlides(true);\n        }\n\n        canPinSlide(node) {\n            const side = Slide.findPinnedSelectorSide(node);\n            const pinnedSlides = this.slides.filter(slide => slide.getPinnedSelectorSide() === side);\n\n            if (pinnedSlides.length < 3) {\n                return true;\n            }\n\n            return false;\n        }\n\n        getSlideByUUID(uuid) {\n            let result = null;\n\n            for (let i = 0, l = this.slides.length; i < l; i++) {\n                const slide = this.slides[i];\n                if (slide.getUUID() === uuid) {\n                    result = i;\n                    break;\n                }\n            }\n\n            return result;\n        }\n\n        pickOut(uuid) {\n            const index = this.getSlideByUUID(uuid);\n            if (index === null) { return; }\n            this.removeSlide(index);\n\n            if (!this.slides.length) {\n                this.emit('destroy', { data: { id: this.id, node: this.instanceNode.node } });\n                return;\n            }\n\n            if (this.slides.length < 2) { // clear selectors class and additional things\n                if (this.option('thumbnails.enable') || this.option('fullscreen.thumbnails.enable')) {\n                    this.changeClasses(this.classes.standard, true);\n                    this.setContainerSize();\n                }\n            }\n\n            if (!this.isToolStarted) {\n                this.searchingOfProportions();\n            }\n\n            this.postInitialization();\n        }\n\n        getSlides(fromFindSlide) {\n            let slides;\n\n            if (fromFindSlide) {\n                slides = $J.$A(this.instanceNode.node.childNodes);\n            } else {\n                slides = $J.$A(this.instanceNode.node.childNodes).filter((slide) => {\n                    let result = false;\n                    this.sliderNodes.push(slide.cloneNode(true));\n\n                    if (slide.tagName && $J.contains(['div', 'img', 'iframe', 'figure', 'video', 'picture', SELECTOR_TAG], $(slide).getTagName())) {\n                        result = true;\n                    }\n\n                    slide.parentNode.removeChild(slide);\n                    return result;\n                });\n\n                slides = slidePinnedFilter(slides);\n            }\n\n            let filteredSlides = slides.map(slide => Slide.parse(slide));\n\n            globalFunctions.viewerFilters.forEach((callback) => {\n                let fs = [].concat(filteredSlides);\n\n                fs = fs.map((s) => {\n                    const r = {};\n\n                    helper.objEach(s, (key, value) => {\n                        if (key === 'type') {\n                            value = globalVariables.SLIDE.NAMES[value];\n                        }\n\n                        helper.createReadOnlyProp(r, key, value);\n                    });\n\n                    return r;\n                });\n\n                const result = callback(this.id, fs);\n\n                if (Array.isArray(result)) {\n                    filteredSlides = result.map((s) => {\n                        let r = s;\n\n                        for (let i = 0, l = filteredSlides.length; i < l; i++) {\n                            if (s.node === filteredSlides[i].node) {\n                                r = filteredSlides.splice(i, 1)[0];\n                                break;\n                            }\n                        }\n\n                        return r;\n                    });\n                }\n            });\n\n            slides = filteredSlides;\n\n            if (!fromFindSlide && !slides.length) {\n                slides = this.findSlide();\n            }\n\n            slides = helper.sortSlidesByOrder(this.option('itemsOrder'), slides);\n\n            return slides;\n        }\n\n        createSlides(slides) {\n            let index = 0;\n\n            slides.forEach((slide) => {\n                if (!Slide.isSirvComponent(slide.node) || Slide.hasComponent(slide.node)) {\n                    slide = $(slide.node);\n                    if (slide.getTagName() === SELECTOR_TAG) {\n                        const div = $J.$new('div');\n                        if (slide.attr('data-id')) {\n                            div.attr('data-id', slide.attr('data-id'));\n                        }\n\n                        if (slide.attr('data-group')) {\n                            div.attr('data-group', slide.attr('data-group'));\n                        }\n                        div.append(slide);\n                        slide = div;\n                    }\n\n                    slide.addClass(CSS_MAIN_CLASS + '-component');\n\n                    const _slide = new Slide(slide.node, index, this.slideOptions);\n                    _slide.setParent(this);\n                    this.slides.push(_slide);\n\n                    if (_slide.isEnabled() && _slide.isSlideAvailable()) {\n                        this.enabledIndexesOfSlides.push(index);\n                    }\n\n                    index += 1;\n                }\n            });\n\n            this.firstSlideAhead = this.enabledIndexesOfSlides.length > MAX_SLIDES_TO_CHANGE_PRELOAD_BEHAVIOR;\n\n            this.enabledIndexesOfSlides.forEach((slideindex, i) => {\n                if (!this.firstSlideAhead || i < MAX_SLIDES_TO_CHANGE_PRELOAD_BEHAVIOR) {\n                    this.slides[slideindex].startGettingInfo();\n                }\n            });\n\n            if (this.index > this.slides.length - 1) { this.index = 0; }\n\n            this.postInitialization();\n        }\n\n        checkSingleSlide() {\n            const isSingle = this.enabledIndexesOfSlides.length === 1;\n\n            this.enabledIndexesOfSlides.forEach((index) => {\n                this.slides[index].single(isSingle);\n            });\n        }\n\n        showHideArrows() {\n            if (this.arrows) {\n                const visibleSlides = this.visibleSlides();\n\n                if (visibleSlides < 2 || this.option(FULLSCREEN + '.always') && !this.isFullscreenState()) {\n                    this.arrows.hide();\n                } else if (visibleSlides > 1 && (!this.option(FULLSCREEN + '.always') || this.isFullscreenState())) {\n                    this.arrows.show();\n                }\n            }\n        }\n\n        canShowSelectors(selectorCount) {\n            const property = this.isFullscreen === globalVariables.FULLSCREEN.OPENED\n                                ? 'fullscreen.thumbnails.always'\n                                : 'thumbnails.always';\n            return this.option(property) || selectorCount > 1;\n        }\n\n        showHideSelectors(force /* container size can be set faster than we can detect selector's visibility */) {\n            if (this.selectors) {\n                if (!this.selectorsDebounce) {\n                    this.selectorsDebounce = helper.debounce(() => {\n                        if (this.selectors) {\n                            const canShow = this.canShowSelectors(this.enabledIndexesOfSlides.length);\n\n                            if (canShow) {\n                                if (!this.selectors.isSelectorsActionEnabled()) {\n                                    this.movingContainer.setCssProp('height', '100%');\n                                    this.selectorsWrapper.removeClass(CSS_MAIN_CLASS + '-hide-selectors');\n                                    this.selectors.enableActions();\n                                    this.onResize();\n                                }\n                            } else {\n                                if (this.selectors.isSelectorsActionEnabled()) {\n                                    this.selectorsWrapper.addClass(CSS_MAIN_CLASS + '-hide-selectors');\n                                    this.selectors.disableActions();\n                                    this.onResize();\n                                }\n                            }\n                        }\n                    }, force ? 0 : 32);\n                }\n\n                this.selectorsDebounce();\n            }\n        }\n\n        getAvailableSlideIndex(startIndex) {\n            if (startIndex === this.slides.length - 1 && !this.slides[startIndex].isSlideAvailable()) {\n                return -1;\n            }\n\n            if (this.slides[startIndex + 1].isSlideAvailable()) {\n                return startIndex + 1;\n            }\n\n            return this.getAvailableSlideIndex(startIndex + 1);\n        }\n\n        addAvailableSlideNode(slide, index) {\n            const slideNode = slide.getNode();\n            const l = this.slides.length;\n\n            if (slide.isSlideAvailable()) {\n                if (l > 1 && index !== l - 1) {\n                    if (this.slides[index + 1].isSlideAvailable()) {\n                        this.slidesContainer.node.insertBefore(slideNode.node, this.slides[index + 1].getNode().node);\n                    } else {\n                        const indexAvailableSlide = this.getAvailableSlideIndex(index);\n                        if (indexAvailableSlide < 0) {\n                            this.slidesContainer.append(slideNode);\n                        } else {\n                            this.slidesContainer.node.insertBefore(slideNode.node, this.slides[indexAvailableSlide].getNode().node);\n                        }\n                    }\n                } else {\n                    this.slidesContainer.append(slideNode);\n                }\n            }\n        }\n\n        sortItems(order) {\n            if (!Array.isArray(order)) {\n                order = this.option('itemsOrder');\n            }\n            if (!order.length) { return; }\n\n            this.slides = helper.sortSlidesByOrder(order, this.slides);\n\n            if (this.selectors) {\n                this.selectors.sortSelectors(this.slides.map((slide) => { return slide.getUUID(); }), order.length);\n            }\n\n            this.slides.forEach((slide, index) => {\n                slide.setNewIndex(index);\n            });\n\n            for (let indexSlide = 0, l = this.slides.length; indexSlide < l; indexSlide++) {\n                if (this.slides[indexSlide].isSlideActive()) {\n                    this.index = this.slides[indexSlide].getIndex();\n                    break;\n                }\n            }\n        }\n\n        insertSlide(indexOfSlide, htmlNodeSlide) {\n            const pinnedNode = htmlNodeSlide.querySelector(SELECTOR_TAG) || htmlNodeSlide;\n\n            if (Slide.findPinnedSelectorSide(pinnedNode) && !this.canPinSlide(pinnedNode)) { return false; }\n\n            if (!$J.defined(indexOfSlide)) {\n                indexOfSlide = this.slides.length + 1;\n            }\n\n            if ($J.typeOf(indexOfSlide) === 'number' && indexOfSlide >= 0 && htmlNodeSlide && (!Slide.isSirvComponent(htmlNodeSlide) || Slide.hasComponent(htmlNodeSlide))) {\n                $(htmlNodeSlide).addClass(CSS_MAIN_CLASS + '-component');\n                if (indexOfSlide > this.slides.length) { indexOfSlide = this.slides.length; }\n\n                clearTimeout(this.timerRemove);\n\n                const slide = new Slide(htmlNodeSlide, indexOfSlide, this.slideOptions, true);\n                slide.setParent(this);\n\n                this.slides.splice(indexOfSlide, 0, slide);\n\n                let nonIndex = this.index === null;\n\n                if (this.index === null) {\n                    if (slide.isEnabled() && slide.isSlideAvailable()) {\n                        // this.index = 0; // TODO check it\n                        this.index = indexOfSlide;\n                    } else {\n                        nonIndex = false;\n                    }\n                } else if (indexOfSlide <= this.index) {\n                    this.index += 1;\n                }\n\n                this.enabledIndexesOfSlides = [];\n                this.slides.forEach((_slide, index) => {\n                    _slide.setNewIndex(index);\n\n                    if (_slide.isEnabled()) {\n                        this.controlEnabledSlides(index);\n                    }\n                });\n\n                this.addAvailableSlideNode(slide, indexOfSlide);\n                /*\n                    new component for slider is needed css\n                */\n                this.addComponentsCSS();\n                slide.appendToDOM();\n                // all elements need to be in dom\n                slide.initVideoPlayer();\n\n                slide.startGettingInfo();\n                slide.loadThumbnail();\n\n                slide.startFullInit(null);\n\n                slide.startTool(this.index === indexOfSlide, this.firstSlideAhead ? false : this.option('slide.preload'), this.firstSlideAhead);\n\n                slide.broadcast('inView', { data: this.isInView });\n\n                if (this.index === indexOfSlide) {\n                    slide.loadContent();\n                    slide.beforeShow();\n                    slide.afterShow(globalVariables.SLIDE_SHOWN_BY.INIT);\n                }\n\n                if (this.isFullscreen === globalVariables.FULLSCREEN.OPENED && !slide.isSirv()) {\n                    slide.broadcast('before' + _FULLSCREEN + 'In', { data: { pseudo: this.isPseudo } });\n                    slide.broadcast('after' + _FULLSCREEN + 'In', { data: { pseudo: this.isPseudo } });\n                }\n\n                this.checkLoop(this.index);\n\n                if (this.selectors) {\n                    this.selectors.insertSelector(indexOfSlide, slide.getSelector());\n\n                    if (nonIndex) {\n                        this.selectors.setActiveItem(this.index);\n                    }\n                }\n\n                this.checkSingleSlide();\n                this.showHideSelectors();\n                this.showHideArrows();\n                return true;\n            }\n\n            return false;\n        }\n\n        removeSlide(indexOfSlide) {\n            let flag = false;\n\n            if ($J.typeOf(indexOfSlide) === 'string') {\n                indexOfSlide = this.findSlideIndex(indexOfSlide);\n            }\n\n            if ($J.typeOf(indexOfSlide) === 'number' && indexOfSlide >= 0 && indexOfSlide < this.slides.length) {\n                const slideUUID = this.slides[indexOfSlide].$J_UUID;\n                if (this.slides[indexOfSlide].isEnabled()) {\n                    this.disableSlide(indexOfSlide, true);\n                } else {\n                    flag = true;\n                }\n                this.slides[indexOfSlide].destroy();\n                this.slides.splice(indexOfSlide, 1);\n                this.enabledIndexesOfSlides = [];\n                this.slides.forEach((slide, index) => {\n                    slide.setNewIndex(index);\n\n                    if (slide.isEnabled()) {\n                        this.controlEnabledSlides(index);\n                    }\n                });\n\n                if (this.selectors) {\n                    this.selectors.pickOut(slideUUID);\n                }\n\n                if (this.index !== null && indexOfSlide <= this.index && this.index !== 0) { this.index -= 1; }\n\n                if (flag) {\n                    this.checkSingleSlide();\n                }\n\n                if (this.isHiddenSlides()) {\n                    this.timerRemove = setTimeout(() => {\n                        if (this.instanceNode) {\n                            this.emit('destroy', { data: { id: this.id, node: this.instanceNode.node } });\n                        }\n                    }, 100);\n                }\n\n                return true;\n            }\n\n            return false;\n        }\n\n        createContextMenu() {\n            const option = this.option;\n            const contextmenuData = $([]);\n\n            if (option('contextmenu.enable')) {\n                if (option('contextmenu.text.zoom.in') || option('contextmenu.text.zoom.out')) {\n                    if (option('contextmenu.text.zoom.in')) {\n                        contextmenuData.push({\n                            id: 'zoomin',\n                            label: option('contextmenu.text.zoom.in'),\n                            hidden: false,\n                            action: (e) => { this.slides[this.index].zoomIn(e.left, e.top); }\n                        });\n                    }\n\n                    if (option('contextmenu.text.zoom.out')) {\n                        contextmenuData.push({\n                            id: 'zoomout',\n                            label: option('contextmenu.text.zoom.out'),\n                            disabled: true,\n                            hidden: false,\n                            action: (e) => { this.slides[this.index].zoomOut(e.left, e.top); }\n                        });\n                    }\n                }\n\n                if (option(FULLSCREEN + '.enable') && (option('contextmenu.text.' + FULLSCREEN + '.enter') || option('contextmenu.text.' + FULLSCREEN + '.exit'))) {\n                    if (option('contextmenu.text.' + FULLSCREEN + '.enter')) {\n                        // isExist\n                        contextmenuData.push({\n                            id: 'enter' + FULLSCREEN,\n                            label: option('contextmenu.text.' + FULLSCREEN + '.enter'),\n                            hidden: !option(FULLSCREEN + '.enable'),\n                            action: () => { this.enterFullScreen(); }\n                        });\n                    }\n\n                    if (option('contextmenu.text.' + FULLSCREEN + '.exit')) {\n                        contextmenuData.push({\n                            id: 'exit' + FULLSCREEN,\n                            label: option('contextmenu.text.' + FULLSCREEN + '.exit'),\n                            hidden: true,\n                            action: () => { this.exitFullScreen(); }\n                        });\n                    }\n                }\n\n                if (option('contextmenu.text.download')) {\n                    if (contextmenuData.length) {\n                        contextmenuData.push({\n                            id: 'sirv-separator',\n                            hidden: false,\n                            separator: true\n                        });\n                    }\n                    contextmenuData.push({\n                        id: 'download',\n                        label: option('contextmenu.text.download'),\n                        action: () => {\n                            let dlw;\n                            const url = this.slides[this.index].getOriginImageUrl();\n                            if (url) {\n                                dlw = $J.$new('iframe').setCss({ width: 0, height: 0, display: 'none' }).appendTo($J.D.node.body);\n                                dlw.node.src = url + '?format=original&dl';\n                            }\n                        }\n                    });\n                }\n\n                this.movingContainer.addEvent('contextmenu', (e) => {\n                    let magnify;\n                    let canShow = false;\n                    let zoomData;\n                    let dl = true;\n                    let zoomMenu = false;\n                    let fullscreenMenu = false;\n                    let downloadMenu = false;\n                    const zoomin = 'zoomin';\n                    const zoomout = 'zoomout';\n                    const enterfullscreen = 'enter' + FULLSCREEN;\n                    const exitfullscreen = 'exit' + FULLSCREEN;\n\n                    e.stopDefaults();\n\n                    if (this.contextMenu && !this.isMoving && this.enabledIndexesOfSlides.length) {\n                        const item = this.slides[this.index];\n                        const typeOfSlide = item.getTypeOfSlide();\n                        const t = globalVariables.SLIDE.TYPES;\n\n                        if (this.isReady && item.isReady && item.isSirv() && typeOfSlide) {\n                            const opts = item.getOptions();\n\n                            switch (typeOfSlide) {\n                                case t.SPIN:\n                                    magnify = true;\n                                    break;\n                                case t.ZOOM:\n                                    magnify = opts.mode === 'deep';\n                                    break;\n                                case t.IMAGE:\n                                    break;\n                                case t.VIDEO:\n                                    dl = false;\n                                    break;\n                                // no default\n                            }\n\n                            if (magnify && this.slides[this.index].isZoomSizeExist() && (option('contextmenu.text.zoom.in') || option('contextmenu.text.zoom.out'))) {\n                                zoomData = this.slides[this.index].getZoomData();\n                                this.contextMenu.showItem(zoomin);\n                                if (zoomData.isZoomed && zoomData.zoom === 1) {\n                                    this.contextMenu.disableItem(zoomin);\n                                } else {\n                                    this.contextMenu.enableItem(zoomin);\n                                }\n                                this.contextMenu.showItem(zoomout);\n                                // if (!zoomData.isZoomed || zoomData.zoom === 0) {\n                                if (!zoomData.isZoomed) {\n                                    this.contextMenu.disableItem(zoomout);\n                                } else {\n                                    this.contextMenu.enableItem(zoomout);\n                                }\n                                zoomMenu = true;\n                            } else {\n                                this.contextMenu.hideItem(zoomin);\n                                this.contextMenu.hideItem(zoomout);\n                            }\n\n                            if (option(FULLSCREEN + '.enable')) {\n                                if (this.isFullscreenState()) {\n                                    this.contextMenu.hideItem(enterfullscreen);\n                                    if (this.contextMenu.isExist(exitfullscreen)) {\n                                        this.contextMenu.showItem(exitfullscreen);\n                                        if (zoomData && zoomData.isZoomed) {\n                                            this.contextMenu.disableItem(exitfullscreen);\n                                        } else {\n                                            this.contextMenu.enableItem(exitfullscreen);\n                                        }\n                                        fullscreenMenu = true;\n                                    }\n                                } else {\n                                    if (this.contextMenu.isExist(enterfullscreen)) {\n                                        this.contextMenu.showItem(enterfullscreen);\n                                        if (zoomData && zoomData.isZoomed) {\n                                            this.contextMenu.disableItem(enterfullscreen);\n                                        } else {\n                                            this.contextMenu.enableItem(enterfullscreen);\n                                        }\n                                        fullscreenMenu = true;\n                                    }\n                                    this.contextMenu.hideItem(exitfullscreen);\n                                }\n                            }\n\n                            if (this.contextMenu.isExist('download') && dl) {\n                                this.contextMenu.showItem('download');\n                                downloadMenu = true;\n                            } else {\n                                this.contextMenu.hideItem('download');\n                            }\n\n                            if (zoomMenu || fullscreenMenu || downloadMenu) {\n                                if ((zoomMenu || fullscreenMenu) && downloadMenu && typeOfSlide !== t.VIDEO) {\n                                    this.contextMenu.showItem('sirv-separator');\n                                } else {\n                                    this.contextMenu.hideItem('sirv-separator');\n                                }\n\n                                canShow = true;\n                                this.broadcast('stopContext');\n                            }\n                        }\n\n                        this.contextMenu.setCanShow(canShow);\n                    }\n                });\n\n                if (contextmenuData.length && !$J.browser.mobile) {\n                    this.contextMenu = new ContextMenu(this.movingContainer, contextmenuData, 'sirv');\n                    if (option('fullscreen.enable')) {\n                        this.contextMenu.setFullScreenBox(this.fullScreenBox);\n                    }\n                }\n            } else {\n                this.movingContainer.addEvent('contextmenu', (e) => { e.stop(); });\n            }\n        }\n\n        enterFullScreen() {\n            if (this.isFullscreen !== globalVariables.FULLSCREEN.CLOSED) {\n                return false;\n            }\n\n            this.addHistory();\n\n            this.isFullscreen = globalVariables.FULLSCREEN.OPENING;\n            this.fullscreenStartTime = +new Date();\n\n            const isPseudo = !this.option('fullscreen.native') || !$J.browser.fullScreen.capable || !$J.browser.fullScreen.enabled();\n\n            if (iPhoneSafariViewportRuler) {\n                iPhoneSafariViewportRuler.appendTo($J.D.node.body);\n            }\n\n            this.disableFullscreenButton();\n            this.hideFullscreenButton();\n\n            if (this.selectors) {\n                this.setClasses();\n                if (this.option('fullscreen.thumbnails.enable')) {\n                    this.appendSelectors();\n                }\n                this.selectors.beforeEnterFullscreen();\n            }\n\n            this.slideWrapper.removeClass(globalVariables.CSS_CURSOR_FULSCREEN_ALWAYS);\n\n            this.fullScreenBox.setCss({\n                position: 'fixed',\n                top: 0,\n                left: 0,\n                width: '100%',\n                height: '100%',\n                overflow: 'hidden',\n                zIndex: 99999999999\n            });\n\n            this.boxSize = this.instanceNode.getSize();\n            this.boxBoundaries = this.instanceNode.getRect();\n\n            this.fullScreenBox.append(this.movingContainer);\n            $($J.D.node.body).append(this.fullScreenBox);\n            this.movingContainer.setCssProp('height', '100%');\n\n            this.broadcast('before' + _FULLSCREEN + 'In', { data: { pseudo: isPseudo } });\n            this.slideWrapper.setCssProp('height', '');\n\n            if (ProductDetail && this.productDetail) {\n                this.productDetail.open();\n            }\n\n            $J.browser.fullScreen.request(this.fullScreenBox, {\n                windowFullscreen: !this.option('fullscreen.native'),\n                onEnter: this.onEnteredFullScreen.bind(this),\n                // onExit: this.onExitFullScreen.bind(this),\n                onExit: () => {\n                    if ($J.contains([globalVariables.FULLSCREEN.CLOSED, globalVariables.FULLSCREEN.OPENING], this.isFullscreen)) { return; }\n                    this.isFullscreen = globalVariables.FULLSCREEN.CLOSING;\n                    this._beforeExitFullscreen();\n                    this.broadcast('before' + _FULLSCREEN + 'Out', { data: { pseudo: false } });\n                    this.onExitFullScreen();\n                },\n                fallback: () => {\n                    const rootTag = $J.D.node.getElementsByTagName('html')[0];\n                    $(rootTag).addClass(PSEUDO_FULLSCREEN_CLASS);\n                    $(document.body).getSize();\n                    setTimeout(() => this.onEnteredFullScreen(true), 64);\n\n                    // const fullSize = $J.D.getSize();\n                    // const scrolls = $J.W.getScroll();\n                    // // const docFullSize = $($J.D).getFullSize();\n                    // const rootTag = $J.D.node.getElementsByTagName('html')[0];\n                    // $(rootTag).addClass(PSEUDO_FULLSCREEN_CLASS);\n                    // let top = 0 + scrolls.y;\n\n                    // // Properly handle iPhone Safari (>10) address bar, bookmark bar and status bar\n                    // // if (isHandset && $J.browser.platform === 'ios' && $J.browser.uaName === 'safari' && parseInt($J.browser.uaVersion, 10) > 10) {\n                    // if (iPhoneSafariViewportRuler) {\n                    //     top = Math.abs(iPhoneSafariViewportRuler.node.getBoundingClientRect().top);\n                    //     // this.expandBox.setCss({ height: window.innerHeight, maxHeight: '100vh', top: Math.abs(iPhoneSafariViewportRuler,node.getBoundingClientRect().top) });\n                    // }\n\n                    // if (!this.fullScreenFX) {\n                    //     this.fullScreenFX = new $J.FX(this.fullScreenBox, {\n                    //         duration: 1,\n                    //         transition: $J.FX.getTransition().expoOut,\n                    //         onStart: () => {\n                    //             this.fullScreenBox.setCss({\n                    //                 width: this.boxSize.width,\n                    //                 height: this.boxSize.height,\n                    //                 top: this.boxBoundaries.top,\n                    //                 left: this.boxBoundaries.left\n                    //             }).appendTo($J.D.node.body);\n                    //         },\n\n                    //         onAfterRender: () => {},\n                    //         onComplete: () => {\n                    //             this.onEnteredFullScreen(true);\n                    //             this.fullScreenFX = null;\n                    //         }\n                    //     });\n                    // }\n\n                    // this.fullScreenFX.start({\n                    //     width:  [this.boxSize.width, fullSize.width],\n                    //     height: [this.boxSize.height, fullSize.height],\n                    //     // top:    [this.boxBoundaries.top, 0 + scrolls.y],\n                    //     top:    [this.boxBoundaries.top, top],\n                    //     left:   [this.boxBoundaries.left, 0 + scrolls.x],\n                    //     opacity: [0, 1]\n                    // });\n                }\n            });\n\n            return true;\n        }\n\n        onEnteredFullScreen(pseudo) {\n            if (this.isFullscreen !== globalVariables.FULLSCREEN.OPENING) { return; }\n            this.isPseudo = pseudo; // the variable is necessary for custom inserting slide\n\n            if (pseudo && this.isFullscreen === globalVariables.FULLSCREEN.OPENING) {\n                this.fullScreenBox.setCss({\n                    top: iPhoneSafariViewportRuler ? Math.abs(iPhoneSafariViewportRuler.node.getBoundingClientRect().top) : 0,\n                    left: 0,\n                    right: 0,\n                    bottom: 0,\n                    width: 'auto',\n                    height: iPhoneSafariViewportRuler ? $J.W.node.innerHeight : 'auto',\n                    display: this.productDetail ? 'flex' : 'block',\n                    position: 'fixed'\n                });\n\n                // if (iPhoneSafariViewportRuler) {\n                //     this.fullScreenBox.setCss({ height: $J.W.node.innerHeight, top: Math.abs(iPhoneSafariViewportRuler.node.getBoundingClientRect().top) });\n                // }\n\n                $J.D.addEvent('keydown', this.pseudoFSEvent);\n            }\n\n            this.isFullscreen = globalVariables.FULLSCREEN.OPENED;\n\n            if (this.fullscreenButton) {\n                this.fullscreenButton.removeClass(STANDARD_BUTTON_CLASS);\n                this.fullscreenButton.addClass(FULLSCREEN_BUTTON_CLASS);\n                if (!this.slides[this.index] || !this.slides[this.index].isVideoSlide() || this.isFullscreen === globalVariables.FULLSCREEN.OPENED) {\n                    setTimeout(() => {\n                        this.enableFullscreenButton();\n                        this.visibleFullscreenButton();\n                    }, 1);\n                }\n            }\n\n            if (this.selectors) {\n                this.selectors.afterEnterFullscreen();\n            }\n\n            if (this.slides.length > 1) {\n                $J.D.addEvent('keyup', this.keyBoardArrowsCallback);\n            }\n\n            this.showHideArrows();\n            this.showHideSelectors();\n\n            this.broadcast('after' + _FULLSCREEN + 'In', { data: { pseudo: pseudo } });\n            this.onResize();\n\n            let eventData = {};\n\n            if (this.enabledIndexesOfSlides.length) {\n                eventData = { slide: this.slides[this.index].getData() };\n            }\n            this.sendEvent(FULLSCREEN + 'In', eventData);\n        }\n\n        _beforeExitFullscreen() {\n            this.disableFullscreenButton();\n            this.hideFullscreenButton();\n\n            if (this.option(FULLSCREEN + '.always')) {\n                this.slideWrapper.addClass(globalVariables.CSS_CURSOR_FULSCREEN_ALWAYS);\n            }\n\n            if (this.selectors) {\n                if (this.option('fullscreen.thumbnails.enable')) {\n                    this.appendSelectors();\n                }\n                this.setClasses();\n                this.selectors.beforeExitFullscreen();\n            }\n\n            if (ProductDetail && this.productDetail) {\n                this.productDetail.close();\n            }\n        }\n\n        exitFullScreen() {\n            if (this.isFullscreen !== globalVariables.FULLSCREEN.OPENED) { return false; }\n            this.isFullscreen = globalVariables.FULLSCREEN.CLOSING;\n\n            this._beforeExitFullscreen();\n\n            if (iPhoneSafariViewportRuler) {\n                iPhoneSafariViewportRuler.remove();\n            }\n\n            if ($J.browser.fullScreen.capable && $J.browser.fullScreen.enabled() && this.option('fullscreen.native')) {\n                this.broadcast('before' + _FULLSCREEN + 'Out', { data: { pseudo: false } });\n                $J.browser.fullScreen.cancel.call(document);\n            } else {\n                const rootTag = $J.D.node.getElementsByTagName('html')[0];\n                $(rootTag).removeClass(PSEUDO_FULLSCREEN_CLASS);\n                this.broadcast('before' + _FULLSCREEN + 'Out', { data: { pseudo: true } });\n                this.onExitFullScreen(true);\n\n                // const fullSize = this.fullScreenBox.getSize();\n                // const fsBoxBoundaries = this.fullScreenBox.getRect();\n                // const rootTag = $J.D.node.getElementsByTagName('html')[0];\n                // $(rootTag).removeClass(PSEUDO_FULLSCREEN_CLASS);\n\n                // this.broadcast('before' + _FULLSCREEN + 'Out', { data: { pseudo: true } });\n\n                // if (!this.fullScreenExitFX) {\n                //     this.fullScreenExitFX = new $J.FX(this.fullScreenBox, {\n                //         duration: 1,\n                //         transition: $J.FX.getTransition().expoOut,\n                //         onStart: () => {\n                //             $($J.D).removeEvent('keydown', this.pseudoFSEvent);\n                //             this.fullScreenBox.setCss({ position: 'absolute' });\n                //         },\n\n                //         onAfterRender: () => {},\n                //         onComplete: () => {\n                //             this.onExitFullScreen(true);\n                //             this.fullScreenExitFX = null;\n                //         }\n                //     });\n                // }\n\n                // this.fullScreenExitFX.start({\n                //     width:  [fullSize.width, this.boxSize.width],\n                //     height: [fullSize.height, this.boxSize.height],\n                //     top:    [0 + fsBoxBoundaries.top, this.boxBoundaries.top],\n                //     left:   [0 + fsBoxBoundaries.left, this.boxBoundaries.left],\n                //     opacity: [1, 0.5]\n                // });\n            }\n\n            return true;\n        }\n\n        onExitFullScreen(pseudo) {\n            if ($J.contains([globalVariables.FULLSCREEN.CLOSED, globalVariables.FULLSCREEN.OPENING], this.isFullscreen)) { return; }\n\n            $J.D.removeEvent('keyup', this.keyBoardArrowsCallback);\n\n            this.showHideArrows();\n            this.showHideSelectors();\n\n            this.instanceNode.append(this.movingContainer);\n            this.fullScreenBox.remove();\n\n            if (this.fullscreenButton) {\n                this.fullscreenButton.removeClass(FULLSCREEN_BUTTON_CLASS);\n                this.fullscreenButton.addClass(STANDARD_BUTTON_CLASS);\n                if (!this.slides[this.index] || !this.slides[this.index].isVideoSlide() || this.isFullscreen === globalVariables.FULLSCREEN.OPENED) {\n                    setTimeout(() => {\n                        this.enableFullscreenButton();\n                        this.visibleFullscreenButton();\n                    }, 1);\n                }\n            }\n\n            if (this.doHistory) {\n                // If close initiated not by the Back button\n                const urlHash = '#sirv-viewer-' + this.fullscreenViewId;\n                try {\n                    if ($J.W.node.location.hash === urlHash) {\n                        $J.W.node.history.back();\n                    }\n                } catch (e) {\n                    // empty\n                }\n            }\n\n            this.isFullscreen = globalVariables.FULLSCREEN.CLOSED;\n            this.isPseudo = false;\n\n            if (this.selectors) {\n                this.selectors.afterExitFullscreen();\n            }\n\n            /*\n                this.setContainerSize(); - it must be under this.isFullscreen = globalVariables.FULLSCREEN.CLOSED; and this.selectors.afterExitFullscreen();\n                because after exit from fullscreen with this options:\n                {\n                    thumbnails: {\n                        enable: true,\n                        position: 'bottom'\n                    },\n\n                    fullscreen: {\n                        thumbnails: {\n                            enable: false\n                        },\n                    }\n                }\n                slider container is got wrong size\n            */\n            this.setContainerSize();\n\n            // this.sendStats(FULLSCREEN + 'Close', { duration: +new Date() - this.fullscreenStartTime });\n            this.fullscreenStartTime = null;\n\n            this.broadcast('after' + _FULLSCREEN + 'Out', { data: { pseudo: pseudo } });\n\n            let eventData = {};\n\n            if (this.enabledIndexesOfSlides.length) {\n                eventData = { slide: this.slides[this.index].getData() };\n            }\n            this.sendEvent(FULLSCREEN + 'Out', eventData);\n            this.onResize();\n        }\n\n        getSlide(index) {\n            if (index === null || ($J.typeOf(index) === 'number' && index >= this.slides.length)) {\n                index = this.index;\n            }\n\n            if ($J.typeOf(index) === 'string') {\n                index = this.findSlideIndex(index);\n            }\n\n            return this.slides[index]?.getData();\n        }\n\n        onResizeWithoutSelectors() {\n            if (!this.destroyed) {\n                // Properly handle address bar and status bar on iPhone\n                // if (isHandset && $J.browser.platform === 'ios' && $J.browser.uaName === 'safari' && parseInt($J.browser.uaVersion, 10) > 10) {\n                if (iPhoneSafariViewportRuler && this.isFullscreen === globalVariables.FULLSCREEN.OPENED) {\n                    // this.fullScreenBox.setCss({ top: Math.abs(iPhoneSafariViewportRuler.node.getBoundingClientRect().top) });\n                    this.fullScreenBox.setCss({ height: $J.W.node.innerHeight, top: Math.abs(iPhoneSafariViewportRuler.node.getBoundingClientRect().top) });\n                }\n\n                this.setRootMargin();\n                this.setContainerSize();\n                this.slides.forEach((slide) => { slide.resize(); });\n            }\n        }\n\n        onResize() {\n            if (this.destroyed) { return; }\n            // this.setContainerSize();\n            if (this.selectors) { this.selectors.onResize(); }\n            this.onResizeDebounce();\n        }\n\n        play(delay) {\n            let result = false;\n            let currentDelay = this.option('slide.delay');\n\n            if ($J.defined(delay) && $J.typeOf(delay) === 'number' && delay > 9 /* 9 is min delay */) {\n                currentDelay = delay;\n            }\n\n            if (this.autoplayTimer === null && !this.isAutoplay || currentDelay !== this.autoplayDelay) {\n                this.autoplayDelay = currentDelay;\n                this.isAutoplay = true;\n                this.residualAutoplayTime = this.autoplayDelay;\n                this.autoplay();\n                result = true;\n            }\n\n            return result;\n        }\n\n        pause() {\n            const result = this.autoplayTimer;\n            this.isAutoplay = false;\n            clearTimeout(this.autoplayTimer);\n            this.autoplayTimer = null;\n            this.residualAutoplayTime = this.autoplayDelay;\n            return result === null;\n        }\n\n        pauseAutoplay() {\n            clearTimeout(this.autoplayTimer);\n            this.autoplayTimer = null;\n\n            this.residualAutoplayTime -= ($J.now() - this.currentAutoplayTime);\n        }\n\n        autoplay() {\n            if (this.isAutoplay) {\n                this.currentAutoplayTime = $J.now();\n\n                let delay = this.autoplayDelay;\n\n                if (this.residualAutoplayTime !== delay) {\n                    if (this.residualAutoplayTime < MIN_AUTOPLAY) {\n                        delay = MIN_AUTOPLAY;\n                    } else {\n                        delay = this.residualAutoplayTime;\n                    }\n                }\n\n                clearTimeout(this.autoplayTimer);\n                this.autoplayTimer = setTimeout(() => {\n                    if (!this.destroyed) {\n                        this.jump('next', globalVariables.SLIDE_SHOWN_BY.AUTOPLAY);\n                    }\n                }, delay);\n            }\n        }\n\n        destroy() {\n            this.destroyed = true;\n            this.onResizeDebounce.cancel();\n            this.onResizeDebounce = null;\n\n            clearTimeout(this.autoplayTimer);\n            this.autoplayTimer = null;\n\n            if (this.selectorsDebounce) {\n                this.selectorsDebounce.cancel();\n                this.selectorsDebounce = null;\n            }\n\n            $($J.W).removeEvent('resize', this.onResizeHandler);\n            this.onResizeHandler = null;\n\n            $($J.D).removeEvent('keyup', this.keyBoardArrowsCallback);\n\n            if (this.inViewModule) {\n                this.inViewModule.disconnect();\n                this.inViewModule = null;\n            }\n\n            if (this.doHistory) {\n                $($J.W).removeEvent('popstate', this.onHistoryStateChange);\n                globalVariables.FULLSCREEN_VIEWERS_IDs_ARRAY.splice(globalVariables.FULLSCREEN_VIEWERS_IDs_ARRAY.indexOf(this.fullscreenViewId), 1);\n            }\n\n            this.movingContainer.removeEvent('mouseout');\n            this.slideWrapper.removeClass(globalVariables.CSS_CURSOR_FULSCREEN_ALWAYS);\n\n            if (this.clearingTouchdragFunction) {\n                this.clearingTouchdragFunction();\n            }\n            this.slidesContainer.removeEvent('touchdrag');\n\n            if (isCustomId(this.id)) {\n                this.instanceNode.removeAttr('id');\n            }\n\n            if (this.contextMenu) {\n                this.movingContainer.removeEvent('contextmenu');\n                this.contextMenu.destroy();\n                this.contextMenu = null;\n            }\n\n            if (this.productDetail) {\n                this.productDetail.destroy();\n                this.productDetail = null;\n            }\n\n            if (this.fullscreenButton) {\n                this.fullscreenButton.removeEvent('btnclick tap');\n                this.fullscreenButton.remove();\n            }\n            this.fullscreenButton = null;\n\n            if (this.effect) {\n                this.effect.destroy();\n                this.effect = null;\n                this.on('effectStart');\n                this.on('effectEnd');\n            }\n\n            if (this.arrows) {\n                this.arrows.destroy();\n                this.arrows = null;\n                this.off('arrowAction');\n            }\n\n            if (this.selectors) {\n                this.selectors.destroy();\n                this.selectors = null;\n                this.off('visibility');\n                this.off('changeSlide');\n                this.off('selectorsReady');\n                this.off('getSelectorImgUrl');\n                this.off('selectorsDone');\n                this.off('getSelectorProportion');\n            }\n\n            this.off('componentEvent');\n            this.off('goTo' + _FULLSCREEN);\n            this.off('goTo' + _FULLSCREEN + 'Out');\n            this.off('infoReady');\n            this.off('slideVideoPlay');\n            this.off('slideVideoPause');\n            this.off('slideVideoEnd');\n\n            this.slides.forEach((slide) => {\n                const node = slide.getOriginNode();\n                $(node).removeClass(CSS_MAIN_CLASS + '-component');\n                slide.destroy();\n            });\n            this.slides = [];\n\n            this.off('stats');\n\n            this.sliderNodes.forEach(node => this.instanceNode.append(node));\n            this.sliderNodes = [];\n\n            $($J.D).removeEvent('keydown', this.pseudoFSEvent);\n            this.pseudoFSEvent = null;\n            $($J.D).removeEvent('keyup', this.keyBoardArrowsCallback);\n            this.keyBoardArrowsCallback = null;\n\n            this.fullScreenBox.remove();\n            this.fullScreenBox = null;\n            this.controlsWrapper.remove();\n            this.controlsWrapper = null;\n            this.slidesContainer.remove();\n            this.slidesContainer = null;\n            this.selectorsWrapper.remove();\n            this.selectorsWrapper = null;\n            this.slideWrapper.remove();\n            this.slideWrapper = null;\n            this.movingContainer.remove();\n            this.movingContainer = null;\n            this.isReady = false;\n            this.doSetSize = false;\n            this.instanceNode = null;\n            this.externalContainer = null;\n            super.destroy();\n        }\n    }\n\n    return Slider;\n})();\n\n/* eslint-env es6 */\n/* global defaultOptions, SirvSlider, helper, EventEmitter, $, $J, globalFunctions, SliderBuilder, Promise, SELECTOR_TAG */\n/* eslint-disable dot-notation */\n/* eslint-disable no-use-before-define */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\", \"varsIgnorePattern\": \"Slider\" }] */\n\n\nconst Slider = (() => {\n    const checkArgument = (value) => {\n        if ($J.typeOf(value) !== 'number' && $J.typeOf(value) !== 'string') {\n            value = null;\n        }\n\n        return value;\n    };\n\n    const clearPrivateOptions = (obj) => {\n        helper.objEach(obj, (key, value) => {\n            value = $(value.split(';'));\n\n            if (value.length) {\n                if (value[value.length - 1] === '') { value.splice(value.length - 1, 1); }\n\n                value = value.map((_value) => {\n                    return _value.replace(new RegExp('^' + key + '\\\\.'), '');\n                });\n\n                obj[key] = value.join(';');\n            }\n        });\n\n        return obj;\n    };\n\n    const getOptions = (source, opt) => {\n        const optType = $J.typeOf(opt);\n        let value;\n        let result = null;\n\n        if (optType === 'string') {\n            result = source[opt];\n        } else if (optType === 'array') {\n            value = opt.shift();\n            if (source[value]) {\n                if (opt.length) {\n                    result = getOptions(source[value], opt);\n                } else {\n                    result = source[value];\n                }\n            }\n        }\n\n        return result;\n    };\n\n    const getOptionsByType = (options, oType, def) => {\n        return {\n            common: getOptions(options.common, oType) || def,\n            mobile: getOptions(options.mobile, oType) || def\n        };\n    };\n\n    const removeProperties = (obj) => {\n        const rm = (_obj) => {\n            ['spin', 'zoom', 'image', 'video'].forEach((v) => {\n                if (_obj[v]) {\n                    delete _obj[v];\n                }\n            });\n        };\n\n        rm(obj.common);\n        rm(obj.mobile);\n    };\n\n    class Slider_ extends EventEmitter {\n        constructor(node, options, force, lazyInit) {\n            super();\n\n            this.node = node;\n            this.slider = null;\n            this.lazyInit = lazyInit;\n\n            this.options = {};\n            this.spinOptions = {};\n            this.zoomOptions = {};\n            this.imageOptions = {};\n            this.videoOptions = {};\n\n            this.sliderBuilder = new SliderBuilder(options, this.node);\n\n            this.parseOptions(options);\n\n            this.privateOptions = { common: {}, mobile: {} };\n\n            this.toolOptions = null;\n            this.inViewTimer = null;\n            this.isRun = false;\n\n            this.api = {\n                isReady: this.isReady.bind(this),\n                // start: this.start.bind(this),\n                // stop: this.stop.bind(this),\n                items: this.items.bind(this),\n                disableItem: this.disableItem.bind(this),\n                enableItem: this.enableItem.bind(this),\n                enableGroup: this.enableGroup.bind(this),\n                disableGroup: this.disableGroup.bind(this),\n                switchGroup: this.switchGroup.bind(this),\n                insertItem: this.insertItem.bind(this),\n                removeItem: this.removeItem.bind(this),\n                removeAllItems: this.removeAllItems.bind(this),\n                jump: this.jump.bind(this),\n                itemsCount: this.itemsCount.bind(this),\n                next: this.next.bind(this),\n                prev: this.prev.bind(this),\n                isFullscreen: this.isFullscreen.bind(this),\n                fullscreen: this.fullscreen.bind(this),\n                child: this.child.bind(this),\n                play: this.play.bind(this),\n                pause: this.pause.bind(this),\n                sortItems: this.sortItems.bind(this)\n            };\n\n            this.on('viewerPublicEvent', (e) => {\n                $J.extend(e.data.slider, this.api);\n\n                if (e.data.slide) {\n                    e.data.slide.parent = () => { return this.api; };\n                    if (e.data.slide[e.data.slide.component]) {\n                        e.data.slide[e.data.slide.component].parent = () => { return e.data.slide; };\n                    }\n                }\n            });\n\n            this.makeOptions();\n\n            const as = this.toolOptions.get('autostart');\n\n            if (as && as !== 'off' || force) {\n                this.run();\n            }\n        }\n\n        parseOptions(options) {\n            const viewer = 'viewer';\n            const spin = 'spin';\n            const zoom = 'zoom';\n            const image = 'image';\n            const video = 'video';\n            const common = options.common;\n            const mobile = options.mobile;\n\n            this.options = getOptionsByType(options, viewer, {});\n\n            this.spinOptions = {\n                common: getOptions(common, [viewer, spin]) || getOptions(common, spin) || {},\n                mobile: getOptions(mobile, [viewer, spin]) || getOptions(mobile, spin) || {}\n            };\n            this.zoomOptions = {\n                common: getOptions(common, [viewer, zoom]) || getOptions(common, zoom) || {},\n                mobile: getOptions(mobile, [viewer, zoom]) || getOptions(mobile, zoom) || {}\n            };\n            this.imageOptions = {\n                common: getOptions(common, [viewer, image]) || getOptions(common, image) || {},\n                mobile: getOptions(mobile, [viewer, image]) || getOptions(mobile, image) || {}\n            };\n            this.videoOptions = {\n                common: getOptions(common, [viewer, video]) || getOptions(common, video) || {},\n                mobile: getOptions(mobile, [viewer, video]) || getOptions(mobile, video) || {}\n            };\n\n            removeProperties(this.options);\n        }\n\n        getSlideOptions() {\n            const spin = getOptionsByType(this.privateOptions, 'spin', '');\n            const zoom = getOptionsByType(this.privateOptions, 'zoom', '');\n            const image = getOptionsByType(this.privateOptions, 'image', '');\n            const video = getOptionsByType(this.privateOptions, 'video', '');\n\n            return {\n                spin: {\n                    common: this.spinOptions,\n                    local: spin\n                },\n                zoom: {\n                    common: this.zoomOptions,\n                    local: zoom\n                },\n                image: {\n                    common: this.imageOptions,\n                    local: image\n                },\n                video: {\n                    common: this.videoOptions,\n                    local: video\n                }\n            };\n        }\n\n        makeOptions() {\n            const exclude = {\n                spin: /^spin/,\n                zoom: /^zoom/,\n                image: /^image/,\n                video: /^video/\n            };\n\n            this.toolOptions = new $J.Options(defaultOptions);\n            this.toolOptions.fromJSON(this.options.common);\n\n            this.privateOptions.common = this.toolOptions.fromString(this.node.attr('data-options') || '', exclude);\n            this.privateOptions.common = clearPrivateOptions(this.privateOptions.common);\n\n            if ($J.browser.touchScreen && $J.browser.mobile) {\n                this.toolOptions.fromJSON(this.options.mobile);\n                this.privateOptions.mobile = this.toolOptions.fromString(this.node.attr('data-mobile-options') || '', exclude);\n                this.privateOptions.mobile = clearPrivateOptions(this.privateOptions.mobile);\n            }\n        }\n\n        createSlider(content) {\n            this.slider = new SirvSlider(this.node, {\n                options: this.toolOptions,\n                slideOptions: this.getSlideOptions(),\n                lazyInit: this.lazyInit,\n                viewerFileContent: content\n            });\n\n            this.slider.setParent(this);\n            this.api.id = this.slider.id;\n        }\n\n        run(force) {\n            this.isRun = true;\n            this.sliderBuilder.getOptions()\n                .then((data) => {\n                    this.parseOptions(data.dataOptions);\n                    if (force) { this.makeOptions(); }\n\n                    if (data.content) {\n                        this.createSlider(data.content);\n                    } else {\n                        this.sliderBuilder.buildViewer().then((data2) => {\n                            this.node = data2.mainNode;\n                            this.createSlider();\n                        });\n                    }\n                })\n                .catch((error) => {\n                    // eslint-disable-next-line no-console\n                    console.log('Sirv: cannot get view from ' + error.error);\n                });\n\n            return true;\n        }\n\n        isReady() {\n            let result = false;\n\n            if (this.slider) {\n                result = this.slider.isReady;\n            }\n\n            return result;\n        }\n\n        isFullscreen() {\n            let result = false;\n\n            if (this.isReady()) {\n                result = (this.slider.isFullscreen === 2);\n            }\n\n            return result;\n        }\n\n        startFullInit(options, force, lazyInit) {\n            let as;\n\n            if (this.slider) {\n                this.lazyInit = lazyInit;\n\n                this.parseOptions(options);\n                this.makeOptions();\n\n                as = this.toolOptions.get('autostart');\n                if (as && as !== 'off' || force) {\n                    this.slider.startFullInit({\n                        options: this.toolOptions,\n                        slideOptions: this.getSlideOptions(),\n                        lazyInit: this.lazyInit\n                    });\n                }\n            }\n        }\n\n        start() {\n            let result = false;\n\n            if (!this.slider) {\n                result = this.run(true);\n            }\n\n            return result;\n        }\n\n        stop() {\n            let result = false;\n\n            if (this.slider) {\n                result = true;\n                this.slider.destroy();\n                this.slider = null;\n                this.off('viewerPublicEvent');\n                this.isRun = false;\n                this.sliderBuilder.destroy();\n                this.sliderBuilder = null;\n                this.destroy();\n            }\n\n            return result;\n        }\n\n        insertItem(htmlSlide, indexOfSlide) {\n            let result = false;\n\n            if (this.isReady()) {\n                if ($J.typeOf(htmlSlide) === 'string') {\n                    const div = $J.$new('div');\n                    div.node.innerHTML = htmlSlide.trim();\n                    htmlSlide = div.node.firstChild;\n\n                    if (htmlSlide && (htmlSlide.nodeType === 3 || htmlSlide.nodeType === 8 || !$J.contains(['div', 'img', SELECTOR_TAG], $(htmlSlide).getTagName()))) {\n                        htmlSlide = null;\n                    }\n                } else if ($(htmlSlide).getTagName() === SELECTOR_TAG) {\n                    const div = $J.$new('div');\n                    div.append(htmlSlide);\n                    htmlSlide = div.node;\n                }\n\n                result = this.slider.insertSlide(indexOfSlide, htmlSlide);\n            }\n\n            return result;\n        }\n\n        removeItem(indexOfSlide) {\n            let result = false;\n\n            if (this.isReady()) {\n                result = this.slider.removeSlide(indexOfSlide);\n            }\n\n            return result;\n        }\n\n        removeAllItems() {\n            let result = true;\n\n            if (this.isReady()) {\n                for (let i = this.itemsCount() - 1; i >= 0; i--) {\n                    const r = this.removeItem(i);\n                    if (result) {\n                        result = r;\n                    }\n                }\n            } else {\n                result = false;\n            }\n\n            return result;\n        }\n\n        itemsCount(settings) {\n            let result = 0;\n\n            if (this.isReady()) {\n                const items = this.items(settings);\n\n                if (items !== null) {\n                    result = items.length;\n                }\n            }\n\n            return result;\n        }\n\n        items(settings) {\n            let result = null;\n\n            if (this.isReady()) {\n                result = this.slider.getItems(settings);\n                result.forEach((item) => {\n                    item.parent = () => { return this.api; };\n                });\n            }\n\n            return result;\n        }\n\n        disableItem(indexOfSlide) {\n            let result = false;\n\n            if (this.isReady()) {\n                result = this.slider.disableSlide(indexOfSlide);\n            }\n\n            return result;\n        }\n\n        enableItem(indexOfSlide) {\n            let result = false;\n\n            if (this.isReady()) {\n                result = this.slider.enableSlide(indexOfSlide);\n            }\n\n            return result;\n        }\n\n        enableGroup(group) {\n            let result = false;\n\n            if (this.isReady()) {\n                result = this.slider.enableGroupOfSlides(group);\n            }\n\n            return result;\n        }\n\n        disableGroup(group) {\n            let result = false;\n\n            if (this.isReady()) {\n                result = this.slider.disableGroupOfSlides(group);\n            }\n\n            return result;\n        }\n\n        switchGroup(group) {\n            let result = false;\n\n            if (this.isReady()) {\n                result = this.slider.switchGroupOfSlides(group);\n            }\n\n            return result;\n        }\n\n        jump(indexOfSlide) {\n            let result = false;\n\n            if (this.isReady()) {\n                result = this.slider.jump(indexOfSlide);\n            }\n\n            return result;\n        }\n\n        next() {\n            let result = false;\n\n            if (this.isReady()) {\n                result = this.slider.jump('next');\n            }\n\n            return result;\n        }\n\n        prev() {\n            let result = false;\n\n            if (this.isReady()) {\n                result = this.slider.jump('prev');\n            }\n\n            return result;\n        }\n\n        fullscreen() {\n            let result = false;\n\n            if (this.isReady()) {\n                if (this.isFullscreen()) {\n                    result = this.slider.exitFullScreen();\n                } else {\n                    result = this.slider.enterFullScreen();\n                }\n            }\n\n            return result;\n        }\n\n        child(numberOfSlide) {\n            let result = null;\n\n            if (this.isReady()) {\n                numberOfSlide = checkArgument(numberOfSlide);\n                result = this.slider.getSlide(numberOfSlide);\n\n                if (result) {\n                    result.parent = () => { return this.api; };\n                }\n            }\n\n            return result;\n        }\n\n        play(delay) {\n            let result = false;\n\n            if (this.isReady()) {\n                result = this.slider.play(delay);\n            }\n\n            return result;\n        }\n\n        pause() {\n            let result = false;\n\n            if (this.isReady()) {\n                result = this.slider.pause();\n            }\n\n            return result;\n        }\n\n        sortItems(order) {\n            if (this.isReady()) {\n                this.slider.sortItems(order);\n            }\n        }\n\n        isEqual(node) {\n            return node === this.node;\n        }\n\n        checkReadiness(eventname, component) {\n            let result = false;\n\n            if (this.isReady()) {\n                result = this.slider.checkReadiness(eventname, component);\n            }\n\n            return result;\n        }\n\n        sendEvent(eventname, component) {\n            if (this.isReady()) {\n                this.slider.sendReadyEvent(eventname, component);\n            }\n        }\n    }\n\n    return Slider_;\n})();\n\nreturn Slider;\n\n    }\n);\n"],"file":"slider.js"}