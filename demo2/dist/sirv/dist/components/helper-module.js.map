{"version":3,"sources":["../helper/helper-module.js"],"names":["_this","Sirv","define","sirvRequire","bHelpers","magicJS","globalVariables","Promise","moduleName","$J","$","helper","WaitToStart","started","callbacks","_proto","prototype","wait","cb","push","start","forEach","destroy","addCss","css","id","position","root","selector","rootNode","document","head","body","stl","$new","type","attr","$J_UUID","node","nextSibling","firstChild","addAfter","querySelector","insertBefore","innerHTML","cleanQueryString","str","replace","createReadOnlyProp","obj","name","value","Object","defineProperty","writable","isObject","constructor","debounce","func","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","useRAF","browser","features","requestAnimationFrame","TypeError","Math","max","invokeFunc","time","args","thisArg","U","apply","startTimer","pendingFunc","_wait","cancelAnimationFrame","setTimeout","cancelTimer","clearTimeout","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","min","shouldInvoke","trailingEdge","timerExpired","Date","now","leadingEdge","cancel","flush","pending","debounced","isInvoking","_len","arguments","length","Array","_key","deepExtend","extend","extendingObject","source","typeOf","defined","index","_type","objEach","key","_len2","_key2","$A","shift","fixSize","size","checkAuto","_node","side","correctSizeValue","ieMode","imageLib","getPartSize","generateUUID","parseInt","random","getArrayIndex","getDPPX","maxValue","upscale","count","DPPX","ceil","getMatrix","is3D","matrix","getCss","getNumber","parseFloat","trim","getTrObj","arrIndexes","arr","_result","axises","v","i","split","transform","scale","getRemoteData","__XMLHttpRequest","url","resolve","reject","xhr","xhr2","XMLHttpRequest","window","XDomainRequest","onerror","e","onload","status","JSON","parse","responseText","data","_err","open","undefined","responseType","send","getByFetch","referrerPolicy","fetch","then","response","json","getData","__jsonp","callbackName","scriptOk","script","createElement","removeChild","checkCallback","onreadystatechange","readyState","src","appendChild","catch","err","contains","console","log","getSirvType","isNotEmptyString","tmp","viewContent","componentType","imgSrc","SLIDE","NAMES","indexOf","TYPES","ZOOM","getElementsByTagName","isSpin","getTagName","SPIN","isVideo","VIDEO","IMAGE","hashKeys","keys","hasOwnProperty","hasDontEnumBug","toString","propertyIsEnumerable","dontEnums","dontEnumsLength","prop","call","isNumber","test","getSize","getInnerSize","width","height","getBackgroundValue","getBackgroundSize","w","h","calcProportionalBackgroundSize","bgSize","infoSize","getBackgroundPositionValue","getBackgroundPosition","x","sign","y","xIndex","yIndex","currentStyle","isFinite","round","checkMaxSize","originSize","dppx","firstSide","secondSide","calcImageProportion","proportionSize","baseFirstSize","contain","imageSize","containerSize","cover","calcProportionSize","fitSize","wh","hw","setW","setH","InViewModule","elementIsShown","parentNode","Timer","timer","list","_proto2","_startTimer","_this2","_check","isShown","callCB","callback","insideObj","remove","l","splice","timerInstance","getPercent","full","current","checkValue","isNaN","getRootSize","offsetWidth","innerWidth","documentElement","clientWidth","offsetHeight","innerHeight","clientHeight","getRootData","pos","getBoundingClientRect","top","left","checkRootMargin","f","isArray","number","checkThreshold","getIntersectionRatio","rect","viewPortSize","rw","rh","checkThresholdQueue","lastIntersectionRatio","currentIntersectionRatio","FakeIntersectionObserver","rootMargin","threshold","nodeList","last","correctPosition","eventWasAdded","bindedRender","_render","bind","bindedResize","_resize","_proto3","_setEvents","addEvent","_removeEvents","removeEvent","m","rootSize","map","_renderElement","nodeObj","rootData","intersectionRatio","target","isIntersecting","_this3","changedNodes","takeRecords","observe","_this4","cbData","unobserve","nodes","disconnect","Instance","IntersectionObserverClass","IntersectionObserver","observer","isInView","bottom","_proto4","isIe","uaName","uaVersion","isPercentage","isSVG","loadImage","sources","img","container","createContainer","setCss","maxWidth","maxHeight","overflow","append","D","complete","handler","error","image","naturalWidth","naturalHeight","loadStylesheet","shadowRoot","alreadyIncluded","rootElement","querySelectorAll","link","href","getAbsoluteURL","slink","rel","makeQueryblePromise","promise","isResolved","isPending","isRejected","isFulfilled","res","paramsFromQueryString","IMG_OPTION_ALIAS","cw","ch","cx","cy","q","s","text","watermark","decodeURIComponentX","out","decodeURIComponent","query","params","pair","setting","reduce","val","ind","col","__toArray","objKeys","idx","paramsToQueryString","URL_OPTIONS_ALIASES","prefix","k","results","substring","item","paramName","encodeURIComponent","join","noTail","pow","roundSize","roundValue","sendRawStats","statsData","useBeacon","endpoint","SIRV_HTTP_PROTOCOL","navigator","sendBeacon","W","ex","sliderLib","findIndex","currentIndex","loop","getSrc","sortSlidesByOrder","order","slides","oldSlidesArr","slice","newSlidesArr","j","l2","enabled","spinLib","FULLSCREEN_PERCENT_WITHOUT_ACTION","sirvlib","spinSize","isFullscreen","oldSize","reverse","row","getNextIndex","currentValue","direction","getUrl","path","swapLayers","layers","revers","rowKey","rowValue","colKey","colValue","getMaxCount","correctArray","keysArray","correctCount","diff","curr","next","unshift","stringify","getFrames","frames","newKeys","checkLayers","videoModule","vimeoPromise","youtubePromise","youtubeImgs","getVimeoJSON","xhttp","isHtmlVideo","getYouTobeId","getVimeoId","match","children","child","getAPI","api","getType","p","Player","Vimeo","YT","existingEvent","onYouTubeIframeAPIReady","appendTo","aspectratio","getAspectRatio","getId","getImageSrc","getAll","thumbUrl","all","thumbnail","def1","medium","def0","imgUrl","thumbnail_small","thumbnail_medium","cloneNode","timeOfPoster","canvas","context","getContext","clear","addSrc","_src","muted","duration","currentTime","drawImage","toDataURL","load"],"mappings":"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","sourcesContent":["var _this = this;\n\nSirv.define('helper', ['require', 'bHelpers', 'magicJS', 'globalVariables', 'Promise!'], function (sirvRequire, bHelpers, magicJS, globalVariables, Promise) {\n  var moduleName = 'helper';\n  var $J = magicJS;\n  var $ = $J.$;\n  var helper = {};\n  /* global $J, helper */\n\n  /* eslint-env es6 */\n\n  var WaitToStart = /*#__PURE__*/function () {\n    \"use strict\";\n\n    function WaitToStart() {\n      this.started = false;\n      this.callbacks = [];\n    }\n\n    var _proto = WaitToStart.prototype;\n\n    _proto.wait = function wait(cb) {\n      if (this.started) {\n        cb();\n      } else {\n        this.callbacks.push(cb);\n      }\n    };\n\n    _proto.start = function start() {\n      if (!this.started) {\n        this.started = true;\n        this.callbacks.forEach(function (cb) {\n          return cb();\n        });\n      }\n    };\n\n    _proto.destroy = function destroy() {\n      this.callbacks = [];\n    };\n\n    return WaitToStart;\n  }();\n\n  helper.WaitToStart = WaitToStart;\n  /* global $J, helper */\n\n  /* eslint-env es6 */\n  // helper.addCss = (css, id, position) => {\n  //     if (!position) { position = 'top'; }\n  //     const stl = $J.$new('style', { id: (id || 'sirv-module-' + helper.generateUUID()), type: 'text/css' }).appendTo((document.head || document.body), position);\n  //     stl.node.innerHTML = css;\n  //     return stl;\n  // };\n\n  helper.addCss = function (css, id, position, root, selector) {\n    var rootNode = document.head || document.body;\n    var stl = $J.$new('style', {\n      type: 'text/css'\n    });\n    stl.attr('id', id || 'sirv-module-' + stl.$J_UUID);\n\n    if (!position) {\n      position = 'top';\n    }\n\n    if (root) {\n      rootNode = $(root).node || root;\n    }\n\n    var nextSibling;\n\n    if (position === 'top') {\n      nextSibling = rootNode.firstChild;\n    }\n\n    var addAfter = rootNode.querySelector(selector);\n\n    if (addAfter && addAfter.nextSibling) {\n      nextSibling = addAfter.nextSibling;\n    }\n\n    rootNode.insertBefore(stl.node, nextSibling);\n    stl.node.innerHTML = css;\n    return stl;\n  };\n  /* eslint-env es6 */\n\n  /* global helper */\n\n\n  helper.cleanQueryString = function (str) {\n    str = str.replace(/&+/g, '&');\n    str = str.replace(/&$/, '');\n    str = str.replace(/\\?&/, '?');\n    str = str.replace(/profile=&|profile=$/g, '');\n    str = str.replace(/image=&/g, 'image&');\n    str = str.replace(/image=$/g, 'image');\n    return str;\n  };\n  /* eslint-env es6 */\n\n  /* global helper */\n\n\n  helper.createReadOnlyProp = function (obj, name, value) {\n    Object.defineProperty(obj, name, {\n      value: value,\n      writable: false\n    });\n  };\n  /* global $J, helper */\n\n  /* eslint-env es6 */\n  // Returns if a value is an object\n\n\n  var isObject = function (value) {\n    return value && typeof value === 'object' && value.constructor === Object;\n  };\n  /**\n   * Creates a debounced function that delays invoking `func` until after `wait`\n   * milliseconds have elapsed since the last time the debounced function was\n   * invoked, or until the next browser frame is drawn. The debounced function\n   * comes with a `cancel` method to cancel delayed `func` invocations and a\n   * `flush` method to immediately invoke them. Provide `options` to indicate\n   * whether `func` should be invoked on the leading and/or trailing edge of the\n   * `wait` timeout. The `func` is invoked with the last arguments provided to the\n   * debounced function. Subsequent calls to the debounced function return the\n   * result of the last `func` invocation.\n   *\n   * **Note:** If `leading` and `trailing` options are `true`, `func` is\n   * invoked on the trailing edge of the timeout only if the debounced function\n   * is invoked more than once during the `wait` timeout.\n   *\n   * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n   * until the next tick, similar to `setTimeout` with a timeout of `0`.\n   *\n   * If `wait` is omitted in an environment with `requestAnimationFrame`, `func`\n   * invocation will be deferred until the next frame is drawn (typically about\n   * 16ms).\n   *\n   * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n   * for details over the differences between `debounce` and `throttle`.\n   *\n   * @since 0.1.0\n   * @category Function\n   * @param {Function} func The function to debounce.\n   * @param {number} [wait=0]\n   *  The number of milliseconds to delay; if omitted, `requestAnimationFrame` is\n   *  used (if available).\n   * @param {Object} [options={}] The options object.\n   * @param {boolean} [options.leading=false]\n   *  Specify invoking on the leading edge of the timeout.\n   * @param {number} [options.maxWait]\n   *  The maximum time `func` is allowed to be delayed before it's invoked.\n   * @param {boolean} [options.trailing=true]\n   *  Specify invoking on the trailing edge of the timeout.\n   * @returns {Function} Returns the new debounced function.\n   * @example\n   *\n   * // Avoid costly calculations while the window size is in flux.\n   * jQuery(window).on('resize', debounce(calculateLayout, 150))\n   *\n   * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n   * jQuery(element).on('click', debounce(sendMail, 300, {\n   *   'leading': true,\n   *   'trailing': false\n   * }))\n   *\n   * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n   * const debounced = debounce(batchLog, 250, { 'maxWait': 1000 })\n   * const source = new EventSource('/stream')\n   * jQuery(source).on('message', debounced)\n   *\n   * // Cancel the trailing debounced invocation.\n   * jQuery(window).on('popstate', debounced.cancel)\n   *\n   * // Check for pending invocations.\n   * const status = debounced.pending() ? \"Pending...\" : \"Ready\"\n   */\n\n\n  helper.debounce = function (func, wait, options) {\n    var lastArgs;\n    var lastThis;\n    var maxWait;\n    var result;\n    var timerId;\n    var lastCallTime;\n    var lastInvokeTime = 0;\n    var leading = false;\n    var maxing = false;\n    var trailing = true; // Bypass `requestAnimationFrame` by explicitly setting `wait=0`.\n    // const useRAF = (!wait && wait !== 0 && typeof root.requestAnimationFrame === 'function');\n\n    var useRAF = !wait && wait !== 0 && $J.browser.features.requestAnimationFrame;\n\n    if (typeof func !== 'function') {\n      throw new TypeError('Expected a function');\n    }\n\n    wait = +wait || 0;\n\n    if (isObject(options)) {\n      leading = !!options.leading;\n      maxing = 'maxWait' in options;\n      maxWait = maxing ? Math.max(+options.maxWait || 0, wait) : maxWait;\n      trailing = 'trailing' in options ? !!options.trailing : trailing;\n    }\n\n    var invokeFunc = function (time) {\n      var args = lastArgs;\n      var thisArg = lastThis;\n      lastArgs = $J.U;\n      lastThis = lastArgs;\n      lastInvokeTime = time;\n      result = func.apply(thisArg, args);\n      return result;\n    };\n\n    var startTimer = function (pendingFunc, _wait) {\n      if (useRAF) {\n        $J.browser.cancelAnimationFrame(timerId);\n        return $J.browser.requestAnimationFrame(pendingFunc);\n      }\n\n      return setTimeout(pendingFunc, _wait);\n    };\n\n    var cancelTimer = function (id) {\n      if (useRAF) {\n        $J.browser.cancelAnimationFrame(id);\n      } else {\n        clearTimeout(id);\n      }\n    };\n\n    var remainingWait = function (time) {\n      var timeSinceLastCall = time - lastCallTime;\n      var timeSinceLastInvoke = time - lastInvokeTime;\n      var timeWaiting = wait - timeSinceLastCall;\n      return maxing ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;\n    };\n\n    var shouldInvoke = function (time) {\n      var timeSinceLastCall = time - lastCallTime;\n      var timeSinceLastInvoke = time - lastInvokeTime; // Either this is the first call, activity has stopped and we're at the\n      // trailing edge, the system time has gone backwards and we're treating\n      // it as the trailing edge, or we've hit the `maxWait` limit.\n\n      return lastCallTime === $J.U || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n    };\n\n    var trailingEdge = function (time) {\n      timerId = $J.U; // Only invoke if we have `lastArgs` which means `func` has been\n      // debounced at least once.\n\n      if (trailing && lastArgs) {\n        return invokeFunc(time);\n      }\n\n      lastArgs = $J.U;\n      lastThis = lastArgs;\n      return result;\n    };\n\n    var timerExpired = function () {\n      var time = Date.now();\n\n      if (shouldInvoke(time)) {\n        return trailingEdge(time);\n      } // Restart the timer.\n\n\n      timerId = startTimer(timerExpired, remainingWait(time));\n      return $J.U;\n    };\n\n    var leadingEdge = function (time) {\n      // Reset any `maxWait` timer.\n      lastInvokeTime = time; // Start the timer for the trailing edge.\n\n      timerId = startTimer(timerExpired, wait); // Invoke the leading edge.\n\n      return leading ? invokeFunc(time) : result;\n    };\n\n    var cancel = function () {\n      if (timerId !== $J.U) {\n        cancelTimer(timerId);\n      }\n\n      lastInvokeTime = 0;\n      lastArgs = $J.U;\n      lastCallTime = lastArgs;\n      lastThis = lastArgs;\n      timerId = lastArgs;\n    };\n\n    var flush = function () {\n      return timerId === $J.U ? result : trailingEdge(Date.now());\n    };\n\n    var pending = function () {\n      return timerId !== $J.U;\n    };\n\n    var debounced = function () {\n      var time = Date.now();\n      var isInvoking = shouldInvoke(time);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      lastArgs = args;\n      lastThis = _this;\n      lastCallTime = time;\n\n      if (isInvoking) {\n        if (timerId === $J.U) {\n          return leadingEdge(lastCallTime);\n        }\n\n        if (maxing) {\n          // Handle invocations in a tight loop.\n          timerId = startTimer(timerExpired, wait);\n          return invokeFunc(lastCallTime);\n        }\n      }\n\n      if (timerId === $J.U) {\n        timerId = startTimer(timerExpired, wait);\n      }\n\n      return result;\n    };\n\n    debounced.cancel = cancel;\n    debounced.flush = flush;\n    debounced.pending = pending;\n    return debounced;\n  };\n  /* global $, $J, helper */\n\n  /* eslint-env es6 */\n\n  /* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n\n\n  helper.deepExtend = function () {\n    var extend = function (extendingObject, source) {\n      var type = $J.typeOf(source);\n\n      if (!$J.defined(extendingObject)) {\n        if (type === 'array') {\n          extendingObject = [];\n        } else {\n          extendingObject = {};\n        }\n      }\n\n      if (type === 'array') {\n        source.forEach(function (value, index) {\n          var _type = $J.typeOf(value); // if (!$J.contains(extendingObject, value)) {\n\n\n          if (_type === 'array' && $J.typeOf(extendingObject[index]) === 'array' || _type === 'object' && $J.typeOf(extendingObject[index]) === 'object') {\n            extendingObject[index] = extend(extendingObject[index], value);\n          } else {\n            extendingObject.push(value);\n          } // }\n\n        });\n      } else {\n        helper.objEach(source, function (key, value, index) {\n          var _type = $J.typeOf(value);\n\n          if (_type === 'array' || _type === 'object') {\n            extendingObject[key] = extend(extendingObject[key], value);\n          } else {\n            extendingObject[key] = value;\n          }\n        });\n      }\n\n      return extendingObject;\n    };\n\n    return function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      var result = null;\n      args = $J.$A(args);\n\n      if (args.length) {\n        result = args.shift();\n        args.forEach(function (value) {\n          var _type = $J.typeOf(value);\n\n          if (_type === 'array' || _type === 'object') {\n            result = extend(result, value);\n          }\n        });\n      }\n\n      return result;\n    };\n  }();\n  /* global $J, helper */\n\n  /* eslint-env es6 */\n\n\n  helper.fixSize = function (node, size) {\n    node = $(node);\n\n    var checkAuto = function (_node, side) {\n      return _node.attr(side) === 'auto';\n    };\n\n    var correctSizeValue = function (value) {\n      if (value <= 4) {\n        value = 0;\n      }\n\n      return value;\n    };\n\n    ['width', 'height'].forEach(function (side) {\n      if ($J.browser.ieMode && !node.attr('src')) {\n        if (checkAuto(node, side)) {\n          size[side] = 0;\n        }\n      }\n\n      if (size[side] === 0) {\n        // check \"width\" / \"height\" attribute\n        size[side] = helper.imageLib.getPartSize(node, side);\n      }\n\n      size[side] = correctSizeValue(size[side]);\n    });\n    return size;\n  };\n  /* global $J, helper */\n\n  /* eslint-env es6 */\n\n\n  helper.generateUUID = function () {\n    return parseInt(Math.random() * 10000000, 10);\n  };\n  /* global helper */\n\n  /* eslint-env es6 */\n\n\n  helper.getArrayIndex = function (index, length) {\n    index %= length;\n\n    if (index < 0) {\n      index += length;\n    }\n\n    return index;\n  };\n  /* global $J, helper */\n\n  /* eslint-env es6 */\n\n\n  helper.getDPPX = function (value, maxValue, upscale) {\n    var result = maxValue / value;\n    var count = 100;\n\n    if (result >= $J.DPPX || upscale) {\n      result = $J.DPPX;\n    } else {\n      result *= count;\n      result = Math.ceil(result) / count;\n    }\n\n    return result;\n  };\n  /* global helper */\n\n  /* global $ */\n\n  /* eslint-env es6 */\n\n\n  helper.getMatrix = function (node) {\n    var result = null;\n    var is3D;\n    var matrix = $(node).getCss('transform') + '';\n\n    var getNumber = function (str) {\n      return parseFloat(str.trim());\n    };\n\n    var getTrObj = function (arrIndexes, arr) {\n      var _result = {};\n      var axises = ['x', 'y', 'z'];\n      arrIndexes.forEach(function (v, i) {\n        _result[axises[i]] = getNumber(arr[v]);\n      });\n      return _result;\n    };\n\n    if (matrix !== 'none') {\n      result = {};\n      matrix = matrix.split('(')[1];\n      matrix = matrix.split(')')[0];\n      matrix = matrix.split(',');\n      is3D = matrix.length > 6;\n      result.transform = getTrObj(is3D ? [12, 13, 14] : [4, 5], matrix);\n      result.scale = getTrObj(is3D ? [0, 5, 10] : [0, 3], matrix);\n    }\n\n    return result;\n  };\n  /* global $J, helper, Promise */\n\n  /* eslint no-throw-literal: \"off\" */\n\n  /* eslint-env es6 */\n\n\n  helper.getRemoteData = function () {\n    var __XMLHttpRequest = function (url) {\n      return new Promise(function (resolve, reject) {\n        var xhr = null;\n\n        if ($J.browser.features.xhr2) {\n          xhr = new XMLHttpRequest();\n        } else if (window.XDomainRequest) {\n          xhr = new XDomainRequest();\n        }\n\n        if (xhr) {\n          xhr.onerror = function (e) {\n            reject(e || true);\n          };\n\n          xhr.onload = function (e) {\n            try {\n              if (xhr.status === 200) {\n                var value = JSON.parse(xhr.responseText);\n                resolve(value);\n              } else {\n                throw {\n                  status: xhr.status,\n                  data: e\n                };\n              }\n            } catch (_err) {\n              reject(_err);\n            }\n          };\n\n          xhr.open('GET', url);\n\n          if (undefined !== xhr.responseType) {\n            xhr.responseType = 'text';\n          }\n\n          xhr.send(null);\n        } else {\n          reject(true);\n        }\n      });\n    };\n\n    var getByFetch = function (url, referrerPolicy) {\n      return fetch(url, {\n        referrerPolicy: referrerPolicy || 'no-referrer-when-downgrade'\n      }).then(function (response) {\n        if (response.status === 200) {\n          return response.json();\n        }\n\n        throw {\n          status: response.status,\n          data: response\n        };\n      });\n    };\n\n    var getData = window.fetch ? getByFetch : __XMLHttpRequest;\n\n    var __jsonp = function (url, callbackName) {\n      return new Promise(function (resolve, reject) {\n        var scriptOk = false;\n        var script = document.createElement('script');\n\n        if (!window[callbackName]) {\n          window[callbackName] = function () {\n            scriptOk = true;\n            delete window[callbackName];\n            document.body.removeChild(script);\n            resolve(arguments.length <= 0 ? undefined : arguments[0]);\n          };\n        }\n\n        var checkCallback = function () {\n          if (scriptOk) return;\n          delete window[callbackName];\n          document.body.removeChild(script);\n          reject(url);\n        };\n\n        script.onreadystatechange = function () {\n          if (_this.readyState === 'complete' || _this.readyState === 'loaded') {\n            _this.onreadystatechange = null;\n            setTimeout(checkCallback, 0);\n          }\n        };\n\n        script.onerror = checkCallback;\n        script.onload = checkCallback;\n        script.src = url + '&callback=' + callbackName;\n        document.body.appendChild(script);\n      });\n    };\n\n    return function (url, callbackName\n    /* for jsonp */\n    , referrerPolicy) {\n      return new Promise(function (resolve, reject) {\n        getData(url, referrerPolicy).then(resolve).catch(function (err) {\n          if (err && err.status && $J.contains([404, 200], err.status)) {\n            reject(err);\n          } else {\n            // eslint-disable-next-line no-console\n            console.log('XHR error. Switching to JSONP.');\n\n            if (!callbackName) {\n              callbackName = 'sirv_data_' + helper.generateUUID();\n            }\n\n            __jsonp(url, callbackName).then(resolve).catch(reject);\n          }\n        });\n      });\n    };\n  }();\n  /* global helper */\n\n  /* global $ */\n\n  /* eslint-env es6 */\n\n\n  helper.getSirvType = function () {\n    var isNotEmptyString = function (str) {\n      var result = false;\n\n      if (str) {\n        str += '';\n        result = str.trim() !== '';\n      }\n\n      return result;\n    };\n\n    return function (node) {\n      node = $(node);\n      var tmp = node.attr('data-type') || node.attr('data-effect');\n      var viewContent = node.fetch('view-content');\n      var result = null;\n      var componentType;\n      var imgSrc;\n\n      if (isNotEmptyString(tmp) && tmp !== 'static') {\n        var index = globalVariables.SLIDE.NAMES.indexOf(tmp);\n        componentType = index >= 0 ? index : globalVariables.SLIDE.TYPES.ZOOM;\n        tmp = node.attr('data-src');\n\n        if (isNotEmptyString(tmp)) {\n          imgSrc = tmp;\n        } else {\n          tmp = $(node.node.getElementsByTagName('img')[0]);\n\n          if (tmp.attr) {\n            imgSrc = tmp.attr('src') || tmp.attr('data-src');\n          }\n        }\n      } else {\n        tmp = node.attr('data-src');\n\n        if (isNotEmptyString(tmp)) {\n          if (helper.isSpin(tmp) && node.getTagName() !== 'img' || viewContent === globalVariables.SLIDE.TYPES.SPIN) {\n            componentType = globalVariables.SLIDE.TYPES.SPIN;\n            imgSrc = tmp;\n          } else if (helper.isVideo(tmp)) {\n            componentType = globalVariables.SLIDE.TYPES.VIDEO;\n            imgSrc = tmp;\n          } else {\n            imgSrc = tmp;\n            componentType = globalVariables.SLIDE.TYPES.IMAGE;\n\n            if (viewContent) {\n              componentType = viewContent;\n            }\n          }\n        } else {\n          tmp = node.attr('src');\n\n          if (isNotEmptyString(tmp) && node.getTagName() === 'img') {\n            imgSrc = tmp;\n            componentType = globalVariables.SLIDE.TYPES.IMAGE;\n          }\n        }\n      }\n\n      if (componentType) {\n        result = {\n          type: componentType,\n          imgSrc: imgSrc\n        };\n      }\n\n      return result;\n    };\n  }();\n  /* global $J, $ */\n\n  /* eslint no-restricted-syntax: [\"error\", \"FunctionExpression\", \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n\n  /* eslint no-prototype-builtins: \"off\" */\n\n  /* eslint lines-around-directive: [\"off\"] */\n\n  /* eslint strict: [\"off\"] */\n\n  /* eslint-env es6 */\n\n\n  if (!$J.hashKeys) {\n    if (Object.keys) {\n      $J.hashKeys = Object.keys;\n    } else {\n      (function () {\n        'use strict';\n\n        var hasOwnProperty = Object.prototype.hasOwnProperty;\n        var hasDontEnumBug = !{\n          toString: null\n        }.propertyIsEnumerable('toString');\n        var dontEnums = ['toString', 'toLocaleString', 'valueOf', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'constructor'];\n        var dontEnumsLength = dontEnums.length;\n        return function (obj) {\n          if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {\n            throw new TypeError('Object.keys called on non-object');\n          }\n\n          var result = [];\n          var prop;\n          var i;\n\n          for (prop in obj) {\n            if (hasOwnProperty.call(obj, prop)) {\n              result.push(prop);\n            }\n          }\n\n          if (hasDontEnumBug) {\n            for (i = 0; i < dontEnumsLength; i++) {\n              if (hasOwnProperty.call(obj, dontEnums[i])) {\n                result.push(dontEnums[i]);\n              }\n            }\n          }\n\n          return result;\n        };\n      })();\n    }\n  }\n  /* global $, $J, helper */\n\n  /* eslint-env es6 */\n\n\n  helper.imageLib = {\n    isNumber: function (value) {\n      return /(px|%)$/.test(value);\n    },\n    getSize: function (node, count) {\n      // eslint-disable-next-line\n      return new Promise(function (resolve, reject) {\n        var size = $(node).getInnerSize();\n\n        if (!count) {\n          count = 100;\n        }\n\n        count -= 1;\n\n        if (!size.width && !size.height && count > 0) {\n          setTimeout(function () {\n            helper.imageLib.getSize(node, count).then(resolve);\n          }, 16);\n        } else {\n          resolve(size);\n        }\n      });\n    },\n    // just for pixels\n    getBackgroundValue: function (value) {\n      var result = null;\n\n      if (value && /px$/.test(value)) {\n        result = parseInt(value, 10);\n      }\n\n      return result;\n    },\n    // just for pixels\n    getBackgroundSize: function (node) {\n      var result = null;\n      var value = $(node).getCss('background-size');\n\n      if (value) {\n        value = value.split(',')[0].split(' ');\n        var w = helper.imageLib.getBackgroundValue((value[0] || '').trim());\n        var h = helper.imageLib.getBackgroundValue((value[1] || '').trim());\n\n        if (w !== null) {\n          result = {\n            width: w\n          };\n        }\n\n        if (h !== null) {\n          if (!result) {\n            result = {};\n          }\n\n          result.height = h;\n        }\n      }\n\n      return result;\n    },\n    calcProportionalBackgroundSize: function (bgSize, infoSize) {\n      var result = {\n        width: infoSize.width,\n        height: infoSize.height\n      };\n\n      if (bgSize.width && infoSize.width > bgSize.width) {\n        result.width = bgSize.width;\n        result.height = bgSize.width * infoSize.height / infoSize.width;\n      }\n\n      if (bgSize.height && infoSize.height > bgSize.height) {\n        result.height = bgSize.height;\n        result.width = bgSize.height * infoSize.width / infoSize.height;\n      }\n\n      return result;\n    },\n    getBackgroundPositionValue: function (value) {\n      var result;\n\n      switch (value) {\n        case 'top':\n        case 'left':\n          result = 0;\n          break;\n\n        case 'center':\n          result = 50;\n          break;\n\n        case 'right':\n        case 'bottom':\n          result = 100;\n          break;\n\n        default:\n          if (helper.imageLib.isNumber(value)) {\n            result = parseInt(value, 10);\n          } else {\n            result = 0;\n          }\n\n      }\n\n      return result;\n    },\n    getBackgroundPosition: function (node) {\n      var x = {\n        side: 'left',\n        position: 0,\n        sign: '%'\n      };\n      var y = {\n        side: 'top',\n        position: 0,\n        sign: '%'\n      };\n      var xIndex = 0;\n      var yIndex = 1;\n      var value = $(node).getCss('background-position');\n\n      if (value) {\n        value = value.replace(/important/, '');\n        value = value.replace(/!/g, '');\n        value = value.trim();\n        value = value.replace(/\\s+/g, ' ');\n        value = value.split(' ');\n\n        if (value.length > 2) {\n          xIndex = 1;\n          yIndex = 3;\n\n          if ($J.contains(['left', 'right'], value[0])) {\n            x.side = value[0];\n          }\n\n          if ($J.contains(['top', 'bottom'], value[2])) {\n            y.side = value[2];\n          }\n        }\n\n        x.position = helper.imageLib.getBackgroundPositionValue(value[xIndex]);\n        y.position = helper.imageLib.getBackgroundPositionValue(value[yIndex]);\n\n        if (/px$/.test(value[xIndex])) {\n          x.sign = 'px';\n        }\n\n        if (/px$/.test(value[yIndex])) {\n          y.sign = 'px';\n        }\n      }\n\n      return {\n        x: x,\n        y: y\n      };\n    },\n    getPartSize: function (node, side) {\n      var result = 0,\n          value;\n\n      if ($J.browser.ieMode) {\n        value = (node.currentStyle[side] || '0').replace(/px$/, '');\n      } else {\n        value = (node.getCss(side) || '0').replace(/px$/, '');\n      }\n\n      if (isFinite(value)) {\n        result = Math.round(parseFloat(value)) - parseFloat(node.getCss('border-top-width') || 0) - parseFloat(node.getCss('border-bottom-width') || 0) - parseFloat(node.getCss('padding-top') || 0) - parseFloat(node.getCss('padding-bottom') || 0);\n      }\n\n      return result;\n    },\n    checkMaxSize: function (size, originSize, dppx) {\n      var firstSide, secondSide;\n\n      if (size.width > originSize.width * dppx || size.height > originSize.height * dppx) {\n        if (size.width > originSize.width) {\n          firstSide = 'width';\n          secondSide = 'height';\n        } else {\n          firstSide = 'height';\n          secondSide = 'width';\n        }\n\n        size[firstSide] = originSize[firstSide];\n\n        if (size[secondSide]) {\n          size[secondSide] = originSize[secondSide];\n        }\n\n        size.round = false;\n      }\n\n      return size;\n    },\n    calcImageProportion: function (firstSide, secondSide, proportionSize, baseFirstSize) {\n      var prop = proportionSize[secondSide] / proportionSize[firstSide];\n      var result = {};\n      result[firstSide] = baseFirstSize;\n      result[secondSide] = parseInt(prop * result[firstSide], 10);\n      return result;\n    },\n    contain: function (imageSize, containerSize) {\n      var result = {\n        width: imageSize.width,\n        height: imageSize.height\n      };\n\n      if (containerSize.width && result.width > containerSize.width) {\n        result = helper.imageLib.calcImageProportion('width', 'height', result, containerSize.width);\n      }\n\n      if (containerSize.height && result.height > containerSize.height) {\n        result = helper.imageLib.calcImageProportion('height', 'width', result, containerSize.height);\n      }\n\n      return result;\n    },\n    cover: function (imageSize, containerSize) {\n      var result = {\n        width: imageSize.width,\n        height: imageSize.height\n      };\n\n      if (containerSize.width && result.width < containerSize.width) {\n        result = helper.imageLib.calcImageProportion('width', 'height', result, containerSize.width);\n      }\n\n      if (containerSize.height && result.height < containerSize.height) {\n        result = helper.imageLib.calcImageProportion('height', 'width', result, containerSize.height);\n      }\n\n      return result;\n    },\n    calcProportionSize: function (size, originSize, fitSize) {\n      var result = {};\n      var w = originSize.width;\n      var h = originSize.height;\n      var wh = w / h;\n      var hw = h / w;\n\n      var setW = function () {\n        result.height = size.height;\n        result.width = parseInt(wh * size.height, 10);\n      };\n\n      var setH = function () {\n        result.width = size.width;\n        result.height = parseInt(hw * size.width, 10);\n      };\n\n      if (size.width > w || size.height > h) {\n        if (size.width > w) {\n          size.width = w;\n\n          if (size.height) {\n            if (size.height > h) {\n              size.height = h;\n            } else {\n              setW();\n            }\n          }\n        } else {\n          size.height = h;\n\n          if (size.width) {\n            if (size.width > w) {\n              size.width = w;\n            } else {\n              setH();\n            }\n          }\n        }\n      }\n\n      if (size.width || size.height) {\n        if (size.width && size.height) {\n          // if (Math.abs(size.width / size.height - wh) <= Math.abs(size.height / size.width - hw)) {\n          if (size.width / size.height - wh <= size.height / size.width - hw) {\n            setH();\n          } else {\n            setW();\n          }\n        } else if (!size.width) {\n          setW();\n        } else {\n          setH();\n        }\n      }\n\n      if (fitSize) {\n        if (helper.imageLib.isNumber(fitSize.width) && helper.imageLib.isNumber(fitSize.height)) {\n          w = parseInt(fitSize.width, 10);\n\n          if (/%$/.test(fitSize.width)) {\n            w = w / 100 * size.width;\n          }\n\n          h = parseInt(fitSize.height, 10);\n\n          if (/%$/.test(fitSize.height)) {\n            h = h / 100 * size.height;\n          }\n\n          if (w < originSize.width / originSize.height * h) {\n            result = helper.imageLib.calcImageProportion('width', 'height', originSize, w);\n          } else {\n            result = helper.imageLib.calcImageProportion('height', 'width', originSize, h);\n          }\n        } else {\n          if (helper.imageLib.isNumber(fitSize.width)) {\n            w = parseInt(fitSize.width, 10);\n\n            if (/%$/.test(fitSize.width)) {\n              w = w / 100 * size.width;\n            }\n\n            result = helper.imageLib.calcImageProportion('width', 'height', originSize, w);\n          }\n\n          if (helper.imageLib.isNumber(fitSize.height)) {\n            h = parseInt(fitSize.height, 10);\n\n            if (/%$/.test(fitSize.height)) {\n              h = h / 100 * size.height;\n            }\n\n            result = helper.imageLib.calcImageProportion('height', 'width', originSize, h);\n          }\n\n          if ($J.contains([fitSize.width, fitSize.height], 'initial')) {\n            result.width = originSize.width;\n            result.height = originSize.height;\n          } else if ($J.contains([fitSize.width, fitSize.height], 'cover')) {\n            result = helper.imageLib.cover(result, size);\n          } else if ($J.contains([fitSize.width, fitSize.height], 'contain')) {\n            result = helper.imageLib.contain(result, size);\n          }\n        }\n      }\n\n      return result;\n    }\n  };\n  /* eslint-env es6 */\n\n  /* global $, $J, helper */\n\n  /* eslint-disable indent */\n\n  /* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n  /* eslint no-unused-vars: [\"error\", { \"args\": \"none\"}] */\n\n  /* eslint no-empty: \"error\"*/\n\n  helper.InViewModule = function () {\n    var elementIsShown = function (node) {\n      var result = true;\n\n      if (node.getTagName() !== 'body') {\n        if (node.getCss('display') === 'none') {\n          result = false;\n        } else {\n          result = elementIsShown($(node.node.parentNode));\n        }\n      }\n\n      return result;\n    };\n\n    var Timer = /*#__PURE__*/function () {\n      \"use strict\";\n\n      function Timer() {\n        this.timer = null;\n        this.started = false;\n        this.list = [];\n      }\n\n      var _proto2 = Timer.prototype;\n\n      _proto2._startTimer = function _startTimer() {\n        var _this2 = this;\n\n        if (this.list.length) {\n          clearTimeout(this.timer);\n          this.timer = setTimeout(function () {\n            _this2._check();\n\n            if (_this2.started) {\n              _this2._startTimer();\n            }\n          }, 500);\n        }\n      };\n\n      _proto2._check = function _check() {\n        this.list.forEach(function (obj) {\n          var isShown = elementIsShown(obj.obj.node);\n          var callCB = isShown !== obj.obj.isShown;\n          obj.obj.isShown = isShown;\n\n          if (callCB) {\n            obj.callback(obj.obj);\n          }\n        });\n      };\n\n      _proto2.push = function push(obj, cb) {\n        var insideObj = {\n          obj: obj,\n          callback: cb\n        };\n        this.list.push(insideObj);\n\n        if (!this.started) {\n          this.started = true;\n\n          this._startTimer();\n        }\n      };\n\n      _proto2.remove = function remove(node) {\n        for (var i = 0, l = this.list.length; i < l; i++) {\n          if (this.list[i].obj.node.node === node) {\n            this.list.splice(i, 1);\n            break;\n          }\n        }\n\n        if (!this.list.length) {\n          this.started = false;\n        }\n      };\n\n      return Timer;\n    }();\n\n    var timerInstance = new Timer();\n\n    var getPercent = function (full, current) {\n      var result = 0;\n\n      if (full > 0) {\n        result = current / full;\n      }\n\n      return result;\n    };\n\n    var checkValue = function (value) {\n      var result = null;\n\n      if (value !== null) {\n        value = parseFloat(value);\n\n        if (!isNaN(value)) {\n          if (value < 0) {\n            value = 0;\n          }\n\n          if (value > 1) {\n            value = 1;\n          }\n\n          result = value;\n        }\n      }\n\n      return result;\n    };\n\n    var getRootSize = function (node) {\n      if (!node) {\n        node = window;\n      }\n\n      return {\n        width: node.offsetWidth || node.innerWidth || document.documentElement.clientWidth,\n        height: node.offsetHeight || node.innerHeight || document.documentElement.clientHeight\n      };\n    };\n\n    var getRootData = function (node, pos, size) {\n      var tmp;\n      var result = $J.extend({}, pos);\n\n      try {\n        tmp = $(node).getBoundingClientRect();\n        result.top += tmp.top;\n        result.left += tmp.left;\n      } catch (e) {\n        /* empty */\n      }\n\n      result = $J.extend(result, size);\n      return result;\n    }; // px and % only\n\n\n    var checkRootMargin = function (value) {\n      var result = [];\n      var l;\n      var i;\n\n      var f = function () {\n        return 0;\n      };\n\n      if (value && !Array.isArray(value)) {\n        if ($J.typeOf(value) === 'number') {\n          value = [value];\n        } else if ($J.typeOf(value) === 'string') {\n          value = value.split(' ');\n          l = value.length;\n\n          for (i = 0; i < l; i++) {\n            value[i] = value[i].trim();\n          }\n        } else {\n          value = null;\n        }\n      }\n\n      if (Array.isArray(value)) {\n        l = value.length;\n\n        if (l > 4) {\n          l = 4;\n        }\n\n        value.forEach(function (v) {\n          if ($J.contains(['string', 'number'], $J.typeOf(v))) {\n            var number = parseInt(v, 10);\n\n            if (/%$/.test(v)) {\n              result.push(function (width) {\n                return width / 100 * number;\n              });\n            } else {\n              result.push(function (width) {\n                return number;\n              });\n            }\n          } else {\n            result.push(f);\n          }\n        }); // [top, right, bottom, left]\n\n        switch (l) {\n          case 1:\n            result.push(result[0]);\n            result.push(result[0]);\n            result.push(result[0]);\n            break;\n\n          case 2:\n            result.push(result[0]);\n            result.push(result[1]);\n            break;\n\n          case 3:\n            result.push(result[1]);\n            break;\n          // no default\n        }\n      } else {\n        result = [f, f, f, f];\n      }\n\n      return result;\n    };\n\n    var checkThreshold = function (value) {\n      var result = [];\n      var tmp;\n\n      if (Array.isArray(value)) {\n        value.forEach(function (v) {\n          tmp = checkValue(v);\n\n          if (tmp !== null && !$J.contains(result, tmp)) {\n            result.push(tmp);\n          }\n        });\n      } else {\n        result = [0];\n      }\n\n      return result;\n    };\n\n    var getIntersectionRatio = function (rect, viewPortSize) {\n      var width;\n      var height;\n      var rw = rect.width || 1;\n      var rh = rect.height || 1;\n      width = Math.min(rect.left + rw, viewPortSize.left + viewPortSize.width) - Math.max(rect.left, viewPortSize.left);\n      height = Math.min(rect.top + rh, viewPortSize.top + viewPortSize.height) - Math.max(rect.top, viewPortSize.top);\n\n      if (width < 0) {\n        width = 0;\n      }\n\n      if (height < 0) {\n        height = 0;\n      }\n\n      return getPercent(rw * rh, width * height);\n    };\n\n    var checkThresholdQueue = function (arr, lastIntersectionRatio, currentIntersectionRatio) {\n      var result = false;\n      var i;\n      var l = arr.length;\n\n      if (lastIntersectionRatio !== currentIntersectionRatio) {\n        if (lastIntersectionRatio < currentIntersectionRatio) {\n          for (i = 0; i < l; i++) {\n            if (arr[i] === 0 && lastIntersectionRatio === 0 || lastIntersectionRatio < arr[i] && arr[i] <= currentIntersectionRatio) {\n              result = true;\n              break;\n            }\n          }\n        } else {\n          for (i = 0; i < l; i++) {\n            if (arr[i] === 1 && lastIntersectionRatio === 1 || lastIntersectionRatio > arr[i] && arr[i] >= currentIntersectionRatio) {\n              result = true;\n              break;\n            }\n          }\n        }\n      }\n\n      return result;\n    };\n\n    var FakeIntersectionObserver = /*#__PURE__*/function () {\n      \"use strict\";\n\n      function FakeIntersectionObserver(callback, options) {\n        this.callback = callback;\n        this.options = $J.extend({\n          rootMargin: '0px',\n          threshold: [0],\n          root: null\n        }, options || {});\n        this.options.rootMargin = checkRootMargin(this.options.rootMargin);\n        this.options.threshold = checkThreshold(this.options.threshold);\n        this.nodeList = [];\n        this.last = [];\n        this.viewPortSize = {\n          top: 0,\n          left: 0,\n          width: 0,\n          height: 0\n        };\n        this.correctPosition = {\n          top: 0,\n          left: 0\n        };\n        this.eventWasAdded = false;\n        this.bindedRender = this._render.bind(this);\n        this.bindedResize = this._resize.bind(this);\n\n        this._resize();\n      }\n\n      var _proto3 = FakeIntersectionObserver.prototype;\n\n      _proto3._setEvents = function _setEvents(e) {\n        if (!this.eventWasAdded) {\n          this.eventWasAdded = true;\n          $(window).addEvent('resize', this.bindedResize);\n          $(this.options.root || window).addEvent('scroll', this.bindedRender);\n        }\n      };\n\n      _proto3._removeEvents = function _removeEvents(e) {\n        if (this.eventWasAdded) {\n          this.eventWasAdded = false;\n          $(window).removeEvent('resize', this.bindedResize);\n          $(this.options.root || window).removeEvent('scroll', this.bindedRender);\n        }\n      };\n\n      _proto3._resize = function _resize(e) {\n        var m = this.options.rootMargin;\n        var rootSize = getRootSize(this.options.root);\n        $(m).map(function (v) {\n          return v(rootSize.width);\n        });\n        this.correctPosition = {\n          top: 0 - m[0](rootSize.width),\n          left: 0 - m[1](rootSize.width)\n        };\n        this.viewPortSize = {\n          width: rootSize.width + m[1](rootSize.width) + m[3](rootSize.width),\n          height: rootSize.height + m[0](rootSize.width) + m[2](rootSize.width)\n        };\n      };\n\n      _proto3._renderElement = function _renderElement(nodeObj) {\n        var result = null;\n\n        if (nodeObj.isShown) {\n          var rootData = getRootData(this.options.root, this.correctPosition, this.viewPortSize);\n          var intersectionRatio = getIntersectionRatio(nodeObj.node.node.getBoundingClientRect(), rootData);\n\n          if (checkThresholdQueue(this.options.threshold, nodeObj.intersectionRatio, intersectionRatio)) {\n            nodeObj.intersectionRatio = intersectionRatio;\n            result = {\n              target: nodeObj.node.node,\n              intersectionRatio: nodeObj.intersectionRatio,\n              isIntersecting: nodeObj.intersectionRatio > 0\n            };\n          }\n        }\n\n        return result;\n      };\n\n      _proto3._render = function _render() {\n        var _this3 = this;\n\n        var changedNodes = [];\n        this.nodeList.forEach(function (node) {\n          var result = _this3._renderElement(node);\n\n          if (result) {\n            changedNodes.push(result);\n          }\n        });\n\n        if (changedNodes.length) {\n          this.last = changedNodes;\n          this.callback(changedNodes);\n        }\n      };\n\n      _proto3.takeRecords = function takeRecords() {\n        this._render();\n\n        return this.last;\n      };\n\n      _proto3.observe = function observe(node) {\n        var _this4 = this;\n\n        var cbData;\n        node = $(node);\n        node = {\n          node: node,\n          isShown: elementIsShown(node),\n          intersectionRatio: 0,\n          isIntersecting: false\n        };\n        timerInstance.push(node, function (_node) {\n          var result = _this4._renderElement(_node);\n\n          if (result) {\n            _this4.last = [result];\n\n            _this4.callback([result]);\n          }\n        });\n        this.nodeList.push(node);\n\n        this._setEvents();\n\n        var result = this._renderElement(node);\n\n        if (result) {\n          cbData = result;\n        } else {\n          cbData = {\n            target: node.node.node,\n            intersectionRatio: 0,\n            isIntersecting: false\n          };\n        }\n\n        this.callback([cbData]);\n      };\n\n      _proto3.unobserve = function unobserve(node) {\n        var nodes = [];\n        node = $(node);\n        this.nodeList.forEach(function (obj) {\n          nodes.push(obj.node.node);\n        });\n        var index = nodes.indexOf(node.node);\n        timerInstance.remove(node.node);\n\n        if (index > -1) {\n          this.nodeList.splice(index, 1);\n        }\n\n        if (!this.nodeList.length) {\n          this._removeEvents();\n        }\n      };\n\n      _proto3.disconnect = function disconnect() {\n        this.nodeList.forEach(function (node) {\n          timerInstance.remove(node.node);\n        });\n        this.nodeList = [];\n\n        this._removeEvents();\n      };\n\n      return FakeIntersectionObserver;\n    }();\n\n    var Instance = /*#__PURE__*/function () {\n      \"use strict\";\n\n      function Instance(callback, options) {\n        var IntersectionObserverClass = window.IntersectionObserver || FakeIntersectionObserver;\n        this.observer = new IntersectionObserverClass(callback, options || {});\n      }\n\n      Instance.isInView = function isInView(node) {\n        var rect = $(node).getBoundingClientRect();\n        return (rect.top >= 0 || rect.top - rect.bottom < rect.top) && rect.left >= 0 && rect.top <= (window.innerHeight || document.documentElement.clientHeight);\n      };\n\n      var _proto4 = Instance.prototype;\n\n      _proto4.takeRecords = function takeRecords() {\n        return this.observer.takeRecords();\n      };\n\n      _proto4.observe = function observe(target) {\n        if (target.node) {\n          target = target.node;\n        }\n\n        this.observer.observe(target);\n      };\n\n      _proto4.unobserve = function unobserve(target) {\n        this.observer.unobserve(target);\n      };\n\n      _proto4.disconnect = function disconnect() {\n        this.observer.disconnect();\n      };\n\n      return Instance;\n    }();\n\n    return Instance;\n  }();\n  /* global $J, helper */\n\n  /* eslint-env es6 */\n\n\n  helper.isIe = function () {\n    return $J.browser.uaName === 'edge' || $J.browser.uaName === 'ie' && $J.contains([10, 11], $J.browser.uaVersion);\n  };\n  /* global helper */\n\n  /* eslint-env es6 */\n\n\n  helper.isPercentage = function (value) {\n    return /^([-]?[0-9]*\\.?[0-9]+)%$/.test('' + value);\n  };\n  /* global $J, helper */\n\n  /* eslint-env es6 */\n\n\n  helper.isSVG = function (url) {\n    var result = false;\n\n    if (url) {\n      url = url.split('?')[0];\n      url = url.split('.');\n      url = url[url.length - 1];\n      result = /svg/i.test(url);\n    }\n\n    return result;\n  };\n  /* global helper */\n\n  /* eslint-env es6 */\n\n\n  helper.isSpin = function (str) {\n    str = (str || '').split('?')[0];\n    return /([^#?]+)\\/?([^#?]+\\.spin)(\\?([^#]*))?(#(.*))?$/.test(str);\n  };\n  /* global helper */\n\n  /* eslint-env es6 */\n\n\n  helper.isVideo = function (str) {\n    str = (str || '').split('?')[0];\n    return /([^#?]+)\\/?([^#?]+\\.(mp4|mov|avi|m4v|mkv|webm|wmv|ogv|ogg))(\\?([^#]*))?(#(.*))?$/i.test(str);\n  };\n  /* global helper */\n\n  /* global $J */\n\n  /* global $ */\n\n  /* eslint-env es6 */\n\n\n  helper.loadImage = function (sources) {\n    return new Promise(function (resolve, reject) {\n      var img;\n      var container;\n      var createContainer = false;\n\n      if ($J.contains(['array', 'string'], $J.typeOf(sources))) {\n        if ($J.typeOf(sources) === 'string') {\n          sources = [sources];\n        }\n\n        img = $J.$new('img').setCss({\n          maxWidth: 'none',\n          maxHeight: 'none'\n        });\n        img.attr('referrerpolicy', 'no-referrer-when-downgrade');\n        createContainer = true;\n      } else {\n        img = $(sources);\n\n        if (!img.node.parentNode) {\n          createContainer = true;\n        }\n      }\n\n      if (createContainer) {\n        container = $J.$new('div').setCss({\n          top: '-10000px',\n          left: '-10000px',\n          width: '10px',\n          height: '10px',\n          position: 'absolute',\n          overflow: 'hidden'\n        });\n        container.append(img);\n        $($J.D.node.body).append(container);\n      } // if (!img.complete || $J.browser.engine === 'gecko') {\n\n\n      if (!img.node.complete || !img.node.src) {\n        var handler = function (e) {\n          img.removeEvent('load error', handler);\n\n          if (e.type === 'error') {\n            reject({\n              error: e\n            });\n          } else {\n            resolve({\n              image: e,\n              size: {\n                width: img.node.naturalWidth || img.node.width,\n                height: img.node.naturalHeight || img.node.height\n              }\n            });\n          }\n\n          if (container) {\n            container.remove();\n          }\n        };\n\n        img.addEvent('load error', handler);\n\n        if (container && $J.typeOf(sources) === 'array') {\n          img.attr('src', sources[0]);\n\n          if (sources[1]) {\n            // img.attr('srcset', encodeURI(sources[1]) + ' 2x');\n            img.attr('srcset', sources[1] + ' 2x');\n          }\n        }\n      } else {\n        if (container) {\n          container.remove();\n        }\n\n        resolve({\n          image: null,\n          size: img.getSize()\n        });\n      }\n    });\n  };\n  /* global $J, helper */\n\n  /* eslint-env es6 */\n\n\n  helper.loadStylesheet = function (url, id, shadowRoot, selector) {\n    return new Promise(function (resolve, reject) {\n      var alreadyIncluded = false;\n      var rootElement = shadowRoot || $J.D.node;\n      $J.$A(rootElement.querySelectorAll('link')).forEach(function (link) {\n        var href = $(link).attr('href') || '';\n\n        if ($J.getAbsoluteURL(href) === $J.getAbsoluteURL(url)) {\n          alreadyIncluded = true;\n        }\n      });\n\n      if (alreadyIncluded) {\n        resolve();\n      } else {\n        var slink = $J.$new('link');\n\n        if (id !== $J.U) {\n          slink.node.id = id;\n        }\n\n        slink.node.rel = 'stylesheet';\n        slink.node.type = 'text/css';\n\n        slink.node.onload = function () {\n          resolve();\n        };\n\n        slink.node.onerror = function (e) {\n          reject(e);\n        };\n\n        slink.node.href = url;\n        var root = $J.D.node.head || $J.D.node.getElementsByTagName('head')[0] || $J.D.node.body || $J.D.node.documentElement;\n\n        if (shadowRoot) {\n          root = shadowRoot;\n        }\n\n        var nextSibling = root.firstChild;\n        var addAfter = root.querySelector(selector);\n\n        if (addAfter && addAfter.nextSibling) {\n          nextSibling = addAfter.nextSibling;\n        }\n\n        root.insertBefore(slink.node, nextSibling);\n      }\n    });\n  };\n  /* global helper */\n\n  /* eslint-env es6 */\n\n\n  helper.makeQueryblePromise = function (promise) {\n    if (promise.isResolved) {\n      return promise;\n    }\n\n    var isPending = true;\n    var isRejected = false;\n    var isFulfilled = false;\n    var result = promise.then(function (res) {\n      isPending = false;\n      isFulfilled = true;\n      return res;\n    }, function (err) {\n      isPending = false;\n      isRejected = true;\n      return err;\n    });\n\n    result.isFulfilled = function () {\n      return isFulfilled;\n    };\n\n    result.isPending = function () {\n      return isPending;\n    };\n\n    result.isRejected = function () {\n      return isRejected;\n    };\n\n    return result;\n  };\n  /* global helper */\n\n  /* eslint no-restricted-syntax: [\"error\", \"FunctionExpression\", \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n\n  /* eslint-env es6 */\n\n\n  helper.objEach = function (obj, cb) {\n    var index = 0;\n\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        cb(key, obj[key], index);\n        index += 1;\n      }\n    }\n  };\n  /* global $, $J, helper */\n\n  /* eslint quote-props: [\"off\", \"always\"] */\n\n  /* eslint-env es6 */\n\n\n  helper.paramsFromQueryString = function () {\n    var IMG_OPTION_ALIAS = {\n      w: 'scale.width',\n      h: 'scale.height',\n      cw: 'crop.width',\n      ch: 'crop.height',\n      cx: 'crop.x',\n      cy: 'crop.y',\n      q: 'quality',\n      s: 'size',\n      // p         : 'profile', // WE SHOULD UPDATE NGINX CONFIGS FOR THIS\n      text: 'text.text',\n      watermark: 'watermark.image',\n      'watermark.w': 'watermark.scale.width',\n      'watermark.h': 'watermark.scale.height',\n      'watermark.cw': 'watermark.crop.width',\n      'watermark.ch': 'watermark.crop.height',\n      'watermark.cx': 'watermark.crop.x',\n      'watermark.cy': 'watermark.crop.y'\n    }; // fix: if the '<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\">' is absent\n\n    var decodeURIComponentX = function (str) {\n      var out = '';\n      var i = 0;\n      var l;\n      var x;\n      var arr = str.split(/(%(?:D0|D1)%.{2})/);\n\n      for (l = arr.length; i < l; i++) {\n        try {\n          x = decodeURIComponent(arr[i]);\n        } catch (e) {\n          x = arr[i];\n        }\n\n        out += x;\n      }\n\n      return out;\n    };\n    /**\n     * Converts query string to Object\n     * @param  {String} query   Query string\n     * @return {Object}\n     */\n\n\n    return function (query) {\n      var params = {};\n\n      if (query) {\n        $(query.split('&')).forEach(function (pair) {\n          var setting = pair.split('='); // Convert option alias to a real name\n\n          setting[0] = IMG_OPTION_ALIAS[setting[0]] || setting[0];\n          setting[0].trim().split('.').reduce(function (res, val, ind, col) {\n            if (/^\\d$/.test(val)) {\n              // save text.0.text='hello' as object and then convert to array\n              res.__toArray = true;\n            }\n\n            if (res[val] === undefined) {\n              if (ind < col.length - 1) {\n                res[val] = {};\n              } else {\n                // res[val] = decodeURIComponent(setting[1] || '');\n                res[val] = decodeURIComponentX(setting[1] || '');\n              }\n            }\n\n            return res[val];\n          }, params);\n        });\n        $($J.hashKeys(params)).forEach(function (key) {\n          var objKeys;\n\n          if (typeof params[key] === 'object' && params[key].__toArray) {\n            delete params[key].__toArray;\n            objKeys = $J.hashKeys(params[key]);\n            params[key] = $(objKeys).map(function (idx) {\n              return params[key][idx];\n            });\n          }\n        });\n      }\n\n      return params;\n    };\n  }();\n  /* global $, $J, helper */\n\n  /* eslint no-restricted-syntax: [\"error\", \"FunctionExpression\", \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n\n  /* eslint no-continue: \"off\" */\n\n  /* eslint no-loop-func: \"off\" */\n\n  /* eslint-env es6 */\n\n  /**\n   * Convert JSON data to query string\n   * @param  {Object} data - JSON data\n   * @param  {String} [prefix] Prefix added to parameter name in query string\n   * @return {[type]}          Query string.\n   */\n\n\n  helper.paramsToQueryString = function () {\n    var URL_OPTIONS_ALIASES = {\n      'scale.width': 'w',\n      'scale.height': 'h',\n      'crop.width': 'cw',\n      'crop.height': 'ch',\n      'crop.x': 'cx',\n      'crop.y': 'cy',\n      'quality': 'q',\n      'size': 's',\n      'text.text': 'text',\n      'watermark.image': 'watermark',\n      'watermark.scale.width': 'watermark.w',\n      'watermark.scale.height': 'watermark.h',\n      'watermark.crop.width': 'watermark.cw',\n      'watermark.crop.height': 'watermark.ch',\n      'watermark.crop.x': 'watermark.cx',\n      'watermark.crop.y': 'watermark.cy'\n    };\n\n    var paramsToQueryString = function (data, prefix) {\n      var k;\n      var value;\n      var results = [];\n\n      for (k in data) {\n        if (!Object.prototype.hasOwnProperty.call(data, k)) {\n          continue;\n        }\n\n        if ((k + '').substring(0, 2) === '$J') {\n          continue;\n        }\n\n        value = data[k];\n\n        if ($J.typeOf(value) === 'object') {\n          value = paramsToQueryString(value, (prefix || '') + k + '.');\n          results.push(value);\n        } else if ($J.typeOf(value) === 'array') {\n          $(value).forEach(function (item, idx) {\n            value = paramsToQueryString(item, (prefix || '') + k + '.' + idx + '.');\n            results.push(value);\n          });\n        } else {\n          // results.push((prefix || '') + k + '=' + encodeURIComponent(value));\n          var paramName = (prefix || '') + k;\n          paramName = URL_OPTIONS_ALIASES[paramName] || paramName;\n          results.push(paramName + '=' + encodeURIComponent(value));\n        }\n      }\n\n      return results.join('&');\n    };\n\n    return paramsToQueryString;\n  }();\n  /* global helper */\n\n  /* eslint no-restricted-properties: \"off\" */\n\n  /* eslint-env es6 */\n\n\n  helper.round = function (value, count, noTail) {\n    var v;\n\n    if (!count) {\n      count = 0;\n    }\n\n    v = Math.pow(10, count);\n\n    if (noTail) {\n      v = parseInt(value * v, 10) / v;\n    } else {\n      v = Math.round(value * v) / v;\n    }\n\n    return v;\n  };\n  /* global helper */\n\n  /* eslint-env es6 */\n\n\n  helper.roundSize = function (value, roundValue) {\n    if (!roundValue) {\n      roundValue = 100;\n    }\n\n    if (value) {\n      value = Math.ceil(value / roundValue) * roundValue;\n    }\n\n    return value;\n  };\n  /* global $J, helper */\n\n  /* global globalVariables */\n\n  /* eslint new-parens: \"off\" */\n\n  /* eslint-env es6 */\n\n\n  helper.sendRawStats = function (statsData, useBeacon) {\n    try {\n      var xhr = null;\n      var endpoint = ($J.browser.ieMode < 11 ? globalVariables.SIRV_HTTP_PROTOCOL : 'https:') + '//stats.sirv.com/' + +new Date();\n\n      if (useBeacon === true && navigator.sendBeacon) {\n        navigator.sendBeacon(endpoint, helper.paramsToQueryString(statsData));\n        return;\n      }\n\n      if ($J.browser.features.xhr2) {\n        xhr = new XMLHttpRequest();\n      } else if ($J.W.node.XDomainRequest) {\n        xhr = new XDomainRequest();\n      }\n\n      if (!xhr) {\n        return;\n      }\n\n      xhr.open('POST', endpoint);\n\n      if (xhr.responseType !== undefined) {\n        xhr.responseType = 'text';\n      }\n\n      xhr.send(helper.paramsToQueryString(statsData));\n    } catch (ex) {//empty\n    }\n  };\n  /* global $J, helper */\n\n  /* eslint-env es6 */\n\n\n  helper.sliderLib = {\n    // getIndexFromDirection: (currentIndex, direction, length, loop) => {\n    //     let index = currentIndex;\n    //     switch (direction) {\n    //         case 'next':\n    //             index += 1;\n    //             break;\n    //         case 'prev':\n    //             index -= 1;\n    //             break;\n    //         default:\n    //             return currentIndex;\n    //     }\n    //     if (loop) {\n    //         index = helper.getArrayIndex(index, length);\n    //     } else {\n    //         if (index < 0) {\n    //             index = 0;\n    //         } else if (index > length - 1) {\n    //             index = length - 1;\n    //         }\n    //     }\n    //     return index;\n    // },\n    findIndex: function (value, currentIndex, l, loop) {\n      var result = null;\n\n      if ($J.typeOf(value) === 'string') {\n        switch (value) {\n          case 'next':\n            value = currentIndex + 1;\n            break;\n\n          case 'prev':\n            value = currentIndex - 1;\n            break;\n          // no default\n        }\n      }\n\n      if ($J.typeOf(value) === 'number') {\n        result = value;\n\n        if (result < 0) {\n          if (loop) {\n            result = helper.getArrayIndex(result, l);\n          } else {\n            result = 0;\n          }\n        } else if (value >= l) {\n          if (loop) {\n            result = helper.getArrayIndex(result, l);\n          } else {\n            result = l - 1;\n          }\n        }\n      }\n\n      return result;\n    },\n    // getDirectionFromIndex: function (currentIndex, index, length, loop) {\n    //     var direction = 'next', fl, rl;\n    //     function getForwardLeft() {\n    //         var result;\n    //         if (index < currentIndex) {\n    //             result = currentIndex - index;\n    //         } else {\n    //             result = length - index + currentIndex;\n    //         }\n    //         return result;\n    //     }\n    //     function getForwardRight() {\n    //         var result;\n    //         if (currentIndex < index) {\n    //             result = index - currentIndex;\n    //         } else {\n    //             result = length - currentIndex + index;\n    //         }\n    //         return result;\n    //     }\n    //     if (loop) {\n    //         fl = getForwardLeft();\n    //         rl = getForwardRight();\n    //         if (fl === rl && currentIndex > index || fl < rl) {\n    //             direction = 'prev';\n    //         }\n    //     } else {\n    //         if (index < currentIndex) { direction = 'prev'; }\n    //     }\n    //     return direction;\n    // },\n    getSrc: function (src) {\n      var result = null;\n\n      if ($J.defined(src) && (src + '').trim() !== '') {\n        result = src + '';\n      }\n\n      return result;\n    }\n  };\n  /* global $, $J, helper */\n\n  /* eslint-env es6 */\n\n  /* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n\n  helper.sortSlidesByOrder = function (order, slides) {\n    var oldSlidesArr = slides.slice();\n    var newSlidesArr = [];\n\n    if (order && order.length) {\n      for (var i = 0, l = Math.min(order.length, oldSlidesArr.length); i < l; i++) {\n        for (var j = 0, l2 = oldSlidesArr.length; j < l2; j++) {\n          if (globalVariables.SLIDE.NAMES.indexOf(order[i]) === oldSlidesArr[j].type && oldSlidesArr[j].enabled) {\n            newSlidesArr.push(oldSlidesArr[j]);\n            oldSlidesArr.splice(j, 1);\n            break;\n          }\n        }\n      }\n    }\n\n    oldSlidesArr.forEach(function (item) {\n      newSlidesArr.push(item);\n    });\n    return newSlidesArr;\n  };\n  /* global $J, helper */\n\n  /* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n\n  /* eslint-env es6 */\n\n  /* eslint-env es6 */\n\n\n  helper.spinLib = function () {\n    // eslint-disable-next-line no-unused-vars\n    var FULLSCREEN_PERCENT_WITHOUT_ACTION = 15; // 0% - 100%\n\n    var sirvlib = {\n      calcProportionSize: function (spinSize, originSize, isFullscreen, oldSize) {\n        var width = originSize.width;\n        var height = originSize.height;\n        var tmp; // if (isFullscreen) {\n        //     if (spinSize.width > spinSize.height) {\n        //         spinSize.height -= 20;\n        //     } else {\n        //         spinSize.width -= 20;\n        //     }\n        // }\n\n        if (width > spinSize.width) {\n          tmp = height / width;\n          width = spinSize.width;\n          height = parseInt(width * tmp, 10);\n        }\n\n        if (height > spinSize.height) {\n          tmp = width / height;\n          height = spinSize.height;\n          width = parseInt(height * tmp, 10);\n        }\n        /* eslint-disable */\n        // if (isFullscreen) {\n\n\n        if (oldSize) {// if (oldSize.width / (originSize.width / 100) >= 100 - spinLib.FULLSCREEN_PERCENT_WITHOUT_ACTION) {\n          //     width = oldSize.width;\n          //     height = oldSize.height;\n          // }\n        } else {\n          if (originSize.width < width) {\n            width = originSize.width;\n            height = originSize.height;\n          }\n        } // }\n\n        /* eslint-enable */\n\n\n        return {\n          width: width,\n          height: height\n        };\n      },\n      reverse: function (col, row, arr) {\n        if (col) {\n          for (var i = 0, l = arr.length; i < l; i++) {\n            arr[i].reverse();\n          }\n        }\n\n        if (row) {\n          arr.reverse();\n        }\n\n        return arr;\n      },\n      getNextIndex: function (currentValue, value, direction, length, loop) {\n        var result;\n\n        if (direction) {\n          if (direction === 'next') {\n            result = currentValue + value;\n\n            if (loop) {\n              result = helper.getArrayIndex(result, length);\n            } else if (result >= length) {\n              result = length - 1;\n            }\n          } else {\n            result = currentValue - value;\n\n            if (loop) {\n              result = helper.getArrayIndex(result, length);\n            } else if (result < 0) {\n              result = 0;\n            }\n          }\n        } else {\n          result = value;\n\n          if (loop) {\n            result = helper.getArrayIndex(result, length);\n          } else {\n            if (result >= length) {\n              result = length - 1;\n            }\n\n            if (result < 0) {\n              result = 0;\n            }\n          }\n        }\n\n        return result;\n      },\n      getUrl: function (path) {\n        var url = path;\n        url = url.split('/');\n        url.splice(url.length - 1, 1);\n        url = url.join('/');\n        url = url.replace(/https?:/, '');\n        return url;\n      },\n      swapLayers: function (layers, revers) {\n        var result = layers;\n\n        if (revers) {\n          result = {};\n          helper.objEach(layers, function (rowKey, rowValue) {\n            helper.objEach(rowValue, function (colKey, colValue) {\n              if (!result[colKey]) {\n                result[colKey] = {};\n              }\n\n              result[colKey][rowKey] = colValue;\n            });\n          });\n        }\n\n        return result;\n      },\n      getMaxCount: function (layers) {\n        var result = 0;\n        helper.objEach(layers, function (key, value, index) {\n          var l = $J.hashKeys(value).length;\n\n          if (result < l) {\n            result = l;\n          }\n        });\n        return result;\n      },\n      correctArray: function (keysArray, count) {\n        var i;\n        var result = [];\n        var correctCount = count - keysArray.length;\n        var diff;\n        var l = keysArray.length;\n        var curr;\n        var next;\n\n        if (correctCount > 0) {\n          for (i = 0; i < l - 1; i++) {\n            curr = parseInt(keysArray[i], 10);\n            next = parseInt(keysArray[i + 1], 10);\n            diff = next - curr - 1;\n            result.push(keysArray[i]);\n\n            if (diff > 0) {\n              if (correctCount > 0) {\n                if (diff > correctCount) {\n                  diff = correctCount;\n                }\n\n                while (diff > 0) {\n                  diff -= 1;\n                  correctCount -= 1;\n                  result.push(keysArray[i]);\n                }\n              }\n            }\n          }\n\n          result.push(keysArray[l - 1]);\n\n          if (correctCount > 0) {\n            diff = parseInt(keysArray[0], 10) - 1;\n\n            if (diff > 0) {\n              while (diff > 0) {\n                diff -= 1;\n                correctCount -= 1;\n                result.unshift(keysArray[0]);\n              }\n            }\n\n            if (correctCount > 0) {\n              while (correctCount > 0) {\n                correctCount -= 1;\n                result.push(keysArray[keysArray.length - 1]);\n              }\n            }\n          }\n        } else {\n          result = JSON.parse(JSON.stringify(keysArray));\n        }\n\n        return result;\n      },\n      getFrames: function (frames, count) {\n        var result = {};\n        var newKeys = sirvlib.correctArray($J.hashKeys(frames), count);\n        $(newKeys).forEach(function (value, index) {\n          result[index + 1 + ''] = frames[value];\n        });\n        return result;\n      },\n      checkLayers: function (layers) {\n        var result = {};\n        var count = sirvlib.getMaxCount(layers);\n        helper.objEach(layers, function (key, value, index) {\n          result[index + 1 + ''] = sirvlib.getFrames(value, count);\n        });\n        return result;\n      }\n    };\n    return sirvlib;\n  }();\n  /* eslint-env es6 */\n\n  /* global $, $J, helper */\n\n  /* global sirvRequire */\n\n  /* eslint quote-props: [\"off\", \"always\"]*/\n\n  /* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n\n  /*eslint no-lonely-if: \"off\"*/\n\n  /* eslint-disable no-multi-spaces */\n\n  /* eslint-disable no-use-before-define */\n\n\n  helper.videoModule = function () {\n    var vimeoPromise = null;\n    var youtubePromise = null;\n    var sources = {};\n    var youtubeImgs = {\n      'thumb1': '1.jpg',\n      // 120x90\n      'thumb2': '2.jpg',\n      // 120x90\n      'thumb3': '3.jpg',\n      // 120x90\n      'def0': '0.jpg',\n      // 480x360\n      'def1': 'default.jpg',\n      // 120x90\n      'middleQuality': 'mqdefault.jpg',\n      // 320x180\n      'highQuality': 'hqdefault.jpg',\n      // 480x360\n      'maxSize': 'maxresdefault.jpg' // 1920x1080\n\n    };\n\n    var getVimeoJSON = function (url) {\n      return new Promise(function (resolve, reject) {\n        var xhttp = new XMLHttpRequest();\n        xhttp.open('GET', url, true);\n\n        xhttp.onreadystatechange = function () {\n          if (xhttp.readyState === 4) {\n            if (xhttp.status === 200) {\n              try {\n                var result = JSON.parse(xhttp.responseText)[0];\n                resolve(result);\n              } catch (e) {\n                reject(null);\n              }\n            }\n          }\n        };\n\n        xhttp.send(true);\n      });\n    };\n\n    var isHtmlVideo = function (node) {\n      node = $(node);\n      return node && node.getTagName && node.getTagName() === 'video';\n    };\n\n    var getYouTobeId = function (url) {\n      var result = null;\n      url = url.replace(/(>|<)/gi, '').split(/(vi\\/|v=|\\/v\\/|youtu\\.be\\/|\\/embed\\/)/);\n\n      if (url[2] !== undefined) {\n        url = url[2].split(/[^0-9a-z_\\-]/i);\n\n        if (url.length && url[0]) {\n          result = url[0];\n        }\n      }\n\n      return result;\n    };\n\n    var getVimeoId = function (url) {\n      var result = null;\n      url = url.match(/(?:https?:\\/\\/)?(?:www.)?(?:player.)?vimeo.com\\/(?:[a-z]*\\/)*([0-9]{6,11})[?]?.*/)[1];\n\n      if (url) {\n        result = url;\n      }\n\n      return result;\n    };\n\n    var getSrc = function (node) {\n      var result = null;\n      var children;\n      var child;\n\n      if ($J.typeOf(node) === 'string') {\n        result = node;\n      } else {\n        node = $(node);\n\n        if (node && $J.typeOf(node.node) === 'element') {\n          if ($J.contains(['iframe', 'div'], node.getTagName())) {\n            result = node.attr('src') || node.attr('data-src');\n          } else if (isHtmlVideo(node)) {\n            result = node.attr('src') || node.attr('data-src');\n\n            if (!result) {\n              result = null;\n              children = $J.$A(node.node.children);\n\n              do {\n                child = $(children.shift());\n\n                if (child && $J.typeOf(child.node) === 'element' && child.getTagName() === 'source') {\n                  result = child.attr('src') || child.attr('data-src');\n                }\n              } while (!result && child);\n            }\n          }\n        }\n      }\n\n      return result;\n    };\n\n    var getAPI = function (node) {\n      var result = null;\n\n      if (api.isVideo(node)) {\n        switch (api.getType(node)) {\n          case 'video':\n            result = Promise.resolve();\n            break;\n\n          case 'vimeo':\n            if (!vimeoPromise) {\n              // if (!$J.W.node.Vimeo || ($J.W.node.Vimeo && !$J.W.node.Vimeo.Player)) {\n              vimeoPromise = new Promise(function (resolve, reject) {\n                sirvRequire(['Vimeo'], function (p) {\n                  resolve({\n                    Player: p\n                  } || $J.W.node.Vimeo);\n                });\n              }); // } else {\n              //     vimeoPromise = Promise.resolve($J.W.node.Vimeo);\n              // }\n            }\n\n            result = vimeoPromise;\n            break;\n\n          case 'youtube':\n            if (!youtubePromise) {\n              if (!$J.W.node.YT) {\n                youtubePromise = new Promise(function (resolve, reject) {\n                  var f = function () {};\n\n                  var existingEvent = $J.W.node.onYouTubeIframeAPIReady || f;\n\n                  $J.W.node.onYouTubeIframeAPIReady = function () {\n                    existingEvent();\n                    resolve($J.W.node.YT);\n                  };\n\n                  if (!document.querySelector('script[src$=\"youtube.com/iframe_api\"]')) {\n                    $J.$new('script', {\n                      src: 'https://www.youtube.com/iframe_api'\n                    }).appendTo($J.D.node.body);\n                  }\n                });\n              } else {\n                youtubePromise = Promise.resolve($J.W.node.YT);\n              }\n            }\n\n            result = youtubePromise;\n            break;\n          // no default\n        }\n      } else {\n        result = Promise.reject(true\n        /*error*/\n        );\n      }\n\n      return result;\n    };\n\n    var api = {\n      aspectratio: 9 / 16,\n      getAspectRatio: function (src) {\n        return new Promise(function (resolve, reject) {\n          var id;\n          src = getSrc(src);\n\n          if (src) {\n            if (sources[src]) {\n              resolve(sources[src].aspectratio);\n            }\n          }\n\n          var type = api.getType(src);\n\n          if (type === 'vimeo') {\n            id = getVimeoId(src);\n\n            if (id) {\n              getVimeoJSON('https://vimeo.com/api/v2/video/' + id + '.json').then(function (data) {\n                resolve(data ? data.height / data.width : api.aspectratio);\n              }).catch(function (error) {\n                reject(error);\n              });\n            } else {\n              resolve(api.aspectratio);\n            }\n          } else {\n            resolve(api.aspectratio);\n          }\n        });\n      },\n      getId: function (src) {\n        var result = null;\n\n        if (api.isVideo(src)) {\n          src = getSrc(src);\n\n          switch (api.getType(src)) {\n            case 'youtube':\n              result = getYouTobeId(src);\n              break;\n\n            case 'vimeo':\n              result = getVimeoId(src);\n              break;\n            // no default\n          }\n        }\n\n        return result;\n      },\n      isVideo: function (src) {\n        var result = false;\n\n        if (isHtmlVideo(src)) {\n          result = true;\n        } else {\n          src = getSrc(src);\n\n          if (src) {\n            result = $J.contains(['youtube', 'vimeo'], api.getType(src));\n          }\n        }\n\n        return result;\n      },\n      getType: function (src) {\n        var result = null;\n\n        if (isHtmlVideo(src)) {\n          result = 'video';\n        } else {\n          src = getSrc(src);\n\n          if (src) {\n            if (/^(https?:)?\\/\\/((www\\.)?youtube\\.com|youtu\\.be)\\//.test(src)) {\n              result = 'youtube';\n            } else if (/^(https?:)?\\/\\/((www|player)\\.)?vimeo\\.com\\//.test(src)) {\n              result = 'vimeo';\n            }\n          }\n        }\n\n        return result;\n      },\n      getImageSrc: function (src, getAll) {\n        return new Promise(function (resolve, reject) {\n          var type;\n          var thumbUrl = null;\n          var id;\n          var node;\n\n          if (src && $(src) && $J.typeOf($(src).node) === 'element') {\n            node = src;\n          }\n\n          src = getSrc(src);\n\n          if (src) {\n            if (sources[src]) {\n              if (getAll) {\n                if (sources[src].all) {\n                  resolve(sources[src].all);\n                  return;\n                }\n              } else {\n                if (sources[src].url) {\n                  resolve(sources[src].url);\n                  return;\n                } else if (sources[src].all) {\n                  resolve(sources[src].all.thumbnail.url);\n                  return;\n                }\n              }\n            }\n\n            type = api.getType(node || src);\n\n            switch (type) {\n              case 'youtube':\n                id = getYouTobeId(src);\n\n                if (id) {\n                  if (getAll) {\n                    thumbUrl = {\n                      thumbnail: {\n                        url: 'https://img.youtube.com/vi/' + id + '/' + youtubeImgs.def1,\n                        width: 120,\n                        height: 90\n                      },\n                      medium: {\n                        url: 'https://img.youtube.com/vi/' + id + '/' + youtubeImgs.def0,\n                        width: 480,\n                        height: 360\n                      }\n                    };\n                  } else {\n                    thumbUrl = 'https://img.youtube.com/vi/' + id + '/' + youtubeImgs.def1;\n                  }\n\n                  if (!sources[src]) {\n                    sources[src] = {};\n                  }\n\n                  sources[src].aspectratio = api.aspectratio;\n\n                  if (getAll) {\n                    sources[src].all = thumbUrl;\n                  } else {\n                    sources[src].url = thumbUrl;\n                  }\n                }\n\n                resolve(thumbUrl);\n                break;\n\n              case 'vimeo':\n                id = getVimeoId(src);\n\n                if (id) {\n                  thumbUrl = 'https://vimeo.com/api/v2/video/' + id + '.json';\n                  getVimeoJSON(thumbUrl).then(function (data) {\n                    var imgUrl = null;\n\n                    if (data) {\n                      if (getAll) {\n                        imgUrl = {\n                          thumbnail: {\n                            url: data.thumbnail_small,\n                            width: 100,\n                            height: 75\n                          },\n                          medium: {\n                            url: data.thumbnail_medium,\n                            width: 200,\n                            height: 150\n                          }\n                        };\n                      } else {\n                        imgUrl = data.thumbnail_small;\n                      }\n                    }\n\n                    if (imgUrl) {\n                      if (!sources[src]) {\n                        sources[src] = {};\n                      }\n\n                      if (getAll) {\n                        sources[src].all = imgUrl;\n                      } else {\n                        sources[src].url = imgUrl;\n                      }\n\n                      sources[src].aspectratio = data.height / data.width;\n                    }\n\n                    resolve(imgUrl);\n                  }).catch(reject);\n                } else {\n                  resolve(thumbUrl);\n                }\n\n                break;\n\n              case 'video':\n                if (node) {\n                  node = $(node.node.cloneNode(true));\n\n                  if (node.attr) {\n                    thumbUrl = node.attr('poster');\n                  }\n\n                  if (thumbUrl && thumbUrl.trim() !== '') {\n                    if (!sources[src]) {\n                      sources[src] = {};\n                    }\n\n                    sources[src].aspectratio = api.aspectratio;\n\n                    if (getAll) {\n                      sources[src].all = {\n                        thumbnail: {\n                          url: thumbUrl,\n                          width: 200,\n                          height: 150\n                        },\n                        medium: {\n                          url: thumbUrl,\n                          width: 200,\n                          height: 150\n                        }\n                      };\n                      resolve(sources[src].all);\n                    } else {\n                      sources[src].url = thumbUrl;\n                      resolve(thumbUrl);\n                    }\n                  } else {\n                    var timeOfPoster = 0;\n                    var canvas = $J.$new('canvas');\n                    var context = canvas.node.getContext('2d');\n\n                    var clear = function () {\n                      // $J.$A(node.node.children).forEach(function (child) {\n                      //     child = $(child)\n                      //     if (child && child.getTagName() === 'source') {\n                      //         child.removeEvent('abort error');\n                      //     }\n                      // });\n                      node.removeEvent('loadedmetadata loadeddata abort error stalled');\n                      node.remove();\n                    };\n\n                    var addSrc = function () {\n                      var _src = node.attr('data-src');\n\n                      if (_src) {\n                        node.attr('src', _src);\n                      }\n\n                      $J.$A(node.node.children).forEach(function (child) {\n                        child = $(child);\n\n                        if (child && child.getTagName() === 'source') {\n                          _src = child.attr('data-src');\n\n                          if (_src) {\n                            child.attr('src', _src);\n                          }\n                        }\n                      });\n                    };\n\n                    addSrc();\n                    node.setCss({\n                      top: -100000,\n                      left: -100000,\n                      width: 200,\n                      height: 150,\n                      position: 'absolute'\n                    });\n                    node.muted = true;\n                    node.addEvent('loadedmetadata', function (e) {\n                      var size = node.getSize();\n\n                      if (!size.width || !size.height) {\n                        size.width = 200;\n                        size.height = 150;\n                      }\n\n                      node.setCss({\n                        width: size.width,\n                        height: size.height\n                      });\n                      canvas.node.width = size.width;\n                      canvas.node.height = size.height;\n\n                      if (timeOfPoster < node.node.duration) {\n                        node.node.currentTime = timeOfPoster;\n                      }\n                    }); // $J.$A(node.node.children).forEach(function (child) {\n                    //     child = $(child);\n                    //     if (child && child.getTagName() === 'source') {\n                    //         child.addEvent('abort error', function (e) {\n                    //             clear();\n                    //             callback(null);\n                    //         });\n                    //     }\n                    // });\n\n                    node.addEvent('loadeddata', function (e) {\n                      node.currentTime = timeOfPoster;\n                    });\n                    node.addEvent('abort error stalled', function (e) {\n                      clear();\n                      reject(null);\n                    });\n                    node.addEvent('seeked', function (e) {\n                      context.drawImage(node.node, 0, 0, canvas.node.width, canvas.node.height);\n                      clear();\n\n                      try {\n                        thumbUrl = canvas.node.toDataURL();\n                      } catch (ex) {// empty\n                      }\n\n                      if (thumbUrl) {\n                        if (!sources[src]) {\n                          sources[src] = {};\n                        }\n\n                        sources[src].aspectratio = api.aspectratio;\n\n                        if (getAll) {\n                          sources[src].all = {\n                            thumbnail: {\n                              url: thumbUrl,\n                              width: 200,\n                              height: 150\n                            },\n                            medium: {\n                              url: thumbUrl,\n                              width: 200,\n                              height: 150\n                            }\n                          };\n                          resolve(sources[src].all);\n                        } else {\n                          sources[src].url = thumbUrl;\n                          resolve(thumbUrl);\n                        }\n                      } else {\n                        resolve(thumbUrl);\n                      }\n                    });\n                    node.appendTo($J.D.node.body);\n                    node.node.load();\n                  }\n                } else {\n                  resolve(thumbUrl);\n                }\n\n                break;\n\n              default:\n                resolve(thumbUrl);\n            }\n          } else {\n            resolve(thumbUrl);\n          }\n        });\n      },\n      getSrc: getSrc,\n      getAPI: getAPI\n    };\n    return api;\n  }();\n\n  return helper;\n});"],"file":"helper-module.js"}