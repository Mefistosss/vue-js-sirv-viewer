{"version":3,"sources":["../classes/zoominstance.js"],"names":["Sirv","define","bHelpers","magicJS","HotspotInstance","ImageZoom","moduleName","$J","$","ZoomInstance","node","options","defaultSchema","zoom","upscale","defaultZoomOptions","zoomContainer","instanceNode","zoomClassName","api","extend","zoomIn","bind","zoomOut","isZoomed","setDefaultZoomOptions","test","smoothing","createZoom","zoomNode","destroyed","zoomOptions","setParent","onZoomGetImage","e","data","exactSize","maxSize","round","callbackData","lens","indexX","indexY","level","number","map","onZoomCancelLoadingOfTiles","onZoomBeforeShow","onZoomShown","onZoomHidden","setZoomEvents","on","stopAll","_isReady","getZoomData","isShown","isShowing","isZoomSizeExist","clearZoom","off","destroy"],"mappings":"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","sourcesContent":["Sirv.define(\n    'Zoominstance',\n    ['bHelpers','magicJS','HotspotInstance','ImageZoom'],\n    (bHelpers,magicJS,HotspotInstance,ImageZoom) => {\n        const moduleName = 'Zoominstance';\n        \n        const $J = magicJS;\n        const $ = $J.$;\n        \n        \n        /* eslint-env es6 */\n/* eslint-disable indent */\n/* global HotspotInstance */\n/* global ImageZoom */\n/* eslint-disable class-methods-use-this */\n/* eslint-disable no-unused-vars */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\n// eslint-disable-next-line no-unused-vars\nclass ZoomInstance extends HotspotInstance {\n    constructor(node, options, defaultSchema) {\n        super(node, options, defaultSchema);\n        this.zoom = null;\n        this.upscale = false;\n        this.defaultZoomOptions = {};\n        // this.zoomContainer = options.lensContainer;\n        this.zoomContainer = this.instanceNode;\n        this.zoomClassName = 'smv-zoomed-in';\n\n        this.api = $J.extend(this.api, {\n            zoomIn: this.zoomIn.bind(this),\n            zoomOut: this.zoomOut.bind(this),\n            isZoomed: this.isZoomed.bind(this), // new\n        });\n    }\n\n    setDefaultZoomOptions() {\n        this.defaultZoomOptions = {\n            test: false,\n            upscale: this.upscale,\n            smoothing: true\n        };\n    }\n\n    createZoom(zoomNode, options) {\n        if (!this.destroyed) {\n            let zoomOptions = $J.extend({}, this.defaultZoomOptions);\n            if (options) { zoomOptions = $J.extend(zoomOptions, options); }\n\n            this.zoom = new ImageZoom(this.instanceNode, zoomOptions);\n            this.zoom.setParent(this);\n\n            return zoomOptions;\n        }\n\n        return null;\n    }\n\n    onZoomGetImage(e) {\n        e.data.exactSize = true;\n        e.data.maxSize = false;\n        e.data.round = false;\n\n        e.data.callbackData = {\n            lens: true,\n            indexX: e.data.indexX,\n            indexY: e.data.indexY,\n            level: e.data.level,\n            number: e.data.number,\n            map: e.data.map\n        };\n    }\n\n    onZoomCancelLoadingOfTiles(e) {\n        if (!e.data.callbackData) { e.data.callbackData = {}; }\n        e.data.callbackData.lens = true;\n    }\n\n    onZoomBeforeShow(e) {}\n    onZoomShown(e) {}\n    onZoomHidden(e) {}\n\n    setZoomEvents() {\n        if (!this.zoom) { return; }\n\n        this.on('zoomGetImage', (e) => {\n            e.stopAll();\n            this.onZoomGetImage(e);\n        });\n\n        this.on('zoomCancelLoadingOfTiles', (e) => {\n            e.stopAll();\n            this.onZoomCancelLoadingOfTiles(e);\n        });\n\n        this.on('zoomBeforeShow', (e) => {\n            e.stopAll();\n            this.onZoomBeforeShow(e);\n        });\n\n        this.on('zoomShown', (e) => {\n            e.stopAll();\n            this.onZoomShown(e);\n        });\n\n        this.on('zoomHidden', (e) => {\n            e.stopAll();\n            this.onZoomHidden(e);\n        });\n    }\n\n    zoomIn() {\n        if (this._isReady) {\n            return true;\n        }\n\n        return false;\n    }\n\n    zoomOut() {\n        if (this._isReady) {\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Current zoom level from 0.00 to 1.00\n     * 0.00 - size of base image is equal size of zoom image\n     * 1.00 - max zoom\n     */\n    getZoomData() {\n        if (this._isReady && this.zoom) {\n            return this.zoom.getZoomData();\n        }\n\n        return 0;\n    }\n\n    // isZoomShown => isZoomed\n    isZoomed() {\n        if (this._isReady && this.zoom) {\n            return this.zoom.isShown() || this.zoom.isShowing();\n        }\n\n        return false;\n    }\n\n    isZoomSizeExist() {\n        return false;\n    }\n\n    clearZoom() {\n        if (this.zoom) {\n            this.off('zoomGetImage');\n            this.off('zoomCancelLoadingOfTiles');\n            this.off('zoomBeforeShow');\n            this.off('zoomShown');\n            this.off('zoomHidden');\n\n            this.zoom.destroy();\n            this.zoom = null;\n        }\n    }\n\n    destroy() {\n        this.clearZoom();\n        super.destroy();\n    }\n}\n\nreturn ZoomInstance;\n\n    }\n);\n"],"file":"zoominstance.js"}