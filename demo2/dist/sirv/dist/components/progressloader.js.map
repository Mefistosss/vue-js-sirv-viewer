{"version":3,"sources":["../classes/progressloader.js"],"names":["Sirv","define","bHelpers","magicJS","globalVariables","globalFunctions","helper","RoundLoader","moduleName","$J","$","rootDOM","addModuleCSSByName","svgNS","setDefaultOptions","options","width","height","max","createSvg","name","attributes","el","D","node","createElementNS","objEach","key","value","attr","getStrokeDashoffset","percent","getPercent","Math","round","PROGRESS","START","LOADING","END","ProgressLoader","parent","type","lineSize","currentLineSize","currentPersent","currentValue","progressState","maxOpacityFlag","maxOpacity","circles","size","state","APPEARANCE","HIDDEN","_createCircles","addClass","p","loaderElement","circleWrapper","$new","halfSize","push","r","cx","cy","svg","viewBox","style","strokeDasharray","strokeDashoffset","addEvent","e","stop","setCssProp","append","textWrapper","text","changeContent","progress","innerHTML","hide","setMaxOpacity","opacity","isEnded","isStarted","finishOff","isShow","SHOWN","show","getSize","removeEvent","setCss","display","transform","force","inDoc","countOfTransitionEvents","clearTimeout","timer","setTimeout","getProgressState","destroy"],"mappings":"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","sourcesContent":["Sirv.define(\n    'ProgressLoader',\n    ['bHelpers','magicJS','globalVariables','globalFunctions','helper','RoundLoader'],\n    (bHelpers,magicJS,globalVariables,globalFunctions,helper,RoundLoader) => {\n        const moduleName = 'ProgressLoader';\n        \n        const $J = magicJS;\n        const $ = $J.$;\n        \n        \n        /* start-removable-module-css */\n        globalFunctions.rootDOM.addModuleCSSByName(moduleName, () => {\n            return '.smv-progress-loader{pointer-events:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.smv-progress-loader .smv-pl-circle-wrapper,.smv-progress-loader .smv-pl-indicator,.smv-progress-loader .smv-pl-indicator .smv-pl-pie,.smv-progress-loader .smv-pl-indicator .smv-pl-slice,.smv-progress-loader .smv-pl-text-wrapper,.smv-progress-loader .smv-pl-wrapper{top:0;left:0;width:100%;height:100%}.smv-progress-loader .smv-pl-text-wrapper,.smv-progress-loader .smv-pl-wrapper{display:inline-block;position:relative}.smv-progress-loader .smv-pl-wrapper{transform:scale(0);transition:transform .15s cubic-bezier(.17,.67,.57,1.47),opacity .2s linear;border-radius:50%;background-color:rgba(0,0,0,.55);opacity:0}.smv-progress-loader .smv-pl-circle-wrapper,.smv-progress-loader .smv-pl-indicator,.smv-progress-loader .smv-pl-indicator .smv-pl-pie,.smv-progress-loader .smv-pl-indicator .smv-pl-slice{position:absolute}.smv-progress-loader .smv-pl-circle-wrapper,.smv-progress-loader .smv-pl-indicator{z-index:1}.smv-progress-loader .smv-pl-circle-wrapper{-webkit-animation:sirv-pl-loader-rotate 2s infinite linear;animation:sirv-pl-loader-rotate 2s infinite linear}.smv-progress-loader .smv-pl-indicator .smv-pl-pie,.smv-progress-loader .smv-pl-indicator .smv-pl-slice{stroke-width:2;fill:transparent}.smv-progress-loader .smv-pl-indicator .smv-pl-pie{z-index:1;stroke:rgba(255,255,255,.3)}.smv-progress-loader .smv-pl-indicator .smv-pl-slice{z-index:2;stroke:#fff;stroke-linecap:round}.smv-progress-loader .smv-pl-text-wrapper{display:inline-flex;position:relative;align-items:center;justify-content:center;font-size:12px;text-align:center;z-index:2}.smv-progress-loader .smv-pl-text-wrapper::after{display:inline-block;height:100%;content:\\'\\';vertical-align:middle}.smv-progress-loader .smv-pl-text-wrapper .smv-pl-text{display:inline;position:relative;color:#fff;font-weight:700}.smv-progress-loader .smv-pl-text-wrapper .smv-pl-text .smv-pl-text-percent{font-size:.7em}@-webkit-keyframes sirv-pl-loader-rotate{from{transform:rotateZ(0)}to{transform:rotateZ(360deg)}}@keyframes sirv-pl-loader-rotate{from{transform:rotateZ(0)}to{transform:rotateZ(360deg)}}';\n        });\n        /* end-removable-module-css */\n        \n        /* eslint-env es6 */\n/* global RoundLoader, helper, $J, $ */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\nconst svgNS = 'http://www.w3.org/2000/svg';\n\nconst setDefaultOptions = (options) => {\n    if (!options) { options = {}; }\n    if (!options.width) { options.width = 44; }\n    if (!options.height) { options.height = 44; }\n    if (!options.max) { options.max = 0; }\n    return options;\n};\n\nconst createSvg = (name, attributes) => {\n    const el = $($J.D.node.createElementNS(svgNS, name));\n\n    if (!attributes) {\n        attributes = {};\n    }\n\n    helper.objEach(attributes, (key, value) => {\n        el.attr(key, value);\n    });\n\n    return el;\n};\n\nconst getStrokeDashoffset = (max, percent) => {\n    return max - ((max / 100) * percent);\n};\n\nconst getPercent = (max, value) => {\n    return Math.round(100 / (max / value));\n};\n\nconst PROGRESS = {\n    START: 0,\n    LOADING: 1,\n    END: 2\n};\n\n// eslint-disable-next-line no-unused-vars\nclass ProgressLoader extends RoundLoader {\n    constructor(parent, options) {\n        options = setDefaultOptions(options);\n        super(parent, options);\n        this.type = 'progress';\n        this.lineSize = 125;\n        this.currentLineSize = 125;\n        this.currentPersent = 0;\n        this.currentValue = 0;\n        this.progressState = PROGRESS.START;\n        this.maxOpacityFlag = false;\n        this.maxOpacity = 1;\n        this.circles = [];\n        this.size = { width: this.options.width, height: this.options.height };\n\n        this.state = globalVariables.APPEARANCE.HIDDEN;\n\n        this._createCircles();\n    }\n\n    addClass() { this.node.addClass('smv-progress-loader'); }\n\n    _createCircles() {\n        this.p = '<span class=\"smv-pl-text-percent\">%</span>';\n        this.loaderElement.addClass('smv-pl-wrapper');\n        this.circleWrapper = $J.$new('div').addClass('smv-pl-circle-wrapper');\n\n        const size = this.size.width;\n        const halfSize = size / 2;\n\n        this.circles.push(createSvg('circle', {\n            'class': 'smv-pl-pie',\n            r: halfSize - 2,\n            cx: halfSize,\n            cy: halfSize\n        }));\n\n        this.circles.push(createSvg('circle', {\n            'class': 'smv-pl-slice',\n            r: halfSize - 2,\n            cx: halfSize,\n            cy: halfSize\n        }));\n\n        this.svg = createSvg('svg', {\n            'class': 'smv-pl-indicator',\n            viewBox: '0 0 ' + size + ' ' + size\n        });\n\n        this.circles[1].node.style.strokeDasharray = this.lineSize;\n        this.circles[1].node.style.strokeDashoffset = this.lineSize;\n\n        $(this.circles[1])\n            .addEvent('transitionend', (e) => { e.stop(); })\n            .setCssProp('transition', 'stroke-dashoffset .1s linear');\n\n        $(this.svg).append(this.circles[0]);\n        $(this.svg).append(this.circles[1]);\n\n        this.textWrapper = $J.$new('div').addClass('smv-pl-text-wrapper');\n        this.text = $J.$new('span').addClass('smv-pl-text');\n        this.text.changeContent(this.currentPersent + this.p);\n\n        this.textWrapper.append(this.text);\n        this.circleWrapper.append(this.svg);\n        this.loaderElement.append(this.circleWrapper);\n        this.loaderElement.append(this.textWrapper);\n    }\n\n    append() {\n        if (this.progressState !== PROGRESS.END) {\n            super.append();\n        }\n    }\n\n    progress() {\n        if (this.progressState !== PROGRESS.END) {\n            this.progressState = PROGRESS.LOADING;\n            this.currentValue += 1;\n            this.currentPersent = getPercent(this.options.max, this.currentValue);\n            this.currentLineSize = getStrokeDashoffset(this.lineSize, this.currentPersent);\n\n            this.circles[1].node.style.strokeDashoffset = this.currentLineSize;\n\n            this.text.node.innerHTML = this.currentPersent + this.p;\n\n            if (this.currentValue === this.options.max) {\n                this.progressState = PROGRESS.END;\n                this.hide();\n            }\n        }\n    }\n\n    setMaxOpacity(opacity) {\n        if (!this.maxOpacityFlag && this.loaderElement) {\n            this.maxOpacity = opacity;\n            this.maxOpacityFlag = true;\n            this.loaderElement.setCssProp('opacity', opacity);\n        }\n    }\n\n    isEnded() { return this.currentValue === this.options.max; }\n    isStarted() { return this.currentValue > 0; }\n    finishOff() { this.currentValue = this.options.max; }\n    isShow() { return this.state === globalVariables.APPEARANCE.SHOWN; }\n\n    show() {\n        if (this.state === globalVariables.APPEARANCE.SHOWN) { return; }\n        this.state = globalVariables.APPEARANCE.SHOWN;\n        this.append();\n        this.loaderElement.getSize();\n        this.loaderElement.removeEvent('transitionend');\n        this.loaderElement.addEvent('transitionend', (e) => { e.stop(); });\n\n        this.loaderElement.setCss({\n            display: 'block',\n            opacity: this.maxOpacity,\n            transform: 'scale(1)'\n        });\n    }\n\n    hide(force) {\n        if (this.state === globalVariables.APPEARANCE.HIDDEN && !force || !this.inDoc) { return; }\n        let countOfTransitionEvents = 0;\n        this.state = globalVariables.APPEARANCE.HIDDEN;\n\n        clearTimeout(this.timer);\n        this.timer = setTimeout(() => {\n            this.loaderElement.removeEvent('transitionend');\n            this.loaderElement.addEvent('transitionend', (e) => {\n                e.stop();\n                countOfTransitionEvents += 1;\n                if (countOfTransitionEvents < 2) { return; }\n                this.loaderElement.removeEvent('transitionend');\n                this.loaderElement.setCssProp('display', 'none');\n            });\n\n            this.loaderElement.setCss({\n                opacity: 0,\n                transform: 'scale(0)'\n            });\n        }, force ? 0 : 400);\n    }\n\n    getProgressState() {\n        return this.progressState;\n    }\n\n    destroy() {\n        this.hide(true);\n        clearTimeout(this.timer);\n        this.currentPersent = 0;\n        this.currentValue = 0;\n        this.progressState = PROGRESS.START;\n        this.state = globalVariables.APPEARANCE.HIDDEN;\n\n        this.loaderElement.removeEvent('transitionend');\n        this.loaderElement.node.innerHTML = '';\n        this.loaderElement = null;\n        this.circleWrapper = null;\n        this.textWrapper = null;\n        this.circles = [];\n        this.svg = null;\n        this.text = null;\n        this.inDoc = false;\n        super.destroy();\n    }\n}\n\nreturn ProgressLoader;\n\n    }\n);\n"],"file":"progressloader.js"}