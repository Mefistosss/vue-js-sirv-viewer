{"version":3,"sources":["../classes/eventmanager.js"],"names":["Sirv","define","bHelpers","magicJS","globalVariables","globalFunctions","EventEmitter","helper","moduleName","$J","$","EventManager","items","events","lazyimage","viewer","spin","zoom","image","video","reversedEvents","setEvents","eventsNameParser","eventName","result","typeOf","split","map","v","trim","filter","test","shift","length","triggerCustomEvent","eventType","element","detail","bubbles","cancelable","U","event","CustomEvent","e","D","createEvent","initEvent","ex","node","dispatchEvent","addReverseEvent","callback","componentName","push","callReverseCallback","eventData","i","l","splice","on","stopAll","stop","data","isReversed","type","extend","evs","forEach","slider","slide","component","componentEventData","objEach","key","value","iconsHash","remove","statsData","contains","addEvent","itemName","setTimeout","item","checkReadiness","sendEvent","removeEvent","index","indexOf"],"mappings":"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","sourcesContent":["Sirv.define(\n    'EventManager',\n    ['bHelpers','magicJS','globalVariables','globalFunctions','EventEmitter','helper'],\n    (bHelpers,magicJS,globalVariables,globalFunctions,EventEmitter,helper) => {\n        const moduleName = 'EventManager';\n        \n        const $J = magicJS;\n        const $ = $J.$;\n        \n        \n        /* global $, $J, EventEmitter, helper */\n/* eslint-env es6 */\n\n// eslint-disable-next-line no-unused-vars\nclass EventManager extends EventEmitter {\n    constructor(items) {\n        super();\n\n        this.items = items;\n\n        this.events = {\n            lazyimage: {},\n            viewer: {},\n            spin: {}, // viewer component\n            zoom: {}, // viewer component\n            image: {}, // viewer component\n            video: {} // viewer component\n        };\n\n        this.reversedEvents = [];\n        this.setEvents();\n    }\n\n    static eventsNameParser(eventName) {\n        let result = null;\n\n        if (eventName && $J.typeOf(eventName) === 'string') {\n            result = eventName.split(':')\n                .map((v) => { return v.trim(); })\n                .filter((v) => { return v !== ''; });\n\n            if (/sirv/i.test(result[0])) {\n                result.shift();\n            }\n\n            if (result.length < 2) {\n                result = null;\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Trigger a DOM event\n     * @param {String} eventType A name of the event.\n     * @param {DOM Element} element The targe DOM element.\n     * @param {Object} [detail] Additional event details.\n     * @param {Boolean} [bubbles] Defines whether the event should bubble up through the event chain or not.\n     * @param {Boolean} [cancelable] Defines whether the event can be canceled.\n     */\n    static triggerCustomEvent(eventType, element, detail, bubbles, cancelable) {\n        if (bubbles === $J.U) { bubbles = true; }\n        if (cancelable === $J.U) { cancelable = true; }\n\n        let event;\n        try {\n            event = new CustomEvent(eventType, {\n                bubbles: bubbles,\n                cancelable: cancelable,\n                detail: detail\n            });\n        } catch (e) {\n            try {\n                event = $J.D.createEvent('Event');\n                event.initEvent(eventType, bubbles, cancelable);\n                event.detail = detail;\n            } catch (ex) { /* empty */ }\n        }\n        if (event) {\n            element.node.dispatchEvent(event);\n        }\n    }\n\n    addReverseEvent(eventName, callback, componentName) {\n        this.reversedEvents.push({\n            eventName: eventName,\n            componentName: componentName,\n            callback: callback\n        });\n    }\n\n    callReverseCallback(componentName, eventName, eventData) {\n        let result = false;\n\n        for (let i = 0, l = this.reversedEvents.length; i < l; i++) {\n            if (this.reversedEvents[i].componentName === componentName && this.reversedEvents[i].eventName === eventName) {\n                this.reversedEvents[i].callback(eventData);\n                this.reversedEvents.splice(i, 1);\n                result = true;\n                break;\n            }\n        }\n\n        return result;\n    }\n\n    setEvents() {\n        this.on('destroy', (e) => {\n            e.stopAll();\n            globalFunctions.stop(e.data.node, 'viewer');\n        });\n\n        /*\n            'onLoad'\n        */\n        this.on('imagePublicEvent', (e) => {\n            e.stopAll();\n\n            const isReversed = this.callReverseCallback('lazyimage', e.data.type, e.data.image);\n\n            if (!isReversed) {\n                EventManager.triggerCustomEvent('sirv:lazyimage:' + e.data.type, e.data.node, $J.extend({}, e.data.image));\n\n                const evs = this.events.lazyimage[e.data.type];\n                if (evs) {\n                    evs.forEach((callback) => { callback(e.data.image); });\n                }\n            }\n        });\n\n        /*\n            viewer events\n            'ready', 'fullscreenIn', 'fullscreenOut', 'beforeSlideIn', 'beforeSlideOut', 'afterSlideIn', 'afterSlideOut', 'enableItem', 'disableItem'\n        */\n        this.on('viewerPublicEvent', (e) => {\n            e.stopAll();\n\n            let node;\n            let type;\n            let eventData;\n            let componentName = 'viewer';\n\n            if (e.data.slider.type === 'componentEvent') {\n                type = e.data.type;\n                eventData = $J.extend({}, e.data.slide[e.data.slide.component]);\n\n                componentName = e.data.slide.component;\n                if (e.data.node) {\n                    node = e.data.componentEventData.node;\n                }\n\n                helper.objEach(e.data.componentEventData, (key, value) => {\n                    if (key === 'node') {\n                        if (e.data.node) {\n                            eventData[key] = value.node;\n                        }\n                    } else if (key !== 'type') {\n                        eventData[key] = value;\n                    }\n                });\n            } else {\n                type = e.data.slider.type;\n\n                if (type === 'ready') {\n                    globalFunctions.iconsHash.remove();\n                }\n\n                if (e.data.node) {\n                    node = e.data.node;\n                }\n\n                if (e.data.slider) {\n                    eventData = e.data.slider;\n                    if (type === 'sendStats') {\n                        eventData.statsData = e.data.event;\n                    }\n                }\n\n                if ($J.contains([\n                    'beforeSlideIn',\n                    'beforeSlideOut',\n                    'afterSlideIn',\n                    'afterSlideOut',\n                    'enableItem',\n                    'disableItem',\n                    'thumbnailClick'\n                ], type)) {\n                    eventData = e.data.slide;\n                }\n            }\n\n            const isReversed = this.callReverseCallback(componentName, type, eventData);\n\n            if (!isReversed) {\n                if (node) {\n                    EventManager.triggerCustomEvent('sirv:' + componentName + ':' + type, node, $J.extend({}, eventData));\n                }\n\n                const evs = this.events[componentName][type];\n                if (evs) {\n                    evs.forEach((callback) => { callback(eventData); });\n                }\n            }\n        });\n\n\n        this.on((e) => { e.stopAll(); });\n    }\n\n    addEvent(eventName, callback) {\n        let result = () => { return false; };\n        const events = EventManager.eventsNameParser(eventName);\n\n        if (events && this.events[events[0]] && callback) {\n            if (!this.events[events[0]][events[1]]) {\n                this.events[events[0]][events[1]] = [];\n            }\n\n            this.events[events[0]][events[1]].push(callback);\n\n            if ($J.contains(['ready', 'init', 'onLoad'], events[1])) {\n                const itemName = events[0] === 'lazyimage' ? 'image' : 'viewer';\n\n                if (itemName === 'viewer' && events[1] !== 'onLoad' || events[1] === 'onLoad' && itemName === 'image') {\n                    /*\n                        we need the timeout because every event returns function which can remove this event\n\n                        for example:\n                        if event 'ready' already was\n                        and we set new one\n                        the variable 'removeReadyEvent' will be undefined\n\n                        const removeReadyEvent = Sirv.on('viewer:ready', (e) => {\n                            removeReadyEvent();\n                        });\n                    */\n                    setTimeout(() => {\n                        const items = this.items[itemName];\n                        items.forEach((item) => {\n                            if (item.checkReadiness(events[1], events[0])) {\n                                this.addReverseEvent(events[1], callback, events[0]);\n                                item.sendEvent(events[1], events[0]);\n                            }\n                        });\n                    }, 0);\n                }\n            }\n\n            result = () => { return this.removeEvent(eventName, callback); };\n        }\n\n        return result;\n    }\n\n    removeEvent(eventName, callback) {\n        const events = EventManager.eventsNameParser(eventName);\n\n        if (events && this.events[events[0]] && this.events[events[0]][events[1]]) {\n            if (callback) {\n                const index = this.events[events[0]][events[1]].indexOf(callback);\n                if (index >= 0) {\n                    this.events[events[0]][events[1]].splice(index, 1);\n                    return true;\n                }\n            } else {\n                delete this.events[events[0]][events[1]];\n                return true;\n            }\n        }\n\n        return false;\n    }\n}\n\nreturn EventManager;\n\n    }\n);\n"],"file":"eventmanager.js"}