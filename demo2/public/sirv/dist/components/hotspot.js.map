{"version":3,"sources":["../classes/hotspot.js"],"names":["Sirv","define","bHelpers","globalFunctions","magicJS","EventEmitter","helper","Promise","moduleName","$J","$","rootDOM","addModuleCSSByName","CSS_HOTSPOT_POINTER","CSS_HOTSPOT_POINTER_BACKWARD_COMPATIBILITY","CSS_HOTSPOT_TOOLTIP","CSS_HOTSPOT_DEFAULT","CSS_HOTSPOT_BOX","CSS_HOTSPOT_WRAPPER","CSS_HOTSPOT_BUTTON_CLOSE","CSS_HOTSPOT_CONTENT","CSS_HOTSPOT_BOX_OUT_OF_WIDTH","CSS_HOTSPOT_BOX_OUT_OF_HEIGHT","OVERWRITE_POINTER_EVENT","STATES","AUTO","VISIBLE","Hotspot","container","hotspotData","index","id","box","boxContainer","D","node","body","baseBoxSize","tooltip","version","pointer","hotspotSettings","dX","dY","isActive","isDisabled","isPointerInDoc","isHovered","isShown","isBoxContent","tooltipState","boxState","init","isTooltipHovered","isBoxActivated","isBoxAlwaysVisible","isTooltipAlwaysVisible","setVersion","parseHotspotData","createBlocks","setEvents","createBox","style","content","objEach","key","pointerPositionPercentage","top","isPercentage","y","left","x","$new","addClass","attr","changeContent","setTooltipPosition","pointerXY","getRect","cssTooltip","bottom","right","getTagName","getBoundingClientRect","width","setCss","showTooltip","appendTo","emit","data","hotspot","addEvent","e","stop","getButton","link","W","open","showBox","browser","uaName","ieMode","stopDistribution","hideTooltip","resizeTimer","clearTimeout","setTimeout","hotspotInfo","correctBoxPosition","getBoxPosition","boxContent","wrapper","append","hideBox","position","opacity","result","transform","boxX","boxY","fixed","boxBoundaries","parseFloat","getPosition","scroll","getScroll","removeClass","wSize","getSize","height","setBoxPosition","boxCss","setCssProp","setBaseBoxSize","fade","remove","changeBoxContainer","size","force","setHotspotSettings","settings","item","hasOwnProperty","call","getHotspotSettings","setAspectRatio","setPointerPosition","hss","Math","ceil","showPointer","dataStyle","hidePointer","isHotspotShown","show","SHOW","hide","isEnabled","enable","disable","overridePointerEvent","removeOverridePointerEvent","getId","setId","setState","dontShow","popup","rewriteAttrPointer","attribute","getHotspotPointer","destroy","clearEvents"],"mappings":"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","sourcesContent":["Sirv.define(\n    'Hotspot',\n    ['bHelpers','globalFunctions','magicJS','EventEmitter','helper','Promise!'],\n    (bHelpers,globalFunctions,magicJS,EventEmitter,helper,Promise) => {\n        const moduleName = 'Hotspot';\n        \n        const $J = magicJS;\n        const $ = $J.$;\n        \n        \n        /* start-removable-module-css */\n        globalFunctions.rootDOM.addModuleCSSByName(moduleName, () => {\n            return '@charset \"UTF-8\";.sirv-hotspot-pointer{display:inline-block;position:absolute;width:20px;height:20px;transform:translate(-50%,-50%);background-repeat:no-repeat;cursor:pointer;z-index:11;pointer-events:auto}.sirv-hotspot-pointer.pulsating-point{background-image:none}.sirv-hotspot-pointer.pulsating-point::after,.sirv-hotspot-pointer.pulsating-point::before{display:inline-block;position:absolute;top:0;left:0;width:100%;height:100%;transform-origin:50% 50%;border-radius:100%;content:\\'\\'}.sirv-hotspot-pointer.pulsating-point::before{transition:opacity .2s ease-in,transform .1s ease-out;background-color:#ff0;opacity:.6;overflow:hidden}.sirv-hotspot-pointer.pulsating-point::after{border:1px solid #ff0;opacity:0;box-sizing:border-box;-webkit-animation:pulsating-point-pulsate 3s ease-out infinite;animation:pulsating-point-pulsate 3s ease-out infinite;pointer-events:none}.sirv-hotspot-pointer.pulsating-point:hover::before{cursor:pointer;opacity:.8}.sirv-hotspot-pointer.pulsating-point:active::before{transform:scale(.875)}.sirv-hotspot-pointer.pulsating-point:hover::after{-webkit-animation:none;animation:none}.sirv-hotspot-pointer.pulsating-point:active::after{-webkit-animation:pulsating-point-stop-pulsate .3s;animation:pulsating-point-stop-pulsate .3s}@-webkit-keyframes pulsating-point-pulsate{0%{transform:scale(1);opacity:.8}45%{transform:scale(1.75);opacity:0}}@keyframes pulsating-point-pulsate{0%{transform:scale(1);opacity:.8}45%{transform:scale(1.75);opacity:0}}@-webkit-keyframes pulsating-point-stop-pulsate{from{opacity:.4}to{transform:scale(2);opacity:0}}@keyframes pulsating-point-stop-pulsate{from{opacity:.4}to{transform:scale(2);opacity:0}}.sirv-hotspot-tooltip{display:block;position:absolute;padding:8px 24px;transition:opacity .15s linear 0s;border:1px solid #efefef;border-radius:4px;background-color:#fff;font:normal 12px/1.42857 \\'Lucida Grande\\',\\'Lucida Sans Unicode\\',Verdana,\\'Helvetica Neue\\',Arial,Helvetica,sans-serif;border-collapse:separate;box-shadow:0 5px 10px 2px rgba(0,0,0,.1);opacity:0;z-index:9999999999;pointer-events:none;-webkit-font-smoothing:antialiased}.sirv-hotspot-tooltip--default{margin-top:-8px;padding:6px 9px;transform:translate(-50%,-100%);border:0;background-color:rgba(49,51,61,.76);color:#eee}.sirv-hotspot-tooltip--default::after{position:absolute;top:100%;left:50%;width:0;height:0;transform:translateX(-50%);border-width:8px 8px 0;border-style:solid;border-color:rgba(49,51,61,.76) transparent transparent;content:\\'\\'}.sirv-hotspot-tooltip--balloon{margin-top:-40px;transform:translate(-40px,-100%)}.sirv-hotspot-tooltip--balloon::after{position:absolute;top:100%;left:24px;width:0;height:0;border-width:0 15px 40px 0;border-style:solid;border-color:transparent #fff transparent transparent;content:\\'\\'}.sirv-hotspot-tooltip.sirv-hotspot-tooltip-visible{transition-delay:.1s;opacity:1}.sirv-hotspot-box{display:flex;position:fixed;max-width:100vw;max-height:100vh;padding:10px;transition:opacity .15s linear 0s;z-index:9999999999;box-sizing:border-box}.sirv-hotspot-box.sirv-hotspot-box-out-of-width{right:0!important;left:0!important}.sirv-hotspot-box.sirv-hotspot-box-out-of-height{top:0!important;bottom:0!important}.sirv-hotspot-box .sirv-hotspot-box-wrapper{display:flex;position:relative;max-width:inherit;max-height:inherit;padding:22px;border:1px solid #efefef;border-radius:4px;background:#fff;font-size:16px!important;line-height:100%;text-align:left;border-collapse:separate;box-shadow:0 5px 10px 2px rgba(0,0,0,.1);overflow:hidden;box-sizing:border-box}.sirv-hotspot-box .sirv-hotspot-box-content{top:0;left:0;width:100%;max-width:inherit;height:calc(100% + 2px);max-height:inherit;overflow:auto}.sirv-hotspot-box .sirv-hotspot-close-button{position:absolute;top:2px;right:2px;width:24px;height:24px;color:#888;font:normal 22px/1 Arial,monospace;text-align:center;cursor:pointer;speak:none;-webkit-font-smoothing:antialiased}.sirv-hotspot-box .sirv-hotspot-close-button::before{display:inline;position:static;color:inherit!important;font:inherit!important;content:\\'×\\';vertical-align:middle;-webkit-font-smoothing:inherit!important}';\n        });\n        /* end-removable-module-css */\n        \n        /* eslint-env es6 */\n/* global EventEmitter */\n/* global helper */\n/* eslint-disable no-restricted-syntax */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\", \"varsIgnorePattern\": \"Hotspot\" }] */\n\n\nconst CSS_HOTSPOT_POINTER = 'sirv-hotspot-pointer';\nconst CSS_HOTSPOT_POINTER_BACKWARD_COMPATIBILITY = 'hotspot-pointer';\nconst CSS_HOTSPOT_TOOLTIP = 'sirv-hotspot-tooltip';\nconst CSS_HOTSPOT_DEFAULT = 'pulsating-point';\nconst CSS_HOTSPOT_BOX = 'sirv-hotspot-box';\nconst CSS_HOTSPOT_WRAPPER = 'sirv-hotspot-box-wrapper';\nconst CSS_HOTSPOT_BUTTON_CLOSE = 'sirv-hotspot-close-button';\nconst CSS_HOTSPOT_CONTENT = 'sirv-hotspot-box-content';\nconst CSS_HOTSPOT_BOX_OUT_OF_WIDTH = 'sirv-hotspot-box-out-of-width';\nconst CSS_HOTSPOT_BOX_OUT_OF_HEIGHT = 'sirv-hotspot-box-out-of-height';\n\nconst OVERWRITE_POINTER_EVENT = 'sirv-hotspot-overwrite-pointer-event';\n\nconst STATES = {\n    AUTO: 0,\n    VISIBLE: 1\n};\n\nclass Hotspot extends EventEmitter {\n    constructor(container, hotspotData, index) {\n        super();\n        this.container = container;\n        this.hotspotData = hotspotData;\n        this.id = index;\n\n        this.box = null;\n        this.boxContainer = $J.D.node.body;\n        this.baseBoxSize = null;\n        this.tooltip = null;\n        this.version = 1;\n        this.pointer = null;\n\n        this.hotspotSettings = {};\n\n        this.dX = 1;\n        this.dY = 1;\n\n        this.isActive = false;\n        this.isDisabled = false;\n        this.isPointerInDoc = false;\n        this.isHovered = false;\n        this.isShown = false;\n\n        this.isBoxContent = false;\n\n        this.tooltipState = STATES.AUTO;\n        this.boxState = STATES.AUTO;\n\n        this.init();\n    }\n\n    isTooltipHovered() {\n        return this.isHovered;\n    }\n\n    isBoxActivated() {\n        return this.isActive;\n    }\n\n    isBoxAlwaysVisible() {\n        return this.boxState === STATES.VISIBLE;\n    }\n\n    isTooltipAlwaysVisible() {\n        return this.tooltipState === STATES.VISIBLE;\n    }\n\n    init() {\n        this.setVersion();\n        this.parseHotspotData();\n        this.createBlocks();\n        this.setEvents();\n        this.createBox();\n    }\n\n    setVersion() {\n        if (this.hotspotData.style || this.hotspotData.tooltip || this.hotspotData.box && this.hotspotData.box.content) {\n            this.version = 2;\n        }\n    }\n\n    parseHotspotData() {\n        helper.objEach(this.hotspotData, (key) => {\n            this.hotspotSettings[key] = this.hotspotData[key];\n        });\n\n        this.hotspotSettings.pointerPositionPercentage = {\n            top: helper.isPercentage('' + this.hotspotSettings.pointer.y),\n            left: helper.isPercentage('' + this.hotspotSettings.pointer.x)\n        };\n    }\n\n    createBlocks() {\n        this.pointer = $J.$new('div').addClass(CSS_HOTSPOT_POINTER).attr('data-spot-id', this.id);\n        this.pointer.addClass(CSS_HOTSPOT_POINTER_BACKWARD_COMPATIBILITY);\n        if (this.version > 1 && this.hotspotSettings.tooltip && this.hotspotSettings.tooltip.content) {\n            this.tooltip = $J.$new('div').addClass(CSS_HOTSPOT_TOOLTIP).changeContent(this.hotspotSettings.tooltip.content);\n\n            if (this.hotspotSettings.tooltip.style) {\n                this.tooltip.addClass(CSS_HOTSPOT_TOOLTIP + '--' + this.hotspotSettings.tooltip.style);\n            }\n        }\n    }\n\n    setTooltipPosition() {\n        if (this.tooltip) {\n            let pointerXY = this.pointer.getRect();\n            const cssTooltip = { top: 0, left: 0 };\n\n            cssTooltip.top = this.hotspotSettings.tooltip.style ? pointerXY.top : pointerXY.bottom;\n            cssTooltip.left = this.hotspotSettings.tooltip.style ? (pointerXY.left + pointerXY.right) / 2 : pointerXY.right\n\n\n            if ($J.$(this.boxContainer).getTagName() !== 'body') {\n                pointerXY = this.pointer.node.getBoundingClientRect();\n\n                cssTooltip.top = this.hotspotSettings.tooltip.style ? pointerXY.top - this.container.node.getBoundingClientRect().top\n                    : pointerXY.bottom - this.container.node.getBoundingClientRect().top;\n                cssTooltip.left = this.hotspotSettings.tooltip.style ? (pointerXY.left - this.container.node.getBoundingClientRect().left) + (pointerXY.width / 2)\n                    : pointerXY.left - this.container.node.getBoundingClientRect().left + pointerXY.width;\n            }\n\n            this.tooltip.setCss(cssTooltip);\n        }\n    }\n\n    showTooltip() {\n        if (!this.isHovered && !this.isDisabled) {\n            if (this.tooltip) {\n                this.setTooltipPosition();\n\n                this.tooltip.appendTo(this.boxContainer)\n                    .addClass(CSS_HOTSPOT_TOOLTIP + '-visible');\n\n                this.isHovered = true;\n                this.emit('hotspotHovered', {\n                    data: { hotspot: this }\n                });\n            }\n        }\n    }\n\n    setEvents() {\n        this.pointer.addEvent('click mousedown', (e) => { e.stop(); });\n\n        this.pointer.addEvent('btnclick tap', (e) => {\n            if (e.getButton() === 3) { return true; }\n            if (this.hotspotSettings.link) {\n                $J.W.node.open(this.hotspotSettings.link);\n                e.stop();\n            } else if (this.isBoxContent) {\n                e.stop();\n                this.showBox();\n            }\n\n            return false;\n        });\n\n        if ($J.browser.uaName === 'edge' || $J.browser.ieMode) {\n            this.pointer.addEvent('mousedown', (e) => {\n                e.stopDistribution();\n            });\n        }\n\n        if (this.hotspotSettings.tooltip && this.hotspotSettings.tooltip.content) {\n            this.pointer.addEvent('mouseenter', (e) => {\n                this.showTooltip();\n            });\n\n            this.pointer.addEvent('mouseleave', () => {\n                if (this.tooltipState !== STATES.VISIBLE) {\n                    this.hideTooltip();\n                    this.isHovered = false;\n                    this.emit('hotspotLeft', {\n                        data: { hotspot: this }\n                    });\n                }\n            });\n        }\n\n        let resizeTimer;\n        $($J.W).addEvent('resize', (e) => {\n            clearTimeout(resizeTimer);\n            resizeTimer = setTimeout(() => {\n                if (this.isActive) {\n                    const hotspotInfo = this.hotspotSettings;\n                    if (hotspotInfo) {\n                        this.box.setCss(this.correctBoxPosition(this.getBoxPosition(hotspotInfo)));\n                    }\n                }\n            }, 42);\n        });\n    }\n\n    createBox() {\n        let boxContent = null;\n\n        if (this.version > 1 && this.hotspotSettings.box && this.hotspotSettings.box.content) {\n            boxContent = this.hotspotSettings.box.content;\n        } else if (this.hotspotSettings.data) {\n            boxContent = this.hotspotSettings.data;\n        }\n\n        this.box = $J.$new('div').addClass(CSS_HOTSPOT_BOX);\n\n        if (boxContent) {\n            this.isBoxContent = true;\n            const wrapper = $J.$new('div').addClass(CSS_HOTSPOT_WRAPPER)\n                .append(\n                    $J.$new('div')\n                        .addEvent('btnclick tap', (e) => {\n                            if (this.boxState !== STATES.VISIBLE) {\n                                e.stop();\n                                this.hideBox(true);\n                            }\n                        })\n                        .addClass(CSS_HOTSPOT_BUTTON_CLOSE)\n                );\n\n            const content = $J.$new('div').addClass(CSS_HOTSPOT_CONTENT)\n                .changeContent(boxContent + '')\n                .addEvent('click', (e) => { e.stopDistribution(); });\n\n            wrapper.append(content);\n            this.box.append(wrapper);\n        }\n\n        this.box.setCss({\n            top: '-10000px',\n            left: '-10000px',\n            position: 'absolute',\n            opacity: 0\n        });\n    }\n\n    getBoxPosition(hotspotInfo) {\n        const result = {\n            top: 0,\n            left: 0,\n            transform: ''\n        };\n\n        if (hotspotInfo && hotspotInfo.box) {\n            const boxX = hotspotInfo.box.x;\n            const boxY = hotspotInfo.box.y;\n\n            if (this.hotspotSettings.box.fixed) {\n                const boxBoundaries = this.container.getRect();\n\n                result.position = 'absolute';\n                if ($J.$(this.boxContainer).getTagName() !== 'body') {\n                    switch (boxY) {\n                        case 'top':\n                            result.top = 0;\n                            break;\n                        case 'bottom':\n                            result.top = boxBoundaries.bottom - boxBoundaries.top;\n                            result.transform += ' translateY(-100%)';\n                            break;\n                        case 'center':\n                            result.top = (0 + (boxBoundaries.bottom - boxBoundaries.top)) / 2;\n                            result.transform += ' translateY(-50%)';\n                            break;\n                        default:\n                            result.top = 0 + (parseFloat(boxY) || 0);\n                    }\n\n                    switch (boxX) {\n                        case 'left':\n                            result.left = 0;\n                            break;\n                        case 'right':\n                            result.left = boxBoundaries.right - boxBoundaries.left;\n                            result.transform += ' translateX(-100%)';\n                            break;\n                        case 'center':\n                            result.left = (boxBoundaries.right - boxBoundaries.left) / 2;\n                            result.transform += ' translateX(-50%)';\n                            break;\n                        default:\n                            result.left = boxBoundaries.left + (parseFloat(boxX) || 0);\n                    }\n                } else {\n                    switch (boxY) {\n                        case 'top':\n                            result.top = boxBoundaries.top;\n                            break;\n                        case 'bottom':\n                            result.top = boxBoundaries.bottom;\n                            result.transform += ' translateY(-100%)';\n                            break;\n                        case 'center':\n                            result.top = (boxBoundaries.top + boxBoundaries.bottom) / 2;\n                            result.transform += ' translateY(-50%)';\n                            break;\n                        default:\n                            result.top = boxBoundaries.top + (parseFloat(boxY) || 0);\n                    }\n\n                    switch (boxX) {\n                        case 'left':\n                            result.left = boxBoundaries.left;\n                            break;\n                        case 'right':\n                            result.left = boxBoundaries.right;\n                            result.transform += ' translateX(-100%)';\n                            break;\n                        case 'center':\n                            result.left = (boxBoundaries.left + boxBoundaries.right) / 2;\n                            result.transform += ' translateX(-50%)';\n                            break;\n                        default:\n                            result.left = boxBoundaries.left + (parseFloat(boxX) || 0);\n                    }\n                }\n            } else {\n                const pointerXY = this.pointer.getPosition();\n                const scroll = $J.W.getScroll();\n\n                result.left = pointerXY.left - scroll.x + (parseFloat(boxX) || 0);\n                result.top = pointerXY.top - scroll.y + (parseFloat(boxY) || 0);\n            }\n        }\n\n        return result;\n    }\n\n    correctBoxPosition(position) {\n        if (this.hotspotSettings.box && !this.hotspotSettings.box.fixed) {\n            this.box.removeClass(CSS_HOTSPOT_BOX_OUT_OF_WIDTH);\n            this.box.removeClass(CSS_HOTSPOT_BOX_OUT_OF_HEIGHT);\n\n            const wSize = $J.W.getSize();\n            if (this.baseBoxSize.width > wSize.width) {\n                this.box.addClass(CSS_HOTSPOT_BOX_OUT_OF_WIDTH);\n            } else if (position.left + this.baseBoxSize.width > wSize.width) {\n                position.left = wSize.width - this.baseBoxSize.width;\n            }\n\n            if (this.baseBoxSize.height > wSize.height) {\n                this.box.addClass(CSS_HOTSPOT_BOX_OUT_OF_HEIGHT);\n            } else if (position.top + this.baseBoxSize.height > wSize.height) {\n                position.top = wSize.height - this.baseBoxSize.height;\n            }\n        }\n\n        return position;\n    }\n\n    setBoxPosition() {\n        let boxCss = { transform: '' };\n        boxCss = this.correctBoxPosition(this.getBoxPosition(this.hotspotSettings));\n\n        this.box.setCssProp('position', '');\n        this.box.setCss(boxCss).getSize();\n    }\n\n    showBox() {\n        if (this.isActive || this.isDisabled) { return; }\n\n        if (this.tooltip && this.tooltipState === STATES.AUTO) {\n            this.tooltip.removeClass(CSS_HOTSPOT_TOOLTIP + '-visible');\n        }\n\n        this.box.setCss({ opacity: 0 });\n        this.box.appendTo(this.boxContainer);\n        this.setBaseBoxSize(this.box.getSize());\n\n        this.setBoxPosition();\n\n        this.box.setCss({ opacity: 1 });\n\n        this.isActive = true;\n        this.emit('hotspotActivate', {\n            data: { hotspot: this }\n        });\n    }\n\n    hideBox(fade) {\n        if (this.isActive) {\n            if (fade) {\n                if (this.box) {\n                    this.box.setCssProp('opacity', 0);\n                }\n                setTimeout(() => { this.hideBox(); }, 300);\n                return this.id;\n            }\n            if (this.box) {\n                this.box.remove();\n            }\n\n            this.isActive = false;\n            this.emit('hotspotDeactivate', {\n                data: { hotspot: this }\n            });\n        }\n\n        return this.id;\n    }\n\n    changeBoxContainer(container) {\n        this.boxContainer = container ?? $J.D.node.body;\n    }\n\n    setBaseBoxSize(size, force) {\n        if (size && force || !this.baseBoxSize) {\n            this.baseBoxSize = { width: size.width, height: size.height };\n        }\n    }\n\n    setHotspotSettings(settings) {\n        for (const item in settings) {\n            if ({}.hasOwnProperty.call(settings, item)) {\n                this.hotspotSettings[item] = settings[item];\n            }\n        }\n    }\n\n    getHotspotSettings(settings) {\n        return this.hotspotSettings;\n    }\n\n    setAspectRatio(x, y) {\n        this.dX = x;\n        this.dY = y;\n    }\n\n    setPointerPosition() {\n        const hss = this.hotspotSettings;\n\n        if (hss) {\n            this.pointer.setCss({\n                top: hss.pointerPositionPercentage.top ? hss.pointer.y : Math.ceil(hss.pointer.y * this.dY),\n                left: hss.pointerPositionPercentage.left ? hss.pointer.x : Math.ceil(hss.pointer.x * this.dX)\n            });\n        }\n    }\n\n    showPointer() {\n        if (this.hotspotSettings && !this.isDisabled) {\n            this.pointer.addClass(CSS_HOTSPOT_DEFAULT);\n            this.setPointerPosition();\n\n            if (this.hotspotSettings.style || this.hotspotSettings.pointer.style) {\n                let dataStyle = this.hotspotSettings.style;\n                if (!dataStyle) {\n                    dataStyle = this.hotspotSettings.pointer.style;\n                }\n\n                this.pointer.addClass(dataStyle);\n            }\n\n            if (!this.isPointerInDoc) {\n                this.isPointerInDoc = true;\n                this.pointer.appendTo(this.container);\n            }\n        } else {\n            this.hidePointer();\n        }\n    }\n\n    hidePointer() {\n        if (this.isPointerInDoc) {\n            this.isPointerInDoc = false;\n            this.pointer.remove();\n        }\n    }\n\n    isHotspotShown() {\n        return this.isShown;\n    }\n\n    show() {\n        if (!this.isDisabled && !this.isShown) {\n            this.isShown = true;\n            this.showPointer();\n\n            if (this.boxState === STATES.SHOW) {\n                this.showBox();\n            }\n\n            if (this.tooltipState === STATES.SHOW) {\n                this.showTooltip();\n            }\n        }\n    }\n\n    hide() {\n        if (this.isShown) {\n            this.isShown = false;\n            this.hideBox();\n            this.hideTooltip();\n            this.hidePointer();\n        }\n    }\n\n    isEnabled() {\n        return !this.isDisabled;\n    }\n\n    enable() {\n        if (this.isDisabled) {\n            this.isDisabled = false;\n            // this.show();\n        }\n    }\n\n    disable() {\n        if (!this.isDisabled) {\n            this.isDisabled = true;\n            this.hide();\n        }\n    }\n\n    hideTooltip() {\n        if (this.isHovered) {\n            this.isHovered = false;\n            if (this.tooltip) {\n                this.tooltip.removeClass(CSS_HOTSPOT_TOOLTIP + '-visible');\n            }\n        }\n    }\n\n    overridePointerEvent() {\n        if (!this.isBoxAlwaysVisible() && !this.isTooltipAlwaysVisible()) {\n            this.container.addClass(OVERWRITE_POINTER_EVENT);\n        }\n    }\n\n    removeOverridePointerEvent() {\n        this.container.removeClass(OVERWRITE_POINTER_EVENT);\n    }\n\n    getId() {\n        return this.id;\n    }\n\n    setId(id) {\n        this.id = id;\n    }\n\n    setState(settings, dontShow) { // For popup, tooltip, pointer - 1 - 'visible' | 0 - 'initial'\n        if (this.boxState !== settings.popup) {\n            this.boxState = settings.popup;\n            if (settings.popup === STATES.VISIBLE) {\n                if (!dontShow) {\n                    this.showBox();\n                }\n            } else {\n                this.hideBox();\n            }\n        }\n\n        if (this.tooltipState !== settings.tooltip) {\n            this.tooltipState = settings.tooltip;\n            if (settings.tooltip === STATES.VISIBLE) {\n                if (!dontShow) {\n                    this.showTooltip();\n                }\n            } else {\n                this.hideTooltip();\n            }\n        }\n    }\n\n    rewriteAttrPointer(attr) {\n        const attribute = attr || this.id;\n        this.pointer.attr('data-spot-id', attribute);\n    }\n\n    getHotspotPointer() {\n        return this.pointer;\n    }\n\n    destroy() {\n        this.hideBox();\n        this.hideTooltip();\n        this.hotspotData = null;\n        this.container = null;\n\n        this.id = null;\n\n        this.pointer.clearEvents();\n        if (this.tooltip) {\n            this.tooltip.clearEvents();\n        }\n\n        this.pointer.remove();\n\n        this.box = null;\n        this.boxContainer = null;\n        this.baseBoxSize = null;\n        this.tooltip = null;\n        this.version = null;\n        this.pointer = null;\n        this.hotspotSettings = null;\n\n        this.isActive = false;\n        this.isDisabled = false;\n        this.isPointerInDoc = false;\n        this.isHovered = false;\n\n        super.destroy();\n    }\n}\n\nreturn Hotspot;\n\n    }\n);\n"],"file":"hotspot.js"}