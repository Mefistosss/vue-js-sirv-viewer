{"version":3,"sources":["../classes/roundloader.js"],"names":["Sirv","define","bHelpers","magicJS","globalVariables","globalFunctions","helper","Loader","moduleName","$J","$","rootDOM","addModuleCSSByName","SHOW_CLASS","RoundLoader","parent","options","type","state","APPEARANCE","HIDDEN","timer","loaderElement","$new","addClass","node","append","isHiding","HIDING","show","contains","SHOWING","SHOWN","setTimeout","removeEvent","addEvent","e","stop","getSize","hide","force","clearTimeout","remove","inDoc","removeClass","destroy","innerHTML"],"mappings":"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","sourcesContent":["Sirv.define(\n    'RoundLoader',\n    ['bHelpers','magicJS','globalVariables','globalFunctions','helper','Loader'],\n    (bHelpers,magicJS,globalVariables,globalFunctions,helper,Loader) => {\n        const moduleName = 'RoundLoader';\n        \n        const $J = magicJS;\n        const $ = $J.$;\n        \n        \n        /* start-removable-module-css */\n        globalFunctions.rootDOM.addModuleCSSByName(moduleName, () => {\n            return '.smv-round-loader{width:44px;height:44px;transition:opacity .3s linear;line-height:100%;opacity:0}.smv-round-loader.smv-show{opacity:.7}.smv-round-loader>div{display:block;position:relative;top:0;left:0;width:100%;height:100%;border-radius:100%;background-color:rgba(0,0,0,.7);-webkit-animation:smv-round-loader 1.5s linear infinite;animation:smv-round-loader 1.5s linear infinite}.smv-round-loader>div::before{display:inline-block;position:absolute;top:50%;left:50%;width:77%;height:77%;transform:translate(-50%,-50%);border:2px solid #fff;border-radius:50%;border-right-color:transparent;content:\\'\\';box-sizing:border-box}@-webkit-keyframes smv-round-loader{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes smv-round-loader{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}';\n        });\n        /* end-removable-module-css */\n        \n        /* eslint-env es6 */\n/* global Loader */\n/* global $J */\n/* eslint-disable indent */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n\nconst SHOW_CLASS = 'smv-show';\n\n// eslint-disable-next-line no-unused-vars\nclass RoundLoader extends Loader {\n    constructor(parent, options) {\n        super(parent, options);\n        this.type = 'round';\n\n        this.state = globalVariables.APPEARANCE.HIDDEN;\n        this.timer = null;\n\n        this.loaderElement = $J.$new('div');\n\n        this.addClass();\n        this.node.append(this.loaderElement);\n    }\n\n    addClass() { this.node.addClass('smv-round-loader'); }\n\n    isHiding() {\n        return this.state === globalVariables.APPEARANCE.HIDING;\n    }\n\n    show() {\n        if ($J.contains([globalVariables.APPEARANCE.SHOWING, globalVariables.APPEARANCE.SHOWN], this.state)) { return; }\n        this.state = globalVariables.APPEARANCE.SHOWING;\n        this.timer = setTimeout(() => {\n            this.timer = null;\n            this.append();\n\n            this.node.removeEvent('transitionend');\n            this.node.addEvent('transitionend', (e) => {\n                e.stop();\n                this.state = globalVariables.APPEARANCE.SHOWN;\n            });\n            this.node.getSize(); // render\n            this.node.addClass(SHOW_CLASS);\n        }, 250);\n    }\n\n    hide(force) {\n        if (this.state === globalVariables.APPEARANCE.HIDDEN && !force) { return; }\n        clearTimeout(this.timer);\n        this.node.removeEvent('transitionend');\n\n        if (this.state !== globalVariables.APPEARANCE.SHOWN) { force = true; }\n        this.state = globalVariables.APPEARANCE.HIDING;\n\n        if (!force) {\n            this.node.addEvent('transitionend', (e) => {\n                e.stop();\n                this.node.remove();\n                this.inDoc = false;\n                this.state = globalVariables.APPEARANCE.HIDDEN;\n            });\n        } else {\n            this.node.remove();\n            this.inDoc = false;\n            this.state = globalVariables.APPEARANCE.HIDDEN;\n        }\n\n        this.node.removeClass(SHOW_CLASS);\n    }\n\n    destroy() {\n        this.hide(true);\n        this.state = globalVariables.APPEARANCE.HIDDEN;\n        this.node.innerHTML = '';\n        super.destroy();\n    }\n}\n\nreturn RoundLoader;\n\n    }\n);\n"],"file":"roundloader.js"}