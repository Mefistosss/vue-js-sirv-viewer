{"version":3,"sources":["../classes/instance.js"],"names":["Sirv","define","bHelpers","magicJS","Promise","globalVariables","BaseInstance","helper","moduleName","$J","$","createError","name","Error","Instance","node","options","defaultSchema","type","SLIDE","TYPES","NONE","always","quality","hdQuality","isHDQualitySet","isFullscreenEnabled","isFullscreen","dataAlt","isSlideShown","isInView","preload","firstSlideAhead","infoSize","pinchCloud","onLoad","waitToStart","WaitToStart","waitGettingInfo","gettingInfoPromise","fullscreenState","FULLSCREEN","CLOSED","on","e","data","component","NAMES","sendEvent","typeOfEvent","event","id","url","instanceUrl","timestamp","Date","emit","onStartActions","onStopActions","onInView","value","onBeforeFullscreenIn","onAfterFullscreenIn","onBeforeFullscreenOut","onAfterFullscreenOut","onMouseAction","onSecondSelectorClick","onStopContext","loadContent","loadThumbnail","destroyed","start","startGettingInfo","startFullInit","isStartedFullInit","instanceNode","attr","stop","who","iv","setEvents","isFullscreenActionEnded","contains","OPENED","OPENING","CLOSING","getOriginImageUrl","getSelectorImgUrl","reject","getInfoSize","run","isShown","result","getThumbnailData","src","getSocialButtonData","opt","width","height","thumbnailData","createPinchEvent","isAdded","pinch","scale","block","onPinchStart","onPinchResize","onPinchMove","onPinchEnd","handler","state","addEvent","browser","touchScreen","removeEvent","done","onResize","stopAll","sendContentLoadedEvent","destroy","off"],"mappings":"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","sourcesContent":["Sirv.define(\n    'Instance',\n    ['bHelpers','magicJS','Promise!','globalVariables','BaseInstance','helper'],\n    (bHelpers,magicJS,Promise,globalVariables,BaseInstance,helper) => {\n        const moduleName = 'Instance';\n        \n        const $J = magicJS;\n        const $ = $J.$;\n        \n        \n        /* eslint-env es6 */\n/* eslint-disable indent */\n/* global BaseInstance */\n/* global helper */\n/* eslint-disable class-methods-use-this */\n/* eslint-disable no-unused-vars */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n// eslint-disable-next-line no-unused-vars\nconst createError = (name) => {\n    return new Error('This method \\'' + name + '\\' is not implemented.');\n};\n\nclass Instance extends BaseInstance {\n    constructor(node, options, defaultSchema) {\n        super(node, options, defaultSchema);\n\n        this.type = globalVariables.SLIDE.TYPES.NONE;\n        this.always = options.always;\n        this.quality = options.quality;\n        this.hdQuality = options.hdQuality;\n        this.isHDQualitySet = options.isHDQualitySet;\n        this.isFullscreenEnabled = options.isFullscreen;\n        this.dataAlt = null;\n        this.isSlideShown = false;\n        this.isInView = false;\n        this.preload = false;\n        this.firstSlideAhead = false;\n        this.infoSize = null;\n        this.pinchCloud = null;\n        this.onLoad = false;\n        this.waitToStart = new helper.WaitToStart();\n        this.waitGettingInfo = new helper.WaitToStart();\n        this.gettingInfoPromise = null;\n\n        this.fullscreenState = globalVariables.FULLSCREEN.CLOSED;\n\n        this.on('stats', (e) => {\n            e.data.component = globalVariables.SLIDE.NAMES[this.type];\n        });\n    }\n\n    sendEvent(typeOfEvent, data) {\n        if (!data) { data = {}; }\n        if (!data.event) { data.event = {}; }\n        data.id = this.id;\n        data.url = this.instanceUrl;\n        data.event.timestamp = +(new Date());\n        data.event.type = globalVariables.SLIDE.NAMES[this.type] + ':' + typeOfEvent;\n\n        this.emit('componentEvent', {\n            data: {\n                type: typeOfEvent,\n                data: data\n            }\n        });\n    }\n\n    onStartActions() {}\n    onStopActions() {}\n    onInView(value) {}\n    onBeforeFullscreenIn(data) {}\n    onAfterFullscreenIn(data) {}\n    onBeforeFullscreenOut(data) {}\n    onAfterFullscreenOut(data) {}\n    onMouseAction(type) {}\n    onSecondSelectorClick() {}\n    onStopContext() {}\n    loadContent() { return true; }\n    loadThumbnail() {\n        if (!this.destroyed) {\n            this.waitToStart.start();\n            return true;\n        }\n\n        return false;\n    }\n\n    startGettingInfo() {\n        if (!this.destroyed) {\n            this.waitGettingInfo.start();\n            return true;\n        }\n\n        return false;\n    }\n\n    startFullInit(options) {\n        if (this.isStartedFullInit) { return; }\n        super.startFullInit(options);\n\n        if (options) {\n            this.always = options.always;\n        }\n\n        this.dataAlt = this.instanceNode.attr('data-alt');\n\n        this.on('startActions', (e) => {\n            e.stop();\n            this.isSlideShown = true;\n            this.onStartActions(e.who);\n        });\n\n        this.on('stopActions', (e) => {\n            e.stop();\n            this.isSlideShown = false;\n            this.onStopActions();\n        });\n\n        this.on('inView', (e) => {\n            e.stop();\n            const iv = e.data;\n\n            this.onInView(iv);\n\n            this.isInView = iv;\n        });\n\n        this.setEvents();\n    }\n\n    isFullscreenActionEnded() {\n        return $J.contains([globalVariables.FULLSCREEN.CLOSED, globalVariables.FULLSCREEN.OPENED], this.fullscreenState);\n    }\n\n    setEvents() {\n        this.on('beforeFullscreenIn', (e) => {\n            e.stop();\n            if (this.fullscreenState === globalVariables.FULLSCREEN.OPENED || this.destroyed) { return; }\n            this.fullscreenState = globalVariables.FULLSCREEN.OPENING;\n            this.onBeforeFullscreenIn(e.data);\n        });\n\n        this.on('afterFullscreenIn', (e) => {\n            e.stop();\n            if (!this.destroyed) {\n                this.fullscreenState = globalVariables.FULLSCREEN.OPENED;\n                this.onAfterFullscreenIn(e.data);\n            }\n        });\n\n        this.on('beforeFullscreenOut', (e) => {\n            e.stop();\n            if (this.fullscreenState === globalVariables.FULLSCREEN.CLOSED || this.destroyed) { return; }\n            this.fullscreenState = globalVariables.FULLSCREEN.CLOSING;\n            this.onBeforeFullscreenOut(e.data);\n        });\n\n        this.on('afterFullscreenOut', (e) => {\n            e.stop();\n            if (!this.destroyed) {\n                this.fullscreenState = globalVariables.FULLSCREEN.CLOSED;\n                this.onAfterFullscreenOut(e.data);\n            }\n        });\n    }\n\n    getOriginImageUrl() {\n        throw createError('getInfoSize');\n    }\n\n    getSelectorImgUrl(data) {\n        return Promise.reject(createError('getSelectorImgUrl'));\n    }\n\n    getInfoSize() {\n        return Promise.reject(createError('getInfoSize'));\n    }\n\n    run(isShown, preload, firstSlideAhead) {\n        const result = super.run();\n\n        if (result) {\n            this.isSlideShown = isShown;\n            this.preload = preload;\n            this.firstSlideAhead = firstSlideAhead;\n\n            if (!this.firstSlideAhead) {\n                this.waitToStart.start();\n            }\n        }\n\n        return result;\n    }\n\n    getThumbnailData() {\n        return { src: null };\n    }\n\n    getSocialButtonData(data) {\n        const opt = data;\n\n        if (this.infoSize.width < data.width || this.infoSize.height < data.height) {\n            opt.width = this.infoSize.width;\n            opt.height = this.infoSize.height;\n        }\n\n        const thumbnailData = this.getThumbnailData(opt);\n        return thumbnailData.src;\n    }\n\n    createPinchEvent(node) {\n        const pinchCloud = {\n            isAdded: false,\n            pinch: false,\n            scale: 0,\n            block: false,\n            onPinchStart: (e) => {},\n            onPinchResize: (e) => {},\n            onPinchMove: (e) => {},\n            onPinchEnd: (e) => {\n                if (pinchCloud.pinch) {\n                    pinchCloud.pinch = false;\n                    this.sendEvent('pinchEnd');\n                }\n\n                pinchCloud.block = false;\n            },\n            handler: (e) => {\n                switch (e.state) {\n                    case 'pinchstart':\n                        pinchCloud.onPinchStart(e);\n                        break;\n                    case 'pinchresize':\n                        pinchCloud.onPinchResize(e);\n                        break;\n                    case 'pinchmove':\n                        pinchCloud.onPinchMove(e);\n                        break;\n                    case 'pinchend':\n                        pinchCloud.onPinchEnd(e);\n                        break;\n                    default:\n                }\n\n                if (pinchCloud.pinch) { e.stop(); }\n            },\n\n            addEvent: () => {\n                if (!pinchCloud.isAdded && $J.browser.touchScreen) {\n                    node.addEvent('pinch', pinchCloud.handler);\n                    pinchCloud.isAdded = true;\n                }\n            },\n\n            removeEvent: () => {\n                if (pinchCloud.isAdded) {\n                    node.removeEvent('pinch', pinchCloud.handler);\n                    pinchCloud.isAdded = false;\n                    pinchCloud.block = false;\n                    pinchCloud.pinch = false;\n                }\n            }\n        };\n\n        pinchCloud.addEvent();\n\n        this.pinchCloud = pinchCloud;\n    }\n\n    done() {\n        super.done();\n\n        this.createPinchEvent();\n\n        this.on('resize', (e) => {\n            e.stop();\n            this.onResize();\n        });\n\n        this.on('stopContext', (e) => {\n            e.stop();\n            this.onStopContext();\n        });\n\n        this.on('secondSelectorClick', (e) => {\n            e.stopAll();\n            this.onSecondSelectorClick();\n        });\n\n        this.on('mouseAction', (e) => {\n            e.stop();\n            this.onMouseAction(e.data.type);\n        });\n\n        this.on('dragEvent', (e) => {\n            e.stop();\n            if (this.pinchCloud) {\n                if (e.data.type === 'dragstart') {\n                    this.pinchCloud.removeEvent();\n                } else if (e.data.type === 'dragend') {\n                    this.pinchCloud.addEvent();\n                }\n            }\n        });\n\n        this.sendEvent('ready');\n    }\n\n    sendContentLoadedEvent() {\n        if (!this.onLoad) {\n            this.onLoad = true;\n            this.sendEvent('contentLoaded');\n        }\n    }\n\n    destroy() {\n        this.off('stats');\n\n        this.off('startActions');\n        this.off('stopActions');\n        this.off('inView');\n\n        this.off('resize');\n        this.off('stopContext');\n        this.off('secondSelectorClick');\n        this.off('mouseAction');\n        this.off('dragEvent');\n\n        this.off('beforeFullscreenIn');\n        this.off('afterFullscreenIn');\n        this.off('beforeFullscreenOut');\n        this.off('afterFullscreenOut');\n\n        this.pinchCloud = null;\n        this.isSlideShown = false;\n        super.destroy();\n        this.waitGettingInfo.destroy();\n        this.waitGettingInfo = null;\n        this.waitToStart.destroy();\n        this.waitToStart = null;\n        this.gettingInfoPromise = null;\n    }\n}\n\nreturn Instance;\n\n    }\n);\n"],"file":"instance.js"}