{"version":3,"sources":["../magicjs/magicjs.js"],"names":["Sirv","define","bHelpers","moduleName","magicJS","$J","WIN","window","UND","undefined","DOC","document","STORAGE","WeakMap","UUID","storage","$uuid","o","$J_UUID","getStorage","uuid","$false","$true","stylesId","Math","floor","random","Date","getTime","defined","contains","source","needle","from","indexOf","typeOf","$J_TYPE","nodeType","Array","Function","String","browser","trident","cancelBubble","event","constructor","Event","MouseEvent","UIEvent","KeyboardEvent","KeyEvent","RegExp","length","item","callee","extend","p","i","l","k","Object","prototype","hasOwnProperty","call","x","implement","nativize","$try","args","e","$A","$","toArray","a","slice","now","detach","r","result","el","getElementById","has","get","Doc","Element","Events","MagicEvent","$new","tag","props","css","createElement","setProps","setCss","addCSS","selector","id","root","style","sheet","idx","rules","rootNode","head","body","node","querySelector","type","insertBefore","firstChild","styleSheet","push","join","insertRule","cssRules","addRule","removeCSS","index","deleteRule","removeRule","generateUUID","replace","c","v","toString","toUpperCase","getAbsoluteURL","url","setAttribute","href","getHashCode","s","charCodeAt","camelize","str","m","charAt","dashize","toLowerCase","stringHas","sep","$j","EVENTS_MAP","_UA","navigator","userAgent","_engine","match","_version","_safariVer","docStyles","documentElement","isSupported","pp","features","xpath","evaluate","air","runtime","query","fullScreen","fullscreenEnabled","msFullscreenEnabled","exitFullscreen","cancelFullScreen","webkitexitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","oCancelFullScreen","msCancelFullScreen","xhr2","ProgressEvent","FormData","XMLHttpRequest","transition","transform","perspective","animation","requestAnimationFrame","multibackground","cssFilters","canvas","svg","implementation","hasFeature","touchScreen","DocumentTouch","maxTouchPoints","msMaxTouchPoints","mobile","engine","opera","ActiveXObject","getBoxObjectFor","mozInnerScreenY","WebKitPoint","taintEnabled","version","parseFloat","uaName","uaVersion","cssPrefix","cssDomPrefix","domPrefix","ieMode","platform","backCompat","compatMode","scrollbarsWidth","getDoc","mozRequestAnimationFrame","webkitRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","cancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","webkitCancelRequestAnimationFrame","ready","onready","tmp","width","height","overflow","position","top","appendTo","offsetWidth","clientWidth","remove","ex","cssText","test","background","cssTransformProp","normalizeCSS","addClass","getContext","TransitionEvent","WebKitTransitionEvent","callEvent","magicClasses","chrome","webkit","androidBrowser","prefixes","gecko","presto","documentMode","exClasses","className","concat","pointerEnabled","forEach","evt","msPointerEnabled","getCancel","getChangeEventName","msExitFullscreen","getErrorEventName","callRequestFullscreen","f","requestFullscreen","capable","enabled","fullscreenElement","webkitIsFullScreen","request","opts","windowFullscreen","onchange","onEnter","removeEvent","changeEventName","onExit","addEvent","onerror","fallback","errorEventName","cancel","prefix","activeElement","r_cssToNum","cssMap","styleFloat","nopxCSS","getCssValue","getComputedStyle","name","getPropertyValue","currentStyle","pName","standard","Base","$J_EXT","set","fetch","prop","def","store","val","del","fn","priority","options","handlers","_type","split","__type","parseInt","$J_EUID","events","add","_event_add_","_event_prefix_","fnObj","euid","sort","b","splice","_event_del_","ev","timeStamp","isQueueStopped","raiseEvent","_native","createEvent","dispatchEvent","initEvent","createEventObject","eventType","fireEvent","clearEvents","requestFullScreen","trim","classList","removeClass","toggleClass","toggle","getCss","cssName","setCssProp","styles","getStyles","getTransitionDuration","duration","delay","getSize","offsetHeight","getInnerSize","withPadding","size","getScroll","scrollTop","scrollLeft","getFullScroll","left","parentNode","getPosition","t","getBoundingClientRect","docScroll","doc","y","clientTop","clientLeft","offsetLeft","offsetTop","offsetParent","tagName","getRect","changeContent","innerHTML","innerText","removeChild","kill","childNodes","append","appendChild","getTagName","attr","attrName","attrValue","getAttribute","removeAttr","removeAttribute","hasClass","cName","SVGAnimatedString","baseVal","hasAttribute","presto925","webkit419","innerWidth","innerHeight","clientHeight","pageXOffset","pageYOffset","getFullSize","max","scrollWidth","scrollHeight","originEvent","oe","propertyName","pointerType","getOriginEvent","stop","stopDistribution","stopDefaults","stopPropagation","preventDefault","returnValue","stopQueue","getClientXY","src","changedTouches","clientX","clientY","getPageXY","pageX","pageY","getTarget","target","srcElement","getRelated","relatedTarget","fromElement","toElement","getButton","which","button","isTouchEvent","MSPOINTER_TYPE_TOUCH","isPrimaryTouch","isPrimary","TouchEvent","targetTouches","identifier","getPrimaryTouch","getPrimaryTouchId","pointerId","addEventListener","Custom","magicEvent","pushToEvents","eventCopy","getOriginalTarget","readyState","setTimeout","RADIUS_THRESHOLD","TIME_THRESHOLD","BtnClick","_options","threshold","onclick","handle","btnclickEvent","sqrt","pow","handler","btnclick","Mousedrag","state","dragged","handleMouseDown","dragEvent","handleMouseUp","handleMouseMove","move","bind","end","mousedrag","Dblbtnclick","timedout","tm","clearTimeout","dblbtnclick","Tap","touch","onClick","onTouchStart","onTouchEnd","tap","Dbltap","dbltap","Touchdrag","onTouchMove","touchdrag","baseSpace","distance","point1","point2","getSpace","variables","ts","diffX","abs","diffY","_x","min","_y","points","centerPoint","getScale","space","getTouches","cache","cacheEvent","justSame","removeCache","getEventId","addActivePoints","container","getIds","value","removeActivePoint","ids","getActivePoints","removePinchEnd","clearCache","clear","Pinch","scale","zoom","_variables","startSpace","startScale","started","setVariables","lastSpace","pinchEvent","currentActivePoints","pinchEventStart","Map","_event","removingResult","W","pinch","Mousescroll","delta","deltaX","deltaY","deltaZ","deltaFactor","deltaMode","isMouse","lowestDelta","resetDeltaTimer","resetDelta","absDelta","detail","wheelDelta","wheelDeltaY","wheelDeltaX","calc","mousescroll","D","U","DPPX","devicePixelRatio","FX","TRANSITION","linear","sineIn","sineOut","expoIn","expoOut","quadIn","quadOut","cubicIn","cubicOut","backIn","backOut","elasticIn","cos","PI","elasticOut","bounceIn","bounceOut","none","opt","cubicBezier","easeFn","pStyles","alternate","continuous","startTime","finishTime","fps","cycles","direction","onStart","onComplete","onBeforeRender","onAfterRender","forceAnimation","roundCss","els","isArray","_el","timer","setTransition","Infinity","getTransition","easing","cubicBezierAtTime","_easing","parseCubicBezier","start","runits","cycle","reverse","render","loop","setInterval","round","stopAnimation","clearInterval","complete","_now","dx","_css","renderOverLoad","change","to","cubicbezier","ax","bx","cx","ay","by","cy","sampleCurveX","sampleCurveY","sampleCurveDerivativeX","solveEpsilon","solveCurveX","epsilon","t0","t1","t2","x2","d2","fabs","n","solve","Options","globalValue","dataTypes","isAbsoluteUrl","typeValidators","option","strict","percent","isNaN","minimum","Number","NEGATIVE_INFINITY","maximum","POSITIVE_INFINITY","JSON","parse","validateParamValue","param","oneOf","normalizeParam","j","temp","validateSchemaParam","isDefaults","obj","parseObj","parseVars","map","pathTo","_pathTo","convertToDeepObj","key","setObjValue","arr","normalizeString","schema","parseSchema","force","checkValue","fromJSON","getJSON","json","fromString","exclude","check","substr","_result","chunk","shift","exists","isset"],"mappings":"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","sourcesContent":["Sirv.define(\n    'magicJS',\n    ['bHelpers'],\n    (bHelpers) => {\n        const moduleName = 'magicJS';\n        \n        \n        /**\n * @version ${MagicJS_version}\n * @package MagicJS\n * @access public\n *\n * @copyright   ${build_year} MagicToolbox.com, To use this code on your own site, visit http://www.magictoolbox.com\n * @license     http://www.magictoolbox.com/license/\n * @author      MagicToolbox.com <support@magictoolbox.com>\n *\n */\n\n// var magicJS;\n// var $J;\n\n// magicJS = $J = (function() {\n\n//     var WIN = window;\n//     var UND = WIN.undefined;\n//     var DOC = document;\n\nlet magicJS;\nlet $J;\n\nmagicJS = $J = (function () {\n\n    let WIN = window;\n    let UND = WIN.undefined;\n    let DOC = document;\n\n/* eslint-env es6 */\n/* global UND, WIN, DOC, Doc */\n/* eslint-disable no-use-before-define */\n/* eslint no-return-assign: \"error\" */\n/* eslint no-extra-boolean-cast: \"off\" */\n/* eslint no-continue: \"off\" */\n/* eslint no-restricted-syntax: [\"error\", \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n/* eslint-disable dot-notation */\n/* eslint-disable eqeqeq */\n\nconst STORAGE = new WeakMap();\n\n/*\n * Script: base.js\n * Contains core methods.\n */\n\n/**\n * Contains core methods.\n * @class\n * @static\n */\nconst magicJS =\n/** @lends magicJS# */\n{\n    /**\n     * Start UUID for objects\n     */\n    UUID: 0,\n\n    /**\n     * Storage for object properties\n     */\n    storage: {},\n\n    /**\n     * Assign unique id for an object\n     */\n    $uuid: (o) => {\n        return (o.$J_UUID || (o.$J_UUID = ++$J.UUID));\n    },\n\n    /**\n     * Retreive storage of an object by uuid\n     */\n    getStorage: (uuid) => {\n        return ($J.storage[uuid] || ($J.storage[uuid] = {}));\n    },\n\n    /**\n     * Empty function that returns false\n     */\n    $false: () => { return false; },\n\n    /**\n     * Empty function that returns true\n     */\n    $true: () => { return true; },\n\n    /**\n     * Id of the magicJS <style></style>\n     */\n    stylesId: 'mjs-' + Math.floor(Math.random() * new Date().getTime()),\n\n\n    /**\n     * Check if the object defined\n     *\n     * @param {Object}   object to check\n     *\n     * @returns {bool}  - true or false\n     */\n    defined: (o) => {\n        return (o != UND);\n    },\n\n    /**\n     * Check if the object defined and return itself of default value\n     *\n     * @param {Object}   object to check\n     * @param {Mixed}    default value\n     *\n     * @returns {Mixed} - Returns object if it is defined, otherwise default value\n     */\n    // ifndef: (o, defaultValue) => {\n    //     return (o !== UND) ? o : defaultValue;\n    // },\n\n    // exists: (o) => {\n    //     return !!(o);\n    // },\n\n    /**\n     * Checks for element within array\n     *\n     * @param   {Array} source      Source\n     * @param   {Mixed} needle      Element that is checked\n     * @param   {Integer} [from=0]      The start index to search\n     *\n     * @returns {Boolean}   true if element found, otherwise false\n     */\n    contains: (source, needle, from) => {\n        return source.indexOf(needle, from) !== -1;\n    },\n\n    /**\n     * Get type of the object\n     *\n     * @param {Object}  object to check\n     *\n     * @returns {String}    - object type\n     */\n    typeOf: (o) => {\n        if (!$J.defined(o)) { return false; }\n        if (o.$J_TYPE) { return o.$J_TYPE; }\n\n        if (!!o.nodeType) {\n            if (o.nodeType === 1) { return 'element'; }\n            if (o.nodeType === 3) { return 'textnode'; }\n        }\n\n        if (o === WIN) { return 'window'; }\n        if (o === DOC) { return 'document'; }\n\n        // if ((o instanceof WIN.Object || o instanceof WIN.Function) && o.constructor === $J.Class) {\n        //     return 'class';\n        // }\n\n        if (o instanceof WIN.Array) { return 'array'; }\n        if (o instanceof WIN.Function) { return 'function'; }\n        if (o instanceof WIN.String) { return 'string'; }\n        if ($J.browser.trident) {\n            if ($J.defined(o.cancelBubble)) { return 'event'; }\n        } else {\n            //if ( o instanceof WIN.Event || o === WIN.event || o.constructor == WIN.MouseEvent ) { return 'event'; }\n            // eslint-disable-next-line\n            if (o === WIN.event || o.constructor == WIN.Event || o.constructor == WIN.MouseEvent || o.constructor == WIN.UIEvent || o.constructor == WIN.KeyboardEvent || o.constructor == WIN.KeyEvent) { return 'event'; }\n        }\n        if (o instanceof WIN.Date) { return 'date'; }\n        if (o instanceof WIN.RegExp) { return 'regexp'; }\n\n        if (o.length && o.item) { return 'collection'; }\n        if (o.length && o.callee) { return 'arguments'; }\n\n        return typeof (o);\n    },\n\n    /**\n     * Extend objects\n     *\n     * @param {mixed}   objects to extend\n     * @param {Hash}    properties\n     *\n     * @returns first extended object\n     * @type   {Object}\n     */\n    extend: (o, p) => {\n        if (!(o instanceof WIN.Array)) {\n            o = [o];\n        }\n        if (!p) { return o[0]; }\n\n        for (let i = 0, l = o.length; i < l; i++) {\n            if (!$J.defined(o)) { continue; }\n\n            // for ( const k in (p || {}) ) {\n            for (const k in p) {\n                if (!Object.prototype.hasOwnProperty.call(p, k)) {\n                    continue;\n                }\n                try {\n                    o[i][k] = p[k];\n                } catch (x) {\n                    // empty\n                }\n            }\n        }\n        return o[0];\n    },\n\n    /**\n     * Extend an objects' prototype\n     *\n     * @param {mixed} object to extend\n     * @param {Hash}  properties\n     *\n     * @returns first extended object\n     * @type   {Object}\n     */\n    implement: (o, p) => {\n        if (!(o instanceof WIN.Array)) {\n            o = [o];\n        }\n\n        for (let i = 0, l = o.length; i < l; i++) {\n            if (!$J.defined(o[i])) {\n                continue;\n            }\n\n            if (!o[i].prototype) {\n                continue;\n            }\n\n            for (const k in (p || {})) {\n                if (!o[i].prototype[k]) {\n                    o[i].prototype[k] = p[k];\n                }\n            }\n        }\n        return o[0];\n    },\n\n    /**\n     * Extend a native Javascript object (e.g. Array)\n     *\n     * @param {Object}   object to extend\n     * @param {Hash}     properties\n     */\n    nativize: (o, p) => {\n        if (!$J.defined(o)) {\n            return o;\n        }\n\n        for (const k in (p || {})) {\n            if (!o[k]) {\n                o[k] = p[k];\n            }\n        }\n        return o;\n    },\n\n    /**\n     * Run first succeeded functions\n     *\n     * @param {Function}     function to be executed\n     *\n     * @returns {Mixed}     - result of function call or null\n     */\n    $try: (...args) => {\n        for (let i = 0, l = args.length; i < l; i++) {\n            try {\n                return args[i]();\n            } catch (e) {\n                // empty\n            }\n        }\n        return null;\n    },\n\n    /**\n     * Convert iterable object to an array\n     *\n     * @param {Mixed}    iterable object\n     *\n     * @returns {Array} - result array\n     */\n    $A: (o) => {\n        if (!$J.defined(o)) { return $J.$([]); }\n        if (o.toArray) { return $J.$(o.toArray()); }\n        if (o.item) {\n            let l = o.length || 0;\n            const a = new Array(l);\n            while (l--) { a[l] = o[l]; }\n\n            return $J.$(a);\n        }\n        return $J.$(Array.prototype.slice.call(o));\n    },\n\n\n    /**\n     * Get current time in milliseconds\n     *\n     * @returns {Number}    - number of milliseconds since 1 January 1970 00:00:00\n     */\n    now: () => {\n        return new Date().getTime();\n    },\n\n    detach: (o) => {\n        let r;\n\n        switch ($J.typeOf(o)) {\n            case 'object':\n                r = {};\n                for (const p in o) {\n                    if (Object.prototype.hasOwnProperty.call(o, p)) {\n                        r[p] = $J.detach(o[p]);\n                    }\n                }\n                break;\n\n            case 'array':\n                r = [];\n                for (let i = 0, l = o.length; i < l; i++) r[i] = $J.detach(o[i]);\n                break;\n\n            default: return o;\n        }\n\n        return $J.$(r);\n    },\n\n    $: (o) => {\n        let result = o;\n\n        switch ($J.typeOf(o)) {\n            case 'string': {\n                const el = DOC.getElementById(o);\n                if ($J.defined(el)) {\n                    result = $J.$(el);\n                } else {\n                    result = null;\n                }\n                break;\n            }\n            case 'window':\n            case 'document':\n                if (STORAGE.has(o)) {\n                    result = STORAGE.get(o);\n                } else {\n                    result = new Doc(o);\n                }\n                break;\n            case 'element':\n                if (STORAGE.has(o)) {\n                    result = STORAGE.get(o);\n                } else {\n                    result = new Element(o);\n                }\n                break;\n            case 'event':\n                result = new $J.Events.MagicEvent(o);\n                break;\n            // no default\n        }\n\n        return result;\n    },\n\n    /**\n     * Creates new dom element\n     *\n     * @param   {String}\n     *\n     * @returns\n     */\n    $new: (tag, props, css) => {\n        return $J.$(DOC.createElement(tag)).setProps(props || {}).setCss(css || {});\n    },\n\n    /**\n     * Adds new CSS style definition to the document\n     *\n     * @param {String} selector CSS selector\n     * @param {String|Object} css CSS rules\n     * @param {String} [id] Identifier of the style sheet. Optional.\n     * @param {dom object} [root] Context of searching element by id\n     *\n     * @return {Number} position of the added CSS within the style sheet\n     */\n    addCSS: (selector, css, id, root) => {\n        let style;\n        let sheet;\n        let idx = -1;\n        const rules = [];\n        let rootNode = DOC.head || DOC.body;\n\n        if (root) {\n            rootNode = $(root).node || root;\n        }\n\n        if (!id) {\n            id = $J.stylesId;\n        }\n\n        style = $(rootNode.querySelector('#' + id));\n\n        if (!style) {\n            style = $J.$new('style', { id: id, type: 'text/css' });\n            rootNode.insertBefore(style.node, rootNode.firstChild);\n        }\n\n        // sheet = style.sheet;\n        sheet = style.node.sheet;\n\n        if (!sheet) {\n            // sheet = style.styleSheet;\n            sheet = style.node.styleSheet;\n        }\n\n        if ($J.typeOf(css) !== 'string') {\n            for (const p in css) {\n                if (Object.prototype.hasOwnProperty.call(css, p)) {\n                    rules.push(p + ':' + css[p]);\n                }\n            }\n            css = rules.join(';');\n        }\n\n        if (sheet.insertRule) {\n            idx = sheet.insertRule(selector + ' {' + css + '}', sheet.cssRules.length);\n        } else {\n            idx = sheet.addRule(selector, css);\n        }\n\n        return idx;\n    },\n\n    /**\n     * Remove CSS rule by index from a particular stylesheet\n     *\n     * @param {String} id Identifier of the style sheet\n     * @param {Number} index Position of the CSS to be removed within the style sheet\n     */\n    removeCSS: (id, index) => {\n        const style = $J.$(id);\n        if ($J.typeOf(style) !== 'element') { return; }\n\n        const sheet = style.sheet || style.styleSheet;\n        if (sheet.deleteRule) {\n            sheet.deleteRule(index);\n        } else if (sheet.removeRule) {\n            sheet.removeRule(index);\n        }\n    },\n\n    /**\n     * Create UUID\n     * @return {String}\n     */\n    generateUUID: () => {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n            const r = Math.random() * 16 | 0;\n            const v = c === 'x' ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        }).toUpperCase();\n    },\n\n    /**\n     * Retrieve absolute URL of a given link\n     * @param {String} url link\n     * @return {String}\n     */\n    getAbsoluteURL: (() => {\n        let a;\n\n        return (url) => {\n            if (!a) a = DOC.createElement('a');\n            a.setAttribute('href', url);\n\n            return ('!!' + a.href).replace('!!', '');\n        };\n    })(),\n\n    /**\n     * String hash function similar to java.lang.String.hashCode().\n     *\n     * @param {String} s A string.\n     * @return {Number} Hash value for {@code s}, between 0 (inclusive) and 2^32\n     *  (exclusive). The empty string returns 0.\n     */\n    getHashCode: (s) => {\n        let r = 0;\n        const l = s.length;\n        for (let i = 0; i < l; ++i) {\n            r = 31 * r + s.charCodeAt(i);\n            r %= 0x100000000;\n        }\n        return r;\n    },\n\n    /**\n     * Return camel-case string\n     *\n     * @param {String}\n     *\n     * @returns {String}    - string in camel-case\n     */\n    camelize: (str) => {\n        return str.replace(/-\\D/g, (m) => {\n            return m.charAt(1).toUpperCase();\n        });\n    },\n\n    /**\n     * Return hyphenated string\n     *\n     * @param {String}\n     *\n     * @returns {String} - hyphenated string\n     */\n    dashize: function (str) {\n        return str.replace(/[A-Z]/g, (m) => {\n            return ('-' + m.charAt(0).toLowerCase());\n        });\n    },\n\n    /**\n     * Check if string contains substring\n     *\n     * @param {string}      - source\n     * @param {string}      - needle to find\n     * @param {string}      - Optional. Separator\n     *\n     * @returns {bool}      - True if the needle found, False otherwise\n     */\n    stringHas: (source, str, sep) => {\n        sep = sep || '';\n        return (sep + source + sep).indexOf(sep + str + sep) > -1;\n    }\n};\n\nconst $J = magicJS;\nconst $j = magicJS.$; //eslint-disable-line no-unused-vars\nconst $ = $J.$;\n\n/* eslint-env es6 */\n/* global $J, WIN, DOC, UND, DocumentTouch */\n/* eslint-disable dot-notation */\n/* eslint new-parens: \"off\" */\n/* eslint no-extra-boolean-cast: \"off\" */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n\n\n/**\n  *     Browser engines\n  *         Gecko:\n  *             1.81 - Firefox 2\n  *             1.90 - Firefox 3\n  *             1.91 - Firefox 3.5\n  *             1.92 - Firefox 3.6\n  *             2.0  - Firefox 4.0\n  *             5    - Firefox 5.0\n  *             ...\n  *             25    - Firefox 25\n  *\n  *         Presto:\n  *             2.0 - Opera 9\n  *             2.1 - Opera 9.5\n  *             2.1 - Opera 9.6\n  *             2.2 - Opera 10.00-10.10\n  *             2.5 - Opera 10.50\n  *             2.6 - Opera 10.6\n  *             2.7 - Opera 11\n  *\n  *         Trident:\n  *             7 - IE 11\n  *             6 - IE 10\n  *             5 - IE 9\n  *             4 - IE 8\n  *             3 - IE 7\n  *             2 - IE 6\n  */\n\n\n// Normalized event names\nconst EVENTS_MAP = {};\n\n// Shortcut for userAgent\nconst _UA = navigator.userAgent.toLowerCase();\nconst _engine = _UA.match(/(webkit|gecko|trident|presto)\\/(\\d+\\.?\\d*)/i);\nconst _version = _UA.match(/(edge|opr)\\/(\\d+\\.?\\d*)/i) || _UA.match(/(crios|chrome|safari|firefox|opera|opr)\\/(\\d+\\.?\\d*)/i);\nconst _safariVer =  _UA.match(/version\\/(\\d+\\.?\\d*)/i);\n// Shortcut for document style property for further references\nconst docStyles = DOC.documentElement.style;\n\n\nconst isSupported = (p) => {\n    const pp = p.charAt(0).toUpperCase() + p.slice(1);\n    return p in docStyles\n            || ('Webkit' + pp) in docStyles\n            || ('Moz' + pp) in docStyles\n            || ('ms' + pp) in docStyles\n            || ('O' + pp) in docStyles;\n};\n\n/** @lends browser# */\n/**\n    * @constructs\n    * @class Contains information about the client browser\n*/\n$J.browser = {\n    /**\n    * Browser supported features\n    */\n    features: {\n        xpath: !!(DOC.evaluate),\n        air: !!(WIN.runtime),\n        query: !!(DOC.querySelector),\n        fullScreen: !!(DOC.fullscreenEnabled || DOC.msFullscreenEnabled || DOC.exitFullscreen\n                    || DOC.cancelFullScreen || DOC.webkitexitFullscreen || DOC.webkitCancelFullScreen\n                    || DOC.mozCancelFullScreen || DOC.oCancelFullScreen || DOC.msCancelFullScreen),\n        xhr2: !!(WIN.ProgressEvent) && !!(WIN.FormData) && (WIN.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest),\n        transition: isSupported('transition'),\n        transform: isSupported('transform'),\n        perspective: isSupported('perspective'),\n        animation: isSupported('animation'),\n        requestAnimationFrame: false,\n        multibackground: false,\n        cssFilters: false,\n        canvas: false,\n        svg: (() => { return DOC.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Image', '1.1'); })()\n    },\n\n    /**\n     * Touch screen support\n     */\n    touchScreen: (() => {\n        return 'ontouchstart' in WIN || (WIN.DocumentTouch && DOC instanceof DocumentTouch)\n                || (navigator.maxTouchPoints > 0)\n                || (navigator.msMaxTouchPoints > 0);\n    })(),\n\n    /**\n     * Mobile device?\n     */\n    mobile: !!_UA.match(/(android|bb\\d+|meego).+|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/),\n\n    /**\n     * Browser engine\n     */\n    engine: (() => {\n        let result = 'unknown';\n\n        if (_engine && _engine[1]) {\n            result = _engine[1].toLowerCase();\n        } else if (WIN.opera) {\n            result = 'presto';\n        } else if (!!WIN.ActiveXObject) {\n            result = 'trident';\n        } else if (DOC.getBoxObjectFor !== UND || WIN.mozInnerScreenY !== null) {\n            result = 'gecko';\n        } else if (WIN.WebKitPoint !== null || !navigator.taintEnabled) {\n            result = 'webkit';\n        }\n\n        return result;\n    })(),\n\n    /**\n     * Browser engine version\n     */\n    version: (_engine && _engine[2]) ? parseFloat(_engine[2]) : 0,\n\n    /**\n     * Browser name & version\n     */\n    uaName: (_version && _version[1]) ? _version[1].toLowerCase() : '',\n    uaVersion: (_version && _version[2]) ? parseFloat(_version[2]) : 0,\n\n    // prefix for css properties like -webkit-box-shadow\n    cssPrefix: '',\n    // prefix for style properties like element.style.WebkitBoxShadow\n    cssDomPrefix: '',\n    // DOM prefix\n    domPrefix: '',\n\n    /**\n     * IE document mode\n     */\n    ieMode: 0,\n\n    /**\n     * Platform\n     *\n     * mac      - Mac OS\n     * win      - Windows\n     * linux    - Linux\n     * ios      - Apple iPod/iPhone/iPad\n     *\n     */\n    platform: (() => {\n        let result;\n\n        if (_UA.match(/ip(?:ad|od|hone)/)) {\n            result = 'ios';\n        } else {\n            result = _UA.match(/(?:webos|android)/);\n            if (!result) {\n                result = navigator.platform.match(/mac|win|linux/i);\n                if (!result) {\n                    result = ['other'];\n                }\n            }\n\n            result = result[0].toLowerCase();\n        }\n\n        return result;\n    })(),\n\n    /**\n     * Browser box model\n     *\n     * Basically used to determine how IE renders in quirks mode\n     */\n    backCompat: DOC.compatMode && DOC.compatMode.toLowerCase() === 'backcompat',\n\n    /**\n     * Width of the browser's scrollbars\n     */\n    scrollbarsWidth: 0,\n\n    /**\n     * Reference to the real document element\n     *\n     * Used to correct work with page dimension\n     */\n    getDoc: () => { return (DOC.compatMode && DOC.compatMode.toLowerCase() === 'backcompat') ? DOC.body : DOC.documentElement; },\n\n\n    /**\n     * Reference to the requestAnimationFrame method (if any)\n     */\n    requestAnimationFrame: WIN.requestAnimationFrame || WIN.mozRequestAnimationFrame || WIN.webkitRequestAnimationFrame\n                            || WIN.oRequestAnimationFrame || WIN.msRequestAnimationFrame || UND,\n\n    /**\n     * Reference to the cancelAnimationFrame method (if any)\n     */\n    cancelAnimationFrame: WIN.cancelAnimationFrame || WIN.mozCancelAnimationFrame || WIN.mozCancelAnimationFrame\n                            || WIN.oCancelAnimationFrame || WIN.msCancelAnimationFrame\n                            || WIN.webkitCancelRequestAnimationFrame\n                            || UND,\n\n    /**\n     * Indicates that DOM content is ready for manipulation\n     *\n     * @see domready\n     */\n    ready: false,\n\n    /**\n     * Fires when DOM content is ready for manipulation\n     *\n     * @see domready\n     */\n    onready: () => {\n        if ($J.browser.ready) { return; }\n\n        let node;\n        let style;\n\n        $J.browser.ready = true;\n\n        try { // Calculate width of browser's scrollbars\n            const tmp = $J.$new('div').setCss({\n                width: 100,\n                height: 100,\n                overflow: 'scroll',\n                position: 'absolute',\n                top: -9999\n            }).appendTo(DOC.body);\n            $J.browser.scrollbarsWidth = tmp.offsetWidth - tmp.clientWidth;\n            tmp.remove();\n        } catch (ex) {\n            // empty\n        }\n\n        try { // Test multiple background support\n            node = $J.$new('div');\n            style = node.style;\n\n            style.cssText = 'background:url(https://),url(https://),red url(https://)';\n            $J.browser.features.multibackground = (/(url\\s*\\(.*?){3}/).test(style.background);\n            style = null;\n            node = null;\n        } catch (ex) {\n            // empty\n        }\n\n        if (!$J.browser.cssTransformProp) {\n            $J.browser.cssTransformProp = $J.dashize($J.normalizeCSS('transform'));\n        }\n\n        try { // Test CSS filters support\n            node = $J.$new('div');\n            node.style.cssText = $J.dashize($J.normalizeCSS('filter')) + ':blur(2px);';\n            $J.browser.features.cssFilters = !!node.style.length && (!$J.browser.ieMode || $J.browser.ieMode > 9);\n            node = null;\n        } catch (ex) {\n            // empty\n        }\n\n        if (!$J.browser.features.cssFilters) {\n            $J.$(DOC.documentElement).addClass('no-cssfilters-magic');\n        }\n\n        try { // Test Canvas support\n            $J.browser.features.canvas = (() => {\n                const tmp = $J.$new('canvas');\n                return !!(tmp.getContext && tmp.getContext('2d'));\n            })();\n        } catch (ex) {\n            // empty\n        }\n\n\n        if (WIN.TransitionEvent === UND && WIN.WebKitTransitionEvent !== UND) {\n            EVENTS_MAP['transitionend'] = 'webkitTransitionEnd';\n        }\n\n        $J.$(DOC).callEvent('domready');\n    }\n};\n\n(() => {\n    let i;\n    const magicClasses = []; // Extra CSS classes applied to <html> (e.g. lt-ie9-magic, mobile-magic)\n\n    switch ($J.browser.engine) {\n        case 'trident':\n            if (!$J.browser.version) {\n                $J.browser.version = !!(WIN.XMLHttpRequest) ? 3 : 2;\n            }\n            break;\n        case 'gecko':\n            $J.browser.version = (_version && _version[2]) ? parseFloat(_version[2]) : 0;\n            break;\n        // no default\n    }\n\n    $J.browser[$J.browser.engine] = true;\n\n    if (_version && _version[1] === 'crios') {\n        $J.browser.uaName = 'chrome';\n    }\n\n    if (!!WIN.chrome) {\n        $J.browser.chrome = true;\n    }\n    if (_version && _version[1] === 'opr') {\n        $J.browser.uaName = 'opera';\n        $J.browser.opera = true;\n    }\n    if ($J.browser.uaName === 'safari' && (_safariVer && _safariVer[1])) {\n        $J.browser.uaVersion = parseFloat(_safariVer[1]);\n    }\n\n    if ($J.browser.platform === 'android' && $J.browser.webkit && (_safariVer && _safariVer[1])) {\n        $J.browser.androidBrowser = true;\n    }\n\n    // browser prefixes\n    const prefixes = ({\n        gecko: ['-moz-', 'Moz', 'moz'],\n        webkit: ['-webkit-', 'Webkit', 'webkit'],\n        trident: ['-ms-', 'ms', 'ms'],\n        presto: ['-o-', 'O', 'o']\n    })[$J.browser.engine] || ['', '', ''];\n\n    $J.browser.cssPrefix = prefixes[0];\n    $J.browser.cssDomPrefix = prefixes[1];\n    $J.browser.domPrefix = prefixes[2];\n\n    $J.browser.ieMode = (() => {\n        let result;\n\n        if (!$J.browser.trident) {\n            result = UND;\n        } else if (DOC.documentMode) {\n            result = DOC.documentMode;\n        } else if ($J.browser.backCompat) {\n            result = 5;\n        } else {\n            let v = 0;\n\n            switch ($J.browser.version) {\n                case 2:\n                    v = 6;\n                    break;\n                case 3:\n                    v = 7;\n                    break;\n\n                // no default\n            }\n\n            result = v;\n        }\n\n        return result;\n    })();\n\n    // Mobile Safari engine in the request desktop site mode on iOS/iPadOS.\n    // Since iPadOS 13, Safari's request desktop site setting is turned on by default for all websites\n    if (!$J.browser.mobile && $J.browser.platform === 'mac' && $J.browser.touchScreen) {\n        $J.browser.mobile = true;\n        $J.browser.platform = 'ios';\n    }\n\n    magicClasses.push($J.browser.platform + '-magic');\n    if ($J.browser.mobile) {\n        magicClasses.push('mobile-magic');\n    }\n    if ($J.browser.androidBrowser) {\n        magicClasses.push('android-browser-magic');\n    }\n\n    if ($J.browser.ieMode) { // Add CSS class of the IE version to <html> for possible tricks\n        $J.browser.uaName = 'ie';\n        $J.browser.uaVersion = $J.browser.ieMode;\n\n        magicClasses.push('ie' + $J.browser.ieMode + '-magic');\n        for (i = 11; i > $J.browser.ieMode; i--) {\n            magicClasses.push('lt-ie' + i + '-magic');\n        }\n    }\n\n    if ($J.browser.webkit && $J.browser.version < 536) { // Disable fullscreen in old Safari\n        $J.browser.features.fullScreen = false;\n    }\n\n    if ($J.browser.requestAnimationFrame) { // Enable native requestAnimationFrame if it works (issue in Safari 6.1.x)\n        $J.browser.requestAnimationFrame.call(WIN, () => {\n            $J.browser.features.requestAnimationFrame = true;\n        });\n    }\n\n    if ($J.browser.features.svg) {\n        magicClasses.push('svg-magic');\n    } else {\n        magicClasses.push('no-svg-magic');\n    }\n\n    const exClasses = (DOC.documentElement.className || '').match(/\\S+/g) || [];\n    DOC.documentElement.className = $J.$(exClasses).concat(magicClasses).join(' ');\n\n    try {\n        DOC.documentElement.setAttribute('data-magic-ua', $J.browser.uaName);\n        DOC.documentElement.setAttribute('data-magic-ua-ver', $J.browser.uaVersion);\n        DOC.documentElement.setAttribute('data-magic-engine', $J.browser.engine);\n        DOC.documentElement.setAttribute('data-magic-engine-ver', $J.browser.version);\n        // DOC.documentElement.setAttribute('data-magic-features', magicClasses.join(' '));\n    } catch (ex) {\n        // empty\n    }\n\n    if ($J.browser.ieMode && $J.browser.ieMode < 9) { // Workaround for IE<9 to support <figure> & <figcaption> elements\n        DOC.createElement('figure');\n        DOC.createElement('figcaption');\n    }\n\n    // Map pointer events for IE 10.\n    if (!WIN.navigator.pointerEnabled) {\n        ['Down', 'Up', 'Move', 'Over', 'Out'].forEach((type) => {\n            // EVENTS_MAP['pointer' + type.toLowerCase()] = WIN.navigator.msPointerEnabled ? 'MSPointer' + type : -1;\n            const evt = 'pointer' + type.toLowerCase();\n\n            if ($J.browser.uaName === 'edge') {\n                EVENTS_MAP[evt] = evt;\n            } else if (WIN.navigator.msPointerEnabled) {\n                EVENTS_MAP[evt] = 'MSPointer' + type;\n            } else {\n                EVENTS_MAP[evt] = -1;\n            }\n        });\n    }\n})();\n\n(() => {\n    const getCancel = () => {\n        let result = DOC.exitFullscreen ||\n                     DOC.cancelFullScreen ||\n                     document[$J.browser.domPrefix + 'ExitFullscreen'] ||\n                     document[$J.browser.domPrefix + 'CancelFullScreen'];\n\n        if (!result) {\n            result = () => {};\n        }\n\n        return result;\n    };\n\n    const getChangeEventName = () => {\n        let result;\n\n        if (DOC.msExitFullscreen) {\n            result = 'MSFullscreenChange';\n        } else {\n            if (DOC.exitFullscreen) {\n                result = '';\n            } else {\n                result = $J.browser.domPrefix;\n            }\n\n            result += 'fullscreenchange';\n        }\n\n        return result;\n    };\n\n    const getErrorEventName = () => {\n        let result;\n\n        if (DOC.msExitFullscreen) {\n            result = 'MSFullscreenError';\n        } else {\n            if (DOC.exitFullscreen) {\n                result = '';\n            } else {\n                result = $J.browser.domPrefix;\n            }\n\n            result += 'fullscreenerror';\n        }\n\n        return result;\n    };\n\n    const callRequestFullscreen = (el) => {\n        let f = el.requestFullscreen || el[$J.browser.domPrefix + 'RequestFullscreen'] || el[$J.browser.domPrefix + 'RequestFullScreen'];\n\n        if (!f) { f = () => {}; }\n\n        f.call(el);\n    };\n\n    const fullScreen = {\n        capable: $J.browser.features.fullScreen,\n\n        enabled: () => {\n            return !!(DOC.fullscreenElement || DOC[$J.browser.domPrefix + 'FullscreenElement']\n                || DOC.fullScreen || DOC.webkitIsFullScreen || DOC[$J.browser.domPrefix + 'FullScreen']);\n        },\n\n        request: (el, opts) => {\n            if (!opts) {\n                opts = {};\n            }\n\n            if (fullScreen.capable && !opts.windowFullscreen) {\n                fullScreen.onchange = (e) => { // onfullscreenchange event\n                    if (fullScreen.enabled()) { // we entered full-screen mode\n                        if (opts.onEnter) {\n                            opts.onEnter();\n                        }\n                    } else { // left fullscreen mode\n                        $J.$(DOC).removeEvent(fullScreen.changeEventName, fullScreen.onchange);\n                        if (opts.onExit) {\n                            opts.onExit();\n                        }\n                    }\n                };\n\n                $J.$(DOC).addEvent(fullScreen.changeEventName, fullScreen.onchange);\n\n                fullScreen.onerror = (e) => { // onfullscreenchange event\n                    if (opts.fallback) {\n                        opts.fallback();\n                    }\n                    $J.$(DOC).removeEvent(fullScreen.errorEventName, fullScreen.onerror);\n                };\n\n                // if native fullscreen failed, enter pseudo mode\n                $J.$(DOC).addEvent(fullScreen.errorEventName, fullScreen.onerror);\n\n                callRequestFullscreen($(el).node);\n            } else if (opts.fallback) {\n                opts.fallback();\n            }\n        },\n\n        cancel: getCancel(),\n\n        changeEventName: getChangeEventName(),\n\n        errorEventName: getErrorEventName(),\n\n        prefix: $J.browser.domPrefix,\n\n        activeElement: null\n    };\n\n    $J.browser.fullScreen = fullScreen;\n})();\n\n/* eslint-env es6 */\n/* global WIN, DOC, UND, docStyles, STORAGE, EVENTS_MAP */\n/* eslint-disable quote-props */\n/* eslint no-restricted-syntax: [\"error\", \"WithStatement\"] */\n/* eslint-disable camelcase */\n\n\n// Not whitespace regexp\n// const r_nwp = /\\S+/g;\nconst r_cssToNum = /^(border(Top|Bottom|Left|Right)Width)|((padding|margin)(Top|Bottom|Left|Right))$/;\n\n// normalize CSS names\nconst cssMap = {\n    'float': (typeof (docStyles.styleFloat) === 'undefined') ? 'cssFloat' : 'styleFloat'\n};\n\n// Unitless CSS properties (w/o 'px')\nconst nopxCSS = {\n    'fontWeight': true,\n    'lineHeight': true,\n    'opacity': true,\n    'zIndex': true,\n    'zoom': true\n};\n\nlet getCssValue;\nif (WIN.getComputedStyle) {\n    getCssValue = (e, name) => {\n        const css = WIN.getComputedStyle(e, null);\n        return css ? css.getPropertyValue(name) || css[name] : null;\n    };\n} else {\n    getCssValue = (e, name) => {\n        const css = e.currentStyle;\n        let v = null;\n\n        v = css ? css[name] : null;\n\n        if (v === null && e.style && e.style[name]) {\n            v = e.style[name];\n        }\n\n        return v;\n    };\n}\n\n// Returns normalize CSS name (probably with a vendor prefix)\nconst normalizeCSS = (name) => {\n    let pName;\n\n    // Webkit reports the existence of the filter property, but it can be used only with -webkit- prefix.\n    const standard = ($J.browser.webkit && name === 'filter') ? false : (name in docStyles);\n\n    // if ( !(name in docStyles) ) {\n    if (!standard) {\n        pName = $J.browser.cssDomPrefix + name.charAt(0).toUpperCase() + name.slice(1);\n        if (pName in docStyles) {\n            return pName;\n        }\n    }\n    return name;\n};\n\n$J.normalizeCSS = normalizeCSS;\n\nclass Base {\n    constructor(node) {\n        this.node = node;\n        this.$J_UUID = ++$J.UUID;\n        this.$J_TYPE = null;\n        this.$J_EXT = () => {};\n        STORAGE.set(this.node, this);\n    }\n\n    /**\n     * Retreive object's property from the global storage\n     *\n     * @param  {string}    - property name\n     * @param  {mixed}     - default value\n     *\n     * @returns {mixed}     - property value\n     */\n    fetch(prop, def) {\n        const s = $J.getStorage(this.$J_UUID);\n        let p = s[prop];\n        let result = null;\n\n        if (def !== UND && p === UND) {\n            s[prop] = def;\n            p = s[prop];\n        }\n\n        if ($J.defined(p)) {\n            result = p;\n        }\n\n        return result;\n    }\n\n    /**\n     * Store object's property in the global storage\n     *\n     * @param  {string}    - property name\n     * @param  {mixed}     - value\n     *\n     * @returns {element}   - HTML element\n     */\n    store(prop, val) {\n        const s = $J.getStorage(this.$J_UUID);\n        s[prop] = val;\n        return this;\n    }\n\n    /**\n     * Delete object's property from the global storage\n     *\n     * @param  {string}    - property name\n     *\n     * @returns {element}   - HTML element\n     */\n    del(prop) {\n        const s = $J.getStorage(this.$J_UUID);\n        delete s[prop];\n        return this;\n    }\n\n    /**\n     * Add event listener\n     *\n     * @param  type  {Mixed}     event type\n     * @param  fn  {Function}    listener\n     * @param  [priority=10] {Integer} order in which the listener will be called\n     */\n    addEvent(type, fn, priority, options) {\n        let handlers;\n        // let _self;\n        let _type;\n\n        if ($J.typeOf(type) === 'string') {\n            _type = type.split(' ');\n            if (_type.length > 1) {\n                type = _type;\n            }\n        }\n\n        if ($J.typeOf(type) === 'array') {\n            type.forEach((__type) => {\n                // this.addEvent.call(this, __type, fn, priority, options);\n                this.addEvent(__type, fn, priority, options);\n            });\n\n            return this;\n        }\n\n        // Normalize event name\n        type = EVENTS_MAP[type] || type;\n\n        if (!type || !fn || $J.typeOf(type) !== 'string' || $J.typeOf(fn) !== 'function') {\n            return this;\n        }\n\n        if (type === 'domready' && $J.browser.ready) {\n            // fn.call(this);\n            fn();\n            return this;\n        }\n\n        priority = parseInt(priority || 50, 10);\n\n        if (!fn.$J_EUID) {\n            fn.$J_EUID = Math.floor(Math.random() * $J.now());\n        }\n\n        // const events = $J.Doc.fetch.call(this, '_EVENTS_', {});\n        const events = this.fetch('_EVENTS_', {});\n        handlers = events[type];\n\n        if (!handlers) {\n            // Initialize event handlers queue\n            handlers = [];\n            events[type] = handlers;\n            // _self = this;\n\n            if ($J.Events.handlers[type]) {\n                $J.Events.handlers[type].add.call(this, options);\n                // $J.Events.handlers[type].add(this, options);\n            } else {\n                // handlers['handle'] = function (e) {\n                handlers['handle'] = (e) => {\n                    e = $J.extend(e || WIN.e, { $J_TYPE: 'event' });\n                    // $J.Doc.callEvent.call(_self, type, $J.$(e));\n                    this.callEvent(type, $J.$(e));\n                };\n\n                this.node[$J._event_add_]($J._event_prefix_ + type, handlers['handle'], false);\n            }\n        }\n\n        const fnObj = {\n            type: type,\n            fn: fn,\n            priority: priority,\n            euid: fn.$J_EUID\n        };\n\n        handlers.push(fnObj);\n        handlers.sort((a, b) => { return a.priority - b.priority; });\n\n        return this;\n    }\n\n    // removeEvent(type/*, fn */) {\n    removeEvent(...args) {\n        // const events = $J.Doc.fetch.call(this, '_EVENTS_', {});\n        const events = this.fetch('_EVENTS_', {});\n        let fnObj;\n        let k;\n        let _type;\n        // let del;\n        let type = args[0];\n\n        // const fn = arguments.length > 1 ? arguments[1] : -100;\n        const fn = args.length > 1 ? args[1] : -100;\n        if ($J.typeOf(type) === 'string') {\n            _type = type.split(' ');\n            if (_type.length > 1) {\n                type = _type;\n            }\n        }\n\n        if ($J.typeOf(type) === 'array') {\n            // $J.$(type).each(this.removeEvent.bindAsEvent(this, fn));\n            type.forEach((__type) => {\n                this.removeEvent(__type, fn);\n            });\n\n            return this;\n        }\n\n        // Normalize event name\n        type = EVENTS_MAP[type] || type;\n\n        if (!type || $J.typeOf(type) !== 'string' || !events || !events[type]) {\n            return this;\n        }\n\n        const handlers = events[type] || [];\n\n        for (k = 0; k < handlers.length; k++) {\n            fnObj = handlers[k];\n\n            if (fn === -100 || !!fn && fn.$J_EUID === fnObj.euid) {\n                // del = handlers.splice(k--, 1);\n                handlers.splice(k--, 1);\n            }\n        }\n\n        if (handlers.length === 0) {\n            if ($J.Events.handlers[type]) {\n                $J.Events.handlers[type].remove.call(this);\n            } else {\n                this.node[$J._event_del_]($J._event_prefix_ + type, handlers['handle'], false);\n            }\n\n            delete events[type];\n        }\n        return this;\n    }\n\n    callEvent(type, e) {\n        const events = this.fetch('_EVENTS_', {});\n        let k;\n\n        // Normalize event name\n        type = EVENTS_MAP[type] || type;\n\n        if (!type || $J.typeOf(type) !== 'string' || !events || !events[type]) {\n            // return this;\n        } else {\n            try {\n                if (!e || !e.type) {\n                    e = $J.extend(e || {}, { type: type });\n                }\n            } catch (ev) {\n                // empty\n            }\n\n            if (e.timeStamp === UND) {\n                e.timeStamp = $J.now();\n            }\n\n            const handlers = events[type] || [];\n            for (k = 0; k < handlers.length && !(e.isQueueStopped && e.isQueueStopped()); k++) {\n                handlers[k].fn.call(this, e);\n            }\n        }\n    }\n\n    raiseEvent(type, name) {\n        const _native = (type !== 'domready');\n        let o = this;\n        let e;\n\n        // Normalize event name\n        type = EVENTS_MAP[type] || type;\n\n        if (!_native) {\n            this.callEvent(type);\n            return this;\n        }\n\n        if (o === DOC && DOC.createEvent && !o.dispatchEvent) {\n            o = DOC.documentElement;\n        }\n\n        if (DOC.createEvent) {\n            e = DOC.createEvent(type);\n            e.initEvent(name, true, true);\n        } else {\n            e = DOC.createEventObject();\n            e.eventType = type;\n        }\n\n        if (DOC.createEvent) {\n            o.dispatchEvent(e);\n        } else {\n            o.fireEvent('on' + name, e);\n        }\n\n        return e;\n    }\n\n    clearEvents() {\n        // const events = $J.Doc.fetch.call(this, '_EVENTS_');\n        const events = this.fetch('_EVENTS_');\n\n        if (!events) { return this; }\n\n        for (const _type in events) {\n            if (Object.prototype.hasOwnProperty.call(events, _type)) {\n                // $J.Doc.removeEvent.call(this, _type);\n                this.removeEvent(_type);\n            }\n        }\n\n        // $J.Doc.del.call(this, '_EVENTS_');\n        this.del('_EVENTS_');\n\n        return this;\n    }\n}\n\nclass Element extends Base {\n    constructor(node) {\n        super(node);\n        this.$J_TYPE = 'magicjs-element';\n    }\n\n    // Full screen\n    requestFullScreen() {\n        if ($J.browser.fullScreen.capable && !DOC.requestFullScreen) {\n            $J.browser.fullScreen.request(this.node);\n        } else {\n            this.node.requestFullScreen(this.node);\n        }\n    }\n\n    /**\n     * Adds class(es) to element\n     *\n     * @param {String}   val   One or more space-separated classes to be added\n     *\n     * @returns {Element}    Reference to the element itself\n     */\n    addClass(val) {\n        val = val ? val.split(' ') : [''];\n        val.forEach((v) => {\n            v = v.trim();\n            if (v) {\n                this.node.classList.add(v);\n            }\n        });\n\n        return this;\n    }\n\n    /**\n     * Removes class(es) from element.\n     *\n     * @param {String}  [val] One or more space-separated classes to be removed. If omitted, remove all classes.\n     *\n     * @returns {Element}    Reference to the element itself\n     */\n    removeClass(val) {\n        this.node.classList.remove(val);\n        return this;\n    }\n\n    /**\n     * Toogles a class on element\n     *\n     * @param {String}   val  A class name to be toggled\n     *\n     * @returns {Element}    Reference to the element itself\n     */\n    toggleClass(val) {\n        this.node.classList.toggle(val);\n        return this;\n    }\n\n    /**\n     * Retrieves element's css style\n     *\n     * @param {String}   property CSS property to retrieve\n     *\n     * @returns {Mixed}     Value of CSS property\n     */\n    getCss(p) {\n        const cssName = $J.camelize(p);\n        let v = null;\n\n        if (!cssMap[cssName]) {\n            cssMap[cssName] = normalizeCSS(cssName);\n        }\n\n        p = cssMap[cssName];\n\n        // p = cssMap[cssName] || (cssMap[cssName] = normalizeCSS(cssName));\n        v = getCssValue(this.node, p);\n\n        if (v === 'auto') {\n            v = null;\n        }\n\n        if (v !== null) {\n            if (p === 'opacity') return $J.defined(v) ? parseFloat(v) : 1.0;\n            if (r_cssToNum.test(p)) {\n                v = parseInt(v, 10) ? v : '0px';\n            }\n        }\n\n        return v;\n    }\n\n    /**\n     * Applies a single CSS style to element\n     *\n     * @param {String}      key        CSS property name\n     * @param {Mixed}      value    Value to be set up\n     *\n     * @returns {Element}   Reference to the element itself\n     */\n    setCssProp(k, v) {\n        const cssName = $J.camelize(k);\n\n        try {\n            if (!cssMap[cssName]) {\n                cssMap[cssName] = normalizeCSS(cssName);\n            }\n\n            k = cssMap[cssName];\n\n            // k = cssMap[cssName] || (cssMap[cssName] = normalizeCSS(cssName));\n            this.node.style[k] = v + (($J.typeOf(v) === 'number' && !nopxCSS[cssName]) ? 'px' : '');\n        } catch (e) {\n            // empty\n        }\n\n        return this;\n    }\n\n    /**\n     * Applies css styles to element\n     *\n     * @param {Hash}    styles  Set of the CSS styles to apply\n     *\n     * @returns {Element}    Reference to the element itself\n     */\n    setCss(styles) {\n        for (const s in styles) {\n            if (Object.prototype.hasOwnProperty.call(styles, s)) {\n                this.setCssProp(s, styles[s]);\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * Retrieves set of element's css style\n     *\n     * @param {String[]}   styles   CSS styles to retrieve\n     *\n     * @returns {Hash}      Set of CSS styles\n     */\n    getStyles(...args) {\n        const r = {};\n\n        args.forEach((k) => {\n            r[k] = this.getCss(k);\n        });\n\n        return r;\n    }\n\n    /**\n     * Applies properties to element\n     *\n     * @param {Hash}    properties  Set of properties to apply\n     *\n     * @returns {Element}    Reference to the element itself\n     */\n    setProps(props) {\n        for (const p in props) {\n            if (p === 'class') {\n                this.addClass('' + props[p]);\n            } else {\n                this.node.setAttribute(p, '' + props[p]);\n            }\n        }\n        return this;\n    }\n\n    getTransitionDuration() {\n        let duration = 0;\n        let delay = 0;\n\n        duration = this.getCss('transition-duration');\n        delay = this.getCss('transition-delay');\n\n        if (duration.indexOf('ms') > -1) {\n            duration = parseFloat(duration);\n        } else if (duration.indexOf('s') > -1) {\n            duration = parseFloat(duration) * 1000;\n        }\n\n        if (delay.indexOf('ms') > -1) {\n            delay = parseFloat(delay);\n        } else if (delay.indexOf('s') > -1) {\n            delay = parseFloat(delay) * 1000;\n        }\n\n        return duration + delay;\n    }\n\n    /**\n     * Gets size of element\n     *\n     * @returns {Hash} Size of the element  {width: x, height: x}\n     */\n    getSize() {\n        return { 'width': this.node.offsetWidth, 'height': this.node.offsetHeight };\n    }\n\n    /**\n     * Gets inner size of element\n     *\n     * @param  [withPadding=false] {Boolean} include padding in returning size\n     *\n     * @returns {Hash} Size of the element  {width: x, height: x}\n     */\n    getInnerSize(withPadding) {\n        const size = this.getSize();\n\n        size.width -= (parseFloat(this.getCss('border-left-width') || 0) + parseFloat(this.getCss('border-right-width') || 0));\n        size.height -= (parseFloat(this.getCss('border-top-width') || 0) + parseFloat(this.getCss('border-bottom-width') || 0));\n\n        if (!withPadding) {\n            size.width -= (parseFloat(this.getCss('padding-left') || 0) + parseFloat(this.getCss('padding-right') || 0));\n            size.height -= (parseFloat(this.getCss('padding-top') || 0) + parseFloat(this.getCss('padding-bottom') || 0));\n        }\n\n        return size;\n    }\n\n    /**\n     * Gets scroll offsets\n     *\n     * @returns {Hash} Number of pixels that element has been scrolled upward and to the left\n     */\n    getScroll() {\n        return { 'top': this.node.scrollTop, 'left': this.node.scrollLeft };\n    }\n\n    /**\n     * Gets scroll offsets from the window top left corner\n     *\n     * @returns {Hash}\n     */\n    getFullScroll() {\n        let el = this.node;\n        const p = { 'top': 0, 'left': 0 };\n\n        do {\n            p.left += el.scrollLeft || 0;\n            p.top += el.scrollTop || 0;\n            el = el.parentNode;\n        } while (el);\n\n        return p;\n    }\n\n    /**\n     * Gets absolue position of element\n     *\n     * @returns {Hash} Coordinates of element's top left corner\n     */\n    getPosition() {\n        let el = this.node;\n        let l = 0;\n        let t = 0;\n\n        if ($J.defined(DOC.documentElement.getBoundingClientRect)) {\n            const b = this.node.getBoundingClientRect();\n            const docScroll = $J.$(DOC).getScroll();\n            const doc = $J.browser.getDoc();\n            return {\n                'top':  b.top + docScroll.y - doc.clientTop,\n                'left': b.left + docScroll.x - doc.clientLeft\n            };\n        }\n\n        do {\n            l += el.offsetLeft || 0;\n            t += el.offsetTop || 0;\n            el = el.offsetParent;\n        } while (el && !(/^(?:body|html)$/i).test(el.tagName));\n\n        return { 'top': t, 'left': l };\n    }\n\n    /**\n     * Gets element's absolute coordinates on a page\n     *\n     * @returns {Hash}  top/left/bottom/right coordinates\n     */\n    getRect() {\n        const p = this.getPosition();\n        const s = this.getSize();\n\n        return { 'top': p.top, 'bottom': p.top + s.height, 'left': p.left, 'right': p.left + s.width };\n    }\n\n    /**\n     * Sets element content\n     *\n     * @param {String} content New content\n     *\n     * @returns {Element}   Reference to the element itself\n     */\n    changeContent(c) {\n        try {\n            this.node.innerHTML = c;\n        } catch (e) {\n            this.node.innerText = c;\n        }\n        return this;\n    }\n\n    /**\n     * Removes element from the DOM tree\n     *\n     * @returns {Element} Reference to the removed element\n     */\n    remove() {\n        let result = this;\n\n        if (this.node.parentNode) {\n            result = $J.$(this.node.parentNode.removeChild(this.node));\n        }\n\n        // TODO remove from storage\n\n        return result;\n    }\n\n    /**\n     * Kills element by removes it DOM tree and clear all events.\n     * All child elements will be killed too.\n     *\n     * @returns Null\n     */\n    kill() {\n        $J.$A(this.node.childNodes).forEach((o) => {\n            if (o.nodeType === 3 || o.nodeType === 8) { return; }\n            $J.$(o).kill();\n        });\n\n        this.remove();\n        this.clearEvents();\n\n        if (this.$J_UUID) {\n            $J.storage[this.$J_UUID] = null;\n            delete $J.storage[this.$J_UUID];\n        }\n\n        return null;\n    }\n\n    /**\n     * Appends child element\n     *\n     * @param  {Element}   element  Element to append\n     * @param  {String}    [position='bottom']  Where to append: top/bottom.\n     *\n     * @returns {Element}    Reference to the element itself\n     */\n    append(o, p = 'bottom') {\n        const f = this.node.firstChild;\n\n        o = $J.$(o);\n\n        if (p === 'top' && f) {\n            this.node.insertBefore(o.node, f);\n        } else {\n            this.node.appendChild(o.node || o);\n        }\n\n        return this;\n    }\n\n    /**\n     * Appends element to parent\n     *\n     * @param  {Element}   parent   Parent element\n     * @param  {String}    [position='bottom']  Where to append: top/bottom.\n     *\n     * @returns {Element}    Reference to the element itself\n     */\n    appendTo(o, p) {\n        // return $J.$(o).append(this, p);\n        $J.$(o).append(this, p);\n        return this;\n    }\n\n\n    getTagName() {\n        return this.node.tagName.toLowerCase();\n    }\n\n    attr(attrName, attrValue) {\n        let result = this;\n\n        if ($J.defined(attrValue)) {\n            this.node.setAttribute(attrName, attrValue);\n        } else {\n            result = this.node.getAttribute(attrName);\n\n            if (!result || $J.typeOf(result) !== 'string' || result.trim() === '') {\n                result = null;\n            }\n        }\n\n        return result;\n    }\n\n    removeAttr(attrName) {\n        this.node.removeAttribute(attrName);\n        return this;\n    }\n\n    /**\n     * Checks if the specified class applied to the element\n     * @param  {String}  cName Class to check\n     * @return {Boolean}\n     */\n    hasClass(cName) {\n        // Use `classList` if browser supports it.\n        if (this.node.classList) {\n            return this.node.classList.contains(cName);\n        }\n\n        let className = this.node.className;\n        if (this.node.className instanceof SVGAnimatedString) {\n            className = this.node.className.baseVal;\n        }\n\n        return !$J.stringHas(cName || '', ' ') && $J.stringHas(className || '', ' ');\n    }\n\n    hasAttribute(attrName) {\n        return this.node.hasAttribute(attrName);\n    }\n}\n\n\n/* eslint-disable class-methods-use-this */\nclass Doc extends Base {\n    constructor(node) {\n        super(node);\n\n        let type = 'magicjs-document';\n\n        if (node === WIN) {\n            type = 'magicjs-window';\n        }\n\n        this.$J_TYPE = type;\n    }\n\n    /**\n     * Gets size of browser window\n     */\n    getSize() {\n        if ($J.browser.touchScreen || $J.browser.presto925 || $J.browser.webkit419) {\n            return { 'width': WIN.innerWidth, 'height': WIN.innerHeight };\n        }\n\n        return { 'width': $J.browser.getDoc().clientWidth, 'height': $J.browser.getDoc().clientHeight };\n    }\n\n    /**\n     * Gets window scroll offsets\n     */\n    getScroll() {\n        return { 'x': WIN.pageXOffset || $J.browser.getDoc().scrollLeft, 'y': WIN.pageYOffset || $J.browser.getDoc().scrollTop };\n    }\n\n    /**\n     * Get full page size including scroll\n     */\n    getFullSize() {\n        const s = this.getSize();\n        return { 'width': Math.max($J.browser.getDoc().scrollWidth, s.width), 'height': Math.max($J.browser.getDoc().scrollHeight, s.height) };\n    }\n}\n\n/* eslint-env es6 */\n/* global magicJS, $J */\n/* global WIN, DOC, UND */\n/* global EVENTS_MAP */\n/* eslint-disable dot-notation */\n/* eslint-disable no-unused-vars */\n/* eslint no-restricted-syntax: [\"error\", \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n\n$J.Events = {};\n\n/**\n * Contains Event methods, custom Events and Element methods to dealing with events.\n * @class Contains Event methods, custom Events and Element methods to dealing with events.\n */\nclass MagicEvent {\n    constructor(originEvent) {\n        this.oe = originEvent;\n        this.$J_TYPE = 'event';\n        this.isQueueStopped = $J.$false;\n        this.type = this.oe.type;\n        this.timeStamp = this.oe.timeStamp;\n        this.propertyName = this.oe.propertyName;\n        this.pointerType = this.oe.pointerType;\n    }\n\n    getOriginEvent() {\n        return this.oe;\n    }\n\n    /**\n     * Stop event propagation and default actions.\n     * @return {Event}\n     */\n    stop() {\n        return this.stopDistribution().stopDefaults();\n    }\n\n    /**\n     * Stop event propagation.\n     * @return {Event}\n     */\n    stopDistribution() {\n        if (this.oe.stopPropagation) {\n            // if (this.oe.cancelable) {\n                this.oe.stopPropagation();\n            // }\n        } else {\n            this.oe.cancelBubble = true;\n        }\n\n        return this;\n    }\n\n    /**\n     * Stop default action.\n     * @return {Event}\n     */\n    stopDefaults() {\n        if (this.oe.preventDefault) {\n            this.oe.preventDefault();\n        } else {\n            this.oe.returnValue = false;\n        }\n\n        return this;\n    }\n\n    /**\n     * Prevent other listeners to handle the event.\n     * @return {Event}\n     */\n    stopQueue() {\n        this.isQueueStopped = $J.$true;\n        return this;\n    }\n\n    /**\n     * Return mouse/pointer coordinates relative to the viewport.\n     * @return {Object}\n     */\n    getClientXY() {\n        let src;\n        let result = { x: 0, y: 0 };\n\n        if ((/touch/i).test(this.type)) {\n            src = this.oe.changedTouches[0];\n        } else {\n            src = this.oe;\n        }\n\n        if ($J.defined(src)) {\n            result = {\n                x: src.clientX,\n                y: src.clientY\n            };\n        }\n\n        return result;\n    }\n\n    /**\n     * Return mouse/pointer coordinates relative to the viewport, including scroll offset.\n     * @return {Object}\n     */\n    getPageXY() {\n        let src;\n        let result = { x: 0, y: 0 };\n\n        if ((/touch/i).test(this.type)) {\n            src = this.oe.changedTouches[0];\n        } else {\n            src = this.oe;\n        }\n\n        if ($J.defined(src)) {\n            result = {\n                x: src.pageX || src.clientX + $J.browser.getDoc().scrollLeft,\n                y: src.pageY || src.clientY + $J.browser.getDoc().scrollTop\n            };\n        }\n\n        return result;\n    }\n\n    /**\n     * Return target element.\n     * @return {Element}\n     */\n    getTarget() {\n        let t = this.oe.target;\n\n        if (!t) {\n            t = this.oe.srcElement;\n        }\n\n        while (t && t.nodeType === 3) { t = t.parentNode; }\n\n        return t;\n    }\n\n    /**\n     * Return related element.\n     * @return {Element}\n     */\n    getRelated() {\n        let r = null;\n\n        switch (this.type) {\n            case 'mouseover':\n            case 'pointerover':\n            case 'MSPointerOver':\n                r = this.oe.relatedTarget;\n                if (!r) { r = this.oe.fromElement; }\n                break;\n\n            case 'mouseout':\n            case 'pointerout':\n            case 'MSPointerOut':\n                r = this.oe.relatedTarget;\n                if (!r) { r = this.oe.toElement; }\n                break;\n\n            default:\n                return r;\n        }\n        try {\n            while (r && r.nodeType === 3) { r = r.parentNode; }\n        } catch (ex) { r = null; }\n\n\n        return r;\n    }\n\n    /**\n     * Return clicked button\n     *  1 - left, 2 - middle, 3 - right\n     *\n     * @returns  {integer}   button index\n     */\n    getButton() {\n        let result = this.oe.which;\n\n        if (!this.oe.which && this.oe.button !== UND) {\n            if (this.oe.button & 1) {\n                result = 1;\n            } else if (this.oe.button & 2) {\n                result = 3;\n            } else if (this.oe.button & 4) {\n                result = 2;\n            } else {\n                result = 0;\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Return true if it's a Touch/Pointer event.\n     * @return {Boolean}\n     */\n    isTouchEvent() {\n        return (this.oe.pointerType && (this.oe.pointerType === 'touch' || this.oe.pointerType === this.oe.MSPOINTER_TYPE_TOUCH))\n                || (/touch/i).test(this.type);\n    }\n\n    /**\n     * Return true if it's a primary Touch/Pointer event.\n     * @return {Boolean}\n     */\n    isPrimaryTouch() {\n        if (this.oe.pointerType) {\n            return (this.oe.pointerType === 'touch' || this.oe.MSPOINTER_TYPE_TOUCH === this.oe.pointerType) && this.oe.isPrimary;\n        } else if (this.oe instanceof WIN.TouchEvent) {\n            return this.oe.changedTouches.length === 1\n                    && (this.oe.targetTouches.length ? this.oe.targetTouches[0].identifier === this.oe.changedTouches[0].identifier : true);\n        }\n\n        return false;\n    }\n\n    /**\n     * Return reference to the primary Touch/Pointer event.\n     * @return {Object}\n     */\n    getPrimaryTouch() {\n        let result = null;\n\n        if (this.oe.pointerType) {\n            if (this.oe.isPrimary && (this.oe.pointerType === 'touch' || this.oe.MSPOINTER_TYPE_TOUCH === this.oe.pointerType)) {\n                result = this.oe;\n            }\n        } else if (this.oe instanceof WIN.TouchEvent) {\n            result = this.oe.changedTouches[0];\n        }\n\n        return result;\n    }\n\n    /**\n     * Return identifier of the primary Touch/Pointer event.\n     * @return {Int}\n     */\n    getPrimaryTouchId() {\n        let result = null;\n\n        if (this.oe.pointerType) {\n            if (this.oe.isPrimary && (this.oe.pointerType === 'touch' || this.oe.MSPOINTER_TYPE_TOUCH === this.oe.pointerType)) {\n                result = this.oe.pointerId;\n            }\n        } else if (this.oe instanceof WIN.TouchEvent) {\n            result = this.oe.changedTouches[0].identifier;\n        }\n\n        return result;\n    }\n}\n\n$J.Events.MagicEvent = MagicEvent;\n\n/* Extend Element and Document prototypes */\n\n$J._event_add_ = 'addEventListener';\n$J._event_del_ = 'removeEventListener';\n$J._event_prefix_ = '';\n\nif (!DOC.addEventListener) {\n    $J._event_add_ = 'attachEvent';\n    $J._event_del_ = 'detachEvent';\n    $J._event_prefix_ = 'on';\n}\n\nclass Custom {\n    constructor(e) {\n        this.$J_TYPE = 'event.custom';\n        this.magicEvent = e.$J_TYPE === 'event' ? e : e.magicEvent;\n\n        this.type = this.magicEvent.type;\n        // this.target = this.magicEvent.oe.target;\n        this.x = this.magicEvent.oe.x;\n        this.y = this.magicEvent.oe.y;\n        this.button = this.magicEvent.getButton();\n        this.timeStamp = this.magicEvent.oe.timeStamp;\n        this.relatedTarget = this.magicEvent.getRelated();\n        this.isQueueStopped = this.magicEvent.isQueueStopped; // TODO $J.$false\n        this.events = [];\n    }\n\n    getOriginEvent() {\n        return this.magicEvent.getOriginEvent();\n    }\n\n    pushToEvents(e) {\n        const eventCopy = e;\n        this.events.push(eventCopy);\n    }\n\n    stop() {\n        return this.stopDistribution().stopDefaults();\n    }\n\n    stopDistribution() {\n        this.events.forEach((e) => {\n            try {\n                e.stopDistribution();\n            } catch (ex) {\n                // empty\n            }\n        });\n\n        return this;\n    }\n\n    stopDefaults() {\n        this.events.forEach((e) => {\n            try {\n                e.stopDefaults();\n            } catch (ex) {\n                // empty\n            }\n        });\n\n        return this;\n    }\n\n    stopQueue() {\n        this.isQueueStopped = $J.$true;\n        this.magicEvent.stopQueue();\n        return this;\n    }\n\n    /**\n     * Return mouse/pointer coordinates relative to the viewport.\n     * @return {Object}\n     */\n    getClientXY() {\n        return { x: this.clientX || this.magicEvent.oe.clientX, y: this.clientY || this.magicEvent.oe.clientY };\n    }\n\n    /**\n     * Return mouse/pointer coordinates relative to the viewport, including scroll offset.\n     * @return {Object}\n     */\n    getPageXY() {\n        return { x: this.x, y: this.y };\n    }\n\n    getTarget() {\n        return this.target || this.magicEvent.oe.target;\n    }\n\n    getRelated() {\n        return this.relatedTarget;\n    }\n\n    getButton() {\n        return this.button;\n    }\n\n    getOriginalTarget() {\n        let result = UND;\n\n        if (this.events.length > 0) {\n            result = this.events[0].getTarget();\n        }\n\n        return result;\n    }\n\n    /**\n     * Return true if it's a Touch/Pointer event.\n     * @return {Boolean}\n     */\n    isTouchEvent() {\n        return this.magicEvent.isTouchEvent();\n    }\n\n    /**\n     * Return true if it's a primary Touch/Pointer event.\n     * @return {Boolean}\n     */\n    isPrimaryTouch() {\n        return this.magicEvent.isPrimaryTouch();\n    }\n\n    /**\n     * Return reference to the primary Touch/Pointer event.\n     * @return {Object}\n     */\n    getPrimaryTouch() {\n        return this.magicEvent.getPrimaryTouch();\n    }\n\n    /**\n     * Return identifier of the primary Touch/Pointer event.\n     * @return {Int}\n     */\n    getPrimaryTouchId() {\n        return this.magicEvent.getPrimaryTouchId();\n    }\n}\n\n$J.Events.Custom = Custom;\n$J.Events.handlers = {};\n\n\n/**\n * Dom ready custom event implementation\n */\n\n(($J) => {\n    if (DOC.readyState === 'interactive' || DOC.readyState === 'complete') {\n        setTimeout(() => $J.browser.onready(), 0);\n    } else {\n        $J.$(DOC).addEvent('readystatechange', (event) => {\n            if (event.getTarget().readyState === 'interactive' || event.getTarget().readyState === 'complete') {\n                $J.browser.onready();\n            }\n        });\n        $J.$(DOC).addEvent('DOMContentLoaded', $J.browser.onready);\n        $J.$(WIN).addEvent('load', $J.browser.onready);\n    }\n})(magicJS);\n\n/* eslint-env es6 */\n/* eslint no-restricted-properties: [2, {\"object\": \"Math.pow\"}] */\n/* global magicJS, DOC */\n\n\n(($J) => {\n    const RADIUS_THRESHOLD = 5; // Click radius  // Click speed threshold\n    const TIME_THRESHOLD = 300; // Click speed threshold\n\n    class BtnClick extends $J.Events.Custom {\n        constructor(e, target) {\n            super(e);\n            const r = e.getPageXY();\n            this.type = 'btnclick';\n            this.x = r.x;\n            this.y = r.y;\n            this.clientX = e.oe.clientX;\n            this.clientY = e.oe.clientY;\n            this.target = target.node;\n\n            this.pushToEvents(e);\n        }\n    }\n\n    const _options = {\n        threshold: TIME_THRESHOLD, // Click speed threshold\n        button: 1 // left button\n    };\n\n    const onclick = function (e) { e.stopDefaults(); };\n\n    const handle = function (e) {\n        let btnclickEvent;\n        let r;\n\n        const options = this.fetch('event:btnclick:options');\n\n        if (e.type !== 'dblclick' && e.getButton() !== options.button) {\n            return;\n        }\n\n        if (this.fetch('event:btnclick:ignore')) {\n            this.del('event:btnclick:ignore');\n            return;\n        }\n\n        if (e.type === 'mousedown') {\n            // e.stop(); // will it cause problems? but if we need to stop mousedown user wont be able to do this, as we don't pass it\n\n            btnclickEvent = new BtnClick(e, this);\n\n            this.store('event:btnclick:btnclickEvent', btnclickEvent);\n        } else if (e.type === 'mouseup') {\n            btnclickEvent = this.fetch('event:btnclick:btnclickEvent');\n            if (!btnclickEvent) {\n                return;\n            }\n\n            r = e.getPageXY();\n\n            this.del('event:btnclick:btnclickEvent');\n\n            btnclickEvent.pushToEvents(e);\n\n            // if (e.timeStamp - btnclickEvent.timeStamp <= options.threshold && btnclickEvent.x == r.x && btnclickEvent.y == r.y) {\n            if (e.timeStamp - btnclickEvent.timeStamp <= options.threshold &&\n                Math.sqrt(Math.pow(r.x - btnclickEvent.x, 2) + Math.pow(r.y - btnclickEvent.y, 2)) <= RADIUS_THRESHOLD\n            ) {\n                this.callEvent('btnclick', btnclickEvent);\n            }\n\n            // Release mousedrag event\n            $(DOC).callEvent('mouseup', e);\n        } else if (e.type === 'dblclick') { // fire another btnclick because IE doesn't fire second mousedown on double click (and second click too)\n            btnclickEvent = new BtnClick(e, this);\n            this.callEvent('btnclick', btnclickEvent);\n        }\n    };\n\n    const handler = {\n        add: function (options) {\n            this.store('event:btnclick:options', $J.extend($J.detach(_options), options || {}));\n\n            this.addEvent('mousedown', handle, 1);\n            this.addEvent('mouseup', handle, 1);\n            this.addEvent('click', onclick, 1);\n        },\n\n        remove: function () {\n            this.removeEvent('mousedown', handle);\n            this.removeEvent('mouseup', handle);\n            this.removeEvent('click', onclick);\n        }\n    };\n\n    $J.Events.handlers.btnclick = handler;\n})(magicJS);\n\n/* eslint-env es6 */\n/* global magicJS, DOC */\n\n\n(($J) => {\n    class Mousedrag extends $J.Events.Custom {\n        constructor(e, target, state) {\n            super(e);\n            const r = e.getPageXY();\n            this.x = r.x;\n            this.y = r.y;\n            this.type = 'mousedrag';\n            this.clientX = e.clientX;\n            this.clientY = e.clientY;\n            this.target = target.node;\n\n            this.state = state; // dragmove / dragend\n            this.dragged = false;\n\n            this.pushToEvents(e);\n        }\n    }\n\n    const handleMouseDown = function (e) {\n        if (e.getButton() !== 1) {\n            return;\n        }\n        // e.stopDefaults();\n\n        const dragEvent = new Mousedrag(e, this, 'dragstart');\n\n        this.store('event:mousedrag:dragstart', dragEvent);\n\n        // this.callEvent('mousedrag', dragEvent);\n    };\n\n    const handleMouseUp = function (e) {\n        let dragEvent;\n\n        dragEvent = this.fetch('event:mousedrag:dragstart');\n\n        if (!dragEvent) {\n            return;\n        }\n        e.stopDefaults();\n\n        dragEvent = new Mousedrag(e, this, 'dragend');\n\n        this.del('event:mousedrag:dragstart');\n\n        this.callEvent('mousedrag', dragEvent);\n    };\n\n    const handleMouseMove = function (e) {\n        let dragEvent;\n\n        dragEvent = this.fetch('event:mousedrag:dragstart');\n\n        if (!dragEvent) {\n            return;\n        }\n\n        e.stopDefaults();\n\n        if (!dragEvent.dragged) {\n            dragEvent.dragged = true;\n            this.callEvent('mousedrag', dragEvent); // send dragstart\n        }\n\n        dragEvent = new Mousedrag(e, this, 'dragmove');\n        this.callEvent('mousedrag', dragEvent);\n    };\n\n    const handler = {\n        add: function () {\n            const move = handleMouseMove.bind(this);\n            const end = handleMouseUp.bind(this);\n\n            this.addEvent('mousedown', handleMouseDown, 1);\n            this.addEvent('mouseup', handleMouseUp, 1);\n\n            $(DOC).addEvent('mousemove', move, 1);\n            $(DOC).addEvent('mouseup', end, 1);\n\n            this.store('event:mousedrag:listeners:document:move', move);\n            this.store('event:mousedrag:listeners:document:end', end);\n        },\n\n        remove: function () {\n            const f = () => {};\n\n            this.removeEvent('mousedown', handleMouseDown);\n            this.removeEvent('mouseup', handleMouseUp);\n\n            $(DOC).removeEvent('mousemove', this.fetch('event:mousedrag:listeners:document:move') || f);\n            $(DOC).removeEvent('mouseup', this.fetch('event:mousedrag:listeners:document:end') || f);\n\n            this.del('event:mousedrag:listeners:document:move');\n            this.del('event:mousedrag:listeners:document:end');\n        }\n    };\n\n    $J.Events.handlers.mousedrag = handler;\n})(magicJS);\n\n/* eslint-env es6 */\n/* global magicJS */\n\n\n(($J) => {\n    class Dblbtnclick extends $J.Events.Custom {\n        constructor(e, target) {\n            super(e);\n            const r = e.getPageXY();\n            this.x = r.x;\n            this.y = r.y;\n            this.type = 'dblbtnclick';\n            this.clientX = e.clientX;\n            this.clientY = e.clientY;\n            this.target = target.node;\n\n            this.timedout = false;\n            this.tm = null;\n\n            this.pushToEvents(e);\n        }\n    }\n\n    const _options = {\n        threshold: 200\n    };\n\n    const handle = function (e) {\n        let event = this.fetch('event:dblbtnclick:event');\n        const options = this.fetch('event:dblbtnclick:options');\n\n        if (!event) { // first click\n            event = new Dblbtnclick(e, this);\n            event.tm = setTimeout(() => {\n                event.timedout = true;\n                e.isQueueStopped = $J.$false;\n\n                this.callEvent('btnclick', e);\n                this.del('event:dblbtnclick:event');\n            }, options.threshold + 10);\n\n            this.store('event:dblbtnclick:event', event);\n            e.stopQueue();\n        } else {\n            clearTimeout(event.tm);\n            this.del('event:dblbtnclick:event');\n\n            if (!event.timedout) { // double click detected within threshold timeout\n                event.pushToEvents(e);\n                e.stopQueue().stop();\n                this.callEvent('dblbtnclick', event);\n            } else { // double click timed out\n            }\n        }\n    };\n\n    const handler = {\n        add: function (options) {\n            this.store('event:dblbtnclick:options', $J.extend($J.detach(_options), options || {}));\n            this.addEvent('btnclick', handle, 1); // we should be first handler in queue or this wont work\n        },\n\n        remove: function () {\n            this.removeEvent('btnclick', handle);\n        }\n    };\n\n    $J.Events.handlers.dblbtnclick = handler;\n})(magicJS);\n\n/* eslint-env es6 */\n/* global magicJS */\n/* eslint no-restricted-properties: [2, {\"object\": \"Math.pow\"}] */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n\n\n(($J) => {\n    // Tap thresholds\n    const RADIUS_THRESHOLD = 10;\n    const TIME_THRESHOLD = 200;\n\n    class Tap extends $J.Events.Custom {\n        constructor(e, target) {\n            super(e);\n\n            const touch = e.getPrimaryTouch();\n            this.type = 'tap';\n            this.id = touch.pointerId || touch.identifier;\n            this.x = touch.pageX;\n            this.y = touch.pageY;\n            this.pageX = touch.pageX;\n            this.pageY = touch.pageY;\n            this.clientX = touch.clientX;\n            this.clientY = touch.clientY;\n            this.button = 0;\n            this.target = target.node;\n\n            this.pushToEvents(e);\n        }\n    }\n\n    const onClick = function (e) {\n        e.stopDefaults();\n    };\n\n    const onTouchStart = function (e) {\n        if (!e.isPrimaryTouch()) {\n            this.del('event:tap:event');\n            return;\n        }\n\n        this.store('event:tap:event', new Tap(e, this));\n\n        // Prevent btnclick event\n        this.store('event:btnclick:ignore', true);\n    };\n\n    const onTouchEnd = function (e) {\n        // let now = $J.now();\n        const event = this.fetch('event:tap:event');\n        // let options = this.fetch('event:tap:options');\n\n        if (!event || !e.isPrimaryTouch()) {\n            return;\n        }\n\n        this.del('event:tap:event');\n\n        if (event.id === e.getPrimaryTouchId() && e.timeStamp - event.timeStamp <= TIME_THRESHOLD\n            && Math.sqrt(\n                Math.pow(e.getPrimaryTouch().pageX - event.x, 2) + Math.pow(e.getPrimaryTouch().pageY - event.y, 2)\n            ) <= RADIUS_THRESHOLD\n        ) {\n            this.del('event:btnclick:btnclickEvent');\n            e.stop();\n            event.pushToEvents(e);\n            this.callEvent('tap', event);\n        }\n    };\n\n    const handler = {\n        add: function (options) {\n            this.addEvent(['touchstart', 'pointerdown'], onTouchStart, 1);\n            this.addEvent(['touchend', 'pointerup'], onTouchEnd, 1);\n            this.addEvent('click', onClick, 1);\n        },\n\n        remove: function () {\n            this.removeEvent(['touchstart', 'pointerdown'], onTouchStart);\n            this.removeEvent(['touchend', 'pointerup'], onTouchEnd);\n            this.removeEvent('click', onClick);\n        }\n    };\n\n    $J.Events.handlers.tap = handler;\n})(magicJS);\n\n/* eslint-env es6 */\n/* global magicJS */\n\n\n(($J) => {\n    class Dbltap extends $J.Events.Custom {\n        constructor(e, target) {\n            super(e);\n            this.type = 'dbltap';\n            this.x = e.x;\n            this.y = e.y;\n            this.clientX = e.clientX;\n            this.clientY = e.clientY;\n            this.target = target.node;\n            this.timedout = false;\n            this.tm = null;\n\n            this.pushToEvents(e);\n        }\n    }\n\n    const _options = {\n        threshold: 300\n    };\n\n    const handle = function (e) {\n        let event = this.fetch('event:dbltap:event');\n        const options = this.fetch('event:dbltap:options');\n\n        if (!event) { // first tap\n            event = new Dbltap(e, this);\n            event.tm = setTimeout(() => {\n                event.timedout = true;\n\n                e.isQueueStopped = $J.$false;\n                this.callEvent('tap', e);\n            }, options.threshold + 10);\n\n            this.store('event:dbltap:event', event);\n            e.stopQueue();\n        } else {\n            clearTimeout(event.tm);\n            this.del('event:dbltap:event');\n\n            if (!event.timedout) { // double tap detected within threshold timeout\n                event.pushToEvents(e);\n                e.stopQueue().stop();\n                this.callEvent('dbltap', event);\n            } else { // double tap timed out\n            }\n        }\n    };\n\n\n    const handler = {\n        add: function (options) {\n            this.store('event:dbltap:options', $J.extend($J.detach(_options), options || {}));\n            this.addEvent('tap', handle, 1); // we should be first handler in queue or this wont work\n        },\n\n        remove: function () {\n            this.removeEvent('tap', handle);\n        }\n    };\n\n    $J.Events.handlers.dbltap = handler;\n})(magicJS);\n\n/* eslint-env es6 */\n/* eslint no-restricted-properties: [2, {\"object\": \"Math.pow\"}] */\n/* global magicJS, DOC */\n\n\n(($J) => {\n    const RADIUS_THRESHOLD = 10;\n\n    class Touchdrag extends $J.Events.Custom {\n        constructor(e, target, state) {\n            super(e);\n            const touch = e.getPrimaryTouch();\n            this.type = 'touchdrag';\n            this.id = touch.pointerId || touch.identifier;\n            this.clientX = touch.clientX;\n            this.clientY = touch.clientY;\n            this.pageX = touch.pageX;\n            this.pageY = touch.pageY;\n            this.x = touch.pageX;\n            this.y = touch.pageY;\n            this.button = 0;\n            this.target = target.node;\n\n            this.state = state; // dragmove / dragend\n            this.dragged = false;\n\n            this.pushToEvents(e);\n        }\n    }\n\n    const onTouchStart = function (e) {\n        // if ( !isPrimaryTouch(e) ) {\n        if (!e.isPrimaryTouch()) {\n            return;\n        }\n\n        const dragEvent = new Touchdrag(e, this, 'dragstart');\n\n        this.store('event:touchdrag:dragstart', dragEvent);\n    };\n\n    const onTouchEnd = function (e) {\n        let dragEvent;\n\n        dragEvent = this.fetch('event:touchdrag:dragstart');\n\n        if (!dragEvent || !dragEvent.dragged || dragEvent.id !== e.getPrimaryTouchId()) {\n            return;\n        }\n\n        dragEvent = new Touchdrag(e, this, 'dragend');\n\n        this.del('event:touchdrag:dragstart');\n\n        this.callEvent('touchdrag', dragEvent);\n    };\n\n    const onTouchMove = function (e) {\n        let dragEvent;\n\n        dragEvent = this.fetch('event:touchdrag:dragstart');\n\n        if (!dragEvent || !e.isPrimaryTouch()) {\n            return;\n        }\n\n        if (dragEvent.id !== e.getPrimaryTouchId()) {\n            this.del('event:touchdrag:dragstart');\n            return;\n        }\n\n        if (!dragEvent.dragged\n            && Math.sqrt(\n                Math.pow(e.getPrimaryTouch().pageX - dragEvent.x, 2) + Math.pow(e.getPrimaryTouch().pageY - dragEvent.y, 2)\n            ) > RADIUS_THRESHOLD\n        ) {\n            dragEvent.dragged = true;\n            this.callEvent('touchdrag', dragEvent); // send dragstart\n        }\n        if (!dragEvent.dragged) { return; }\n\n        dragEvent = new Touchdrag(e, this, 'dragmove');\n        this.callEvent('touchdrag', dragEvent);\n    };\n\n\n    const handler = {\n        add: function () {\n            const move = onTouchMove.bind(this);\n            const end = onTouchEnd.bind(this);\n\n            this.addEvent(['touchstart', 'pointerdown'], onTouchStart, 1);\n            this.addEvent(['touchend', 'pointerup'], onTouchEnd, 1);\n            this.addEvent(['touchmove', 'pointermove'], onTouchMove, 1);\n\n            this.store('event:touchdrag:listeners:document:move', move);\n            this.store('event:touchdrag:listeners:document:end', end);\n\n            $(DOC).addEvent('pointermove', move, 1);\n            $(DOC).addEvent('pointerup', end, 1);\n        },\n\n        remove: function () {\n            const f = () => {};\n\n            this.removeEvent(['touchstart', 'pointerdown'], onTouchStart);\n            this.removeEvent(['touchend', 'pointerup'], onTouchEnd);\n            this.removeEvent(['touchmove', 'pointermove'], onTouchMove);\n\n            $(DOC).removeEvent('pointermove', this.fetch('event:touchdrag:listeners:document:move') || f, 1);\n            $(DOC).removeEvent('pointerup', this.fetch('event:touchdrag:listeners:document:end') || f, 1);\n\n            this.del('event:touchdrag:listeners:document:move');\n            this.del('event:touchdrag:listeners:document:end');\n        }\n    };\n\n    $J.Events.handlers.touchdrag = handler;\n})(magicJS);\n\n/* global DOC, magicJS */\n/* eslint-disable indent */\n/* eslint-disable dot-notation */\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n/* eslint no-restricted-properties: [2, {\"object\": \"Math.pow\"}] */\n/* eslint quote-props: [\"error\", \"as-needed\", { \"keywords\": true, \"unnecessary\": false }] */\n\n(($J) => {\n    let baseSpace = null;\n    const $ = $J.$;\n\n    const distance = (point1, point2) => {\n        const x = point2.x - point1.x;\n        const y = point2.y - point1.y;\n\n        return Math.sqrt(x * x + y * y);\n    };\n\n    const getSpace = (targetTouches, variables) => {\n        const ts = Array.prototype.slice.call(targetTouches);\n        const diffX = Math.abs(ts[1].pageX - ts[0].pageX);\n        const diffY = Math.abs(ts[1].pageY - ts[0].pageY);\n        const _x = Math.min(ts[1].pageX, ts[0].pageX) + diffX / 2;\n        const _y = Math.min(ts[1].pageY, ts[0].pageY) + diffY / 2;\n        let result = 0;\n\n        variables.points = [ts[0], ts[1]];\n\n        // result = Math.PI * Math.pow(distance({ x: ts[0].pageX, y: ts[1].pageX }, { x: ts[0].pageY, y: ts[1].pageY }) / 2, 2);\n        // result = Math.pow(Math.max(diffX, diffY), 2);\n\n        result = Math.pow(distance(\n            {\n                x: ts[0].pageX,\n                y: ts[0].pageY\n            },\n\n            {\n                x: ts[1].pageX,\n                y: ts[1].pageY\n            }\n        ), 2);\n        // result = (Math.abs(ts[0].pageX - ts[1].pageX) || 1) * (Math.abs(ts[0].pageY - ts[1].pageY) || 1);\n\n        variables.centerPoint = { x: _x, y: _y };\n\n        variables.x = variables.centerPoint.x;\n        variables.y = variables.centerPoint.y;\n\n        return result;\n    };\n\n    const getScale = (space) => { return space / baseSpace; };\n\n    const getTouches = (e, cache) => {\n        let result;\n        const originEvent = e.getOriginEvent();\n\n        if (originEvent.targetTouches && originEvent.changedTouches) {\n            if (originEvent.targetTouches) {\n                result = originEvent.targetTouches;\n            } else {\n                result = originEvent.changedTouches;\n            }\n\n            result = Array.prototype.slice.call(result);\n        } else {\n            // fucking ie 11 does not support Array.from()\n            result = [];\n            if (cache) {\n                cache.forEach((v) => {\n                    result.push(v);\n                });\n            }\n        }\n\n        return result;\n    };\n\n    const cacheEvent = (e, cache, justSame) => {\n        let result = false;\n\n        if (e.pointerId && e.pointerType === 'touch' && (!justSame || cache.has(e.pointerId))) {\n            cache.set(e.pointerId, e);\n            result = true;\n        }\n        return result;\n    };\n\n    const removeCache = (e, cache) => {\n        if (e.pointerId && e.pointerType === 'touch' && cache && cache.has(e.pointerId)) {\n            // compressor does not want to compress\n            cache['delete'](e.pointerId);\n        }\n    };\n\n    const getEventId = (e) => {\n        var result;\n\n        if (e.pointerId && e.pointerType === 'touch') {\n            result = e.pointerId;\n        } else {\n            result = e.identifier;\n        }\n\n        return result;\n    };\n\n    const addActivePoints = (targetTouches, container) => {\n        var i;\n        var id;\n        var result = false;\n\n        for (i = 0; i < targetTouches.length; i++) {\n            if (container.length === 2) {\n                break;\n            } else {\n                id = getEventId(targetTouches[i]);\n                if (!$J.contains(container, id)) {\n                    container.push(id);\n                    result = true;\n                }\n            }\n        }\n\n        return result;\n    };\n\n    const getIds = (targetTouches) => {\n        var result = [];\n\n        targetTouches.forEach(function (value) {\n            result.push(getEventId(value));\n        });\n\n        return result;\n    };\n\n    const removeActivePoint = (targetTouches, container) => {\n        var i;\n        var ids;\n        var result = false;\n\n        if (container) {\n            ids = getIds(targetTouches);\n            for (i = 0; i < container.length; i++) {\n                if (!$J.contains(ids, container[i])) {\n                    container.splice(i, 1);\n                    result = true;\n                    break;\n                }\n            }\n        }\n\n        return result;\n    };\n\n    const getActivePoints = (targetTouches, container) => {\n        var i;\n        var result = [];\n\n        for (i = 0; i < targetTouches.length; i++) {\n            if ($J.contains(container, getEventId(targetTouches[i]))) {\n                result.push(targetTouches[i]);\n                if (result.length === 2) {\n                    break;\n                }\n            }\n        }\n\n        return result;\n    };\n\n    const removePinchEnd = (el) => {\n        const target = el.fetch('event:pinch:target');\n        if (target) { target.removeEvent(['touchend'], el.fetch('event:pinch:listeners:document:end')); }\n        el.del('event:pinch:target');\n    };\n\n    const clearCache = (el) => {\n        const cache = el.fetch('event:pinch:cache');\n        if (cache) { cache.clear(); }\n        el.del('event:pinch:cache');\n    };\n\n    class Pinch extends $J.Events.Custom {\n        constructor(e, target, state, variables) {\n            super(e);\n            this.type = 'pinch';\n\n            this.target = target.node;\n            this.state = state; // pinchmove / pinchend / pinchresize\n\n            this.x = variables.x;\n            this.y = variables.y;\n\n            this.scale = variables.scale;\n            this.space = variables.space;\n            this.zoom = variables.zoom;\n            this.state = state;\n            this.centerPoint = variables.centerPoint;\n\n            this.points = variables.points;\n\n            this.pushToEvents(e);\n        }\n    }\n\n    const _variables = {\n        x: 0,\n        y: 0,\n        space: 0,\n        scale: 1,\n        zoom: 0,\n        startSpace: 0,\n        startScale: 1,\n        started: false,\n        dragged: false,\n        points: [],\n        centerPoint: { x: 0, y: 0 }\n    };\n\n    const setVariables = (targetTouches, variables) => {\n        const lastSpace = variables.space;\n\n        if (targetTouches.length > 1) {\n            variables.space = getSpace(targetTouches, variables);\n\n            if (!variables.startSpace) {\n                variables.startSpace = variables.space;\n            }\n\n            if (lastSpace > variables.space) {\n                variables.zoom = -1;\n            } else if (lastSpace < variables.space) {\n                variables.zoom = 1;\n            } else {\n                variables.zoom = 0;\n            }\n\n            variables.scale = getScale(variables.space);\n        } else {\n            variables.points = [];\n        }\n    };\n\n    // const onClick = function (e) { e.stop(); };\n\n    const onTouchMove = function (e) {\n        let pinchEvent;\n        let variables = this.fetch('event:pinch:variables');\n        const cache = this.fetch('event:pinch:cache');\n        const currentActivePoints = this.fetch('event:pinch:activepoints');\n\n        if (!variables) {\n            variables = $J.extend({}, $J.detach(_variables));\n        }\n\n        if (variables.started) {\n            if (e.pointerId && !cacheEvent(e, cache, true)) { return; }\n            e.stop();\n\n            setVariables(getActivePoints(getTouches(e, cache), currentActivePoints), variables);\n            pinchEvent = new Pinch(e, this, 'pinchmove', variables);\n            this.callEvent('pinch', pinchEvent);\n        }\n    };\n\n    const onTouchStart = function (e) {\n        let pinchEventStart;\n        let variables;\n        let cache = this.fetch('event:pinch:cache');\n        let currentActivePoints = this.fetch('event:pinch:activepoints');\n\n        if (e.pointerType === 'mouse') { return; }\n\n        if (!currentActivePoints) {\n            currentActivePoints = [];\n            this.store('event:pinch:activepoints', currentActivePoints);\n        }\n\n        if (!cache) {\n            cache = new Map();\n            this.store('event:pinch:cache', cache);\n        }\n\n        if (!this.fetch('event:pinch:target')) {\n            this.store('event:pinch:target', $(e.getTarget()));\n            $(e.getTarget()).addEvent(['touchend'], this.fetch('event:pinch:listeners:document:end'), 1);\n        }\n\n        cacheEvent(e, cache);\n        const targetTouches = getTouches(e, cache);\n        addActivePoints(targetTouches, currentActivePoints);\n\n        if (targetTouches.length === 2) {\n            pinchEventStart = this.fetch('event:pinch:pinchstart');\n            variables = this.fetch('event:pinch:variables');\n            if (!variables) {\n                variables = $J.extend({}, $J.detach(_variables));\n            }\n\n            setVariables(getActivePoints(targetTouches, currentActivePoints), variables);\n            if (!pinchEventStart) {\n                pinchEventStart = new Pinch(e, this, 'pinchstart', variables);\n\n                this.store('event:pinch:pinchstart', pinchEventStart);\n                this.store('event:pinch:variables', variables);\n\n                baseSpace = variables.space;\n\n                this.callEvent('pinch', pinchEventStart);\n                variables.started = true;\n            }\n        }\n    };\n\n    const onTouchEnd = function (e) {\n        let pinchEvent;\n        let _event;\n        const cache = this.fetch('event:pinch:cache');\n\n        if (e.pointerType === 'mouse' || e.pointerId && (!cache || !cache.has(e.pointerId))) { return; }\n\n        pinchEvent = this.fetch('event:pinch:pinchstart');\n        const variables = this.fetch('event:pinch:variables');\n        const currentActivePoints = this.fetch('event:pinch:activepoints');\n\n        const targetTouches = getTouches(e, cache);\n        removeCache(e, cache);\n\n        const removingResult = removeActivePoint(targetTouches, currentActivePoints);\n\n        if (!pinchEvent || (!variables || !variables.started) || !removingResult || !currentActivePoints) { return; }\n\n        if (removingResult) {\n            addActivePoints(targetTouches, currentActivePoints);\n        }\n\n        _event = 'pinchend';\n        if (targetTouches.length > 1) {\n            _event = 'pinchresize';\n        } else {\n            this.del('event:pinch:pinchstart');\n            this.del('event:pinch:variables');\n            this.del('event:pinch:activepoints');\n            clearCache(this);\n            removePinchEnd(this);\n        }\n\n        setVariables(getActivePoints(targetTouches, currentActivePoints), variables);\n        pinchEvent = new Pinch(e, this, _event, variables);\n        this.callEvent('pinch', pinchEvent);\n    };\n\n    const handler = {\n        add: function (options) {\n            if (!baseSpace) {\n                baseSpace = (() => {\n                    const s = $J.W.getSize();\n                    s.width = Math.min(s.width, s.height);\n                    s.height = s.width;\n                    // var s = { width: 375, height: 812 };\n                    return Math.pow(distance({ x: 0, y: 0 }, { x: s.width, y: s.height }), 2);\n                })();\n            }\n\n            const move = onTouchMove.bind(this);\n            const end = onTouchEnd.bind(this);\n\n            // this.addEvent(['click', 'tap'], onClick, 1);\n            this.addEvent(['touchstart', 'pointerdown'], onTouchStart, 1);\n            // this.addEvent(['touchend', 'pointerup'], onTouchEnd, 1);\n            this.addEvent(['pointerup'], onTouchEnd, 1);\n            this.addEvent(['touchmove', 'pointermove'], onTouchMove, 1);\n\n\n            this.store('event:pinch:listeners:document:move', move);\n            this.store('event:pinch:listeners:document:end', end);\n\n            $(DOC).addEvent('pointermove', move, 1);\n            $(DOC).addEvent('pointerup', end, 1);\n        },\n\n        remove: function () {\n            const f = () => {};\n\n            // this.removeEvent(['click', 'tap'], onClick);\n            this.removeEvent(['touchstart', 'pointerdown'], onTouchStart);\n            // this.removeEvent(['touchend', 'pointerup'], onTouchEnd);\n            this.removeEvent(['pointerup'], onTouchEnd);\n            this.removeEvent(['touchmove', 'pointermove'], onTouchMove);\n\n            $(DOC).removeEvent('pointermove', this.fetch('event:pinch:listeners:document:move') || f, 1);\n            $(DOC).removeEvent('pointerup', this.fetch('event:pinch:listeners:document:end') || f, 1);\n\n            this.del('event:pinch:listeners:document:move');\n            this.del('event:pinch:listeners:document:end');\n\n            removePinchEnd(this);\n            clearCache(this);\n            this.del('event:pinch:variables');\n            this.del('event:pinch:activepoints');\n            this.del('event:pinch:pinchstart');\n        }\n    };\n\n    $J.Events.handlers.pinch = handler;\n})(magicJS);\n\n/* eslint-env es6 */\n/* global magicJS, DOC, UND */\n\n\n(($J) => {\n    let eventType = 'wheel';\n\n    if (!('onwheel' in DOC || $J.browser.ieMode > 8)) {\n        eventType = 'mousewheel';\n    }\n\n    class Mousescroll extends $J.Events.Custom {\n        constructor(e, target, delta, deltaX, deltaY, deltaZ, deltaFactor) {\n            super(e);\n            const r = e.getPageXY();\n            this.x = r.x;\n            this.y = r.y;\n            this.type = 'mousescroll';\n            // this.timeStamp = e.timeStamp;\n            this.target = target.node;\n\n            this.delta = delta || 0;\n            this.deltaX = deltaX || 0;\n            this.deltaY = deltaY || 0;\n            this.deltaZ = deltaZ || 0;\n            this.deltaFactor = deltaFactor || 0;\n            this.deltaMode = e.deltaMode || 0;\n            this.isMouse = false;\n\n            this.pushToEvents(e);\n        }\n    }\n\n\n    let lowestDelta;\n    let resetDeltaTimer;\n\n    const resetDelta = () => {\n        lowestDelta = null;\n    };\n\n    const isMouse = (deltaFactor, deltaMode) => {\n        return (deltaFactor > 50)\n            || (deltaMode === 1 && !($J.browser.platform === 'win' && deltaFactor < 1)) // Firefox\n            || (deltaFactor % 12 === 0) // Safari\n            || (deltaFactor % 4.000244140625 === 0); // Chrome on OS X\n    };\n\n    const handle = function (e) {\n        let delta = 0;\n        let deltaX = 0;\n        let deltaY = 0;\n        let absDelta = 0;\n        const originEvent = e.getOriginEvent();\n\n        // DomMouseScroll event\n        if (originEvent.detail) {\n            deltaY = e.detail * -1;\n        }\n\n        // mousewheel event\n        if (originEvent.wheelDelta !== UND) { deltaY = originEvent.wheelDelta; }\n        if (originEvent.wheelDeltaY !== UND) { deltaY = originEvent.wheelDeltaY; }\n        if (originEvent.wheelDeltaX !== UND) { deltaX = originEvent.wheelDeltaX * -1; }\n\n\n        // wheel event\n        if (originEvent.deltaY) { deltaY = -1 * originEvent.deltaY; }\n        if (originEvent.deltaX) { deltaX = originEvent.deltaX; }\n\n        if (deltaY === 0 && deltaX === 0) {\n            return;\n        }\n        delta = deltaY === 0 ? deltaX : deltaY;\n\n        absDelta = Math.max(Math.abs(deltaY), Math.abs(deltaX));\n        if (!lowestDelta || absDelta < lowestDelta) {\n            lowestDelta = absDelta;\n        }\n        const calc = delta > 0 ? 'floor' : 'ceil';\n\n        delta = Math[calc](delta / lowestDelta);\n        deltaX = Math[calc](deltaX / lowestDelta);\n        deltaY = Math[calc](deltaY / lowestDelta);\n\n        if (resetDeltaTimer) {\n            clearTimeout(resetDeltaTimer);\n        }\n        resetDeltaTimer = setTimeout(resetDelta, 200);\n        const _event = new Mousescroll(e, this, delta, deltaX, deltaY, 0, lowestDelta);\n        _event.isMouse = isMouse(lowestDelta, originEvent.deltaMode || 0);\n\n        this.callEvent('mousescroll', _event);\n    };\n\n    const handler = {\n        add: function () {\n            this.addEvent(eventType, handle, 1);\n        },\n\n        remove: function () {\n            this.removeEvent(eventType, handle, 1);\n        }\n    };\n\n    $J.Events.handlers.mousescroll = handler;\n})(magicJS);\n\n/**\n * Do the last things. Extend window, document, etc.\n */\n\n$J.W = $J.$(WIN);\n$J.D = $J.$(DOC);\n$J.U = UND;\n\n$J.DPPX = (window.devicePixelRatio >= 2) ? 2 : 1; // Dots per px. 2 - is equal to Retina.;\n\nreturn magicJS;\n}());\n\n/* eslint no-throw-literal: \"off\"*/\n/* eslint no-restricted-properties: \"off\" */\n/* eslint no-restricted-syntax: [\"error\",  \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n/* eslint consistent-return: \"off\"*/\n/* eslint class-methods-use-this: \"off\"*/\n/* eslint no-unused-expressions: \"off\"*/\n/* eslint no-undef: \"off\"*/\n/* eslint no-shadow: [\"error\", { \"allow\": [\"t\", duration] }]*/\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n/* eslint guard-for-in: \"off\"*/\n/* eslint-env es6*/\n\n(($J) => {\n    if (!$J) {\n        throw 'MagicJS not found';\n    }\n    if ($J.FX) { return; }\n\n    const $ = $J.$;\n\n    /**\n     * Basic transition effects\n     * @class\n     * @constant\n     * @static\n     */\n    const TRANSITION = {\n        linear: 'linear',\n\n        sineIn: 'easeInSine',\n        sineOut: 'easeOutSine',\n\n        expoIn: 'easeInExpo',\n        expoOut: 'easeOutExpo',\n\n        quadIn: 'easeInQuad',\n        quadOut: 'easeOutQuad',\n\n        cubicIn: 'easeInCubic',\n        cubicOut: 'easeOutCubic',\n\n        backIn: 'easeInBack',\n        backOut: 'easeOutBack',\n\n\n        elasticIn: (p, x) => {\n            x = x || [];\n            return Math.pow(2, 10 * --p) * Math.cos(20 * p * Math.PI * (x[0] || 1) / 3);\n        },\n\n        elasticOut:(p, x) => {\n            return 1 - TRANSITION.elasticIn(1 - p, x);\n        },\n\n        bounceIn: (p) => {\n            for (let a = 0, b = 1; 1; a += b, b /= 2) {\n                if (p >= (7 - 4 * a) / 11) {\n                    return b * b - Math.pow((11 - 6 * a - 11 * p) / 4, 2);\n                }\n            }\n        },\n\n        bounceOut: (p) => {\n            return 1 - TRANSITION.bounceIn(1 - p);\n        },\n\n        none: (x) => {\n            return 0;\n        },\n    };\n\n    /**\n     * @class\n     * Class that applies animation to an element\n     * @example\n     * simple usage:\n     * new $J.FX(el1), {\n     *  'duration': 400\n     * }).start({width:[startWidth, endWidth]});\n     * @constructs\n     * @param {String|Element} el Element to applied an effect\n     * @param [opt] Options\n     * @param {Number} opt.fps FPS\n     * @param {Number} opt.duration Effect duration in miliseconds\n     * @param {Function|String} opt.transition  Easing function\n     * @param {Function|String} opt.cycles  The number of times the animation should repeat. Default is 1\n     * @param {String} opt.direction  Indicates how the animation should play each cycle. Possible values:\n     *                  normal - Default. The animation should play forward each cycle.\n     *                  alternate - The animation should reverse direction each cycle.\n     *                  reverse - The animation plays backward each cycle.\n     *                  alternate-reverse - The animation starts backward, then continues to alternate.\n     *                  continuous - The animation plays forward continuously (w/o cycles)\n     *                  continuous-reverse - The animation plays backward continuously (w/o cycles)\n     * @param {Function} opt.onStart Callback called when animation starts\n     * @param {Function} opt.onComplete Callback called when animation completes\n     * @param {Function} opt.onBeforeRender Callback called before each step of changing CSS properties\n     * @param {Function} opt.onAfterRender Callback called after each step of changing CSS properties\n     * @param {Boolean} opt.roundCss Use Math.round() when calculating css steps values\n     */\n    class FX {\n        constructor(el /* can be array */, opt) {\n            this.styles = null;\n            this.cubicBezier = null;\n            this.easeFn = null;\n\n            this.state = 0; // 0 - init,  1 - started, 2 - started, 3 - ended\n            this.pStyles = []; // styles set in percent\n\n            this.alternate = false;\n            this.continuous = false;\n\n            this.startTime = null;\n            this.finishTime = null;\n            this.options = {\n                fps: 60,\n                duration: 600,\n                // transition: function(x) {return  -(Math.cos(Math.PI * x) - 1) / 2},\n                transition: 'ease',\n                cycles: 1,\n                direction: 'normal', // normal | reverse | alternate | alternate-reverse | continuous | continuous-reverse\n                onStart: () => {},\n                onComplete: () => {},\n                onBeforeRender: () => {},\n                onAfterRender: () => {},\n                forceAnimation: false,\n                roundCss: false // use Math.round() when calculating css steps values\n            };\n\n            this.els = [];\n            if (!Array.isArray(el)) {\n                el = [el];\n            }\n\n            el.forEach((_el) => {\n                if (_el) {\n                    this.els.push($(_el));\n                }\n            });\n\n            this.options = $J.extend(this.options, opt);\n            this.timer = false;\n\n            this.setTransition(this.options.transition);\n\n            if ($J.typeOf(this.options.cycles) === 'string') {\n                this.options.cycles = this.options.cycles === 'infinite' ? Infinity : parseInt(this.options.cycles, 10) || 1;\n            }\n        }\n\n        static getTransition() {\n            return TRANSITION;\n        }\n\n        setTransition(easing) {\n            this.options.transition = easing;\n            // this.easeFn = this.cubicBezierAtTime;\n            this.easeFn = FX.cubicBezierAtTime;\n            const _easing = TRANSITION[this.options.transition] || this.options.transition;\n            if ($J.typeOf(_easing) === 'function') {\n                this.easeFn = _easing;\n            } else {\n                this.cubicBezier = this.parseCubicBezier(_easing) || this.parseCubicBezier('ease');\n            }\n        }\n\n        /**\n         * Start animation\n         */\n        start(styles /**Hash*/) {\n            const runits = /\\%$/;\n            let s;\n            let i;\n            if (this.state === 2) { return this; }\n\n            this.state = 1;\n            this.cycle = 0;\n\n            this.alternate = $J.contains(['alternate', 'alternate-reverse'], this.options.direction);\n            this.continuous = $J.contains(['continuous', 'continuous-reverse'], this.options.direction);\n\n            if (!styles) { styles = {}; }\n\n            if (!Array.isArray(styles)) {\n                styles = [styles];\n            }\n\n            this.styles = styles;\n\n            const l = this.styles.length;\n\n            this.pStyles = new Array(l);\n\n            for (i = 0; i < l; i++) {\n                this.pStyles[i] = {};\n\n                for (s in this.styles[i]) {\n                    if (runits.test(this.styles[i][s][0])) {\n                        this.pStyles[s] = true;\n                    }\n\n                    if ($J.contains(['reverse', 'alternate-reverse', 'continuous-reverse'], this.options.direction)) {\n                        this.styles[i][s].reverse();\n                    }\n                }\n            }\n\n            this.startTime = $J.now();\n            this.finishTime = this.startTime + this.options.duration;\n\n            this.options.onStart();\n\n            if (this.options.duration === 0) { // apply all styles immediately\n                this.render(1.0);\n                this.options.onComplete(this.els.length < 2 ? this.els[0] : this.els);\n            } else {\n                this.state = 2;\n                if (!this.options.forceAnimation && $J.browser.features.requestAnimationFrame) {\n                    this.timer = $J.browser.requestAnimationFrame.call($J.W.node, this.loop.bind(this));\n                } else {\n                    this.timer = setInterval(() => { this.loop(); }, Math.round(1000 / this.options.fps));\n                }\n            }\n\n            return this;\n        }\n\n        stopAnimation() {\n            if (this.timer) {\n                if (!this.options.forceAnimation && $J.browser.features.requestAnimationFrame && $J.browser.cancelAnimationFrame) {\n                    $J.browser.cancelAnimationFrame.call($J.W.node, this.timer);\n                } else {\n                    clearInterval(this.timer);\n                }\n                this.timer = false;\n            }\n        }\n\n        /**\n         * Stop animation\n         */\n        stop(complete /** Boolean*/) {\n            if ($J.contains([0, 3], this.state)) { return this; }\n\n            if (!$J.defined(complete)) {\n                complete = false;\n            }\n\n            this.stopAnimation();\n\n            this.state = 3;\n\n            if (complete) {\n                this.render(1.0);\n                // clearTimeout(this._completeTimer);\n                // this._completeTimer = setTimeout(() => {\n                this.options.onComplete(this.els.length < 2 ? this.els[0] : this.els);\n                // }, 10);\n            }\n            return this;\n        }\n\n        /**\n         * @ignore\n         */\n        loop() {\n            const _now = $J.now();\n            let i;\n            const dx = (_now - this.startTime) / this.options.duration;\n            const cycle = Math.floor(dx);\n\n            if (_now >= this.finishTime && cycle >= this.options.cycles) {\n                this.stopAnimation();\n                this.render(1.0);\n\n                // clearTimeout(this._completeTimer);\n                // this._completeTimer = setTimeout(() => {\n                this.options.onComplete(this.els.length < 2 ? this.els[0] : this.els);\n                // }, 10);\n\n                return this;\n            }\n\n            if (this.alternate && this.cycle < cycle) {\n                for (i = 0; i < this.styles.length; i++) {\n                    for (const s in this.styles[i]) {\n                        this.styles[i][s].reverse();\n                    }\n                }\n            }\n\n            this.cycle = cycle;\n\n            if (!this.options.forceAnimation && $J.browser.features.requestAnimationFrame) {\n                this.timer = $J.browser.requestAnimationFrame.call($J.W.node, this.loop.bind(this));\n            }\n\n            this.render((this.continuous ? cycle : 0) + this.easeFn(dx % 1, this.options.duration, this.cubicBezier));\n        }\n\n        /**\n         * ignore\n         */\n        render(dx) {\n            let i;\n            const css = [];\n            let _el;\n            let _css;\n            const l = this.els.length;\n\n            for (i = 0; i < l; i++) {\n                css.push(this.renderOverLoad(dx, this.els[i], this.styles[i], this.pStyles[i]));\n            }\n\n            _el = this.els;\n            _css = css;\n\n            if (l < 2) {\n                _el = this.els[0];\n                _css = css[0];\n            }\n\n            this.options.onBeforeRender(_css, _el);\n            this.set(css);\n            this.options.onAfterRender(_css, _el);\n        }\n\n        /**\n         * ignore\n         */\n        renderOverLoad(dx, el, styles, pStyles) {\n            const css = {};\n            const change = dx; // eslint-disable-line no-unused-vars\n            let s;\n            for (s in styles) {\n                if (s === 'opacity') {\n                    css[s] = Math.round(this.calc(styles[s][0], styles[s][1], dx) * 100) / 100;\n                } else {\n                    css[s] = this.calc(styles[s][0], styles[s][1], dx);\n                    // if (this.options.roundCss) { css[s] = Math.round(css[s]); } //       -     \n\n                    // Styles defined in percent. Ap\n                    pStyles[s] && (css[s] += '%');\n                }\n            }\n\n            return css;\n        }\n\n        /**\n         * @ignore\n         */\n        calc(from, to, dx) {\n            from = parseFloat(from);\n            to = parseFloat(to);\n            return (to - from) * dx + from;\n        }\n\n        /**\n         * @ignore\n        */\n        set(css) {\n            for (let i = 0; i < this.els.length; i++) {\n                this.els[i].setCss(css[i]);\n            }\n\n            return this;\n        }\n\n        /**\n         *\n         * Parse timing function string\n         *\n         * @ignore\n         * @example\n         * 'cubic-bezier(.0,1.0,.34,.1)'\n         * 'ease-in-out'\n         */\n        parseCubicBezier(cubicbezier) {\n            let i;\n            let points = null;\n            if ($J.typeOf(cubicbezier) !== 'string') { return null; }\n\n            switch (cubicbezier) {\n                // Standard\n                case 'linear':\n                    points = $([0.000, 0.000, 1.000, 1.000]);\n                    break;\n                case 'ease':\n                    points = $([0.250, 0.100, 0.250, 1.000]);\n                    break;\n                case 'ease-in':\n                    points = $([0.420, 0.000, 1.000, 1.000]);\n                    break;\n                case 'ease-out':\n                    points = $([0.000, 0.000, 0.580, 1.000]);\n                    break;\n                case 'ease-in-out':\n                    points = $([0.420, 0.000, 0.580, 1.000]);\n                    break;\n\n                // Sine\n                // case 'easeInSine':\n                //     points = $([0.470, 0.000, 0.745, 0.715]);\n                //     break;\n                // case 'easeOutSine':\n                //     points = $([0.39, 0.575, 0.565, 1.000]);\n                //     break;\n                // case 'easeInOutSine':\n                //     points = $([0.445, 0.050, 0.550, 0.950]);\n                //     break;\n\n                // Quad\n                // case 'easeInQuad':\n                //     points = $([0.550, 0.085, 0.680, 0.530]);\n                //     break;\n                // case 'easeOutQuad':\n                //     points = $([0.250, 0.460, 0.450, 0.940]);\n                //     break;\n                // case 'easeInOutQuad':\n                //     points = $([0.455, 0.030, 0.515, 0.955]);\n                //     break;\n\n                // Cubic\n                // case 'easeInCubic':\n                //     points = $([0.550, 0.055, 0.675, 0.190]);\n                //     break;\n                // case 'easeOutCubic':\n                //     points = $([0.215, 0.610, 0.355, 1.000]);\n                //     break;\n                // case 'easeInOutCubic':\n                //     points = $([0.645, 0.045, 0.355, 1.000]);\n                //     break;\n\n                // Quart\n                // case 'easeInQuart':\n                //     points = $([0.895, 0.030, 0.685, 0.220]);\n                //     break;\n                // case 'easeOutQuart':\n                //     points = $([0.165, 0.840, 0.440, 1.000]);\n                //     break;\n                // case 'easeInOutQuart':\n                //     points = $([0.770, 0.000, 0.175, 1.000]);\n                //     break;\n\n                // Quint\n                // case 'easeInQuint':\n                //     points = $([0.755, 0.050, 0.855, 0.060]);\n                //     break;\n                // case 'easeOutQuint':\n                //     points = $([0.230, 1.000, 0.320, 1.000]);\n                //     break;\n                // case 'easeInOutQuint':\n                //     points = $([0.860, 0.000, 0.070, 1.000]);\n                //     break;\n\n                // Expo\n                // case 'easeInExpo':\n                //     points = $([0.950, 0.050, 0.795, 0.035]);\n                //     break;\n                // case 'easeOutExpo':\n                //     points = $([0.190, 1.000, 0.220, 1.000]);\n                //     break;\n                // case 'easeInOutExpo':\n                //     points = $([1.000, 0.000, 0.000, 1.000]);\n                //     break;\n\n                // Circ\n                // case 'easeInCirc':\n                //     points = $([0.600, 0.040, 0.980, 0.335]);\n                //     break;\n                // case 'easeOutCirc':\n                //     points = $([0.075, 0.820, 0.165, 1.000]);\n                //     break;\n                // case 'easeInOutCirc':\n                //     points = $([0.785, 0.135, 0.150, 0.860]);\n                //     break;\n\n                // Back\n                // case 'easeInBack':\n                //     points = $([0.600, -0.280, 0.735, 0.045]);\n                //     break;\n                // case 'easeOutBack':\n                //     points = $([0.175, 0.885, 0.320, 1.275]);\n                //     break;\n                // case 'easeInOutBack':\n                //     points = $([0.680, -0.550, 0.265, 1.550]);\n                //     break;\n                default:\n                    cubicbezier = cubicbezier.replace(/\\s/g, '');\n                    if (cubicbezier.match(/^cubic-bezier\\((?:-?[0-9\\.]{0,}[0-9]{1,},){3}(?:-?[0-9\\.]{0,}[0-9]{1,})\\)$/)) {\n                        points = cubicbezier.replace(/^cubic-bezier\\s*\\(|\\)$/g, '').split(',');\n                        for (i = points.length - 1; i >= 0; i--) {\n                            points[i] = parseFloat(points[i]);\n                        }\n                    }\n            }\n\n            return $(points);\n        }\n\n        // From: http://www.netzgesta.de/dev/cubic-bezier-timing-function.html\n        // 1:1 conversion to js from webkit source files\n        // UnitBezier.h, WebCore_animation_AnimationBase.cpp\n        static cubicBezierAtTime(t, duration, cubicBezier) {\n            let ax = 0;\n            let bx = 0;\n            let cx = 0;\n            let ay = 0;\n            let by = 0;\n            let cy = 0;\n\n            // `ax t^3 + bx t^2 + cx t' expanded using Horner's rule.\n            const sampleCurveX = (t) => {\n                return ((ax * t + bx) * t + cx) * t;\n            };\n            const sampleCurveY = (t) => {\n                return ((ay * t + by) * t + cy) * t;\n            };\n            const sampleCurveDerivativeX = (t) => {\n                return (3.0 * ax * t + 2.0 * bx) * t + cx;\n            };\n            // The epsilon value to pass given that the animation is going to run over |dur| seconds. The longer the\n            // animation, the more precision is needed in the timing function result to avoid ugly discontinuities.\n            const solveEpsilon = (duration) => {\n                return 1.0 / (200.0 * duration);\n            };\n\n            // const solve = (x, epsilon) => {\n            //     return sampleCurveY(solveCurveX(x, epsilon));\n            // };\n\n            // Given an x value, find a parametric value it came from.\n            const solveCurveX = (x, epsilon) => {\n                let t0;\n                let t1;\n                let t2;\n                let x2;\n                let d2;\n                let i;\n\n                const fabs = (n) => {\n                    if (n >= 0) {\n                        return n;\n                    }\n\n                    return 0 - n;\n                };\n                // First try a few iterations of Newton's method -- normally very fast.\n                for (t2 = x, i = 0; i < 8; i++) {\n                    x2 = sampleCurveX(t2) - x;\n                    if (fabs(x2) < epsilon) {\n                        return t2;\n                    }\n\n                    d2 = sampleCurveDerivativeX(t2);\n                    if (fabs(d2) < 1e-6) {\n                        break;\n                    }\n\n                    t2 -= x2 / d2;\n                }\n                // Fall back to the bisection method for reliability.\n                t0 = 0.0;\n                t1 = 1.0;\n                t2 = x;\n                if (t2 < t0) {\n                    return t0;\n                }\n                if (t2 > t1) {\n                    return t1;\n                }\n\n                while (t0 < t1) {\n                    x2 = sampleCurveX(t2);\n                    if (fabs(x2 - x) < epsilon) {\n                        return t2;\n                    }\n                    if (x > x2) {\n                        t0 = t2;\n                    } else {\n                        t1 = t2;\n                    }\n                    t2 = (t1 - t0) * 0.5 + t0;\n                }\n                return t2; // Failure.\n            };\n\n            const solve = (x, epsilon) => {\n                return sampleCurveY(solveCurveX(x, epsilon));\n            };\n\n            // Calculate the polynomial coefficients, implicit first and last control points are (0,0) and (1,1).\n            cx = 3.0 * cubicBezier[0];\n            bx = 3.0 * (cubicBezier[2] - cubicBezier[0]) - cx;\n            ax = 1.0 - cx - bx;\n            cy = 3.0 * cubicBezier[1];\n            by = 3.0 * (cubicBezier[3] - cubicBezier[1]) - cy;\n            ay = 1.0 - cy - by;\n\n            // Convert from input time to parametric value in curve, then from that to output time.\n            return solve(t, solveEpsilon(duration));\n        }\n    }\n\n    $J.FX = FX;\n})(magicJS);\n\n/*eslint no-throw-literal: \"off\"*/\n/*eslint quote-props: [\"off\"]*/\n/* eslint no-restricted-syntax: [\"error\",  \"WithStatement\", \"BinaryExpression[operator='in']\"] */\n/*eslint guard-for-in: \"off\"*/\n/*eslint no-continue: \"off\"*/\n/*eslint no-else-return: \"off\"*/\n/*eslint no-undef: \"off\"*/\n/*eslint consistent-return: \"off\"*/\n/* eslint no-unused-vars: [\"error\", { \"args\": \"none\" }] */\n/*eslint no-prototype-builtins: \"off\"*/\n/*eslint dot-notation: [\"off\"]*/\n/*eslint-env es6*/\n\n(($J) => {\n    if (!$J) {\n        throw 'MagicJS not found';\n    }\n\n    if ($J.Options) { return; }\n\n    const $ = $J.$;\n\n    let globalValue = null;\n    const dataTypes = { 'boolean': 1, 'array': 2, 'number': 3, 'function': 4, 'url': 5, 'string': 100 };\n\n    const isAbsoluteUrl = (v) => {\n        return /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/i.test(v);\n    };\n\n    const typeValidators = {\n        'boolean': (option, v, strict) => {\n            if ($J.typeOf(v) !== 'boolean') {\n                if (strict || $J.typeOf(v) !== 'string') {\n                    return false;\n                } else if (!/^(true|false)$/.test(v)) {\n                    return false;\n                } else {\n                    v = !(v.replace(/true/i, '').trim());\n                }\n            }\n            if (option.hasOwnProperty('enum') && !$J.contains(option['enum'], v)) {\n                return false;\n            }\n\n            globalValue = v;\n            return true;\n        },\n\n        'url': (option, v, strict) => {\n            let result = false;\n\n            if ($J.typeOf(v) === 'string' && isAbsoluteUrl(v)) {\n                if (option.hasOwnProperty('enum')) {\n                    if ($J.contains(option['enum'], v)) {\n                        result = true;\n                    }\n                } else {\n                    result = true;\n                }\n            }\n\n            return result;\n        },\n\n        'string': (option, v, strict) => {\n            if ($J.typeOf(v) !== 'string') {\n                return false;\n            } else if (option.hasOwnProperty('enum') && !$J.contains(option['enum'], v)) {\n                return false;\n            } else {\n                globalValue = '' + v;\n                return true;\n            }\n        },\n\n        'number': (option, v, strict) => {\n            const r = /%$/;\n            const percent = ($J.typeOf(v) === 'string' && r.test(v));\n\n            // if (strict && typeof(v) !== 'number') {\n            if (strict && !'number' === typeof v) { // eslint-disable-line valid-typeof\n                return false;\n            }\n\n            v = parseFloat(v);\n            if (isNaN(v)) {\n                return false;\n            }\n\n            if (isNaN(option.minimum)) {\n                option.minimum = Number.NEGATIVE_INFINITY;\n            }\n            if (isNaN(option.maximum)) {\n                option.maximum = Number.POSITIVE_INFINITY;\n            }\n\n            if (option.hasOwnProperty('enum') && !$J.contains(option['enum'], v)) {\n                return false;\n            }\n            if (option.minimum > v || v > option.maximum) {\n                return false;\n            }\n\n            globalValue = percent ? (v + '%') : v;\n\n            return true;\n        },\n\n        'array': (option, v, strict) => {\n            if ($J.typeOf(v) === 'string') {\n                try {\n                    v = v.replace(/'/g, '\"');\n                    v = $J.W.node.JSON.parse(v);\n                } catch (ex) { return false; }\n            }\n            if ($J.typeOf(v) === 'array') {\n                globalValue = v;\n                return true;\n            } else {\n                return false;\n            }\n        },\n\n        'function': (option, v, strict) => {\n            if ($J.typeOf(v) === 'function') {\n                globalValue = v;\n                return true;\n            }\n            return false;\n        }\n    };\n\n    /**\n     * Validate parameter value\n     * @param  {object} param  parameter definition\n     * @param  {mixed} value  [description]\n     * @param  {boolean} strict Should stict validation be applied\n     * @return {boolean}        [description]\n     */\n    const validateParamValue = (param, value, strict) => {\n        const opts = param.hasOwnProperty('oneOf') ? param.oneOf : [param];\n        if ($J.typeOf(opts) !== 'array') { return false; }\n\n        for (let i = 0, l = opts.length - 1; i <= l; i++) {\n            if (typeValidators[opts[i].type](opts[i], value, strict)) { return true; }\n        }\n\n        return false;\n    };\n\n    /**\n     * Normalize schema parameter definition\n     * @param  {object} param parameter defition\n     * @return {object} normalized parameter definition\n     */\n    const normalizeParam = (param) => {\n        let i;\n        let j;\n        let oneOf; // eslint-disable-line no-unused-vars\n        let l;\n        let temp;\n        if (param.hasOwnProperty('oneOf')) {\n            l = param.oneOf.length;\n            for (i = 0; i < l; i++) {\n                for (j = i + 1; j < l; j++) {\n                    if (dataTypes[param.oneOf[i]['type']] > dataTypes[param.oneOf[j].type]) {\n                        temp = param.oneOf[i];\n                        param.oneOf[i] = param.oneOf[j];\n                        param.oneOf[j] = temp;\n                    }\n                }\n            }\n        }\n\n        return param;\n    };\n\n    /**\n     * Validate parameter definition\n     * @param  {object} param parameter definition\n     * @return {boolean}     [description]\n     */\n    const validateSchemaParam = (param) => {\n        // validate types\n        const opts = param.hasOwnProperty('oneOf') ? param.oneOf : [param];\n        if ($J.typeOf(opts) !== 'array') { return false; }\n        for (let i = opts.length - 1; i >= 0; i--) {\n            if (!opts[i].type || !dataTypes.hasOwnProperty(opts[i].type)) {\n                return false;\n            }\n            // validate enum option if present\n            if ($J.defined(opts[i]['enum'])) {\n                if ($J.typeOf(opts[i]['enum']) !== 'array') {\n                    return false;\n                }\n\n                for (let j = opts[i]['enum'].length - 1; j >= 0; j--) {\n                    if (!typeValidators[opts[i].type]({ 'type': opts[i].type }, opts[i]['enum'][j], true)) {\n                        return false;\n                    }\n                }\n            }\n        }\n\n        // validate default value\n        if (param.hasOwnProperty('defaults') && !validateParamValue(param, param['defaults'], true)) {\n            return false;\n        }\n\n        return true;\n    };\n\n    const isDefaults = (obj) => {\n        let i;\n        let result = false;\n        for (i in obj) {\n            if (i === 'defaults') {\n                result = true;\n                break;\n            }\n        }\n\n        return result;\n    };\n\n    const parseObj = (obj) => {\n        const result = {};\n        const parseVars = (map, pathTo) => {\n            let prop;\n            let _pathTo;\n            for (prop in map) {\n                _pathTo = pathTo.slice(0);\n                if ($J.typeOf(map[prop]) !== 'object' || isDefaults(map[prop])) {\n                    _pathTo.push(prop);\n                    result[_pathTo.join('.')] = map[prop];\n                } else {\n                    _pathTo.push(prop);\n                    parseVars(map[prop], _pathTo);\n                }\n            }\n        };\n\n        parseVars(obj, []);\n\n        return result;\n    };\n\n    const convertToDeepObj = (obj) => {\n        let key;\n        const result = {};\n        const setObjValue = (arr, value) => {\n            let tmp = result;\n            const l = arr.length;\n\n            if (arr[l - 1].trim() === '') {\n                arr.splice(l - 1, 1);\n            }\n\n            arr.forEach((v, index) => {\n                if (index === l - 1) {\n                    tmp[v] = value;\n                } else {\n                    if (!tmp[v]) { tmp[v] = {}; }\n                    tmp = tmp[v];\n                }\n            });\n        };\n\n        for (key in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                setObjValue(key.split('.'), obj[key]);\n            }\n        }\n\n        return result;\n    };\n\n    const normalizeString = (str) => {\n        return $J.camelize((str + '').trim());\n    };\n\n    class Options {\n        constructor(schema) {\n            this.schema = {};\n            this.options = {};\n            this.parseSchema(schema);\n        }\n\n        parseSchema(schema, force) {\n            let i;\n            let key;\n            schema = parseObj(schema);\n\n            for (i in schema) {\n                if (!schema.hasOwnProperty(i)) { continue; }\n\n                key = normalizeString(i);\n                if (!this.schema.hasOwnProperty(key) || force) {\n                    this.schema[key] = normalizeParam(schema[i]);\n                    if (!validateSchemaParam(this.schema[key])) {\n                        throw 'Incorrect definition of the \\'' + i + '\\' parameter in ' + schema;\n                    }\n\n                    // Preserve existing option value\n                    if ($J.defined(this.options[key])) {\n                        if (!this.checkValue(key, this.options[key])) {\n                            this.options[key] = $J.U;\n                        }\n                    } else {\n                        this.options[key] = $J.U;\n                    }\n                }\n            }\n        }\n\n        set(id, value) {\n            id = normalizeString(id);\n            if ($J.typeOf(value) === 'string') {\n                value = value.trim();\n            }\n\n            if (this.schema.hasOwnProperty(id)) {\n                globalValue = value;\n                if (validateParamValue(this.schema[id], value)) {\n                    this.options[id] = globalValue;\n                }\n                globalValue = null;\n            }\n        }\n\n        get(id) {\n            id = normalizeString(id);\n            if (this.schema.hasOwnProperty(id)) {\n                return $J.defined(this.options[id]) ? this.options[id] : this.schema[id]['defaults'];\n            }\n        }\n\n        fromJSON(obj) {\n            obj = parseObj(obj);\n            for (const i in obj) {\n                this.set(i, obj[i]);\n            }\n        }\n\n        getJSON() {\n            const json = $J.extend({}, this.options);\n            for (const i in json) {\n                if (json[i] === $J.U && this.schema[i]['defaults'] !== $J.U) {\n                    json[i] = this.schema[i]['defaults'];\n                }\n            }\n\n            return convertToDeepObj(json);\n        }\n\n        /**\n         * Set options from string\n         * @param    str     {String} String with options. Example - \"param1:value1;param2:value2;param3:value3; ....\"\n         * @param    exclude {Object} Object with regexps for options which we want to exclude. Example - { nameOfRegExp1: new RegExp('param2', 'g') }\n         * @returns          {Object} Object with options which were excluded. Example - { nameOfRegExp1: 'param2:value2;' }\n         */\n        fromString(str, exclude) {\n            const result = {};\n            if (!exclude) { exclude = {}; }\n\n            const check = (substr) => {\n                let key;\n                let _result = true;\n\n                substr = substr.trim();\n\n                for (key in exclude) {\n                    if (Object.prototype.hasOwnProperty.call(exclude, key)) {\n                        if (exclude[key].test && exclude[key].test(substr)) {\n                            if (!result[key]) { result[key] = ''; }\n                            result[key] += substr + ';';\n                            _result = false;\n                            break;\n                        }\n                    }\n                }\n\n                return _result;\n            };\n\n            str.split(';').forEach((chunk) => {\n                if (check(chunk)) {\n                    chunk = chunk.split(':');\n                    this.set(chunk.shift().trim(), chunk.join(':'));\n                }\n            });\n\n            return result;\n        }\n\n        checkValue(id, value) {\n            let result = false;\n\n            id = normalizeString(id);\n            if ($J.typeOf(value) === 'string') {\n                value = value.trim();\n            }\n\n            if (this.schema.hasOwnProperty(id)) {\n                globalValue = value;\n                if (validateParamValue(this.schema[id], value)) { result = true; }\n                globalValue = null;\n            }\n\n            return result;\n        }\n\n        exists(id) {\n            id = normalizeString(id);\n            return this.schema.hasOwnProperty(id);\n        }\n\n        isset(id) {\n            id = normalizeString(id);\n\n            return this.exists(id) && $J.defined(this.options[id]);\n        }\n\n        remove(id) {\n            id = normalizeString(id);\n            if (this.exists(id)) {\n                delete this.options[id];\n                delete this.schema[id];\n            }\n        }\n    }\n\n    $J.Options = Options;\n})(magicJS);\nreturn magicJS;\n    }\n);\n"],"file":"magicjs.js"}