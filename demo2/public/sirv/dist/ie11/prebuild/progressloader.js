Sirv.define("ProgressLoader",["bHelpers","magicJS","globalVariables","globalFunctions","helper","RoundLoader"],(function(e,t,s,r,i,n){var a=t,o=a.$;r.rootDOM.addModuleCSSByName("ProgressLoader",(function(){return".smv-progress-loader{pointer-events:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.smv-progress-loader .smv-pl-circle-wrapper,.smv-progress-loader .smv-pl-indicator,.smv-progress-loader .smv-pl-indicator .smv-pl-pie,.smv-progress-loader .smv-pl-indicator .smv-pl-slice,.smv-progress-loader .smv-pl-text-wrapper,.smv-progress-loader .smv-pl-wrapper{top:0;left:0;width:100%;height:100%}.smv-progress-loader .smv-pl-text-wrapper,.smv-progress-loader .smv-pl-wrapper{display:inline-block;position:relative}.smv-progress-loader .smv-pl-wrapper{transform:scale(0);transition:transform .15s cubic-bezier(.17,.67,.57,1.47),opacity .2s linear;border-radius:50%;background-color:rgba(0,0,0,.55);opacity:0}.smv-progress-loader .smv-pl-circle-wrapper,.smv-progress-loader .smv-pl-indicator,.smv-progress-loader .smv-pl-indicator .smv-pl-pie,.smv-progress-loader .smv-pl-indicator .smv-pl-slice{position:absolute}.smv-progress-loader .smv-pl-circle-wrapper,.smv-progress-loader .smv-pl-indicator{z-index:1}.smv-progress-loader .smv-pl-circle-wrapper{animation:sirv-pl-loader-rotate 2s infinite linear}.smv-progress-loader .smv-pl-indicator .smv-pl-pie,.smv-progress-loader .smv-pl-indicator .smv-pl-slice{stroke-width:2;fill:transparent}.smv-progress-loader .smv-pl-indicator .smv-pl-pie{z-index:1;stroke:rgba(255,255,255,.3)}.smv-progress-loader .smv-pl-indicator .smv-pl-slice{z-index:2;stroke:#fff;stroke-linecap:round}.smv-progress-loader .smv-pl-text-wrapper{display:inline-flex;position:relative;align-items:center;justify-content:center;font-size:12px;text-align:center;z-index:2}.smv-progress-loader .smv-pl-text-wrapper::after{display:inline-block;height:100%;content:'';vertical-align:middle}.smv-progress-loader .smv-pl-text-wrapper .smv-pl-text{display:inline;position:relative;color:#fff;font-weight:700}.smv-progress-loader .smv-pl-text-wrapper .smv-pl-text .smv-pl-text-percent{font-size:.7em}@keyframes sirv-pl-loader-rotate{from{transform:rotateZ(0)}to{transform:rotateZ(360deg)}}"}));var l=function(e,t){var s=o(a.D.node.createElementNS("http://www.w3.org/2000/svg",e));return t||(t={}),Object.entries(t).forEach((function(e){return s.attr.apply(s,e)})),s},p=0,c=1,d=2;return function(t){"use strict";function r(e,r){var i;return r=function(e){return e||(e={}),e.width||(e.width=44),e.height||(e.height=44),e.max||(e.max=0),e}(r),(i=t.call(this,e,r)||this).type="progress",i.lineSize=125,i.currentLineSize=125,i.currentPersent=0,i.currentValue=0,i.progressState=p,i.maxOpacityFlag=!1,i.maxOpacity=1,i.circles=[],i.size={width:i.options.width,height:i.options.height},i.state=s.APPEARANCE.HIDDEN,i._createCircles(),i}e.inheritsLoose(r,t);var i=r.prototype;return i.addClass=function(){this.node.addClass("smv-progress-loader")},i._createCircles=function(){this.p='<span class="smv-pl-text-percent">%</span>',this.loaderElement.addClass("smv-pl-wrapper"),this.circleWrapper=a.$new("div").addClass("smv-pl-circle-wrapper");var e=this.size.width,t=e/2;this.circles.push(l("circle",{class:"smv-pl-pie",r:t-2,cx:t,cy:t})),this.circles.push(l("circle",{class:"smv-pl-slice",r:t-2,cx:t,cy:t})),this.svg=l("svg",{class:"smv-pl-indicator",viewBox:"0 0 "+e+" "+e}),this.circles[1].node.style.strokeDasharray=this.lineSize,this.circles[1].node.style.strokeDashoffset=this.lineSize,o(this.circles[1]).addEvent("transitionend",(function(e){e.stop()})).setCssProp("transition","stroke-dashoffset .1s linear"),o(this.svg).append(this.circles[0]),o(this.svg).append(this.circles[1]),this.textWrapper=a.$new("div").addClass("smv-pl-text-wrapper"),this.text=a.$new("span").addClass("smv-pl-text"),this.text.changeContent(this.currentPersent+this.p),this.textWrapper.append(this.text),this.circleWrapper.append(this.svg),this.loaderElement.append(this.circleWrapper),this.loaderElement.append(this.textWrapper)},i.append=function(){this.progressState!==d&&t.prototype.append.call(this)},i.progress=function(){var e,t;this.progressState!==d&&(this.progressState=c,this.currentValue+=1,this.currentPersent=(e=this.options.max,t=this.currentValue,Math.round(100/(e/t))),this.currentLineSize=function(e,t){return e-e/100*t}(this.lineSize,this.currentPersent),this.circles[1].node.style.strokeDashoffset=this.currentLineSize,this.text.node.innerHTML=this.currentPersent+this.p,this.currentValue===this.options.max&&(this.progressState=d,this.hide()))},i.setMaxOpacity=function(e){!this.maxOpacityFlag&&this.loaderElement&&(this.maxOpacity=e,this.maxOpacityFlag=!0,this.loaderElement.setCssProp("opacity",e))},i.isEnded=function(){return this.currentValue===this.options.max},i.isStarted=function(){return this.currentValue>0},i.finishOff=function(){this.currentValue=this.options.max},i.isShow=function(){return this.state===s.APPEARANCE.SHOWN},i.show=function(){this.state!==s.APPEARANCE.SHOWN&&(this.state=s.APPEARANCE.SHOWN,this.append(),this.loaderElement.render(),this.loaderElement.removeEvent("transitionend"),this.loaderElement.addEvent("transitionend",(function(e){e.stop()})),this.loaderElement.setCss({display:"block",opacity:this.maxOpacity,transform:"scale(1)"}))},i.hide=function(e){var t=this;if((this.state!==s.APPEARANCE.HIDDEN||e)&&this.inDoc){var r=0;this.state=s.APPEARANCE.HIDDEN,clearTimeout(this.timer),this.timer=setTimeout((function(){t.loaderElement.removeEvent("transitionend"),t.loaderElement.addEvent("transitionend",(function(e){e.stop(),(r+=1)<2||(t.loaderElement.removeEvent("transitionend"),t.loaderElement.setCssProp("display","none"))})),t.loaderElement.setCss({opacity:0,transform:"scale(0)"})}),e?0:400)}},i.getProgressState=function(){return this.progressState},i.destroy=function(){this.hide(!0),clearTimeout(this.timer),this.currentPersent=0,this.currentValue=0,this.progressState=p,this.state=s.APPEARANCE.HIDDEN,this.loaderElement.removeEvent("transitionend"),this.loaderElement.node.innerHTML="",this.loaderElement=null,this.circleWrapper=null,this.textWrapper=null,this.circles=[],this.svg=null,this.text=null,this.inDoc=!1,t.prototype.destroy.call(this)},r}(n)}));